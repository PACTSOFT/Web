function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var o,s=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;o=Reflect.construct(s,arguments,n)}else o=s.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[114,141,150,160],{XnK4:function(e,t,o){"use strict";o.r(t),o.d(t,"ChequeDiscPostedDocumentViewModel",(function(){return f}));var s=o("Do2H"),n=o("Lp6j"),i=o("eQJW"),a=o("ScVY"),r=o("lUlH"),l=o("EQd/"),c=o("JIg3"),u=o("n56n"),h=o("8B8H"),D=o("0/4Q"),m=o("wlFP"),d=o("PDNK"),C=function(){function e(){_classCallCheck(this,e),this._Controls=[],this.CommonControls=[],this.ARAPControls=[],this.PosControls=[],this.LinkingControls=[],this.GroupCheckboxLinkingControls=[],this.Data=[],this._DocumentID=0,this._IsEdit=0,this.lstGroupBox=new Array}return _createClass(e,[{key:"LoadScreen",value:function(e,t){Logger.InfoLog("PreferenceControlGenerator:: Inside LoadScreen"),this.Data=null,this.OnLoad(e,t)}},{key:"LoadScreen_4",value:function(e,t,o,s){Logger.InfoLog("PreferenceControlGenerator:: Inside LoadScreen"),this._DocumentID=o,this._IsEdit=s,this.Data=null,this.OnLoad(e,t)}},{key:"OnLoad",value:function(e,t){try{if(null==this.Data&&(this.oParent=e,this.Data=this._DocumentID>0?this.GetScreenInfo_2(t,this._DocumentID):this.GetScreenInfo(t),null!=this.Data&&this.Data.Tables.length>0&&!this.Data.Columns[0].Contains("ErrorMessage")&&(this.CheckLicense(this.Data.Tables[0]),this.CheckLicense(this.Data.Tables[1]),this.CheckLicense(this.Data.Tables[4]),null!=this.Data&&this.Data.Tables[0].length>0))){this.Data.Tables[0].filter((function(e){return"BodyFreezeColumn"==e.DBText})),this.PosControls.Clear(),this.CommonControls.Clear(),this.ARAPControls.Clear(),this._Controls.Clear(),this.LinkingControls.Clear(),this.lstGroupBox.Clear();for(var o=0;o<this.Data.Tables[0].length;o++)this.SetProperties_Static(this.Data.Tables[0][o],this.Data.Tables[0][o].PrefValueType.toString())}}catch(s){Logger.ErrorLog("PreferenceControlGenerator:: LoadScreen : "+s.stack)}}},{key:"CheckLicense",value:function(e){null!=e.DBText?(e.filter((function(e){return"DuplicateProduct_Ratewise"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.Preferences.ContainsKey("IsControlAccounts")&&"FALSE"==s.a.SessionManager.Preferences.IsControlAccounts.toUpperCase()&&e.filter((function(e){return"ControlAccountFilterField"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("ChequeBookManagement")&&"FALSE"==s.a.SessionManager.LicenseSettings.ChequeBookManagement.toUpperCase()&&e.filter((function(e){return"AutoChequeNo"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("CrossDimension")&&"FALSE"==s.a.SessionManager.LicenseSettings.CrossDimension.toUpperCase()&&e.filter((function(e){return"UseasCrossDimension"==e.DBText||"CrossDimDocument"==e.DBText||"CrossDimField"})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("LCTR")&&"FALSE"==s.a.SessionManager.LicenseSettings.LCTR.toUpperCase()&&e.filter((function(e){return"UseAsLC"==e.DBText||"EnableLC"==e.DBText||"LcCloseDocument"})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("QC")&&"FALSE"==s.a.SessionManager.LicenseSettings.QC.toUpperCase()&&e.filter((function(e){return"EnableTestcase"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("Kit")&&"FALSE"==s.a.SessionManager.LicenseSettings.Kit.toUpperCase()&&e.filter((function(e){return"dynamicsetProductwiselinking"==e.DBText||"SplitKit"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("Bins")&&"FALSE"==s.a.SessionManager.LicenseSettings.Bins.toUpperCase()&&e.filter((function(e){return"AutoAdjustBinLinking"==e.DBText||"AutoAdjustBins"==e.DBText||"CopyBins"==e.DBText||"DuplicateProductClubBins"==e.DBText||"OptionalBins"==e.DBText||"ShowBins"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("Packing")&&"FALSE"==s.a.SessionManager.LicenseSettings.Packing.toUpperCase()&&e.filter((function(e){return"Checkpackedqty"==e.DBText||"DefaultPack"==e.DBText||"EnablePacking"==e.DBText||"LineWisePacking"==e.DBText||"Linkallprodspacked"==e.DBText||"PackLabel"==e.DBText||"PackMandScan"==e.DBText||"PackWiseProds"==e.DBText||"ScanPack"==e.DBText||"ShowPackStat"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("Substitutes")&&"FALSE"==s.a.SessionManager.LicenseSettings.Substitutes.toUpperCase()&&e.filter((function(e){return"EnableSubtitutes"==e.DBText||"EnableSubtitutesQty"==e.DBText||"ShowSubQOH"==e.DBText||"SubonProdChange"==e.DBText||"SubstituteOnQty"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("Barcode")&&"FALSE"==s.a.SessionManager.LicenseSettings.Barcode.toUpperCase()&&e.filter((function(e){return"BarcodeField"==e.DBText||"UsingBarCodes"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("Hold_Release")&&"FALSE"==s.a.SessionManager.LicenseSettings.Hold_Release.toUpperCase()&&e.filter((function(e){return"Enable Hold"==e.DBText||"enebleSaveonhold"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("Import")&&"FALSE"==s.a.SessionManager.LicenseSettings.Import.toUpperCase()&&e.filter((function(e){return"ImpPrf"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("SKU")&&"FALSE"==s.a.SessionManager.LicenseSettings.SKU.toUpperCase()&&e.filter((function(e){return"OnScan"==e.DBText||"DumpStockCodes"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("PaymentTerms")&&"FALSE"==s.a.SessionManager.LicenseSettings.PaymentTerms.toUpperCase()&&e.filter((function(e){return"accountwisePaymentTerms"==e.DBText||"CopyPaymentTerms"==e.DBText||"Enable Payment Terms"==e.DBText||"Paytermids"==e.DBText||"ShowPercentPayTerms"==e.DBText||"Paymenttermsbasedon"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("Schemes")&&"FALSE"==s.a.SessionManager.LicenseSettings.Schemes.toUpperCase()&&e.filter((function(e){return"EnableSchemes"==e.DBText||"SchemesNumericFields"==e.DBText||"SchemesValueField"==e.DBText||"DonotUpdateSchemeQty"==e.DBText||"GetSchemeQty"==e.DBText||"PriceScheme"==e.DBText||"ValidateSchemeBeforeSave"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("TemporaryProduct")&&"FALSE"==s.a.SessionManager.LicenseSettings.TemporaryProduct.toUpperCase()&&e.filter((function(e){return"onlyTempProduct"==e.DBText||"ExcludeTemproducts"==e.DBText||"IgnoreTempProduct"==e.DBText||"MandatorytempPartinfo"==e.DBText||"TempInfo"==e.DBText})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("ToleranceManagement")&&"FALSE"==s.a.SessionManager.LicenseSettings.ToleranceManagement.toUpperCase()&&e.filter((function(e){return"Enabletolerance"==e.DBText})).forEach((function(t){e.Remove(t)}))):null!=e.DocumentType&&(s.a.SessionManager.LicenseSettings.ContainsKey("DeliveryNoteReturn")&&"FALSE"==s.a.SessionManager.LicenseSettings.DeliveryNoteReturn.toUpperCase()&&e.filter((function(e){return 6==e.DocumentType})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("PhysicalStockTaking")&&"FALSE"==s.a.SessionManager.LicenseSettings.PhysicalStockTaking.toUpperCase()&&e.filter((function(e){return 31==e.DocumentType})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("PhysicalStockPosting")&&"FALSE"==s.a.SessionManager.LicenseSettings.PhysicalStockPosting.toUpperCase()&&e.filter((function(e){return 32==e.DocumentType})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("PurchaseRequisition")&&"FALSE"==s.a.SessionManager.LicenseSettings.PurchaseRequisition.toUpperCase()&&e.filter((function(e){return 25==e.DocumentType})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("PurchaseEnquiry")&&"FALSE"==s.a.SessionManager.LicenseSettings.PurchaseEnquiry.toUpperCase()&&e.filter((function(e){return 26==e.DocumentType})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("PurchaseQuotation")&&"FALSE"==s.a.SessionManager.LicenseSettings.PurchaseQuotation.toUpperCase()&&e.filter((function(e){return 27==e.DocumentType})).forEach((function(t){e.Remove(t)})),s.a.SessionManager.LicenseSettings.ContainsKey("GoodsReceivedReturn")&&"FALSE"==s.a.SessionManager.LicenseSettings.GoodsReceivedReturn.toUpperCase()&&e.filter((function(e){return 10==e.DocumentType})).forEach((function(t){e.Remove(t)})))}},{key:"SetProperties_Static",value:function(e,t){var o;switch(t){case"CheckBox":if("FillLocalRef"==e.DBText.toString()||"LockLinkedRows"==e.DBText.toString()||"VendorBasedBillNo"==e.DBText.toString()||"UseQtyAdjustment"==e.DBText.toString()||"DistributeCost"==e.DBText.toString()||(this.oCheckBox=m.a.PactCheckBoxData_3(e.DBText.toString(),43,e.Group.toString(),0)),this.oCheckBox.Label=e.Text.toString(),o=this.oCheckBox,this.oCheckBox.Row=e.PrefRowOrder.toString(),this.oCheckBox.DefaultValue=e.PrefDefalutValue.toString(),this.oCheckBox.Column=e.PrefColOrder.toString(),this.oCheckBox.IsChecked=!(n.e.IsEmpty(e.Value)||"TRUE"!=e.Value.toString().toUpperCase()&&"1"!=e.Value.toString())&&Object(i.j)(e.Value.toString()),"OnlyExpired"==this.oCheckBox.DBColumnName||"StaticLinkingColumns"==this.oCheckBox.DBColumnName)return;"ProductName"!=o.DBColumnName&&"AccountName"!=o.DBColumnName||(this.IsFrozenCheckBox=this.oCheckBox),"Common"==e.Group.toString()?this.CommonControls.push(this.oCheckBox):"ARAP"==e.Group.toString()?this.ARAPControls.push(this.oCheckBox):"General"==e.Group.toString()?this.Controls.push(this.oCheckBox):"POS"==e.Group.toString()?this.PosControls.push(this.oCheckBox):"Linking"==e.Group.toString()&&this.LinkingControls.push(this.oCheckBox),e.Text.toString();break;case"Textbox":case"TextBox":this.oText=l.d.PactTextBoxData_2("",43),this.oText.Label=e.Text.toString(),this.oText.DBColumnName=e.DBText.toString(),o=this.oText,this.oText.Row=e.PrefRowOrder.toString(),this.oText.Column=e.PrefColOrder.toString(),this.oText.GroupName=e.Group.toString(),this.SetProperty_DefaultValue(o),this.oText.Text=e.Value.toString(),"Common"==e.Group.toString()?(this.CommonControls.push(this.oText),this.oText.RowSpan=2):"POS"==e.Group.toString()?this.PosControls.push(this.oText):"General"==e.Group.toString()?this.Controls.push(this.oText):"Linking"==e.Group.toString()&&this.LinkingControls.push(this.oText);break;case"CustomTextBox":case"BarcodeFormat":break;case"RadioButton":this.oRadioButton=new d.a(e.DBText.toString(),43,e.Group.toString()),this.oRadioButton.Label=e.Text.toString(),o=this.oRadioButton,this.oRadioButton.Row=e.PrefRowOrder.toString(),this.oRadioButton.DefaultValue=e.PrefDefalutValue.toString(),this.oRadioButton.Column=e.PrefColOrder.toString(),this.oRadioButton.IsChecked=Object(i.j)(e.Value.toString()),"Common"==e.Group.toString()?this.CommonControls.push(this.oRadioButton):"POS"==e.Group.toString()?this.PosControls.push(this.oText):"General"==e.Group.toString()?this.Controls.push(this.oRadioButton):"Linking"==e.Group.toString()&&this.LinkingControls.push(this.oRadioButton);break;case"LISTBOX":var s=u.b.PactListBoxData_2(e.DBText.toString(),43,e.Group.toString());s.Label=e.Text.toString(),s.Row=e.PrefRowOrder.toString(),s.DefaultValue=e.PrefDefalutValue.toString(),n.e.IsEmpty(e.Value)||n.e.IntTryParse(e.Value.toString())>0&&(s.SelectedValue=parseInt(e.Value.toString())),s.Column=e.PrefColOrder.toString(),"BilllandingReport"==e.DBText.toString()&&(s.CCID=200,s.TypeID=1),"Common"==e.Group.toString()?this.CommonControls.push(s):"General"==e.Group.toString()?this.Controls.push(s):"Linking"==e.Group.toString()&&this.LinkingControls.push(s);break;case"DATE":this.oDate=c.a.PactDatePickerData_3(e.DBText.toString(),43,e.Group.toString()),this.oDate.Label=e.Text.toString(),this.oDate.Row=e.PrefRowOrder.toString(),this.oDate.DefaultValue=e.PrefDefalutValue.toString(),n.e.IsEmpty(e.Value)||"FALSE"==e.Value.toString().toUpperCase()||"TRUE"==e.Value.toString().toUpperCase()||(this.oDate.Date=new Date(e.Value.toString())),this.oDate.Column=e.PrefColOrder.toString(),"Common"==e.Group.toString()?this.CommonControls.push(this.oDate):"General"==e.Group.toString()?this.Controls.push(this.oDate):"Linking"==e.Group.toString()&&this.LinkingControls.push(this.oDate);break;case"GroupCheckBox":if(this.lstGroupBox.Contains("GroupCheckBox"))break;this.lstGroupBox.push("GroupCheckBox");break;case"ComboBox":if(this.oCombo=D.e.PactComboBoxData2(e.DBText.toString(),43,e.Group.toString()),this.oCombo.Label=e.Text.toString(),this.oCombo.Row=e.PrefRowOrder.toString(),this.oCombo.DefaultValue=e.PrefDefalutValue.toString(),this.Data.Tables.length>18&&"DefaultProfileID"==e.DBText.toString()){this.oCombo.Items.push(D.d.ComboBoxItems_2("",""));for(var a=0;a<this.Data.Tables[18].length;a++)this.oCombo.Items.push(D.d.ComboBoxItems_2(this.Data.Tables[18][a].ProfileName.toString(),this.Data.Tables[18][a].ProfileID.toString()))}else if("BillwisePosting"==e.DBText.toString())this.oCombo.Items.push(D.d.ComboBoxItems_2("","")),this.oCombo.Items.push(D.d.ComboBoxItems_2("Line-wise","1")),this.oCombo.Items.push(D.d.ComboBoxItems_2("PaymentTerm-wise","2"));else if("TabsPopup"==e.DBText.toString())this.oCombo.Items.push(D.d.ComboBoxItems_2("","")),this.oCombo.Items.push(D.d.ComboBoxItems_2("Pop up","1")),this.oCombo.Items.push(D.d.ComboBoxItems_2("Collapsable","2"));else if("DefaultRightView"==e.DBText.toString())this.oCombo.Items.push(D.d.ComboBoxItems_2("","")),this.oCombo.Items.push(D.d.ComboBoxItems_2("Import","Import")),this.oCombo.Items.push(D.d.ComboBoxItems_2("Sort","Sort")),this.oCombo.Items.push(D.d.ComboBoxItems_2("Notes","Notes")),this.oCombo.Items.push(D.d.ComboBoxItems_2("Attachments","Attachments")),this.oCombo.Items.push(D.d.ComboBoxItems_2("Search","Search")),this.oCombo.Items.push(D.d.ComboBoxItems_2("Report","Report")),this.oCombo.Items.push(D.d.ComboBoxItems_2("Documents","Documents"));else if(this._DocumentID>0&&this.Data.Tables.length>10&&("DocumentLinkDimension"==e.DBText.toString()||"DimensionWise"==e.DBText.toString()||"defprod"==e.DBText.toString()||"DimWiseAttachments"==e.DBText.toString()||"CurrencyDim"==e.DBText.toString()))this.FillDimensions(this.oCombo,this.Data.Tables[10]);else if(this.Data.Tables.length>5&&("DocumentLinkDimension"==e.DBText.toString()||"DimensionWise"==e.DBText.toString()||"DimWiseAttachments"==e.DBText.toString()||"CurrencyDim"==e.DBText.toString()))this.FillDimensions(this.oCombo,this.Data.Tables[5]);else if(this.Data.Tables.length>3&&("DueDateonBillDate"==e.DBText.toString()||"Paymenttermsbasedon"==e.DBText.toString())&&this.Data.Columns[3].Contains("UserColumnType"))for(var r=this.Data.Tables[3].filter((function(e){return 3!=e.sectionid&&("DATE"==e.UserColumnType||"DATE"==e.ColumnDataType)})),h=0;h<r.length;h++)this.oCombo.Items.push(D.d.ComboBoxItems_2(r[h].ResourceData.toString(),r[h].SysColumnName.toString()));else if(this.Data.Tables.length>3&&("BodyFreezeColumn"==e.DBText.toString()||"Sortbasedon"==e.DBText.toString())&&this.Data.Columns[3].Contains("sectionid")){var C=this.Data.Tables[3].filter((function(e){return 3==e.sectionid}));this.oCombo.Items.push(D.d.ComboBoxItems_2("","0"));for(var p=0;p<C.length;p++)this.oCombo.Items.push(D.d.ComboBoxItems_2(C[p].ResourceData.toString(),C[p].CostCenterColID.toString()))}""!=e.Value.toString()&&"FALSE"!=e.Value.toString().toUpperCase()&&"TRUE"!=e.Value.toString().toUpperCase()&&(this.oCombo.SelectedValue=e.Value.toString()),this.oCombo.Column=e.PrefColOrder.toString(),"Common"==e.Group.toString()?this.CommonControls.push(this.oCombo):"POS"==e.Group.toString()?this.PosControls.push(this.oText):"General"==e.Group.toString()?this.Controls.push(this.oCombo):"Linking"==e.Group.toString()&&this.LinkingControls.push(this.oCombo);break;case"CheckList":var S=D.b.CheckedListBoxData_1(e.DBText.toString(),43);S.GroupName=e.Group.toString(),S.Label=e.Text.toString(),S.Row=e.PrefRowOrder.toString(),S.Column=e.PrefColOrder.toString();for(var T=e.Value.toString().split(","),g=0;g<this.Data.Tables[10].length;g++)S.Items.push(D.c.CheckedListBoxItem_3(this.Data.Tables[10][g].NAME.toString(),this.Data.Tables[10][g].FEATUREID.toString())),T.Contains(this.Data.Tables[10][g].FEATUREID.toString())&&(S.Items[g].IsChecked=!0);"Common"==e.Group.toString()?this.CommonControls.push(S):"ARAP"==e.Group.toString()?this.ARAPControls.push(S):"General"==e.Group.toString()?this.Controls.push(S):"Linking"==e.Group.toString()&&this.LinkingControls.push(S)}}},{key:"FillDimensions",value:function(e,t){if(null!=this.Data&&t.length>0){e.Items.push(D.d.ComboBoxItems_2("","0"));for(var o=0;o<t.length;o++)e.Items.push(D.d.ComboBoxItems_2(t[o].NAME.toString(),t[o].FEATUREID.toString()));("CurrencyDim"==e.DBColumnName||"DimensionWise"==e.DBColumnName&&"Linking"==e.GroupName)&&e.Items.push(D.d.ComboBoxItems_2("Product","3"))}}},{key:"oCheckBox_PropertyChanged",value:function(e){}},{key:"SetProperty_DefaultValue",value:function(e){if(e instanceof m.a)try{e.IsChecked=Object(i.j)(e.DefaultValue)}catch(t){}else if(e instanceof d.a)try{e.IsChecked=Object(i.j)(e.DefaultValue)}catch(o){}else if(e instanceof l.d)try{e.Text=e.DefaultValue}catch(s){}else if(e instanceof D.e)try{e.SelectedValue=n.e.IsEmpty(e.DefaultValue)?"":e.DefaultValue}catch(a){}}},{key:"SetProperties_Custom",value:function(e,t){t.Label="Test",t.Mandatory=!1,t.DefaultValue="false",t.DBColumnName="Column",t instanceof l.d&&("INT"!=t.DataType&&"FLOAT"!=t.DataType||(t.Align="Right"))}},{key:"GetScreenInfo",value:function(e){Logger.InfoLog("PreferenceControlGenerator:: Inside GetScreenInfo");try{var t=[];t.push(e),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.RoleID),t.push(s.a.SessionManager.LanguageID);return s.a.document.GetScreenInfo(e)}catch(o){return Logger.ErrorLog("PreferenceControlGenerator:: GetScreenInfo"+o.stack),null}}},{key:"GetScreenInfo_2",value:function(e,t){Logger.InfoLog("PreferenceControlGenerator:: Inside GetScreenInfo");try{return s.a.document.GetScreenInfo_2(e,t,this._IsEdit)}catch(o){return Logger.ErrorLog("PreferenceControlGenerator:: GetScreenInfo"+o.stack),null}}},{key:"CustomFieldsVisibility",get:function(){return this._Controls.length>0}},{key:"Controls",get:function(){return this._Controls}}]),e}(),p=function(e){_inherits(o,e);var t=_createSuper(o);function o(e){var a,r,h;if(_classCallCheck(this,o),(a=t.call(this)).IsQuit=!0,a.IsOK=!1,a.PDCReceivableAccount=0,a.DocumentObject=new C,a.PostConversionDate=new m.a(0),a.Location=new D.b(0),a.locationIn="",a.DepositedIn=new u.b(0),a.DiscountBank=new u.b(0),a.Title="",a.FromDate=new c.a(0),a.ToDate=new c.a(0),a.FValue=0,a.TValue=0,a.parent=e,a.DocumentObject.LoadScreen(_assertThisInitialized(a),109),a.Amount=new D.e(0),a.Amount.Label="Amount",a.Amount.SelectionChangedCommand.Subscribe(_assertThisInitialized(a),"OnConditionSelectionChanged"),a.DepositedIn.Label="Deposited In",a.DepositedIn.CCID=2,a.DepositedIn.TypeID=51,a.DiscountBank.CCID=2,a.DiscountBank.TypeID=51,a.DiscountBank.Label="Discount Bank",a.Filter=new d.b("Documents"),(r=new d.a("PDC",0,"Filter")).Group=a.Filter,null!=a.parent&&0==a.parent.Filter&&(r.IsChecked=!0),r.Label="PDC",a.Filter.Items.push(r),(r=new d.a("Discounted",1,"Filter")).Group=a.Filter,null!=a.parent&&1==a.parent.Filter&&(r.IsChecked=!0),r.Label="Discounted",a.Filter.Items.push(r),a.Title=" Cheque Discount ",a.FromValue=new l.d(0),a.ToValue=new l.d(0),a.FromList=new u.b(0),a.ToList=new u.b(0),a.FromList.Label=a.FromValue.Label="Value",a.ToList.Label=a.ToValue.Label=s.a.GetResource("Reports_ToValue"),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()){a.Location.Items.push(D.c.CheckedListBoxItem_3("All","-1"));var p=s.a.admin.getLocationRoles([50002,s.a.SessionManager.LangID]);if(null!=p&&p.Tables.length>0&&p.Tables[0].length>0)for(var S=0;S<p.Tables[0].length;S++)s.a.SessionManager.LocationID>0&&p.Tables[0][S][p.Columns[0][0]].toString()==s.a.SessionManager.LocationID.toString()?a.Location.Items.push(D.c.CheckedListBoxItem_5(p.Tables[0][S][p.Columns[0][2]].toString(),p.Tables[0][S][p.Columns[0][0]].toString(),!0)):a.Location.Items.push(D.c.CheckedListBoxItem_3(p.Tables[0][S][p.Columns[0][2]].toString(),p.Tables[0][S][p.Columns[0][0]].toString()));if(!n.e.IsEmpty(s.a.SessionManager.LocationWhere)){var T=s.a.SessionManager.LocationWhere.split(",");if(0==s.a.SessionManager.LocationID&&T.length>1)for(var g=0;g<T.length;g++)for(var b=T[g],f=0;f<a.Location.Items.length;f++){var P=a.Location.Items[f];if(P.Value.toString()==b.toString()){P.IsChecked=!0;break}}}}else a.Location.Visible=!1;if(a.Documents=new D.b,a.Documents.Label=" Documents List",h=e.DocumentList.split(","),null!=a.DocumentObject.Data.Tables[1]&&a.DocumentObject.Data.Tables[1].length>0)for(var I=0;I<a.DocumentObject.Data.Tables[1].length;I++)a.Documents.Items.push(D.c.CheckedListBoxItem_3(a.DocumentObject.Data.Tables[1][I].DocumentName.toString(),a.DocumentObject.Data.Tables[1][I].CostCenterID.toString())),(h.Contains(a.DocumentObject.Data.Tables[1][I].CostCenterID.toString())||""==e.DocumentList)&&(a.Documents.Items[I].IsChecked=!0);return a.FromDate.Label=s.a.GetResource("DocumentDesigner_FromDate"),a.ToDate.Label=s.a.GetResource("DocumentDesigner_ToDate"),a.PostConversionDate.Label=s.a.GetResource("PostonConversionDate"),a.Stat=new d.b("Status"),a.FromDate.Date=a.parent.FromDate,a.ToDate.Date=a.parent.toDate,s.a.SessionManager.Preferences.ContainsKey("DefaultPostConversionDate")&&""!=s.a.SessionManager.Preferences.DefaultPostConversionDate&&(a.PostConversionDate.IsChecked=Object(i.j)(s.a.SessionManager.Preferences.DefaultPostConversionDate)),a.PostConversionDate.IsChecked=a.parent.PostonconversionDate,a.LoadConditions(),a.OnConditionSelectionChanged(a.Amount.SelectedValue),e.BankID>0&&(a.DepositedIn.SelectedValue=e.BankID),e.BankCCNodeID>0&&(a.DiscountBank.SelectedValue=e.BankCCNodeID),a.FromDate.Date=e.FromDate,a.ToDate.Date=e.toDate,e.FromValue>0&&(a.FromValue.Text=e.FromValue.toString()),e.ToValue>0&&(a.ToValue.Text=e.ToValue.toString()),_possibleConstructorReturn(a)}return _createClass(o,[{key:"OnLocationCheckedChanged",value:function(e){if(this.locationIn=this.GetLocation(this.Location),"-1"==e.Value)for(var t=0;t<this.Location.Items.length;t++)this.Location.Items[t].IsChecked=e.IsChecked;else e.IsChecked||(this.Location.Items[0].IsChecked=!1)}},{key:"OnBankSelectionChanged",value:function(e){Logger.InfoLog("ChequeDiscountDialogViewModel ::Entering OnBankSelectionChanged");try{if(this.DepositedIn.SelectedValue>0){var t=s.a.common.GetDataSet("CD001",this.DepositedIn.SelectedValue.toString());null!=t&&t.Tables.length>0&&t.Tables[0].length>0&&null!=t.Tables[0][0].ACCOUNTID&&""!=t.Tables[0][0].ACCOUNTID.toString()&&(null!=t.Tables[0][0].PDCReceivableAccount&&""!=t.Tables[0][0].PDCReceivableAccount.toString()&&(this.parent.PDCReceivableAccount=parseFloat(t.Tables[0][0].PDCReceivableAccount)),null!=t.Tables[0][0].InterestRate&&""!=t.Tables[0][0].InterestRate.toString()&&(this.parent.InterestRate=parseFloat(t.Tables[0][0].InterestRate)),null!=t.Tables[0][0].CommissionRate&&""!=t.Tables[0][0].CommissionRate.toString()&&(this.parent.CommissionRate=parseFloat(t.Tables[0][0].CommissionRate)),null!=t.Tables[0][0].CheckDiscountLimit&&""!=t.Tables[0][0].CheckDiscountLimit.toString()&&(this.parent.ChequeDiscountLimit=parseFloat(t.Tables[0][0].CheckDiscountLimit)),null!=t.Tables[0][0].ACCOUNTID&&""!=t.Tables[0][0].ACCOUNTID.toString()&&(this.parent.PDCDiscountAcc=parseFloat(t.Tables[0][0].ACCOUNTID)))}Logger.InfoLog("ChequeDiscountDialogViewModel ::Exiting OnBankSelectionChanged")}catch(o){Logger.ErrorLog("ChequeDiscountDialogViewModel :: OnBankSelectionChanged"+o.stack)}}},{key:"OnConditionSelectionChanged",value:function(e){this.ToValue.Visible=!1,this.FromValue.Label="Value",null!=this.Amount.SelectedValue&&("Between"==this.Amount.SelectedValue||"NotBetween"==this.Amount.SelectedValue?this.FromList.CCID>0?(this.FromList.Visible=!0,this.ToList.CCID=this.FromList.CCID,this.ToList.TypeID=this.FromList.TypeID,this.ToList.CustomWhere=this.FromList.CustomWhere,this.ToList.Refresh(),this.ToList.Visible=!0,this.FromList.Label=s.a.GetResource("Reports_FromValue")):(this.FromValue.Visible=!0,this.ToValue.Visible=!0,this.FromValue.Label="From Value",this.FromValue.Label=s.a.GetResource("Reports_FromValue")):("Equal"==this.Amount.SelectedValue||"NotEqual"==this.Amount.SelectedValue)&&this.FromList.CCID>0?this.FromList.Visible=!0:this.FromValue.Visible=!0)}},{key:"LoadConditions",value:function(){this.Amount.Items.Clear(),this.Amount.Items.push(D.d.ComboBoxItems_3(s.a.GetResource("Between"),"Between"," BETWEEN ")),this.Amount.Items.push(D.d.ComboBoxItems_3(s.a.GetResource("Not Between"),"NotBetween"," NOT BETWEEN ")),this.Amount.Items.push(D.d.ComboBoxItems_3(s.a.GetResource("Equal"),"Equal","=")),this.Amount.Items.push(D.d.ComboBoxItems_3(s.a.GetResource("Not Equal"),"NotEqual","<>")),this.Amount.Items.push(D.d.ComboBoxItems_3(s.a.GetResource("Lessthan"),"Lessthan","<")),this.Amount.Items.push(D.d.ComboBoxItems_3(s.a.GetResource("Lessthan Or Equal"),"LessthanOrEqual","<=")),this.Amount.Items.push(D.d.ComboBoxItems_3(s.a.GetResource("Greaterthan"),"Greaterthan",">")),this.Amount.Items.push(D.d.ComboBoxItems_3(s.a.GetResource("Greaterthan Or Equal"),"Greaterthan Or Equal",">=")),this.Amount.SelectedValue="Equal"}},{key:"GetLocation",value:function(e){for(var t=1,o=0,s="";t<e.Items.length;t++)e.Items[t].IsChecked&&(0==o&&(s=""),s+=e.Items[t].Value+",",o++);return s.length>0&&(s=s.substr(0,s.length-1)+""),s}},{key:"OnButtonClick",value:function(e){if("Cancel"==e.toString())s.a.page.HideDialog();else try{this.parent.DialogResult=!0,this.parent.FromDate=this.FromDate.Date,this.parent.toDate=this.ToDate.Date,n.e.IsEmpty(this.FromValue.Text)||(this.FValue=n.e.IntTryParse(this.FromValue.Text),this.parent.FromValue=this.FValue),this.ToValue.Visible&&(n.e.IsEmpty(this.ToValue.Text)||(this.TValue=n.e.IntTryParse(this.ToValue.Text),this.parent.ToValue=this.TValue)),this.parent.strAmountQry=this.GetAmountCondition();for(var t="",o=0;o<this.Documents.Items.length;o++)this.Documents.Items[o].IsChecked&&(t.length>0&&(t+=","),t+=this.Documents.Items[o].Value.toString());if(this.parent.DocumentList=t,this.parent.PostonconversionDate=this.PostConversionDate.IsChecked,this.parent.LocationList=this.GetLocation(this.Location),!(this.DepositedIn.SelectedValue>0))return this.DisplayMessage=" Please select Discount Bank",void(this.MessageVisibility=!0);this.parent.BankID=this.DepositedIn.SelectedValue,this.parent.Filter=this.Filter.CheckedItem.FeatureID,this.parent.BankCCNodeID=this.DiscountBank.SelectedValue>0?this.DiscountBank.SelectedValue:this.parent.BankID,this.parent.LoadData(),s.a.page.HideDialog()}catch(i){}}},{key:"GetAmountCondition",value:function(){var e="";return"EQUAL"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()?e=" = "+this.FromValue.Text:"BETWEEN"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()&&null!=this.ToValue.Text&&""!=this.ToValue.Text.Trim()?e=" BETWEEN "+this.FromValue.Text+"  AND "+this.ToValue.Text:"NOTBETWEEN"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()&&null!=this.ToValue.Text&&""!=this.ToValue.Text.Trim()?e=" NOT BETWEEN "+this.FromValue.Text+"  AND "+this.ToValue.Text:"NOTEQUAL"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()?e=" <> "+this.FromValue.Text:"LESSTHAN"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()?e=" < "+this.FromValue.Text:"LESSTHANOREQUAL"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()?e=" <= "+this.FromValue.Text:"GREATERTHAN"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()?e=" > "+this.FromValue.Text:"GREATERTHAN OR EQUAL"==this.Amount.SelectedValue.toUpperCase()&&null!=this.FromValue.Text&&""!=this.FromValue.Text.Trim()&&(e=" >= "+this.FromValue.Text),e}}]),o}(a.b),S=o("KUE1"),T=o("ockk"),g=o("jDOZ"),b=o("1Cra"),f=function(e){_inherits(o,e);var t=_createSuper(o);function o(){var e;_classCallCheck(this,o),(e=t.call(this)).DisplayName="",e.IsPDCS=!0,e.Availed=new l.d(0),e.Limit=new l.d(0),e.SelectedValue=new l.d(0),e.Balance=new l.d(0),e.FilterDate=new c.a(0),e.Bank=new u.b(0),e.SearchText="",e.DialogResult=!1,e.FromDate=new Date,e.toDate=new Date,e.BankID=0,e.Filter=0,e.Status=0,e.FromValue=0,e.ToValue=0,e.DocList=new Array,e.Locations="",e.strAmountQry="",e.DocumentList="",e.LocationList="",e.PostonconversionDate=!1,e.PDCReceivableAccount=0,e.InterestRate=0,e.CommissionRate=0,e.ChequeDiscountLimit=0,e.Used=0,e.PDCDiscountAcc=0,e.BankCCNodeID=0,e.bankname="",e.MessageBank="",e.CheckedCnt=0,e.ScreenObject=new r.a(4e4,0),e.onLoad(),e.Bank.OnPactListBoxValueChanged.Subscribe(_assertThisInitialized(e),"onListSelectedChanged"),e.FilterDate.Label="Date",e.FilterDate.Date=new Date,e.Bank.Label="Bank",e.Bank.TypeID=51,e.Bank.CCID=2,e.Limit.Label="Limit",e.Availed.Label="Availed",e.SelectedValue.Label="Selected",e.Balance.Label="Balance",e.DialogResult=!1;var n=new p(_assertThisInitialized(e));return s.a.page.ShowDialog(n,S.a,{ShowCenter:!s.a.IsMobile,NoWidth:!0}).subscribe((function(){e.FillSearchDetails()})),e}return _createClass(o,[{key:"FillSearchDetails",value:function(){var e=this;this.Options=new D.e(0),this.SearchCols=new D.e(0),this.Options.Items.push(D.d.ComboBoxItems_2(s.a.GetResource("Com_Equals"),"1")),this.Options.Items.push(D.d.ComboBoxItems_2(s.a.GetResource("Com_NotEquals"),"2")),this.Options.Items.push(D.d.ComboBoxItems_2(s.a.GetResource("Com_BeginsWith"),"3")),this.Options.Items.push(D.d.ComboBoxItems_2(s.a.GetResource("Com_EndsWith"),"4")),this.Options.Items.push(D.d.ComboBoxItems_2(s.a.GetResource("Com_Contains"),"5")),this.Options.Items.push(D.d.ComboBoxItems_2(s.a.GetResource("Com_NotContains"),"6")),this.Options.SelectedValue="5",this.PstDocGrid.Columns.forEach((function(t){t.IsVisible&&"Sno"!=t.DisplayMember&&e.SearchCols.Items.push(D.d.ComboBoxItems_2(t.Header,t.DisplayMember))})),this.SearchCols.Items.length>0&&(this.SearchCols.SelectedValue=this.SearchCols.Items[0].Value)}},{key:"onListSelectedChanged",value:function(e){if(Logger.InfoLog("ChequeDiscPostedDocumentViewModel ::Entering onListSelectedChanged"),null!=e&&this.Bank.SelectedValue>0){var t=s.a.common.GetDataSet("CD001",this.Bank.SelectedValue.toString());null!=t&&t.Tables.length>0&&t.Tables[0].length>0&&!n.e.IsEmpty(t.Tables[0][0].ACCOUNTID)&&(n.e.IsEmpty(t.Tables[0][0].InterestRate)||(this.InterestRate=parseFloat(t.Tables[0][0].InterestRate)),n.e.IsEmpty(t.Tables[0][0].CommissionRate)||(this.CommissionRate=parseFloat(t.Tables[0][0].CommissionRate)),n.e.IsEmpty(t.Tables[0][0].CheckDiscountLimit)||(this.ChequeDiscountLimit=parseFloat(t.Tables[0][0].CheckDiscountLimit)),t.Columns[0].Contains("Used")&&!n.e.IsEmpty(t.Tables[0][0].Used)&&(this.Used=parseFloat(t.Tables[0][0].Used)),this.ChequeDiscountLimit>0&&(this.Limit.Text=this.ChequeDiscountLimit.toString()))}}},{key:"OnValueChange",value:function(e){null!=this.Limit.Text&&""!=this.Limit.Text||(this.Limit.Text="0"),null!=this.Availed.Text&&""!=this.Availed.Text||(this.Availed.Text="0"),null!=this.SelectedValue.Text&&""!=this.SelectedValue.Text||(this.SelectedValue.Text="0"),this.Balance.Text=(parseFloat(this.Limit.Text)-this.Used-parseFloat(this.Availed.Text)+parseFloat(this.SelectedValue.Text)).toString()}},{key:"onLoad",value:function(){this.DisplayName="Cheque Discount Calculation",this.InitColumns()}},{key:"oncellEditEnding",value:function(e){if("PACT.COMMON.PactTextBoxColumnEx"==e.OriginalSource.Column.GetType().toString()){var t=e.OriginalSource.RowDataItem.Row;if("Commission"==e.OriginalSource.Column.Binding.Path.Path||"Interest"==e.OriginalSource.Column.Binding.Path.Path){var o=0,s=0;n.e.IsEmpty(t.Interest)||(o=parseFloat(t.Interest.toString())),n.e.IsEmpty(t.Commission)||(s=parseFloat(t.Commission.toString())),t.Total=(o+s).toString(),t.AcceptChanges()}this.ShowColumnTotal()}}},{key:"InitColumns",value:function(){var e,t=[],o={};o.Name=s.a.GetResource("Pdc_Convert"),o.Value=1,o.Status=null,t.push(o),(o={}).Name=s.a.GetResource("Pdc_unConvert"),o.Value=2,o.Status=null,t.push(o),(o={}).Name=s.a.GetResource("DocumentDesigner_Bounce"),o.Value=0,o.Status=null,t.push(o),this.PstDocGrid=new h.a,this.PstDocGrid.CanUserSortColumns=!0,this.PstDocGrid.Columns=[],this.PstDocGrid.Width="",this.PstDocGrid.CellEditEnding.Subscribe(this,"oncellEditEnding"),(e=new T.a).Header="CostcenterID",e.DisplayMember="CostcenterID",e.ReadOnly=!0,e.IsVisible=!1,e.Width=100,this.PstDocGrid.Columns.push(e),(e=new T.a).Header="DocPrefix",e.DisplayMember="DocPrefix",e.ReadOnly=!0,e.IsVisible=!1,e.Width=100,this.PstDocGrid.Columns.push(e),(e=new T.a).Header="DocNumber",e.DisplayMember="DocNumber",e.ReadOnly=!0,e.IsVisible=!1,e.Width=100,this.PstDocGrid.Columns.push(e),(e=new T.a).Header=s.a.GetResource("DocumentDesigner_VoucherNo"),e.DisplayMember="VoucherNo",e.DataType="LINK",e.Click.Subscribe(this,"OnDocLink"),e.Width=100,this.PstDocGrid.Columns.push(e),(e=new T.a).Header=s.a.GetResource("DocumentDesigner_VoucherDate"),e.DisplayMember="DocDateFormat",e.ReadOnly=!0,e.DataType="DATE",e.Width=80,this.PstDocGrid.Columns.push(e),(e=new T.a).Header=s.a.GetResource("DocumentDesigner_Account"),e.DisplayMember="AccountID",e.ValueMember="AccountID_Key",e.ReadOnly=!0,e.Width=150,this.PstDocGrid.Columns.push(e),(e=new T.a).Header=s.a.GetResource("DocumentDesigner_ChequeNo"),e.DisplayMember="ChequeNumber",e.ReadOnly=!0,e.Width=100,this.PstDocGrid.Columns.push(e),(e=new T.a).Header="Maturity date",e.DisplayMember="ChequeDateFormat",e.ReadOnly=!0,e.DataType="DATE",e.Width=100,this.PstDocGrid.Columns.push(e),(e=new T.a).Header=s.a.GetResource("DocumentDesigner_Amount"),e.DisplayMember="Amount",e.ReadOnly=!0,e.DataType="FLOAT",e.IsCalculated=1,e.Width=100,s.a.SessionManager.Preferences.ContainsKey("DecimalsinRate")&&""!=s.a.SessionManager.Preferences.DecimalsinRate&&(e.DecimalPoints=s.a.SessionManager.Preferences.DecimalsinRate),this.PstDocGrid.Columns.push(e),(e=new T.a).Header=s.a.GetResource("Pref_Select"),e.DisplayMember="Action",e.DataType="CheckBox",e.Width=50,e.CheckedChanged.Subscribe(this,"OnCheckedChanged"),this.PstDocGrid.Columns.push(e),(e=new T.a).Header="No Of Days",e.DisplayMember="NoOfDays",e.ReadOnly=!0,e.DataType="FLOAT",e.Width=100,this.PstDocGrid.Columns.push(e),(e=new T.a).Header="Selected Amount",e.DisplayMember="SelectedAmount",e.ReadOnly=!0,e.DataType="FLOAT",e.ShowTotal=!0,e.Width=100,s.a.SessionManager.Preferences.ContainsKey("DecimalsinRate")&&""!=s.a.SessionManager.Preferences.DecimalsinRate&&(e.DecimalPoints=s.a.SessionManager.Preferences.DecimalsinRate),this.PstDocGrid.Columns.push(e),(e=new T.a).Header="Interest",e.DisplayMember="Interest",e.DataType="FLOAT",e.ShowTotal=!0,e.Width=100,s.a.SessionManager.Preferences.ContainsKey("DecimalsinExtraFields")&&""!=s.a.SessionManager.Preferences.DecimalsinExtraFields&&(e.DecimalPoints=s.a.SessionManager.Preferences.DecimalsinExtraFields),this.PstDocGrid.Columns.push(e),(e=new T.a).Header="Commission",e.DisplayMember="Commission",e.DataType="FLOAT",e.ShowTotal=!0,e.Width=100,s.a.SessionManager.Preferences.ContainsKey("DecimalsinExtraFields")&&""!=s.a.SessionManager.Preferences.DecimalsinExtraFields&&(e.DecimalPoints=s.a.SessionManager.Preferences.DecimalsinExtraFields),this.PstDocGrid.Columns.push(e),(e=new T.a).Header="Total",e.DisplayMember="Total",e.ReadOnly=!0,e.DataType="FLOAT",e.ShowTotal=!0,e.Width=100,this.PstDocGrid.Columns.push(e),(e=new T.a).Header=s.a.GetResource("DocumentDesigner_Bank"),e.DisplayMember="BankAccountID",e.ValueMember="BankAccountID_Key",e.DataType="LISTBOX",e.CostCenterID=2,e.TypeID=51,e.Width=150,e.ReadOnly=!0,this.PstDocGrid.Columns.push(e),(e=new T.a).Header="Discounted",e.DisplayMember="ConvertedVoucherNO",e.DataType="LINK",e.Click.Subscribe(this,"OnConvertedDocLink"),e.Width=100,this.PstDocGrid.Columns.push(e)}},{key:"OnCheckedChanged",value:function(e,t){if(0==this.Filter){var o=e.Row;if(t){n.e.IsEmpty(this.SelectedValue.Text)&&(this.SelectedValue.Text="0"),n.e.IsEmpty(this.Limit.Text)&&(this.Limit.Text="0"),n.e.IsEmpty(this.Availed.Text)&&(this.Availed.Text="0");var i=0;this.SelectedValue.Text=(parseFloat(this.SelectedValue.Text)+parseFloat(o.Amount)).toString(),(i=parseFloat(this.Limit.Text)-this.Used-parseFloat(this.Availed.Text)-parseFloat(this.SelectedValue.Text))>parseFloat(this.Limit.Text)?(alert("Balance exceeds Limit "),this.SelectedValue.Text=(parseFloat(this.SelectedValue.Text)-parseFloat(o.Amount)).toString(),o.Action=!1):(this.Balance.Text=i.toString(),o.SelectedAmount=parseFloat(o.Amount).ToString("N"+s.a.SessionManager.Preferences.DecimalsinAmount),o.NoOfDays=n.e.IsEmpty(o.ChequeMaturityDate)?"0":this.FilterDate.Date.Subtract(new Date(o.ChequeMaturityDate)).Days,o.Interest=(parseFloat(o.SelectedAmount)*this.InterestRate/100/365*parseInt(o.NoOfDays.toString())*-1).ToString("N"+s.a.SessionManager.Preferences.DecimalsinAmount),o.Commission=(parseFloat(o.SelectedAmount)*this.CommissionRate/100/365*parseInt(o.NoOfDays.toString())*-1).ToString("N"+s.a.SessionManager.Preferences.DecimalsinAmount),o.Total=(parseFloat(o.Interest)+parseFloat(o.Commission)).toString(),o.Action=!0)}else o.Action=!1,o.SelectedAmount="0",o.NoOfDays="0",o.Interest="0",o.Commission="0",o.Total="0";this.ShowColumnTotal()}}},{key:"ShowColumnTotal",value:function(){for(var e=0,t=0,o=0,a=0,r=0;r<this.PstDocGrid.Table.length;r++)Object(i.j)(this.PstDocGrid.Table[r].Action)&&(null!=this.PstDocGrid.Table[r].Amount&&(e+=parseFloat(this.PstDocGrid.Table[r].Amount)),null!=this.PstDocGrid.Table[r].Interest&&(t+=parseFloat(this.PstDocGrid.Table[r].Interest)),null!=this.PstDocGrid.Table[r].Commission&&(o+=parseFloat(this.PstDocGrid.Table[r].Commission)),null!=this.PstDocGrid.Table[r].Total&&(a+=parseFloat(this.PstDocGrid.Table[r].Total)));this.SelectedValue.Text=e.ToString("N"+s.a.SessionManager.Preferences.DecimalsinAmount),n.e.IsEmpty(this.Availed.Text)&&(this.Availed.Text="0"),n.e.IsEmpty(this.Limit.Text)&&(this.Limit.Text="0"),this.Balance.Text=(parseFloat(this.Limit.Text)-this.Used-parseFloat(this.Availed.Text)-parseFloat(this.SelectedValue.Text)).toString(),this.PstDocGrid.Columns[11].footer=e.ToString("N"+s.a.SessionManager.Preferences.DecimalsinAmount),this.PstDocGrid.Columns[12].footer=t.ToString("N"+s.a.SessionManager.Preferences.DecimalsinAmount),this.PstDocGrid.Columns[13].footer=o.ToString("N"+s.a.SessionManager.Preferences.DecimalsinAmount),this.PstDocGrid.Columns[14].footer=a.ToString("N"+s.a.SessionManager.Preferences.DecimalsinAmount),this.PstDocGrid.UpdateFooter()}},{key:"OnDocLink",value:function(e){}},{key:"OnConvertedDocLink",value:function(e){if(null!=this.PstDocGrid.SelectedItem&&!n.e.IsEmpty(this.PstDocGrid.SelectedItem.ConvertedDocNo))try{this.ScreenObject.GetDocDetailsByAccID(parseInt(this.PstDocGrid.SelectedItem.ConvertedAccDocID.toString()))}catch(t){Logger.ErrorLog("PostedDocumentViewModel","OnLinkClickEvent",t.Message)}}},{key:"LoadData",value:function(){var e,t=this,o=[];o.push(this.FromDate.ToString("dd/MMM/yyyy")),o.push(this.toDate.ToString("dd/MMM/yyyy")),o.push(this.strAmountQry),o.push(this.DocumentList),o.push(this.BankID),o.push(this.BankCCNodeID),o.push(this.Filter),o.push(this.LocationList),g.a.GetPDRChequeDiscount(o).subscribe((function(o){e=o,t.ScreenObject.DocID=o.RetValue,null!=e&&e.Tables.length>1&&e.Tables[1].length>0&&(t.bankname=e.Tables[1][0].AccountName.toString()),t.LoadDashData(e.Tables[0]),null!=e&&e.Tables.length>1&&e.Tables[1].length>0&&(t.bankname=e.Tables[1][0].AccountName.toString(),t.InterestRate=parseFloat(e.Tables[1][0].INTERESTRATE),t.CommissionRate=parseFloat(e.Tables[1][0].COMMISSIONRATE),t.ChequeDiscountLimit=parseFloat(e.Tables[1][0].CHECKDISCOUNTLIMIT),e.Columns[1].Contains("Used")&&!n.e.IsEmpty(e.Tables[1][0].Used)&&(t.Used=parseFloat(e.Tables[1][0].Used.toString()))),t.Bank.SelectedValue=t.BankCCNodeID,t.ChequeDiscountLimit>0&&(t.Limit.Text=t.ChequeDiscountLimit.toString()),0==t.Filter?(t.IsPDCS=!0,t.PstDocGrid.Columns[10].IsVisible=!0,t.PstDocGrid.Columns[11].IsVisible=!0,t.PstDocGrid.Columns[12].IsVisible=!0,t.PstDocGrid.Columns[13].IsVisible=!0,t.PstDocGrid.Columns[14].IsVisible=!0,t.PstDocGrid.Columns[16].IsVisible=!1):(t.IsPDCS=!1,t.PstDocGrid.Columns[10].IsVisible=!1,t.PstDocGrid.Columns[11].IsVisible=!1,t.PstDocGrid.Columns[12].IsVisible=!1,t.PstDocGrid.Columns[13].IsVisible=!1,t.PstDocGrid.Columns[14].IsVisible=!1,t.PstDocGrid.Columns[16].IsVisible=!0),t.ShowColumnTotal()}),(function(e){console.log(e),t.DisplayMessage="Error loading Data..."}))}},{key:"LoadDashData",value:function(e){e.length>0&&null==e[0].Sno?(this.PstDocGrid.TableColumns.push("Sno"),this.PstDocGrid.TableColumns.push("DocDateFormat"),this.PstDocGrid.TableColumns.push("ChequeDateFormat"),this.PstDocGrid.TableColumns.push("CostcenterID"),this.PstDocGrid.TableColumns.push("clrDate"),this.PstDocGrid.TableColumns.push("clrDate_Key"),this.PstDocGrid.TableColumns.push("Action"),this.PstDocGrid.TableColumns.push("StatusForDisplay"),this.PstDocGrid.TableColumns.push("ConvertedDocNo"),this.PstDocGrid.TableColumns.push("ConvertedAccDocID"),this.PstDocGrid.TableColumns.push("NoOfDays"),this.PstDocGrid.TableColumns.push("SelectedAmount"),this.PstDocGrid.TableColumns.push("Commission"),this.PstDocGrid.TableColumns.push("Interest"),this.PstDocGrid.TableColumns.push("Total")):this.PstDocGrid.TableColumns.Contains("Sno")||(this.PstDocGrid.TableColumns.push("Sno"),this.PstDocGrid.TableColumns.push("DocDateFormat"),this.PstDocGrid.TableColumns.push("ChequeDateFormat"),this.PstDocGrid.TableColumns.push("CostcenterID"),this.PstDocGrid.TableColumns.push("clrDate"),this.PstDocGrid.TableColumns.push("clrDate_Key"),this.PstDocGrid.TableColumns.push("Action"),this.PstDocGrid.TableColumns.push("StatusForDisplay"),this.PstDocGrid.TableColumns.push("ConvertedDocNo"),this.PstDocGrid.TableColumns.push("ConvertedAccDocID"),this.PstDocGrid.TableColumns.push("NoOfDays"),this.PstDocGrid.TableColumns.push("SelectedAmount"),this.PstDocGrid.TableColumns.push("Commission"),this.PstDocGrid.TableColumns.push("Interest"),this.PstDocGrid.TableColumns.push("Total"));for(var t=0;t<=e.length-1;t++)n.e.IsEmpty(e[t].DocDate)||(e[t].DocDateFormat=!s.a.SessionManager.Preferences.ContainsKey("Date Format")||n.e.IsEmpty(s.a.SessionManager.Preferences["Date Format"])||n.e.IsEmpty(e[t].DocDate)?new Date(e[t].DocDate.toString()).ToString("dd/MMM/yyyy"):new Date(e[t].DocDate.toString()).ToString(s.a.SessionManager.Preferences["Date Format"])),e[t].BankAccountID_Key=this.BankCCNodeID,e[t].BankAccountID=this.bankname,n.e.IsEmpty(e[t].Amount)||(e[t].Amount=!s.a.SessionManager.Preferences.ContainsKey("DecimalsinAmount")||n.e.IsEmpty(s.a.SessionManager.Preferences.DecimalsinAmount)||n.e.IsEmpty(e[t].Amount)?parseFloat(e[t].Amount.toString()).ToString("N2"):parseFloat(e[t].Amount).ToString("N"+s.a.SessionManager.Preferences.DecimalsinAmount)),n.e.IsEmpty(e[t].ConvertedVoucherNO)||(e[t].ConvertedDocNo=e[t].ConvertedVoucherNO),n.e.IsEmpty(e[t].ConvertedDocID)||(e[t].ConvertedAccDocID=e[t].ConvertedDocID),n.e.IsEmpty(e[t].ChequeMaturityDate)||(e[t].ChequeDateFormat=!s.a.SessionManager.Preferences.ContainsKey("Date Format")||n.e.IsEmpty(s.a.SessionManager.Preferences["Date Format"])||n.e.IsEmpty(e[t].DocDate)?new Date(e[t].ChequeMaturityDate.toString()).ToString("dd/MMM/yyyy"):new Date(e[t].ChequeMaturityDate.toString()).ToString(s.a.SessionManager.Preferences["Date Format"])),e[t].Action=!1,this.PstDocGrid.updateRow(e[t])}},{key:"ButtonSave",value:function(e){var t=this;if(this.DisplayMessage="","Save"==e.toString()||"unpost"==e.toString()){this.DisplayMessage="";var o=this.GetPDReceiptXML();if(""!=this.DisplayMessage)return void(this.MessageVisibility=!0);if(0==this.CheckedCnt)this.DisplayMessage=" Please select a record ",this.MessageVisibility=!0;else if(o.length>0){g.a.SetChequeDiscDocuments(o,this.FilterDate.Date).subscribe((function(e){t.DisplayMessage=e.Message,e.RetValue>0?(t.LoadData(),t.MessageVisibility=!0,t.ShowColumnTotal(),t.Limit.Text="",t.Availed.Text="",t.SelectedValue.Text="",t.Balance.Text=""):t.MessageVisibility=!0}),(function(e){console.log(e),t.DisplayMessage="Error in save"}))}else this.DisplayMessage=" PDC Account Not Set For "+this.MessageBank,this.MessageVisibility=!0}else if("Search"==e)this.SearchGrid();else if("Refresh"==e){var n=new p(this);s.a.page.ShowDialog(n,S.a,{ShowCenter:!s.a.IsMobile,NoWidth:!0})}else if("Calculate"==e)for(var a=0;a<this.PstDocGrid.Table.length;a++)Object(i.j)(this.PstDocGrid.Table[a].Action)?(this.PstDocGrid.Table[a].Interest=(parseFloat(this.PstDocGrid.Table[a].SelectedAmount)*this.InterestRate/100/365*parseInt(this.PstDocGrid.Table[a].NoOfDays)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinAmount),this.PstDocGrid.Table[a].Commission=(parseFloat(this.PstDocGrid.Table[a].SelectedAmount)*this.CommissionRate/100/365*parseInt(this.PstDocGrid.Table[a].NoOfDays)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinAmount),this.PstDocGrid.Table[a].Total=(parseFloat(this.PstDocGrid.Table[a].Interest)+parseFloat(this.PstDocGrid.Table[a].Commission)).toString(),this.PstDocGrid.Table[a].Action=!0):(this.PstDocGrid.Table[a].Action=!1,this.PstDocGrid.Table[a].SelectedAmount="0",this.PstDocGrid.Table[a].NoOfDays="0",this.PstDocGrid.Table[a].Interest="0",this.PstDocGrid.Table[a].Commission="0",this.PstDocGrid.Table[a].Total="0"),this.ShowColumnTotal()}},{key:"SearchGrid",value:function(){if(!n.e.IsEmpty(this.SearchText)){var e="";if(""!=this.SearchCols.SelectedValue)e=this.SearchCols.SelectedValue;else{if(!(this.SearchCols.Items.length>0))return;e=this.SearchCols.Items[0].Value}if(this.PstDocGrid.TableColumns.Contains(e)){var t=this.PstDocGrid.SelectedIndex;-1==t&&(t=0);for(var o=0;o<this.PstDocGrid.Table.length;o++)if(t<this.PstDocGrid.Table.length-1?t++:t=0,!n.e.IsEmpty(this.PstDocGrid.Table[t][e]))switch(this.Options.SelectedValue){case"1":if(this.PstDocGrid.Table[t][e].toString().toLowerCase()==this.SearchText.toLowerCase())return void this.Setselectedrow(t);break;case"2":if(this.PstDocGrid.Table[t][e].toString().toLowerCase()!=this.SearchText.toLowerCase())return void this.Setselectedrow(t);break;case"3":if(this.PstDocGrid.Table[t][e].toString().toLowerCase().startsWith(this.SearchText.toLowerCase()))return void this.Setselectedrow(t);break;case"4":if(this.PstDocGrid.Table[t][e].toString().toLowerCase().endsWith(this.SearchText.toLowerCase()))return void this.Setselectedrow(t);break;case"5":if(this.PstDocGrid.Table[t][e].toString().toLowerCase().Contains(this.SearchText.toLowerCase()))return void this.Setselectedrow(t);break;case"6":if(!this.PstDocGrid.Table[t][e].toString().toLowerCase().Contains(this.SearchText.toLowerCase()))return void this.Setselectedrow(t)}}}}},{key:"Setselectedrow",value:function(e){this.PstDocGrid.SelectedItem=this.PstDocGrid.Table[e]}},{key:"GetPDReceiptXML",value:function(){var e=this;Logger.InfoLog("ChequeDiscPostedDocumentViewModel ::Entering GetPDReceiptXML");var t="",o="",s=null;if(this.CheckedCnt=0,0==this.Filter){for(var a=0;a<this.PstDocGrid.Table.length;a++)if(null!=this.PstDocGrid.Table[a].Action&&!n.e.IsEmpty(this.PstDocGrid.Table[a].Action)&&Object(i.j)(this.PstDocGrid.Table[a].Action)){if(""!=t&&(t+=",",o+=","),t+=this.PstDocGrid.Table[a].CostCenterID.toString(),n.e.IsEmpty(this.PstDocGrid.Table[a].BankAccountID_Key))return this.DisplayMessage="Select Bank at Row No:"+(a+1).toString(),this.MessageVisibility=!0,"";o+=this.PstDocGrid.Table[a].BankAccountID_Key.toString()}""!=t&&(s=g.a.GetDiscountfields(t,o))}var r="";r+="<PDR>";for(var h=0,D=function(t){if(null!=e.PstDocGrid.Table[t].Action&&!n.e.IsEmpty(e.PstDocGrid.Table[t].Action)&&Object(i.j)(e.PstDocGrid.Table[t].Action)){if(0==e.Filter){var o=null,a=s.Tables[0].filter((function(o){return o.CostCenterID==e.PstDocGrid.Table[t].CostCenterID.toString()}));if(a.length>0){var D=null;if(""==a[0].OnDiscount.toString()||!n.e.IsEmpty(a[0].OnDiscount)&&parseInt(a[0].OnDiscount.toString())<4e4)return{v:(e.DisplayMessage="Define Discount Document ",e.MessageVisibility=!0,"")};if(n.e.IsEmpty(a[0].OnDiscount)||(h=parseInt(a[0].OnDiscount.toString()),D=new b.AddEditDocumentViewModel(h,"",!1)),null!=D){if(0==(o=s.Tables[2].find((function(o){return o.AccountID==e.PstDocGrid.Table[t].BankAccountID_Key.toString()}))).length||""==o[0].PDCDiscountAccount.toString()||"0"==o[0].PDCDiscountAccount.toString())return{v:(e.DisplayMessage="Define PDC Discount Account for "+e.PstDocGrid.Table[t].BankAccountID.toString(),e.MessageVisibility=!0,"")};var m=D.ScreenObject.GridDataObj.NewRow();D.ScreenObject.GridDataColumns.Contains("CreditAccount_Key")&&(m.CreditAccount_Key=o[0].PDCDiscountAccount.toString()),null==D.ScreenObject.DebitAccount||n.e.IsEmpty(e.PstDocGrid.Table[t].BankAccountID_Key)?D.ScreenObject.GridDataColumns.Contains("DebitAccount_Key")&&(m.DebitAccount_Key=e.PstDocGrid.Table[t].BankAccountID_Key.toString()):D.ScreenObject.DebitAccount.SelectedValue=parseInt(e.PstDocGrid.Table[t].BankAccountID_Key.toString()),D.ScreenObject.GridDataColumns.Contains("Amount")&&!n.e.IsEmpty(e.PstDocGrid.Table[t].Amount)&&(m.Amount=e.PstDocGrid.Table[t].Amount.toString()),D.ScreenObject.GridDataColumns.Contains("CommonNarration")?m.CommonNarration=e.PstDocGrid.Table[t].CommonNarration.toString():null!=(d=D.ScreenObject._StaticFields.find((function(e){return"commonnarration"==e.DBColumnName.toLowerCase()})))&&d instanceof l.d&&!n.e.IsEmpty(e.PstDocGrid.Table[t].CommonNarration)&&(d.Text=e.PstDocGrid.Table[t].CommonNarration.toString()),D.ScreenObject.GridDataColumns.Contains("LineNarration")&&(m.LineNarration=e.PstDocGrid.Table[t].LineNarration.toString()),D.ScreenObject.GridDataColumns.Contains("ChequeNumber")?m.ChequeNumber=e.PstDocGrid.Table[t].ChequeNumber.toString():null!=(d=D.ScreenObject._StaticFields.find((function(e){return"chequenumber"==e.DBColumnName.toLowerCase()})))&&d instanceof l.d&&!n.e.IsEmpty(e.PstDocGrid.Table[t].chequenumber)&&(d.Text=e.PstDocGrid.Table[t].chequenumber.toString()),D.ScreenObject.GridDataColumns.Contains("ChequeMaturityDate")?m.ChequeMaturityDate=e.PstDocGrid.Table[t].ChequeMaturityDate.toString():null!=(d=D.ScreenObject._StaticFields.find((function(e){return"chequematuritydate"==e.DBColumnName.toLowerCase()})))&&d instanceof c.c&&!n.e.IsEmpty(e.PstDocGrid.Table[t].ChequeMaturityDate)&&(d.Date=new Date(e.PstDocGrid.Table[t].ChequeMaturityDate.toString())),D.ScreenObject.GridDataColumns.Contains("ChequeDate")&&(m.ChequeDate=e.PstDocGrid.Table[t].ChequeDate.toString()),s.Tables[1].find((function(e){return e.CostCenterID==a[0].OnDiscount.toString()&&e.SysColumnName==a[0].DiscountCommisionFld.toString()})).length>0&&(e.PstDocGrid.Table[t].Commission.toString().Replace(",",""),D.ScreenObject.GridDataColumns.Contains(a[0].DiscountCommisionFld.toString())&&!n.e.IsEmpty(e.PstDocGrid.Table[t].Commission)&&(m[a[0].DiscountCommisionFld.toString()]=e.PstDocGrid.Table[t].Commission.toString().Replace(",","")),D.ScreenObject.GridDataColumns.Contains(a[0].DiscountInterestFld.toString())&&""!=e.PstDocGrid.Table[t].Interest.toString().Replace(",","")&&(m[a[0].DiscountInterestFld.toString()]=e.PstDocGrid.Table[t].Interest.toString().Replace(",","")));for(var C=function(o){e.PstDocGrid.TableColumns[o].toLowerCase().Contains("alpha")&&!n.e.IsEmpty(e.PstDocGrid.Table[t][e.PstDocGrid.TableColumns[o]])?D.ScreenObject.GridDataColumns.Contains(e.PstDocGrid.TableColumns[o])?m[e.PstDocGrid.TableColumns[o]]=e.PstDocGrid.Table[t][e.PstDocGrid.TableColumns[o]].toString():null!=(d=D.ScreenObject._TextFields.find((function(t){return t.DBColumnName.toLowerCase()==e.PstDocGrid.TableColumns[o].toLowerCase()})))&&D.ScreenObject.fillcontrolValue(d,e.PstDocGrid.Table[t][e.PstDocGrid.TableColumns[o]].toString()):e.PstDocGrid.TableColumns[o].toLowerCase().Contains("dcccnid")&&""!=e.PstDocGrid.Table[t][e.PstDocGrid.TableColumns[o]].toString()&&parseInt(e.PstDocGrid.Table[t][e.PstDocGrid.TableColumns[o]].toString())>1&&(D.ScreenObject.GridDataColumns.Contains(e.PstDocGrid.TableColumns[o])?m[e.PstDocGrid.TableColumns[o]+"_Key"]=e.PstDocGrid.Table[t][e.PstDocGrid.TableColumns[o]].toString():null!=(d=D.ScreenObject._CCFields.find((function(t){return t.DBColumnName.toLowerCase()==e.PstDocGrid.TableColumns[o].toLowerCase()})))&&d instanceof u.b&&""!=e.PstDocGrid.Table[t].ChequeMaturityDate.toString()&&(d.SelectedValue=parseInt(e.PstDocGrid.Table[t][e.PstDocGrid.TableColumns[o]].toString())))},p=0;p<e.PstDocGrid.TableColumns.length;p++)C(p);if(D.ScreenObject.GridData.InsertAt(m,0),D.CalculateTotals(m,!1),D.IsAutoPost=!0,D.DisplayMessage="",D.SaveAccountingDocument("Save"),""!=D.DisplayMessage)return{v:(e.DisplayMessage=D.DisplayMessage,e.MessageVisibility=!0,"")};r+='<ROWS><Documents  Action="'+e.Filter+'" AccID="'+e.PstDocGrid.Table[t].AccDocDetailsID.toString()+'" DocID="'+e.PstDocGrid.Table[t].DocID.toString()+'" CostcenterID="'+e.PstDocGrid.Table[t].CostCenterID.toString()+'"></Documents>'+D.AutoPOstXML+"</ROWS>"}}}else r+='<ROWS><Documents  Action="'+e.Filter+'" AccID="'+e.PstDocGrid.Table[t].AccDocDetailsID.toString()+'" DocID="'+e.PstDocGrid.Table[t].DocID.toString()+'" CostcenterID="'+e.PstDocGrid.Table[t].CostCenterID.toString()+'"></Documents></ROWS>';e.CheckedCnt++}},m=0;m<this.PstDocGrid.Table.length;m++){var d,C=D(m);if("object"==typeof C)return C.v}return r+="</PDR>",Logger.InfoLog("ChequeDiscPostedDocumentViewModel ::Exiting GetPDReceiptXML"),r.toString()}}]),o}(a.b)},ouML:function(e,t,o){"use strict";o.r(t),o.d(t,"DocumentDraftsViewModel",(function(){return h}));var s=o("mrSG"),n=o("Do2H"),i=o("Lp6j"),a=o("ScVY"),r=o("8B8H"),l=o("ockk"),c=o("rJVx"),u=o("CUWK"),h=function(e){_inherits(a,e);var t=_createSuper(a);function a(e,o){var s,i,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(_classCallCheck(this,a),(s=t.call(this)).Grid=new r.a,s.IsFromDocs=!1,s.PopupWidth=0,s.ReportType=0,s.Parent=null,s.CCID=0,s.WID=0,s.LevelID=0,s.PactGridVisible=!1,s.CCID=u,s.Parent=e,s.ReportType=o,s.Parent instanceof c.GeneralDashboardViewModel||"DashAddOnsViewModel"==s.Parent.ClassName)?1==o&&(s.ColSource=c.GeneralDashboardViewModel.InitColumns("Document Drafts_DashBoardCustomize")):(1==o?s.DisplayName="Drafts":2==o?s.DisplayName="Hold Documents":3==o?s.DisplayName="Approval History":4==o&&(s.DisplayName="Level Info",s.PactGrid=new r.a),s.Title=s.DisplayName,s.IsFromDocs=!0,s.FillGrid(),s.Grid.OnLinkClick.Subscribe(_assertThisInitialized(s),"GridLinkClick"),s.ColSource=[],1==o?(s.ColSource=c.GeneralDashboardViewModel.InitColumns("Document Drafts_DashBoardCustomize"),s.PopupWidth=22,s.ColSource.forEach((function(e){s.PopupWidth=s.PopupWidth+e.Width}))):2==o?((i=new l.a).DataType="TextBlock",i.Header="Hold Date",i.DisplayMember="HoldDate_Key",i.Width=100,s.ColSource.push(i),(i=new l.a).DataType="LINK",i.Header=n.a.GetResource("DocName"),i.DisplayMember="DocName",i.Width=135,s.ColSource.push(i),(i=new l.a).DataType="TextBlock",i.Header="NetValue",i.DisplayMember="NetValue",i.Width=100,s.ColSource.push(i),(i=new l.a).DataType="TextBlock",i.Header="NoOfProducts",i.DisplayMember="NoOfProducts",i.Width=50,s.ColSource.push(i),(i=new l.a).DataType="LINK",i.Header=n.a.GetResource("Delete"),i.DisplayMember="Delete",i.Width=100,s.ColSource.push(i),s.PopupWidth=450):3==o?((i=new l.a).DataType="TextBlock",i.Header="User",i.DisplayMember="CreatedBy",i.Width=90,s.ColSource.push(i),(i=new l.a).DataType="TextBlock",i.Header="FirstName",i.DisplayMember="FirstName",i.Width=90,s.ColSource.push(i),(i=new l.a).DataType="TextBlock",i.Header="LastName",i.DisplayMember="LastName",i.Width=90,s.ColSource.push(i),(i=new l.a).DataType="TextBlock",i.Header="Email",i.DisplayMember="Email1",i.Width=150,s.ColSource.push(i),(i=new l.a).DataType="TextBlock",i.Header=n.a.GetResource("Date"),i.DisplayMember="AppDate",i.Width=128,s.ColSource.push(i),(i=new l.a).DataType="LINK",i.Header="Level",i.DisplayMember="LevelName",i.Width=93,s.ColSource.push(i),(i=new l.a).DataType="TextBlock",i.Header="Status",i.DisplayMember="Status",i.Width=80,s.ColSource.push(i),(i=new l.a).DataType="Format",i.Header="Remarks",i.DisplayMember="Remarks",i.Width=190,s.ColSource.push(i),s.PopupWidth=950,"AddEditDocumentViewModel"==s.Parent.ClassName&&((i=new l.a).Header="WorkFlowName",i.DisplayMember="WorkFlowName",i.Width=200,s.ColSource.push(i)),s.PopupWidth=950):4==o&&((i=new l.a).DataType="TextBlock",i.ReadOnly=!0,i.Header="User Name",i.DisplayMember="UserName",i.Width=120,s.ColSource.push(i),(i=new l.a).DataType="TextBlock",i.ReadOnly=!0,i.Header="First Name",i.DisplayMember="FirstName",i.Width=120,s.ColSource.push(i),(i=new l.a).DataType="TextBlock",i.ReadOnly=!0,i.Header="Last Name",i.DisplayMember="LastName",i.Width=120,s.ColSource.push(i),s.PactGrid.Columns=s.ColSource,s.PopupWidth=400));return _possibleConstructorReturn(s)}return _createClass(a,[{key:"onClick",value:function(e){event.preventDefault(),null!=this.SelectedRow&&this.LoadDraft(this.SelectedRow)}},{key:"FillGrid",value:function(){var e=this,t=0,o=null;if(i.e.IsType(this.Parent,"AddEditDocumentViewModel")?(o=this.Parent,t=0==this.CCID?o.CostCenterID:this.CCID):i.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName||(t=this.CCID),1==this.ReportType||2==this.ReportType)(i.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName?null==o||38!=o.ScreenObject.DocumentType&&39!=o.ScreenObject.DocumentType?n.a.document.GetDocumentDrafts(0,t,this.ReportType,!1):n.a.document.GetDocumentDrafts(o.ScreenObject.RegisterNodeID,t,this.ReportType,!1,!0):n.a.document.GetDocumentDrafts(0,this.Parent.CostCenterID,this.ReportType,!1)).subscribe((function(t){e.Table=t.Tables[0],e.Grid.TableColumns.Contains("Date_Text")||(e.Grid.TableColumns.push("Date_Text"),e.Grid.TableColumns.push("Delete")),e.Grid.TableColumns.Contains("HoldDate_Key")||e.Grid.TableColumns.push("HoldDate_Key"),e.Table.forEach((function(e){e.Delete="Delete",e.id=n.a.slick.rowid,e.Date_Text=new Date(e.Date).ToString(n.a.SessionManager.Preferences["Date Format"]+" hh:mm a"),null!=e.HoldDate&&(e.HoldDate_Key=new Date(e.HoldDate).ToString(n.a.SessionManager.Preferences["Date Format"]))}))}));else if(3==this.ReportType){var s=null;if(i.e.IsType(this.Parent,"AddEditDocumentViewModel")?(s=this.Parent.ScreenObject.GetDocStatusHistory()).Tables.length>1&&s.Tables[1].length>0&&s.Columns[1].Contains("WID")&&(this.WID=parseInt(s.Tables[1][0].WID)):i.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName?i.e.IsEmpty(this.Parent.ClassName)||"AddEditCasesViewModel"!=this.Parent.ClassName||(s=this.GetDocStatusHistory(73,this.Parent.CaseID,!1)):s=n.a.rental.GetHistory(t,this.Parent.ContractID),null!=s&&s.Tables.length>0){this.Table=s.Tables[0],this.Grid.TableColumns.push("AppDate");for(var r=0;r<this.Table.length;r++)""!=this.Table[r].Date.toString()&&(this.Table[r].AppDate=new Date(this.Table[r].Date.toString()).ToString(n.a.SessionManager.Preferences["Date Format"]+" hh:mm a"));var l=0,c=0;this.Table.length>0&&(l=i.e.IntTryParse(this.Table[this.Table.length-1].WorkFlowLevel.toString()),c=i.e.IntTryParse(this.Table[this.Table.length-1].StatusID.toString())),369!=c&&(s.Tables[1]=s.Tables[1].filter((function(e){return e.levelID>l})),s.Tables[1].forEach((function(t){var o=e.Grid.NewRow();o.LevelName=t.LevelName,o.Status="Pending",o.WorkFlowLevel=t.LevelID,e.Grid.addRow(o)})));for(var u=this.Table.length;u<7;u++)this.Grid.addEmptyRow()}}else if(4==this.ReportType){var h=null;if("WFLevelDoc"==this.Parent.ClassName?h=n.a.SessionManager.Preferences.ContainsKey("CanApproveFunction")&&"True"==n.a.SessionManager.Preferences.CanApproveFunction?n.a.report.GetExtWFDet(this.Parent.WID,this.Parent.LevelID,this.Parent.ccid,this.Parent.DOcId):n.a.report.GetWorkFlowLevelDetails(this.Parent.WID,this.Parent.LevelID,this.Parent.ccDate):this.Parent instanceof a&&(n.a.SessionManager.Preferences.ContainsKey("CanApproveFunction")&&"True"==n.a.SessionManager.Preferences.CanApproveFunction?"AddEditDocumentViewModel"==this.Parent.Parent.ClassName?h=n.a.report.GetExtWFDet(this.Parent.WID,this.Parent.LevelID,this.Parent.Parent.CostCenterID,this.Parent.Parent.ScreenObject.DocID):"ReportViewModel"==this.Parent.Parent.ClassName&&"INV_ComparisonReport"==this.Parent.Parent.StaticReportObject&&(h=n.a.report.GetExtWFDet(this.Parent.WID,this.Parent.LevelID,this.Parent.Parent.StaticReportObject.QuotationDocument,this.Parent.Parent.StatusDocID)):h=n.a.report.GetWorkFlowLevelDetails(this.Parent.WID,this.Parent.LevelID,"AddEditDocumentViewModel"==this.Parent.Parent.ClassName?this.Parent.Parent.ScreenObject.DocDate.Date:Date.Today())),null!=h){for(var D=h.Tables[0].length;D<8;D++)h.Tables[0].push();this.PactGrid.Table=h.Tables[0]}this.PactGrid.Width="",this.PactGrid.SearchVisible=!0,this.PactGrid.SearchCols.Width="85",this.PactGrid.SearchOptions.Width="90",this.PactGrid.SearchText.Width="110",this.PactGridVisible=!0}}},{key:"GetDocStatusHistory",value:function(e,t,o){Logger.InfoLog("DocumentDraftsViewModel:: Inside GetDocStatusHistory");var s=[];s.push(e),s.push(t),s.push(o),s.push(n.a.SessionManager.UserID),s.push(n.a.SessionManager.LanguageID);var i=n.a.document.GetDocStatusHistory(s);return Logger.InfoLog("DocumentDraftsViewModel:: Exiting GetDocStatusHistory"),i}},{key:"OnButtonClick",value:function(e){"Cancel"==e.toString()&&(i.e.IsType(this.Parent,"AddEditDocumentViewModel")&&this.CCID>0&&(this.Parent.res="No"),n.a.page.HideDialog())}},{key:"DeleteDraft",value:function(e){(i.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName?n.a.document.DeleteDocumentDraft(parseInt(e.DraftID)):n.a.rental.DeleteQuotation(parseInt(e.CostCenterID),parseInt(e.DraftID))).RetValue>0&&this.Grid.removeRow(e)}},{key:"LoadDraft",value:function(e){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var s,a,r,l,c,h=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!i.e.IsEmpty(this.Parent.ClassName)&&"AddEditRenContractViewModel"==this.Parent.ClassName){t.next=12;break}return t.next=3,Promise.all([o.e(2),o.e(1),o.e(3),o.e(5),o.e(4),o.e(6),o.e(7),o.e(10),o.e(9),o.e(12),o.e(11),o.e(13),o.e(19),o.e(15),o.e(21),o.e(20),o.e(16),o.e(14),o.e(18),o.e(17),o.e(22),o.e(89)]).then(o.bind(null,"1Cra"));case 3:return s=t.sent,a=s.AddEditDocumentViewModel,t.next=7,Promise.all([o.e(4),o.e(6)]).then(o.bind(null,"MCKn"));case 7:r=t.sent,l=r.AddEditDocumentComponent,n.a.document.GetDocumentDrafts(parseInt(e.DraftID),0,1,!1).subscribe((function(t){if(null!=(c=t.Tables[0])&&c.length>0)if("AddEditDocumentViewModel"==h.Parent.ClassName||"POSDocumentViewModel"==h.Parent.ClassName)h.CCID>0||(h.Parent.clear(1),h.Parent.LoadDraftXML(c[0]),n.a.page.HideDialog(),h.Parent.ScreenObject.GridDataObj.RefreshGridView());else{var o=1==h.ReportType,s=new a(parseInt(e.CostCenterID),e.Type.toString(),o);n.a.page.addNewTab({component:l,params:{obj:s}}),s.LoadDraftXML(c[0],o)}})),t.next=13;break;case 12:u.RibbonExtViewModel.LoadDraftRentalContract(this.Parent,parseInt(e.DraftID)),n.a.page.HideDialog();case 13:case"end":return t.stop()}}),t,this)})))}},{key:"GridLinkClick",value:function(e,t,o){event.preventDefault(),"Delete"==t?this.DeleteDraft(e):"Date_Text"!=t&&"DocName"!=t||this.LoadDraft(e)}},{key:"Table",get:function(){return this.Grid.Table},set:function(e){this.Grid.Table=e}},{key:"TableColumns",get:function(){return this.Grid.TableColumns},set:function(e){this.Grid.TableColumns=e}},{key:"ColSource",get:function(){return this.Grid.Columns},set:function(e){this.Grid.Columns=e}},{key:"SelectedRow",get:function(){return this.Grid.SelectedItem},set:function(e){this.Grid.SelectedItem=e}}]),a}(a.b)},rJVx:function(e,t,o){"use strict";o.r(t),o.d(t,"GeneralDashboardViewModel",(function(){return u}));var s=o("mrSG"),n=o("Do2H"),i=o("Lp6j"),a=o("ScVY"),r=o("NkMH"),l=o("ockk"),c=o("JIg3"),u=function(e){_inherits(a,e);var t=_createSuper(a);function a(){var e;return _classCallCheck(this,a),(e=t.call(this)).ButtonPDC=new r.a,e.timerdashboard=new i.d,e.Date=new c.a(0),e.tdMaximize=new Array(4).fill(!1),Logger.InfoLog("DashboardViewModel::Entering DashboardViewModel"),e.timerdashboard.Enabled=!0,e.timerdashboard.Interval=6e4,n.a.SessionManager.IsWebApplication||e.timerdashboard.Elapsed(_assertThisInitialized(e),"timerdashboard_Elapsed"),e.DisplayName=n.a.GetResource("Dashboard_Maindashboard"),e.loadDrafts(),Logger.InfoLog("DashboardViewModel::Exiting DashboardViewModel"),e}return _createClass(a,[{key:"loadDrafts",value:function(){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,s,n,i,a,r,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.e(150).then(o.bind(null,"ouML"));case 2:return t=e.sent,s=t.DocumentDraftsViewModel,this.DocumentDrafts=new s(this,1),setTimeout((function(){l.DocumentDrafts.FillGrid()}),500),e.next=7,o.e(0).then(o.bind(null,"AyOk"));case 7:return n=e.sent,i=n.UnAppDocumentsViewModel,this.UnApprovedDocuments=new i,e.next=12,Promise.all([o.e(2),o.e(1),o.e(5),o.e(26),o.e(42),o.e(0),o.e(73)]).then(o.bind(null,"Wh9R"));case 12:a=e.sent,r=a.DashBoardNotifViewModel,this.NotifEvents=new r(2),this.PDCDocuments=new r(4);case 15:case"end":return e.stop()}}),e,this)})))}},{key:"timerdashboard_Elapsed",value:function(e,t){n.a.page.isActiveTab(this)&&(this.OnButtonClick("RefreshPDC"),this.OnButtonClick("RefreshEvents"),this.NotifEvents.RefreshData(),this.UnApprovedDocuments.OnLoad())}},{key:"OnButtonClick",value:function(e){"PostPDC"==e||("RefreshPDC"==e?(this.PDCDocuments.EventsType=4,this.PDCDocuments.InitColumns()):"PostEvents"==e||("RefreshEvents"==e?this.NotifEvents.RefreshData():"UnApproved"==e?this.UnApprovedDocuments.OnLoad():"Drafts"==e&&this.DocumentDrafts.FillGrid()))}},{key:"OnMessageCallBack",value:function(){this.res="Yes"}}],[{key:"InitColumns",value:function(e){var t,o="",s=[];if(n.a.SessionManager.Preferences.ContainsKey(e)&&(o=n.a.SessionManager.Preferences[e]),o.length>0){var a=new i.f;a.LoadXml(o);for(var r=0;r<a.DocumentElement.children.length;r++){var c=a.DocumentElement.children[r];(t=new l.a).Header=n.a.GetResource(c.attributes.Header.value),t.DisplayMember=c.attributes.ID.value,t.ReadOnly=!0,t.Width=parseInt(c.attributes.Width.value),s.push(t),"Un Approved Documents_DashBoardCustomize"==e?"VoucherNo"==t.DisplayMember?t.DataType="LINK":"Amount"==t.DisplayMember&&(t.DataType="FLOAT",t.DecimalPoints=n.a.SessionManager.Preferences.DecimalsinAmount.toString()):"Document Drafts_DashBoardCustomize"==e?"Date_Text"!=t.DisplayMember&&"Delete"!=t.DisplayMember||(t.DataType="LINK"):"Post Dated Documents_DashBoardCustomize"==e?"VoucherNo"==t.DisplayMember?t.DataType="LINK":"Amount"==t.DisplayMember&&(t.DataType="FLOAT",t.DecimalPoints=n.a.SessionManager.Preferences.DecimalsinAmount.toString()):"Notification Events_DashBoardCustomize"==e&&"VoucherNo"==t.DisplayMember&&(t.DataType="LINK")}}return s}},{key:"IsActionAssigned",value:function(e,t){return n.a.SessionManager.IsActionAssigned(e,t)}}]),a}(a.b)}}]);