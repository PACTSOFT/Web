function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,s=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{Q0PM:function(e,t,i){"use strict";i.r(t),i.d(t,"AddEditPropertyViewModel",(function(){return N})),i.d(t,"PropertyRoleUser",(function(){return w}));var s=i("mrSG"),n=i("Do2H"),a=i("Lp6j"),o=i("eQJW"),r=i("NkMH"),l=i("VxiT"),c=i("tCvu"),h=i("n56n"),d=i("EQd/"),u=i("0/4Q"),p=i("JIg3"),S=i("OvA8"),b=i("ockk"),g=i("8B8H"),m=function(){function e(t,i,s){_classCallCheck(this,e),this.Module="RENT",this.ClassName="PropertyUnitsViewModel",this.Visible=!0,this.contextVisible=!0,this.ds=null,this.PropertyID=0,this.SelectedNode=0,this.ColumnSpan="4",this.tempUnitsGrid1Cols=[],this.UnitsGrid1Obj=new g.a,this.SNO=1,Logger.InfoLog("PropertyUnitsViewModel::Entering PropertyUnitsViewModel With oParent="+t),this.ds=s,this.PropertyID=i,this.BuildTempDataTable(),Logger.InfoLog("PropertyUnitsViewModel::Leaving PropertyUnitsViewModel")}return _createClass(e,[{key:"BuildTempDataTable",value:function(){this.UnitsGrid1Obj=new g.a,this.tempUnitsGrid1Cols.push("Sno"),this.tempUnitsGrid1Cols.push("Type"),this.tempUnitsGrid1Cols.push("NodeID"),this.tempUnitsGrid1Cols.push("Numbers"),this.tempUnitsGrid1Cols.push("Rent");var e=[],t=new b.a;(t=new b.a).DisplayMember="Sno",t.Header=n.a.GetResource("Sno"),t.DataType="TextBox",t.Width=50,t.IsVisible=!0,t.ReadOnly=!0,e.push(t),(t=new b.a).ComboData=this.ds.Tables[11],t.DisplayMember="Type",t.ValueMember="NodeID",t.ValueBinding="NodeID",t.DataType="ComboBox",t.Header=n.a.GetResource("Units_Type"),t.Width=200,t.IsVisible=!0,e.push(t),(t=new b.a).DisplayMember="Numbers",t.Header=n.a.GetResource("Units_Numbers"),t.DataType="INT",t.Width=100,t.IsVisible=!0,e.push(t),(t=new b.a).DisplayMember="Rent",t.Header=n.a.GetResource("Units_Rent"),t.DataType="FLOAT",t.Width=100,t.IsVisible=!0,e.push(t),this.UnitsGrid=e;for(var i=0;i<10;i++)this.UnitsGrid1Obj.addEmptyRow()}},{key:"OnCmnItem_Click",value:function(e){switch(Logger.InfoLog("PropertyUnitsViewModel::Entering OnCmnItem_Click"),e){case"DELETE":this.UnitsGrid1.length>0&&(this.UnitsGrid1Obj.removeRow(this.SelectedNode),this.UpdateSequence())}Logger.InfoLog("PropertyUnitsViewModel::Exiting OnCmnItem_Click")}},{key:"UnitsGrid1_TableNewRow",value:function(e,t){this.UpdateSequence(),t.Row.Sno=this.SNO}},{key:"UpdateSequence",value:function(){var e=this;this.SNO=1,this.UnitsGrid1.forEach((function(t){t.Sno=e.SNO++}))}},{key:"GetXML",value:function(){Logger.InfoLog("PropertyUnitsViewModel::Entering GetXML");var e="";if(null!=this.UnitsGrid1&&this.UnitsGrid1.length>0){e+="<XML>";for(var t=0;t<this.UnitsGrid1.length;t++)a.e.StringIsNullOrEmpty(this.UnitsGrid1[t].NodeID)||(e+="<Row   ",e+=' PropertyID="'+this.PropertyID+'"',e+=' TypeID="1"',e+=' RowNo="'+(t+1)+'"',e+=' Type="'+this.UnitsGrid1[t].NodeID.toString()+'"',e+=' Numbers="'+a.e.String(this.UnitsGrid1[t].Numbers)+'"',e+=' Rent="'+a.e.String(this.UnitsGrid1[t].Rent)+'"',e+="/>");e.length>0&&(e+="</XML>")}return Logger.InfoLog("PropertyUnitsViewModel::Leaving GetXML Which Returns XML as"+e),e.toString()}},{key:"Load",value:function(e){if(null!=e.Tables[9]&&e.Tables[9].length>0){var t=e.Tables[9];t=t.filter((function(e){return 1==e.TypeID}));for(var i=0;i<t.length;i++)this.UnitsGrid1Obj.addEmptyRow(),this.UnitsGrid1[i].NodeID=t[i].Type.toString(),this.UnitsGrid1[i].Numbers=t[i].Numbers.toString(),this.UnitsGrid1[i].Rent=t[i].Rent.toString()}}},{key:"angularGrid",get:function(){return this.UnitsGrid1Obj.angularGrid}},{key:"UnitsGrid1",get:function(){return this.UnitsGrid1Obj.Table}},{key:"UnitsGrid",get:function(){return this.UnitsGrid1Obj.Columns},set:function(e){this.UnitsGrid1Obj.Columns=e}},{key:"PropertUnitColumns",get:function(){return this.UnitsGrid1Obj.TableColumns}},{key:"SelectedRow",get:function(){return this.UnitsGrid1Obj.SelectedItem},set:function(e){this.UnitsGrid1Obj.SelectedItem=e}}]),e}(),I=function(){function e(t,i,s){_classCallCheck(this,e),this.Module="RENT",this.ClassName="PropertyParkingViewModel",this.Visible=!0,this.contextVisible=!0,this.ds=null,this.PropertyID=0,this.SelectedNode=0,this.ColumnSpan="4",this.tempParkingGrid1Cols=[],this.ParkingGrid1Obj=new g.a,this.SNO=1,Logger.InfoLog("PropertyParkingViewModel::Entering PropertyParkingViewModel With oParent="+t),this.ds=s,this.PropertyID=i,this.BuildTempDataTable(),Logger.InfoLog("PropertyParkingViewModel::Leaving PropertyParkingViewModel")}return _createClass(e,[{key:"BuildTempDataTable",value:function(){this.ParkingGrid1Obj=new g.a,this.tempParkingGrid1Cols.push("Sno"),this.tempParkingGrid1Cols.push("Type"),this.tempParkingGrid1Cols.push("NodeID"),this.tempParkingGrid1Cols.push("Numbers"),this.tempParkingGrid1Cols.push("Rent");var e=[],t=new b.a;(t=new b.a).DisplayMember="Sno",t.Header=n.a.GetResource("Sno"),t.DataType="TextBox",t.Width=50,t.IsVisible=!0,t.ReadOnly=!0,e.push(t),t=new b.a,this.ds.Tables.length>16&&this.ds.Tables[16].length>0&&(t.ComboData=this.ds.Tables[16]),t.DisplayMember="Type",t.ValueMember="NodeID",t.ValueBinding="NodeID",t.DataType="ComboBox",t.Header=n.a.GetResource("Units_Type"),t.Width=200,t.IsVisible=!0,e.push(t),(t=new b.a).DisplayMember="Numbers",t.Header=n.a.GetResource("Units_Numbers"),t.DataType="INT",t.Width=100,t.IsVisible=!0,e.push(t),(t=new b.a).DisplayMember="Rent",t.Header=n.a.GetResource("Units_Rent"),t.DataType="FLOAT",t.Width=100,t.IsVisible=!0,e.push(t),this.ParkingGrid=e;for(var i=0;i<10;i++)this.ParkingGrid1Obj.addEmptyRow()}},{key:"OnCmnItem_Click",value:function(e){switch(Logger.InfoLog("PropertyParkingViewModel::Entering OnCmnItem_Click"),e){case"DELETE":this.ParkingGrid1.length>0&&(this.ParkingGrid1.RemoveAt(this.SelectedNode),this.UpdateSequence())}Logger.InfoLog("PropertyParkingViewModel::Exiting OnCmnItem_Click")}},{key:"ParkingGrid1_TableNewRow",value:function(e,t){this.UpdateSequence(),t.Row.Sno=this.SNO}},{key:"UpdateSequence",value:function(){var e=this;this.SNO=1,this.ParkingGrid1.forEach((function(t){t.Sno=e.SNO++}))}},{key:"GetXML",value:function(){Logger.InfoLog("PropertyParkingViewModel::Entering GetXML");var e="";if(null!=this.ParkingGrid1&&this.ParkingGrid1.length>0){e+="<XML>";for(var t=0;t<this.ParkingGrid1.length;t++)a.e.StringIsNullOrEmpty(this.ParkingGrid1[t].NodeID)||(e+="<Row   ",e+=' PropertyID="'+this.PropertyID+'"',e+=' TypeID="2"',e+=' RowNo="'+(t+1)+'"',e+=' Type="'+this.ParkingGrid1[t].NodeID.toString()+'"',e+=' Numbers="'+a.e.String(this.ParkingGrid1[t].Numbers)+'"',e+=' Rent="'+a.e.String(this.ParkingGrid1[t].Rent)+'"',e+="/>");e.length>0&&(e+="</XML>")}return Logger.InfoLog("PropertyParkingViewModel::Leaving GetXML Which Returns XML as"+e),e.toString()}},{key:"Load",value:function(e){if(null!=e.Tables[9]&&e.Tables[9].length>0){var t=e.Tables[9];t=t.filter((function(e){return 2==e.TypeID}));for(var i=0;i<t.length;i++)this.ParkingGrid1Obj.addEmptyRow(),this.ParkingGrid1[i].NodeID=t[i].Type.toString(),this.ParkingGrid1[i].Numbers=t[i].Numbers.toString(),this.ParkingGrid1[i].Rent=t[i].Rent.toString()}}},{key:"angularGrid",get:function(){return this.ParkingGrid1Obj.angularGrid}},{key:"ParkingGrid1",get:function(){return this.ParkingGrid1Obj.Table}},{key:"ParkingGrid",get:function(){return this.ParkingGrid1Obj.Columns},set:function(e){this.ParkingGrid1Obj.Columns=e}},{key:"SelectedRow",get:function(){return this.ParkingGrid1Obj.SelectedItem},set:function(e){this.ParkingGrid1Obj.SelectedItem=e}}]),e}(),y=i("ScVY"),D=function(){function e(t,i){_classCallCheck(this,e),this.Module="RENT",this.ClassName="PropertyShareHolderViewModel",this.Visible=!0,this.contextVisible=!0,this.ShareHolderGrid=new g.a,this.ShareHolderGridCols=[],this.ColumnSpan="4",this.Parent=null,Logger.InfoLog("PropertyShareHolderViewModel::Entering PropertyShareHolderViewModel With oParent="+t),this.Parent=t,this.ShareHolderGrid=new g.a,this.ShareHolderGrid.Table=[],this.ShareHolderGrid.CanUserAddRows=!0,this.ShareHolderGrid.CanUserDeleteRows=!0,this.BuildTempDataTable(),Logger.InfoLog("PropertyShareHolderViewModel::Leaving PropertyShareHolderViewModel")}return _createClass(e,[{key:"BuildTempDataTable",value:function(){this.ShareHolderGrid.Clear(),this.ShareHolderGridCols.push("Account"),this.ShareHolderGridCols.push("Account_Key"),this.ShareHolderGridCols.push("Income"),this.ShareHolderGridCols.push("Expenses"),this.ShareHolderGridCols.push("OpIncome"),this.ShareHolderGridCols.push("OpExpenses");var e=[],t=new b.a;(t=new b.a).CostCenterID=2,t.TypeID=2,t.DataType="LISTBOX",t.DisplayMember="Account",t.ValueMember="Account_Key",t.Header="Share Holder",t.Width=250,e.push(t),(t=new b.a).DisplayMember="Income",t.Header="Income %",t.DataType="FLOAT",t.Width=100,t.ShowTotal=!0,t.IsCalculated=1,t.IsVisible=!0,t.DefaultValue="0",t.DecimalPoints=this.Parent.ShareDec>0?this.Parent.ShareDec.toString():n.a.SessionManager.Preferences.DecimalsinAmount,e.push(t),(t=new b.a).DisplayMember="Expenses",t.Header="Expenses %",t.DataType="FLOAT",t.Width=100,t.ShowTotal=!0,t.IsCalculated=1,t.IsVisible=!0,t.DefaultValue="0",t.DecimalPoints=this.Parent.ShareDec>0?this.Parent.ShareDec.toString():n.a.SessionManager.Preferences.DecimalsinAmount,e.push(t),(t=new b.a).DisplayMember="OpIncome",t.Header="Opening Income",t.DataType="FLOAT",t.Width=150,t.ShowTotal=!0,t.IsCalculated=1,t.IsVisible=!0,t.DefaultValue="0",t.DecimalPoints=this.Parent.ShareDec>0?this.Parent.ShareDec.toString():n.a.SessionManager.Preferences.DecimalsinAmount,e.push(t),(t=new b.a).DisplayMember="OpExpenses",t.Header="Opening Expenses",t.DataType="FLOAT",t.Width=150,t.ShowTotal=!0,t.IsCalculated=1,t.IsVisible=!0,t.DefaultValue="0",t.DecimalPoints=this.Parent.ShareDec>0?this.Parent.ShareDec.toString():n.a.SessionManager.Preferences.DecimalsinAmount,e.push(t),this.ShareHolderGrid.Columns=e;for(var i=0;i<10;i++)this.ShareHolderGrid.addEmptyRow();this.ShareHolderGrid.ConstructFormulaFields(),this.ShareHolderGrid.OnCellEditEnding.Subscribe(this,"onCellEditEnding")}},{key:"onCellEditEnding",value:function(e,t,i){this.ShareHolderGrid.UpdateTotals()}},{key:"GetShareHolderXML",value:function(){Logger.InfoLog("PropertyShareHolderViewModel::Entering GetShareHolderXML");var e="";if(null!=this.ShareHolderGrid.Table&&this.ShareHolderGrid.Table.length>0){for(var t=0;t<this.ShareHolderGrid.Table.length;t++)a.e.StringIsNullOrEmpty(this.ShareHolderGrid.Table[t].Account_Key)||(e+="<Row   ",e+=' RowNo="'+(t+1)+'"',e+=' Account="'+this.ShareHolderGrid.Table[t].Account_Key.toString()+'"',e+=' Income="'+a.e.String(this.ShareHolderGrid.Table[t].Income)+'"',e+=' Expenses="'+a.e.String(this.ShareHolderGrid.Table[t].Expenses)+'"',e+=' OpIncome="'+a.e.String(this.ShareHolderGrid.Table[t].OpIncome)+'"',e+=' OpExpenses="'+a.e.String(this.ShareHolderGrid.Table[t].OpExpenses)+'"',e+="/>");e.length>0&&(e="<XML>"+e+"</XML>")}return Logger.InfoLog("PropertyShareHolderViewModel::Leaving GetShareHolderXML Which Returns XML as"+e),e.toString()}},{key:"LoadData",value:function(e){Logger.InfoLog("PropertyShareHolderViewModel :: Entering LoadData With DataTable="+e);var t=0,i=e;for(this.ShareHolderGrid.Clear();t<i.length;t++){var s=this.ShareHolderGrid.NewRow();s.Account=i[t].AccountName.toString(),s.Account_Key=i[t].Account.toString(),null!=e[0].Income&&(s.Income=i[t].Income.toString()),null!=e[0].Expenses&&(s.Expenses=i[t].Expenses.toString()),null!=e[0].OpIncome&&(s.OpIncome=i[t].OpIncome.toString()),null!=e[0].OpExpenses&&(s.OpExpenses=i[t].OpExpenses.toString()),this.ShareHolderGrid.addRow(s)}for(;t<10;t++)this.ShareHolderGrid.addEmptyRow();this.ShareHolderGrid.UpdateTotals(),Logger.InfoLog("PropertyShareHolderViewModel::Exiting LoadBundles")}},{key:"angularGrid",get:function(){return this.ShareHolderGrid.angularGrid}}]),e}(),T=i("4k0m"),P=i("++IR"),f=i("bgvB"),C=i("wJuo"),A=i("x68t"),R=i("Jnyl"),L=i("Huqd"),V=i("bwbx"),v=i("c6C+"),O=i("RJs6"),N=function(e){_inherits(b,e);var t=_createSuper(b);function b(e,i,s){var a;if(_classCallCheck(this,b),(a=t.call(this)).CostCenterID=0,a.AttachmentVisibility=!1,a.ButtonSave=new r.a,a.PropertyID=0,a.ShareDec=0,a.SelectedNodeID=0,a.ds=null,a.ds1=null,a.PRT={},a.LocAccountant=!1,a.LocLandLord=!1,a.LocSalesman=!1,a.ScreenObject=new l.a,a.DisplayName="",a.Title="",a.ReportInfoVisibility=!0,a.ReportsList=[],a.DepositsTab=!1,a.UnitsTab=!1,a.ButtonCustomize=new r.a,a.Salesman=new h.b(26384),a.Accountant=new h.b(26385),a.Landlord=new h.b(26386),a.LocationProperty=new h.b(53523),a.ParkingTab=!1,a.TermsConditions=new d.c(26149),a.Code=new d.a(25542),a.Name=new d.d(25543),a.Group=new h.b(26394),a.Status=new u.e(25544),a.Type=new u.e(25545),a.Total=new d.d(25546),a.PlotArea=new d.d(25547),a.BuildUpArea=new d.d(25548),a.Owner=new u.e(25549),a.Address1=new d.d(25550),a.Address2=new d.d(25551),a.City=new d.d(25552),a.State=new d.d(25553),a.Zip=new d.d(25554),a.Country=new d.d(25555),a.BondNo=new d.d(25556),a.BondDate=new p.a(25557),a.BondType=new u.e(25558),a.TowerType=new u.e(27285),a.GPS=new d.d(27286),a.PropertyNo=new d.d(25559),a.PropertyPosition=new u.e(25560),a.PropertyCategory=new u.e(25561),a.Units=new d.d(25562),a.Parkings=new d.d(25563),a.Floors=new d.d(25564),a.ObjPropertyRoleUser=new w,a.FileID=0,a.IsPhotoDelete=!1,a.IsPhotoChanged=!1,a.Isgroup=!1,a.AccountPhoto="",a.PhotoTextVisibility=!1,a.guid="",a.FileExtension="",a.FileDescription="",a.ActualFileName="",a.NoteVisibility=!1,a.ErrorMessage="Missing Report Parameter ' ",a.IsLocationAv=!1,a.RetValue=0,a.CodePrefix="",a.CodeNumber=0,a.GroupSeqNoLength=0,e>0?n.a.SessionManager.HideUnathorizedAccess?a.ButtonSave.Visible=n.a.SessionManager.IsActionAssigned(92,"Update"):a.ButtonSave.Enable=n.a.SessionManager.IsActionAssigned(92,"Update"):n.a.SessionManager.HideUnathorizedAccess?a.ButtonSave.Visible=n.a.SessionManager.IsActionAssigned(92,"Create"):a.ButtonSave.Enable=n.a.SessionManager.IsActionAssigned(92,"Create"),n.a.SessionManager.HideUnathorizedAccess?a.ButtonCustomize.Visible=n.a.SessionManager.IsActionAssigned(92,"Customize"):a.ButtonCustomize.Enable=n.a.SessionManager.IsActionAssigned(92,"Customize"),a.CostCenterID=92,a.PRT.IsGroup=s,a.ScreenObject.LoadScreen_2(_assertThisInitialized(a),92),a.LoadImageDimensions(),a.PhotoTextVisibility=!0,a.LocationProperty.OnPactListBoxValueChanged.Subscribe(_assertThisInitialized(a),"onSelectionChangedCommand"),a.Landlord.OnPactListBoxValueChanged.Subscribe(_assertThisInitialized(a),"onSelectionChangedCommand"),a.ScreenObject.Data.Tables.length>4&&a.ScreenObject.Data.Tables[4].length>0){var g=a.ScreenObject.Data.Tables[4].filter((function(e){return"Salesman"==e.Name}));g.length>0&&parseInt(g[0].Value)>0&&(a.Salesman.CCID=parseInt(g[0].Value)),(g=a.ScreenObject.Data.Tables[4].filter((function(e){return"Accountant"==e.Name}))).length>0&&parseInt(g[0].Value)>0&&(a.Accountant.CCID=parseInt(g[0].Value)),(g=a.ScreenObject.Data.Tables[4].filter((function(e){return"Landlord"==e.Name}))).length>0&&parseInt(g[0].Value)>0&&(a.Landlord.CCID=parseInt(g[0].Value)),(g=a.ScreenObject.Data.Tables[4].filter((function(e){return"LocAccountant"==e.Name}))).length>0&&(a.LocAccountant=Object(o.j)(g[0].Value)),(g=a.ScreenObject.Data.Tables[4].filter((function(e){return"LocLandLord"==e.Name}))).length>0&&(a.LocLandLord=Object(o.j)(g[0].Value)),(g=a.ScreenObject.Data.Tables[4].filter((function(e){return"LocSalesman"==e.Name}))).length>0&&(a.LocSalesman=Object(o.j)(g[0].Value)),(g=a.ScreenObject.Data.Tables[4].filter((function(e){return"ShareholderDec"==e.Name}))).length>0&&(a.ShareDec=parseInt(g[0].Value)),a.Accountant.TypeID=1,a.Landlord.TypeID=1,a.Salesman.TypeID=1}if(a.ScreenObject.Data.Tables.length>6&&u.e.FillComboWithDefaultOption(a.ScreenObject.Data.Tables[6],a.TowerType),null!=a.ScreenObject.Data&&a.ScreenObject.Data.Tables.length>7&&a.ScreenObject.Data.Columns[7].Contains("IsParentCodeInherited")&&a.ScreenObject.Data.Tables[7].length>0&&a.ScreenObject.InitAutoCode(a.ScreenObject.Data.Tables[7],a.PRT.IsGroup),a.ds=n.a.rental.GetProperty(e,0),a.PropertyID=e,a.PropertyShareHolder=new D(_assertThisInitialized(a),e),a.PropertyDeposits=new c.a(_assertThisInitialized(a),e,92),a.PropertyUnits=new m(_assertThisInitialized(a),a.PropertyID,a.ds),a.PropertyParking=new I(_assertThisInitialized(a),a.PropertyID,a.ds),a.ViewAttachments=new S.ViewAttachmentViewModel(_assertThisInitialized(a),n.a.SessionManager,n.a.admin),a.ViewNotes=new O.a(_assertThisInitialized(a),n.a.SessionManager,n.a.admin),a.LoadTabs(),a.ds.Tables[3].forEach((function(e){a.Status.Items.push(u.d.ComboBoxItems_2(e.Status.toString(),e.StatusID.toString())),a.Status.SelectedValue="422"})),a.LocationProperty.CCID=50002,a.LocationProperty.TypeID=1,u.e.FillComboWithDefaultOption(a.ds.Tables[4],a.PropertyPosition),u.e.FillComboWithDefaultOption(a.ds.Tables[12],a.BondType),u.e.FillComboWithDefaultOption(a.ds.Tables[5],a.PropertyCategory),u.e.FillComboWithDefaultOption(a.ds.Tables[6],a.Type),u.e.FillComboWithDefaultOption(a.ds.Tables[7],a.Owner),a.Group.SelectionChangedCommand.Subscribe(_assertThisInitialized(a),"OnGroupSelectionChanged"),0==e?(a.DisplayName=n.a.GetResource("RENTALSProperty_AddProperty"),a.Title=a.DisplayName,a.PRT.GUID="GUID",a.Group.SelectedValue=0!=i?i:2,a.AutoGenerateCode(),a.LoadParentData(),a.ScreenObject.CheckViewForUser(!1)):(a.DisplayName=n.a.GetResource("RENTALSProperty_EditProperty"),a.Title=a.DisplayName,a.LoadData(),a.PRT.GUID=a.ds.Tables[2][0].GUID.toString(),a.ObjPropertyRoleUser.SetUserRoles(a.ds),a.ScreenObject.IsAutoCode&&(a.Code.Enable=parseInt(a.ds.Tables[0][0].Depth)<=1&&!a.ScreenObject.IsRootAutoCode)),n.a.SessionManager.LocationID>0&&a.IsLocationAv&&(a.LocAccountant&&(a.Accountant.CustomWhere="   CC.CCNID2 IN ("+n.a.SessionManager.LocationID+") "),a.LocLandLord&&(a.Landlord.CustomWhere="   CC.CCNID2 IN ("+n.a.SessionManager.LocationID+") "),a.LocSalesman&&(a.Salesman.CustomWhere="  CC.CCNID2 IN ("+n.a.SessionManager.LocationID+") ")),n.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"true"==n.a.SessionManager.Preferences.EnableLocationWise.toString().toLowerCase()&&n.a.SessionManager.Preferences.ContainsKey("LW Property")&&"true"==n.a.SessionManager.Preferences["LW Property"].toString().toLowerCase()&&0!=a.LocationProperty.SelectedValue){var y=n.a.rental.GetLandLordLocation(0,a.LocationProperty.SelectedValue),T="";null!=y&&y.Tables.length>0&&y.Tables[0].length>0?(y.Tables[0].forEach((function(e){""!=T&&(T+=" , "),T+=e.ParentNodeID.toString()})),a.Landlord.CustomWhere=""!=T?" a.NodeID in ( "+T+") ":" a.NodeID = -1 "):a.Landlord.CustomWhere=" a.NodeID = -1 "}return a.ReportView(),_possibleConstructorReturn(a)}return _createClass(b,[{key:"GetXML",value:function(){}},{key:"OnShowNote",value:function(){}},{key:"OnAddNote",value:function(){this.Note=new v.AddNoteViewModel,this.Note.AddNoteViewModel_2(this)}},{key:"OnShowAttachment",value:function(){Logger.InfoLog("AddEditAccountScreenViewModel::Entering OnShowAttachment"),Logger.InfoLog("AddEditAccountScreenViewModel::Exiting OnShowAttachment")}},{key:"OnAddAttachment",value:function(){Logger.InfoLog("AddEditAccountScreenViewModel::Entering AddAttachment"),Logger.InfoLog("AddEditAccountScreenViewModel::Exiting AddAttachment")}},{key:"AddEditPropertyViewModel_1",value:function(){}},{key:"ReportView",value:function(){var e=this;this.ReportDimension=new h.b(0),this.ReportDimension.CCID=this.CostCenterID,this.ReportDimension.TypeID=1,this.ReportDimension.SelectedValue=this.PropertyID,this.ReportsList=[],this.ReportDimension.OnPactListBoxValueChanged.Subscribe(this,"OnReportsLinkClick");var t=[];null!=this.ScreenObject.Data&&this.ScreenObject.Data.Tables.length>8&&this.ScreenObject.Data.Tables[8].forEach((function(i){var s=new r.a;s.DBColumnID=parseInt(i.ReportID),s.Label=i.ReportName.toString(),e.ScreenObject.Data.Columns[8].Contains("Shortcut")&&(s.KeyTip=i.Shortcut.toString()),e.ScreenObject.Data.Columns[8].Contains("DisplayAsPopup")&&""!=i.DisplayAsPopup.toString()&&(s.Dependantinuse="1"==i.DisplayAsPopup.toString()),e.ScreenObject.Data.Columns[8].Contains("Width")&&""!=i.Width.toString()&&(s.Width=i.Width.toString()),e.ScreenObject.Data.Columns[8].Contains("Height")&&""!=i.Height.toString()&&(s.Length=i.Height.toString()),e.ScreenObject.Data.Columns[8].Contains("DocumentField")&&""!=i.DocumentField.toString()&&(s.Formula=i.DocumentField.toString()),e.ScreenObject.Data.Columns[8].Contains("mapxml")&&""!=i.mapxml.toString()&&(s.ToolTipDescription=i.mapxml.toString()),t.Contains(parseInt(i.ReportID))||(t.push(parseInt(i.ReportID)),e.ReportsList.push(s))}))}},{key:"OnReportsLinkClick",value:function(e){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var s,o,r,l,c,h,d,u,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([i.e(2),i.e(1),i.e(3),i.e(5),i.e(4),i.e(6),i.e(7),i.e(10),i.e(9),i.e(8),i.e(12),i.e(11),i.e(13),i.e(19),i.e(15),i.e(21),i.e(20),i.e(16),i.e(14),i.e(18),i.e(17),i.e(22),i.e(23),i.e(24),i.e(25),i.e(28),i.e(30),i.e(29),i.e(32),i.e(31),i.e(27),i.e(26),i.e(35),i.e(37),i.e(38),i.e(36),i.e(33),i.e(34),i.e(39),i.e(40),i.e(41),i.e(212)]).then(i.bind(null,"ThYU"));case 2:return s=t.sent,o=s.ReportViewModel,t.next=6,Promise.all([i.e(32),i.e(37)]).then(i.bind(null,"YU11"));case 6:r=t.sent,l=r.ReportViewComponent,h={strXML:""},d=new o,this.ReportDimension.SelectedValue=this.PropertyID,this.DisplayMessage=this.GetReportFilterXML(e,h),c=h.strXML,0==this.DisplayMessage.length&&(null!=(u=this.ReportsList.find((function(t){return t.DBColumnID==parseInt(e)})))&&u.Dependantinuse?(d.ReportViewModel_Document(this.CostCenterID,c,parseInt(e),!0,null,null),!a.e.IsEmpty(u.Width)&&parseFloat(u.Width)>0&&(d.RptWidth=parseFloat(u.Width)),!a.e.IsEmpty(u.length)&&parseFloat(u.length)>0&&(d.RptHeight=parseFloat(u.length)),d.DocumentObject=this,n.a.page.HideDialog(),n.a.page.ShowDialog(d,l,{Title:"",HideClose:!0,ShowCenter:!0})):((p=new o).ReportViewModel_Document(this.CostCenterID,c,parseInt(e),!1,null,null),p.DocumentObject=this,n.a.page.HideDialog(),n.a.page.addNewTab({component:l,params:{obj:p}})));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"GetReportFilterXML",value:function(e,t){var i=this,s="";t.strXML="";var n=this.ScreenObject.Data.Tables[8];n=n.filter((function(t){return t.ReportID==e}));var a,r=!1;n.forEach((function(e){Object(o.j)(e.GroupLevel)&&(r=!0)})),s+="<XML",r&&(s+=' GroupLevel="1"'),s+=" >";for(var l=function(e){a=n[e].ReportField.toString(),s+="<Row ",s+='ColID ="'+a+'" ';for(var t=0;t<i.ScreenObject.StaticFields.length;t++)if(i.ScreenObject.StaticFields[t].DBColumnID==parseInt(n[e].DocumentField.toString()))if(i.ScreenObject.StaticFields[t]instanceof d.d){if(""==i.ScreenObject.StaticFields[t].Text)return{v:(alert(i.ErrorMessage+i.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};"SNO"==n[e].SysColumnName.toString()?s+='Value ="'+i.ReportDimension.SelectedValue+'" ':s+='Value ="'+i.ScreenObject.StaticFields[t].Text+'" '}else if(i.ScreenObject.StaticFields[t]instanceof R.a){if(""==i.ScreenObject.StaticFields[t].TextBox.Text||""==i.ScreenObject.StaticFields[t].ComboBox.SelectedValue)return{v:(alert(i.ErrorMessage+i.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};s+='Value ="'+i.ScreenObject.StaticFields[t].ComboBox.SelectedValue+'" '}else if(i.ScreenObject.StaticFields[t]instanceof d.c){if(""==i.ScreenObject.StaticFields[t].Text)return{v:(alert(i.ErrorMessage+i.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};s+='Value ="'+i.ScreenObject.StaticFields[t].Text+'" '}else if(i.ScreenObject.StaticFields[t]instanceof p.a||i.ScreenObject.StaticFields[t]instanceof p.d||i.ScreenObject.StaticFields[t]instanceof p.c){if(i.ScreenObject.StaticFields[t]instanceof p.a||i.ScreenObject.StaticFields[t]instanceof p.d){if(""==i.ScreenObject.StaticFields[t].Text)return{v:(alert(i.ErrorMessage+i.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};s+='Value ="'+i.ScreenObject.StaticFields[t].Date.ToString("dd/MMM/yyyy")+'" '}else if(i.ScreenObject.StaticFields[t]instanceof p.c){if(!i.ScreenObject.StaticFields[t].Date)return{v:(alert(i.ErrorMessage+i.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};s+='Value ="'+i.ScreenObject.StaticFields[t].Date.ToString("dd/MMM/yyyy")+'" '}}else if(i.ScreenObject.StaticFields[t]instanceof h.b){if(""==i.ScreenObject.StaticFields[t].Text)return{v:(alert(i.ErrorMessage+i.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};s+='Value ="'+i.ScreenObject.StaticFields[t].SelectedValue+'" '}else if(i.ScreenObject.StaticFields[t]instanceof L.a){if(""==i.ScreenObject.StaticFields[t].Text)return{v:(alert(i.ErrorMessage+i.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};s+='Value ="'+i.ScreenObject.StaticFields[t].SelectedValue+'" '}i.ScreenObject.CustomTab.Pages.forEach((function(t){t.Fields.forEach((function(t){if(null!=t&&(t instanceof d.d||t instanceof R.a||t instanceof d.c||t instanceof p.a||t instanceof p.d||t instanceof p.c||t instanceof h.b||t instanceof L.a)&&t.DBColumnID==parseInt(n[e].DocumentField.toString()))if(t instanceof d.d){if(""==t.Text)return alert(i.ErrorMessage+t.Label+" '"),"Empty Value";s+='Value ="'+t.Text+'" '}else if(t instanceof R.a){if(""==t.TextBox.Text||""==t.ComboBox.SelectedValue)return alert(i.ErrorMessage+t.Label+" '"),"Empty Value";s+='Value ="'+t.TextBox.Text+'" '}else if(t instanceof d.c){if(""==t.Text)return alert(i.ErrorMessage+t.Label+" '"),"Empty Value";s+='Value ="'+t.Text+'" '}else if(t instanceof p.a||t instanceof p.d||t instanceof p.c){if(t||t){if(""==t.Text)return alert(i.ErrorMessage+t.Label+" '"),"Empty Value";s+='Value ="'+t.Date.ToString("dd/MMM/yyyy")+'" '}else if(t instanceof p.c){if(!t.Date)return alert(i.ErrorMessage+t.Label+" '"),"Empty Value";s+='Value ="'+t.Date.ToString("dd/MMM/yyyy")+'" '}}else if(t instanceof h.b){if(""==t.Text&&0==t.SelectedValue)return alert(i.ErrorMessage+t.Label+" '"),"Empty Value";s+='Value ="'+t.SelectedValue+'" '}else if(t instanceof L.a){if(""==t.Text)return alert(i.ErrorMessage+t.Label+" '"),"Empty Value";s+='Value ="'+t.SelectedValue+'" '}}))})),s+=" />"},c=0;c<n.length;c++){var u=l(c);if("object"==typeof u)return u.v}return s+="</XML>",t.strXML=s.toString(),""}},{key:"OnGroupSelectionChanged",value:function(e){null!=e&&("Group"==e.toString()||"PACT.COMMON.PactListBoxData"==e.toString()&&"IsGroup"==e.DBColumnName)&&this.Group.SelectedValue>0&&this.SelectedNodeID!=this.Group.SelectedValue&&(this.SelectedNodeID=this.Group.SelectedValue,this.Group.DefaultValue=this.Group.SelectedValue.toString(),this.AutoGenerateCode(),this.LoadParentData())}},{key:"LoadParentData",value:function(){var e=this;if(0==this.PropertyID&&0!=this.Group.SelectedValue&&!this.Isgroup){var t=this.ScreenObject.Data.Tables[4].filter((function(e){return"Copygroupdatatonode"==e.Name}));if(0!=t.length&&!a.e.StringIsNullOrEmpty(t[0].Value)&&Object(o.j)(t[0].Value)){var i=n.a.rental.GetEditProperty(this.Group.SelectedValue);if(0!=i.Tables.length&&0!=i.Tables[0].length){var s=null,r=null,l=null;i.Tables.length>0&&i.Tables[0].length>0&&(s=i.Tables[0][0]),i.Tables.length>1&&i.Tables[1].length>0&&(r=i.Tables[1][0]),i.Tables.length>2&&i.Tables[2].length>0&&(l=i.Tables[2][0]),this.ScreenObject.FillParentData(s,r,l,["Code","Name","Group","IsGroup"]),(t=this.ScreenObject.Data.Tables[4].filter((function(e){return"CopyGroupTabs"==e.Name}))).length>0&&""!=t[0].Value.toString()&&function(){var s=t[0].Value.toString().split(";");if(null!=s&&s.length>0)for(var n=function(n){if((t=e.ScreenObject.Data.Tables[e.ScreenObject.Data.Tables.length-1].filter((function(e){return e.CCTabID=s[n]}))).length>0&&""!=t[0].CCTabName.toString())switch(t[0].CCTabName.toString()){case"Particulars":e.PropertyDeposits.FillParticulars(i.Tables[3]);break;case"Share Holder":case"Units":case"Parkings":break;case"Attachments":e.ViewAttachments.LoadAttachments(i.Tables[4])}},a=0;a<s.length;a++)n(a)}()}}}}},{key:"LoadImageDimensions",value:function(){var e=new f.b;e.Column=3,e.RowSpan=4}},{key:"onSelectionChangedCommand",value:function(e){if(n.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"true"==n.a.SessionManager.Preferences.EnableLocationWise.toString().toLowerCase()&&n.a.SessionManager.Preferences.ContainsKey("LW Property")&&"true"==n.a.SessionManager.Preferences["LW Property"].toString().toLowerCase())if("LocationProperty"==e.toString()||e instanceof h.b&&53523==e.DBColumnID)if(0!=this.LocationProperty.SelectedValue){var t=n.a.rental.GetLandLordLocation(0,this.LocationProperty.SelectedValue),i="";null!=t&&t.Tables.length>0&&t.Tables[0].length>0?(t.Tables[0].forEach((function(e){""!=i&&(i+=" , "),i+=e.ParentNodeID.toString()})),this.Landlord.CustomWhere=""!=i?" a.NodeID in ( "+i+") ":" a.NodeID = -1 "):this.Landlord.CustomWhere=" a.NodeID = -1 "}else this.Landlord.CustomWhere="";else if("Landlord"==e.toString()||e instanceof h.b&&26386==e.DBColumnID)if(0!=this.Landlord.SelectedValue){var s=n.a.rental.GetLandLordLocation(this.Landlord.SelectedValue,0),a="";null!=s&&s.Tables.length>0&&s.Tables[0].length>0?(s.Tables[0].forEach((function(e){""!=a&&(a+=" , "),a+=e.NodeID.toString()})),this.LocationProperty.CustomWhere=""!=a?" a.NodeID in ( "+a+") ":" a.NodeID = -1 "):this.LocationProperty.CustomWhere=" a.NodeID = -1 "}else this.LocationProperty.CustomWhere=""}},{key:"onTabSelectionChanged",value:function(e){null!=this.ScreenObject.CustomTab.SelectedTab&&("Notes"==this.ScreenObject.CustomTab.SelectedTab.Name?(this.AttachmentVisibility=!1,this.ReportInfoVisibility=!1,this.NoteVisibility=!0,this.ViewNotes.OnShowNewNote(null)):"Attachments"==this.ScreenObject.CustomTab.SelectedTab.Name?(this.ViewAttachments.OnShowNewAttachment(null),this.AttachmentVisibility=!0,this.ReportInfoVisibility=!1,this.NoteVisibility=!1):(this.AttachmentVisibility=!1,this.ReportInfoVisibility=!0,this.NoteVisibility=!1))}},{key:"LoadTabs",value:function(){var e=this;this.AssignRowColumns();for(var t=this.ScreenObject.CustomTab.Pages.length-1;t>=0;t--){var i=this.ScreenObject.CustomTab.Pages[t];switch(i.Name){case"Particulars":i.Fields.push(this.PropertyDeposits);break;case"Share Holder":i.Fields.push(this.PropertyShareHolder);break;case"Units":i.Fields.push(this.PropertyUnits);break;case"Parkings":i.Fields.push(this.PropertyParking);break;case"Attachments":i.Fields.push(this.ViewAttachments);break;case"Assign":i.Fields.push(this.ObjPropertyRoleUser);break;case"Notes":i.Fields.push(this.ViewNotes)}}this.PropertyDeposits.FillParticulars(this.ScreenObject.Data.Tables[5]),this.ScreenObject.CustomTab.Pages.forEach((function(t){t.Fields.forEach((function(t){t instanceof h.b&&50002==t.CCID&&(t.SelectionChangedCommand.Subscribe(e,"onListSelectedChanged"),e.Location=t,e.IsLocationAv=!0),t instanceof h.b&&"RentalIncomeAccountID"==t.DBColumnName?e.RentalIncomeAcc=t:t instanceof h.b&&"RentalReceivableAccountID"==t.DBColumnName?e.RentalReceivableAcc=t:t instanceof h.b&&"AdvanceReceivableAccountID"==t.DBColumnName?e.AdvanceReceivableAcc=t:t instanceof h.b&&"ProvisionAccountID"==t.DBColumnName?e.ProvisionAccountID=t:t instanceof h.b&&"PenaltyAccountID"==t.DBColumnName?e.PenaltyAcc=t:t instanceof h.b&&"AdvanceRentAccountID"==t.DBColumnName?e.AdvanceRentAcc=t:t instanceof h.b&&"AdvReceivableCloseAccID"==t.DBColumnName?e.AdvReceivableCloseAcc=t:t instanceof h.b&&"BankAccount"==t.DBColumnName?e.BankAcc=t:t instanceof h.b&&"BankLoanAccount"==t.DBColumnName?e.BankLoanAcc=t:t instanceof h.b&&"RentalAccount"==t.DBColumnName?e.RentAcc=t:t instanceof h.b&&"RentPayableAccount"==t.DBColumnName?e.RentPayableAcc=t:t instanceof h.b&&"AdvanceRentPaid"==t.DBColumnName?e.AdvanceRentPaid=t:t instanceof d.c&&"TermsConditions"==t.DBColumnName&&(e.TermsConditions=t)}))}))}},{key:"onListSelectedChanged",value:function(e){50002==e.CCID&&(this.LocAccountant&&(this.Accountant.CustomWhere="    CC.CCNID2 IN ("+this.Location.SelectedValue+") "),this.LocLandLord&&(this.Landlord.CustomWhere="    CC.CCNID2 IN ("+this.Location.SelectedValue+") "),this.LocSalesman&&(this.Salesman.CustomWhere="   CC.CCNID2 IN ("+this.Location.SelectedValue+") "))}},{key:"AssignRowColumns",value:function(){var e;e=this.ScreenObject.CustomFields.length;for(var t=0;t<e;t++)this.ScreenObject.CustomFields[t].Row=t/4,this.ScreenObject.CustomFields[t].Column=t%4}},{key:"AutoGenerateCode",value:function(){if(0==this.PropertyID&&null!=this.ScreenObject.Data&&this.ScreenObject.Data.Tables.length>7&&(this.ScreenObject.SetAutoCode(this.Code,this.PRT.IsGroup,this.Group.SelectedValue,this.ScreenObject.Data.Tables[7]),this.ScreenObject.IsAutoName)){this.ScreenObject.IsNameAutoGenerate=!0,this.Name.Enable=!1;var e=this.ScreenObject.Data.Tables[7];e=e.filter((function(e){return 1==e.IsName})),this.ScreenObject.IsName=!0,e.length>0&&(this.Name.Text=this.ScreenObject.SetAutoCodeParams_1(this.Name,this.Group.SelectedValue,e))}this.ds1=this.ScreenObject.Data;var t=this.ds1.Tables[4].filter((function(e){return"CodeAutoGen"==e.Name}));(t=this.ds1.Tables[4].filter((function(e){return"CapsLock"==e.Name}))).length>0&&Object(o.j)(t[0].Value)&&(this.Name.IsAllCaps=!0),(t=this.ds1.Tables[4].filter((function(e){return"CapsToFirstLetter"==e.Name}))).length>0&&Object(o.j)(t[0].Value)&&(this.Name.IsFirstLetterCaps=!0)}},{key:"OnSave",value:function(e){var t=this;if("Save"==e){if(null==this.Code.Text.Trim()||""==this.Code.Text.Trim())return this.DisplayMessage="Enter Property Code",void(this.MessageVisibility=!0);if(null==this.Name.Text.Trim()||""==this.Name.Text.Trim())return this.DisplayMessage="Enter Property Name",void(this.MessageVisibility=!0);if(0==a.e.ValidateDouble(this.PlotArea.Text))return this.MessageVisibility=!0,void(this.DisplayMessage="Please Enter Valid PlotArea");if(0==a.e.ValidateDouble(this.BuildUpArea.Text))return this.MessageVisibility=!0,void(this.DisplayMessage="Please Enter Valid BuildUpArea");if(0==a.e.ValidateDouble(this.Units.Text))return this.MessageVisibility=!0,void(this.DisplayMessage="Please Enter Valid Units");if(0==a.e.ValidateDouble(this.Parkings.Text))return this.MessageVisibility=!0,void(this.DisplayMessage="Please Enter Valid Parkings");if(0==a.e.ValidateDouble(this.Floors.Text))return this.MessageVisibility=!0,void(this.DisplayMessage="Please Enter Valid Floors");try{var i=this.ScreenObject.ValidateData();if(!a.e.StringIsNullOrEmpty(i))return this.DisplayMessage=i,void(this.MessageVisibility=!0);for(var s=0;s<this.PropertyDeposits.DepositsGrid1Obj.Table.length;s++){if(!a.e.StringIsNullOrEmpty(this.PropertyDeposits.DepositsGrid1Obj.Table[s].Particulars_Key)&&!a.e.StringIsNullOrEmpty(this.PropertyDeposits.DepositsGrid1Obj.Table[s].Advance_Key)&&!a.e.StringIsNullOrEmpty(this.PropertyDeposits.DepositsGrid1Obj.Table[s].Refund)&&"1"==this.PropertyDeposits.DepositsGrid1Obj.Table[s].Refund.toString())return this.DisplayMessage="Can not select full refund at row no:"+(s+1),void(this.MessageVisibility=!0);if(""!=a.e.StringValue(this.PropertyDeposits.DepositsGrid1Obj.Table[s].PostDebit)&&"1"==a.e.StringValue(this.PropertyDeposits.DepositsGrid1Obj.Table[s].PostDebit)&&a.e.IsEmpty(this.PropertyDeposits.DepositsGrid1Obj.Table[s].DebitAccount.toString()))return this.DisplayMessage="Please select debit account at row no:"+(s+1),void(this.MessageVisibility=!0)}if(this.ScreenObject.IsAutoName&&!this.Name.Enable){this.ScreenObject.IsNameAutoGenerate=!0,this.Name.Enable=!1;var o=this.ScreenObject.Data.Tables[7];o=o.filter((function(e){return 1==e.IsName})),this.ScreenObject.IsName=!0,o.length>0&&(this.Name.Text=this.ScreenObject.SetAutoCodeParams_1(this.Name,this.Group.SelectedValue,o),this.PRT.Name=this.Name.Text)}if(0==this.PropertyID){var r=this.ScreenObject.Data.Tables[7];r=r.filter((function(e){return 0==e.IsName}));var l={StrCode:this.PRT.Code,CodePrefix:this.PRT.CodePrefix,CodeNumber:this.PRT.CodeNumber};if(this.DisplayMessage=this.ScreenObject.SetAutoCodeParams_3(this.Code,this.Group.SelectedValue,r,l),this.PRT.Code=l.StrCode,this.PRT.CodePrefix=l.CodePrefix,this.PRT.CodeNumber=l.CodeNumber,this.DisplayMessage.length>0)return}else this.PRT.Code=this.Code.Text,this.PRT.CodePrefix=this.CodePrefix,this.PRT.CodeNumber=this.CodeNumber,this.PRT.GroupSeqNoLength=this.GroupSeqNoLength;if(this.PRT.PropertyID=this.PropertyID,this.PRT.Name=this.Name.Text,this.PRT.StatusID=""!=this.Status.SelectedValue?parseInt(this.Status.SelectedValue):0,this.PRT.DetailsXML=this.GETXML(),this.PRT.DepositXML=this.PropertyDeposits.GetXML(),this.PRT.UnitXML=this.PropertyUnits.GetXML(),this.PRT.ParkingXML=this.PropertyParking.GetXML(),null!=this.PropertyShareHolder){var c,h;if(c=parseFloat(this.PropertyShareHolder.ShareHolderGrid.Columns[1].footer),h=parseFloat(this.PropertyShareHolder.ShareHolderGrid.Columns[2].footer),c>100)return this.DisplayMessage="Income % greater than 100, Total Income % is "+c,void(this.MessageVisibility=!0);if(h>100)return this.DisplayMessage="Expense % greater than 100, Total Expense % is "+h,void(this.MessageVisibility=!0);this.PRT.ShareHolderXML=this.PropertyShareHolder.GetShareHolderXML()}else this.PRT.ShareHolderXML="";this.PRT.CustomFieldsQuery=this.ScreenObject.GetCustomFieldsQuery(),this.PRT.CustomCostCenterFieldsQuery=this.ScreenObject.GetCustomCostCenterFieldsQuery(),this.LocationProperty.Visible&&this.LocationProperty.SelectedValue>0&&(this.PRT.CustomCostCenterFieldsQuery+="CCNID2="+this.LocationProperty.SelectedValue+","),this.PRT.SelectedNodeID=0==this.SelectedNodeID?1:this.SelectedNodeID,this.PRT.UserQuery=this.ObjPropertyRoleUser.GetXml(),this.PRT.NotesXML=this.ViewNotes.GetXML();try{this.PRT.AttachmetsXML=this.ViewAttachments.GetXML();var u="";if(this.IsPhotoChanged&&!a.e.IsEmpty(this.AccountPhoto))if(u+=0==this.FileID?'<Row Action="NEW"':'<Row Action="MODIFY"',n.a.SessionManager.IsWebApplication)u+=' AttachmentID="'+this.FileID+'"',u+=' FilePath="'+this.AccountPhoto+'"',u+=' ActualFileName="'+this.AccountPhoto.substr(this.AccountPhoto.lastIndexOf("\\")+1)+'"',u+=' RelativeFileName="'+this.AccountPhoto+'"',u+=' FileExtension="'+this.FileExtension+'"',u+=' FileDescription="'+d.d.GetValidXml(this.FileDescription)+'"',u+=' IsProductImage="1"',u+=' IsDefaultImage="1"',u+=' GUID="'+this.guid+'"',u+="/>";else{var p=a.e.GetPath(this.AccountPhoto);this.guid=p.guid,this.FileExtension=p.FileExtension,u+=' AttachmentID="'+this.FileID+'"',u+=' FilePath="'+this.AccountPhoto+'"',u+=' ActualFileName="'+this.ActualFileName+'"',u+=' RelativeFileName="'+this.AccountPhoto+'"',u+=' FileExtension="'+this.FileExtension+'"',u+=' FileDescription="'+d.d.GetValidXml(this.FileDescription)+'"',u+=' IsProductImage="1"',u+=' IsDefaultImage="1"',u+=' GUID="'+this.guid+'"',u+="/>"}else this.IsPhotoDelete&&this.FileID>0&&(u+='<Row Action="DELETE"',u+=' AttachmentID="'+this.FileID+'"/>');u.length>0&&(u="<AttachmentsXML>"+u+"</AttachmentsXML>",this.PRT.AttachmetsXML=this.PRT.AttachmetsXML+u.toString())}catch(m){return this.DisplayMessage=n.a.GetResource("Upload_Path_notExists"),void(this.MessageVisibility=!0)}this.PRT.WID=this.ScreenObject.CheckWorkFlow(),n.a.rental.SaveProperty(this.PRT,"SaveProperty").subscribe((function(e){if(t.DisplayMessage=e.Message,t.MessageVisibility=!0,t.RetValue=e.RetValue,t.RetValue>0){var i=t.Group.SelectedValue;t.ClearField(),t.Group.SelectedValue=i,t.ObjPropertyRoleUser.clear(),t.AutoGenerateCode(),Logger.InfoLog("AddEditPropertyViewModel :: Exiting OnSaveProperty")}}),(function(e){console.log(" Unit Save : "+JSON.stringify(e))}))}catch(i){Logger.ErrorLog("AddEditPropertyViewModel :: OnSaveProperty"+i.stack)}}else if("DeletePhoto"==e.toString())this.IsPhotoDelete=!0,this.AccountPhoto="",this.IsPhotoChanged=!1,this.ActualFileName="",this.PhotoTextVisibility=!0,this.DisplayMessage="";else if("PopUp"==e.toString()){null!=this.ds&&this.ds.Tables[18].filter((function(e){return"jpg"==e.FileExtension||"png"==e.FileExtension})).forEach((function(e){a.e.GetPath(e.GUID.toString()+"."+e.FileExtension.toString())+";"}))}else if("UploadPhoto"==e.toString()){var S=new C.a;S.PopupAttachmentsViewModel_1(92,this.PropertyID,this),n.a.page.ShowDialog(S,A.a,{ShowCenter:!0,Title:"Add Images"})}else if("MouseDown"==e.toString()){var b=new C.a;b.PopupAttachmentsViewModel_1(2,this.AccountPhoto,this),n.a.page.ShowDialog(b,A.a,{ShowCenter:!0,Title:"Add Images"})}else if("ShowApprove"==e.toString()){var g=new T.a(92,this.PropertyID,this.ScreenObject,this);n.a.page.ShowDialog(g,P.a,{ShowCenter:!0,Title:n.a.GetResource("ApproveReject")})}else"Report"==e.toString()?(this.AttachmentVisibility=!1,this.ReportInfoVisibility=!0,n.a.page.ShowDialog(this,V.a,{Title:"Reports"})):"Cancel"==e.toString()&&(this.ReportInfoVisibility=!1)}},{key:"GETXML",value:function(){var e="";return e+=""!=this.Type.SelectedValue?"PropertyTypeLookUpID="+parseInt(this.Type.SelectedValue)+",":"PropertyTypeLookUpID=0,",e+="PlotArea='"+this.PlotArea.Text+"' ,",e+="BuiltUpArea='"+this.BuildUpArea.Text+"' ,",e+=""!=this.Owner.SelectedValue?"LandLordLookUpID="+this.Owner.SelectedValue+",":"LandLordLookUpID=0,",e+="Address1='"+this.Address1.Text+"',",e+="Address2='"+this.Address2.Text+"',",e+="City='"+this.City.Text+"',",e+="State='"+this.State.Text+"',",e+="Zip='"+this.Zip.Text+"',",e+="Country='"+this.Country.Text+"',",e+="BondNo='"+this.BondNo.Text+"',",e+="BondDate=convert(float,convert(datetime,'"+this.BondDate.Date.ToString("dd/MMM/yyyy")+"')),",e+="BondTypeLookUpID='"+this.BondType.SelectedValue+"',",e+="PropertyNo='"+this.PropertyNo.Text+"',",e+=null!=this.PropertyPosition&&""!=this.PropertyPosition.SelectedValue?"PropertyPositionLookUpID="+parseInt(this.PropertyPosition.SelectedValue)+",":"PropertyPositionLookUpID=0,",e+=""!=this.PropertyCategory.SelectedValue?"PropertyCategoryLookUpID="+parseInt(this.PropertyCategory.SelectedValue)+",":"PropertyCategoryLookUpID=0,",e+="Units='"+this.Units.Text+"',",e+="Parkings='"+this.Parkings.Text+"',",e+="Floors='"+this.Floors.Text+"',",e+=null!=this.RentalIncomeAcc&&0!=this.RentalIncomeAcc.SelectedValue?"RentalIncomeAccountID="+a.e.IntTryParse(this.RentalIncomeAcc.SelectedValue)+",":"RentalIncomeAccountID=0,",e+=null!=this.ParkingAdvanceRentAccountID&&0!=this.ParkingAdvanceRentAccountID.SelectedValue?"ParkingAdvanceRentAccountID="+a.e.IntTryParse(this.ParkingAdvanceRentAccountID.SelectedValue)+",":"ParkingAdvanceRentAccountID=0,",e+=null!=this.ParkingIncomeAccountID&&0!=this.ParkingIncomeAccountID.SelectedValue?"ParkingIncomeAccountID="+a.e.IntTryParse(this.ParkingIncomeAccountID.SelectedValue)+",":"ParkingIncomeAccountID=0,",e+=null!=this.PenaltyAcc&&0!=this.PenaltyAcc.SelectedValue?"PenaltyAccountID="+a.e.IntTryParse(this.PenaltyAcc.SelectedValue)+",":"PenaltyAccountID=0,",e+=null!=this.RentalReceivableAcc&&0!=this.RentalReceivableAcc.SelectedValue?"RentalReceivableAccountID="+a.e.IntTryParse(this.RentalReceivableAcc.SelectedValue)+",":"RentalReceivableAccountID=0,",e+=null!=this.AdvanceReceivableAcc&&0!=this.AdvanceReceivableAcc.SelectedValue?"AdvanceReceivableAccountID="+a.e.IntTryParse(this.AdvanceReceivableAcc.SelectedValue)+",":"AdvanceReceivableAccountID=0,",e+=null!=this.ProvisionAccountID&&0!=this.ProvisionAccountID.SelectedValue?"ProvisionAccountID="+a.e.IntTryParse(this.ProvisionAccountID.SelectedValue)+",":"ProvisionAccountID=0,",e+=null!=this.AdvanceRentAcc&&0!=this.AdvanceRentAcc.SelectedValue?"AdvanceRentAccountID="+a.e.IntTryParse(this.AdvanceRentAcc.SelectedValue)+",":"AdvanceRentAccountID=0,",e+=null!=this.AdvReceivableCloseAcc&&0!=this.AdvReceivableCloseAcc.SelectedValue?"AdvReceivableCloseAccID="+a.e.IntTryParse(this.AdvReceivableCloseAcc.SelectedValue)+",":"AdvReceivableCloseAccID=0,",e+=null!=this.BankAcc&&0!=this.BankAcc.SelectedValue?"BankAccount="+a.e.IntTryParse(this.BankAcc.SelectedValue)+",":"BankAccount=0,",e+=null!=this.BankLoanAcc&&0!=this.BankLoanAcc.SelectedValue?"BankLoanAccount="+a.e.IntTryParse(this.BankLoanAcc.SelectedValue)+",":"BankLoanAccount=0,",e+=null!=this.RentAcc&&0!=this.RentAcc.SelectedValue?"RentalAccount="+a.e.IntTryParse(this.RentAcc.SelectedValue)+",":"RentalAccount=0,",e+=null!=this.RentPayableAcc&&0!=this.RentPayableAcc.SelectedValue?"RentPayableAccount="+a.e.IntTryParse(this.RentPayableAcc.SelectedValue)+",":"RentPayableAccount=0,",e+=null!=this.AdvanceRentPaid&&0!=this.AdvanceRentPaid.SelectedValue?"AdvanceRentPaid="+a.e.IntTryParse(this.AdvanceRentPaid.SelectedValue)+",":"AdvanceRentPaid=0,",e+=""!=this.TermsConditions.Text?"TermsConditions='"+this.TermsConditions.Text+"',":"TermsConditions='',",e+=this.Salesman.SelectedValue>0?"SalesmanID="+this.Salesman.SelectedValue+",":"SalesmanID=1,",e+=this.Accountant.SelectedValue>0?"AccountantID="+this.Accountant.SelectedValue+",":"AccountantID=1,",e+=this.Landlord.SelectedValue>0?"LandlordID="+this.Landlord.SelectedValue+",":"LandlordID=1,",e+=this.LocationProperty.SelectedValue>0?"LocationID="+this.LocationProperty.SelectedValue+",":"LocationID=1,",e+=null!=this.TowerType.SelectedValue?"TowerType='"+this.TowerType.SelectedValue+"',":"TowerType='"+this.TowerType.DefaultValue+"',",(e+=null!=this.GPS.Text&&""!=this.GPS.Text?"GPS='"+this.GPS.Text+"',":"GPS='',").toString()}},{key:"LoadData",value:function(){var e=this;if(null!=this.ds&&this.ds.Tables.length>2&&1==this.ds.Tables[2].length){if(this.CodePrefix="",this.CodeNumber=0,this.GroupSeqNoLength=0,a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Code)||(this.Code.Text=this.ds.Tables[2][0].Code.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Name)||(this.Name.Text=this.ds.Tables[2][0].Name.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].StatusID)||(this.Status.SelectedValue=this.ds.Tables[2][0].StatusID.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].PropertyTypeLookUpID)||(this.Type.SelectedValue=this.ds.Tables[2][0].PropertyTypeLookUpID.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].PlotArea)||(this.PlotArea.Text=this.ds.Tables[2][0].PlotArea.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].BuiltUpArea)||(this.BuildUpArea.Text=this.ds.Tables[2][0].BuiltUpArea.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].LandLordLookUpID)||(this.Owner.SelectedValue=this.ds.Tables[2][0].LandLordLookUpID.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Address1)||(this.Address1.Text=this.ds.Tables[2][0].Address1.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Address2)||(this.Address2.Text=this.ds.Tables[2][0].Address2.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].City)||(this.City.Text=this.ds.Tables[2][0].City.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].State)||(this.State.Text=this.ds.Tables[2][0].State.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Zip)||(this.Zip.Text=this.ds.Tables[2][0].Zip.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Country)||(this.Country.Text=this.ds.Tables[2][0].Country.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].BondNo)||(this.BondNo.Text=this.ds.Tables[2][0].BondNo.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].BD)||(this.BondDate.Date=new Date(this.ds.Tables[2][0].BD)),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].BondTypeLookUpID)||(this.BondType.SelectedValue=this.ds.Tables[2][0].BondTypeLookUpID.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].PropertyNo)||(this.PropertyNo.Text=this.ds.Tables[2][0].PropertyNo.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].PropertyPositionLookUpID)||(this.PropertyPosition.SelectedValue=this.ds.Tables[2][0].PropertyPositionLookUpID.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].PropertyCategoryLookUpID)||(this.PropertyCategory.SelectedValue=this.ds.Tables[2][0].PropertyCategoryLookUpID.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Units)||(this.Units.Text=this.ds.Tables[2][0].Units.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Parkings)||(this.Parkings.Text=this.ds.Tables[2][0].Parkings.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Floors)||(this.Floors.Text=this.ds.Tables[2][0].Floors.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].ParentID)||(this.Group.SelectedValue=parseInt(this.ds.Tables[2][0].ParentID)),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].CodePrefix)||(this.CodePrefix=this.ds.Tables[2][0].CodePrefix.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].CodeNumber)||(this.CodeNumber=parseInt(this.ds.Tables[2][0].CodeNumber)),a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].GroupSeqNoLength)||(this.GroupSeqNoLength=parseInt(this.ds.Tables[2][0].GroupSeqNoLength.toString())),null!=this.ds.Tables[2][0].SalesmanID&&""!=this.ds.Tables[2][0].SalesmanID.toString()&&(this.Salesman.SelectedValue=parseInt(this.ds.Tables[2][0].SalesmanID.toString())),null!=this.ds.Tables[2][0].AccountantID&&""!=this.ds.Tables[2][0].AccountantID.toString()&&(this.Accountant.SelectedValue=parseInt(this.ds.Tables[2][0].AccountantID.toString())),null!=this.ds.Tables[2][0].LandlordID&&""!=this.ds.Tables[2][0].LandlordID.toString()&&(this.Landlord.SelectedValue=parseInt(this.ds.Tables[2][0].LandlordID.toString())),null!=this.ds.Tables[2][0].LocationID&&"0"!=this.ds.Tables[2][0].LocationID.toString()&&(this.LocationProperty.SelectedValue=parseInt(this.ds.Tables[2][0].LocationID.toString())),this.TowerType.SelectedValue=null!=this.ds.Tables[2][0].TowerType&&""!=this.ds.Tables[2][0].TowerType.toString()?this.ds.Tables[2][0].TowerType.toString():this.TowerType.DefaultValue,a.e.StringIsNullOrEmpty(this.ds.Tables[2][0].GPS)||(this.GPS.Text=this.ds.Tables[2][0].GPS.toString()),this.ScreenObject.CustomTab.Pages.forEach((function(t){t.Fields.forEach((function(t){t instanceof h.b&&"RentalIncomeAccountID"==t.DBColumnName?(e.RentalIncomeAcc=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].RentalIncomeAccountID)||(e.RentalIncomeAcc.SelectedValue=parseInt(e.ds.Tables[2][0].RentalIncomeAccountID.toString()))):t instanceof h.b&&"RentalReceivableAccountID"==t.DBColumnName?(e.RentalReceivableAcc=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].RentalReceivableAccountID)||(e.RentalReceivableAcc.SelectedValue=parseInt(e.ds.Tables[2][0].RentalReceivableAccountID.toString()))):t instanceof h.b&&"ProvisionAccountID"==t.DBColumnName?(e.ProvisionAccountID=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].ProvisionAccountID)||(e.ProvisionAccountID.SelectedValue=parseInt(e.ds.Tables[2][0].ProvisionAccountID.toString()))):t instanceof h.b&&"AdvanceReceivableAccountID"==t.DBColumnName?(e.AdvanceReceivableAcc=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].AdvanceReceivableAccountID)||(e.AdvanceReceivableAcc.SelectedValue=parseInt(e.ds.Tables[2][0].AdvanceReceivableAccountID.toString()))):t instanceof h.b&&"ParkingIncomeAccountID"==t.DBColumnName?(e.ParkingIncomeAccountID=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].ParkingIncomeAccountID)||(e.ParkingIncomeAccountID.SelectedValue=parseInt(e.ds.Tables[2][0].ParkingIncomeAccountID.toString()))):t instanceof h.b&&"ParkingAdvanceRentAccountID"==t.DBColumnName?(e.ParkingAdvanceRentAccountID=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].ParkingAdvanceRentAccountID)||(e.ParkingAdvanceRentAccountID.SelectedValue=parseInt(e.ds.Tables[2][0].ParkingAdvanceRentAccountID.toString()))):t instanceof h.b&&"PenaltyAccountID"==t.DBColumnName?(e.PenaltyAcc=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].PenaltyAccountID)||(e.PenaltyAcc.SelectedValue=parseInt(e.ds.Tables[2][0].PenaltyAccountID.toString()))):t instanceof h.b&&"AdvanceRentAccountID"==t.DBColumnName?(e.AdvanceRentAcc=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].AdvanceRentAccountID)||(e.AdvanceRentAcc.SelectedValue=parseInt(e.ds.Tables[2][0].AdvanceRentAccountID.toString()))):t instanceof h.b&&"AdvReceivableCloseAccID"==t.DBColumnName?(e.AdvReceivableCloseAcc=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].AdvReceivableCloseAccID)||(e.AdvReceivableCloseAcc.SelectedValue=parseInt(e.ds.Tables[2][0].AdvReceivableCloseAccID.toString()))):t instanceof h.b&&"BankAccount"==t.DBColumnName?(e.BankAcc=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].BankAccount)||(e.BankAcc.SelectedValue=parseInt(e.ds.Tables[2][0].BankAccount.toString()))):t instanceof h.b&&"BankLoanAccount"==t.DBColumnName?(e.BankLoanAcc=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].BankLoanAccount)||(e.BankLoanAcc.SelectedValue=parseInt(e.ds.Tables[2][0].BankLoanAccount.toString()))):t instanceof h.b&&"RentalAccount"==t.DBColumnName?(e.RentAcc=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].RentalAccount)||(e.RentAcc.SelectedValue=parseInt(e.ds.Tables[2][0].RentalAccount.toString()))):t instanceof h.b&&"RentPayableAccount"==t.DBColumnName?(e.RentPayableAcc=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].RentPayableAccount)||(e.RentPayableAcc.SelectedValue=parseInt(e.ds.Tables[2][0].RentPayableAccount.toString()))):t instanceof h.b&&"AdvanceRentPaid"==t.DBColumnName?(e.AdvanceRentPaid=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].AdvanceRentPaid)||(e.AdvanceRentPaid.SelectedValue=parseInt(e.ds.Tables[2][0].AdvanceRentPaid.toString()))):t instanceof d.c&&"TermsConditions"==t.DBColumnName&&(e.TermsConditions=t,a.e.StringIsNullOrEmpty(e.ds.Tables[2][0].TermsConditions)||(e.TermsConditions.Text=e.ds.Tables[2][0].TermsConditions.toString()))}))})),this.PropertyDeposits.Load(this.ds.Tables[8]),this.PropertyUnits.Load(this.ds),this.PropertyParking.Load(this.ds),null!=this.ds&&this.ds.Tables.length>13&&this.ScreenObject.LoadCustomFieldsData(this.ds.Tables[13]),null!=this.ds&&this.ds.Tables.length>15&&this.ScreenObject.LoadCustomFieldsCCData(this.ds.Tables[15]),this.ds.Tables.length>17&&this.ViewNotes.LoadNotes(this.ds.Tables[17]),this.ds.Tables.length>18){this.ViewAttachments.LoadAttachments(this.ds.Tables[18]);var t=this.ds.Tables[18].filter((function(e){return 1==e.IsProductImage&&1==e.IsDefaultImage}));t.length>0?(this.PhotoTextVisibility=!1,this.FileID=parseInt(t[0].FileID),this.AccountPhoto=a.e.GetPath(t[0].GUID.toString()+"."+t[0].FileExtension.toString()),this.ActualFileName=t[0].ActualFileName.toString()):(this.FileID=0,this.PhotoTextVisibility=!0)}null!=this.ds&&this.ds.Tables.length>19&&this.PropertyShareHolder.LoadData(this.ds.Tables[19]),null!=this.ds&&this.ds.Tables.length>20&&this.ds.Tables[20].length>0&&this.ScreenObject.CanApprove(this.ds.Tables[2][0],this.ds.Tables[20][0],this.ButtonSave)}}},{key:"ClearField",value:function(){this.PropertyID=0,this.ScreenObject.Clear(),this.Status.SelectedValue="422",this.Group.SelectedValue=this.SelectedNodeID,this.CodePrefix="",this.CodeNumber=0,this.GroupSeqNoLength=0,this.PropertyDeposits.DepositsGrid1Obj.Clear(),this.PropertyDeposits.DepositsGrid1Obj.addEmptyRow(),null!=this.PropertyShareHolder&&(this.PropertyShareHolder.ShareHolderGrid.Clear(),this.PropertyShareHolder.ShareHolderGrid.UpdateTotals()),this.PropertyUnits.UnitsGrid1Obj.Clear(),this.PropertyUnits.UnitsGrid1Obj.addEmptyRow(),this.PropertyParking.ParkingGrid1Obj.Clear(),this.PropertyParking.ParkingGrid1Obj.addEmptyRow(),this.ViewAttachments.AttachmentsListObj.Clear(),this.ViewNotes.NotesList.Clear(),this.ViewNotes.DeletedNotes.Clear(),this.AccountPhoto="",this.ActualFileName="",this.PhotoTextVisibility=!0}}]),b}(y.b),w=function(){function e(){_classCallCheck(this,e),this.ReportRolesItems=[],this.ReportUsersItems=[],this.ReportLocationItems=[],this.ReportAssignItems=[],this.SelectedAssign="",this._RolesVisible=!1,this._UsersVisible=!1,this._LocationVisible=!1,this.ReportRolesItems.Clear(),this.ReportUsersItems.Clear(),this.ReportAssignItems.Clear(),this.ReportAssignItems.push(u.d.ComboBoxItems_2(n.a.GetResource("DocumentDesigner_Roles"),"1")),this.ReportAssignItems.push(u.d.ComboBoxItems_2(n.a.GetResource("DocumentDesigner_Users"),"2"));var t=n.a.common.GetDocumentViewScreenDetails(92,0);if(t.Tables.length>2){this.ReportRolesItems.push(u.c.CheckedListBoxItem_3("All","0"));for(var i=0;i<t.Tables[2].length;i++)this.ReportRolesItems.push(u.c.CheckedListBoxItem_3(t.Tables[2][i].Name.toString(),t.Tables[2][i].RoleID.toString()))}if(t.Tables.length>3){this.ReportUsersItems.push(u.c.CheckedListBoxItem_3("All","0"));for(var s=0;s<t.Tables[3].length;s++)this.ReportUsersItems.push(u.c.CheckedListBoxItem_3(t.Tables[3][s].UserName.toString(),t.Tables[3][s].UserID.toString()))}if(null!=n.a.SessionManager.Locations){this.ReportAssignItems.push(u.d.ComboBoxItems_2(n.a.GetResource("DocumentDesigner_Location"),"50002")),this.ReportLocationItems.Clear(),this.ReportLocationItems.push(u.c.CheckedListBoxItem_3("All","0"));for(var a=0;a<n.a.SessionManager.Locations.length;a++)Object(o.j)(n.a.SessionManager.Locations[a].IsGroup.toString())||this.ReportLocationItems.push(u.c.CheckedListBoxItem_3(n.a.SessionManager.Locations[a].Location.toString(),n.a.SessionManager.Locations[a].NodeID.toString()))}"1"==this.SelectedAssign?this.RolesVisible=!0:"2"==this.SelectedAssign?this.UsersVisible=!0:"50002"==this.SelectedAssign&&(this.LocationVisible=!0)}return _createClass(e,[{key:"OnDocViewsCheckedChanged",value:function(e){var t=e;if("0"==t.Value){if(this.ReportRolesItems.Contains(t))for(var i=0;i<this.ReportRolesItems.length;i++)this.ReportRolesItems[i].IsChecked=t.IsChecked;if(this.ReportUsersItems.Contains(t))for(var s=0;s<this.ReportUsersItems.length;s++)this.ReportUsersItems[s].IsChecked=t.IsChecked;if(this.ReportLocationItems.Contains(t))for(var n=0;n<this.ReportLocationItems.length;n++)this.ReportLocationItems[n].IsChecked=t.IsChecked}else t.IsChecked||(this.ReportRolesItems.Contains(t)&&(this.ReportRolesItems[0].IsChecked=!1),this.ReportUsersItems.Contains(t)&&(this.ReportUsersItems[0].IsChecked=!1),this.ReportLocationItems.Contains(t)&&(this.ReportLocationItems[0].IsChecked=!1))}},{key:"SetUserRoles",value:function(e){if(null!=e&&null!=e&&e.Tables.length>14&&e.Tables[14].length>0){var t=e.Tables[14].filter((function(e){return e.RoleID>0}));if(t.length>0)for(var i=0;i<t.length;i++)for(var s=0;s<this.ReportRolesItems.length;s++)if(t[i].RoleID.toString()==this.ReportRolesItems[s].Value.toString()){this.ReportRolesItems[s].IsChecked=!0;break}if((t=e.Tables[14].filter((function(e){return e.serID>0}))).length>0)for(var n=0;n<t.length;n++)for(var a=0;a<this.ReportUsersItems.length;a++)if(t[n].UserID.toString()==this.ReportUsersItems[a].Value.toString()){this.ReportUsersItems[a].IsChecked=!0;break}if((t=e.Tables[14].filter((function(e){return e.LocationID>0}))).length>0)for(var o=0;o<t.length;o++)for(var r=0;r<this.ReportLocationItems.length;r++)if(t[o].LocationID.toString()==this.ReportLocationItems[r].Value.toString()){this.ReportLocationItems[r].IsChecked=!0;break}}}},{key:"onViewChanged",value:function(e){"Assign"==e&&("1"==this.SelectedAssign?this.RolesVisible=!0:"2"==this.SelectedAssign?this.UsersVisible=!0:"50002"==this.SelectedAssign&&(this.LocationVisible=!0))}},{key:"GetXml",value:function(){var e="";e+="<XML>";for(var t=0;t<this.ReportRolesItems.length;t++)this.ReportRolesItems[t].IsChecked&&"0"!=this.ReportRolesItems[t].Value&&(e+="<Row ",e+='RoleID="'+this.ReportRolesItems[t].Value+'" ',e+="></Row>");for(var i=0;i<this.ReportUsersItems.length;i++)this.ReportUsersItems[i].IsChecked&&"0"!=this.ReportUsersItems[i].Value&&(e+="<Row ",e+='UserID="'+this.ReportUsersItems[i].Value+'" ',e+="></Row>");for(var s=0;s<this.ReportLocationItems.length;s++)this.ReportLocationItems[s].IsChecked&&"0"!=this.ReportLocationItems[s].Value&&(e+="<Row ",e+='LocationID="'+this.ReportLocationItems[s].Value+'" ',e+="></Row>");return(e+="</XML>").toString()}},{key:"clear",value:function(){for(var e=0;e<this.ReportRolesItems.length;e++)this.ReportRolesItems[e].IsChecked=this.ReportRolesItems[e].Value==n.a.SessionManager.RoleID;for(var t=0;t<this.ReportUsersItems.length;t++)this.ReportUsersItems[t].IsChecked=this.ReportUsersItems[t].Value==n.a.SessionManager.UserID;for(var i=0;i<this.ReportLocationItems.length;i++)this.ReportLocationItems[i].IsChecked=parseInt(this.ReportLocationItems[i].Value)==n.a.SessionManager.LocationID&&n.a.SessionManager.LocationID>0}},{key:"RolesVisible",get:function(){return this._RolesVisible},set:function(e){e!=this._RolesVisible&&(e&&(this.UsersVisible=!1,this.LocationVisible=!1),this._RolesVisible=e)}},{key:"UsersVisible",get:function(){return this._UsersVisible},set:function(e){e!=this._UsersVisible&&(e&&(this.RolesVisible=!1,this.LocationVisible=!1),this._UsersVisible=e)}},{key:"LocationVisible",get:function(){return this._LocationVisible},set:function(e){e!=this._LocationVisible&&(e&&(this.RolesVisible=!1,this.UsersVisible=!1),this._LocationVisible=e)}}]),e}()}}]);