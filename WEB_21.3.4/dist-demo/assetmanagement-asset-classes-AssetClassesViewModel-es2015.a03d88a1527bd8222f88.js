(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{"61lo":function(s,e,t){"use strict";t.r(e),t.d(e,"AssetClassesViewModel",(function(){return u}));var a=t("Do2H"),i=t("Lp6j"),l=t("ScVY"),o=t("EQd/"),h=t("0/4Q"),r=t("NM0h"),n=t("VxiT");class u extends l.b{constructor(s){super(),this._AssetClassID=0,this.AssetClassCode=new o.d(23793),this.AssetClassName=new o.d(23794),this.AssetClassStatus=new h.e(23797),this.FAAccounts=new h.e(23795),this.DeprBooks=new h.e(23796),this.TotalYears=new o.d(49973),this.DeprPosting=new h.e(49974),this.ScreenObject=new n.a,this.obj=new r.a,this.RetValue=0,this.YearsMandatory=!1,this.Fields=[],this.AssetClassID=s,this.obj.AssetClassID=s,this.DisplayMessage="",this.LoadData(),0==this.AssetClassID?this.Title=a.a.GetResource("AddAssetClass"):(this.Title=a.a.GetResource("EditAssetClass"),this.OnLoadData()),this.DisplayName=this.Title}get AssetClassID(){return this._AssetClassID}set AssetClassID(s){s!=this._AssetClassID&&(this._AssetClassID=s,this.obj.AssetClassID=this._AssetClassID)}LoadData(){this.ScreenObject.LoadScreen_2(this,74),this.AssetClassCode.Label=a.a.GetResource("Code"),this.AssetClassName.Label=a.a.GetResource("Name"),this.AssetClassCode.Enable=!0,this.AssetClassName.Enable=!0,this.AssetClassStatus.Enable=!0,this.FAAccounts.Enable=!0,this.DeprBooks.Enable=!0,this.TotalYears.Enable=!0,this.DeprPosting.Enable=!0,this.Fields.push(this.AssetClassCode),this.Fields.push(this.AssetClassName),this.Fields.push(this.AssetClassStatus),this.Fields.push(this.FAAccounts),this.Fields.push(this.DeprBooks),this.Fields.push(this.TotalYears),this.Fields.push(this.DeprPosting);let s=a.a.common.GetDataSet("ASS003","");s.Tables[0].forEach(s=>{this.DeprBooks.Items.push(h.d.ComboBoxItems_2(s.DeprBookName.toString(),s.DeprBookID.toString()))}),this.DeprBooks.Items.length>0&&(this.DeprBooks.SelectedValue=this.DeprBooks.Items[0].Value),this.DeprBooks.Mandatory=!0,s.Tables[1].forEach(s=>{this.FAAccounts.Items.push(h.d.ComboBoxItems_2(s.PostGroupName.toString(),s.PostingGroupID.toString()))}),this.FAAccounts.Items.length>0&&(this.FAAccounts.SelectedValue=this.FAAccounts.Items[0].Value),this.FAAccounts.Mandatory=!0,this.DeprPosting.Items.push(h.d.ComboBoxItems_2(a.a.GetResource("AssetManagement_Monthly"),"1")),this.DeprPosting.Items.push(h.d.ComboBoxItems_2(a.a.GetResource("Budget_Quarterly"),"3")),this.DeprPosting.Items.push(h.d.ComboBoxItems_2(a.a.GetResource("Budget_Halfyearely"),"4")),this.DeprPosting.Items.push(h.d.ComboBoxItems_2(a.a.GetResource("AssetManagement_Yearly"),"2")),this.DeprPosting.DefaultValue=this.DeprPosting.SelectedValue="2",this.TotalYears.Text="0",this.ScreenObject.Data.Tables.length>0&&(this.ScreenObject.Data.Tables[3].forEach(s=>{this.AssetClassStatus.Items.push(h.d.ComboBoxItems_2(s.Status.toString(),s.StatusID.toString()))}),this.AssetClassStatus.SelectedValue="379"),this.ScreenObject.Data.Tables[4].filter(s=>"ChangeOfFAAccountsNode"==s.Name).length>0&&(this.YearsMandatory=!0)}OnLoadData(){let s=r.a.GetAssetClassDetails(this.obj.AssetClassID);null!=s&&s.Tables.length>0&&s.Tables[0].length>0&&(this.AssetClassCode.Text=s.Tables[0][0].AssetClassCode.toString(),this.AssetClassName.Text=s.Tables[0][0].AssetClassName.toString(),this.AssetClassStatus.SelectedValue=s.Tables[0][0].StatusID.toString(),this.FAAccounts.SelectedValue=s.Tables[0][0].FAAccountsID.toString(),this.DeprBooks.SelectedValue=s.Tables[0][0].DeprBookID.toString(),this.DeprPosting.SelectedValue=s.Tables[0][0].DeprPosting.toString(),this.TotalYears.Text=s.Tables[0][0].TotalYears.toString(),this.obj.GUID=s.Tables[0][0].GUID.toString())}OnSaveAssetClass(s){try{if(this.DisplayMessage="","Save"==s.toString()){if(null==this.AssetClassCode.Text||""==this.AssetClassCode.Text.Trim())return void(this.DisplayMessage=a.a.GetResource("Enter")+" Code");if(this.obj.AssetClassCode=this.AssetClassCode.Text,null==this.AssetClassName.Text||""==this.AssetClassName.Text.Trim())return void(this.DisplayMessage=a.a.GetResource("Enter")+" Name");if(this.obj.AssetClassName=this.AssetClassName.Text,""==this.AssetClassStatus.SelectedValue||null==this.AssetClassStatus.SelectedValue)return void(this.DisplayMessage="Select Status");if(this.obj.StatusID=parseInt(this.AssetClassStatus.SelectedValue),i.e.IsEmpty(this.FAAccounts.SelectedValue)||"0"==this.FAAccounts.SelectedValue)return void(this.DisplayMessage="Select FA Accounts");if(i.e.IsEmpty(this.DeprBooks.SelectedValue)||"0"==this.DeprBooks.SelectedValue)return void(this.DisplayMessage="Select Depriciation Book");if(this.obj.PostingGroupID=i.e.Int(this.FAAccounts.SelectedValue),this.obj.DeprBookID=i.e.Int(this.DeprBooks.SelectedValue),this.obj.DeprTypeID=i.e.Int(this.DeprPosting.SelectedValue),this.obj.TotalYears=i.e.Double(this.TotalYears.Text),this.YearsMandatory&&this.obj.TotalYears<=0)return void(this.DisplayMessage="Enter Total Years");this.obj.SaveAssetClass().subscribe(s=>{this.DisplayMessage=s.Message,this.RetValue=s.RetValue,this.RetValue>0&&(this.AssetClassID=0,this.ClearFields(),null!=this.Parent&&this.Parent.Refresh())})}else a.a.page.HideDialog()}catch(e){Logger.ErrorLog("AssetClassesViewModel:: OnSaveAssetClass",e)}}ClearFields(){this.AssetClassCode.Text="",this.AssetClassName.Text="",this.AssetClassStatus.SelectedValue="379",this.TotalYears.Text="0"}}}}]);