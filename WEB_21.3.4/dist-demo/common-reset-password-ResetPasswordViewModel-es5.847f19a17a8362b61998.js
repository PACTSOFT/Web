function _classCallCheck(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,s){for(var t=0;t<s.length;t++){var r=s[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,s,t){return s&&_defineProperties(e.prototype,s),t&&_defineProperties(e,t),e}function _inherits(e,s){if("function"!=typeof s&&null!==s)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),s&&_setPrototypeOf(e,s)}function _setPrototypeOf(e,s){return(_setPrototypeOf=Object.setPrototypeOf||function(e,s){return e.__proto__=s,e})(e,s)}function _createSuper(e){var s=_isNativeReflectConstruct();return function(){var t,r=_getPrototypeOf(e);if(s){var a=_getPrototypeOf(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,s){return!s||"object"!=typeof s&&"function"!=typeof s?_assertThisInitialized(e):s}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{u90B:function(e,s,t){"use strict";t.r(s),t.d(s,"ResetPasswordViewModel",(function(){return u}));var r=t("mrSG"),a=t("Do2H"),o=t("Lp6j"),i=t("ScVY"),n=t("VxiT"),l=t("0/4Q"),d=t("EQd/"),u=function(e){_inherits(t,e);var s=_createSuper(t);function t(){var e;if(_classCallCheck(this,t),(e=s.call(this)).ScreenObject=new n.a,e.SaveUserId="",e.guid="",e.UserName=new l.e(22898),e.txtPassword=new d.d(22899),e.ConfirmPassword=new d.d,e.txtOldPassword=new d.d,e.ds=null,e.IsLoginCall=!1,e.DialogResult=!1,e.ds=a.a.common.GetDataSet("ADM003",""),null!=e.ds)for(var r=0;r<e.ds.Tables[0].length;r++)e.UserName.Items.push(l.d.ComboBoxItems_2(e.ds.Tables[0][r].UserName.toString(),e.ds.Tables[0][r].UserID.toString()));return e.DisplayName=a.a.GetResource("ResetPassword"),e.lblTitle=a.a.GetResource("ResetPassword"),e.UserName.Label=a.a.GetResource("UserName"),e.txtOldPassword.Label=a.a.GetResource("Users_OldPassword"),e.txtPassword.Label=a.a.GetResource("Users_Password"),e.ConfirmPassword.Label=a.a.GetResource("Users_CnfrPassword"),e.UserName.LblWidth="150",e.txtOldPassword.LblWidth="150",e.txtPassword.LblWidth="150",e.ConfirmPassword.LblWidth="150",e.txtOldPassword.IsPwd=!0,e.txtPassword.IsPwd=!0,e.ConfirmPassword.IsPwd=!0,e.UserName.SelectedValue=a.a.SessionManager.UserID.toString(),e.UserName.Enable="1"==a.a.SessionManager.UserID||"1"==a.a.SessionManager.RoleID,e.ConfirmPassword.LostFocusCommand.Subscribe(_assertThisInitialized(e),"OnTextChange"),e.txtOldPassword.LostFocusCommand.Subscribe(_assertThisInitialized(e),"OnTextChange","OldPasswordCheck"),_possibleConstructorReturn(e)}return _createClass(t,[{key:"OnTextChange",value:function(e){return Object(r.b)(this,void 0,void 0,regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(this.DisplayMessage="",null==e||"OldPasswordCheck"!=e.toString()){s.next=4;break}null!=this.txtOldPassword&&""!=this.txtOldPassword.Text&&1!=a.a.admin.CheckOldPassword(this.UserName.GetText(),this.txtOldPassword.Text).RetValue&&(this.DisplayMessage="Invalid Password",this.txtOldPassword.Text=""),s.next=6;break;case 4:if(null==e||"PasswordCheck"!=e.toString()){s.next=6;break}return s.abrupt("return",(Logger.InfoLog("AddUsersViewModel::Entering CheckPassword"),null!=this.txtPassword.Text&&null!=this.ConfirmPassword.Text?this.txtPassword.Text!=this.ConfirmPassword.Text?void(this.DisplayMessage=a.a.GetResource("Users_PwdError")):void 0:(this.DisplayMessage=" Password Mismatch ",void Logger.InfoLog("AddUsersViewModel::Exiting CheckPassword"))));case 6:case"end":return s.stop()}}),s,this)})))}},{key:"OnSaveUsers",value:function(e){try{if(this.DisplayMessage="","Save"==e){if(""==this.txtOldPassword.Text||null==this.txtOldPassword.Text)return void(this.DisplayMessage="Enter Old password");var s="";if(""==this.UserName.SelectedValue.toString()&&(s="Select User Name"),null!=this.txtPassword.Text&&null!=this.ConfirmPassword&&this.txtPassword.Text!=this.ConfirmPassword.Text)return void(this.DisplayMessage=a.a.GetResource("Users_PwdError"));if(s.length>0)return void(this.DisplayMessage=s);if(null==this.ConfirmPassword||""==this.ConfirmPassword.Text)return void(this.DisplayMessage=" Please Enter Confirm Password");if(this.DisplayMessage=o.e.ValidatePassword(this.txtPassword.Text),this.DisplayMessage.length>0)return;if(this.txtPassword.Text==this.txtOldPassword.Text)return void(this.DisplayMessage="Please Enter New Password");var t=[];t.push(this.UserName.SelectedValue),t.push(this.UserName.GetText()),t.push(this.txtPassword.Text),t.push(a.a.SessionManager.CompanyIndex),t.push(a.a.SessionManager.UserName),t.push(a.a.SessionManager.UserID),t.push(a.a.SessionManager.LanguageID);var r=a.a.admin.ResetPassword(t,this.txtOldPassword.Text);o.e.Int(r.obj)>0?(parseInt(this.UserName.SelectedValue)>0&&(this.DisplayMessage="User Updated Successfully"),this.ConfirmPassword.Text="",this.txtOldPassword.Text="",this.txtPassword.Text="",this.IsLoginCall&&(this.DialogResult=!0,a.a.page.HideDialog())):null!=r&&r.Tables.length>1&&(this.DisplayMessage=r.Tables[r.Tables.length-1][0].ErrorMessage.toString())}else"Close"==e&&a.a.page.HideDialog()}catch(i){Logger.ErrorLog("ResetPasswordViewModel:: OnSaveUsers ::"+i.stack)}}}]),t}(i.b)}}]);