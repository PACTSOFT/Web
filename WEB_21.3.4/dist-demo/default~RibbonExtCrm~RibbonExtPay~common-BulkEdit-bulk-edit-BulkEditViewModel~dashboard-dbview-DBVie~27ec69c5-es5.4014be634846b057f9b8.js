function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{"1xwR":function(e,t,o){"use strict";o.d(t,"a",(function(){return h})),o.d(t,"b",(function(){return d}));var n=o("Do2H"),i=o("Lp6j"),r=o("mvPR"),s=o("vTM8"),a=o("/G+I"),l=o("uMy8"),c=o("MCLT"),h=function(){function e(){_classCallCheck(this,e),this.IsRowKPI=!1,this.IsRepeatColExists=!1,this.IsBold=!1,this.colunmIndex=-1,this.fontSize=0,this.ColsUsed=[],this.evalParse=new l.a,this.eval=new l.b,this.fldDict=new s.a,this.fldDictIndex=[],this.eval.ThrowException=!1,this.eval.SetKeyWords("REPORT"),this.evalParse.ThrowException=!1,this.evalParse.SetKeyWords("REPORT")}return _createClass(e,[{key:"KPI_1",value:function(e,t){var o=this;this.Parent=t,this.ID=e.attributes.ID.value,this.Formula=e.attributes.Formula.value,this.Expression=e.attributes.Expression.value,this.BackColor=e.attributes.BackColor.value,this.ForeColor=e.attributes.ForeColor.value,Text=e.attributes.Text.value,this.Image=e.attributes.Img.value,this.IsBold=null!=e.attributes.Bold&&"1"==e.attributes.Bold.value,this.fontSize=null!=e.attributes.FontSize?parseFloat(e.attributes.FontSize.value):0,i.e.IsEmpty(Image)||(this.Image="Images/"+this.Image),this.IsRowKPI="ROW_KPI"==this.ID;var n,r=[];this.evalParse.ParseFormula(this.Expression,r);for(var s=null,a=r.length-1;a>=0;a--){var c=r[a];n=c.getTokenValue().toString(),c.getTokenClass()!=l.d.OPERAND||null==s||s.getTokenClass()!=l.d.OPERAND?s=c:(s.tokenValue=c.tokenValue.toString()+s.tokenValue.toString(),r.RemoveAt(a))}r.forEach((function(e){var i=e;if(n=i.getTokenValue().toString(),i.getTokenClass()==l.d.OPERAND&&i.getTokenType()==l.e.REFERENCE&&(t.ColumnSourceALL.find((function(e){return e.ID==n}))||1==t.StaticReportType||298==t.StaticReportType)){var r=new l.c;o.fldDict.ContainsKey(n)||((r=new l.c).setFieldDetails(n,3,1,"",0,!1,!1),o.fldDict.push(n,r),o.fldDictIndex.push(-1))}})),this.RefreshColumnIndex()}},{key:"KPI_2",value:function(e,t){var o=this;this.Parent=e.Parent,this.ID=this.Parent.dicRepeatColsMap[e.ID][t],this.Formula=e.Formula,this.Expression=e.Expression,this.BackColor=e.BackColor,this.ForeColor=e.ForeColor,this.Text=e.Text,this.Image=e.Image,this.IsBold=e.IsBold,this.fontSize=e.fontSize,this.Image=e.Image,this.IsRowKPI=e.IsRowKPI;var n,i=[];this.evalParse.ParseFormula(this.Expression,i);for(var r=null,s=i.length-1;s>=0;s--){var a=i[s];n=a.getTokenValue().toString(),a.getTokenClass()!=l.d.OPERAND||null==r||r.getTokenClass()!=l.d.OPERAND?r=a:(r.tokenValue=a.tokenValue.toString()+r.tokenValue.toString(),i.RemoveAt(s))}this.Expression="",i.forEach((function(e){var i=e;if(n=i.getTokenValue().toString(),i.getTokenClass()==l.d.OPERAND&&i.getTokenType()==l.e.REFERENCE)if(o.Parent.dicRepeatColsMap.ContainsKey(n)){if(n=o.Parent.dicRepeatColsMap[n][t],!o.fldDict.ContainsKey(n)){var r=new l.c;r.setFieldDetails(n,3,1,"",0,!1,!1),o.fldDict.push(n,r),o.fldDictIndex.push(-1)}}else if(o.Parent.ColumnSourceALL.find((function(e){return e.ID==n}))&&!o.fldDict.ContainsKey(n)){var s=new l.c;s.setFieldDetails(n,3,1,"",0,!1,!1),o.fldDict.push(n,s),o.fldDictIndex.push(-1)}"STRING"==i.getTokenName()?o.Expression+='"'+n+'"':(i.getTokenType()==l.e.KEYWORD&&(o.Expression+=" "),o.Expression+=n,i.getTokenType()==l.e.KEYWORD&&(o.Expression+=" "))}))}},{key:"RefreshColumnIndex",value:function(){for(var e=this.fldDict.keys,t=0;t<e.length;t++){this.fldDictIndex[t]=-1;for(var o=0;o<this.Parent.ReportColumns.length;o++)if(this.Parent.ReportColumns[o].ID==e[t]){this.fldDictIndex[t]=o;break}}if(!this.IsRowKPI){this.colunmIndex=-1;for(var n=0;n<this.Parent.ReportColumns.length;n++)if(this.Parent.ReportColumns[n].ID==this.ID){this.colunmIndex=n;break}}}},{key:"Apply",value:function(e){if(this.IsRepeatColExists){this.Apply_2(e,!1);for(var t=0;t<this.Parent.RepeatSets;t++);}else this.Apply_2(e,!1)}},{key:"Apply_2",value:function(e,t){for(var o=0,n=0;n<this.fldDict.keys.length;n++){var i={Key:this.fldDict.keys[n]};this.fldDict[i.Key].setFieldValue(null),-1!=this.fldDictIndex[o]&&this.fldDictIndex[o]<this.Parent.ReportColumns.length?this.fldDict[i.Key].setFieldValue(this.fldDictIndex[o]<e.Cells.length&&null!=e.Cells[this.fldDictIndex[o]].Value?e.Cells[this.fldDictIndex[o]].Value:"FLOAT"==this.Parent.ReportColumns[this.fldDictIndex[o]].ColumnType?0:""):null==e.DataRow||Object(c.isNullOrUndefined)(e.DataRow[i.Key])?this.fldDict[i.Key].setFieldValue(0):this.fldDict[i.Key].setFieldValue(e.DataRow[i.Key]),o++}try{if("1"==this.eval.EvaluateExpression(this.Expression,this.fldDict).toString())if(-1!=this.colunmIndex)e.Cells[this.colunmIndex].IsNormal=!1,null==e.Cells[this.colunmIndex].CellAppearance&&(e.Cells[this.colunmIndex].CellAppearance=this.Parent.ReportColumns[this.colunmIndex].DataAppearance.Clone()),e.Cells[this.colunmIndex].CellAppearance.BackColor=this.BackColor,e.Cells[this.colunmIndex].CellAppearance.ForeColor=this.ForeColor,e.Cells[this.colunmIndex].CellAppearance.ImagePath=this.Image,this.IsBold&&(e.Cells[this.colunmIndex].CellAppearance.IsBold=!0),this.fontSize>0&&(e.Cells[this.colunmIndex].CellAppearance.FontSize=this.fontSize);else if(this.IsRowKPI)for(var r=0;r<this.Parent.ReportColumns.length&&r<e.Cells.length;r++)e.Cells[r].IsNormal=!1,null==e.Cells[r].CellAppearance&&(e.Cells[r].CellAppearance=this.Parent.ReportColumns[r].DataAppearance.Clone()),e.Cells[r].CellAppearance.BackColor=this.BackColor,e.Cells[r].CellAppearance.ForeColor=this.ForeColor,this.IsBold&&(e.Cells[r].CellAppearance.IsBold=!0),this.fontSize>0&&(e.Cells[r].CellAppearance.FontSize=this.fontSize)}catch(s){}}},{key:"Apply_Matrix",value:function(e,t,o,n){for(var i=this,r=function(t){var o=i.fldDict.keys[t];if(i.fldDict[o].setFieldValue(null),Object(c.isUndefined)(e[o]))i.fldDict[o].setFieldValue(0);else{var r=null;if(-1!=i.fldDictIndex[0]?r=i.Parent.ColumnSourceALL[i.fldDictIndex[0]]:null!=n.MatixRepeatID&&(r=i.Parent.ReportColumns.find((function(e){return e.ID==o+"_"+n.MatixRepeatID}))),!r)return i.fldDict[o].setFieldValue(0),"continue";i.fldDict[o].setFieldValue(null!=e[o]?e[o]:"FLOAT"==r.ColumnType?0:"")}},s=0;s<this.fldDict.keys.length;s++)r(s);try{"1"==this.eval.EvaluateExpression(this.Expression,this.fldDict).toString()&&(t.IsNormal=!1,null==t.CellAppearance&&(t.CellAppearance=o.DataAppearance.Clone()),t.CellAppearance.BackColor=this.BackColor,t.CellAppearance.ForeColor=this.ForeColor,t.CellAppearance.ImagePath=this.Image,this.IsBold&&(t.CellAppearance.IsBold=!0),this.fontSize>0&&(t.CellAppearance.FontSize=this.fontSize))}catch(a){}}}]),e}(),d=function(){function e(t){_classCallCheck(this,e),this.GrdRow=0,this.ChunkSize=1,this.AccountingFromMonth=n.a.SessionManager.AccountingFromMonth,this.UnPostedDocsInclude=!1,this.UnPostedDocsReserveQtyInclude=!1,this.UnPostedDocsHoldQtyInclude=!1,this.PDCInclude=!1,this.IncludeTerminatedPDC=!0,this.IncludeUnApprovedPDC=!1,this.DontApplyLocationWiseAccountsFilter=!1,this.ApplyLWAccountLFilterWhenIgnoreLoc=!1,this.UnPostedDocsList="",this.RoundOff="",this.strWhere=null,this.CellValue="",this.sbChunks="",this.BalanceBFAppearance=new r.a,this.BalanceBFAppearance_Data=new r.a,this.GrossTotalAppearance=new r.a,this.GrossTotalAppearance_Data=new r.a,this.HeaderAppearance=new r.a,this.DataSetCollection=[],this.ViewModel=t,this.oColumns=t.ReportColumns,this.BalanceBFAppearance.IsBold=!1,this.BalanceBFAppearance.ForeColor="#FF0081A6",this.BalanceBFAppearance.BackColor="White",this.BalanceBFAppearance.FontSize=12,this.BalanceBFAppearance_Data.IsBold=!1,this.BalanceBFAppearance_Data.ForeColor="#FF0081A6",this.BalanceBFAppearance_Data.BackColor="White",this.BalanceBFAppearance_Data.FontSize=12,this.BalanceBFAppearance_Data.Alignment="Right",this.GrossTotalAppearance.IsBold=!0,this.GrossTotalAppearance.ForeColor="#FF000000",this.GrossTotalAppearance.BackColor="White",this.GrossTotalAppearance.FontSize=12,this.GrossTotalAppearance_Data.IsBold=!0,this.GrossTotalAppearance_Data.ForeColor="#FF000000",this.GrossTotalAppearance_Data.BackColor="White",this.GrossTotalAppearance_Data.FontSize=12,this.GrossTotalAppearance_Data.Alignment="Right",this.HeaderAppearance.IsBold=!0,this.HeaderAppearance.ForeColor="#FF000000",this.HeaderAppearance.BackColor="White",this.HeaderAppearance.FontSize=13,this.HeaderAppearance.Alignment="Center",this.RoundOff=t.Preferences.ContainsKey("RoundOffDecimals")?t.Preferences.RoundOffDecimals:""}return _createClass(e,[{key:"NewReportRow",value:function(){var e=new r.d(this.ViewModel.ReportColumns.length,this.ViewModel.RowHeight);return e.Type=r.f.Detail,e}},{key:"NewReportRow_2",value:function(e,t){var o=new r.d(this.ViewModel.ReportColumns.length,this.ViewModel.RowHeight);return o.Type=e,null!=t&&(o.PrintVisible=t.IsPrintVisible),o.Cells.forEach((function(e){e.IsNormal=!1,null!=t&&(e.CellAppearance=t.Clone())})),o}},{key:"NewReportRow_3",value:function(e,t,o){var n=new r.d(o,this.ViewModel.RowHeight);return n.Type=e,n.PrintVisible=t.IsPrintVisible,n.Cells.forEach((function(e){e.IsNormal=!1,e.CellAppearance=t.Clone()})),n}},{key:"GetDimensionFilter",value:function(t){for(var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i="",r=0;r<this.ViewModel.oReportDialog.CostCenterFilters.length;r++){var s=this.ViewModel.oReportDialog.CostCenterFilters[r];if(s.CostCenterID>5e4&&(null==o||!o.Contains(s.CostCenterID)))if(s.SelectedNodes.length>0)if(1==s.SelectedNodes.length)i+=" AND ",i+=t+(s.CostCenterID-5e4)+"="+s.SelectedNodes[0].Id;else{var l="1"==n.a.SessionManager.UserID||"1"==n.a.SessionManager.RoleID;if(!s.DeleteButtonVisibility&&!l||!s.SelectedNodes.find((function(e){return 2==e.Id&&e.IsGroup})))if(i+=" AND ",a.IPrefetchFilter.IsGroupTree(s)&&(s.DeleteButtonVisibility||l)){for(var c="",h=0;h<s.SelectedNodes.length;h++)null!=s.SelectedNodes[h].Parent&&s.SelectedNodes[h].Parent.IsSelected||(c.length>0&&(c+=","),c+=s.SelectedNodes[h].Id);0==c.length&&(c+=-12912),i+=t+(s.CostCenterID-5e4)+" IN ",i+=" (select T.NodeID GTID from "+e.GetTagTableName(s.CostCenterID)+" T with(nolock),"+e.GetTagTableName(s.CostCenterID)+" GTP with(nolock) where T.lft BETWEEN GTP.lft AND GTP.rgt AND GTP.NodeID IN (",i+=c.toString()+")  group by T.NodeID)"}else{i+=t+(s.CostCenterID-5e4)+" IN (";for(var d=0;d<s.SelectedNodes.length;d++)d>0&&(i+=","),i+=s.SelectedNodes[d].Id;i+=")"}}else s.DeleteButtonVisibility||(i+=" AND ",i+=t+(s.CostCenterID-5e4)+"=-12912")}return i.toString()}},{key:"GetDimensionFilter_2",value:function(t,o){for(var i,r="",s=0;s<this.ViewModel.oReportDialog.CostCenterFilters.length;s++){var l=this.ViewModel.oReportDialog.CostCenterFilters[s];if(l.CostCenterID>5e4)if(i=this.ViewModel.ReportDims.Contains(l.CostCenterID.toString())?o:t,l.SelectedNodes.length>0)if(1==l.SelectedNodes.length)r+=" AND ",r+=i+(l.CostCenterID-5e4)+"="+l.SelectedNodes[0].Id;else{var c="1"==n.a.SessionManager.UserID||"1"==n.a.SessionManager.RoleID;if(!l.DeleteButtonVisibility&&!c||!l.SelectedNodes.find((function(e){return 2==e.Id&&e.IsGroup})))if(r+=" AND ",a.IPrefetchFilter.IsGroupTree(l)&&(l.DeleteButtonVisibility||c)){for(var h="",d=0;d<l.SelectedNodes.length;d++)null!=l.SelectedNodes[d].Parent&&l.SelectedNodes[d].Parent.IsSelected||(h.length>0&&(h+=","),h+=l.SelectedNodes[d].Id);0==h.length&&(h+=-12912),r+=i+(l.CostCenterID-5e4)+" IN ",r+=" (select T.NodeID GTID from "+e.GetTagTableName(l.CostCenterID)+" T with(nolock),"+e.GetTagTableName(l.CostCenterID)+" GTP with(nolock) where T.lft BETWEEN GTP.lft AND GTP.rgt AND GTP.NodeID IN (",r+=h.toString()+")  group by T.NodeID)"}else{r+=i+(l.CostCenterID-5e4)+" IN (";for(var D=0;D<l.SelectedNodes.length;D++)D>0&&(r+=","),r+=l.SelectedNodes[D].Id;r+=")"}}else l.DeleteButtonVisibility||(r+=" AND ",r+=i+(l.CostCenterID-5e4)+"=-12912")}return r}},{key:"GetPriceFilter",value:function(){var e=this,t="",o=!1;return this.ViewModel.oReportDialog.Locations.Visible&&null!=this.ViewModel.oReportDialog.LocationWhere&&(i.e.IsEmpty(this.ViewModel.oReportDialog.LocationWhere)||this.ViewModel.oReportDialog.LocationWhere.Contains(",")||(o=!0,t+='<Row CC="'+this.ViewModel.oReportDialog.Locations.DBColumnID+'" ID="'+this.ViewModel.oReportDialog.LocationWhere+'"/>')),this.ViewModel.oReportDialog.CostCenterFilters.forEach((function(n){n.CostCenterID>5e4&&1==n.SelectedNodes.length&&(!o||e.ViewModel.oReportDialog.Locations.DBColumnID!=n.CostCenterID)&&(t+='<Row CC="'+n.CostCenterID+'" ID="'+n.SelectedNodes[0].Id+'"/>')})),t.length>0&&(t="<PC>"+t,t+="</PC>"),t.toString()}},{key:"GetFilterByDimension_1",value:function(t){return e.GetFilterByDimension_3(t,this.ViewModel.oReportDialog.CostCenterFilters)}},{key:"GetAccountWiseLocationWhere",value:function(e){var t=this,o="";if(!this.DontApplyLocationWiseAccountsFilter){if("TRUE"==n.a.SessionManager.Preferences["LW Accounts"].toUpperCase()){var r="";this.ViewModel.oReportDialog.Locations.Visible&&null!=this.ViewModel.oReportDialog.LocationWhere&&50002==this.ViewModel.oReportDialog.Locations.DBColumnID?function(){var e=[];i.e.IsEmpty(t.ViewModel.oReportDialog.LocationWhere)?e.push("-101"):e.AddRange(t.ViewModel.oReportDialog.LocationWhere.split(","));for(var o=function(t){if(t>0&&(r+=","),r+=e[t],null!=n.a.SessionManager.Locations){var o,s=n.a.SessionManager.Locations.filter((function(o){return o.NodeID==e[t]}));null!=s&&s.length>0&&i.e.Int(s[0].parentid)>0&&(o=s[0].parentid.toString(),e.Contains(o)||e.push(o))}},s=0;s<e.length;s++)o(s)}():!this.ApplyLWAccountLFilterWhenIgnoreLoc||"1"==n.a.SessionManager.UserID||this.ViewModel.oReportDialog.Locations.Visible||i.e.IsEmpty(n.a.SessionManager.LocationWhere)||(r=n.a.SessionManager.LocationWhere),r.length>0&&(o=this.ViewModel.StaticReportType>=5&&this.ViewModel.StaticReportType<=8?" AND (((A.IsGroup=1 or A.AccountID in (select ParentNodeID from COM_CostCenterCostCenterMap with(nolock) where ParentCostCenterID=2 and CostCenterID=50002 AND NodeID IN ("+r+")) )) or A.ParentID=0)":4==this.ViewModel.StaticReportType?" AND ((("+e+".IsGroup=1 or "+e+".AccountID in (select ParentNodeID from COM_CostCenterCostCenterMap with(nolock) where ParentCostCenterID=2 and CostCenterID=50002 AND NodeID IN ("+r+")) )) or "+e+".ParentID=0)":" AND ((("+e+".AccountID in (select ParentNodeID from COM_CostCenterCostCenterMap with(nolock) where ParentCostCenterID=2 and CostCenterID=50002 AND NodeID IN ("+r+")) )) or "+e+".ParentID=0)")}else if("True"==n.a.SessionManager.Preferences.EnableDivisionWise.toString()&&"TRUE"==n.a.SessionManager.Preferences["DW Accounts"].toUpperCase()){var s="";this.ViewModel.oReportDialog.Locations.Visible&&null!=this.ViewModel.oReportDialog.LocationWhere&&50001==this.ViewModel.oReportDialog.Locations.DBColumnID?function(){var e=[];i.e.IsEmpty(t.ViewModel.oReportDialog.LocationWhere)?e.push("-101"):e.AddRange(t.ViewModel.oReportDialog.LocationWhere.split(","));for(var o=function(t){if(t>0&&(s+=","),s+=e[t],null!=n.a.SessionManager.Divisions){var o,i=n.a.SessionManager.Divisions.filter((function(o){return o.NodeID==e[t]}));null!=i&&i.length>0&&""!=i[0].parentid.toString()&&parseInt(i[0].parentid.toString())>0&&(o=i[0].parentid.toString(),e.Contains(o)||e.push(o))}},r=0;r<e.length;r++)o(r)}():!this.ApplyLWAccountLFilterWhenIgnoreLoc||"1"==n.a.SessionManager.UserID||this.ViewModel.oReportDialog.Locations.Visible||i.e.IsEmpty(n.a.SessionManager.DivisionWhere)||(s=n.a.SessionManager.DivisionWhere),s.length>0&&(o=this.ViewModel.StaticReportType>=5&&this.ViewModel.StaticReportType<=8?" AND (((A.IsGroup=1 or A.AccountID in (select ParentNodeID from COM_CostCenterCostCenterMap with(nolock) where ParentCostCenterID=2 and CostCenterID=50001 AND NodeID IN ("+s+")) )) or A.ParentID=0)":4==this.ViewModel.StaticReportType?" AND ((("+e+".IsGroup=1 or "+e+".AccountID in (select ParentNodeID from COM_CostCenterCostCenterMap with(nolock) where ParentCostCenterID=2 and CostCenterID=50001 AND NodeID IN ("+s+")) )) or "+e+".ParentID=0)":" AND ((("+e+".AccountID in (select ParentNodeID from COM_CostCenterCostCenterMap with(nolock) where ParentCostCenterID=2 and CostCenterID=50001 AND NodeID IN ("+s+")) )) or "+e+".ParentID=0)")}var a=n.a.SessionManager.Preferences.ContainsKey("Dimension List")?n.a.SessionManager.Preferences["Dimension List"].split(","):[];0==o.length&&a.Contains("2")&&"1"!=n.a.SessionManager.UserID&&(o=this.ViewModel.StaticReportType>=5&&this.ViewModel.StaticReportType<=8?" AND (((A.IsGroup=1 or A.AccountID in (select ParentNodeID from COM_CostCenterCostCenterMap with(nolock) where ParentCostCenterID=2 and CostCenterID=7 AND NodeID="+n.a.SessionManager.UserID+") )) or A.ParentID=0 or "+e+".CreatedBy='"+n.a.SessionManager.UserName+"')":4==this.ViewModel.StaticReportType?" AND ((("+e+".IsGroup=1 or "+e+".AccountID in (select ParentNodeID from COM_CostCenterCostCenterMap with(nolock) where ParentCostCenterID=2 and CostCenterID=7 AND NodeID="+n.a.SessionManager.UserID+") )) or "+e+".ParentID=0 or "+e+".CreatedBy='"+n.a.SessionManager.UserName+"')":" AND ((("+e+".AccountID in (select ParentNodeID from COM_CostCenterCostCenterMap with(nolock) where ParentCostCenterID=2 and CostCenterID=7 AND NodeID="+n.a.SessionManager.UserID+") )) or "+e+".ParentID=0 or "+e+".CreatedBy='"+n.a.SessionManager.UserName+"')")}return i.e.IsEmpty(this.ViewModel.RowFiltersWhere)||(o=" AND "+this.ViewModel.RowFiltersWhere),o}},{key:"GetAccountTypeWhere",value:function(e){var t="";return this.ViewModel.Preferences.ContainsKey("AccountTypesFilter")&&this.ViewModel.Preferences.AccountTypesFilter.length>0&&(t=n.a.SessionManager.Preferences.ContainsKey("IsControlAccounts")&&"TRUE"==n.a.SessionManager.Preferences.IsControlAccounts.toUpperCase()?"6,7"==this.ViewModel.Preferences.AccountTypesFilter||"7,6"==this.ViewModel.Preferences.AccountTypesFilter||this.ViewModel.Preferences.AccountTypesFilter.Contains(",")?" AND "+e+".AccountTypeID IN ("+this.ViewModel.Preferences.AccountTypesFilter+")":"7"==this.ViewModel.Preferences.AccountTypesFilter?" AND ("+e+".AccountTypeID=7 or ("+e+".IsDrCr=1 and "+e+".AccountTypeID=6))":"6"==this.ViewModel.Preferences.AccountTypesFilter?" AND ("+e+".AccountTypeID=6 or ("+e+".IsDrCr=1 and "+e+".AccountTypeID=7))":" AND "+e+".AccountTypeID="+this.ViewModel.Preferences.AccountTypesFilter:this.ViewModel.Preferences.AccountTypesFilter.Contains(",")?" AND "+e+".AccountTypeID IN ("+this.ViewModel.Preferences.AccountTypesFilter+")":" AND "+e+".AccountTypeID="+this.ViewModel.Preferences.AccountTypesFilter),t}},{key:"GetProductWiseLocationWhere",value:function(e,t){var o=this,r="";if("True"==n.a.SessionManager.Preferences.EnableLocationWise.toString()&&"TRUE"==n.a.SessionManager.Preferences["LW Products"].toUpperCase()){var s=function(){var s=[];if(50002==o.ViewModel.oReportDialog.Locations.DBColumnID){if(!o.ViewModel.oReportDialog.Locations.Visible||null==o.ViewModel.oReportDialog.LocationWhere)return{v:""};i.e.IsEmpty(o.ViewModel.oReportDialog.LocationWhere)?s.push("-101"):s.AddRange(o.ViewModel.oReportDialog.LocationWhere.split(","))}else{if("1"==n.a.SessionManager.UserID||"1"==n.a.SessionManager.RoleID)return{v:""};0!=n.a.SessionManager.LocationID||i.e.IsEmptySpace(n.a.SessionManager.LocationWhere)?s.push(n.a.SessionManager.LocationID.toString()):s.AddRange(n.a.SessionManager.LocationWhere.split(","))}for(var a="",l=function(e){if(e>0&&(a+=","),a+=s[e],null!=n.a.SessionManager.Locations){var t,o=n.a.SessionManager.Locations.filter((function(t){return t.NodeID==s[e]}));null!=o&&o.length>0&&""!=o[0].parentid.toString()&&parseInt(o[0].parentid.toString())>0&&(t=o[0].parentid.toString(),s.Contains(t)||s.push(t))}},c=0;c<s.length;c++)l(c);r=t?" AND ((("+e+".IsGroup=1 or "+e+".ProductID in (select ParentNodeID from COM_CostCenterCostCenterMap with(nolock) where ParentCostCenterID=3 and CostCenterID=50002 AND NodeID IN ("+a+")) )) or "+e+".ParentID=0)":" AND ((("+e+".ProductID in (select ParentNodeID from COM_CostCenterCostCenterMap with(nolock) where ParentCostCenterID=3 and CostCenterID=50002 AND NodeID IN ("+a+")) )) or "+e+".ParentID=0)"}();if("object"==typeof s)return s.v}else if("True"==n.a.SessionManager.Preferences.EnableDivisionWise.toString()&&"TRUE"==n.a.SessionManager.Preferences["DW Products"].toUpperCase()){var a=function(){var s=[];if(50001==o.ViewModel.oReportDialog.Locations.DBColumnID){if(!o.ViewModel.oReportDialog.Locations.Visible||null==o.ViewModel.oReportDialog.LocationWhere)return{v:""};i.e.IsEmpty(o.ViewModel.oReportDialog.LocationWhere)?s.push("-101"):s.AddRange(o.ViewModel.oReportDialog.LocationWhere.split(","))}else{if("1"==n.a.SessionManager.UserID||"1"==n.a.SessionManager.RoleID)return{v:""};0!=n.a.SessionManager.DivisionID||i.e.IsEmptySpace(n.a.SessionManager.DivisionWhere)?s.push(n.a.SessionManager.DivisionID.toString()):s.AddRange(n.a.SessionManager.DivisionWhere.split(","))}for(var a="",l=function(e){if(e>0&&(a+=","),a+=s[e],null!=n.a.SessionManager.Divisions){var t,o=n.a.SessionManager.Divisions.filter((function(t){return t.NodeID==s[e]}));null!=o&&o.length>0&&""!=o[0].parentid.toString()&&parseInt(o[0].parentid.toString())>0&&(t=o[0].parentid.toString(),s.Contains(t)||s.push(t))}},c=0;c<s.length;c++)l(c);r=t?" AND ((("+e+".IsGroup=1 or "+e+".ProductID in (select ParentNodeID from COM_CostCenterCostCenterMap with(nolock) where ParentCostCenterID=3 and CostCenterID=50001 AND NodeID IN ("+a+")) )) or "+e+".ParentID=0)":" AND ((("+e+".ProductID in (select ParentNodeID from COM_CostCenterCostCenterMap with(nolock) where ParentCostCenterID=3 and CostCenterID=50001 AND NodeID IN ("+a+")) )) or "+e+".ParentID=0)"}();if("object"==typeof a)return a.v}i.e.IsEmpty(this.ViewModel.RowFiltersWhere)||(r=" AND "+this.ViewModel.RowFiltersWhere);var l=this.GetFilterByDimension_1(503);return l.length>0&&(r+=" AND "+e+".ProductTypeID in ("+l+")"),r}},{key:"GetTagWiseQuery",value:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Name",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Name",r="SELECT NodeID,"+o+" "+n+" FROM "+e.GetTagTableName(t)+" WITH(NOLOCK) WHERE (IsGroup=0 OR NodeID=1)";t==this.ViewModel.oReportDialog.Locations.DBColumnID&&this.ViewModel.oReportDialog.Locations.Visible&&null!=this.ViewModel.oReportDialog.LocationWhere&&(i.e.IsEmpty(this.ViewModel.oReportDialog.LocationWhere)?r+=" AND 1!=1":r+=" AND NodeID IN ("+this.ViewModel.oReportDialog.LocationWhere+")");var s=this.ViewModel.oReportDialog.CostCenterFilters.filter((function(e){return e.CostCenterID==t}));if(s.length>0){var a=s[0];if(a.SelectedNodes.length>0)if(1==a.SelectedNodes.length)r+=" AND NodeID="+a.SelectedNodes[0].Id;else{r+=" AND NodeID IN (";for(var l=0;l<a.SelectedNodes.length;l++)l>0&&(r+=","),r+=a.SelectedNodes[l].Id;r+=")"}else a.DeleteButtonVisibility||(r+=" AND NodeID=-12912")}return r+=" ORDER BY "+n}},{key:"CheckLWAccountingDate",value:function(){var t="";this.ViewModel.oReportDialog.Locations.Visible&&null!=this.ViewModel.oReportDialog.LocationWhere&&(t=i.e.IsEmpty(this.ViewModel.oReportDialog.LocationWhere)?" AND 1!=1":" AND NodeID IN ("+this.ViewModel.oReportDialog.LocationWhere+")");var o=e.GetFilterByDimension_3(50002,this.ViewModel.oReportDialog.CostCenterFilters);o.length>0&&(t+=" AND NodeID IN ("+o+")"),this.ViewModel.DisplayMessage="";var r=n.a.report.ReportDataSet("RPT031",this.ViewModel.IsReportDB,t);r.Tables[0].length>1?this.ViewModel.DisplayMessage="Selected locations should have same Accounting period start month.'":r.Tables[0].length>0&&(this.AccountingFromMonth=parseInt(r.Tables[0][0].MonthStart))}}],[{key:"GetFilterByDimension_3",value:function(e,t){for(var o="",i=0;i<t.length;i++){var r=t[i];if(r.CostCenterID==e)if(r.SelectedNodes.length>0){var s=null,a="1"==n.a.SessionManager.UserID||"1"==n.a.SessionManager.RoleID;if(e>5e4&&(s=r.DeleteButtonVisibility||a?r.SelectedNodes.find((function(e){return 2==e.Id&&e.IsGroup})):null),!s)if(1==r.SelectedNodes.length)o+=r.SelectedNodes[0].Id;else for(var l=0;l<r.SelectedNodes.length;l++)l>0&&(o+=","),o+=r.SelectedNodes[l].Id}else r.DeleteButtonVisibility||(o+="-12912")}return o.toString()}},{key:"GetTagTableName",value:function(e){return 2==e?"ACC_Accounts":3==e?"INV_Product":7==e?"ADM_Users":50001==e?"COM_Division":50002==e?"COM_Location":50003==e?"COM_Branch":50004==e?"COM_Department":50005==e?"COM_Salesman":50006==e?"COM_Category":50007==e?"COM_Area":50008==e?"COM_Teritory":"COM_CC"+e}}]),e}()}}]);