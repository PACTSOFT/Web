function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,s=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[40,128],{"8BPh":function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var s=i("Do2H"),n=i("Lp6j"),a=i("eQJW"),o=i("ScVY"),r=i("0/4Q"),c=i("EQd/"),l=i("VxiT"),h=i("4HhE"),u=i("JIg3"),d=i("n56n"),C=i("jgdN"),b=i("N0rE"),m=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this)).ContactID=0,e.CostCenterID=0,e.ContactType=new r.e(0),e.ContactVisibility=!1,e._isPopup=!1,e.Visiblebtns=!1,e.SaveEnable=!1,e.DetailVisibility=!1,e.Countryvisible=!1,e._IsPrimaryContact=!1,e.IsModified=!1,e.Width="250",e.ScreenObject=new l.a,e.obj={},e.FeatureNodeID=0,e}return _createClass(i,[{key:"QuickAddDContactViewModel_1",value:function(e){this.FeatureParent=e,this.Visiblebtns=!0,this.onLoad(0,!1),this.ClearFields()}},{key:"QuickAddDContactViewModel_2",value:function(e,t,i){this.onLoad(e,t),this.Visiblebtns=!0,this.DetailVisibility=!0}},{key:"onLoad",value:function(e,t){this.ScreenObject=new l.a,this.ContactID=e,this.CostCenterID=65,this.obj.DetailContactID=this.ContactID,this.SaveEnable=!0,this.MessageVisibility=!1,this.DisplayMessage="",this.LoadData(),0==this.ContactID?this.Title=s.a.GetResource("AddDetailContact"):(this.Title=s.a.GetResource("EditDetailContact"),this.OnLoadData()),this.obj.IsGroup=1==t,this.DisplayName=this.Title,this.AssignRowColumns()}},{key:"LoadContactType",value:function(){if(this.IsPrimaryContact){this.ContactType.SelectedValue="1";for(var e=0;e<this.ContactType.Items.length;e++)"1"!=this.ContactType.Items[e].Value&&this.ContactType.Items.RemoveAt(e)}}},{key:"AssignRowColumns",value:function(){if(this.isPopup){this.Width="900";for(var e=0,t=0;t<this.ScreenObject.StaticFields.length;t++)e=this.ScreenObject.StaticFields[t].Row,this.ScreenObject.StaticFields[t].Column=e%4,this.ScreenObject.StaticFields[t].Row=e/4,this.ScreenObject.StaticFields[t].ColumnSpan=1}else{this.Width="250";for(var i=0;i<this.ScreenObject.StaticFields.length;i++)this.ScreenObject.StaticFields[i].Column=0,this.ScreenObject.StaticFields[i].ColumnSpan=4}}},{key:"LoadContacts",value:function(e){this.ClearFields(),null!=e&&e.length>0&&(this.ScreenObject.FillControls(null!=e?e[0]:null,null!=e&&e.length>0?e[0]:null,null!=e&&e.length>0?e[0]:null,null),this.ContactType.SelectedValue=e[0].AddressTypeID.toString(),this.ContactID=parseInt(e[0].ContactID.toString()))}},{key:"GetXML",value:function(){var e=this.ScreenObject.StaticFields.find((function(e){return"firstname"==e.DBColumnName.toLowerCase()}));if(e instanceof c.d&&n.e.IsEmpty(e.Text))return"";var t="";return t+="<Data> <Row ",t+=' StaticFields ="'+c.d.GetValidXml(this.ScreenObject.GetStaticFieldsQuery().Trim(","))+'" ',t+=' ExtraTextFields ="'+c.d.GetValidXml(this.ScreenObject.GetQuickExtraFieldsQuery().Trim(","))+'" ',t+=' CCFields ="'+c.d.GetValidXml(this.ScreenObject.GetQuickExtraCCFieldsQuery().Trim(","))+'" ',t+="  /></Data>"}},{key:"OnLoadData",value:function(){var e=this.obj.GetContactDetails();this.ScreenObject.FillControls(e.Tables[0][0],e.Tables[1][0],e.Tables[2].length>0?e.Tables[2][0]:null,null)}},{key:"LoadData",value:function(){var e=this;this.ContactType=new r.e,this.ScreenObject.LoadQuickScreen(this,65),this.ScreenObject.Data.Tables.length>7&&null!=this.ScreenObject.Data&&this.ScreenObject.Data.Columns[7].Contains("ContactType")&&this.ScreenObject.Data.Tables[7].forEach((function(t){e.ContactType.Items.push(r.d.ComboBoxItems_2(t.ContactType.toString(),t.ContactTypeID.toString()))})),this.ScreenObject.Data.Tables.length>0&&null!=this.ScreenObject.Data&&(this.oCombo=this.ScreenObject.GetQuickCombo(24328),null!=this.oCombo&&(this.ScreenObject.Data.Tables[3].forEach((function(t){e.oCombo.Items.push(r.d.ComboBoxItems_2(t.Status.toString(),t.StatusID.toString()))})),this.oCombo.SelectedValue="403"),this.oCombo=this.ScreenObject.GetQuickCombo(24325),null!=this.oCombo&&this.ScreenObject.Data.Tables[4].forEach((function(t){"20"==t.LookupType.toString()&&e.oCombo.Items.push(r.d.ComboBoxItems_2(t.Name.toString(),t.NodeID.toString()))})),this.oCombo=this.ScreenObject.GetQuickCombo(24334),null!=this.oCombo&&this.ScreenObject.Data.Tables[4].forEach((function(t){"21"==t.LookupType.toString()&&e.oCombo.Items.push(r.d.ComboBoxItems_2(t.Name.toString(),t.NodeID.toString()))})),this.oCombo=this.ScreenObject.GetQuickCombo(24342),null!=this.oCombo&&(this.oCombo.Items.push(r.d.ComboBoxItems_2(s.a.GetResource("CRMLead_Male"),"1")),this.oCombo.Items.push(r.d.ComboBoxItems_2(s.a.GetResource("CRMLead_Female"),"2")),this.oCombo.SelectedValue="1")),this.FName=this.ScreenObject.GetQuickText(24322),this.MName=this.ScreenObject.GetQuickText(24323),this.LName=this.ScreenObject.GetQuickText(24324);var t=this.ScreenObject.Data.Tables[5].filter((function(e){return"CapsLock"==e.Name}));t.length>0&&Object(a.j)(t[0].Value)&&(null!=this.FName&&(this.FName.IsAllCaps=!0),null!=this.MName&&(this.MName.IsAllCaps=!0),null!=this.LName&&(this.LName.IsAllCaps=!0)),(t=this.ScreenObject.Data.Tables[5].filter((function(e){return"CapsToFirstLetter"==e.Name}))).length>0&&Object(a.j)(t[0].Value)&&(null!=this.FName&&(this.FName.IsAllCaps=!0),null!=this.MName&&(this.MName.IsAllCaps=!0),null!=this.LName&&(this.LName.IsAllCaps=!0))}},{key:"ClearFields",value:function(){this.ScreenObject.Clear()}},{key:"OnSave",value:function(e){var t=this;if("Save"==e.toString()){if(this.DisplayMessage=this.ScreenObject.ValidateData(),this.DisplayMessage.length>0)return;if(this.ContactID>0&&(this.IsModified=!0),null!=this.FeatureParent){if(this.ContactID>0&&(this.IsModified=!0),this.CheckPrimaryDuplicateContact())return this.DisplayMessage="Duplicate Contact[s] in Contacts DB",void(this.MessageVisibility=!0);var i=null;null==this.FeatureParent.ViewContacts.SelectedRow?i=this.FeatureParent.ViewContacts.grData.NewRow():null!=this.FeatureParent.ViewContacts.SelectedRow&&(i=this.FeatureParent.ViewContacts.SelectedRow.Row);for(var n=0;n<this.ScreenObject.StaticFields.length;n++){var a=this.ScreenObject.StaticFields[n];if(a instanceof h.c&&null!=a.DBColumnName)if(this.FeatureParent.ViewContacts.grData.Columns.Contains(a.DBColumnName)||(this.FeatureParent.ViewContacts.grData.Columns.push(a.DBColumnName),(a.DBColumnName.toUpperCase().startsWith("CCNID")||a instanceof d.b)&&this.FeatureParent.ViewContacts.grData.Columns.push(a.DBColumnName+"_Key")),a instanceof c.d&&(i[a.DBColumnName]=""!=a.Text?a.Text:""),a instanceof c.b)i[a.DBColumnName]=""!=a.Password?a.Password:"";else if(a instanceof c.a)i[a.DBColumnName]=""!=a.Text?a.Text:"";else if(a instanceof c.c)i[a.DBColumnName]=""!=a.Text?a.Text:"";else if(a instanceof r.e)if(this.FeatureParent.ViewContacts.grData._Columns.Contains(a.DBColumnName)){if(i[a.DBColumnName+"_Key"]=""!=a.SelectedValue?a.SelectedValue:"",""!=a.SelectedValue||null!=a.SelectedValue)for(var o=0;o<a.Items.length;o++)if(a.Items[o].Value==a.SelectedValue){i[a.DBColumnName]=a.Items[o].Name;break}}else i[a.DBColumnName]=""!=a.SelectedValue?a.SelectedValue:"";else a instanceof u.c?i[a.DBColumnName]=""!=a.Text.toString()&&""!=a.Date.toString()?new Date(a.Date).ToString("dd/MMM/yyyy"):"":a instanceof u.b?i[a.DBColumnName]=""!=a.Date.toString()?a.Date.toString():"":a instanceof u.a?i[a.DBColumnName]=""!=a.Text.toString()&&""!=a.Date.toString()?a.Date.ToString("dd/MMM/yyyy"):"":a instanceof C.a?i[a.DBColumnName]=""!=a.Text?a.Text:"":a instanceof d.b&&(i[a.DBColumnName+"_Key"]=0!=a.SelectedValue?a.SelectedValue:1,i[a.DBColumnName]=a.Text)}i.AddressTypeID=this.ContactType.SelectedValue,null==this.FeatureParent.ViewContacts.SelectedRow?this.FeatureParent.ViewContacts.grData.addRow(i):this.FeatureParent.ViewContacts.grData.updateRow(i),this.FeatureParent.ViewContacts.SelectedRow=null,this.ClearFields(),s.a.page.HideDialog()}}else if("Details"==e.toString()){var l=0;null!=this.FeatureParent&&("AddEditAccountScreenViewModel"==this.FeatureParent.ClassName?(l=2,this.FeatureNodeID=this.FeatureParent.AccountID):"PACT.VIEWMODEL.AddCustomerViewModel"==this.FeatureParent.ClassName?(l=83,this.FeatureNodeID=this.FeatureParent.CustomerID):"PACT.VIEWMODEL.AddCostCenterViewModel"==this.FeatureParent.ClassName?(l=this.FeatureParent.CostCenterID,this.FeatureNodeID=this.FeatureParent.NodeID):"AddEditMachineViewModel"==this.FeatureParent.ClassName?(l=71,this.FeatureNodeID=this.FeatureParent.ResID):"AddEditBatchViewModel"==this.FeatureParent.ClassName?(l=16,this.FeatureNodeID=this.FeatureParent.BatchID):"AddEditCustomerViewModel"==this.FeatureParent.ClassName?(l=51,this.FeatureNodeID=this.FeatureParent.CustomerID):"AddEditLeads"==this.FeatureParent.ClassName?(l=86,this.FeatureNodeID=this.FeatureParent.LeadID):"AddEditEmpMasterViewModel"==this.FeatureParent.ClassName&&(l=50051,this.FeatureNodeID=this.FeatureParent.NodeID));var m=new b.AddDContactViewModel(this.ContactID,!1,0);null!=this.FeatureParent&&"AddCustomerViewModel"==this.FeatureParent.ClassName&&(m.Customer.SelectedValue=this.FeatureParent.CustomerID);for(var D=function(e){var i=t.ScreenObject.StaticFields[e];if(i instanceof h.c&&null!=i.DBColumnName){if(!(f=m.ScreenObject.StaticFields.find((function(e){return e.DBColumnID==i.DBColumnID}))))for(var s=0;s<m.ScreenObject.CustomTab.Pages.length&&!(f=m.ScreenObject.CustomTab.Pages[s].Fields.find((function(e){return e.DBColumnID==i.DBColumnID})));s++);null!=f&&(f instanceof c.d&&i instanceof c.d?f.Text=""!=i.Text?i.Text:"":f instanceof c.b&&i instanceof c.b?f.Password=""!=i.Password?i.Password:"":f instanceof c.a&&i instanceof c.a||f instanceof c.c&&i instanceof c.c?f.Text=i.Text:f instanceof r.e&&i instanceof r.e?f.SelectedValue=i.SelectedValue:f instanceof u.a&&i instanceof u.a?f.Date=i.Date:f instanceof C.a&&i instanceof C.a?f.Text=i.Text:f instanceof d.b&&i instanceof d.b&&(f.SelectedValue=i.SelectedValue))}},p=0;p<this.ScreenObject.StaticFields.length;p++){var f;D(p)}this.FeatureNodeID>0&&(m.FeatureParent=this.FeatureParent),m.CCID=l,m.CCNodeID=this.FeatureNodeID}else"Cancel"==e.toString()&&(null!=this.FeatureParent&&(this.FeatureParent.ContactVisibility=!1),s.a.page.HideDialog())}},{key:"CheckPrimaryDuplicateContact",value:function(){return!1}},{key:"isPopup",get:function(){return this._isPopup},set:function(e){e!=this._isPopup&&(this._isPopup=e,this.AssignRowColumns())}},{key:"IsPrimaryContact",get:function(){return this._IsPrimaryContact},set:function(e){e!=this._IsPrimaryContact&&(this._IsPrimaryContact=e,this.LoadContactType())}}]),i}(o.b)},CXnT:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("3Pt+"),n=i("fXoL"),a=function(){var e=function(){function e(){_classCallCheck(this,e),this.group=new s.j({})}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Nb({type:e,selectors:[["app-approve-feature"]],decls:30,vars:7,consts:[[1,"master-screen"],[1,"PACTHeaderFields","dialogSubBody"],[1,"form-group","row","PACTControl"],["FieldDirective","",3,"obj","group"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"fa-light","fa-circle-check"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Wc(1,"\n    "),n.Zb(2,"div",1),n.Wc(3,"\n        "),n.Zb(4,"div",2),n.Wc(5,"\n            "),n.Vb(6,3),n.Wc(7,"\n        "),n.Yb(),n.Wc(8,"\n        "),n.Zb(9,"div",2),n.Wc(10,"\n            "),n.Vb(11,3),n.Wc(12,"\n        "),n.Yb(),n.Wc(13,"\n  "),n.Yb(),n.Wc(14,"\n  "),n.Zb(15,"div",4),n.Wc(16,"\n    "),n.Zb(17,"div"),n.Wc(18,"\n        "),n.Zb(19,"button",5),n.hc("click",(function(){return t.obj.OnSave("Save")})),n.Ub(20,"i",6),n.Wc(21,"Ok"),n.Yb(),n.Wc(22,"\n        "),n.Zb(23,"button",7),n.hc("click",(function(){return t.obj.OnSave("Cancel")})),n.Ub(24,"i",8),n.Wc(25),n.mc(26,"translate"),n.Yb(),n.Wc(27,"\n    "),n.Yb(),n.Wc(28,"      \n  "),n.Yb(),n.Wc(29,"\n"),n.Yb()),2&e&&(n.Db(6),n.tc("obj",t.obj.Status)("group",t.group),n.Db(5),n.tc("obj",t.obj.Date)("group",t.group),n.Db(14),n.Xc(n.nc(26,5,"Cancel")))},encapsulation:2}),e}()},"EPb/":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var s=i("Do2H"),n=i("eQJW"),a=i("ScVY"),o=i("4HhE"),r=i("r2z3"),c=i("0/4Q"),l=i("JIg3"),h=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,a,h){var u,d;return _classCallCheck(this,i),(u=t.call(this)).Save=new o.b,u.objLeads=new r.a,u.ds=null,u.Status=new c.e(0),u.Date=new l.a(0),u.ccid=0,u.nodeid=0,u.CustomerChecked=new o.b,u.Status.Items.push(c.d.ComboBoxItems_2("Approved","1")),u.Status.Items.push(c.d.ComboBoxItems_2("Un-Approved","0")),u.Title=u.DisplayName=s.a.GetResource("Approve"),u.Status.Label=s.a.GetResource("AccountCreate_Status"),u.Date.Label=s.a.GetResource("Service_ApprovedDate"),u.Save.Subscribe(_assertThisInitialized(u),"OnSave"),u.ccid=a,u.nodeid=h,86==a?(u.parent=e,d=u.objLeads.GetLead(u.parent.LeadID),u.Status.SelectedValue=null!=d&&d.Tables.length>1&&d.Tables[0].length>0&&d.Columns[0].Contains("IsApproved")&&""!=d.Tables[0][0].IsApproved.toString()&&Object(n.j)(d.Tables[0][0].IsApproved)?"1":"0"):88==a&&(u.Cparent=e,u.objCampaigns.CampaignId=h,d=u.objCampaigns.GetCompaignDetails(),u.Status.SelectedValue=null!=d&&d.Tables.length>2&&d.Tables[1].length>0&&d.Columns[1].Contains("IsApproved")&&""!=d.Tables[1][0].IsApproved.toString()&&Object(n.j)(d.Tables[1][0].IsApproved)?"1":"0"),u}return _createClass(i,[{key:"OnSave",value:function(e){if("Cancel"==e)s.a.page.HideDialog();else{Logger.InfoLog("Convertion :: Entering OnConvertionLead");var t=[];t.push(this.ccid),t.push(this.nodeid),t.push(this.Status.SelectedValue),t.push(this.Date.Date.ToString("dd/MMM/yyyy"));var i=this.objLeads.ApproveFeature(t,86);this.DisplayMessage=i.Message,i.RetValue>0?null!=this.parent?this.parent.LeadStatus=this.Status.Text:null!=this.Cparent&&(this.Cparent.CampaignStatus=this.Status.Text):this.parent.LeadStatus=this.Status.Text,this.MessageVisibility=!0,Logger.InfoLog("Convertion :: Exiting OnConvertionLead")}}}]),i}(a.b)},"EuF+":function(e,t,i){"use strict";i.d(t,"a",(function(){return E}));var s=i("Do2H"),n=i("Lp6j"),a=i("eQJW"),o=i("ScVY"),r=i("f8PW"),c=i("VxiT"),l=i("EQd/"),h=i("0/4Q"),u=i("n56n"),d=i("NkMH"),C=i("DKUf"),b=i("CQvG"),m=i("RJs6"),D=i("OvA8"),p=i("vVAv"),f=i("iqoD"),I=i("INyF"),g=i("c6C+"),S=i("xnJf"),V=i("EggS"),y=i("8B8H"),w=i("ockk"),T=i("Hzm0"),v=i("il++"),A=function(e){_inherits(i,e);var t=_createSuper(i);function i(e){var s;return _classCallCheck(this,i),(s=t.call(this)).CasesGridObj=new y.a,s.ColumnSpan="4",s.CCID=0,s.ParentID=0,s.AddGridColumns(),s}return _createClass(i,[{key:"AddGridColumns",value:function(){var e,t=new Array;(e=new w.a).Header="Case",e.DisplayMember="CaseName",e.ValueMember="Case_Key",e.DataType="LINK",e.Width=250,e.Click.Subscribe(this,"onClick"),e.ReadOnly=!0,e.IsVisible=!0,t.push(e),(e=new w.a).Header="Customer",e.DisplayMember="CustomerName",e.ValueMember="Customer_Key",e.DataType="TextBox",e.Width=250,e.ReadOnly=!0,e.IsVisible=!0,t.push(e),(e=new w.a).Header="Product",e.DisplayMember="ProductName",e.ValueMember="Product_Key",e.DataType="TextBox",e.Width=250,e.ReadOnly=!0,t.push(e),(e=new w.a).Header="CreatedDate",e.DisplayMember="CreatedDate",e.DataType="TextBox",e.Width=150,e.ReadOnly=!0,e.IsVisible=!0,t.push(e),this.CasesGridObj.Columns=t,this.CasesGridObj.ColumnSpan=4,this.CasesGridObj.Table=[],this.CasesGridObj.TableColumns.push("CaseName"),this.CasesGridObj.TableColumns.push("Case_Key"),this.CasesGridObj.TableColumns.push("CustomerName"),this.CasesGridObj.TableColumns.push("Customer_Key"),this.CasesGridObj.TableColumns.push("ProductName"),this.CasesGridObj.TableColumns.push("Product_Key"),this.CasesGridObj.TableColumns.push("CreatedDate"),this.CasesGridObj.TableColumns.push("ParentID"),this.CasesGridObj.addEmptyRow()}},{key:"LoadCaseGrid",value:function(e){var t=this;null==e&&0==e.length||(this.CasesGridObj.Clear(),e.forEach((function(e){var i=t.CasesGridObj.NewRow();i.CaseName=e.CaseNumber,i.Case_Key=e.CaseID,i.CustomerName=e.CustomerName,i.Customer_Key=e.CustomerID,i.ProductName=e.ProductName,i.Product_Key=e.ProductID,""!=e.CreatedDate&&(i.CreatedDate=new Date(e.CreatedDate).ToString(s.a.SessionManager.Preferences["Date Format"].toString())),i.ParentID=e.ParentID,t.CasesGridObj.addRow(i)})))}},{key:"onClick",value:function(){if(this.SelectedRow){this.CCID=parseInt(this.SelectedRow.Case_Key),this.ParentID=parseInt(this.SelectedRow.ParentID),this.Cases=new T.AddEditCasesViewModel(this.CCID,this.ParentID,!1);var e={};Object.assign(e,{component:v.AddEditCaseComponent,params:{obj:this.Cases}}),e.title=this.Cases.ScreenName,s.a.page.addNewTab(e),s.a.page.setActiveTab(s.a.page.indexOf(this.Cases))}}},{key:"CasesGrid",get:function(){return this.CasesGridObj.Table}},{key:"SelectedRow",get:function(){return this.CasesGridObj.SelectedItem}}]),i}(o.b),j=i("8BPh"),N=i("2mtM"),L=i("V7Sd"),O=i("LCKI"),P=i("W4+j"),x=i("wJuo"),M=i("x68t"),R=i("THE7"),E=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n,a,o){var r;_classCallCheck(this,i),(r=t.call(this)).ParentFeatureID=0,r.PNodeID=0,r.AssignVisiblity=!1,r.CostCenterID=0,r.FileID=0,r.IsPhotoDelete=!1,r.FileExtension="",r.FileDescription="",r.IsPhotoChanged=!1,r.lstDeletedRecords=new Array,r.PhotoTextVisibility=!1,r.ContactVisibility=!1,r.ContactExpanded=!1,r.AttachmentExpanded=!1,r.NoteExpanded=!1,r.NoteVisibility=!1,r.AttachmentVisibility=!1,r.VehicleVisibility=!1,r.AddressVisibility=!1,r.obj=new V.a,r.ScreenObject=new c.a,r.ParentId=0,r.SelectedItem=0,r.UserName=new l.d(0),r.OnlineCustrType=new h.e(0),r.Password=new l.d(0),r.CustomerName=new l.d(24201),r.CustomerCode=new l.a(24200),r.AliasName=new l.d(24202),r.CustomerType=new h.e(24207),r.Status=new h.e(24204),r.Group=new u.b(24203),r.Currency=new h.e(19817),r.Account=new u.b(26014),r.CustomerID=0,r.CreditLimit=new l.d(24206),r.CreditDays=new l.d(24205),r.TabWidth=0,r.ButtonSave=new d.a,r.ButtonConvert=new d.a,r.PrimaryVisibility=!1,r.TempID=0,r.RetVal=0,r.ActVisibility=!1,r.NodeID=0,r.ds=null,r.CCMapVisibility=!1,r.p=0,r.p_2=0,r.p_3=0,r.CostCenterID=83,r.NodeID=n,r.ViewActivities=new b.b(_assertThisInitialized(r)),r.Activities=new C.a(_assertThisInitialized(r),!1),r.ViewActivities.Activities=r.Activities,r.Cases=new A(_assertThisInitialized(r)),r.obj.CustomerID=e,r.ViewContacts=new R.a(_assertThisInitialized(r)),r.ViewAssignHistroy=new N.a(_assertThisInitialized(r)),r.ViewNotes=new m.a(_assertThisInitialized(r)),r.ViewAttachments=new D.ViewAttachmentViewModel(_assertThisInitialized(r)),r.ViewAddress=new I.a(_assertThisInitialized(r)),r.ViewCCMapping=new p.a(_assertThisInitialized(r)),r.ViewCCMapping.ViewCCMappingViewModel_1(_assertThisInitialized(r),83,e),r.VehicleList=[],r.setvisibility(),r.PactScreenID="83",r.IsPhotoChanged=!1,r.PhotoTextVisibility=!0,r.CustomerPhoto="",r.OnLoad(),r.obj.SelectedNodeID=0==n?1:n,r.obj.IsGroup=!1,r.Title=s.a.GetResource(r.obj.CustomerID>0?"Customer_EditCustomer":"Customer_AddCustomer"),r.DisplayName=r.Title,r.ContactVisibility=!1,r.VehicleVisibility=!1;var f=[27300,26696,26695,26646,26647,27299,27292];return r.ScreenObject.SetForceVisibily(f,!1,0),f=[566819,566981,566820,26696,563311],r.ScreenObject.SetForceVisibily(f,!1,1),r.ScreenObject.HeaderFields.sort((function(e,t){return e.Row>t.Row||e.Row==t.Row&&e.Column>t.Column?1:-1})),r}return _createClass(i,[{key:"onSave",value:function(){this.CCMap=new r.AddCCMapViewModel(this)}},{key:"AddCustomerViewModel",value:function(){}},{key:"AssignRowColumns",value:function(){for(var e=0;e<this.ScreenObject.CustomFields.length;e++)this.ScreenObject.CustomFields[e].Row=e/4,this.ScreenObject.CustomFields[e].Column=e%4}},{key:"OnLoad",value:function(){var e=this;0==this.obj.CustomerID?s.a.SessionManager.HideUnathorizedAccess?this.ButtonSave.Visible=s.a.SessionManager.IsActionAssigned(this.CostCenterID,"Create"):this.ButtonSave.Enable=s.a.SessionManager.IsActionAssigned(this.CostCenterID,"Create"):s.a.SessionManager.HideUnathorizedAccess?this.ButtonSave.Visible=s.a.SessionManager.IsActionAssigned(this.CostCenterID,"Update"):this.ButtonSave.Enable=s.a.SessionManager.IsActionAssigned(this.CostCenterID,"Update"),0!=this.obj.CustomerID&&(s.a.SessionManager.HideUnathorizedAccess?this.ButtonConvert.Visible=s.a.SessionManager.IsActionAssigned(this.CostCenterID,"Convert_Account"):this.ButtonConvert.Enable=s.a.SessionManager.IsActionAssigned(this.CostCenterID,"Convert_Account")),this.ScreenObject.LoadScreen_2(this,83);var t=null;if((t=this.ScreenObject.Data.Tables[0].filter((function(e){return"UserName"==e.SysColumnName}))).length>0&&parseInt(t[0].CostCenterColID)>0&&(this.UserName.DBColumnID=parseInt(t[0].CostCenterColID)),(t=this.ScreenObject.Data.Tables[0].filter((function(e){return"Password"==e.SysColumnName}))).length>0&&parseInt(t[0].CostCenterColID)>0&&(this.Password.DBColumnID=parseInt(t[0].CostCenterColID)),(t=this.ScreenObject.Data.Tables[0].filter((function(e){return"OnlineCustType"==e.SysColumnName}))).length>0&&parseInt(t[0].CostCenterColID)>0){this.OnlineCustrType.DBColumnID=parseInt(t[0].CostCenterColID);var i=t[0].UserProbableValues.toString().Trim();if(i.length>0){for(var o=i.split(";"),r=0;r<o.length;r++)this.OnlineCustrType.Items.push(h.d.ComboBoxItems_2(o[r].Replace("''","'"),o[r].Replace("''","'")));this.OnlineCustrType.SelectedValue=this.OnlineCustrType.Items[0].Value}}this.ScreenObject.SetProperties_Static(this.UserName),this.ScreenObject.SetProperties_Static(this.Password),this.ScreenObject.SetProperties_Static(this.OnlineCustrType),this.ScreenObject.CustomTab.Pages.forEach((function(i){"Contacts"==i.Name&&(e.PriContact=new j.a,e.PriContact.QuickAddDContactViewModel_1(e),e.PriContact.IsPrimaryContact=!0,e.PriContact.Visiblebtns=!1,(t=e.ScreenObject.Data.Tables[5].filter((function(e){return"HidePrimaryContact"==e.Name}))).length>0&&!Object(a.j)(t[0].Value)&&(e.PrimaryVisibility=!0),e.PriContact.Countryvisible=!0)})),this.AssignRowColumns(),this.ScreenObject.CustomTab.Pages.forEach((function(t){switch(t.Name){case"Notes":t.Fields.push(e.ViewNotes);break;case"Contacts":t.Fields.push(e.ViewContacts);break;case"Address":t.Fields.push(e.ViewAddress);break;case"Attachments":t.Fields.push(e.ViewAttachments);break;case"History":t.Fields.push(e.ViewAssignHistroy.ListObj);break;case"Activities":t.Fields.push(e.ViewActivities);break;case"Assign":t.Fields.push(e.ViewCCMapping);break;case"Cases":t.Fields.push(e.Cases.CasesGridObj)}})),this.ScreenObject.InitAutoCode(this.ScreenObject.Data.Tables[6],this.obj.IsGroup),(t=this.ScreenObject.Data.Tables[5].filter((function(e){return"CapsLock"==e.Name}))).length>0&&Object(a.j)(t[0].Value)&&(this.CustomerName.IsAllCaps=!0),(t=this.ScreenObject.Data.Tables[5].filter((function(e){return"CapsToFirstLetter"==e.Name}))).length>0&&Object(a.j)(t[0].Value)&&(this.CustomerName.IsFirstLetterCaps=!0),0==this.obj.CustomerID&&this.AutoGenerateCode();var c=s.a.admin.GetLookupDataByType(0).Tables[1].filter((function(e){return 45==e.LookupType}));c.length>0&&h.e.FillComboWithDefaultOption(c,this.CustomerType),this.ScreenObject.Data.Tables[3].forEach((function(t){e.Status.Items.push(h.d.ComboBoxItems_2(t.Status.toString(),t.StatusID.toString()))})),this.Status.SelectedValue="393",this.AddressTypes=new Array,this.AddressTypes.push(h.d.ComboBoxItems_2(s.a.GetResource("Address_Permanent"),"1")),this.AddressTypes.push(h.d.ComboBoxItems_2(s.a.GetResource("Address_Temporary"),"2")),this.SelectedAddressType="1",this.obj.CustomerID>0?(this.LoadEditData(),this.Account.CCID=2,this.Account.TypeID=4,this.Group.CCID=83,this.Group.TypeID=2,this.Group.Enable=!1):(this.obj.GUID="",this.Account.CCID=2,this.Account.TypeID=4,this.Group.CCID=83,this.Group.TypeID=2,this.Group.SelectedValue=1),(t=this.ScreenObject.Data.Tables[5].filter((function(e){return"AccountLinkDimension"==e.Name}))).length>0&&!n.e.IsEmpty(t[0].Value)&&(this.Account.TypeID=parseInt(t[0].Value))}},{key:"LoadEditData",value:function(){this.ds=this.obj.GetCustomerDetails(),this.CustomerID=this.obj.CustomerID,this.CustomerCode.Enable&&(this.CustomerCode.Text=this.obj.CustomerCode),this.ScreenObject.IsAutoCode&&(this.CustomerCode.Enable=!1),this.CustomerName.Enable&&(this.CustomerName.Text=this.obj.CustomerName),this.AliasName.Enable&&(this.AliasName.Text=this.obj.AliasName),this.CustomerType.Enable&&(this.CustomerType.SelectedValue=this.obj.CustomerTypeID.toString()),this.OnlineCustrType.Enable&&(this.OnlineCustrType.SelectedValue=this.obj.OnlineCustType),this.Status.Enable&&(this.Status.SelectedValue=this.obj.StatusID.toString()),this.Account.Enable&&(this.Account.SelectedValue=this.obj.AccountID),this.Group.Enable&&(this.Group.SelectedValue=this.obj.ParentID),this.CreditDays.Enable&&(this.CreditDays.Text=this.obj.CreditDays.toString()),this.CreditLimit.Enable&&(this.CreditLimit.Text=this.obj.CreditLimit.toString()),this.UserName.Text=this.obj.UserName,this.Password.Text=this.obj.Password,this.ScreenObject.LoadCustomFieldsData(this.ds.Tables[1]),this.ScreenObject.LoadCustomFieldsCCData(this.ds.Tables[7]),this.ViewContacts.LoadContacts(this.ds.Tables[2],this.ds.Columns[2]),this.ViewNotes.LoadNotes(this.ds.Tables[3]),this.ViewAddress.LoadContacts(this.ds.Tables[4]),this.ViewAttachments.LoadAttachments(this.ds.Tables[6]),null!=this.PriContact&&this.PriContact.LoadContacts(this.ds.Tables[5]),this.ViewActivities.LoadActivityData(this.ds.Tables[8]),this.ds.Tables.length>8&&this.Cases.LoadCaseGrid(this.ds.Tables[9]),this.ViewCCMapping.LoadData(this.ds.Tables[10],this.ds.Columns[10]),this.ViewAssignHistroy.LoadHistroy_1(83,this.obj.CustomerID);var e=this.ds.Tables[6].filter((function(e){return 1==e.IsProductImage}));e.length>0?(this.PhotoTextVisibility=!1,this.FileID=parseInt(e[0].FileID),this.CustomerPhoto=n.e.GetPath(e[0].GUID.toString()+"."+e[0].FileExtension.toString())):(this.FileID=0,this.PhotoTextVisibility=!0)}},{key:"setvisibility",value:function(){this.CustomerCode.Visible=!0,this.CustomerCode.Enable=!0,this.CustomerName.Visible=!0,this.CustomerName.Enable=!0,this.CustomerType.Visible=!0,this.CustomerType.Enable=!0,this.Status.Enable=!0,this.Status.Visible=!0,this.Group.Visible=!0,this.Group.Enable=!0,this.AliasName.Visible=!0,this.AliasName.Enable=!0,this.CreditDays.Visible=!0,this.CreditLimit.Visible=!0,this.CreditLimit.Enable=!0,this.CreditDays.Enable=!0}},{key:"OnDropPhoto",value:function(e){}},{key:"OnSaveCustomer",value:function(e){if("Contact"==e.toString())this.ContactExpanded=!this.ContactExpanded;else if("Note"==e.toString())this.NoteExpanded=!this.NoteExpanded;else if("Attachment"==e.toString())this.AttachmentExpanded=!this.AttachmentExpanded;else if("NewContact"==e.toString())this.ContactVisibility=!0;else if("Convert"==e.toString()){var t=new O.a;t.ConvertCustomer_1(this),s.a.page.ShowDialog(t,P.a,{ShowCenter:!0})}else if("NewNote"==e.toString())this.NoteVisibility=!0;else if("NewAttachment"==e.toString())this.AttachmentVisibility=!0;else if("NewAddress"==e.toString())this.AddressVisibility=!0;else if("DeletePhoto"==e.toString())this.IsPhotoDelete=!0,this.CustomerPhoto="",this.IsPhotoChanged=!1,this.PhotoTextVisibility=!0,this.DisplayMessage="";else if("MouseDown"==e.toString()||"UploadPhoto"==e.toString()){var i=new x.a;i.PopupAttachmentsViewModel_1(2,this.NodeID,this),s.a.page.ShowDialog(i,M.a,{Title:"Add Attachment"})}else try{var a=this.ScreenObject.ValidateData();if(!n.e.IsEmpty(a))return this.DisplayMessage=a,void(this.MessageVisibility=!0);if(0==this.obj.CustomerID){var o={StrCode:this.obj.CustomerCode,CodePrefix:this.obj.CodePrefix,CodeNumber:this.obj.CodeNumber};if(this.DisplayMessage=this.ScreenObject.SetAutoCodeParams_3(this.CustomerCode,this.ParentId,this.ScreenObject.Data.Tables[6],o),this.obj.CustomerCode=o.StrCode,this.obj.CodePrefix=o.CodePrefix,this.obj.CodeNumber=o.CodeNumber,this.DisplayMessage.length>0)return}else this.obj.CustomerCode=this.CustomerCode.Text;if(this.CustomerName.Enable&&(this.obj.CustomerName=this.CustomerName.Text),this.AliasName.Enable&&(this.obj.AliasName=n.e.IsEmpty(this.AliasName.Text)?this.CustomerName.Text:this.AliasName.Text),this.CustomerType.Enable&&""!=this.CustomerType.SelectedValue&&(this.obj.CustomerTypeID=parseInt(this.CustomerType.SelectedValue)),this.Status.Enable&&(this.obj.StatusID=parseInt(this.Status.SelectedValue)),this.obj.AccountID=this.Account.Enable?this.Account.SelectedValue:parseInt(this.Account.DefaultValue),this.Group.SelectedValue>0&&(this.obj.SelectedNodeID=this.Group.SelectedValue),this.CreditDays.Enable&&null!=this.CreditDays.Text&&""!=this.CreditDays.Text&&(this.obj.CreditDays=parseInt(this.CreditDays.Text)),this.CreditLimit.Enable&&null!=this.CreditLimit.Text&&""!=this.CreditLimit.Text&&(this.obj.CreditLimit=parseFloat(this.CreditLimit.Text)),null!=this.PriContact&&this.PriContact.CheckPrimaryDuplicateContact())return void(this.DisplayMessage="Duplicate Contact[s] in Contacts DB");null!=this.PriContact&&(this.obj.PrimaryContactQuery=this.PriContact.GetXML()),this.obj.CustomFieldsQuery=this.ScreenObject.GetCustomFieldsQuery(),this.obj.CustomCostCenterFieldsQuery=this.ScreenObject.GetCustomCostCenterFieldsQuery(),this.obj.ContactsXML=this.ViewContacts.GetXML(),this.obj.NotesXML=this.ViewNotes.GetXML(),this.obj.AddressXML=this.ViewAddress.GetXML(),this.obj.ActivityXml=this.ViewActivities.ActivitiesXML(),this.obj.UserName=n.e.IsEmpty(this.UserName.Text)?"":this.UserName.Text,this.obj.OnlineCustType=n.e.IsEmpty(this.OnlineCustrType.SelectedValue)?"":this.OnlineCustrType.SelectedValue,this.obj.Password=n.e.IsEmpty(this.Password.Text)?"":this.Password.Text;var r={strXML:""};if(this.DisplayMessage=this.ViewCCMapping.GetXML(r),this.obj.CCXML=r.strXML,!n.e.IsEmpty(this.DisplayMessage))return;if(null!=this.SelectedAddressType&&(this.obj.SelectedAddressType=this.SelectedAddressType),!this.ScreenObject.ValidateDataonSave())return;try{this.obj.AttachmetsXML=this.ViewAttachments.GetXML()}catch(l){return void(this.DisplayMessage=s.a.GetResource("Upload_Path_notExists"))}var c=this.obj.SaveCustomer();this.DisplayMessage=c.Message,this.RetVal=c.RetValue,this.RetVal>0&&(s.a.page.tabs.forEach((function(e){e.instance instanceof L.TreeViewPageComponent&&e.instance.obj&&83==e.instance.CostCenterID&&(e.instance.obj.SetFocusNodeID=e.instance.obj.SelectedNode.Id,e.instance.Refresh())})),this.Cases.CasesGridObj.Clear(),this.CustomerName.Text="",this.CustomerType.Text="",this.CustomerPhoto="",this.PhotoTextVisibility=!0,this.ScreenObject.Clear(),this.ViewContacts.ContactsListObj.Clear(),this.ViewAddress.ContactsListObj.Clear(),this.ViewNotes.NotesListObj.Clear(),this.ViewAttachments.AttachmentsList.Clear(),this.VehicleList.Clear(),this.ViewContacts.DeletedContacts.Clear(),this.ViewNotes.DeletedNotes.Clear(),this.ViewAddress.DeletedAddress.Clear(),this.ViewAttachments.DeletedAttachments.Clear(),this.ViewCCMapping.Clear(),null!=this.PriContact&&this.PriContact.ClearFields(),this.AutoGenerateCode(),this.Group.SelectedValue=this.obj.ParentID,this.Status.SelectedValue="393",this.ViewActivities.ActivityGridDataObj.Clear(),this.ViewAssignHistroy.ListObj.Clear(),this.CustomerType.SelectedValue=this.obj.CustomerTypeID.toString(),this.ParentId>0&&(this.Group.SelectedValue=this.obj.ParentID,this.CustomerType.SelectedValue=this.obj.CustomerTypeID.toString(),this.Status.SelectedValue="393"),this.ViewCCMapping.Clear(),null!=this.ViewCCMapping.TempData&&this.ViewCCMapping.TempData.Clear(),this.CCMapVisibility=!1,this.TempID=-0),Logger.InfoLog("AddCustomerViewModel::Exiting OnSaveCustomer")}catch(a){Logger.ErrorLog("AddCustomerViewModel:: OnSaveCustomer"+a.stack)}}},{key:"AutoGenerateCode",value:function(){0==this.obj.CustomerID&&this.ScreenObject.SetAutoCode(this.CustomerCode,this.obj.IsGroup,this.ParentId,this.ScreenObject.Data.Tables[6])}},{key:"OnAddContact",value:function(){this.Contact=new j.a,this.Contact.QuickAddDContactViewModel_1(this)}},{key:"OnAddAddress",value:function(){this.Address=new f.a,this.Address.AddAddressViewModel_2(this)}},{key:"OnAddNote",value:function(){this.Note=new g.AddNoteViewModel,this.Note.AddNoteViewModel_2(this)}},{key:"OnAddAttachment",value:function(){this.Attachment=new S.AddAttachmentViewModel,this.Attachment.AddAttachmentViewModel_2(this)}}]),i}(o.b)},LCKI:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var s=i("Do2H"),n=i("Lp6j"),a=i("ScVY"),o=i("wlFP"),r=i("EggS"),c=i("r2z3"),l=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this)).obj=new r.a,e.CCID=0,e.CCNodeID=0,e.Ret=0,e.AccountContactVisible=o.a.PactCheckBoxData_1("AccountContactVisible",2),e.AccountAddressVisible=o.a.PactCheckBoxData_1("AccountAddressVisible",2),e.AccountAssignVisible=o.a.PactCheckBoxData_1("AccountAssignVisible",2),e.Account=o.a.PactCheckBoxData_1("Account",86),e.Product=o.a.PactCheckBoxData_1("Product",86),e.Product.Label=s.a.GetResource("Product"),e.Account.Label=s.a.GetResource("CRMLead_Account"),e.AccountContactVisible.Label=s.a.GetResource("CRMLead_CopyContacts"),e.AccountAddressVisible.Label="Copy Address",e.AccountAssignVisible.Label="Copy Assign",e}return _createClass(i,[{key:"ConvertCustomer_1",value:function(e){this.parent=e,this.obj.CustomerID=this.parent.CustomerID,this.ds=this.obj.GetCustomerDetails(),this.CCID=83,this.CCNodeID=this.parent.CustomerID,this.Title=this.DisplayName=s.a.GetResource("CRMLead_ConvertTo"),this.Account.Enable=!!n.e.IsEmpty(this.ds.Tables[0][0].Mode)||"2"!=this.ds.Tables[0][0].Mode.toString(),0!=this.ds.Tables[11].length&&(this.Account.IsChecked=!0,this.Account.Enable=!1),0!=this.ds.Tables[11].length&&0!=this.ds.Tables[13].length&&(this.AccountContactVisible.IsChecked=!0,this.AccountContactVisible.Enable=!1,this.AccountAddressVisible.Enable=!1,this.AccountAssignVisible.Enable=!1),0!=this.ds.Tables[11].length&&0!=this.ds.Tables[14].length&&(this.AccountAddressVisible.IsChecked=!0),0!=this.ds.Tables[11].length&&0!=this.ds.Tables[15].length&&(this.AccountAssignVisible.IsChecked=!0),this.AccountContactVisible.Visible=!0,this.AccountAddressVisible.Visible=!0,this.AccountAssignVisible.Visible=!0,s.a.SessionManager.HideUnathorizedAccess&&(this.Account.Visible=!!s.a.SessionManager.IsActionAssigned(83,"Convert_Account")),this.Product.Visible=!1}},{key:"ConvertCustomer_2",value:function(e){var t={};this.CCParent=e,t.CostCenterID=this.CCParent.CostCenterID,t.NodeID=this.CCParent.NodeID,this.ds=t.GetCostCenterDetails(0),this.DisplayName=s.a.GetResource("CRMLead_ConvertTo"),this.CCID=this.CCParent.CostCenterID,this.CCNodeID=this.CCParent.NodeID,this.AccountContactVisible.Visible=!1,this.AccountAddressVisible.Visible=!1,this.AccountAssignVisible.Visible=!1,0!=this.ds.Tables[9].length&&(this.Product.IsChecked=!0,this.Product.Enable=!1),s.a.SessionManager.HideUnathorizedAccess&&(this.Product.Visible=!!s.a.SessionManager.IsActionAssigned(145,"Convert_Product")),this.Account.Visible=!1}},{key:"OnSave",value:function(e){if("Cancel"==e)s.a.page.HideDialog();else{var t=[];t.push(this.CCID),t.push(this.CCNodeID),t.push(this.Account.IsChecked),t.push(this.AccountContactVisible.IsChecked),t.push(this.AccountAddressVisible.IsChecked),t.push(this.AccountAssignVisible.IsChecked),t.push(this.Product.IsChecked);var i=c.a.ConvertLead_2(t);this.DisplayMessage=i.Message,this.Ret=i.RetValue,this.Ret>0&&(this.Product.Enable=!this.Product.IsChecked,this.Account.Enable=!this.Account.IsChecked,this.AccountContactVisible.Enable=!this.AccountContactVisible.IsChecked,this.AccountAddressVisible.Enable=!this.AccountAddressVisible.IsChecked,this.AccountAssignVisible.Enable=!this.AccountAssignVisible.IsChecked)}}}]),i}(a.b)},MMwJ:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var s=i("Do2H"),n=i("Lp6j"),a=i("eQJW"),o=i("ScVY"),r=i("NkMH"),c=i("VxiT"),l=i("EQd/"),h=i("c6C+"),u=i("RJs6"),d=i("xnJf"),C=i("OvA8"),b=i("0/4Q"),m=i("n56n"),D=i("W7OG"),p=i("DKUf"),f=i("CQvG"),I=i("4HhE"),g=i("JIg3"),S=i("jgdN"),V=i("EPb/"),y=i("CXnT"),w=i("N3wO"),T=i("utDZ"),v=function(e){_inherits(i,e);var t=_createSuper(i);function i(e,n){var o;_classCallCheck(this,i),(o=t.call(this)).NextPreviousVisibility=!0,o.Productid=0,o.CampaignID=0,o.CID=0,o.CostCenterID=0,o.DocumentType=0,o.ApprovalsVisibility=!1,o.obj=new w.a,o.ScreenObject=new c.a,o.Code=new l.a(24355),o.txtName=new l.d(24356),o.ExpectedResponse=new l.d(24360),o.Offer=new l.d(24361),o.Status=new b.e(24357),o.Type=new b.e(24358),o.Venue=new b.e(53359),o.Vendor=new m.b(24359),o.Group=new m.b(25893),o.parentID=0,o.ActVisibility=!1,o.NodeID=0,o.Ret=0,o.Dset=null,o.DefaultCustomeratStaff=-1;try{o.ScreenObject.LoadScreen_2(_assertThisInitialized(o),88),o.DisplayName=s.a.GetResource("Camp_Title"),o.Title=s.a.GetResource("Camp_Title"),o.DisplayMessage="",o.LoadStaticData(),o.NodeID=e,o.CampaignID=e,o.CID=e,o.CostCenterID=88,o.CampaignID=o.CID,o.obj.CampaignId=e,o.LeadsProduct=new D.a(_assertThisInitialized(o),88),o.ViewOrganizationViewModel=new T.a(_assertThisInitialized(o)),o.ViewNotes=new u.a(_assertThisInitialized(o)),o.ViewActivities=new f.b(_assertThisInitialized(o)),o.Activities=new p.a(_assertThisInitialized(o),!1),o.ViewActivities.Activities=o.Activities,o.ViewAttachments=new C.ViewAttachmentViewModel(_assertThisInitialized(o)),o.ButtonEmail=new r.a,o.ButtonApprove=new r.a,0!=e&&(s.a.SessionManager.HideUnathorizedAccess?o.ButtonEmail.Visible=s.a.SessionManager.IsActionAssigned(o.CostCenterID,"Email"):o.ButtonEmail.Enable=s.a.SessionManager.IsActionAssigned(o.CostCenterID,"Email"),s.a.SessionManager.HideUnathorizedAccess?o.ButtonApprove.Visible=s.a.SessionManager.IsActionAssigned(o.CostCenterID,"Approved"):o.ButtonApprove.Enable=s.a.SessionManager.IsActionAssigned(o.CostCenterID,"Approved")),o.OnLoad(),o.Vendor.SelectedValue=86,o.parentID=n,o.Group.Visible=!0,o.Group.Enable=!0,o.Group.SelectedValue=0==o.parentID?1:o.parentID,o.ScreenObject.InitAutoCode(o.ScreenObject.Data.Tables[6],!1),0==e?(o.AutoGenerateCode(),o.Group.CCID=88,o.Group.TypeID=o.Vendor.TypeID=1,o.CampaignStatus="UnApproved",o.Vendor.CCID=83,o.NextPreviousVisibility=!1,o.ButtonApprove.Visible=!1):(o.Group.CCID=88,o.Group.TypeID=o.Vendor.TypeID=1,o.Vendor.CCID=83,o.LoadEditData(),o.Title=s.a.GetResource("Camp_Edit"),o.DisplayName=s.a.GetResource("Camp_Edit"));var h=o.ScreenObject.Data.Tables[5].filter((function(e){return"CapsLock"==e.Name}));h.length>0&&Object(a.j)(h[0].Value)&&(o.txtName.IsAllCaps=!0),(h=o.ScreenObject.Data.Tables[5].filter((function(e){return"CapsToFirstLetter"==e.Name}))).length>0&&Object(a.j)(h[0].Value)&&(o.txtName.IsFirstLetterCaps=!0),(h=o.ScreenObject.Data.Tables[5].filter((function(e){return"DefaultStaffCusomter"==e.Name}))).length>0&&""!=h[0].Value.toString()&&(o.DefaultCustomeratStaff=parseInt(h[0].Value)),o.DupCode=o.Code.Text}catch(d){Logger.ErrorLog("AddEditCampaignViewModel:: AddEditCampaignViewModel",d)}return Logger.InfoLog("AddEditCampaignViewModel::Exiting AddEditCampaignViewModel"),o}return _createClass(i,[{key:"OnAddNote",value:function(){this.Note=new h.AddNoteViewModel,this.Note.AddNoteViewModel_2(this)}},{key:"OnAddAttachment",value:function(){this.Attachment=new d.AddAttachmentViewModel,this.Attachment.AddAttachmentViewModel_2(this)}},{key:"LoadEditData",value:function(){this.Dset=this.obj.GetCompaignDetails(),this.Code.Text=this.obj.Code,this.txtName.Text=this.obj.Name,this.Status.SelectedValue=this.obj.StatusId.toString(),this.Type.SelectedValue=this.obj.TypeId.toString(),this.Venue.SelectedValue=this.obj.Venue.toString(),this.Vendor.SelectedValue=this.obj.vendorid,this.ExpectedResponse.Text=this.obj.ExpectedResponce,this.Offer.Text=this.obj.Offer,this.Group.SelectedValue=this.obj.groupid,this.CampaignStatus=""!=this.Dset.Tables[1][0].IsApproved.toString()&&Object(a.j)(this.Dset.Tables[1][0].IsApproved)?"Approved":"UnApproved",this.Dset.Tables.length>13&&this.ScreenObject.LoadCustomFieldsData(this.Dset.Tables[14]),this.LoadCustomFieldsData(this.Dset.Tables[1],this.Dset.Columns[1]),this.Dset.Tables.length>11&&this.LeadsProduct.LoadProductData(this.Dset.Tables[12],this.Dset.Columns[12]),this.ScreenObject.LoadCustomFieldsCCData(this.Dset.Tables[3]),this.Responces.LoadResponseData(this.Dset.Tables[4]),this.CActivities.LoadActivityData(this.Dset.Tables[5]),this.ViewActivities.LoadActivityData(this.Dset.Tables[23]),this.ViewDemoKit.LoadData(this.Dset.Tables[11]),this.Dset.Tables.length>12&&this.ViewOrganizationViewModel.LoadData(this.Dset.Tables[13]),this.ViewApprovals.LoadData(this.Dset.Tables[16]),this.Dset.Tables.length>14&&this.ViewStaffViewModel.LoadData(this.Dset.Tables[15]),this.LoadBudgetData(this.Dset.Tables[5],this.Dset.Columns[5]),null!=this.Dset&&this.Dset.Tables.length>16&&this.Dset.Tables[17].length>0&&this.ViewNotes.LoadNotes(this.Dset.Tables[17]),null!=this.Dset&&this.Dset.Tables.length>17&&this.Dset.Tables[18].length>0&&this.ViewAttachments.LoadAttachments(this.Dset.Tables[18]),null!=this.Dset&&this.Dset.Tables.length>19&&this.Dset.Tables[20].length>0&&this.ViewSpeakers.LoadData(this.Dset.Tables[20]),null!=this.Dset&&this.Dset.Tables.length>23&&this.Dset.Tables[24].length>0&&this.ViewInvites.LoadData(this.Dset.Tables[24]),null!=this.Dset&&this.Dset.Tables.length>24&&this.Dset.Tables[25].length>0&&this.ViewEventActivities.LoadActivityData(this.Dset.Tables[25]),Logger.InfoLog("AddEditCampaignViewModel::Exiting LoadEditData")}},{key:"ClearTabsData",value:function(){this.LeadsProduct.ProductGridObj.Clear(),this.Responces.grdata.Rows.Clear(),this.Responces.grdata.Rows.Clear(),this.ViewActivities.ActivityGridDataObj.Clear(),this.ViewDemoKit.DemoKitData.Rows.Clear(),this.CActivities.GridData.Rows.Clear(),this.Responces.grdata.Rows.Clear(),this.ViewOrganizationViewModel.OrganizationData.Rows.Clear(),this.ViewApprovals.ApprovalsData.Rows.Clear(),this.ViewSpeakers.SpeakersData.Rows.Clear(),this.ViewStaffViewModel.OrganizationData.Rows.Clear(),this.ViewNotes.NotesListObj.Clear(),this.ViewAttachments.AttachmentsListObj.Clear(),this.ViewInvites.InvitesData.Rows.Clear(),this.ViewEventActivities.ActivityData.Rows.Clear(),this.ViewEventActivities.ActivityGridDataObj.Clear()}},{key:"LoadCustomFieldsData",value:function(e,t){if(null!=e&&e.length>0)try{this.ScreenObject.CustomTab.Pages.forEach((function(i){i.Fields.forEach((function(i){i instanceof I.c&&null!=i.DBColumnName&&t.Contains(i.DBColumnName)&&(i instanceof l.d?i.Text=n.e.String(e[0][i.DBColumnName]):i instanceof b.e?i.SelectedValue=n.e.String(e[0][i.DBColumnName]):i instanceof g.c||i instanceof g.a?n.e.isValidDate(e[0][i.DBColumnName])&&(i.Date=new Date(e[0][i.DBColumnName])):i instanceof S.a?i.Text=e[0][i.DBColumnName].toString():i instanceof m.b&&n.e.IsNum(e[0][i.DBColumnName])&&(i.SelectedValue=parseInt(e[0][i.DBColumnName])))}))}))}catch(i){Logger.ErrorLog("ControlGenerator:: LoadCustomFieldsData : "+i.stack)}}},{key:"LoadBudgetData",value:function(e,t){if(Logger.InfoLog("ControlGenerator:: Inside LoadCustomFieldsData"),null!=e&&e.length>0){var i=0,n=0,o=0,r="";t.Contains("BudgetedAmount")?r="BudgetedAmount":t.Contains("BudgetAmount")&&(r="BudgetAmount"),e.forEach((function(e){t.Contains(r)&&Object(a.j)(e.CloseStatus)&&(i+=parseFloat(e[r]))}));try{this.ScreenObject.CustomTab.Pages.forEach((function(e){e.Fields.forEach((function(e){e instanceof I.c&&null!=e.DBColumnName&&25075==e.DBColumnID&&e instanceof l.d&&(e.Text=i.ToString("N"+s.a.SessionManager.Preferences.DecimalsinAmount)),e instanceof I.c&&null!=e.DBColumnName&&24366==e.DBColumnID&&e instanceof l.d&&(n=null!=e.Text&&""!=e.Text?parseFloat(e.Text):0)}))})),i>0&&n>=0&&(o=n-i),this.ScreenObject.CustomTab.Pages.forEach((function(e){e.Fields.forEach((function(e){e instanceof I.c&&null!=e.DBColumnName&&25076==e.DBColumnID&&e instanceof l.d&&(e.Text=o.ToString("N"+s.a.SessionManager.Preferences.DecimalsinAmount))}))}))}catch(c){Logger.ErrorLog("ControlGenerator:: LoadCustomFieldsData : ",c)}}}},{key:"LoadStaticData",value:function(){var e=this;Logger.InfoLog("AddEditCampaignViewModel::Entering LoadStaticData");var t=this.obj.GetCompaignDetails();b.e.FillComboWithDefaultOption(t.Tables[4],this.Type),b.e.FillComboWithDefaultOption(t.Tables[17],this.Venue),this.ScreenObject.Data.Tables[3].forEach((function(t){e.Status.Items.push(b.d.ComboBoxItems_2(t.Status.toString(),t.StatusID.toString()))})),this.Status.SelectedValue=this.Status.Items[0].Value.toString()}},{key:"AutoGenerateCode",value:function(){0==this.CID&&this.ScreenObject.SetAutoCode(this.Code,!1,this.parentID,this.ScreenObject.Data.Tables[6])}},{key:"ClearFields",value:function(){this.txtName.Text="",this.Offer.Text="",this.ExpectedResponse.Text=""}},{key:"OnLoad",value:function(){this.AssignRowColumns();for(var e=this.ScreenObject.CustomTab.Pages.length-1;e>=0;e--){var t=this.ScreenObject.CustomTab.Pages[e];switch(t.Name){case"Products":t.Fields.push(this.LeadsProduct);break;case"Response":t.Fields.push(this.Responces);break;case"Notes":t.Fields.push(this.ViewNotes);break;case"Attachments":t.Fields.push(this.ViewAttachments);break;case"Campaign Activities":t.Fields.push(this.CActivities);break;case"Activities":t.Fields.push(this.ViewActivities);break;case"CampaignEvents":t.Fields.push(this.ViewEventActivities);break;case"Event Requirements":t.Fields.push(this.ViewDemoKit);break;case"Speakers":t.Fields.push(this.ViewSpeakers);break;case"Organizer":t.Fields.push(this.ViewOrganizationViewModel);break;case"Staff":t.Fields.push(this.ViewStaffViewModel);break;case"Approvals":t.Fields.push(this.ViewApprovals);break;case"Invitees":t.Fields.push(this.ViewInvites)}}}},{key:"AssignRowColumns",value:function(){var e;e=this.ScreenObject.CustomFields.length;for(var t=0;t<e;t++)this.ScreenObject.CustomFields[t].Row=t/4,this.ScreenObject.CustomFields[t].Column=t%4}},{key:"onTabSelectionChanged",value:function(e){}},{key:"getFields",value:function(){var e,t=this,i="";return this.ScreenObject.CustomTab.Pages.forEach((function(s){s.Fields.forEach((function(s){s instanceof I.c&&null!=s.DBColumnName&&0==s.DBColumnName.toLowerCase().Contains("alpha")&&0==s.DBColumnName.toLowerCase().Contains("ccnid")&&(s instanceof l.d?"ActualRevenue"!=s.DBColumnName&&"NetRevenue"!=s.DBColumnName&&"TotalCostofCampaingActivities"!=s.DBColumnName&&"Balance"!=s.DBColumnName&&(e=s.Text,n.e.IsEmpty(e)&&(e=""),i+=s.DBColumnName+"='"+e.Replace("'","''")+"',"):s instanceof b.e?(e=s.SelectedValue,n.e.IsEmpty(e)&&(e=""),i+=s.DBColumnName+"='"+e+"',"):s instanceof g.c?(e=s.Date.toString(),n.e.IsEmpty(e)&&(e=""),""!=e&&(e=new Date(e).ToString("dd/MMM/yyyy")),i+=s.DBColumnName+"=Convert(float,Convert(DateTime,'"+e+"')),"):s instanceof g.a?(e=s.Date.ToString("dd/MMM/yyyy"),n.e.IsEmpty(e)&&(e=""),i+=s.DBColumnName+"=Convert(float,Convert(DateTime,'"+e+"')),"):s instanceof S.a?(e=s.Text,n.e.IsEmpty(e)&&(e=""),i+=s.DBColumnName+"='"+e+"',"):s instanceof m.b&&(t.oPactCombo=s,i+=t.oPactCombo.DBColumnName+"='"+t.oPactCombo.SelectedValue+"',"))}))})),i.toString()}},{key:"OnSave",value:function(e){try{if("Assign"==e.toString());else if("Approve"==e.toString()){var t=new V.a(this,88,this.CID);s.a.page.ShowDialog(t,y.a,{ShowCenter:!0})}else if("Save"==e.toString()){var i=this.ScreenObject.ValidateData();if(!n.e.IsEmpty(i))return void(this.DisplayMessage=i);if(this.obj.CampaignId=this.CID,0==this.obj.CampaignId){var a={StrCode:this.obj.Code,CodePrefix:this.obj.CodePrefix,CodeNumber:this.obj.CodeNumber};if(this.DisplayMessage=this.ScreenObject.SetAutoCodeParams_3(this.Code,this.parentID,this.ScreenObject.Data.Tables[6],a),this.obj.Code=a.StrCode,this.obj.CodePrefix=a.CodePrefix,this.obj.CodeNumber=a.CodeNumber,this.DisplayMessage.length>0)return}else this.obj.Code=this.Code.Text;if(this.obj.Name=this.txtName.Text,this.obj.TypeId=this.Type.Enable&&""!=this.Type.SelectedValue?parseInt(this.Type.SelectedValue):0,this.obj.Venue=this.Venue.Enable&&""!=this.Venue.SelectedValue?parseInt(this.Venue.SelectedValue):0,this.obj.StatusId=parseInt(this.Status.SelectedValue),this.obj.vendorid=this.Vendor.SelectedValue,this.obj.selectedNodeid=this.Group.SelectedValue,this.obj.ExpectedResponce=this.ExpectedResponse.Text,this.obj.Offer=this.Offer.Text,this.obj.TabData=this.getFields(),this.obj.CustomCostCenterFieldsQuery=this.ScreenObject.GetCustomCostCenterFieldsQuery(),this.obj.CustomFieldsQuery=this.ScreenObject.GetCustomFieldsQuery(),this.obj.ProductXML=this.LeadsProduct.GetProductXML(),this.obj.ResponseXML=this.Responces.GetResponseXML(),this.obj.CActivityXML=this.CActivities.GetActivityXML(),this.obj.SpeakersXML=this.ViewSpeakers.GetXML(),this.obj.DemoKitXML=this.ViewDemoKit.GetXML(),this.obj.OrganizationXML=this.ViewOrganizationViewModel.GetXML(),this.obj.InvitesXML=this.ViewInvites.GetXML(),this.obj.ApprovalsXML=this.ViewApprovals.GetXML(),this.obj.StaffXML=this.ViewStaffViewModel.GetXML(),this.obj.NoteXML=this.ViewNotes.GetXML(),this.obj.AttachmentXML=this.ViewAttachments.GetXML(),this.obj.ActivityXML=this.ViewActivities.ActivitiesXML(),this.obj.EventsXML=this.ViewEventActivities.ActivitiesXML(),!this.ScreenObject.ValidateDataonSave())return;var o=this.obj.SaveCampaign();this.Ret=o.RetValue,this.DisplayMessage=o.Message,this.MessageVisibility=!0,this.Ret>0&&(this.ClearFields(),this.AutoGenerateCode(),this.Responces.grdata.Clear(),this.CActivities.GridData.Clear(),this.ViewInvites.InvitesData.Clear(),this.LeadsProduct.ClearGrid(),this.ViewOrganizationViewModel.OrganizationData.Clear(),this.ViewStaffViewModel.OrganizationData.Clear(),this.ViewApprovals.ApprovalsData.Clear(),this.ViewSpeakers.SpeakersData.Clear(),this.ViewDemoKit.DemoKitData.Clear(),this.ViewEventActivities.ActivityData.Clear(),this.ViewActivities.ActivityGridDataObj.Clear(),this.ViewActivities.ActivityGridDataObj.Clear(),this.ScreenObject.Clear(),this.ViewNotes.NotesListObj.Clear(),this.ViewAttachments.AttachmentsList.Clear())}else e.toString()}catch(i){Logger.ErrorLog("AddEditCampaignViewModel:: OnCellEditEnding"+i.stack)}Logger.InfoLog("AddEditCampaignViewModel::Exiting OnSave")}},{key:"GetRecords",value:function(e){var t=0,i=!1;"NEXT"==e.toString().toUpperCase()?i=!0:"PREVIOUS"==e.toString().toUpperCase()&&(i=!1);var n=s.a.common.GetNextPreviousRecords(this.CostCenterID,this.NodeID,i,0,0);null!=n&&n.Tables[0].length>0&&((t=parseInt(n.Tables[0][0][0]))>0&&(this.NodeID=t,this.obj.CampaignId=t,this.CID=t,this.Group.CCID=88,this.Group.TypeID=this.Vendor.TypeID=1,this.Vendor.CCID=83,this.ClearTabsData(),this.LoadEditData(),this.Title=s.a.GetResource("Camp_Edit"),this.DisplayName=s.a.GetResource("Camp_Edit")))}}]),i}(o.b)},RQ5z:function(e,t,i){"use strict";i.r(t),i.d(t,"DocumentViewerViewModel",(function(){return f}));var s=i("Do2H"),n=i("Lp6j"),a=i("8iaB"),o=i("dH+5"),r=i("mvPR"),c=i("1Cra"),l=i("CUWK"),h=i("P6ee"),u=i("Q0PM"),d=i("c6GQ"),C=i("XR/+"),b=i("Hzm0"),m=i("MMwJ"),D=i("EuF+"),p=i("n56n"),f=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this)).oDocPayroll=null,e.oDocumentMap=null,e.ReportObj=null,e.RowIndex=0,e.TotalRows=0,e.CurrentDocument=null,e.CurrentDocumentPrefix=null,e.IsDocumentFound=!1,e.Grid=null,e.Grid_Row=null,e.ListIndex=0,e.DimensionID=0,e.NodeID=0,e.Dimension=null,e.PKColumn="",e.ButtonsVisibility=!1,e.IsPopup=!1,e.Screen=[],e}return _createClass(i,[{key:"DocumentViewerViewModel_Report",value:function(e,t,i){if(this.args=t,this.ReportObj=e,this.DimensionID=i,this.ButtonsVisibility=!0,this.RowIndex=this.ReportObj.Data.indexOf(t.Row),this.TotalRows=e.Data.length,t.Column.LinkType==o.a.Document||t.Column.LinkType==o.a.DocumentID||t.Column.LinkType==o.a.DocumentDetailID||null!=t.Row.Cells[t.ColumnIndex].CellAppearance&&"LINK_DOCUMENT"==t.Row.Cells[t.ColumnIndex].CellAppearance.ColumnType){if(this.Title="Documents",this.DisplayName="Documents",-2==t.Column.LinkDimension&&(this.Title=this.DisplayName=s.a.GetResource("LinkMap")),!n.e.IsEmptySpace(t.Row.Cells[t.ColumnIndex].Text)){if(this.VoucherNoList=t.Row.Cells[t.ColumnIndex].Text.split(","),null!=t.Content){for(this.ListIndex=0;this.ListIndex<this.VoucherNoList.length&&this.VoucherNoList[this.ListIndex].Trim()!=t.Content;this.ListIndex++);this.ListIndex==this.VoucherNoList.length&&(this.ListIndex=0)}this.IsDocumentFound=this.LoadDocument(this.VoucherNoList[this.ListIndex],"IsFirstClick")}}else t.Column.LinkType==o.a.Dimension&&(this.Title="Dimensions",this.DisplayName="Dimensions",0==t.Column.LinkDimension?(this.SetPKColumn(),this.NodeID=n.e.Int(t.Row.DataRow[this.PKColumn]),0!=this.NodeID?this.IsDocumentFound=this.LoadDimension(this.NodeID):Logger.ErrorLog("Column not found : "+this.PKColumn)):n.e.IsEmptySpace(t.Row.Cells[t.ColumnIndex].Text)||(this.DimensionID=t.Column.LinkDimension,this.IsDocumentFound=this.LoadDimensionByText(t.Row.Cells[t.ColumnIndex].Text)));Logger.InfoLog("DocumentViewerViewModel:: Entering ReOrderLevelNewViewModel")}},{key:"DocumentViewerViewModel_Document",value:function(e,t,i){this.Grid=e,this.Grid_Row=t,this.Gird_SortMemberPath=i,this.Title="UnApproved Documents",this.DisplayName="UnApproved Documents",this.ButtonsVisibility=!0,this.RowIndex=e.Table.indexOf(t),this.TotalRows=e.Table.length,this.IsDocumentFound=this.LoadDocument(t[i].toString(),"IsFirstClick"),Logger.InfoLog("DocumentViewerViewModel:: Entering ReOrderLevelNewViewModel")}},{key:"DocumentViewerViewModel_ByVoucherNo",value:function(e){this.IsDocumentFound=this.LoadDocument(e,"IsFirstClick"),this.DisplayName=null==this.Document||n.e.IsEmpty(this.Document.DisplayName)?"Documents":this.Document.DisplayName}},{key:"SetPKColumn",value:function(){this.PKColumn=this.args.Column.ID+"_ID",this.args.Row.DataRow[this.PKColumn]||(this.ReportObj.StaticReportType>=1&&this.ReportObj.StaticReportType<=12?"AccountCode"!=this.args.Column.ID&&"AccountName"!=this.args.Column.ID||(this.DimensionID=2,this.PKColumn="AccountID"):13!=this.ReportObj.StaticReportType&&14!=this.ReportObj.StaticReportType&&15!=this.ReportObj.StaticReportType&&16!=this.ReportObj.StaticReportType||"ProductCode"!=this.args.Column.ID&&"ProductName"!=this.args.Column.ID||(this.DimensionID=3,this.PKColumn="ProductID"))}},{key:"OnButtonClick",value:function(e){var t,i=!1;if(this.DisplayMessage="","PREVIOUS"==e){if(null!=this.ReportObj){for(this.RowIndex--;this.RowIndex>=0;this.RowIndex--)if(null!=this.Document||null!=this.oDocumentMap){if(this.ListIndex>0?(this.RowIndex++,i=!1):i=!0,this.ReportObj.Data[this.RowIndex].Type==r.f.Detail)for(i&&(t=this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text,n.e.IsEmpty(t)||this.CurrentVoucherNo==t?(this.VoucherNoList=[],this.ListIndex=0):(this.VoucherNoList=t.split(","),this.ListIndex=this.VoucherNoList.length)),this.ListIndex--;this.ListIndex>=0;this.ListIndex--)if(this.VoucherNoList[this.ListIndex]=this.VoucherNoList[this.ListIndex].Trim(),!n.e.IsEmpty(this.VoucherNoList[this.ListIndex])&&this.CurrentVoucherNo!=this.VoucherNoList[this.ListIndex]&&this.LoadDocument(this.VoucherNoList[this.ListIndex]))return}else if(this.ReportObj.Data[this.RowIndex].Type==r.f.Detail)if(0==this.args.Column.LinkDimension){var a=n.e.Int(this.ReportObj.Data[this.RowIndex].DataRow[this.PKColumn]);if(a>0&&this.CurrentVoucherNo!=a.toString()&&this.LoadDimension(a))break}else n.e.IsEmptySpace(this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text)||this.CurrentVoucherNo==this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text||(this.IsDocumentFound=this.LoadDimensionByText(this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text))}else if(null!=this.Grid)for(this.RowIndex--;this.RowIndex>=0&&(t=this.Grid.Table[this.RowIndex][this.Gird_SortMemberPath].toString(),n.e.IsEmpty(t)||this.CurrentVoucherNo==t||!this.LoadDocument(t));this.RowIndex--);-1==this.RowIndex&&(this.RowIndex=0,this.DisplayMessage=null!=Document?"No Previous Documents":"No Previous Records")}else if("NEXT"==e){if(null!=this.ReportObj){for(this.RowIndex++;this.RowIndex<this.ReportObj.Data.length;this.RowIndex++)if(null!=Document||null!=this.oDocumentMap)if(this.VoucherNoList.length-1>this.ListIndex?(this.RowIndex--,i=!1):(i=!0,this.ListIndex=-1),this.ReportObj.Data[this.RowIndex].Type==r.f.Detail){for(i&&(t=this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text,this.VoucherNoList=n.e.IsEmpty(t)||this.CurrentVoucherNo==t?[]:t.split(",")),this.ListIndex++;this.ListIndex<this.VoucherNoList.length;this.ListIndex++)if(this.VoucherNoList[this.ListIndex]=this.VoucherNoList[this.ListIndex].Trim(),!n.e.IsEmpty(this.VoucherNoList[this.ListIndex])&&this.CurrentVoucherNo!=this.VoucherNoList[this.ListIndex]&&this.LoadDocument(this.VoucherNoList[this.ListIndex]))return}else this.VoucherNoList=[];else if(this.ReportObj.Data[this.RowIndex].Type==r.f.Detail)if(0==this.args.Column.LinkDimension){var c=n.e.Int(this.ReportObj.Data[this.RowIndex].DataRow[this.PKColumn]);if(c>0&&this.CurrentVoucherNo!=c.toString()&&this.LoadDimension(c))break}else if(!n.e.IsEmptySpace(this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text)&&this.CurrentVoucherNo!=this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text&&(this.IsDocumentFound=this.LoadDimensionByText(this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text),this.IsDocumentFound))return}else if(null!=this.Grid)for(this.RowIndex++;this.RowIndex<this.Grid.Table.length&&(t=this.Grid.Table[this.RowIndex][this.Gird_SortMemberPath].toString(),n.e.IsEmpty(t)||this.CurrentVoucherNo==t||!this.LoadDocument(t));this.RowIndex++);this.RowIndex==this.TotalRows&&(this.RowIndex--,this.DisplayMessage=null!=Document?"No Next Documents":"No Next Records")}else"CLOSE"==e&&(this.args.Column.LinkType==o.a.Document&&-3==this.args.Column.LinkDimension?s.a.page.HideDialog():s.a.page.removeTab(this))}},{key:"LoadDocument",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.CurrentVoucherNo=e,null!=this.args&&-2==this.args.Column.LinkDimension){if(e.length>0)return null==this.oDocumentMap||(this.oDocumentMap.VoucherNo=e.Trim(),this.oDocumentMap.OnButtonClick("Submit")),!0}else{var a=s.a.report.GetDocumentDetailsByVoucherNo(e.Trim());if(n.e.Int(a.obj)>0){var o;o=a.Tables[0].length>0?a.Tables[0][0]:a.Tables[1][0];try{if(40054==parseInt(o.CostCenterID))this.Title="Monthly Payroll",this.DisplayName="Monthly Payroll",this.ButtonsVisibility=!1;else if(40095==parseInt(o.CostCenterID))this.Title="Final Settlement",this.DisplayName="Final Settlement",this.ButtonsVisibility=!1;else{if(this.CurrentDocument!=o.CostCenterID.toString()||this.CurrentDocumentPrefix!=o.DocPrefix.toString()){var r=new c.AddEditDocumentViewModel(parseInt(o.CostCenterID),o.DocumentName.toString(),!0);if(r.ScreenObject.IsAccessDenied)return"IsFirstClick"==i&&alert("Document Not Assigned."),!1;this.Document=r,0==this.Screen.length?this.Screen.push(this.Document):this.Screen[0]=this.Document}else 0==this.Screen.length&&this.Screen.push(this.Document);this.DisplayName=this.Document.Title,this.Document.ScreenObject.DocPrefix.TextBox.Text=o.DocNumber.toString(),this.Document.ScreenObject.DocPrefix.ComboBox.SelectedValue=o.DocPrefix.toString(),this.Document.OnDocPrefixChanged("lostFocus"),this.Document.ScreenObject.FillDocumentPrefix(!0),this.Document.ScreenObject.DocPrefix.ComboBox.SelectedValue=o.DocPrefix.toString(),this.Document.ScreenObject.DocPrefix.ComboBox.SelectedItem=this.Document.ScreenObject.DocPrefix.ComboBox.GetselectedItem();var l=this.Document.ScreenObject.Data.Tables[8].length>0?this.Document.ScreenObject.Data.Tables[8]:[];if((l=l.filter((function(e){return e.CCID>5e4}))).length>0)for(var h=function(e){var i=t.Document.ScreenObject._CCFields[e];if(i instanceof p.b){if(5==t.Document.DocumentType&&i.DBColumnName.Contains("TO"))return"continue";(l=l.filter((function(e){return e.CCID==i.CCID}))).length>0&&i.Enable&&(i.Enable=!1)}},u=0;u<this.Document.ScreenObject._CCFields.length;u++)h(u);this.CurrentDocument=o.CostCenterID.toString(),this.CurrentDocumentPrefix=o.DocPrefix.toString(),this.Document.IsInventoryVoucher&&!this.Document.RefreshGridFooter&&(this.Document.RefreshGridFooter=!0)}return!0}catch(d){Logger.ErrorLog("DocumentViewer: "+d),this.DisplayMessage="Error In Document Load"}}}return!1}},{key:"LoadDimension",value:function(e){return e>0&&(this.CurrentVoucherNo=e.toString(),l.RibbonExtViewModel.ShowQuickAdd(this.DimensionID,0,e,!1,2)),!1}},{key:"LoadDimnesion_PAYROLL",value:function(e){}},{key:"LoadDimnesion_CRM",value:function(e){73==this.DimensionID?this.Dimension=new b.AddEditCasesViewModel(e,0,!1):86==this.DimensionID||(88==this.DimensionID?this.Dimension=new m.a(e,0):89==this.DimensionID||83==this.DimensionID&&(this.Dimension=new D.a(e,e,0,!1)))}},{key:"LoadDimnesion_Rental",value:function(e){92==this.DimensionID?this.Dimension=new u.AddEditPropertyViewModel(e,1,!1):93==this.DimensionID?this.Dimension=new d.AddEditUnitsViewModel(e,!1,1,e):94==this.DimensionID?this.Dimension=new C.AddEditTenantViewModel(e,1,!1):95!=this.DimensionID&&96!=this.DimensionID&&103!=this.DimensionID&&129!=this.DimensionID||(this.Dimension=new h.AddEditRenContractViewModel,this.Dimension.AddEditRenContractViewModel_1(this.DimensionID,e,!1,1,e))}},{key:"LoadDimensionByText",value:function(e){if(!n.e.IsEmptySpace(e)){if(this.CurrentVoucherNo=e,this.NodeID=0,95==this.DimensionID||103==this.DimensionID||104==this.DimensionID||129==this.DimensionID){var t=s.a.report.GetDataTable("RPT040",this.DimensionID.toString(),e);t.length>0&&(this.NodeID=parseInt(t[0].ContractID)),this.NodeID>0&&(this.Dimension=new h.AddEditRenContractViewModel,this.Dimension.AddEditRenContractViewModel_1(this.DimensionID,this.NodeID,!1,1,this.NodeID))}if(null!=this.Dimension)return 0==this.Screen.length?this.Screen.push(this.Dimension):this.Screen[0]=this.Dimension,!0}return!1}}]),i}(a.a)},"W4+j":function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var s=i("3Pt+"),n=i("fXoL");function a(e,t){if(1&e&&n.Vb(0,9),2&e){var i=n.lc();n.tc("obj",i.obj.Product)("group",i.group)}}function o(e,t){if(1&e&&n.Vb(0,9),2&e){var i=n.lc();n.tc("obj",i.obj.Account)("group",i.group)}}function r(e,t){if(1&e&&n.Vb(0,9),2&e){var i=n.lc();n.tc("obj",i.obj.AccountContactVisible)("group",i.group)}}function c(e,t){if(1&e&&n.Vb(0,9),2&e){var i=n.lc();n.tc("obj",i.obj.AccountAddressVisible)("group",i.group)}}function l(e,t){if(1&e&&n.Vb(0,9),2&e){var i=n.lc();n.tc("obj",i.obj.AccountAssignVisible)("group",i.group)}}var h=function(){var e=function(){function e(){_classCallCheck(this,e),this.group=new s.j({})}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Nb({type:e,selectors:[["app-convert-customer"]],decls:39,vars:11,consts:[[1,"master-screen"],[1,"PACTHeaderFields","dialogSubBody"],[1,"form-group","row","PACTControl"],["FieldDirective","",3,"obj","group",4,"ngIf"],[2,"margin-left","20px"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"],["FieldDirective","",3,"obj","group"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Wc(1,"\n    "),n.Zb(2,"div",1),n.Wc(3,"\n        "),n.Zb(4,"div",2),n.Wc(5,"\n            "),n.Uc(6,a,1,2,"ng-container",3),n.Wc(7,"\n        "),n.Yb(),n.Wc(8,"\n        "),n.Zb(9,"div",2),n.Wc(10,"\n            "),n.Uc(11,o,1,2,"ng-container",3),n.Wc(12,"\n            "),n.Zb(13,"div",4),n.Wc(14,"\n                "),n.Uc(15,r,1,2,"ng-container",3),n.Wc(16,"\n                "),n.Uc(17,c,1,2,"ng-container",3),n.Wc(18,"\n                "),n.Uc(19,l,1,2,"ng-container",3),n.Wc(20,"\n            "),n.Yb(),n.Wc(21,"\n        "),n.Yb(),n.Wc(22,"\n  "),n.Yb(),n.Wc(23,"\n  "),n.Zb(24,"div",5),n.Wc(25,"\n    "),n.Zb(26,"div"),n.Wc(27,"\n        "),n.Zb(28,"button",6),n.hc("click",(function(){return t.obj.OnSave("Save")})),n.Wc(29),n.mc(30,"translate"),n.Yb(),n.Wc(31,"\n        "),n.Zb(32,"button",7),n.hc("click",(function(){return t.obj.OnSave("Cancel")})),n.Ub(33,"i",8),n.Wc(34),n.mc(35,"translate"),n.Yb(),n.Wc(36,"\n    "),n.Yb(),n.Wc(37,"      \n  "),n.Yb(),n.Wc(38,"\n"),n.Yb()),2&e&&(n.Db(6),n.tc("ngIf",t.obj.Product.Visible),n.Db(5),n.tc("ngIf",t.obj.Account.Visible),n.Db(4),n.tc("ngIf",t.obj.AccountContactVisible.Visible),n.Db(2),n.tc("ngIf",t.obj.AccountAddressVisible.Visible),n.Db(2),n.tc("ngIf",t.obj.AccountAssignVisible.Visible),n.Db(10),n.Xc(n.nc(30,7,"Ok")),n.Db(5),n.Xc(n.nc(35,9,"Cancel")))},encapsulation:2}),e}()},"il++":function(e,t,i){"use strict";i.r(t),i.d(t,"AddEditCaseComponent",(function(){return d}));var s=i("fXoL");function n(e,t){if(1&e){var i=s.ac();s.Zb(0,"span",11),s.hc("click",(function(){return s.Ic(i),s.lc().obj.OnSave("Email")})),s.Ub(1,"i",12),s.Wc(2),s.mc(3,"translate"),s.Yb()}2&e&&(s.Db(2),s.Xc(s.nc(3,1,"SMTP_Email")))}function a(e,t){if(1&e){var i=s.ac();s.Zb(0,"span",11),s.hc("click",(function(){return s.Ic(i),s.lc().obj.OnSave("Assign")})),s.Ub(1,"i",13),s.Wc(2),s.mc(3,"translate"),s.Yb()}2&e&&(s.Db(2),s.Xc(s.nc(3,1,"Assign")))}function o(e,t){if(1&e){var i=s.ac();s.Zb(0,"span",11),s.hc("click",(function(){return s.Ic(i),s.lc().obj.OnSave("Print")})),s.Ub(1,"i",14),s.Wc(2),s.mc(3,"translate"),s.Yb()}2&e&&(s.Db(2),s.Xc(s.nc(3,1,"Print")))}function r(e,t){if(1&e){var i=s.ac();s.Zb(0,"span",11),s.hc("click",(function(){return s.Ic(i),s.lc().obj.OnSave("PrintPreview")})),s.Ub(1,"i",14),s.Wc(2),s.mc(3,"translate"),s.Yb()}2&e&&(s.Db(2),s.Xc(s.nc(3,1,"Preview")))}function c(e,t){if(1&e){var i=s.ac();s.Zb(0,"span",11),s.hc("click",(function(){return s.Ic(i),s.lc().obj.OnSave("Save")})),s.Ub(1,"i",15),s.Wc(2),s.mc(3,"translate"),s.Yb()}2&e&&(s.Db(2),s.Xc(s.nc(3,1,"Save")))}function l(e,t){if(1&e){var i=s.ac();s.Zb(0,"span",11),s.hc("click",(function(){return s.Ic(i),s.lc().obj.OnSave("WaiveOff")})),s.Ub(1,"i",16),s.Wc(2),s.mc(3,"translate"),s.Yb()}2&e&&(s.Db(2),s.Xc(s.nc(3,1,"Waive Off")))}function h(e,t){if(1&e){var i=s.ac();s.Zb(0,"span",11),s.hc("click",(function(){return s.Ic(i),s.lc().obj.OnSave("Close")})),s.Ub(1,"i",17),s.Wc(2,"Close"),s.Yb()}}function u(e,t){if(1&e){var i=s.ac();s.Zb(0,"span",11),s.hc("click",(function(){return s.Ic(i),s.lc().obj.OnSave("Report")})),s.Ub(1,"i",18),s.Wc(2),s.mc(3,"translate"),s.Yb()}2&e&&(s.Db(2),s.Xc(s.nc(3,1,"Report")))}var d=function(){var e=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){this.obj=this.params.obj}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Nb({type:e,selectors:[["app-add-edit-case"]],decls:42,vars:11,consts:[["id","maincontainer",1,"maincontainer","document_container"],[2,"flex-direction","column","justify-content","flex-end","width","Calc(100%)","display","flex"],[1,"page-header"],[1,"page-title"],[2,"display","inline-flex"],[3,"WFDocLevelList"],[1,"btnMetroDiv","secondary-btn-group"],["class","secondary-btn",3,"click",4,"ngIf"],[1,"main_div"],[3,"ScreenObject"],["dynscreen",""],[1,"secondary-btn",3,"click"],[1,"fa-light","fa-envelope"],[1,"fa-light","fa-user-plus"],[1,"fa-light","fa-print"],[1,"fa-light","fa-save"],[1,"fa-light","fa-dice-d4"],[1,"fa-light","fa-times"],[1,"fa-light","fa-file-chart-line"]],template:function(e,t){1&e&&(s.Zb(0,"div",0),s.Wc(1,"\n    "),s.Zb(2,"div",1),s.Wc(3,"\n    "),s.Zb(4,"div",2),s.Wc(5,"\n        "),s.Zb(6,"label",3),s.Wc(7),s.Yb(),s.Wc(8,"\n        "),s.Zb(9,"div",4),s.Wc(10,"\n            "),s.Ub(11,"app-wflevel-view",5),s.Wc(12,"\n          "),s.Yb(),s.Wc(13," \n        "),s.Zb(14,"div",6),s.Wc(15,"            \n            "),s.Uc(16,n,4,3,"span",7),s.Wc(17,"\n            "),s.Uc(18,a,4,3,"span",7),s.Wc(19,"\n            "),s.Uc(20,o,4,3,"span",7),s.Wc(21,"\n            "),s.Uc(22,r,4,3,"span",7),s.Wc(23,"            \n            "),s.Uc(24,c,4,3,"span",7),s.Wc(25,"\n            "),s.Uc(26,l,4,3,"span",7),s.Wc(27,"\n            "),s.Uc(28,h,3,0,"span",7),s.Wc(29,"\n            "),s.Uc(30,u,4,3,"span",7),s.Wc(31,"\n            \n        "),s.Yb(),s.Wc(32,"\n    "),s.Yb(),s.Wc(33,"\n    "),s.Zb(34,"div",8),s.Wc(35,"\n    "),s.Ub(36,"app-master-screen",9,10),s.Wc(38,"\n    "),s.Yb(),s.Wc(39,"\n"),s.Yb(),s.Wc(40,"\n"),s.Yb(),s.Wc(41,"\n    ")),2&e&&(s.Db(7),s.Yc("\n            ",t.obj.DisplayName,"\n        "),s.Db(4),s.tc("WFDocLevelList",t.obj.WFDocLevelList),s.Db(5),s.tc("ngIf",t.obj.ButtonEmail.Visible&&t.obj.ButtonEmail.Enable),s.Db(2),s.tc("ngIf",t.obj.ButtonAssign.Visible&&t.obj.ButtonAssign.Enable),s.Db(2),s.tc("ngIf",t.obj.PrintVisible),s.Db(2),s.tc("ngIf",t.obj.PrintViewVisible),s.Db(2),s.tc("ngIf",t.obj.ButtonSave.Visible&&t.obj.ButtonSave.Enable),s.Db(2),s.tc("ngIf",t.obj.ButtonWaive.Visible&&t.obj.ButtonWaive.Enable),s.Db(2),s.tc("ngIf",t.obj.ButtonClose.Visible&&t.obj.ButtonClose.Enable),s.Db(2),s.tc("ngIf",t.obj.ReportInfoVisibility),s.Db(6),s.tc("ScreenObject",t.obj.ScreenObject))},encapsulation:2}),e}()}}]);