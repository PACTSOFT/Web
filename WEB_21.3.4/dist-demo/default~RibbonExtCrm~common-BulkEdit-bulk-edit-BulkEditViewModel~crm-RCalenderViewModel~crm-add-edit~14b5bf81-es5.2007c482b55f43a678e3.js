function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,s=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[23,133,134],{"F+4J":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("Do2H"),n=function(){function e(){_classCallCheck(this,e),this.TeamID=0,this.Status=0,this.IsGroup=!1,this.FetaureID=0,this.FeatureNodeID=0,this.TeamNodeID=0,this.UserID=0,this.ActivityID=0,this.isTeam=0,this.isRole=0,this.isGroup=0}return _createClass(e,[{key:"GetAssignedDetails",value:function(e,t,i){var n=[];n.push(e),n.push(t),n.push(i),n.push(s.a.SessionManager.UserID),n.push(s.a.SessionManager.LanguageID);var a="?CompanyIndex="+s.a.SessionManager.CompanyIndex+"&param="+JSON.stringify(n);return s.a.crmService.GetAssignedList(a)}},{key:"GetCRMHistoryDetails",value:function(e,t){Logger.InfoLog("Team:: Inside GetCRMHistoryDetails");var i=[];i.push(e),i.push(t),i.push(s.a.SessionManager.UserID),i.push(s.a.SessionManager.LanguageID);var n="?param="+JSON.stringify(i);return Logger.InfoLog("Team:: Success: DBH.GetCRMHistoryDetails "+e.ToString()),s.a.crmService.GetCRMHistoryDetails(n)}},{key:"FeatureAssign",value:function(){var e=[];return e.push(this.FetaureID),e.push(this.FeatureNodeID),e.push(this.TeamNodeID),e.push(this.UserID),e.push(this.isTeam),e.push(this.UsersXML),e.push(this.RolesXML),e.push(this.GroupXML),e.push(s.a.SessionManager.CompanyGUID),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.LanguageID),s.a.crmService.AssignFeature(e)}},{key:"ActivityAssign",value:function(){var e=[];return e.push(this.FetaureID),e.push(this.FeatureNodeID),e.push(this.TeamNodeID),e.push(this.UserID),e.push(this.isTeam),e.push(this.UsersXML),e.push(this.RolesXML),e.push(this.GroupXML),e.push(s.a.SessionManager.CompanyGUID),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.LanguageID),e.push(this.ActivityID),s.a.crmService.ActivityAssign(e)}},{key:"SetInvite",value:function(){var e=[];return e.push(this.FetaureID),e.push(this.FeatureNodeID),e.push(this.TeamNodeID),e.push(this.UserID),e.push(this.isTeam),e.push(this.UsersXML),e.push(this.RolesXML),e.push(this.GroupXML),e.push(s.a.SessionManager.CompanyGUID),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.LanguageID),e.push(this.InviteComments),s.a.crmService.SetInvite(e)}},{key:"SetInviteStatus",value:function(e){Logger.InfoLog("Team::Entering SetInviteStatus");try{var t=[];t.push(e),t.push(s.a.SessionManager.UserName),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID);var i=s.a.crmService.SetInviteStatus(t);return Logger.InfoLog("Team::Exiting SetInviteStatus"),i}catch(n){return Logger.ErrorLog("Team::SetInviteStatus"+n.stack),""}}},{key:"AssignMultipleFeature",value:function(){var e=[];return e.push(this.FetaureID),e.push(this.NodesXML),e.push(this.TeamNodeID),e.push(this.UserID),e.push(this.isTeam),e.push(this.UsersXML),e.push(this.RolesXML),e.push(this.GroupXML),e.push(s.a.SessionManager.CompanyGUID),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.LanguageID),s.a.crmService.AssignMultipleFeature(e)}}]),e}()},UlzB:function(e,t,i){"use strict";i.r(t),i.d(t,"InvitesViewModel",(function(){return c}));var s=i("Do2H"),n=i("Lp6j"),a=i("ScVY"),r=i("4HhE"),l=i("8B8H"),o=i("JIg3"),u=i("ockk"),h=i("F+4J"),c=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this)).SaveInvite=new r.b,e._ActivityID=0,e._SearchDate=new o.a(0),e.dset=[],e}return _createClass(i,[{key:"InvitesViewModel_1",value:function(e,t,i){Logger.InfoLog("InvitesViewModel :: entering "),this.IsInvite=i,this.InviteGrid=new l.a,this.dset=t,this.IsInvite?(this.LblText="Invities",this.Title="Invities",this.CancelVisibility=!0,this.Width="1000",this.SaveVisibility=!0,this.SearchVisibility=!0,this.AddGridColumns()):(this.LblText="Attendies",this.Title="Attendies",this.CancelVisibility=!0,this.Width="600",this.SaveVisibility=!1,this.SearchVisibility=!1,this.AddAttendiesGridColumns()),this.LoadData(),this.SaveInvite.Subscribe(this,"onSaveInvite"),Logger.InfoLog("InvitesViewModel :: exiting ")}},{key:"InvitesViewModel_2",value:function(e,t,i,s){this.InvitesViewModel_1(e,t,i),Logger.InfoLog("InvitesViewModel :: entering "),this.ActivityID=s,Logger.InfoLog("InvitesViewModel :: exiting ")}},{key:"BuildTempTable",value:function(){Logger.InfoLog("InvitesViewModel :: entering BuildTempTable "),this.InviteGrid.Table=[],this.InviteGrid.Width=(parseInt(this.Width)-25).toString(),this.InviteGrid.Height=300,this.InviteGrid.TableColumns.push("SNo"),this.InviteGrid.TableColumns.push("ActivityID"),this.InviteGrid.TableColumns.push("Customer"),this.InviteGrid.TableColumns.push("Subject"),this.InviteGrid.TableColumns.push("StartDate"),this.InviteGrid.TableColumns.push("EndDate"),this.InviteGrid.TableColumns.push("RequestedBy"),this.InviteGrid.TableColumns.push("RequestedDate"),this.InviteGrid.TableColumns.push("InviteComments"),this.InviteGrid.TableColumns.push("InviteStatus"),Logger.InfoLog("InvitesViewModel :: exiting BuildTempTable ")}},{key:"AddGridColumns",value:function(){Logger.InfoLog("InvitesViewModel :: entering AddGridColumns "),this.BuildTempTable();var e=[],t=new u.a;(t=new u.a).DisplayMember="SNo",t.Header=s.a.GetResource("UOM_Sno"),t.DataType="TextBlock",t.Width=50,t.ReadOnly=!0,t.IsVisible=!0,e.push(t),(t=new u.a).ComboData=this.ReturnStatus(),t.DisplayMember="InviteStatus",t.ValueMember="Value",t.ValueBinding="InviteStatus",t.Header="Status",t.DataType="ComboBox",t.Width=100,t.IsVisible=!0,e.push(t),(t=new u.a).DisplayMember="Customer",t.Header="Customer",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new u.a).DisplayMember="Subject",t.Header="Subject",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new u.a).DisplayMember="StartDate",t.Header="Start Date",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new u.a).DisplayMember="EndDate",t.Header="End Date",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new u.a).DisplayMember="RequestedBy",t.Header="Requested By",t.DataType="TextBlock",t.Width=80,t.IsVisible=!0,e.push(t),(t=new u.a).DisplayMember="RequestedDate",t.Header="Requested Date",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new u.a).DisplayMember="InviteComments",t.Header="Comments",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),this.InviteGrid.Columns=e,this.InviteGrid.OnCellEditEnding.Subscribe(this,"OnGridCellEditEnding"),Logger.InfoLog("InvitesViewModel :: exiting AddGridColumns ")}},{key:"BuildAttendiesTempTable",value:function(){Logger.InfoLog("InvitesViewModel :: entering BuildTempTable "),this.InviteGrid.Table=[],this.InviteGrid.Width=(parseInt(this.Width)-25).toString(),this.InviteGrid.Height=300,this.InviteGrid.TableColumns.push("SNo"),this.InviteGrid.TableColumns.push("ActivityID"),this.InviteGrid.TableColumns.push("CreatedBy"),this.InviteGrid.TableColumns.push("UserName"),this.InviteGrid.TableColumns.push("InviteStatus"),this.InviteGrid.TableColumns.push("InvAtt"),Logger.InfoLog("InvitesViewModel :: exiting BuildTempTable ")}},{key:"AddAttendiesGridColumns",value:function(){Logger.InfoLog("InvitesViewModel :: entering AddGridColumns "),this.BuildAttendiesTempTable();var e=[],t=new u.a;(t=new u.a).DisplayMember="SNo",t.Header=s.a.GetResource("UOM_Sno"),t.DataType="TextBlock",t.Width=50,t.ReadOnly=!0,t.IsVisible=!0,e.push(t),(t=new u.a).DisplayMember="UserName",t.Header="User",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new u.a).DisplayMember="InviteStatus",t.Header="Status",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new u.a).DisplayMember="InvAtt",t.Header="Invite / Attendies",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),this.InviteGrid.Columns=e,Logger.InfoLog("InvitesViewModel :: exiting AddGridColumns ")}},{key:"ReturnStatus",value:function(){var e=[];return e.push({InviteStatus:"",Value:""}),e.push({InviteStatus:"Accepted",Value:"Accepted"}),e.push({InviteStatus:"Rejected",Value:"Rejected"}),e.push({InviteStatus:"Cancelled",Value:"Cancelled"}),e}},{key:"OnGridCellEditEnding",value:function(e,t,i){var n=this;if("InviteStatus"==t){if(Logger.InfoLog("InvitesViewModel::Entering OnGridCellEditEnding ColName="+t.toString()),"Cancelled"==e.InviteStatus.toString())e.InviteStatus="",this.DisplayMessage="Select Accepted/Rejected",this.MessageVisibility=!0;else{var a=s.a.common.GetDataSetQuery("SELECT statusid from crm_activities WITH(NOLOCK) where activityid in (select inviterefactid from crm_activities WITH(NOLOCK) where activityid="+e.ActivityID.toString()+")");null!=a&&a.Tables.length>0&&a.Tables[0].forEach((function(t){if("413"==t.statusid.toString())return n.DisplayMessage="Activity is Closed, click on save to update status",e.InviteStatus="Cancelled",void(n.MessageVisibility=!0)}))}Logger.InfoLog("InvitesViewModel::Exiting OnGridCellEditEnding ColName="+t.toString())}}},{key:"LoadData",value:function(){var e=this;if(Logger.InfoLog("InvitesViewModel :: entering LoadData "),null!=this.dset&&this.dset.Tables.length>0){this.InviteGrid.Clear();var t=0;this.IsInvite?this.dset.Tables[0].length>0&&this.dset.Tables[0].forEach((function(i){var s=[];t+=1,s.SNo=t,n.e.hasprop(i,"CustomerID")&&(s.Customer=i.CustomerID),n.e.hasprop(i,"ActSubject")&&(s.Subject=i.ActSubject),n.e.hasprop(i,"InviteComments")&&(s.InviteComments=i.InviteComments),n.e.hasprop(i,"InviteStatus")&&(s.InviteStatus=i.InviteStatus),n.e.hasprop(i,"ActStartDate")&&(s.StartDate=i.ActStartDate.toString()+" "+new Date(i.ActStartTime.toString()).ToString("hh:mm:ss tt")),n.e.hasprop(i,"ActEndDate")&&(s.EndDate=i.ActEndDate+" "+new Date(i.ActEndTime.toString()).ToString("hh:mm:ss tt")),n.e.hasprop(i,"UserName")&&(s.RequestedBy=i.UserName),n.e.hasprop(i,"CreatedDate")&&(s.RequestedDate=i.CreatedDate),s.ActivityID=i.ActivityID,e.InviteGrid.addRow(s)})):this.dset.Tables[0].length>0&&this.dset.Tables[0].forEach((function(i){var s=[];t+=1,s.SNo=t,n.e.hasprop(i,"ActivityID")&&(s.ActivityID=i.ActivityID),n.e.hasprop(i,"CreatedBy")&&(s.CreatedBy=i.CreatedBy),n.e.hasprop(i,"UserName")&&(s.UserName=i.UserName),n.e.hasprop(i,"InviteStatus")&&(s.InviteStatus=i.InviteStatus),n.e.hasprop(i,"InvAtt")&&(s.InvAtt=i.InvAtt),e.InviteGrid.addRow(s)}))}Logger.InfoLog("InvitesViewModel :: exiting LoadData ")}},{key:"onSaveInvite",value:function(e){if(null!=e){if(Logger.InfoLog("InvitesViewModel :: entering onSaveInvite, sender "+e.toString()),"Cancel"==e.toString())s.a.page.HideDialog();else if("Search"==e.toString()){if(null!=this.SearchDate.Date){this.DisplayMessage="",this.MessageVisibility=!1;var t=s.a.cases.GetInvities(-100,-100,-100,0,this.SearchDate.Date);null!=t&&t.Tables.length>0&&(t.Tables[0].length>0?(this.dset=t,this.LoadData()):(this.DisplayMessage="No invitations",this.InviteGrid.Clear(),this.MessageVisibility=!0))}}else if("Clear"==e.toString())this.InviteGrid.Clear();else try{var i="";if(""!=(i=this.GetInviteXML()).toString()){var n=new h.a,a=n.SetInviteStatus(i);this.DisplayMessage=a.message,a.RetValue>0&&(this.DisplayMessage="Saved Successfully",this.MessageVisibility=!0,Logger.InfoLog("InvitesViewModel :: Exiting onSaveInvite set invite error "))}}catch(r){throw Logger.ErrorLog("InvitesViewModel :: Exiting onSaveInvite set invite error "+r.Message),""}Logger.InfoLog("InvitesViewModel :: exiting onSaveInvite ")}}},{key:"GetInviteXML",value:function(){Logger.InfoLog("InvitesViewModel :: entering GetInviteXML ");var e="";try{for(var t=0;t<this.InviteGrid.Table.length;t++)""!=this.InviteGrid.Table[t].InviteStatus.toString()&&(e+="<Row  ",e+=' ActivityID="'+this.InviteGrid.Table[t].ActivityID.toString()+'"',e+=' InviteComments="'+this.InviteGrid.Table[t].InviteComments.toString()+'"',e+=' InviteStatus="'+this.InviteGrid.Table[t].InviteStatus.toString()+'"',e+=" />");e.length>0&&(e="<XML>"+e+"</XML>")}catch(i){return Logger.ErrorLog("InvitesViewModel :: exiting GetInviteXML error message is "+i.Message),this.DisplayMessage=i,this.MessageVisibility=!0,""}return Logger.InfoLog("InvitesViewModel :: exiting GetInviteXML "),e.toString()}},{key:"ActivityID",get:function(){},set:function(e){this._ActivityID=e}},{key:"SearchDate",get:function(){return this._SearchDate},set:function(e){this._SearchDate=e}}]),i}(a.b)},dvUr:function(e,t,i){"use strict";i.r(t),i.d(t,"InvitesComponent",(function(){return l}));var s=i("3Pt+"),n=i("fXoL");function a(e,t){if(1&e){var i=n.ac();n.Zb(0,"button",6),n.hc("click",(function(){return n.Ic(i),n.lc().obj.onSaveInvite("Save")})),n.Ub(1,"i",11),n.Wc(2),n.mc(3,"translate"),n.Yb()}2&e&&(n.Db(2),n.Xc(n.nc(3,1,"Save")))}function r(e,t){if(1&e){var i=n.ac();n.Zb(0,"button",12),n.hc("click",(function(){return n.Ic(i),n.lc().obj.onSaveInvite("Cancel")})),n.Ub(1,"i",13),n.Wc(2),n.mc(3,"translate"),n.Yb()}2&e&&(n.Db(2),n.Xc(n.nc(3,1,"Cancel")))}var l=function(){var e=function(){function e(){_classCallCheck(this,e),this.group=new s.j({})}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Nb({type:e,selectors:[["app-invites"]],decls:44,vars:15,consts:[[1,"master-screen",3,"formGroup"],[1,"PACTHeaderFields","dialogSubBody"],[1,"page-title"],[2,"margin","6px"],["FieldDirective","",3,"obj"],[2,"margin","6px","margin-right","0px"],[1,"primary-btn-wicon",3,"click"],[1,"form-group","row","form-row","PACTControl"],[1,"Pactdailogfooter"],["class","primary-btn-wicon",3,"click",4,"ngIf"],["class","secondary-btn-wicon",3,"click",4,"ngIf"],[1,"fa-light","fa-floppy-disk"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"]],template:function(e,t){1&e&&(n.Zb(0,"div",0),n.Wc(1,"\n    "),n.Zb(2,"div",1),n.Wc(3,"\n        "),n.Zb(4,"label",2),n.Wc(5),n.Yb(),n.Wc(6,"\n        \n        "),n.Zb(7,"div",3),n.Wc(8,"\n            "),n.Zb(9,"span"),n.Wc(10),n.mc(11,"translate"),n.Yb(),n.Wc(12,"\n           "),n.Vb(13,4),n.Wc(14,"\n        "),n.Yb(),n.Wc(15,"\n        "),n.Zb(16,"div",5),n.Wc(17,"\n            "),n.Zb(18,"button",6),n.hc("click",(function(){return t.obj.onSaveInvite("Search")})),n.Wc(19),n.mc(20,"translate"),n.Yb(),n.Wc(21,"\n            "),n.Zb(22,"button",6),n.hc("click",(function(){return t.obj.onSaveInvite("Clear")})),n.Wc(23),n.mc(24,"translate"),n.Yb(),n.Wc(25,"  \n        "),n.Yb(),n.Wc(26,"\n        "),n.Zb(27,"div",7),n.Wc(28,"\n            "),n.Vb(29,4),n.Wc(30,"\n        "),n.Yb(),n.Wc(31,"\n  "),n.Yb(),n.Wc(32,"\n\n  "),n.Zb(33,"div",8),n.Wc(34,"\n    "),n.Zb(35,"div"),n.Wc(36,"\n        "),n.Uc(37,a,4,3,"button",9),n.Wc(38,"\n        "),n.Uc(39,r,4,3,"button",10),n.Wc(40,"\n    "),n.Yb(),n.Wc(41,"      \n  "),n.Yb(),n.Wc(42,"\n"),n.Yb(),n.Wc(43,"\n")),2&e&&(n.tc("formGroup",t.obj.group),n.Db(5),n.Yc("\n            ",t.obj.LblText,"   \n        "),n.Db(5),n.Xc(n.nc(11,9,"Service_ExpiryDate")),n.Db(3),n.tc("obj",t.obj.SearchDate),n.Db(6),n.Xc(n.nc(20,11,"Search")),n.Db(4),n.Xc(n.nc(24,13,"Clear")),n.Db(6),n.tc("obj",t.obj.InviteGrid),n.Db(8),n.tc("ngIf",t.obj.SaveVisibility),n.Db(2),n.tc("ngIf",t.obj.CancelVisibility))},styles:[""]}),e}()},"m+Ff":function(e,t,i){"use strict";i.r(t),i.d(t,"RCalenderViewModel",(function(){return k})),i.d(t,"DayTemplate",(function(){return L})),i.d(t,"ViewColumn",(function(){return N})),i.d(t,"CalenderReportFilterViewModel",(function(){return F})),i.d(t,"CalCostCenterFilter",(function(){return _}));var s=i("mrSG"),n=i("Do2H"),a=i("Lp6j"),r=i("eQJW"),l=i("dH+5"),o=i("mvPR"),u=i("0/4Q"),h=i("CQvG"),c=i("C58A"),d=i("DKUf"),S=i("VxiT"),C=i("xnJf"),m=i("EQd/"),D=i("OQq8"),g=i("4HhE"),p=i("ScVY"),I=i("JIg3"),y=i("n56n"),v=i("Jnyl"),T=i("31sV"),b=i("r2z3"),f=i("UlzB"),A=i("dvUr"),V=i("NkMH"),w=i("ZDA+"),M=i("6z9j"),k=function(e){_inherits(p,e);var t=_createSuper(p);function p(){var e;return _classCallCheck(this,p),(e=t.call(this)).DataClick=new g.b,e._ButtonInvite=new V.a,e._ButtonAppointment=new V.a,e.DisplayDate=null,e._DayColumns=[],e._MonthlyData=[],e.CCFilter="",e._DayTemplateList=[],e.Features=new u.e(0),e.ViewType=new u.e(0),e.Userlist=new u.e(0),e._SelectedDate=Date.Today(),e.ShowType=new u.e(0),e.Status=new u.e(0),e.CalendarSource=[],e.GoToDate=new I.a(0),e.UIDate=Date.Today(),e.onCheck=new g.b,e.cmnItem_Click=new g.b,e.CellEditEnding=new g.b,e.ColLists=[],e.SelectionChanged=new g.b,e.DayviewRadioChanged=new g.b,e.Move=new g.b,e.ActVisibility=!1,e.CustomizeVisibility=!1,e.TempCurrDate=new Date,e.dset=null,e.TempCurrMonth=new Date,e.TempCurrWeek=new Date,e.EventData=[],e._ScreenObject=new S.a,e._WeekData=[],e.ActivityID=0,e.CCID=-100,e.FeatureID=-100,e.iStatus=0,e.Type=0,e.Subject="",e._FSubject=new m.d(0),e.arrWeekName=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],e.LoadUICallBack=new g.b,e.RefreshMonthView=new g.b,e.res="No",e.IgnoreSelectionChange=!1,e._myAppointmentsList=[],e.CalendarSource=[],e.CostCenterID=0,e.ViewActivities=new h.b(_assertThisInitialized(e)),e.ClassName="RCalenderViewModel",e}return _createClass(p,[{key:"ReturnDataset",value:function(e,t,i,s,a,r,l,o){null!=a&&(this.UIDate=a),e=parseInt(e),null!=this.Activities&&-100!=e&&this.Activities.LoadCustomFields(e);var u=n.a.cases.GetActivities(e,t,i,s,a,r,l,o);return-100==e&&null!=this.Activities&&this.Activities.LoadCustomFields(1e3),u}},{key:"OnCmnItem_Click",value:function(e){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,s,a,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(267==this.FeatureID){t.next=26;break}t.t0=(Logger.InfoLog("RCalenderViewModel::Entering OnCmnItem_Click strcommand is "+e),e),t.next="Add"===t.t0?4:"ShowInvites"===t.t0?6:"Customize"===t.t0?13:"Delete"===t.t0?15:"Assign"===t.t0?20:"SetAsDefault"===t.t0?22:"Filter"===t.t0?24:25;break;case 4:return this.ActivitiesPopup=null,this.Activities.ViewAttachments.AttachmentsList.Clear(),this.ActVisibility=!this.Activities.IsPopup,this.Activities.Recur=new c.RecurAppointmentViewModel(this.Activities),this.Activities.AssignUserList.SelectedValue=n.a.SessionManager.UserID.toString(),this.Activities.ActivitiesVisibility=!0,this.Activities.Subject.Text="",this.Activities.AssignVisiblity=!1,this.Activities.Location.Text="",this.Activities.CustomerType.Visible=!0,this.Activities.CRMCustomer.Text="",this.Activities.CRMCustomer.Code.SelectedValue=0,this.Activities.CRMCustomer.Code.Text="",this.Activities.Remarks.Text="",this.Activities.Remarks.Xaml="",this.Activities.CRMContactPerson.SelectedValue=0,this.Activities.Remarks.Tag="","-100"==this.CCID.toString()?this.Activities.LoadCustomFields(1e3):this.Activities.LoadCustomFields(this.CCID),this.Activities.InviteLabel.Visible=!1,null!=this.SelectedVoucher&&(this.Activities.StartTime.SelectedValue=this.SelectedVoucher.Time.toString(),this.Activities.EndTime.SelectedValue=this.SelectedVoucher.Time.toString()),this.Activities.ActivityID=0,this.ActivityID=0,this.CustomizeVisibility=!1,this.Activities.ButtonSave.Visible=n.a.SessionManager.IsActionAssigned(1e3,"Activity_Create"),this.Activities.IsPopup?(this.ActivitiesPopup=this.Activities,this.ActVisibility=!1,this.CustomizeVisibility=!1,this.ActivitiesPopup.AssignVisiblity=!1,n.a.page.ShowDialog(this.ActivitiesPopup,T.ActivitiesComponent,{ShowCenter:!0})):(n.a.page.ShowDialog(this.Activities,T.ActivitiesComponent,{}),this.ActVisibility=!0,this.CustomizeVisibility=!1,this.Activities.AssignVisiblity=!1),t.abrupt("break",25);case 6:if(!(null!=(i=n.a.cases.GetInvities(-100,-100,-100,0,Date.Today()))&&i.Tables.length>0)){t.next=12;break}if(i.Tables[0].length>0){t.next=10;break}return t.abrupt("return",void alert("No Intivitations"));case 10:(s=new f.InvitesViewModel).InvitesViewModel_1(n.a.SessionManager.UserID,i,!0),n.a.page.ShowDialog(s,A.InvitesComponent),this.ActVisibility=!1,this.CustomizeVisibility=!1,this.Activities.AssignVisiblity=!1;case 12:return t.abrupt("break",25);case 13:return this.ActVisibility=!1,this.CustomizeVisibility=!0,this.Activities.AssignVisiblity=!1,t.abrupt("break",25);case 15:if(null!=this.SelectedVoucher){t.next=17;break}return t.abrupt("return");case 17:return a=[],null!=this.dset&&this.dset.Tables.length>0&&this.dset.Tables[0].length>0&&(a=this.dset.Tables[0].DefaultView),a.filter((function(e){return e.ActStartTime=="1/1/1900 "+r.SelectedVoucher.Time&&e.ActStartDate==r.UIDate})),null!=a&&a.length>0&&(this.DeleteData(a),null!=this.LoadUICallBack&&this.LoadUICallBack.Call(!0)),t.abrupt("break",25);case 20:return this.CustomizeVisibility=!1,this.Activities.AssignVisiblity=!0,this.Activities.ActivitiesVisibility=!1,t.abrupt("break",25);case 22:return n.a.common.GetDataSet3("RCV001",this.ViewType.SelectedValue,this.Features.SelectedValue,this.Status.SelectedValue+","+n.a.SessionManager.UserID),this.DisplayMessage=" User Updated Successfully  ",this.MessageVisibility=!0,t.abrupt("break",25);case 24:null==this.ReportFilter&&(this.ReportFilter=new F,this.ReportFilter.CalenderReportFilterViewModel_1(this)),this.ShowReportFilter=!0;case 25:Logger.InfoLog("RCalenderViewModel::Exiting OnCmnItem_Click");case 26:case"end":return t.stop()}}),t,this)})))}},{key:"onCanCmnItem_Click",value:function(e){return!0}},{key:"OnSave",value:function(){}},{key:"getEvents",value:function(){this.EventData=[];for(var e=0;e<this._myAppointmentsList.length;e++){var t=this._myAppointmentsList[e],i={},s=new Date(t.StartTime.ToString("dd/MMM/yyyy")+" "+new Date(t.stTime).ToString("hh:mm:ss"));i.id=t.AppointmentID,i.title=new Date(t.stTime).ToString("hh:mm:ss a")+" "+t.Subject,i.start=s,this.EventData.push(i)}}},{key:"_RCalenderViewModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-100;this.FeatureID=t,this.DataClick.Subscribe(this,"OnDataClick"),this.CalendarSource=[],this.CellEditEnding.Subscribe(this,"OnCellEditEnding"),this.AppointmentColor="#FFE6F2FB",this.Subject="",this.SelectionChanged.Subscribe(this,"onSelectionChanged"),this.Userlist.SelectionChangedCommand.Subscribe(this,"onSelectionChanged"),this.Status.SelectionChangedCommand.Subscribe(this,"onSelectionChanged"),this.ShowType.SelectionChangedCommand.Subscribe(this,"onSelectionChanged"),this.Features.SelectionChangedCommand.Subscribe(this,"onSelectionChanged"),this.FSubject.TextChangedCommand.Subscribe(this,"onSelectionChanged"),this.cmnItem_Click.Subscribe(this,"OnCmnItem_Click"),this.DayviewRadioChanged.Subscribe(this,"RadioButtonChanged"),null!=this.GoToDate&&this.GoToDate.SelectedDateChanged.Subscribe(this,"OnDateChanged"),267==this.FeatureID?(this.DisplayName=n.a.GetResource("Attendance Calendar"),this.Title=n.a.GetResource("Attendance Calendar"),this.ButtonInvite.Visible=!1,this.ButtonAppointment.Visible=!1):(this.DisplayName=n.a.GetResource("Calendar"),this.Title=n.a.GetResource("Calendar")),this.Move.Subscribe(this,"MoveItem"),this.Activities=new d.a(this,!0),null!=this.Activities&&(this.Activities.AssignVisiblity=!1),this.TempCurrDate=Date.Today(),(new Date).getDayName();var i=Date.Today().getDate()-0;this.TempCurrWeek=Date.Today().AddDays(-i),this.TempCurrMonth=Date.Today(),this.CostCenterID=89,this.CurrDate=this.TempCurrDate.getDayName().toString()+", "+this.TempCurrDate.getMonthName()+" "+this.TempCurrDate.getDate()+", "+this.TempCurrDate.getFullYear(),this.CurrMonth=this.TempCurrDate.getMonth()+" - "+this.TempCurrDate.getFullYear(),this.MonthViewVisibility=!0,this.DayViewVisibility=!1,this.WeekViewVisibility=!1,this.dtEndDate=this.TempCurrWeek.AddDays(6),this.CurrWeek=this.TempCurrWeek.toLocaleDateString()+"  -  "+this.dtEndDate.toLocaleDateString(),this.LoadDayViewData(),this.BuildTempDataTable(),this.onCheck.Subscribe(this,"onCheckChange"),this.LoadUICallBack.Subscribe(this,"ReLoad"),this.ViewType.Label=n.a.GetResource("Cal_ViewType"),this.ViewType.Enable=!0,this.ViewType.SelectionChangedCommand.Subscribe(this,"onViewTypeChange"),this.ShowType.Label=n.a.GetResource("Cal_Events"),this.ShowType.Enable=!0,this.Features.Label=n.a.GetResource("Feature"),this.Features.Enable=!0,this.Status.Label=n.a.GetResource("Status"),this.Status.Enable=!0,this.Userlist.Label="Assigned to",this.Userlist.Enable=!0,this.FSubject.Label=n.a.GetResource("Subject"),this.FSubject.Enable=!0}},{key:"onViewTypeChange",value:function(e){this.onCheckChange("")}},{key:"AssignFeatureData",value:function(e){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var s,a,r,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.Activities.ActivityID=parseInt(e[0].ActivityID.toString()),"413"!=e[0].ActStatus.toString()){t.next=2;break}return t.abrupt("return",(alert("Activity is closed"),this.AssignVisiblity=!1,this.CustomizeVisibility=!1,void(this.Activities.IsPopup||(this.ActVisibility=!0))));case 2:return this.AssignVisiblity=!0,this.CustomizeVisibility=!1,this.ActVisibility=!1,this.Activities.ActivityType.SelectedValue=e[0].ActivityTypeID.toString(),this.ActivityID=this.Activities.ActivityID,this.CCID=parseInt(e[0].CostCenterID),t.next=5,i.e(109).then(i.bind(null,"2Dtv"));case 5:return s=t.sent,a=s.AssignFeatureViewModel,t.next=9,Promise.resolve().then(i.bind(null,"yWgc"));case 9:r=t.sent,l=r.AssignFeatureComponent,this.AssignFeature=new a,this.AssignFeature.AssignFeatureViewModel_1(this,this.ActivityID,this.CCID),n.a.page.ShowDialog(this.AssignFeature,l);case 12:case"end":return t.stop()}}),t,this)})))}},{key:"LoadData",value:function(e){var t=this;if(null!=this.Activities){if(this.Activities.ViewAttachments.AttachmentsList.Clear(),this.Activities.MessageVisibility=!1,this.Activities.DisplayMessage="",this.Activities.FeatureLable="",null!=e&&a.e.hasprop(e[0],"DocNo")&&""!=a.e.StringValue(e[0].DocNo).toString()&&(this.Activities.FeatureLable="("+e[0].DocNo.toString()+")",this.Activities.FeatureWiseLable.FeatureID=128==parseInt(e[0].CostCenterID)?88:parseInt(e[0].CostCenterID),this.Activities.FeatureWiseLable.DBColumnID=parseInt(e[0].NodeID),a.e.hasprop(e[0],"DocumentName")&&a.e.hasprop(e[0],"DocPrefix")&&(this.Activities.FeatureWiseLable.DBColumnName=e[0].DocumentName.toString(),this.Activities.FeatureWiseLable.GroupName=e[0].DocPrefix.toString(),this.Activities.FeatureWiseLable.ScreenName=e[0].DocNumber.toString())),this.Activities.ActivityID=parseInt(e[0].ActivityID.toString()),this.Activities.ActivityType.SelectedValue=e[0].ActivityTypeID.toString(),this.ActivityID=this.Activities.ActivityID,this.Activities.InviteLabel.Visible=this.Activities.ActivityID>0,this.CCID=parseInt(e[0].CostCenterID),128==this.CCID&&(this.CCID=88),"3"!=this.Activities.ActivityType.SelectedValue&&"4"!=this.Activities.ActivityType.SelectedValue||e.forEach((function(e){parseInt(e.ScheduleID.toString())>0&&t.Activities.Recur.LoadEditData(e)})),null!=e[0].FreqType&&""!=e[0].FreqType.toString()){var i=parseInt(e[0].FreqType.toString());1==i?this.Activities.ActivityText.Text="Once":4==i?this.Activities.ActivityText.Text="Daily":8==i?this.Activities.ActivityText.Text="Weekly":i>=16&&(this.Activities.ActivityText.Text="Monthly")}"1"==this.Activities.ActivityType.SelectedValue||"2"==this.Activities.ActivityType.SelectedValue?this.Activities.Exp.Visible=!1:"3"!=this.Activities.ActivityType.SelectedValue&&"4"!=this.Activities.ActivityType.SelectedValue||(this.Activities.Exp.Visible=!0),this.Activities.Status.SelectedValue=a.e.StringValue(e[0].ActStatus),this.Activities.StatusSelectedValue=a.e.StringValue(e[0].ActStatus),this.Activities.Subject.Text=a.e.StringValue(e[0].ActSubject),this.Activities.Priority.SelectedValue=a.e.StringValue(e[0].Priority),this.Activities.PctComplete.Text=a.e.StringValue(e[0].PctComplete),this.Activities.Location.Text=a.e.StringValue(e[0].Location),this.Activities.IsAllDayActivity.IsChecked="0"!=e[0].IsAllDayActivity.toString(),a.e.IsEmpty(e[0].ActualCloseDate)||(this.Activities.ActualCloseDate.Date=new Date(e[0].ActualCloseDate.toString())),a.e.IsEmpty(e[0].ActualCloseTime)?this.Activities.ActualCloseTime.SelectedIndex=0:this.Activities.ActualCloseTime.SelectedValue=new Date(e[0].ActualCloseTime.toString()).ToString("hh:mm:ss a"),1e3==this.CCID?(this.Activities.CustomerType.Visible=!0,""!=e[0].CustomerType.toString()&&null!=e[0].CustomerType.toString()?(this.Activities.CustomerType.SelectedValue="None"==e[0].CustomerType.toString()?"0":"Account"==e[0].CustomerType.toString()?"1":"CRM-Customers"==e[0].CustomerType.toString()?"2":"0",this.Activities.OnCustomerTypeChange(null),this.Activities.CRMCustomer.Code.SelectedValue=""!=e[0].AccountID.toString()?parseInt(e[0].AccountID):0,this.Activities.CRMCustomer.Code.Text=e[0].CustomerID.toString()):(this.Activities.CustomerType.SelectedValue="0",this.Activities.OnCustomerTypeChange(null))):this.Activities.CustomerType.Visible=!1,this.Activities.CRMCustomer.Text=e[0].CustomerID.toString(),this.Activities.CRMContactPerson.SelectedValue=a.e.hasprop(e[0],"ContactID")&&!a.e.IsEmpty(e[0].ContactID)?parseInt(e[0].ContactID.toString()):0,this.Activities.Remarks.Text=e[0].Remarks.toString(),this.Activities.StartDate.Date=new Date(e[0].ActStartDate),this.Activities.EndDate.Date=new Date(e[0].ActEndDate),this.Activities.StartTime.SelectedValue=a.e.diffparseDate(e[0].ActStartTime.toString()).ToString("hh:mm:ss a"),this.Activities.EndTime.SelectedValue=a.e.diffparseDate(e[0].ActEndTime.toString()).ToString("hh:mm:ss a"),this.Activities.AssignUserList.SelectedValue=e[0].AssignUserID.toString(),a.e.hasprop(e[0],"StartDateTime")&&!a.e.IsEmpty(e[0].StartDateTime)&&(this.Activities.ActStartDate.Date=new Date(e[0].StartDateTime.toString()).Date(),this.Activities.ActStartTime.AddItem(new Date(e[0].StartDateTime.toString()).ToString("hh:mm:ss a"),new Date(e[0].StartDateTime.toString()).ToString("hh:mm:ss a")),this.Activities.ActStartTime.SelectedValue=new Date(e[0].StartDateTime.toString()).ToString("hh:mm:ss a")),a.e.hasprop(e[0],"EndDateTime")&&!a.e.IsEmpty(e[0].EndDateTime)&&(this.Activities.ActEndDate.Date=new Date(e[0].EndDateTime.toString()).Date(),this.Activities.ActEndTime.AddItem(new Date(e[0].EndDateTime.toString()).ToString("hh:mm:ss a"),new Date(e[0].EndDateTime.toString()).ToString("hh:mm:ss a")),this.Activities.ActEndTime.SelectedValue=new Date(e[0].EndDateTime.toString()).ToString("hh:mm:ss a")),this.Activities.StartStopVisible=this.Activities.EnableStart=!(!a.e.hasprop(e[0],"PrefVal")||"True"!=e[0].PrefVal.toString()),a.e.hasprop(e[0],"TotalDuration")&&!a.e.IsEmpty(e[0].TotalDuration)&&(this.Activities.TotalDuration=parseInt(e[0].TotalDuration.toString())),this.Activities.laststartdate=a.e.hasprop(e[0],"LastStartDate")&&!a.e.IsEmpty(e[0].LastStartDate)?new Date(e[0].LastStartDate.toString()):null,this.Activities.ViewAttachVisible=!1;try{var s=n.a.common.GetDataSet("RCV002",e[0].ActivityID);if(null!=s&&s.Tables.length>0&&s.Tables[0].length>0){var l;this.Activities.ViewAttachVisible=!0,this.Activities.ViewAttachments.AttachmentsList.Clear();for(var o=0;o<s.Tables[0].length;o++)Object(r.j)(s.Tables[0][o].IsProductImage)||((l=new C.AddAttachmentViewModel).AddAttachmentViewModel_2(this.Activities),l.AttachmentID=parseInt(s.Tables[0][o].FileID),l.ActualFileName=s.Tables[0][o].ActualFileName.toString(),l.FileExtension=s.Tables[0][o].FileExtension.toString(),l.FileDescription=s.Tables[0][o].FileDescription.toString(),l.FilePath=a.e.GetPath(s.Tables[0][o].GUID.toString()+"."+s.Tables[0][o].FileExtension.toString()),l.Guid=s.Tables[0][o].GUID.toString(),l.RelativeFileName=s.Tables[0][o].RelativeFileName.toString(),l.IsProductImage=Object(r.j)(s.Tables[0][o].IsProductImage),s.Columns[0].Contains("LocationID")&&(l.Location.SelectedValue=parseInt(null==s.Tables[0][o].LocationID?0:s.Tables[0][o].LocationID)),s.Columns[0].Contains("cValidtill")&&""!=s.Tables[0][o].cValidtill.toString()&&(l.Validtill.Date=new Date(s.Tables[0][o].cValidtill),l.ValidTillText=new Date(s.Tables[0][o].cValidtill).ToString(n.a.SessionManager.Preferences["Date Format"])),s.Columns[0].Contains("cIssDate")&&""!=s.Tables[0][o].cIssDate.toString()&&(l.IssueDate.Date=new Date(s.Tables[0][o].cIssDate)),s.Columns[0].Contains("Remarks")&&(l.Remarks.Text=s.Tables[0][o].Remarks.toString()),s.Columns[0].Contains("RefNum")&&(l.RefNum.Text=s.Tables[0][o].RefNum.toString()),s.Columns[0].Contains("DocNo")&&(l.DocNo.Text=s.Tables[0][o].DocNo.toString()),s.Columns[0].Contains("Type")&&""!=s.Tables[0][o].Type.toString()&&(l.AttType.SelectedValue=parseInt(s.Tables[0][o].Type.toString())),s.Columns[0].Contains("status")&&""!=s.Tables[0][o].status.toString()&&(l.stat.SelectedValue=s.Tables[0][o].status.toString()),s.Columns[0].Contains("DivisionID")&&(l.Division.SelectedValue=parseInt(null==s.Tables[0][o].DivisionID?0:s.Tables[0][o].DivisionID)),s.Columns[0].Contains("CreatedBy")&&""!=s.Tables[0][o].CreatedBy.toString()&&(l.CreatedBy=s.Tables[0][o].CreatedBy.toString()),s.Columns[0].Contains("CreatedDate")&&!a.e.IsEmpty(s.Tables[0][o].CreatedDate)&&a.e.isValidDate(s.Tables[0][o].cCreatedDate.toString())&&(l.CreatedDate=new Date(s.Tables[0][o].cCreatedDate.toString()).ToString(n.a.SessionManager.Preferences["Date Format"]+" hh:mm:ss tt")),s.Columns[0].Contains("ModifiedBy")&&!a.e.IsEmpty(s.Tables[0][o].ModifiedBy)&&(l.ModifiedBy=s.Tables[0][o].ModifiedBy.toString()),s.Columns[0].Contains("ModifiedDate")&&!a.e.IsEmpty(s.Tables[0][o].ModifiedDate)&&a.e.isValidDate(s.Tables[0][o].cModifiedDate.toString())&&(l.ModifiedDate=new Date(s.Tables[0][o].cModifiedDate.toString()).ToString(n.a.SessionManager.Preferences["Date Format"]+" hh:mm:ss tt")),s.Columns[0].Contains("IsDefaultImage")&&""!=s.Tables[0][o].IsDefaultImage.toString()&&(l.IsDefaultImage=Object(r.j)(s.Tables[0][o].IsDefaultImage)),s.Columns[0].Contains("IsDefaultImage")&&""!=s.Tables[0][o].IsDefaultImage.toString()&&(l.IsDefaultImage=Object(r.j)(s.Tables[0][o].IsDefaultImage)),s.Columns[0].Contains("HasThumb")&&(l.HasThumb=Object(r.j)(s.Tables[0][o].HasThumb)),this.Activities.ViewAttachments.AttachmentsList.push(l))}}catch(w){}this.Activities.ButtonReschedule.Visible="413"!=e[0].ActStatus.toString(),this.Activities.Fields.Clear(),this.Activities.LoadCustomFields(this.CCID),this.Activities.ButtonSave.Visible=e[0].UserName.toString().toLowerCase()!=n.a.SessionManager.UserName.toLowerCase()?n.a.SessionManager.IsActionAssigned(1e3,"Can_edit_All_Activities"):n.a.SessionManager.IsActionAssigned(1e3,"Activity_Edit");for(var h,c=null,d=null,S=null,D=null,g=null,p=null,b=0;b<this.Activities.Fields.length;b++){var f=this.Activities.Fields[b];if(f instanceof m.d&&((c=f).Text=e[0][c.SysColumnName].toString()),f instanceof I.b){g=f;try{g.Date=new Date(e[0][g.SysColumnName].toString())}catch(w){var A=new Date;g.Date=new Date(1900,1,1,A.getHours(),A.getMinutes(),A.getSeconds(),A.getMilliseconds())}}else if(f instanceof I.a){var V=void 0;d=f,""!=e[0][d.SysColumnName].toString()&&a.e.isValidDate(e[0][d.SysColumnName].toString())&&(V=e[0][d.SysColumnName].toString(),d.Date=V)}f instanceof u.e&&((S=f).SelectedValue=e[0][S.SysColumnName].toString()),f instanceof v.a&&((p=f).TextBox.Text=e[0][p.SysColumnName].toString()),f instanceof m.c&&((D=f).Text=e[0][D.SysColumnName].toString()),f instanceof y.b&&((h=f).SelectedValue=a.e.hasprop(e[0],h.SysColumnName+"_Key")&&null!=e[0][h.SysColumnName+"_Key"]&&""!=e[0][h.SysColumnName+"_Key"].toString()?parseInt(e[0][h.SysColumnName+"_Key"]):0)}this.Activities.IsPopup?(this.ActVisibility=!1,this.ActivitiesPopup=this.Activities,n.a.page.ShowDialog(this.ActivitiesPopup,T.ActivitiesComponent,{ShowCenter:!0})):(this.ActVisibility=!0,n.a.page.ShowDialog(this.Activities,T.ActivitiesComponent,{})),this.Activities.SetActions();try{""!=e[0].NodeID.toString()&&0!=parseInt(e[0].NodeID)&&this.Activities.FilterSupplierBasedonCRMProduct(this.CCID,parseInt(e[0].NodeID))}catch(M){}}}},{key:"DeleteData",value:function(e){if(null!=e){this.Activities.ActivityID=parseInt(e[0].ActivityID.toString()),this.Activities.ActivityType.SelectedValue=e[0].ActivityTypeID.toString(),this.ActivityID=this.Activities.ActivityID,this.CCID=parseInt(e[0].CostCenterID);if(!n.a.SessionManager.IsActionAssigned(1e3,"Activity_Delete"))return;if(this.res=confirm("Are you Sure You Want To Delete this Activity ?")?"Yes":"No","Yes"==this.res){var t=(new b.a).DeleteActivity(this.ActivityID,this.CCID);this.MessageVisibility=!0,this.DisplayMessage=t.RetValue>0?t.Message:"",this.ActivityID=0,this.res=""}else this.DisplayMessage=""}}},{key:"OnMessageCallBack",value:function(){this.res="Yes"}},{key:"RadioButtonChanged",value:function(e){for(var t=this.MonthlyData,i=0;i<t.length;i++)if(t[i].Visible=!1,"Summary"==e.toString()){if(t[i].Cells.length>1)for(var s=1;s<t[i].Cells.length;s++)if(null!=t[i].Cells[s].Value&&!a.e.IsEmpty(t[i].Cells[s].Value.toString())){t[i].Visible=!0;break}}else t[i].Visible=!0;this.MonthlyData=t}},{key:"getToday",value:function(e){if("timeGridDay"==e.toString()){this.TempCurrDate=new Date;try{this.BuildFilter(),this.dset=this.ReturnDataset(this.CCID,this.iStatus,this.Type,0,this.TempCurrDate,null,null,this.Subject)}catch(t){}this.CurrDate=this.TempCurrDate.getDayName.toString()+", "+this.TempCurrDate.getMonth()+" "+this.TempCurrDate.getDate()+", "+this.TempCurrDate.getFullYear(),this.UIDate=this.TempCurrDate,this.GoToDate.Date=this.TempCurrDate,this.LoadDayViewData()}else if("dayGridMonth"==e.toString())this.TempCurrMonth=new Date,this.BuildFilter(),this.dset=this.ReturnDataset(this.CCID,this.iStatus,this.Type,0,this.TempCurrMonth,null,null,this.Subject),this.MonthViewData();else if("timeGridWeek"==e.toString()){this.TempCurrWeek=(new Date).AddDays(7),this.dtEndDate=(new Date).AddDays(6);try{this.BuildFilter(),this.dset=this.ReturnDataset(this.CCID,this.iStatus,this.Type,0,this.TempCurrWeek,this.TempCurrWeek,this.dtEndDate,this.Subject)}catch(i){}this.CurrWeek=this.TempCurrWeek.toLocaleDateString()+"  -  "+this.dtEndDate.toLocaleDateString(),this.WeekViewData()}}},{key:"onCheckChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if("timeGridDay"==e.toString()&&1==t){this.TempCurrDate=this.TempCurrDate.AddDays(1);try{this.BuildFilter(),this.dset=this.ReturnDataset(this.CCID,this.iStatus,this.Type,0,this.TempCurrDate,null,null,this.Subject)}catch(i){}this.CurrDate=this.TempCurrDate.getDayName.toString()+", "+this.TempCurrDate.getMonth()+" "+this.TempCurrDate.getDate()+", "+this.TempCurrDate.getFullYear(),this.UIDate=this.TempCurrDate,this.GoToDate.Date=this.TempCurrDate,this.LoadDayViewData()}else if("timeGridDay"==e.toString()&&-1==t){this.TempCurrDate=this.TempCurrDate.AddDays(-1);try{this.BuildFilter(),this.dset=this.ReturnDataset(this.CCID,this.iStatus,this.Type,0,this.TempCurrDate,null,null,this.Subject)}catch(s){}this.CurrDate=this.TempCurrDate.getDayName.toString()+", "+this.TempCurrDate.getMonth()+" "+this.TempCurrDate.getDate()+", "+this.TempCurrDate.getFullYear(),this.LoadDayViewData(),this.UIDate=this.TempCurrDate,this.GoToDate.Date=this.TempCurrDate}else if("dayGridMonth"==e.toString())this.TempCurrMonth=this.TempCurrMonth.AddMonths(t),this.BuildFilter(),this.dset=this.ReturnDataset(this.CCID,this.iStatus,this.Type,0,this.TempCurrMonth,null,null,this.Subject),this.MonthViewData();else if("timeGridWeek"==e.toString()&&1==t){this.TempCurrWeek=this.TempCurrWeek.AddDays(7),this.dtEndDate=this.TempCurrWeek.AddDays(6);try{this.BuildFilter(),this.dset=this.ReturnDataset(this.CCID,this.iStatus,this.Type,0,this.TempCurrWeek,this.TempCurrWeek,this.dtEndDate,this.Subject)}catch(n){}this.CurrWeek=this.TempCurrWeek.toLocaleDateString()+"  -  "+this.dtEndDate.toLocaleDateString(),this.WeekViewData()}else if("timeGridWeek"==e.toString()&&-1==t){this.TempCurrWeek=this.TempCurrWeek.AddDays(-7),this.dtEndDate=this.TempCurrWeek.AddDays(6);try{this.BuildFilter(),this.dset=this.ReturnDataset(this.CCID,this.iStatus,this.Type,0,this.TempCurrWeek,this.TempCurrWeek,this.dtEndDate,this.Subject)}catch(a){}this.CurrWeek=this.TempCurrWeek.toLocaleDateString()+"  -  "+this.dtEndDate.toLocaleDateString(),this.WeekViewData()}else if("Refresh"==e.toString()){this.TempCurrWeek=this.TempCurrWeek.AddDays(-7),this.dtEndDate=this.TempCurrWeek.AddDays(6);try{this.TempCurrWeek.getMonth()!=this.dtEndDate.getMonth()&&(this.BuildFilter(),this.dset=this.ReturnDataset(this.CCID,this.iStatus,this.Type,0,this.TempCurrWeek,this.TempCurrWeek,this.dtEndDate,this.Subject))}catch(r){}this.CurrWeek=this.TempCurrWeek.toLocaleDateString()+"  -  "+this.dtEndDate.toLocaleDateString(),this.WeekViewData()}}},{key:"OnDateChanged",value:function(e){if(this.GoToDate.Date!=this.UIDate){this.TempCurrDate=this.GoToDate.Date;try{this.BuildFilter(),this.dset=this.ReturnDataset(this.CCID,this.iStatus,this.Type,0,this.TempCurrDate,null,null,this.Subject)}catch(t){}this.CurrDate=this.TempCurrDate.getDayName.toString()+", "+this.TempCurrDate.getMonth()+" "+this.TempCurrDate.getDate()+", "+this.TempCurrDate.getFullYear(),this.UIDate=this.TempCurrDate,this.LoadDayViewData()}}},{key:"onSelectionChanged",value:function(e){if(Logger.InfoLog("RCalenderViewModel:: onSelectionChanged Begin"),!this.IgnoreSelectionChange)try{this.CostCenterID=parseInt(this.Features.SelectedValue),this.BuildFilter(),this.dset=this.ReturnDataset(this.CCID,this.iStatus,this.Type,0,this.UIDate,null,null,this.Subject),this.LoadDayViewData(),this.WeekViewData(),this.MonthViewData(),this.ActivityID=0,this.Activities.ClearFields(),this.Activities.Recur=new c.RecurAppointmentViewModel(this.Activities),this.ActVisibility=!this.Activities.IsPopup,1e3==parseInt(this.Features.SelectedValue)?this.Activities.CustomerType.Visible=!0:(this.Activities.CustomerType.Visible=!1,null!=this.Activities.CRMCustomer.Code&&this.Activities.CRMCustomer.Code.Visible&&(this.Activities.CRMCustomer.Code.Visible=!1,this.Activities.CRMCustomer.TextVisible=!0))}catch(t){Logger.InfoLog("RCalenderViewModel:: onSelectionChanged Exception"+t)}}},{key:"OnCellEditEnding",value:function(e){}},{key:"customQueryFilter",value:function(e){var t=this,i=e;if(null!=this.Userlist&&null!=this.Userlist.SelectedValue&&"-100"!=this.Userlist.SelectedValue){var s=this.dset.Tables[1].filter((function(e){return e.USERID==t.Userlist.SelectedValue}));i=e.filter(s.length>0?function(e){return e.ActStartDate>=new Date(t.CurrDate).ToString("dd/MMM/yyyy")&&e.ActStartDate<new Date(t.CurrDate).AddDays(1).ToString("dd/MMM/yyyy")&&e.AssignUserID==t.Userlist.SelectedValue&&s.map((function(e){return e.ISFROMACTIVITY})).some((function(t){return t.Contains(e.ActivityId)}))}:function(e){return e.ActStartDate>=new Date(t.CurrDate).ToString("dd/MMM/yyyy")&&e.ActStartDate<new Date(t.CurrDate).AddDays(1).ToString("dd/MMM/yyyy")&&e.AssignUserID==t.Userlist.SelectedValue})}else i=e.filter((function(e){return e.ActStartDate>=new Date(t.CurrDate).ToString("dd/MMM/yyyy")&&e.ActStartDate<new Date(t.CurrDate).AddDays(1).ToString("dd/MMM/yyyy")}));return i}},{key:"LoadDayViewData",value:function(){var e=this,t="",i=!1,s=!1,n=0;if(null!=this.Userlist&&null!=this.Userlist.SelectedValue&&"-100"!=this.Userlist.SelectedValue){var l=this.dset.Tables[1].filter((function(t){return t.USERID==e.Userlist.SelectedValue}));if(l.length>0){var u="";l.forEach((function(t){0==u.length?(e.dset.Tables[0].filter((function(e){return e.ActivityId==t.ISFROMACTIVITY})),u="(ActivityId ='"+t.ISFROMACTIVITY+"'"):(e.dset.Tables[0].filter((function(e){return e.ActivityId==t.ISFROMACTIVITY})),u=u+" or ActivityId ='"+t.ISFROMACTIVITY+"' ")})),u.length>0&&(u+=")"),t=" AND "+u}else t=" AND  AssignUserID='"+this.Userlist.SelectedValue+"' "}""!=t?(new Date(this.CurrDate).ToString("dd/MMM/yyyy"),new Date(this.CurrDate).AddDays(1).ToString("dd/MMM/yyyy")):(new Date(this.CurrDate).ToString("dd/MMM/yyyy"),new Date(this.CurrDate).AddDays(1).ToString("dd/MMM/yyyy")),this.DayColumns.Clear();var h={Alignment:"Left",FontFamilyName:"Arial",FontSize:12,BackColor:"White",ForeColor:"Black"},c=[];c.push(this.GetColumn("C0","Time Of Day","STRING",h,100)),t="";var d=0,S="08:00:00 AM",C="08:00:00 AM";if(null!=this._ScreenObject.Data&&this._ScreenObject.Data.Tables.length>4){var m=this.ScreenObject.Data.Tables[4].filter((function(e){return"ActivityDuration"==e.Name}));null!=m&&m.length>0&&!a.e.IsEmpty(m[0].Value.toString())&&(d=parseInt(m[0].Value.toString())),null!=(m=this.ScreenObject.Data.Tables[4].filter((function(e){return"DayViewRepeatOn"==e.Name})))&&m.length>0&&!a.e.IsEmpty(m[0].Value.toString())&&parseInt(m[0].Value.toString())>5e4&&(t="CCNID"+(parseInt(m[0].Value.toString())-5e4)),null!=(m=this.ScreenObject.Data.Tables[4].filter((function(e){return"ShowAllRepeatNodes"==e.Name})))&&m.length>0&&!a.e.IsEmpty(m[0].Value.toString())&&(i=Object(r.j)(m[0].Value.toString())),null!=(m=this.ScreenObject.Data.Tables[4].filter((function(e){return"DonotOverlapActivities"==e.Name})))&&m.length>0&&!a.e.IsEmpty(m[0].Value.toString())&&(s=Object(r.j)(m[0].Value.toString())),null!=(m=this.ScreenObject.Data.Tables[4].filter((function(e){return"DayViewColumnWidth"==e.Name})))&&m.length>0&&!a.e.IsEmpty(m[0].Value.toString())&&(n=parseInt(m[0].Value.toString())),null!=(m=this.ScreenObject.Data.Tables[4].filter((function(e){return"ActivityStartTime"==e.Name})))&&m.length>0&&!a.e.IsEmpty(m[0].Value.toString())&&(S=m[0].Value.toString()),null!=(m=this.ScreenObject.Data.Tables[4].filter((function(e){return"ActivityEndTime"==e.Name})))&&m.length>0&&!a.e.IsEmpty(m[0].Value.toString())&&(C=m[0].Value.toString()),n>0||(n=150)}a.e.IsEmpty(t)?""==t&&c.push(this.GetColumn("C2","Activity","CONTROL",h,150)):i&&null!=this._ScreenObject.Data&&this._ScreenObject.Data.Tables.length>6&&this._ScreenObject.Data.Tables[6].length>0?this._ScreenObject.Data.Tables[6].forEach((function(t){return c.push(e.GetColumn("C"+t.NodeID.toString(),t.Name.toString(),"CONTROL",h,n))})):null!=this.dset&&this.dset.Tables.length>0&&this.dset.Tables[0].length>0&&this.customQueryFilter(this.dset.Tables[0]).length>0&&this.customQueryFilter(this.dset.Tables[0]).ToTable(!0,t+"_Key",t).Rows.forEach((function(i){return c.push(e.GetColumn("C"+i[t+"_Key"].toString(),i[t].toString(),"CONTROL",h,n))})),this.DayColumns=c,this.MonthlyData.Clear();var D=null,g=null;0==d&&(d=30);var p,I=a.e.diffparseDate(Date.Today().ToString("dd/MMM/yyyy")+" "+C).Subtract(a.e.diffparseDate(Date.Today().ToString("dd/MMM/yyyy")+" "+S)).TotalMinutes/d;I<=0&&(I=1440/d+I);for(var y=0;y<I;y++)(D=new o.d(this.DayColumns.length,30)).Cells[0].Text=a.e.diffparseDate(Date.Today().ToString("dd/MMM/yyyy")+" "+S).AddMinutes(y*d).ToString("hh:mm:ss ss"),this.MonthlyData.push(D);null!=this.dset&&this.dset.Tables.length>0&&this.dset.Tables[0].length>0&&function(){var i=[];if((i=e.customQueryFilter(e.dset.Tables[0])).length>0)for(var n=function(n){s?((p=e.MonthlyData.filter((function(e){return new Date("01-JAN-1900 "+e.Cells[0].Text)>=new Date(i[n].ActStartTime)&&new Date("01-JAN-1900 "+e.Cells[0].Text)<new Date(i[n].ACTEndTime)}))).forEach((function(s){(D=s).DataRow=i[0],D.Cells.length>2?(g=e.DayColumns.find((function(e){return e.ID=="C"+i[n][t+"_Key"].toString()})),D.Cells[e.DayColumns.indexOf(g)].Value+=","+i[n].ActivityID.toString(),p.First()==s&&(D.Cells[e.DayColumns.indexOf(g)].Text+=",0~"+i[n].ActivityID.toString())):(D.Cells[1].Value+=","+i[n].ActivityID.toString(),p.First()==s&&(D.Cells[1].Text+=",0~"+i[n].ActivityID.toString()))})),null==p&&((D=new o.d(e.DayColumns.length,80)).Cells[0].Text=new Date(i[n].ActStartTime).ToString("hh:mm:ss ss"),D.Cells.length>2?(g=e.DayColumns.find((function(e){return e.ID=="C"+i[n][t+"_Key"].toString()})),D.Cells[e.DayColumns.indexOf(g)].Value+=","+i[n].ActivityID.toString(),D.Cells[e.DayColumns.indexOf(g)].Text+=",0~"+i[n].ActivityID.toString()):(D.Cells[1].Value+=","+i[n].ActivityID.toString(),D.Cells[1].Text+=",0~"+i[n].ActivityID.toString()),e.MonthlyData.push(D))):((D=e.MonthlyData.find((function(e){return e.Cells[0].Text==new Date(i[n].ActStartTime).ToString("hh:mm:ss ss")}))).DataRow=i[0],null!=D?D.Cells.length>2?(g=e.DayColumns.find((function(e){return e.ID=="C"+i[n][t+"_Key"].toString()})),D.Cells[e.DayColumns.indexOf(g)].Value+=","+i[n].ActivityID.toString(),D.Cells[e.DayColumns.indexOf(g)].Text+=",0~"+i[n].ActivityID.toString()):(D.Cells[1].Value+=","+i[n].ActivityID.toString(),D.Cells[1].Text+=",0~"+i[n].ActivityID.toString()):((D=new o.d(e.DayColumns.length,80)).Cells[0].Text=new Date(i[n].ActStartTime).ToString("hh:mm:ss ss"),D.Cells.length>2?(g=e.DayColumns.find((function(e){return e.ID=="C"+i[n][t+"_Key"].toString()})),D.Cells[e.DayColumns.indexOf(g)].Value+=","+i[n].ActivityID.toString(),D.Cells[e.DayColumns.indexOf(g)].Text+=",0~"+i[n].ActivityID.toString()):(D.Cells[1].Value+=","+i[n].ActivityID.toString(),D.Cells[1].Text+=",0~"+i[n].ActivityID.toString()),e.MonthlyData.push(D)))},a=0;a<i.length;a++)n(a)}()}},{key:"GetColumn",value:function(e,t,i,s,a){var r=new o.b;r.DateType=n.a.SessionManager.Preferences["Date Format"];var u=new l.b;return u.gridLines=3,u.ID=e,u.FieldName=e,u.HeaderText=n.a.GetResource(t),u.HeaderAppearance={Alignment:"Center",FontFamilyName:"Arial",FontSize:12,IsBold:!0,BackColor:"White",ForeColor:"Black"},u.DataAppearance=s,u.HeaderHeight=22,u.width=a,u.DataFormat=r,u.ColumnType=i,u}},{key:"MoveItem",value:function(e){switch(e){case"Left1":-1!=this.LOSelectedIndex&&(this.lstOwnersRight.Insert(this.lstOwnersRight.length,this.lstOwnersLeft[this.LOSelectedIndex]),this.lstOwnersLeft.RemoveAt(this.LOSelectedIndex));break;case"Right1":-1!=this.ROSelectedIndex&&(this.lstOwnersLeft.Insert(this.lstOwnersLeft.length,this.lstOwnersRight[this.ROSelectedIndex]),this.lstOwnersRight.RemoveAt(this.ROSelectedIndex))}}},{key:"FillOwnersLeftList",value:function(){this.lstOwnersLeft=[],this.lstOwnersRight=[];var e=new N;e.SysColumn="Customer",e.UserColumnName="Customer",this.lstOwnersLeft.push(e),(e=new N).SysColumn="Subject",e.UserColumnName="Subject",this.lstOwnersLeft.push(e),(e=new N).SysColumn="Status",e.UserColumnName="Status",this.lstOwnersLeft.push(e),(e=new N).SysColumn="Location",e.UserColumnName="Location",this.lstOwnersLeft.push(e),(e=new N).SysColumn="Remarks",e.UserColumnName="Remarks",this.lstOwnersLeft.push(e),(e=new N).SysColumn="StartTime",e.UserColumnName="StartTime",this.lstOwnersLeft.push(e),(e=new N).SysColumn="EndTime",e.UserColumnName="EndTime",this.lstOwnersLeft.push(e)}},{key:"BuildTempDataTable",value:function(){var e=this;this.ScreenObject.LoadScreen_2(this,1e3),267==this.FeatureID?this.ViewType.Items.push(u.d.ComboBoxItems_2("MonthView","1")):(this.ViewType.Items.push(u.d.ComboBoxItems_2("MonthView","1")),this.ViewType.Items.push(u.d.ComboBoxItems_2("DayView","2")),this.ViewType.Items.push(u.d.ComboBoxItems_2("WeekView","3"))),this.ViewType.SelectedValue="1";var t=null,i=this.ScreenObject.Data.Tables[4].filter((function(e){return"CalendarFeaturesList"==e.Name}));if(null!=i&&i.length>0&&null!=i&&i.length>0&&(t=i[0].Value.toString().split(";")),null!=(i=this.ScreenObject.Data.Tables[4].filter((function(e){return"ActivityAsPopup"==e.Name})))&&i.length>0&&(this.Activities.IsPopup=""!=i[0].Value.toString()&&"True"==i[0].Value.toString(),this.ActVisibility=!this.Activities.IsPopup),267==this.FeatureID){var s=n.a.common.GetDataTable("RCAL001","");if(null!=s&&s.length>0)for(var r=0;r<s.length;r++)this.Features.Items.push(u.d.ComboBoxItems_2(s[r].Name.toString(),s[r].FeatureID.toString()));this.Features.SelectedValue="40089"}else{if(this.Features.Items.push(u.d.ComboBoxItems_2("All","-100")),this.Features.Items.push(u.d.ComboBoxItems_2("Calendar","1000")),null!=t&&t.length>0)for(var l=function(i){"86"==t[i].toString()?e.Features.Items.push(u.d.ComboBoxItems_2("Leads","86")):"73"==t[i].toString()?e.Features.Items.push(u.d.ComboBoxItems_2("Cases","73")):"88"==t[i].toString()?e.Features.Items.push(u.d.ComboBoxItems_2("Campaign","88")):"89"==t[i].toString()?e.Features.Items.push(u.d.ComboBoxItems_2("Opportunity","89")):"83"==t[i].toString()?e.Features.Items.push(u.d.ComboBoxItems_2("CRM-Customers","83")):"65"==t[i].toString()?e.Features.Items.push(u.d.ComboBoxItems_2("Contacts","65")):"122"==t[i].toString()?e.Features.Items.push(u.d.ComboBoxItems_2("FollowUp","122")):"94"==t[i].toString()?e.Features.Items.push(u.d.ComboBoxItems_2("Tenant","94")):"95"==t[i].toString()?e.Features.Items.push(u.d.ComboBoxItems_2("Sales Contract","95")):"128"==t[i].toString()?e.Features.Items.push(u.d.ComboBoxItems_2("Campaign Events","128")):e.ScreenObject.Data.Tables[8].length>0&&e.ScreenObject.Data.Tables[8].forEach((function(s){t[i].toString()!=s.CostCenterID.toString()||e.Features.Items.push(u.d.ComboBoxItems_2(s.DocumentName.toString(),s.CostCenterID.toString()))}))},o=0;o<t.length;o++)l(o);this.Features.SelectedValue="-100"}if(this.Status.Items.push(u.d.ComboBoxItems_2("All","-100")),this.Status.Items.push(u.d.ComboBoxItems_2("Open","412")),this.Status.Items.push(u.d.ComboBoxItems_2("Confirmed","8")),this.Status.Items.push(u.d.ComboBoxItems_2("Close","413")),this.Status.Items.push(u.d.ComboBoxItems_2("Re-Schedule","414")),this.Status.Items.push(u.d.ComboBoxItems_2("Open/Re-Schedule","-101")),this.Status.SelectedValue="-101",this.ScreenObject.Data.Columns[7].Contains("CalendarXML")&&this.ScreenObject.Data.Tables[7].length>0&&""!=a.e.StringValue(this.ScreenObject.Data.Tables[7][0][this.ScreenObject.Data.Columns[7][0]])){new a.f;var h=new a.f;h.LoadXml(this.ScreenObject.Data.Tables[7][0][this.ScreenObject.Data.Columns[7][0]].toString()),null!=h&&("DefaultView"==h.DocumentElement.children[0].attributes[0].name&&(this.ViewType.SelectedValue=h.DocumentElement.children[0].attributes[0].value,this.onCheckChange("")),"FeatureDefaultView"==h.DocumentElement.children[0].attributes[1].name&&(this.Features.SelectedValue=267==this.FeatureID?"40089":h.DocumentElement.children[0].attributes[1].value),"DefaultStatus"==h.DocumentElement.children[0].attributes[2].name&&(this.Status.SelectedValue=h.DocumentElement.children[0].attributes[2].value))}else null!=(i=this.ScreenObject.Data.Tables[4].filter((function(e){return"CalendarDefaultView"==e.Name})))&&i.length>0&&(this.ViewType.SelectedValue=null!=i[0].Value&&""!=i[0].Value.toString()?i[0].Value.toString():"1",this.onCheckChange("")),null!=(i=this.ScreenObject.Data.Tables[4].filter((function(e){return"DefaultStatus"==e.Name})))&&i.length>0&&(this.Status.SelectedValue=null!=i[0].Value&&""!=i[0].Value.toString()?i[0].Value.toString():"101"),null!=(i=this.ScreenObject.Data.Tables[4].filter((function(e){return"FeatureDefaultView"==e.Name})))&&i.length>0&&(this.Features.SelectedValue=267==this.FeatureID?null!=i[0].Value&&""!=i[0].Value.toString()?i[0].Value.toString():"40089":null!=i[0].Value&&""!=i[0].Value.toString()?i[0].Value.toString():"-100");this.ShowType.Items.push(u.d.ComboBoxItems_2("All","-100")),this.ShowType.Items.push(u.d.ComboBoxItems_2("All Appointments","-200")),this.ShowType.Items.push(u.d.ComboBoxItems_2("All Tasks","-300")),this.ShowType.Items.push(u.d.ComboBoxItems_2("My Appointments","-400")),this.ShowType.Items.push(u.d.ComboBoxItems_2("My Tasks","-500")),this.ShowType.Items.push(u.d.ComboBoxItems_2("Assigned Appointments","-600")),this.ShowType.Items.push(u.d.ComboBoxItems_2("Assigned Tasks ","-700")),this.ShowType.SelectedValue="-100",this.CustomizeVisibility=!1;var c=n.a.common.GetDataSetQuery(" EXEC spADM_GetUserNameIDbyOwner "+n.a.SessionManager.UserID+" ");if(this.Userlist.Items.push(u.d.ComboBoxItems_2("All","-100")),null!=c&&c.Tables.length>0&&c.Tables[0].length>0&&c.Columns[0].Contains("UserName"))for(var d=0;d<c.Tables[0].length;d++)this.Userlist.Items.push(u.d.ComboBoxItems_2(c.Tables[0][d].UserName.toString(),c.Tables[0][d].UserID.toString()));this.Userlist.SelectedValue="-100",this.FillOwnersLeftList(),this.onSelectionChanged("")}},{key:"WeekViewData",value:function(){var e=null;this.WeekData.Clear();var t=[];null!=this.dset&&this.dset.Tables.length>0&&this.dset.Tables[0].length>0&&(t=this.dset.Tables[0]);for(var i=0,s=0,n=this.dtEndDate.getDate()-this.TempCurrWeek.getDate()+1,a=this.TempCurrWeek,r=1;r<=n;r++){if((e={}).Label=this.arrWeekName[i]+"  "+a.toLocaleDateString(),e.Column="0",e.Row=s.toString(),e.LabelCollection=[],"ActStartDate>='"+new Date(a).ToString("dd/MMM/yyyy")+"' AND  ActStartDate<'"+new Date(a).AddDays(1).ToString("dd/MMM/yyyy")+"' ",null!=this.Userlist&&null!=this.Userlist.SelectedValue&&"-100"!=this.Userlist.SelectedValue&&" AND AssignUserID='"+this.Userlist.SelectedValue+"'",t.length>0)for(var l=0;l<t.length;l++){var o=new D.a;o.Row=l.toString(),o.Column="0",o.ColumnSpan="3",o.Label=t[l].ActSubject.toString()+", Customer:"+t[l].CustomerID.toString()+", Time:"+t[l].ActStartTime.toString(),o.ClickCommand.Subscribe(this,"onClick"),o.DBColumnName=t[l].ActivityID.toString(),e.LabelCollection.push(o)}else{var u=new D.a;u.Row="0",u.Column="0",u.Label=" No Appointments ",e.LabelCollection.push(u)}s++,i++,this.WeekData.push(e),a=a.AddDays(1)}}},{key:"onClick_1",value:function(e){if(null!=e){var t=[];null!=this.dset&&this.dset.Tables.length>0&&this.dset.Tables[0].length>0&&(t=this.dset.Tables[0].DefaultView),t.filter((function(t){return t.ActivityID==e.toString()})),t.length>0&&this.LoadData(t)}}},{key:"onClick",value:function(){var e=this;if(null!=this.SelectedVoucher){var t=[];null!=this.dset&&this.dset.Tables.length>0&&this.dset.Tables[0].length>0&&(t=this.dset.Tables[0].DefaultView),t.filter((function(t){return t.ActivityID==e.SelectedVoucher.ActivityID})),t.length>0&&this.LoadData(t)}}},{key:"OnDataClick",value:function(e){if(null!=e.Content&&"Delete"==e.Content){var t=[];null!=this.dset&&this.dset.Tables.length>0&&this.dset.Tables[0].length>0&&(t=this.dset.Tables[0].DefaultView),t.filter((function(t){return t.ActivityID==e.ColumnIndex})),null!=t&&t.length>0&&(this.DeleteData(t),null!=this.LoadUICallBack&&this.LoadUICallBack.Call(!0))}else this.onClick_1(e.Content)}},{key:"BuildFilter",value:function(){a.e.IsEmpty(this.Features.SelectedValue)||"0"==this.Features.SelectedValue.toString()||(this.CCID=parseInt(this.Features.SelectedValue)),a.e.IsEmpty(this.Status.SelectedValue)||"0"==this.Status.SelectedValue.toString()||(this.iStatus=parseInt(this.Status.SelectedValue)),a.e.IsEmpty(this.ShowType.SelectedValue)||"0"==this.ShowType.SelectedValue.toString()||(this.Type=parseInt(this.ShowType.SelectedValue)),null!=this.FSubject&&null!=this.FSubject.Text&&(this.Subject=this.FSubject.Text)}},{key:"MonthViewData",value:function(){var e,t=this;if(this._myAppointmentsList.Clear(),this.CurrMonth=this.TempCurrMonth.getMonthName()+" - "+this.TempCurrMonth.getFullYear(),267!=this.FeatureID){if(null!=this.dset&&this.dset.Tables.length>0){var i,s=this.dset.Tables[0].filter((function(e){return"1=1"+t.CCFilter}));if(i=s.length>0?s:this.dset.Tables[0],null!=this.Userlist.SelectedValue&&"-100"!=this.Userlist.SelectedValue){var r=this.dset.Tables[1];if((r=r.filter((function(e){return e.USERID==t.Userlist.SelectedValue}))).length>0){var l="";r.forEach((function(e){l=0==l.length?e.ISFROMACTIVITY:l+","+e.ISFROMACTIVITY})),i=i.filter((function(e){return r.map((function(e){return e.ISFROMACTIVITY})).Contains(e.ActivityID)}))}else i=i.filter((function(e){return e.AssignUserID==t.Userlist.SelectedValue||e.UserName==t.Userlist.Items.find((function(e){return e.Value==t.Userlist.SelectedValue})).Name}))}if(i.forEach((function(i){e=null!=i.ActStartDate&&""!=i.ActStartDate.toString()&&null!=i.ActStartDate.toString()?new Date(i.ActStartDate):new Date;var s={};s.AppointmentID=parseInt(i.ActivityID),s.StartTime=e,t.dset.Columns[0].Contains("UserName")&&(s.UserName=a.e.StringValue(i.UserName)),s.stDate=a.e.StringValue(i.ActStartDate),s.stTime=a.e.StringValue(i.ActStartTime),s.enDate=a.e.StringValue(i.ActEndDate),s.enTime=a.e.StringValue(i.ActEndTime),s.Status=a.e.StringValue(i.ActStatus),"412"==s.Status?s.StatusText="Open":"413"==s.Status?s.StatusText="Close":"414"==s.Status?s.StatusText="Re-Schedule":"Confirmed"==s.Status&&(s.StatusText="Confirmed"),s.Location=a.e.StringValue(i.Location),s.Subject=a.e.StringValue(i.ActSubject),s.Customer=a.e.StringValue(i.CustomerID),t._myAppointmentsList.push(s)})),this.dset.Tables.length>2)for(var o=0;o<this.dset.Tables[2].length;o++){var u={};u.AppointmentID=parseInt(this.dset.Tables[2][o].NodeID.toString()),u.StartTime=new Date(this.dset.Tables[2][o].startdate.toString()),u.IsProjectActivity=!0,u.UserName=n.a.SessionManager.UserName,u.stDate=a.e.StringValue(this.dset.Tables[2][o].startdate),u.stTime=Date.Today().toString(),u.enDate=a.e.StringValue(this.dset.Tables[2][o].enddate),u.enTime=Date.Today().toString(),u.Status=a.e.StringValue(this.dset.Tables[2][o].StatusID),"475"==u.Status?u.StatusText="In Process":"473"==u.Status?u.StatusText="Close":"474"==u.Status?u.StatusText="Hold":"472"==u.Status&&(u.StatusText="Open"),u.Location="",u.Subject=a.e.StringValue(this.dset.Tables[2][o].Code),u.Customer="",u.CCID=parseInt(this.dset.Tables[2][o].ccid.toString()),this._myAppointmentsList.push(u)}}if(null!=this.RefreshMonthView&&this.RefreshMonthView.Call(),this.getEvents(),!a.e.IsEmpty(this.CalenderControl)){var h=this.CalenderControl.calendarComponent.getApi();h.removeAllEventSources(),h.addEventSource(this.EventData),Array.from(this.CalenderControl.elementref.nativeElement.getElementsByClassName("fc-daygrid-event-harness")).forEach((function(e){e.addEventListener("contextmenu",t.CalenderControl.onRightClick.bind(t.CalenderControl)),e.addEventListener("dblclick",t.CalenderControl.ondblClick.bind(t.CalenderControl))}))}}else{var c=n.a.common.GetDataTable("RCAL002","");if(null!=c&&c.length>0)for(var d=0;d<c.length;d++){var S={};S.AppointmentID=parseInt(c[d].InvDocDetailsID),a.e.IsEmpty(c[d].dcAlpha1)||(S.StartTime=new Date(c[d].dcAlpha1)),S.UserName=c[d].CreatedBy.toString(),a.e.IsEmpty(c[d].dcAlpha1)||(S.stDate=new Date(c[d].dcAlpha1).ToString(n.a.SessionManager.Preferences["Date Format"]),S.stTime=new Date(c[d].dcAlpha2).ToString("HH:mm")),a.e.IsEmpty(c[d].dcAlpha3)||(S.enDate=new Date(c[d].dcAlpha3).ToString(n.a.SessionManager.Preferences["Date Format"]),S.enTime=new Date(c[d].dcAlpha4).ToString("HH:mm")),S.Status=c[d].StatusID.toString(),S.StatusText=c[d].Status.toString(),S.Subject="Attendance",S.Customer=c[d].EmpCode.toString()+" - "+c[d].EmpName.toString(),S.CCID=40089,this._myAppointmentsList.push(S)}}}},{key:"ReLoad",value:function(e){return e&&this.onSelectionChanged(""),!1}},{key:"ButtonInvite",get:function(){return this._ButtonInvite},set:function(e){this._ButtonInvite=e}},{key:"ButtonAppointment",get:function(){return this._ButtonAppointment},set:function(e){this._ButtonAppointment=e}},{key:"DayColumns",get:function(){return this._DayColumns},set:function(e){this._DayColumns!=e&&(this._DayColumns=e)}},{key:"MonthlyData",get:function(){return this._MonthlyData},set:function(e){this._MonthlyData!=e&&(this._MonthlyData=e)}},{key:"DayTemplates",get:function(){return this._DayTemplateList}},{key:"SelectedDate",get:function(){return this._SelectedDate},set:function(e){e!=this._SelectedDate&&(this._SelectedDate=e)}},{key:"ScreenObject",get:function(){return this._ScreenObject}},{key:"WeekData",get:function(){return this._WeekData}},{key:"SelectedVoucher",get:function(){return this._SelectedVoucher},set:function(e){e!=this._SelectedVoucher&&(this._SelectedVoucher=e)}},{key:"FSubject",get:function(){return this._FSubject},set:function(e){e!=this._FSubject&&(this._FSubject=e)}}]),p}(p.b),L=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this)).ButtonClick=new g.b,e.CheckedChanged=new g.b,e}return _createClass(i,[{key:"DayTemplate_1",value:function(e,t){this.DayNumberLabel=e,this.Parent=t}},{key:"DayTemplate_2",value:function(e,t,i){this.DayAppointmentsStack=e,this.Parent=i}},{key:"DayNumberLabel",get:function(){return this._DayNumberLabel},set:function(e){e!=this._DayNumberLabel&&(this._DayNumberLabel=e)}},{key:"DayAppointmentsStack",get:function(){return this._DayAppointmentsStack},set:function(e){e!=this._DayAppointmentsStack&&(this._DayAppointmentsStack=e)}}]),i}(p.b),N=function e(){_classCallCheck(this,e)},F=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.apply(this,arguments)).CCFilter="",e.FilterColName="",e}return _createClass(i,[{key:"CalenderReportFilterViewModel_1",value:function(e){this.Parent=e,this.LoadData(this.Parent.ScreenObject.Data.Tables[9])}},{key:"CalenderReportFilterViewModel_2",value:function(e,t){this.OParent=e,this.FilterColName=t,this.LoadData([].Tables[0])}},{key:"LoadData",value:function(e){var t=this;this.tree=[],this.CostCenterFilters=[],this.CostCenters=new u.e(0),null!=e&&e.length>0&&e.forEach((function(e){""!=e.FeatureID.toString()&&parseInt(e.FeatureID.toString())>5e4&&t.CostCenters.Items.push(u.d.ComboBoxItems_2(e.Name.toString(),e.FeatureID.toString()))})),this.CostCenters.SelectionChangedCommand.Subscribe(this,"OnCostCenterChange")}},{key:"RefreshCostCenterItems",value:function(){this.CostCenters.Items.Clear(),this.CostCenters.SelectedIndex=-1,this.CostCenterFilters.Clear(),null!=this.tree&&this.tree.Clear()}},{key:"FillCostCenterItems",value:function(e){var t=this;e.Items.forEach((function(e){null==t.CostCenters.Items.find((function(t){return t.Value==e.Value&&t.Parent==e.Parent}))&&t.CostCenters.Items.push(e)}))}},{key:"OnButtonClick",value:function(e){"FilterOK"==e?null!=this.Parent?(this.Parent.CCFilter=this.GetDimensionFilter("CCNID",!0),this.Parent.onSelectionChanged(""),this.Parent.ShowReportFilter=!1):this.CCFilter=a.e.IsEmpty(this.FilterColName)?this.GetDimensionFilter(this.FilterColName,!1):this.GetDimensionFilter("dcccnid",!1):"FilterCancel"==e&&null!=this.Parent&&(this.Parent.ShowReportFilter=!1)}},{key:"GetDimensionFilter",value:function(e,t){var i="";return this.CostCenterFilters.forEach((function(s){if((s.SelectedNodes.length>0||!s.DeleteButtonVisibility)&&s.CostCenterID>5e4&&s.SelectedNodes.length>0)if(i+=" AND ",1==s.SelectedNodes.length)i+=e+(s.CostCenterID-5e4)+t?"_Key=":"="+s.SelectedNodes[0].Id;else{i+=e+(s.CostCenterID-5e4)+t?"_Key":" IN (";for(var n=0;n<s.SelectedNodes.length;n++)n>0&&(i+=","),i+=s.SelectedNodes[n].Id;i+=")"}})),i.toString()}},{key:"SetCCFilters",value:function(e){this.CostCenterFilters.forEach((function(t){if(t.SelectedNodes.length>0&&null!=e.CostCenters.Items.find((function(e){return parseInt(e.Value)==t.CostCenterID}))){var i=e.CostCenterFilters.find((function(e){return e.CostCenterID==t.CostCenterID}));null!=i?(i.SelectedNodes=t.SelectedNodes,i.SelectedNodesTag=t.SelectedNodesTag):((i=(new _).CalCostCenterFilter_1(t.CostCenterID,t.CostCenter,e)).SelectedNodes=t.SelectedNodes,i.SelectedNodesTag=t.SelectedNodesTag,e.CostCenterFilters.push(i))}}))}},{key:"OnCostCenterChange",value:function(e){if(!a.e.IsEmpty(this.CostCenters.SelectedValue)&&null!=e&&-1!=parseInt(e)){var t=0;null==this.CostCenters.SelectedItem||a.e.IsEmpty(this.CostCenters.SelectedItem.Parent)||(t=a.e.Int(this.CostCenters.SelectedItem.Parent)),this.LoadCostCenterTree(parseInt(this.CostCenters.SelectedValue),t,0,null)}}},{key:"LoadCostCenterTree",value:function(e,t,i,s){this.tree.Clear();var r,l="";50002==this.CostCenterID&&"True"==n.a.SessionManager.Preferences.EnableLocationWise.toString()&&"True"==n.a.SessionManager.Preferences["LW Reports"]&&(l=a.e.IsEmpty(n.a.SessionManager.LocationWhere)?"NodeID IN (-1234)":"NodeID IN ("+n.a.SessionManager.LocationWhere+")"),null==s&&this.CostCenterFilters.forEach((function(t){t.CostCenterID!=e||(s=t.SelectedNodes)})),null==s?(r=new M.a).TreeViewModel_5(e,this,i,l,""):(r=new M.a).TreeViewModel_6(e,this,i,l,s,""),r.LookupTypeID=t,r.HeaderVisiblity=!1,r.OnNodeSelected||(r.OnNodeSelected=new g.b,r.OnNodeSelected.Subscribe(this,"OnNodeSelected")),this.tree.push(r)}}]),i}(function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this)).CheckChanged=new g.b,e.SelectedNodes=null,e.SelectedNode=null,e.SelectAllDocuments=!1,e.SelectAllDocVisible=!0,e.NodeSelectedCallBack=null,e}return _createClass(i,[{key:"CommandController",value:function(e){"MouseDoubleClick"==e.toString()&&(null==this.SelectedNode||this.SelectedNode.IsGroup||this.tree[0].SelectNode())}},{key:"Refresh",value:function(){null!=this.tree&&this.tree.length>0&&(this.tree[0].RefreshData=!0)}},{key:"OnNodeSelected",value:function(){var e=this,t=null;this.CostCenterFilters.forEach((function(i){i.CostCenterID==e.tree[0].CostCenterID&&(t=i)}));try{if(null==t&&((t=new _).CalCostCenterFilter_1(this.tree[0].CostCenterID,this.CostCenters.SelectedItem.Name,this),this.CostCenterFilters.push(t)),0==this.SelectedNodes.length)t.SelectedNodesTag="";else{t.SelectedNodes=this.SelectedNodes;var i="";this.SelectedNodes.forEach((function(e){e.Text.length>0&&!a.e.IsEmpty(e.Text[0])&&(i=""!=i?i+", "+e.Text[0]:e.Text[0]).length>140&&(i+=" . . .")})),0==i.length&&(i="["+n.a.GetResource("Filter").toString().toUpperCase()+"]"),t.SelectedNodesTag=i}}catch(s){}null!=this.NodeSelectedCallBack&&this.NodeSelectedCallBack.Call()}},{key:"AddCostCenterFilter",value:function(e){try{var t=this.CostCenters.Items.find((function(t){return t.Value==e.toString()})),i=null!=t?t.Name:"",s=new _;s.CalCostCenterFilter_1(e,i,this),this.CostCenterFilters.push(s)}catch(n){}}},{key:"ClearSelectedNodes",set:function(e){this.tree.length>0&&(this.tree[0].ClearAllSelectedNodes=!this.tree[0].ClearAllSelectedNodes)}}]),i}(p.b)),_=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.apply(this,arguments)).ParentReportFilterCostCenterID=0,e.Tag=null,e.SelectedNodes=null,e.ViewModel=null,e._DeleteButtonVisibility=!0,e.IsVisible=!0,e._IsGroupLevel=!1,e.IsGroupLevelVisible=!1,e.IsDynamicTree=!1,e}return _createClass(i,[{key:"CalCostCenterFilter_1",value:function(e,t,i){this.CostCenterID=e,this.CostCenter=t,this.ViewModel=i,""!=n.a.SessionManager.Preferences.DynamicTrees&&n.a.SessionManager.Preferences.DynamicTrees.Split(",").Contains(e.toString())&&(this.IsDynamicTree=!0)}},{key:"CalCostCenterFilter",value:function(){}},{key:"OnButtonClick",value:function(e){var t=this;if("Delete"==e){null==this.ViewModel.CostCenters.SelectedItem||a.e.StringIsNullOrEmpty(this.ViewModel.CostCenters.SelectedItem.Parent)||a.e.Int(this.ViewModel.CostCenters.SelectedItem.Parent),parseInt(this.ViewModel.CostCenters.SelectedValue)==this.CostCenterID&&this.ViewModel.tree.length>0?(null!=this.ViewModel.tree[0].SelectedNodes&&this.ViewModel.tree[0].SelectedNodes.Clear(),this.SelectedNodesTag="",this.ViewModel.tree[0].RefreshData=!0):this.ViewModel.CostCenterFilters.Remove(this)}else{if(null==this.ViewModel.CostCenters.SelectedItem||a.e.StringIsNullOrEmpty(this.ViewModel.CostCenters.SelectedItem.Parent)||a.e.Int(this.ViewModel.CostCenters.SelectedItem.Parent),parseInt(this.ViewModel.CostCenters.SelectedValue)!=this.CostCenterID)this.ViewModel.CostCenters.SelectedValue=this.CostCenterID.toString();else if(null!=this.SelectedNodes&&this.SelectedNodes.length>0&&null!=this.ViewModel.tree&&this.ViewModel.tree.length>0){this.ViewModel.tree[0].SelectedNode=null;var i=this.ViewModel.tree[0].AllNodes.find((function(e){return e.Id==t.SelectedNodes[0].Id}));null!=i&&this.ViewModel.tree[0].SelectSearchNode(i)}}}},{key:"RefreshSelectedNodesText",value:function(){var e="";this.SelectedNodes.forEach((function(t){t.Text.length>0&&!a.e.IsEmpty(t.Text[0])&&(e=""!=e?e+", "+t.Text[0]:t.Text[0]).length>140&&(e+=" . . .")})),this.SelectedNodesTag=e}},{key:"GetSeqNosListWithRoots",value:function(){var e=this;if(this.IsOneSelected=this.IsGroupExists=!1,null==this.SelectedNodes)return"";var t="";return this.SelectedNodes.forEach(this.IsDynamicTree?function(i){i.IsGroup&&(e.IsGroupExists=!0),t+=i.Id+","}:function(i){null!=i.Parent&&i.Parent.IsSelected?e.IsGroupExists=!0:t+=i.Id+","}),t.length>0&&(t=t.Remove(t.length-1,1),this.SelectedNodes.filter((function(e){return 1==e.Id})).length>0&&(this.IsOneSelected=!0)),t.toString()}},{key:"SetSelectedNodes",value:function(e){var t,i=this;if(this.SelectedNodes=[],e.SelectSingleNode("DefaultValues").InnerText.Length>0){t=e.SelectSingleNode("DefaultValues").InnerText.Split(",");var s,a=e.SelectSingleNode("GroupNodes"),r=null;null!=a?(s=a.InnerText.Split(","),null==a.Attributes.IsStatic&&(r=n.a.report.GetGrouplft_rgt(this.CostCenterID,e.SelectSingleNode("GroupNodes").InnerText))):s=[];for(var l=function(e){var n=new w.a;if(n.Id=parseInt(t[e]),n.IsSelected=!0,s.Contains(t[e])&&(n.IsGroup=!0,null!=r)){var a=r.filter((function(i){return i.ID==t[e]}));a.Length>0&&(n.lft=parseInt(a[0].lft),n.rgt=parseInt(a[0].rgt))}n.Text.push(t[e]),i.SelectedNodes.push(n)},o=0;o<t.length;o++)l(o)}else t=[];if(this.SelectedNodes.length>0&&(this.SelectedNodesTag="["+n.a.GetResource("Filter").toString().toUpperCase()+"]",7==this.CostCenterID&&e.SelectSingleNode("DefaultValues").InnerText.Length>0)){var u=n.a.report.GetUsers(e.SelectSingleNode("DefaultValues").InnerText);this.SelectedNodes.Clear(),u.forEach((function(e){var t=new w.a;t.Id=parseInt(e.UserID),t.IsSelected=!0,t.Text.push(e.UserName.toString()),i.SelectedNodes.push(t)})),this.RefreshSelectedNodesText()}}},{key:"CostCenter",get:function(){return this._CostCenter.toUpperCase()},set:function(e){e!=this._CostCenter&&(this._CostCenter=e)}},{key:"DeleteButtonVisibility",get:function(){return this._DeleteButtonVisibility},set:function(e){e!=this._DeleteButtonVisibility&&(this._DeleteButtonVisibility=e)}},{key:"IsGroupLevel",get:function(){return this._IsGroupLevel},set:function(e){var t=this;if(this._IsGroupLevel=e,e&&3==this.CostCenterID&&1==this.SelectedNodes.length){var i,s=n.a.report.GetSubNodeNames(this.CostCenterID,this.SelectedNodes[0].Id.toString()),a="";this.SelectedNodes.Clear(),null!=s&&s.Columns.Contains("PK")&&(s.forEach((function(e){(i=new w.a).Id=parseInt(e.PK),i.Text.push(e.Name.toString()),t.SelectedNodes.push(i),a.length<140&&(""!=a&&(a+=", "),a+=i.Text[0])})),a.length>=140&&(a+=" . . .")),null==this.SelectedNodes&&((i=new w.a).Id=-12342,i.Text.push("["+n.a.GetResource("Filter").toString().toUpperCase()+"]"),this.SelectedNodes.push(i)),this.SelectedNodesTag=a}}}]),i}(p.b)}}]);