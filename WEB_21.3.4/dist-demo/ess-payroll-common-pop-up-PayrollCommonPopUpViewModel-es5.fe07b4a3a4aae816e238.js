function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var o,a=_getPrototypeOf(e);if(t){var r=_getPrototypeOf(this).constructor;o=Reflect.construct(a,arguments,r)}else o=a.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[166],{oCNg:function(e,t,o){"use strict";o.r(t),o.d(t,"PayrollCommonPopUpViewModel",(function(){return l}));var a=o("Do2H"),r=o("Lp6j"),n=o("ScVY"),i=o("8B8H"),s=o("ockk"),l=function(e){_inherits(o,e);var t=_createSuper(o);function o(e){var n;if(_classCallCheck(this,o),(n=t.call(this)).DialogResult=!1,n.Title="",n.DocHistoryVisibility=!1,n.HistoryVisibility=!1,n.TableObj=new i.a,n.DisplayMessage="",n.Parent=e[0],"MonthlyPayrollViewModel"==n.Parent.className&&(n.Parent.Opacity=.3),"100"==e[1].toString()){n.DocHistoryVisibility=!0,n.Title="Document History";var l=e[2].toString(),u=e[3].toString();n.LoadGrid(100);var c=n.GetDocumentHistory(parseInt(l),parseInt(u));if(null!=c&&c.Tables.length>0&&c.Columns[0].Contains("ModifiedBy")){for(var p=0,d=0;d<c.Tables[0].length;d++){var f=n.dgv.NewRow();f.ModifiedBy=c.Tables[0][d].ModifiedBy.toString(),r.e.IsEmpty(c.Tables[0][d].ModifiedDate)||(f.ModifiedDate=new Date(c.Tables[0][d].ModifiedDate.toString()).ToString(a.a.SessionManager.Preferences["Date Format"]+" hh:mm:ss tt")),r.e.IsEmpty(c.Tables[0][d].maxid)||(p<parseInt(c.Tables[0][d].maxid.toString())&&(p=parseInt(c.Tables[0][d].maxid.toString())),f.maxid=c.Tables[0][d].maxid.toString()),n.dgv.addRow(f)}var h=n.dgv.Table.filter((function(e){return e.maxid==p.toString()}));h.length>0&&(h[0].IsCurrent="YES")}}else if("101"==e[1].toString()){var y;n.HistoryVisibility=!0,n.Title="History",n.ColSource=[],(y=new s.a).DataType="TextBlock",y.Header="User",y.DisplayMember="CreatedBy",y.Width=90,n.ColSource.push(y),(y=new s.a).DataType="TextBlock",y.Header="FirstName",y.DisplayMember="FirstName",y.Width=90,n.ColSource.push(y),(y=new s.a).DataType="TextBlock",y.Header="LastName",y.DisplayMember="LastName",y.Width=90,n.ColSource.push(y),(y=new s.a).DataType="TextBlock",y.Header=a.a.GetResource("Date"),y.DisplayMember="AppDate",y.Width=128,n.ColSource.push(y),(y=new s.a).DataType="LINK",y.Header="Level",y.DisplayMember="LevelName",y.Width=93,n.ColSource.push(y),(y=new s.a).DataType="TextBlock",y.Header="Status",y.DisplayMember="Status",y.Width=80,n.ColSource.push(y),(y=new s.a).DataType="Format",y.Header="Remarks",y.DisplayMember="Remarks",y.Width=190,n.ColSource.push(y);var b=e[2].toString(),g=e[3].toString(),m=n.GetDocStatusHistory(parseInt(b),parseInt(g),!0);if(null!=m&&m.Tables.length>0){n.TableObj.Table=m.Tables[0],n.TableObj.TableColumns.push("AppDate");for(var D=0;D<n.Table.length;D++)r.e.IsEmpty(n.Table[D].Date)||(n.Table[D].AppDate=new Date(n.Table[D].Date.toString()).ToString(a.a.SessionManager.Preferences["Date Format"]+" hh:mm a"));var T=0,v=0;n.Table.length>0&&(T=r.e.Int(n.Table[n.Table.length-1].WorkFlowLevel),v=r.e.Int(n.Table[n.Table.length-1].StatusID)),369!=v&&(m.Tables[1]=m.Tables[1].filter((function(e){return e.levelID>T})),m.Tables[1].forEach((function(e){var t=n.TableObj.NewRow();t.LevelName=e.LevelName,t.Status="Pending",t.WorkFlowLevel=e.LevelID,n.TableObj.addRow(t)})));for(var C=n.Table.length;C<7;C++)n.TableObj.addEmptyRow()}}return _possibleConstructorReturn(n)}return _createClass(o,[{key:"LoadGrid",value:function(e){var t;(Logger.InfoLog("PayrollCommonPopUpViewModel::Entering LoadGrid()"),100==e)&&(this.dgv=new i.a,this.dgv.Columns=[],this.dgv.Width="",(t=new s.a).Header="User",t.DisplayMember="ModifiedBy",t.ID="ModifiedBy",t.Width=120,t.ReadOnly=!0,this.dgv.Columns.push(t),(t=new s.a).Header="Date",t.DisplayMember="ModifiedDate",t.ID="ModifiedDate",t.Width=150,t.ReadOnly=!0,this.dgv.Columns.push(t),(t=new s.a).Header="Version",t.DisplayMember="VersionNo",t.ID="VersionNo",t.Width=100,t.IsVisible=!1,this.dgv.Columns.push(t),(t=new s.a).Header="Reason",t.DisplayMember="ReviseReason",t.ID="ReviseReason",t.Width=100,t.IsVisible=!1,this.dgv.Columns.push(t),this.dgv.Clear(),this.dgv.TableColumns.push("ModifiedBy"),this.dgv.TableColumns.push("ModifiedDate"),this.dgv.TableColumns.push("MaxID"),this.dgv.TableColumns.push("IsCurrent"),this.dgv.TableColumns.push("VersionNo"),this.dgv.TableColumns.push("ReviseReason"));Logger.InfoLog("PayrollCommonPopUpViewModel::Exiting LoadGrid()")}},{key:"GetDocumentHistory",value:function(e,t){var o=[];return o.push(e),o.push(t),o.push(a.a.SessionManager.UserID),o.push(a.a.SessionManager.RoleID),o.push(a.a.SessionManager.UserName),o.push(a.a.SessionManager.LanguageID),a.a.document.GetDocumentHistory(o)}},{key:"GetDocStatusHistory",value:function(e,t,o){Logger.InfoLog("PayrollCommonPopUpViewModel:: Inside GetDocStatusHistory");var r=[];r.push(e),r.push(t),r.push(o),r.push(a.a.SessionManager.UserID),r.push(a.a.SessionManager.LanguageID);var n=a.a.document.GetDocStatusHistory(r);return Logger.InfoLog("PayrollCommonPopUpViewModel:: Exiting GetDocStatusHistory"),n}},{key:"Button_Click",value:function(e){"Cancel"==e.toString()&&(null!=this.Parent&&"MonthlyPayrollViewModel"==this.Parent.className&&(this.Parent.Opacity=1,this.Parent.DialogResult=!1),this.DialogResult=!1),a.a.page.HideDialog()}},{key:"Table",get:function(){return this.TableObj.Table}},{key:"ColSource",get:function(){return this.TableObj.Columns},set:function(e){this.TableObj.Columns=e}}]),o}(n.b)}}]);