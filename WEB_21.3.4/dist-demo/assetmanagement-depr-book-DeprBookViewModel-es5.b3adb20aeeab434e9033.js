function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var o,a=_getPrototypeOf(e);if(t){var s=_getPrototypeOf(this).constructor;o=Reflect.construct(a,arguments,s)}else o=a.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{wpq0:function(e,t,o){"use strict";o.r(t),o.d(t,"DeprBookViewModel",(function(){return c}));var a=o("Do2H"),s=o("Lp6j"),r=o("eQJW"),i=o("ScVY"),n=o("EQd/"),l=o("0/4Q"),h=o("Jnyl"),u=o("VxiT"),d=o("NM0h"),p=o("wlFP"),c=function(e){_inherits(o,e);var t=_createSuper(o);function o(e){var s;return _classCallCheck(this,o),(s=t.call(this))._DeprBookID=0,s.DeprBookCode=new n.d(23798),s.DeprBookName=new n.d(23799),s.DeprBookMethod=new l.e(23800),s.DeprMethodBasedOn=new l.e(49968),s.DeprMethodBasedOnValue=new n.d(49969),s.DeprBookStatus=new l.e(23801),s.Salvage=new h.b,s.SalvageEnable=new p.a,s.AveragingMethod=new l.e(26584),s.ScreenObject=new u.a,s.obj=new d.a,s.RetValue=0,s.Fields=[],s.DeprBookID=e,s.Title=a.a.GetResource("AddDeprBook"),s.DisplayName=s.Title,s.DisplayMessage="",s.AveragingMethod.Items.push(l.d.ComboBoxItems_2(a.a.GetResource("DeprBook_CalendarDays"),"1")),s.AveragingMethod.Items.push(l.d.ComboBoxItems_2(a.a.GetResource("DeprBook_FullMonth"),"2")),s.AveragingMethod.Items.push(l.d.ComboBoxItems_2(a.a.GetResource("DeprBook_MidMonth"),"3")),s.AveragingMethod.SelectedValue="1",s.DeprBookMethod.SelectionChangedCommand.Subscribe(_assertThisInitialized(s),"OnDeprMethodChange"),s.DeprMethodBasedOn.SelectionChangedCommand.Subscribe(_assertThisInitialized(s),"OnDeprMethodBasedOn"),s.Salvage.Currency.Items.push(l.d.ComboBoxItems_2("Value","1")),s.Salvage.Currency.Items.push(l.d.ComboBoxItems_2("Percentage","2")),s.Salvage.Currency.SelectedValue="1",s.Salvage.ExchangeRate.Text="0",s.SalvageEnable.IsChecked=!1,s.LoadData(),0==s.DeprBookID?s.Title=a.a.GetResource("AddDeprBook"):(s.Title=a.a.GetResource("EditDeprBook"),s.OnLoadData()),s.OnDeprMethodChange(null),s}return _createClass(o,[{key:"LoadData",value:function(){var e=this;this.ScreenObject.LoadScreen_2(this,75),this.DeprBookCode.Enable=!0,this.DeprBookName.Enable=!0,this.DeprBookMethod.Enable=!0,this.DeprBookStatus.Enable=!0,this.DeprMethodBasedOn.Enable=!0,this.DeprMethodBasedOnValue.Enable=!0,this.Salvage.Enable=!0,this.SalvageEnable.Enable=!0,this.Salvage.Visible=!0,this.SalvageEnable.Visible=!0,this.SalvageEnable.Label="Include salvage value in depriciation calcualtion",this.AveragingMethod.Enable=!0,this.Fields.push(this.DeprBookCode),this.Fields.push(this.DeprBookName),this.Fields.push(this.DeprBookStatus),this.Fields.push(this.DeprMethodBasedOn),this.Fields.push(this.DeprMethodBasedOnValue),this.Fields.push(this.Salvage),this.Fields.push(this.SalvageEnable),this.Fields.push(this.AveragingMethod),this.ScreenObject.Data.Tables.length>0&&(this.ScreenObject.Data.Tables[3].forEach((function(t){e.DeprBookStatus.Items.push(l.d.ComboBoxItems_2(t.Status.toString(),t.StatusID.toString()))})),this.DeprBookStatus.SelectedValue="381",this.ScreenObject.Data.Tables[4].forEach((function(t){e.DeprBookMethod.Items.push(l.d.ComboBoxItems_2(t.Name.toString(),t.DepreciationMethodID.toString()))})),this.DeprBookMethod.SelectedValue="1",this.DeprMethodBasedOn.Items.push(l.d.ComboBoxItems_2("Acquisition Value/Total","1")),this.DeprMethodBasedOn.Items.push(l.d.ComboBoxItems_2("Percentage On Acquisition Value","2")),this.DeprMethodBasedOn.SelectedValue="1",this.DeprMethodBasedOnValue.Text="1")}},{key:"OnLoadData",value:function(){var e=d.a.GetDeprBookDetails(this.obj.DeprBookID);null!=e&&e.Tables.length>0&&e.Tables[0].length>0&&(this.DeprBookCode.Text=e.Tables[0][0].DeprBookCode.toString(),this.DeprBookName.Text=e.Tables[0][0].DeprBookName.toString(),this.DeprBookMethod.SelectedValue=e.Tables[0][0].DeprBookMethod.toString(),this.DeprBookStatus.SelectedValue=e.Tables[0][0].StatusID.toString(),this.AveragingMethod.SelectedValue=e.Tables[0][0].AveragingMethod.toString(),this.DeprMethodBasedOn.SelectedValue=e.Tables[0][0].DeprMethodBasedOn.toString(),this.DeprMethodBasedOnValue.Text=e.Tables[0][0].BasedOnValue.toString(),this.Salvage.Currency.SelectedValue=e.Tables[0][0].SalvageValueType.toString(),this.Salvage.ExchangeRate.Text=e.Tables[0][0].SalvageValue.toString(),this.SalvageEnable.IsChecked=Object(r.j)(e.Tables[0][0].IncludeSalvageInDepr),this.obj.GUID=e.Tables[0][0].GUID.toString())}},{key:"OnDeprMethodChange",value:function(e){this.DeprMethodBasedOn.Visible="1"==this.DeprBookMethod.SelectedValue,this.OnDeprMethodBasedOn(null)}},{key:"OnDeprMethodBasedOn",value:function(e){this.DeprMethodBasedOnValue.Label=this.DeprMethodBasedOn.Visible?"2"==this.DeprMethodBasedOn.SelectedValue?"Percentage":"Total Years":"Percentage"}},{key:"OnSaveDeprBook",value:function(e){var t=this;try{if("Save"==e.toString()){if(null==this.DeprBookCode.Text||""==this.DeprBookCode.Text.Trim())return void(this.DisplayMessage=a.a.GetResource("Enter")+" Code");if(this.obj.DeprBookCode=this.DeprBookCode.Text,null==this.DeprBookName.Text||""==this.DeprBookName.Text.Trim())return void(this.DisplayMessage=a.a.GetResource("Enter")+" Name");if(this.obj.DeprBookName=this.DeprBookName.Text,s.e.IsEmpty(this.DeprBookMethod.SelectedValue))return void(this.DisplayMessage=a.a.GetResource("Select")+a.a.GetResource("DeprMethod"));if(this.obj.DeprBookMethod=parseInt(this.DeprBookMethod.SelectedValue),s.e.IsEmpty(this.DeprBookStatus.SelectedValue))return void(this.DisplayMessage=a.a.GetResource("Select")+a.a.GetResource("Status"));if(this.obj.StatusID=parseInt(this.DeprBookStatus.SelectedValue),null==this.AveragingMethod.SelectedValue||""==this.AveragingMethod.SelectedValue)return void(this.DisplayMessage=a.a.GetResource("Select")+a.a.GetResource("DeprBook_AveragingMethod"));if(this.obj.AveragingMethodID=parseInt(this.AveragingMethod.SelectedValue),this.obj.DeprBookMethodBasedOnValue=s.e.Double(this.DeprMethodBasedOnValue.Text),this.obj.DeprBookMethodBasedOnValue<=0)return void(this.DisplayMessage="Please enter valid based on value");this.obj.DeprBookMethodBasedOn=parseInt(this.DeprMethodBasedOn.SelectedValue);var o,r=parseInt(this.Salvage.Currency.SelectedValue);o=s.e.Double(this.Salvage.ExchangeRate.Text),this.obj.SaveDeprBook(r,o,this.SalvageEnable.IsChecked).subscribe((function(e){t.DisplayMessage=e.Message,t.RetValue=e.RetValue,t.RetValue>0&&(t.DeprBookID=0,t.ClearFields(),null!=t.Parent&&t.Parent.Refresh())}))}else a.a.page.HideDialog()}catch(i){Logger.ErrorLog("DeprBookViewModel:: OnSaveDeprBook",i)}}},{key:"ClearFields",value:function(){this.DeprBookCode.Text="",this.DeprBookName.Text="",this.DeprBookStatus.SelectedValue="381",this.DeprBookMethod.SelectedValue="1",this.AveragingMethod.SelectedValue="1",this.OnDeprMethodChange(null)}},{key:"DeprBookID",get:function(){return this._DeprBookID},set:function(e){e!=this._DeprBookID&&(this._DeprBookID=e,this.obj.DeprBookID=this._DeprBookID)}}]),o}(i.b)}}]);