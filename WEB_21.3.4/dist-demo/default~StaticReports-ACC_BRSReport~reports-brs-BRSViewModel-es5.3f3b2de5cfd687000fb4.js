function _classCallCheck(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,o){for(var t=0;t<o.length;t++){var l=o[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function _createClass(e,o,t){return o&&_defineProperties(e.prototype,o),t&&_defineProperties(e,t),e}function _inherits(e,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(o&&o.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),o&&_setPrototypeOf(e,o)}function _setPrototypeOf(e,o){return(_setPrototypeOf=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e})(e,o)}function _createSuper(e){var o=_isNativeReflectConstruct();return function(){var t,l=_getPrototypeOf(e);if(o){var a=_getPrototypeOf(this).constructor;t=Reflect.construct(l,arguments,a)}else t=l.apply(this,arguments);return _possibleConstructorReturn(this,t)}}function _possibleConstructorReturn(e,o){return!o||"object"!=typeof o&&"function"!=typeof o?_assertThisInitialized(e):o}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{"8mzQ":function(e,o,t){"use strict";t.r(o),t.d(o,"ACC_BRSReport",(function(){return c}));var l=t("1xwR"),a=t("mvPR"),r=t("Lp6j"),n=t("Do2H"),s=t("MCLT"),i=t("ThYU"),c=function(e){_inherits(t,e);var o=_createSuper(t);function t(e){var l;return _classCallCheck(this,t),(l=o.call(this,e)).i=0,l.k=0,l.Balance=0,l.OpBalance=0,l.colBalanceIndex=-1,l.colDebitIndex=-1,l.colCreditIndex=-1,l.colSpanBF=-1,l.colSubTotalStartIndex=0,l.BankID=0,l.DateWiseDrCr=!1,l.dblDr=0,l.dblCr=0,l.dblTotal=0,l.dsAccount=null,l.iLoop=0,l.ForeignCurrencyID=0,l}return _createClass(t,[{key:"LoadReport",value:function(){var e=this,o="",t="",l=this.ViewModel.oReportDialog.GetSeqNosList();l.length>0&&(this.ViewModel.oReportDialog.IsZeroSelected||this.ViewModel.oReportDialog.IsOneSelected||(l=this.ViewModel.oReportDialog.GetSeqNosListWithRoots(),this.ViewModel.oReportDialog.IsGroupExists?(o="A1.AccountID=GTP.GTID",t=l.Contains(",")?",(select T.AccountID GTID from ACC_Accounts T with(nolock),ACC_Accounts GT1 with(nolock) where T.lft BETWEEN GT1.lft AND GT1.rgt AND GT1.AccountID IN ("+l+") group by T.AccountID) AS GTP ":",(select T.AccountID GTID from ACC_Accounts T with(nolock),ACC_Accounts GT1 with(nolock) where T.lft BETWEEN GT1.lft AND GT1.rgt AND GT1.AccountID="+l+" group by T.AccountID) AS GTP "):o=l.Contains(",")?"A1.AccountID IN ("+l+")":"A1.AccountID="+l));var r="";r="SELECT A1.AccountID,A1.AccountName"+this.ViewModel.GroupSelectTag+" FROM ACC_Accounts A1 with(nolock)"+this.ViewModel.GroupFromTag+t+" WHERE A1.IsGroup=0 AND A1.AccountTypeID in (2,3) ",r+=this.GetAccountWiseLocationWhere("A1"),o.length>0&&(r+=" AND "+o),r+=" Order By A1.AccountName",n.a.report.ReportDataSetAsync("RPT022",this.ViewModel.IsReportDB,r).then((function(o){if(e.dsAccount=o,0==e.ViewModel.lstGroup.length){var t=new i.Group;t.Height=22,t.GroupAppearance=new a.a,t.GroupAppearance.BackColor="#FFFBD5B5",t.GroupAppearance.ForeColor="#FF000000",t.GroupAppearance.FontFamilyName="Calibri",t.GroupAppearance.FontSize=15,t.GroupAppearance.IsBold=!0,e.ViewModel.lstGroup.push(t)}e.LoadReportFromData(0,0)})).then((function(){e.ViewModel.process_RunWorkerCompleted()}))}},{key:"LoadReportWithPostFilters",value:function(e){}},{key:"LoadReportFromData",value:function(e,o){var t=this;this.GrdRow=-1,this.colSubTotalStartIndex=-1,this.AggTotal=r.e.NumArray(this.oColumns.length+1,2),this.DataSetCollection.Clear(),this.ViewModel.lstGroupIndex.Clear(),this.ViewModel.Data.Clear();for(var l=0;l<this.oColumns.length;l++)if("Debit"==this.oColumns[l].ID||"Credit"==this.oColumns[l].ID||"Balance"==this.oColumns[l].ID){this.colSpanBF=l;break}if(this.ViewModel.lstGroup.length>0)for(this.k=0;this.k<this.oColumns.length;this.k++)if(this.ViewModel.lstGroup[0].TotalCols.ContainsKey(this.oColumns[this.k].ID)){this.colSubTotalStartIndex=this.k;break}for(var s=this.oColumns.length-1;s>=0;s--)"Balance"==this.oColumns[s].ID?(this.colBalanceIndex=s,this.oColumns[s].DataFormat.ShowDefaultSign=0):"Dr"==this.oColumns[s].ID?this.colDebitIndex=s:"Cr"==this.oColumns[s].ID&&(this.colCreditIndex=s);try{if(null==this.dsAccount){if(this.dsAccount=n.a.report.ReportDataSet("RPT053",this.ViewModel.IsReportDB,e.toString()),null!=this.dsAccount&&this.dsAccount.Tables.length>0&&this.dsAccount.Tables[0].length>0){if(0==this.ViewModel.lstGroup.length){var c=new i.Group;c.Height=22,c.GroupAppearance=new a.a,c.GroupAppearance.BackColor="#FFFBD5B5",c.GroupAppearance.ForeColor="#FF000000",c.GroupAppearance.FontFamilyName="Calibri",c.GroupAppearance.FontSize=15,c.GroupAppearance.IsBold=!0,this.ViewModel.lstGroup.push(c)}var u=this.NewReportRow_2(a.f.Group,this.ViewModel.lstGroup[0].GroupAppearance);this.ViewModel.lstGroup[0].Height>0&&(u.Height=this.ViewModel.lstGroup[0].Height),u.PrintVisible=this.ViewModel.lstGroup[0].GroupAppearance.IsPrintVisible,u.Cells[0].Text=this.dsAccount.Tables[0][0].AccountName.toString(),u.Cells[0].ColSpan=u.Cells.length,u.LevelNo=0,this.Balance=0,this.GrdRow++,this.ViewModel.Data.push(u)}this.LoadByBank(e,o).then((function(){t.ViewModel.process_RunWorkerCompleted()}))}else{if(o=0,this.ViewModel.Preferences.ContainsKey("ForeignCurrency")){var p=new r.f;p.LoadXml("<XML>"+this.ViewModel.Preferences.ForeignCurrency+"</XML>");var d=p.SelectSingleNode("IsChecked");null!=d&&"1"==d.InnerText&&(d=p.SelectSingleNode("Value"),o=parseInt(d.InnerText))}this.LoadReportFromData_CallBack(o)}}catch(C){this.ViewModel.DisplayMessage=C.Message,Logger.ErrorLog("ACC_BRSReport::Error LoadReport",C)}}},{key:"LoadReportFromData_CallBack",value:function(e){var o=this;if(this.iLoop>=this.dsAccount.Tables[0].length)this.ViewModel.process_RunWorkerCompleted();else{this.AggTotal=r.e.NumArray(this.oColumns.length+1,2);var t=this.NewReportRow_2(a.f.Group,this.ViewModel.lstGroup[0].GroupAppearance);this.ViewModel.lstGroup[0].Height>0&&(t.Height=this.ViewModel.lstGroup[0].Height),t.PrintVisible=this.ViewModel.lstGroup[0].GroupAppearance.IsPrintVisible,t.Cells[0].Text=this.dsAccount.Tables[0][this.iLoop].AccountName.toString(),t.Cells[0].ColSpan=t.Cells.length,t.LevelNo=0,this.Balance=0,this.GrdRow++,this.ViewModel.Data.push(t),this.LoadByBank(parseInt(this.dsAccount.Tables[0][this.iLoop].AccountID),e).then((function(){o.iLoop++,o.LoadReportFromData_CallBack(e)}))}}},{key:"LoadByBank",value:function(e,o){var t=this,l=null,s=null,i=0,c=0,u=0,p=!1;0!=e&&(this.BankID=e),this.DateWiseDrCr="1"==this.ViewModel.Preferences.DateWiseDrCr;var d=[];return d.push(this.BankID),d.push(1),d.push(this.ViewModel.oReportDialog.FromDate.Date),d.push(this.ViewModel.oReportDialog.ToDate.Date),this.ViewModel.oReportDialog.Locations.Visible?(this.ViewModel.oReportDialog.SetLocationWhere(),d.push(this.ViewModel.oReportDialog.LocationWhere)):d.push(""),d.push(o),d.push(1),d.push(""),d.push(""),n.a.report.GetBRSVouchers(d).then((function(e){t.ViewModel.DateFilter=t.ViewModel.FromDatePicker.Date.ToString(n.a.SessionManager.Preferences["Date Format"]),t.ViewModel.DateFilter+="  to  "+t.ViewModel.ToDatePicker.Date.ToString(n.a.SessionManager.Preferences["Date Format"]),null==t.dsAccount&&e.Tables[3].length>0&&(t.ViewModel.DateFilter+=" ["+e.Tables[3][0].AccountName.toString()+"]"),t.ViewModel.Preferences.ContainsKey("Preview")&&"true"==t.ViewModel.Preferences.Preview?(l=t.dtpreview,s=t.dtpreviewColumns,l.forEach((function(e){null!=e.clrDate_key&&(e.ClearanceDate=e.clrDate_key),e.BRS_Status=e.Status}))):(l=e.Tables[0],s=e.Columns[0]),r.e.IsEmpty(s)||s.Contains("Status")||s.push("Status"),r.e.IsEmpty(s)||s.Contains("AccountName")||(s.push("AccountName"),l.forEach((function(o){o.AccountName=e.Tables[3][0].AccountName})));for(var o=l.length-1;o>=0;o--)t.ViewModel.Preferences.ContainsKey("Preview")&&"true"==t.ViewModel.Preferences.Preview?null!=l[o].clrDate_key?new Date(l[o].clrDate_key)>t.ViewModel.oReportDialog.ToDate.Date?l[o].BRS_Status=0:1900==new Date(l[o].clrDate_key).getFullYear()&&(l[o].ClearanceDate=null):l[o].ClearanceDate=null:new Date(l[o].ClearanceDate)>t.ViewModel.oReportDialog.ToDate.Date?l[o].BRS_Status=0:1900==new Date(l[o].ClearanceDate).getFullYear()&&(l[o].ClearanceDate=null),l[o].Status=l[o].BRS_Status;e.Tables.length>1&&e.Columns[1].Contains("Bal")&&e.Tables[1].length>0&&!r.e.IsEmpty(e.Tables[1][0][e.Columns[1][0]])&&(t.dblTotal=parseFloat(e.Tables[1][0][e.Columns[1][0]])),null!=e&&e.Tables.length>1&&e.Columns[1].Contains("Bal")&&e.Tables[1].length>0&&!r.e.IsEmpty(e.Tables[1][0][e.Columns[1][0]])&&parseFloat(e.Tables[1][0][e.Columns[1][0]]),null!=e&&e.Tables.length>2&&e.Columns[2].Contains("Bal")&&e.Tables[2].length>0&&!r.e.IsEmpty(e.Tables[2][0][e.Columns[2][0]])&&(i=parseFloat(e.Tables[2][0][e.Columns[2][0]])),null!=e&&e.Tables.length>5&&e.Columns[5].Contains("Bal")&&e.Tables[5].length>0&&!r.e.IsEmpty(e.Tables[5][0][e.Columns[5][0]])&&(u=parseFloat(e.Tables[5][0][e.Columns[5][0]])),null!=e&&e.Tables.length>4&&e.Columns[4].Contains("Bal")&&e.Tables[4].length>0&&!r.e.IsEmpty(e.Tables[4][0][e.Columns[4][0]])&&(p=!0,c=parseFloat(e.Tables[4][0][e.Columns[4][0]])),t.ViewModel.Preferences.ContainsKey("GroupBy")&&""!=t.ViewModel.Preferences.GroupBy&&(l=t.CheckGroupbyCheque(l,s)),t.dv=l,t.dvTable=l,t.dv.SortBy(["Date,VoucherNo"]),t.BalanceBFAppearance.ForeColor=t.BalanceBFAppearance_Data.ForeColor="Red",t.BalanceBFAppearance.IsBold=t.BalanceBFAppearance_Data.IsBold=!0,t.GrdRow++,t.oRow=t.NewReportRow_2(a.f.SubTotal,t.GrossTotalAppearance_Data),t.oRow.Cells[2].Text=t.ViewModel.Preferences.ContainsKey("BRSLbl1")&&!r.e.IsEmpty(t.ViewModel.Preferences.BRSLbl1)?t.ViewModel.Preferences.BRSLbl1:n.a.GetResource("Balance As Per Books"),t.oRow.Cells[2].CellAppearance=t.GrossTotalAppearance,t.dblTotal>=0?t.ViewModel.SetCellValue(t.dblTotal,t.oColumns[t.colDebitIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colDebitIndex]):t.ViewModel.SetCellValue(-t.dblTotal,t.oColumns[t.colCreditIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colCreditIndex]),t.ViewModel.Data.push(t.oRow),t.DateWiseDrCr?(t.dv=t.dvTable.filter((function(e){return 0==e.Status})),t.addBRS(),t.GrdRow++,t.oRow=t.NewReportRow_2(a.f.SubTotal,t.BalanceBFAppearance_Data),t.oRow.LevelNo=1,t.oRow.Cells[t.colDebitIndex-1].Text=n.a.GetResource("Reports_ReportTotal"),t.oRow.Cells[t.colDebitIndex-1].CellAppearance=t.BalanceBFAppearance,t.colDebitIndex>=0&&t.ViewModel.SetCellValue(t.AggTotal[0],t.oColumns[t.colDebitIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colDebitIndex]),t.colCreditIndex>=0&&t.ViewModel.SetCellValue(t.AggTotal[0],t.oColumns[t.colCreditIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colCreditIndex]),t.ViewModel.Data.push(t.oRow)):(t.dv=t.dvTable.filter((function(e){return 0==e.Status&&(null==e.Cr||0==e.Cr)})),t.dv.length>0&&(t.addBRS(),t.colDebitIndex>=0&&(t.GrdRow++,t.oRow=t.NewReportRow_2(a.f.SubTotal,t.BalanceBFAppearance_Data),t.oRow.LevelNo=1,t.oRow.Cells[t.colDebitIndex-1].Text=t.ViewModel.Preferences.ContainsKey("BRSLbl3")&&!r.e.StringIsNullOrEmpty(t.ViewModel.Preferences.BRSLbl3)?t.ViewModel.Preferences.BRSLbl3:"Total Debit",t.oRow.Cells[t.colDebitIndex-1].CellAppearance=t.BalanceBFAppearance,t.ViewModel.SetCellValue(t.AggTotal[0],t.oColumns[t.colDebitIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colDebitIndex]),t.ViewModel.Data.push(t.oRow))),t.dv=t.dvTable.filter((function(e){return 0==e.Status&&(null==e.Dr||0==e.Dr)})),t.dv.length>0&&(t.addBRS(),t.colCreditIndex>=0&&(t.GrdRow++,t.oRow=t.NewReportRow_2(a.f.SubTotal,t.BalanceBFAppearance_Data),t.oRow.LevelNo=1,t.oRow.Cells[t.colCreditIndex-1].Text=t.ViewModel.Preferences.ContainsKey("BRSLbl4")&&!r.e.StringIsNullOrEmpty(t.ViewModel.Preferences.BRSLbl4)?t.ViewModel.Preferences.BRSLbl4:"Total Credit",t.oRow.Cells[t.colCreditIndex-1].CellAppearance=t.BalanceBFAppearance,t.ViewModel.SetCellValue(t.AggTotal[0],t.oColumns[t.colCreditIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colCreditIndex]),t.ViewModel.Data.push(t.oRow)))),t.dblTotal=t.dblTotal-(t.AggTotal[0]-t.AggTotal[0]),t.GrdRow++,t.oRow=t.NewReportRow_2(a.f.SubTotal,t.GrossTotalAppearance_Data),t.oRow.Cells[2].Text=t.ViewModel.Preferences.ContainsKey("BRSLbl2")&&!r.e.IsEmpty(t.ViewModel.Preferences.BRSLbl2)?t.ViewModel.Preferences.BRSLbl2:n.a.GetResource("Balance As Per Bank Statement"),t.oRow.Cells[2].CellAppearance=t.GrossTotalAppearance,t.dblTotal>=0?t.ViewModel.SetCellValue(t.dblTotal,t.oColumns[t.colDebitIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colDebitIndex]):t.ViewModel.SetCellValue(-t.dblTotal,t.oColumns[t.colCreditIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colCreditIndex]),t.ViewModel.Data.push(t.oRow),t.ViewModel.Preferences.ContainsKey("UnreconciledAmount")&&"0"==t.ViewModel.Preferences.UnreconciledAmount||(t.GrdRow++,t.oRow=t.NewReportRow_2(a.f.SubTotal,t.GrossTotalAppearance_Data),t.oRow.Cells[2].Text=t.ViewModel.Preferences.ContainsKey("BRSLbl5")&&!r.e.StringIsNullOrEmpty(t.ViewModel.Preferences.BRSLbl5)?t.ViewModel.Preferences.BRSLbl5:"Total Unreconciled Amount",t.oRow.Cells[2].CellAppearance=t.GrossTotalAppearance,u>=0?t.ViewModel.SetCellValue(u,t.oColumns[t.colDebitIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colDebitIndex]):t.ViewModel.SetCellValue(-u,t.oColumns[t.colCreditIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colCreditIndex]),t.ViewModel.Data.push(t.oRow)),t.ViewModel.Preferences.ContainsKey("ReconciledAmount")&&"0"==t.ViewModel.Preferences.ReconciledAmount||(t.GrdRow++,t.oRow=t.NewReportRow_2(a.f.SubTotal,t.GrossTotalAppearance_Data),t.oRow.Cells[2].Text=t.ViewModel.Preferences.ContainsKey("BRSLbl6")&&!r.e.StringIsNullOrEmpty(t.ViewModel.Preferences.BRSLbl6)?t.ViewModel.Preferences.BRSLbl6:"Total Reconciled Balance",t.oRow.Cells[2].CellAppearance=t.GrossTotalAppearance,i>=0?t.ViewModel.SetCellValue(i,t.oColumns[t.colDebitIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colDebitIndex]):t.ViewModel.SetCellValue(-i,t.oColumns[t.colCreditIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colCreditIndex]),t.ViewModel.Data.push(t.oRow)),p&&(t.GrdRow++,t.oRow=t.NewReportRow_2(a.f.SubTotal,t.GrossTotalAppearance_Data),t.oRow.Cells[2].Text="Statement Balance",t.oRow.Cells[2].CellAppearance=t.GrossTotalAppearance,c>=0?t.ViewModel.SetCellValue(c,t.oColumns[t.colDebitIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colDebitIndex]):t.ViewModel.SetCellValue(-c,t.oColumns[t.colCreditIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colCreditIndex]),t.ViewModel.Data.push(t.oRow),t.GrdRow++,t.oRow=t.NewReportRow_2(a.f.SubTotal,t.GrossTotalAppearance_Data),t.oRow.Cells[2].Text="Variance",t.oRow.Cells[2].CellAppearance=t.GrossTotalAppearance,i-c>=0?t.ViewModel.SetCellValue(i-c,t.oColumns[t.colDebitIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colDebitIndex]):t.ViewModel.SetCellValue(-(i-c),t.oColumns[t.colCreditIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colCreditIndex]),t.ViewModel.Data.push(t.oRow)),t.ViewModel.Preferences.ContainsKey("ShowReconciledEntries")&&"1"==t.ViewModel.Preferences.ShowReconciledEntries&&(t.dv=t.dvTable.filter((function(e){return 1==e.Status})),t.dv.length>0&&(t.colDebitIndex>=0&&(t.AggTotal[0]=0),t.colCreditIndex>=0&&(t.AggTotal[0]=0),t.GrdRow++,t.oRow=t.NewReportRow_2(a.f.SubTotal,t.GrossTotalAppearance_Data),t.oRow.Cells[2].Text="Reconciled Entries",t.oRow.Cells[2].CellAppearance=t.GrossTotalAppearance,t.ViewModel.Data.push(t.oRow),t.addBRS(),(t.colDebitIndex>=0||t.colCreditIndex>=0)&&(t.GrdRow++,t.oRow=t.NewReportRow_2(a.f.SubTotal,t.GrossTotalAppearance_Data),t.oRow.Cells[t.colDebitIndex-1].Text="Reconciled Total",t.oRow.Cells[t.colDebitIndex-1].CellAppearance=t.GrossTotalAppearance,t.colDebitIndex>=0&&t.ViewModel.SetCellValue(t.AggTotal[0],t.oColumns[t.colDebitIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colDebitIndex]),t.colCreditIndex>=0&&t.ViewModel.SetCellValue(t.AggTotal[0],t.oColumns[t.colCreditIndex].DataFormat,"FLOAT",t.oRow.Cells[t.colCreditIndex]),t.ViewModel.Data.push(t.oRow)))),t.ViewModel.refreshDataView()}))}},{key:"CheckGroupbyCheque",value:function(e,o){o.Contains("GroupIDs")||o.push("GroupIDs");var t=new Array,l=!1;"CHK"==this.ViewModel.Preferences.GroupBy&&(l=!0);for(var a=function(o){if(!t.Contains(e[o])){var a=0,n=0,s="",i=e.filter((function(t){return t.VoucherNo==e[o].VoucherNo.toString()}));if(l&&(r.e.IsEmpty(e[o].ChequeNo)||(i=i.filter((function(t){return t.ChequeNo.toString()==e[o].ChequeNo.toString()})))),i.length>1){for(var c=1;c<i.length;c++)r.e.IsEmpty(i[c].Dr)||(n+=parseFloat(i[c].Dr)),r.e.IsEmpty(i[c].Cr)||(a+=parseFloat(i[c].Cr)),s+=i[c].AccDocDetailsID.toString()+",",t.push(i[c]);i[0].GroupIDs=s,i[0].Cr=r.e.IsEmpty(i[0].Cr)?a:parseFloat(i[0].Cr)+a,i[0].Dr=r.e.IsEmpty(i[0].Dr)?n:parseFloat(i[0].Dr)+n}}},n=0;n<e.length;n++)a(n);for(var s=0;s<t.length;s++)e.Remove(t[s]);return e.forEach((function(e){r.e.IsEmpty(e.Dr)||r.e.IsEmpty(e.Cr)||(parseFloat(e.Dr)>parseFloat(e.Cr)?(e.Dr=parseFloat(e.Dr)-parseFloat(e.Cr),e.Cr=null):parseFloat(e.Cr)>parseFloat(e.Dr)&&(e.Cr=parseFloat(e.Cr)-parseFloat(e.Dr),e.Dr=null))})),e}},{key:"addBRS",value:function(){for(this.k=0;this.k<this.dv.length;this.k++){this.oRow=this.NewReportRow(),this.oRow.LevelNo=1,this.oRow.Cells[1].IsNormal=!1,this.dblDr=0,this.dblCr=0;for(var e=0;e<this.oColumns.length;e++){var o="";""!=this.oColumns[e].Formula||Object(s.isNullOrUndefined)(this.dv[this.k][this.oColumns[e].ID])||(o=this.dv[this.k][this.oColumns[e].ID].toString()),""!=o&&(this.ViewModel.SetCellValue(o,this.oColumns[e].DataFormat,this.oColumns[e].ColumnType,this.oRow.Cells[e]),e==this.colDebitIndex?(this.dblDr=r.e.Double(o),this.AggTotal[e][0]+=this.dblDr):e==this.colCreditIndex&&(this.dblCr=r.e.Double(o),this.AggTotal[e][0]+=this.dblCr))}this.Balance=this.Balance+this.dblDr-this.dblCr,this.colBalanceIndex>=0&&this.DateWiseDrCr&&this.ViewModel.SetCellValue(this.Balance,this.oColumns[this.colBalanceIndex].DataFormat,"FLOAT",this.oRow.Cells[this.colBalanceIndex]),this.ViewModel.ApplyKPI(this.oRow),this.GrdRow++,this.ViewModel.Data.push(this.oRow)}}}]),t}(l.b)}}]);