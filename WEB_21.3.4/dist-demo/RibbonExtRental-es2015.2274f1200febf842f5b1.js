(window.webpackJsonp=window.webpackJsonp||[]).push([[78,75,77,89,113,121],{EggS:function(e,s,t){"use strict";t.d(s,"a",(function(){return r}));var i=t("Do2H"),a=t("Lp6j"),n=t("eQJW");class r{constructor(){this.CustomerID=0,this.CustomerTypeID=0,this.StatusID=0,this.AccountID=0,this.ParentID=0,this.SelectedNodeID=0,this.CodeNumber=0,this.IsGroup=!1,this.CreditDays=0,this.CreditLimit=0,this.DebitDays=0,this.Debitlimit=0,this.IsCode=!1,this.ActivityXml="",this.CCXML=""}SaveCustomerQuick(){try{let e=[];return e.push(this.CustomerID),e.push(null!=this.CustomerCode?this.CustomerCode:""),e.push(null!=this.CustomerName?this.CustomerName:""),e.push(this.StatusID),e.push(this.CodePrefix),e.push(this.CodeNumber),e.push(this.StaticFieldsQuery),e.push(this.CustomFieldsQuery),e.push(this.CustomCostCenterFieldsQuery),e.push(i.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(""),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.RoleID),e.push(i.a.SessionManager.LanguageID),i.a.crmService.SetCustomerQuick(e)}catch(e){return Logger.ErrorLog("Account:: SaveAccountQuick"+e.stack),""}}SaveCustomer(){Logger.InfoLog("Customer:: Inside SaveCustomer");try{0==this.CustomerID&&(this.GUID=a.e.NewGuid());let e=[];return e.push(this.CustomerID),e.push(null!=this.CustomerCode?this.CustomerCode:""),e.push(null!=this.CustomerName?this.CustomerName:""),e.push(null!=this.AliasName?this.AliasName:""),e.push(this.CustomerTypeID),e.push(this.StatusID),e.push(this.AccountID),e.push(this.SelectedNodeID),e.push(this.IsGroup),e.push(this.CreditDays),e.push(this.CreditLimit),e.push(null!=this.UserName?this.UserName:""),e.push(null!=this.Password?this.Password:""),e.push(null!=this.OnlineCustType?this.OnlineCustType:""),e.push(i.a.SessionManager.CompanyGUID),e.push(null!=this.GUID?this.GUID:"GUID"),e.push(""),e.push(i.a.SessionManager.UserName),e.push(this.CustomFieldsQuery),e.push(this.CustomCostCenterFieldsQuery),e.push(this.ContactsXML),e.push(this.AttachmetsXML),e.push(this.NotesXML),e.push(this.AddressXML),e.push(this.ActivityXml),e.push(this.CCXML),e.push(!1),e.push(null==this.PrimaryContactQuery?"":this.PrimaryContactQuery),e.push(i.a.SessionManager.RoleID),e.push(i.a.SessionManager.LanguageID),e.push(null!=this.CodePrefix?this.CodePrefix:""),e.push(this.CodeNumber),e.push(this.IsCode),i.a.crmService.SaveCustomer(e)}catch(e){return Logger.ErrorLog("Customer:: SaveCustomer"+e.stack),""}}GetCustomerDetails(){let e=i.a.crmService.GetCustomerInfo("?UserID="+i.a.SessionManager.UserID+"&RoleID="+i.a.SessionManager.RoleID+"&LangID="+i.a.SessionManager.LangID+"&CustomerID="+this.CustomerID);return!e.Columns[0].Contains("ErrorMessage")&&e.Tables.length>0&&e.Tables[0].length>0&&(this.CustomerID=parseInt(e.Tables[0][0].CustomerID),this.CustomerCode=a.e.String(e.Tables[0][0].CustomerCode),this.CustomerName=a.e.String(e.Tables[0][0].CustomerName),this.AliasName=a.e.String(e.Tables[0][0].AliasName),a.e.IsEmpty(e.Tables[0][0].CustomerTypeID)||(this.CustomerTypeID=parseInt(e.Tables[0][0].CustomerTypeID)),this.StatusID=parseInt(e.Tables[0][0].StatusID),a.e.IsEmpty(e.Tables[0][0].AccountID)||(this.AccountID=parseInt(e.Tables[0][0].AccountID)),this.IsGroup=Object(n.j)(e.Tables[0][0].IsGroup),a.e.IsEmpty(e.Tables[0][0].CreditDays)||(this.CreditDays=parseInt(e.Tables[0][0].CreditDays)),a.e.IsEmpty(e.Tables[0][0].CreditLimit)||(this.CreditLimit=parseFloat(e.Tables[0][0].CreditLimit)),this.ParentID=parseInt(e.Tables[0][0].ParentID),this.GUID=a.e.String(e.Tables[0][0].GUID),this.Description=a.e.String(e.Tables[0][0].Description),this.CodePrefix=a.e.String(e.Tables[0][0].CodePrefix),this.UserName=a.e.String(e.Tables[0][0].UserName),this.OnlineCustType=a.e.String(e.Tables[0][0].OnlineCustType),this.Password=a.e.String(e.Tables[0][0].Password),a.e.IsEmpty(e.Tables[0][0].CodeNumber)||(this.CodeNumber=parseInt(e.Tables[0][0].CodeNumber))),e}DeleteCustomer(e,s){try{let t=[];return t.push(e),t.push(s),t.push(i.a.SessionManager.RoleID),t.push(i.a.SessionManager.LanguageID),Logger.InfoLog("Customer:: Success: DBH.DeleteCustomer "+e.toString()),i.a.crmService.RemoveCustomer(t)}catch(t){return Logger.ErrorLog("LEAD::DeleteLead"+t.stack),""}}}},NM0h:function(e,s,t){"use strict";t.d(s,"a",(function(){return n}));var i=t("Do2H"),a=t("Lp6j");class n{constructor(){this.ChangeValueXML=null,this.DetailsXML=null,this.AMCode=null,this.AMName=null,this.AMPurchaseValue=null,this.HistoryXML=null,this.DocNo=null,this.XML=null,this.DocSave=null,this.CodePrefix=null,this.Sno=null,this.AssetClassID=0,this.DeprBookID=0,this.AcqnCostACCID=0,this.AccumDeprACCID=0,this.AcqnCostDispACCID=0,this.AccumDeprDispACCID=0,this.GainsDispACCID=0,this.LossDispACCID=0,this.MaintExpenseACCID=0,this.DeprExpenseACCID=0,this.PostingGroupID=0,this.AMStatusID=0,this.CodeNumber=0,this.AMAssetID=0,this.AMParentAssetID=0,this.IsGroup=!1,this.Post=!1,this.StatusID=0,this.DeprBookMethod=0,this.DeprBookMethodBasedOn=0,this.AveragingMethodID=0,this.DeprScheduleID=0,this.DeprTypeID=0,this.AssetClassCode=null,this.AssetClassName=null,this.GUID=null,this.DeprBookCode=null,this.DeprBookName=null,this.PostGroupCode=null,this.PostGroupName=null,this.AMGUID=null,this.RecordType=null,this.AMGroup=!1,this.IsIncreaseAssetValue=!1,this.EmpName=null,this.EmpCode=null,this.EmpID=0,this.SelectedNodeID=0,this.PostCCID=0,this.PostAssetID=0,this.ScheduleID=0,this.LocationID=0,this.AddressXML=null,this.NotesXML=null,this.ContactsXML=null,this.CustomCostCenterFieldsQuery=null,this.CustomFieldsQuery=null,this.PrimaryContactQuery=null,this.AttachmetsXML=null,this.DepreciationXML=null,this.JVXML=null,this.Description=null,this.DeprStartValue=0,this.ChangeVal=0,this.AssetNetValueChange=0,this.DeprBookMethodBasedOnValue=0,this.TotalYears=0}static GetAssetClassDetails(e){let s=[];return s.push(e),s.push(i.a.SessionManager.UserID),s.push(i.a.SessionManager.LanguageID),i.a.accounting.GetAssetClassDetails(s)}static GetPostingGroupDetails(e){let s=[];return s.push(e),s.push(i.a.SessionManager.UserID),s.push(i.a.SessionManager.LanguageID),i.a.accounting.GetPostingGroupDetails(s)}SaveAssetClass(){0==this.AssetClassID&&(this.GUID=a.e.NewGuid());let e=[];return e.push(this.AssetClassID),e.push(null!=this.AssetClassCode?this.AssetClassCode:""),e.push(null!=this.AssetClassName?this.AssetClassName:""),e.push(this.PostingGroupID),e.push(this.DeprBookID),e.push(this.DeprTypeID),e.push(this.TotalYears),e.push(this.StatusID),e.push(i.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(""),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.SetAssetClass(e)}static GetDeprBookDetails(e){let s=[];return s.push(e),s.push(i.a.SessionManager.UserID),s.push(i.a.SessionManager.LanguageID),i.a.accounting.GetDeprBookDetails(s)}PostJVvoucher(){this.GUID=a.e.NewGuid();let e=[];return e.push(this.PostAssetID),e.push(this.PostCCID),e.push(this.JVXML),e.push(this.Post),e.push(this.DeprTypeID),e.push(this.DocXML),e.push(this.DocSave),e.push(this.DepreciationXML),e.push(this.RecordType),e.push(i.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.GetPostJvVoucher(e)}SetAssetDispose(e){this.GUID=a.e.NewGuid();let s=[];return s.push(this.PostAssetID),s.push(e.ToString("dd/MMM/yyyy")),s.push(this.PostCCID),s.push(this.JVXML),s.push(this.Post),s.push(this.DeprTypeID),s.push(this.DocXML),s.push(this.DocSave),s.push(this.DepreciationXML),s.push(this.RecordType),s.push(i.a.SessionManager.CompanyGUID),s.push(this.GUID),s.push(i.a.SessionManager.UserName),s.push(i.a.SessionManager.UserID),s.push(i.a.SessionManager.LanguageID),i.a.accounting.SetAssetDispose(s)}SaveDeprBook(e,s,t){0==this.DeprBookID&&(this.GUID=a.e.NewGuid());let n=[];return n.push(this.DeprBookID),n.push(this.DeprBookCode),n.push(this.DeprBookName),n.push(this.DeprBookMethod),n.push(this.DeprBookMethodBasedOn),n.push(this.DeprBookMethodBasedOnValue),n.push(this.StatusID),n.push(this.AveragingMethodID),n.push(e),n.push(s),n.push(t),n.push(i.a.SessionManager.CompanyGUID),n.push(this.GUID),n.push(""),n.push(i.a.SessionManager.UserName),n.push(i.a.SessionManager.UserID),n.push(i.a.SessionManager.LanguageID),i.a.accounting.SetDeprBook(n)}SaveFAPostingGroup(){0==this.PostingGroupID&&(this.GUID=a.e.NewGuid());let e=[];return e.push(this.PostingGroupID),e.push(this.PostGroupCode),e.push(this.PostGroupName),e.push(this.AcqnCostACCID),e.push(this.AccumDeprACCID),e.push(this.AcqnCostDispACCID),e.push(this.AccumDeprDispACCID),e.push(this.GainsDispACCID),e.push(this.LossDispACCID),e.push(this.MaintExpenseACCID),e.push(this.DeprExpenseACCID),e.push(this.StatusID),e.push(0),e.push(this.IsGroup),e.push(i.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.SetPostingGroup(e)}static GetAssetManagementDetails(e){let s=[];return s.push(e),s.push(i.a.SessionManager.UserID),s.push(i.a.SessionManager.LanguageID),i.a.accounting.GetAssetManagementDetails(s)}static GetAssetDeprSchDetails(e){let s=[];return s.push(e),s.push(i.a.SessionManager.UserID),s.push(i.a.SessionManager.LanguageID),i.a.accounting.GetAssetDeprSchDetails(s)}SetAssetManagementDetails(){let e=[];return e.push(this.AMAssetID),e.push(this.AMCode),e.push(this.AMName),e.push(this.AMStatusID),e.push(this.AMPurchaseValue),e.push(this.AMParentAssetID),e.push(this.AMGroup),e.push(this.CodePrefix),e.push(this.CodeNumber),e.push(this.Sno),e.push(this.DetailsXML),e.push(this.ChangeValueXML),e.push(this.CustomFieldsQuery),e.push(this.CustomCostCenterFieldsQuery),e.push(this.DepreciationXML),e.push(this.HistoryXML),e.push(this.NotesXML),e.push(this.AttachmetsXML),e.push(i.a.SessionManager.CompanyGUID),e.push(this.AMGUID),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.SetAssetManagementDetails(e).toPromise()}static DeleteAsset(e){let s=[];return s.push(e),s.push(i.a.SessionManager.UserID),s.push(i.a.SessionManager.RoleID),i.a.accounting.DeleteAsset(s)}static DeleteAssetDeprSchedule(e){let s=[];return s.push(e),s.push(i.a.SessionManager.RoleID),s.push(i.a.SessionManager.LanguageID),i.a.accounting.DeleteAssetDeprSchedule(s)}static DeleteAssetRefDoc(e,s){let t=[];return t.push(e),t.push(s),t.push(i.a.SessionManager.UserID),i.a.accounting.DeleteAssetRefDoc(t)}PostDeprJV(){this.GUID=a.e.NewGuid();let e=[];return e.push(this.PostCCID),e.push(this.JVXML),e.push(this.Post),e.push(i.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),e.push(i.a.SessionManager.RoleID),i.a.accounting.PostDeprJV(e)}PostDeprJVSummary(e,s,t,n,r){this.GUID=a.e.NewGuid();let o=[];return o.push(e),o.push(s),o.push(t),o.push(n),o.push(r),o.push(i.a.SessionManager.CompanyGUID),o.push(i.a.SessionManager.UserName),o.push(i.a.SessionManager.UserID),o.push(i.a.SessionManager.LanguageID),i.a.accounting.SetDeprPostingJVSummary(o).toPromise()}static SetsPostDeprReverseJV(e,s,t){let a=[];return a.push(e),a.push(s),a.push(t),a.push(i.a.SessionManager.CompanyGUID),a.push(i.a.SessionManager.UserName),a.push(i.a.SessionManager.UserID),a.push(i.a.SessionManager.LanguageID),i.a.accounting.SetsPostDeprReverseJV(a)}ChangeValue(e,s){this.GUID=a.e.NewGuid();let t=[];return t.push(this.PostAssetID),t.push(e),t.push(this.ChangeVal),t.push(this.AssetNetValueChange),t.push(s.ToString("dd/MMM/yyyy")),t.push(this.Description),t.push(this.DepreciationXML),t.push(this.ChangeValueXML),t.push(this.HistoryXML),t.push(this.LocationID),t.push(this.IsIncreaseAssetValue),t.push(this.JVXML),t.push(this.ChangeValueTypeID),t.push(i.a.SessionManager.CompanyGUID),t.push(this.GUID),t.push(i.a.SessionManager.UserName),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.LanguageID),i.a.accounting.SetAssetChangeValue(t)}DisposeReverse(e){let s=[];return s.push(e),s.push(i.a.SessionManager.UserName),s.push(i.a.SessionManager.UserID),s.push(i.a.SessionManager.LanguageID),i.a.accounting.DisposeReverse(s)}}},daZP:function(e,s,t){"use strict";t.r(s),t.d(s,"RibbonExtRental",(function(){return S}));var i=t("mrSG"),a=t("V7Sd"),n=t("Do2H"),r=t("Lp6j"),o=t("eQJW"),h=t("8B8H"),l=t("ScVY"),u=t("ockk"),p=t("n56n"),D=t("JIg3"),d=t("0/4Q");class c extends l.b{constructor(e,s){super(),this.statusID=null,this.ID=0,this.clickCheck=0,this.Title="",this.Property=new p.b(0),this.FromDate=new D.c(0),this.ToDate=new D.c(0),this.Status=new d.e(0),this.postparent=e,this.Title=e.DisplayName,this.Property.Label="Property",this.FromDate.Label="From",this.ToDate.Label="To",this.Status.Label="Status",this.Status.Items.push(d.d.ComboBoxItems_2("Pending","1")),this.Status.Items.push(d.d.ComboBoxItems_2("Posted","2")),this.Status.SelectedValue="1",this.FromDate.Date=e.FromDate,this.ToDate.Date=e.ToDate,r.e.IsEmpty(this.postparent.stat)||(this.Status.SelectedValue=this.postparent.stat),this.Property.CCID=92,this.Property.TypeID=2,this.Property.SelectedValue=e.Property}CaseIncomeDialogViewModel_1(e,s){this.parent=e,this.Title="Book Income",this.Property.Label="Property",this.FromDate.Label="Month",this.FromDate.Date=this.parent.FromDate,this.FromDate.CustomFormat="MMM/yyyy",this.Property.CCID=92,this.Property.TypeID=2,this.ToDate.Visible=!1,this.Status.Visible=!1,this.Property.SelectedValue=this.parent.Property}OnButtonClick(e){if("Cancel"==e.toString())n.a.page.HideDialog(),null!=this.parent?this.parent.DialogResult=!1:null!=this.postparent&&(this.postparent.DialogResult=!1);else{if(null!=this.parent){if(!this.FromDate.Date)return this.DisplayMessage="Select month",void(this.MessageVisibility=!0);this.parent.DialogResult=!0,this.parent.Property=this.Property.SelectedValue,this.parent.FromDate=this.FromDate.Date;let e=n.a.rental.GetContractsUnitsinCase(this.parent.Property,this.FromDate.Date);this.parent.FillData(e)}else if(null!=this.postparent){if(!this.FromDate.Date)return this.DisplayMessage="Select "+this.ToDate.Label,void(this.MessageVisibility=!0);if(!this.ToDate.Date)return this.DisplayMessage="Select "+this.ToDate.Label,void(this.MessageVisibility=!0);this.postparent.DialogResult=!0,this.postparent.Property=this.Property.SelectedValue,this.postparent.FromDate=this.FromDate.Date,this.postparent.ToDate=this.ToDate.Date,this.postparent.stat=this.Status.SelectedValue,this.postparent.ButtonPostVisible="1"==this.postparent.stat;let e=n.a.rental.GetContractsSchedules(this.postparent.Property,this.FromDate.Date,this.ToDate.Date,this.Status.SelectedValue,this.postparent.strSelect,this.postparent.strJoin);this.postparent.FillData(e)}n.a.page.HideDialog()}}}var m=t("B55N"),g=t("CUWK");class I extends l.b{constructor(e){super(),this.Title="",this.SelectAll=!1,this.ButtonPostVisible=!0,this.DialogResult=!1,this.Property=0,this.FromDate=null,this.ToDate=null,this.stat="",this.strSelect="",this.strJoin="",this.ProgressMessage="",this.ProgressValue=0,this.ProgressMax=0,this.DisplayName=e,this.InitColumns();let s=new c(this,"Refresh");n.a.page.ShowDialog(s,m.a,{HideClose:!0,ShowCenter:!0,Title:this.DisplayName})}OnBeginEdit(e){let s=e.item;if(this.ButtonPostVisible){if(!r.e.IsEmpty(s.Remarks))return!0}else if(r.e.IsEmpty(s.Postedvoucherno))return!0;return!1}InitColumns(){let e,s=n.a.empService.GetQueryData(0,"BulkInvoicePosting","","","");this.PstDocGrid=new h.a,this.PstDocGrid.Columns=[],this.PstDocGrid.Clear(),this.PstDocGrid.Width="",this.PstDocGrid.Height=void 0,this.PstDocGrid.CanUserAddRows=!1,this.PstDocGrid.SearchVisible=!0,this.PstDocGrid.SelectAll.Visible=!0,this.PstDocGrid.OnBeginEdit.Subscribe(this,"OnBeginEdit");let t=new Array,i=new Array;if(null!=s&&s.Tables.length>0&&s.Tables[0].length>0&&!r.e.IsEmpty(s.Tables[0][0].Value)){let a=new r.f;a.LoadXml(s.Tables[0][0].Value.toString()),a.DocumentElement.childNodes.forEach(s=>{if(e=new u.a,e.Header=s.attributes.Header.value,e.DisplayMember=s.attributes.Name.value,e.DisplayIndex=parseInt(s.attributes.index.value),r.e.IsEmpty(s.attributes.ID)||r.e.IsEmpty(s.attributes.ID.value)||(e.CostCenterID=parseInt(s.attributes.ID.value)),e.Width=parseInt(s.attributes.WIDTH.value),t.push(e),!r.e.IsEmpty(s.attributes.Type)&&"DIM"==s.attributes.Type.value){e=new u.a,e.Header=s.attributes.Header.value,e.DisplayMember="DIM"+s.attributes.ID.value,e.ReadOnly=!0,e.DisplayIndex=parseInt(s.attributes.index.value),e.Width=parseInt(s.attributes.WIDTH.value),i.push(e),this.PstDocGrid.TableColumns.push(e.DisplayMember);let t=(parseInt(s.attributes.ID.value)-5e4).toString();this.strSelect+=",L.CCNID"+t+",D"+t+".Name AS DIM"+s.attributes.ID.value,this.strJoin+=" LEFT JOIN "+r.e.GetTagTableName(parseInt(s.attributes.ID.value))+" AS D"+t+" ON L.CCNID"+t+"=D"+t+".NodeID"}})}e=new u.a,e.Header="\u221a",e.DisplayMember="Select",e.DataType="CheckBox",e.Width=25,i.push(e),e=new u.a,e.Header="Contract SNo",e.DisplayMember="ContractNo",e.ReadOnly=!0,e.Width=100;let a=t.find(s=>s.DisplayMember==e.DisplayMember);null!=a&&null!=a?(e.DisplayIndex=a.DisplayIndex,e.Width=a.Width):t.length>0&&(e.IsVisible=!1),i.push(e),e=new u.a,e.Header="Start Date",e.DisplayMember="startdate",e.ReadOnly=!0,e.Width=95,a=t.find(s=>s.DisplayMember==e.DisplayMember),null!=a&&null!=a?(e.DisplayIndex=a.DisplayIndex,e.Width=a.Width):t.length>0&&(e.IsVisible=!1),i.push(e),e=new u.a,e.Header="End Date",e.DisplayMember="enddate",e.ReadOnly=!0,e.Width=95,a=t.find(s=>s.DisplayMember==e.DisplayMember),null!=a&&null!=a?(e.DisplayIndex=a.DisplayIndex,e.Width=a.Width):t.length>0&&(e.IsVisible=!1),i.push(e),e=new u.a,e.Header="Tower",e.DisplayMember="property",e.ReadOnly=!0,e.Width=150,a=t.find(s=>s.DisplayMember==e.DisplayMember),null!=a&&null!=a?(e.DisplayIndex=a.DisplayIndex,e.Width=a.Width):t.length>0&&(e.IsVisible=!1),i.push(e),e=new u.a,e.Header="Unit",e.DisplayMember="unit",e.ReadOnly=!0,e.Width=100,a=t.find(s=>s.DisplayMember==e.DisplayMember),null!=a&&null!=a?(e.DisplayIndex=a.DisplayIndex,e.Width=a.Width):t.length>0&&(e.IsVisible=!1),i.push(e),e=new u.a,e.Header="Tenant",e.DisplayMember="Tenant",e.ReadOnly=!0,e.Width=100,a=t.find(s=>s.DisplayMember==e.DisplayMember),null!=a&&null!=a?(e.DisplayIndex=a.DisplayIndex,e.Width=a.Width):t.length>0&&(e.IsVisible=!1),i.push(e),e=new u.a,e.Header="DocDate",e.DisplayMember="DocDate",e.DataType="DATE",e.ValueMember="EventTime",e.ReadOnly=!n.a.SessionManager.IsActionAssigned(495,"Date Editable in Bulk Posting"),e.Width=90,a=t.find(s=>s.DisplayMember==e.DisplayMember),null!=a&&null!=a?(e.DisplayIndex=a.DisplayIndex,e.Width=a.Width):t.length>0&&(e.IsVisible=!1),i.push(e),e=new u.a,e.Header="Amount",e.DisplayMember="Amount",e.ReadOnly=!0,e.Width=100,e.DataType="FLOAT",a=t.find(s=>s.DisplayMember==e.DisplayMember),null!=a&&null!=a?(e.DisplayIndex=a.DisplayIndex,e.Width=a.Width):t.length>0&&(e.IsVisible=!1),i.push(e),e=new u.a,e.Header="Doc No",e.DisplayMember="Postedvoucherno",e.DataType="LINK",e.ReadOnly=!0,e.Width=80,e.Click.Subscribe(this,"onClick"),a=t.find(s=>s.DisplayMember==e.DisplayMember),null!=a&&null!=a?(e.DisplayIndex=a.DisplayIndex,e.Width=a.Width):t.length>0&&(e.IsVisible=!1),i.push(e),e=new u.a,e.Header="Remarks",e.DisplayMember="Remarks",e.ReadOnly=!0,e.Width=90,a=t.find(s=>s.DisplayMember==e.DisplayMember),null!=a&&null!=a?(e.DisplayIndex=a.DisplayIndex,e.Width=a.Width):t.length>0&&(e.IsVisible=!1),i.push(e),i.sort((e,s)=>e.DisplayIndex-s.DisplayIndex).forEach(e=>{this.PstDocGrid.Columns.push(e)}),this.PstDocGrid.TableColumns.push("Select"),this.PstDocGrid.TableColumns.push("ContractNo"),this.PstDocGrid.TableColumns.push("startdate"),this.PstDocGrid.TableColumns.push("ActStartdate"),this.PstDocGrid.TableColumns.push("enddate"),this.PstDocGrid.TableColumns.push("Actenddate"),this.PstDocGrid.TableColumns.push("receiveDate"),this.PstDocGrid.TableColumns.push("VoucherNo"),this.PstDocGrid.TableColumns.push("unit"),this.PstDocGrid.TableColumns.push("property"),this.PstDocGrid.TableColumns.push("Tenant"),this.PstDocGrid.TableColumns.push("unitID"),this.PstDocGrid.TableColumns.push("propertyID"),this.PstDocGrid.TableColumns.push("TenantID"),this.PstDocGrid.TableColumns.push("contractID"),this.PstDocGrid.TableColumns.push("CostCenterID"),this.PstDocGrid.TableColumns.push("NodeID"),this.PstDocGrid.TableColumns.push("DocDate"),this.PstDocGrid.TableColumns.push("Postedvoucherno"),this.PstDocGrid.TableColumns.push("EventTime"),this.PstDocGrid.TableColumns.push("SchEventID"),this.PstDocGrid.TableColumns.push("RecurMethod"),this.PstDocGrid.TableColumns.push("AttachmentID"),this.PstDocGrid.TableColumns.push("SubCostCenterID"),this.PstDocGrid.TableColumns.push("PostedDocid"),this.PstDocGrid.TableColumns.push("Remarks"),this.PstDocGrid.TableColumns.push("Amount"),this.PstDocGrid.SearchVisible=!0,this.PstDocGrid.AddSearchCols()}onClick(){null==this.PstDocGrid.SelectedItem||r.e.IsEmpty(this.PstDocGrid.SelectedItem.PostedDocid)||r.e.IsEmpty(this.PstDocGrid.SelectedItem.SubCostCenterID)||(event.preventDefault(),g.RibbonExtViewModel.LoadDocument_2(parseInt(this.PstDocGrid.SelectedItem.SubCostCenterID.toString()),parseInt(this.PstDocGrid.SelectedItem.PostedDocid.toString())))}FillData(e){this.Title=this.FromDate?this.ToDate?this.FromDate.ToString(n.a.SessionManager.Preferences["Date Format"])+" - "+this.ToDate.ToString(n.a.SessionManager.Preferences["Date Format"]):this.FromDate.ToString(n.a.SessionManager.Preferences["Date Format"]):"";var s=this.PstDocGrid.Columns.find(e=>"Postedvoucherno"==e.DisplayMember),t=this.PstDocGrid.Columns.find(e=>"Remarks"==e.DisplayMember);if("1"==this.stat?(s.IsVisible=!1,t.IsVisible=!0):(s.IsVisible=!0,t.IsVisible=!1),this.PstDocGrid.Clear(),null!=e&&e.Tables.length>0&&!e.Columns[0].Contains("ErrorMessage"))for(let i=0;i<e.Tables[0].length;i++){let s=this.PstDocGrid.NewRow();s.Select=!1,s.contractID=r.e.String(e.Tables[0][i].contractID),s.ContractNo=r.e.String(e.Tables[0][i].sno),r.e.IsEmpty(e.Tables[0][i].startdate)||(s.startdate=new Date(r.e.String(e.Tables[0][i].startdate)).ToString(n.a.SessionManager.Preferences["Date Format"])),s.ActStartdate=new Date(r.e.String(e.Tables[0][i].startdate)),r.e.IsEmpty(e.Tables[0][i].enddate)||(s.enddate=new Date(e.Tables[0][i].enddate.toString()).ToString(n.a.SessionManager.Preferences["Date Format"]),s.Actenddate=new Date(e.Tables[0][i].enddate.toString())),s.VoucherNo=r.e.String(e.Tables[0][i].VoucherNo),s.Postedvoucherno=r.e.String(e.Tables[0][i].POstedvoucherno),r.e.IsEmpty(e.Tables[0][i].EventTime)||(s.DocDate=new Date(e.Tables[0][i].EventTime.toString()).ToString(n.a.SessionManager.Preferences["Date Format"]),s.EventTime=new Date(e.Tables[0][i].EventTime.toString())),s.SchEventID=r.e.String(e.Tables[0][i].SchEventID),s.RecurMethod=r.e.String(e.Tables[0][i].RecurMethod),s.AttachmentID=r.e.String(e.Tables[0][i].AttachmentID),s.CostCenterID=r.e.String(e.Tables[0][i].CostCenterID),s.NodeID=r.e.String(e.Tables[0][i].NodeID),s.SubCostCenterID=r.e.String(e.Tables[0][i].SubCostCenterID),s.PostedDocid=r.e.String(e.Tables[0][i].PostedDocid),s.unit=e.Tables[0][i].unitName,s.property=r.e.String(e.Tables[0][i].propertyName),s.Tenant=r.e.String(e.Tables[0][i].firstName),s.unitID=e.Tables[0][i].unitid,s.propertyID=r.e.String(e.Tables[0][i].Propertyid),s.TenantID=r.e.String(e.Tables[0][i].TenantID),s.Amount=r.e.String(e.Tables[0][i].Amount);for(let t=0;t<this.PstDocGrid.Columns.length;t++)this.PstDocGrid.Columns[t].DisplayMember.startsWith("DIM")&&e.Columns[0].Contains(this.PstDocGrid.Columns[t].DisplayMember)&&(s[this.PstDocGrid.Columns[t].DisplayMember]=r.e.String(e.Tables[0][i][this.PstDocGrid.Columns[t].DisplayMember]));this.PstDocGrid.addRow(s)}this.PstDocGrid.UpdateFooter(),this.PstDocGrid.RefreshColumns()}SelectUnselectAll(e){for(let s=0;s<this.PstDocGrid.Table.length;s++)this.PstDocGrid.Table[s].Select=this.ButtonPostVisible?!!r.e.IsEmpty(this.PstDocGrid.Table[s].Remarks)&&e:!r.e.IsEmpty(this.PstDocGrid.Table[s].Postedvoucherno)&&e}ButtonSave(e){if(this.DisplayMessage="","Customize"==e);else if("Export"==e);else if("POST"==e.toString())this.AutoPostDocs(this.PstDocGrid.Table);else if("OK"==e.toString())this.vModel&&(this.vModel.ShowProcessDialog=!1);else if("UnPost"==e.toString())this.UnPost();else{let e=new c(this,"Refresh");n.a.page.ShowDialog(e,m.a,{HideClose:!0,ShowCenter:!0,Title:this.DisplayName})}}get Progress(){return this.vModel?this.vModel.ProgressValue+"/"+this.vModel.ProgressMax:""}AutoPostDocs(e){return Object(i.b)(this,void 0,void 0,(function*(){const{DashBoardNotifViewModel:s}=yield Promise.all([t.e(2),t.e(1),t.e(5),t.e(26),t.e(42),t.e(0),t.e(140)]).then(t.bind(null,"Wh9R"));this.vModel=new s(0),this.vModel.dt=e,this.ProgressMessage="Posting documents please wait...",setTimeout(()=>{this.vModel.save()},10)}))}UpdGrid(){return Object(i.b)(this,void 0,void 0,(function*(){for(let e=0;e<this.PstDocGrid.Table.length;e++)1==this.PstDocGrid.Table[e].Select&&(this.PstDocGrid.Table[e].Select=!1,this.PstDocGrid.updateRow(this.PstDocGrid.Table[e]))}))}GetExportHTML(){Logger.InfoLog("BulkInvoicePostingViewModel:: inside GetExportHTML ");let e="",s="";e+="<html><meta charset='utf-8' /><body style='color:blac;background-color:white;'>",s+=".hdr{text-align:cente; padding:5px; background-color:#4F81BD;color:white;font-family:Arial;font-size:11pt} ",s+=".grp{padding:2p; background-color:#87CEEB; color:#FFFCF7;font-family:arial; font-size:10pt;}",s+=".tot{background-color:whit; color:red;font-family:arial; font-weight:bold; font-size:8pt;}",s+=".alt{background-color:whitesmok; color:black; font-family:arial; font-size:9pt; align:right;}",e+="<style>"+s.toString()+"</style>";let t,i=0;for(let a=0;a<this.PstDocGrid.Columns.length;a++)i+=this.PstDocGrid.Columns[a].Width;e+="<table>",e+="\r\n<tr><td align='center'><h2>",e+=n.a.SessionManager.CompanyName,e+="</h2></td></tr>",e+="\r\n<tr><td align='center'><h3 style='vertical-align:middl;'>",e+=this.DisplayName,e+="</h3></td></tr>",e+="\r\n<tr><td align='center'>",e+=" From :  "+this.FromDate.ToString(n.a.SessionManager.Preferences["Date Format"]),e+=" &nbs;&nbsp;&nbsp;To :  "+this.ToDate.ToString(n.a.SessionManager.Preferences["Date Format"]),e+="</td></tr>",e+="<tr><td style='padding-top:10p;'><table border=1 width='"+i+"' style='border-collapse:collapse;  font-family:arial; font-size:9pt;' >",e+="<COLGROUP>";for(let a=0;a<this.PstDocGrid.Columns.length;a++)e+="FLOAT"==this.PstDocGrid.Columns[a].DataType?"<COL style='text-align:righ;'>":"<COL style=''>";e+="</COLGROUP>",e+="<tr style=''>";for(let a=0;a<this.PstDocGrid.Columns.length;a++)e+="<th class='hdr' width='"+this.PstDocGrid.Columns[a].Width,e+="' >",e+=this.PstDocGrid.Columns[a].Header,e+="</th>";e+="</tr>";for(let a=0;a<this.PstDocGrid.Table.length;a++){e+="<tr",a%2==1&&(e+=" class=alt"),e+=">";for(let s=0;s<this.PstDocGrid.Columns.length;s++)e+="<td",e+="FLOAT"==this.PstDocGrid.Columns[s].DataType?" align='right'":" align='left'",e+=">",t="PactComboBox"==this.PstDocGrid.Columns[s].DataType?this.PstDocGrid.Columns[s].ValueBinding+"_Key":this.PstDocGrid.Columns[s].DisplayMember,this.PstDocGrid.TableColumns.Contains(t)&&("ChequeNumber"==t&&this.PstDocGrid.Table[a][t].toString().startsWith("0")?e+="'"+this.PstDocGrid.Table[a][t].toString():e+=this.PstDocGrid.Table[a][t].toString()),e+="</td>";e+="</tr>"}return e+="</table>",e+="</td></tr></table>",e+="</body><html>",Logger.InfoLog("BulkInvoicePostingViewModel:: exiting GetExportHTML "),e}UnPost(){let e,s=0;for(let t=0;t<this.PstDocGrid.Table.length;t++)if(!r.e.IsEmpty(this.PstDocGrid.Table[t].Postedvoucherno)&&!r.e.IsEmpty(this.PstDocGrid.Table[t].Select)&&Object(o.j)(this.PstDocGrid.Table[t].Select)){e=0;let i=n.a.rental.UnPostInvoice(parseInt(this.PstDocGrid.Table[t].SubCostCenterID.toString()),parseInt(this.PstDocGrid.Table[t].PostedDocid.toString()),parseInt(this.PstDocGrid.Table[t].SchEventID.toString()));this.DisplayMessage=i.Message,e=i.RetValue,e>0&&(this.PstDocGrid.Table[t].Postedvoucherno=null,this.PstDocGrid.Table[t].Select=!1,this.PstDocGrid.updateRow(this.PstDocGrid.Table[t]),this.PstDocGrid.SelectAll.IsChecked=!1,s++)}this.MessageVisibility=!0,s>0&&(this.DisplayMessage="Deleted "+s)}}var C=t("4Eix");class S{static LoadRentalScreen(e){if(106==e.FeatureID&&167==e.FeatureActionTypeID);else{if(103==e.FeatureID)return{component:a.TreeViewPageComponent,params:{ScreenName:e.ScreenName,FeatureActionID:e.FeatureActionID,CostCenterID:e.FeatureID,Call:"C3"},basedon:"CostCenterID"};if(129==e.FeatureID)return{component:a.TreeViewPageComponent,params:{ScreenName:e.ScreenName,FeatureActionID:e.FeatureActionID,CostCenterID:e.FeatureID,Call:"C3"},basedon:"CostCenterID"}}switch(e.FeatureActionID.ToString()){case"190":let s=new I(e.ScreenName);n.a.page.addNewTab({title:e.ScreenName,component:C.a,params:{obj:s}});break;case"514":case"3741":case"3016":case"602":case"3706":return{component:a.TreeViewPageComponent,params:{ScreenName:e.ScreenName,FeatureActionID:e.FeatureActionID,CostCenterID:e.FeatureID,Call:"C3"},basedon:"CostCenterID"}}}static ShowQuickAdd_RENIsQuick(e,s){return Object(i.b)(this,void 0,void 0,(function*(){if(94==e){const{QuickAddTenantComponent:e}=yield t.e(0).then(t.bind(null,"r5Mn")),{QuickAddTenantViewModel:i}=yield Promise.all([t.e(3),t.e(31),t.e(0),t.e(201)]).then(t.bind(null,"T0de"));let a=new i(s,94,1,!1,null);n.a.page.ShowDialog(a,e,{Title:a.Title,ShowCenter:!0})}return 0}))}static ShowQuickAdd_REN(e,s){return Object(i.b)(this,void 0,void 0,(function*(){if(92==e){n.a.page.ShowLoading=!0;const{AddEditPropertyComponent:e}=yield t.e(0).then(t.bind(null,"k08F")),{AddEditPropertyViewModel:i}=yield Promise.all([t.e(24),t.e(29)]).then(t.bind(null,"Q0PM"));let a=new i(parseInt(s),1,!1);n.a.page.addNewTab({title:a.ScreenName,component:e,params:{obj:a}})}else if(93==e){n.a.page.ShowLoading=!0;const{AddEditUnitsComponent:e}=yield t.e(0).then(t.bind(null,"Lslp")),{AddEditUnitsViewModel:i}=yield Promise.all([t.e(24),t.e(30)]).then(t.bind(null,"c6GQ"));let a=new i(s,!1,0,0);n.a.page.addNewTab({title:a.ScreenName,component:e,params:{obj:a}})}else if(94==e){const{AddEditTenantComponent:e}=yield t.e(0).then(t.bind(null,"x9zH")),{AddEditTenantViewModel:i}=yield Promise.all([t.e(3),t.e(31),t.e(200)]).then(t.bind(null,"XR/+"));let a=new i(s,0,!1);n.a.page.addNewTab({title:a.ScreenName,component:e,params:{obj:a}})}}))}}}}]);