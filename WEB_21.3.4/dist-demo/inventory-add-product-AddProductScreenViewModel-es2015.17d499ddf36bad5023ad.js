(window.webpackJsonp=window.webpackJsonp||[]).push([[172,71,75,77,86,89,113,121],{"4k0m":function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var i=s("Do2H"),a=s("ScVY"),h=s("EQd/"),n=s("0/4Q");class o extends a.b{constructor(t,e,s,a){super(),this.Remarks=new h.c(0),this.CostCenterID=0,this.NodeID=0,this.Parent=null,this.retValWeb=0,this.IsUpdated=!1,this.CostCenterID=t,this.NodeID=e,this.Parent=a,this.ScreenObject=s,this.Remarks.Label=i.a.GetResource("Remarks")}SaveStatus(t,e,s,i=!0){let a=!1,h=null;"MonthlyPayrollViewModel"==this.Parent.ClassName?(h=this.Parent.SetDocStatus(t,e,s,new Date,this.Remarks.Text,!0,""),null!=h&&h.Tables.length>0&&h.Tables[0].length>0&&h.Columns[0].Contains("status")&&(this.Parent.DocStatus="["+h.Tables[0][0].status.toString()+"]",a=!0),null!=h&&h.Tables.length>0&&h.Tables[h.Tables.length-1].length>0&&h.Columns[h.Tables.length-1].Contains("ErrorMessage")&&(this.Parent.this.DisplayMessage=h.Tables[h.Tables.length-1][0].ErrorMessage.toString()),this.Parent.this.MessageVisibility=!0,a&&this.Parent.btnClear_Click()):"FinalSettlementViewModel"==this.Parent.ClassName&&(h=this.Parent.SetDocStatus(t,e,s,new Date,this.Remarks.Text,!0,""),null!=h&&h.Tables.length>0&&h.Tables[0].length>0&&h.Columns[0].Contains("status")&&(this.Parent.DocStatus="["+h.Tables[0][0].status.toString()+"]",a=!0),null!=h&&h.Tables.length>0&&h.Tables[h.Tables.length-1].length>0&&h.Columns[h.Tables.length-1].Contains("ErrorMessage")&&(this.Parent.this.DisplayMessage=h.Tables[h.Tables.length-1][0].ErrorMessage.toString()),this.Parent.this.MessageVisibility=!0,a&&this.Parent.Button_Click("Clear"))}onButtonClick(t){let e=0;if(40054==this.CostCenterID)"Approve"==t?i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Edit")?this.Parent.btnPost_Click():this.SaveStatus(369,parseInt(this.Parent.oCMP.arrLstOthMPFields[0].dvPayProcessed[0].WorkFlowID),""):"Reject"==t&&this.SaveStatus(372,0,""),i.a.page.HideDialog();else if(40095==this.CostCenterID)"Approve"==t?i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Edit")?(this.Parent.sCmdParameter="Approve",this.Parent.Button_Click("Save")):this.SaveStatus(369,this.Parent.WID,""):"Reject"==t&&this.SaveStatus(372,0,""),i.a.page.HideDialog();else{let s=this.ScreenObject.CurrentStatus;if("Approve"==t){if(!this.IsSaveValidated())return;let t=i.a.common.ApproveCostCenter(this.CostCenterID,this.NodeID,s,this.Remarks.Text,!1,0);this.DisplayMessage=t.Message,e=t.RetValue,e>0&&(this.IsUpdated||(this.ScreenObject.ButtonApproveVisible=!1,this.UpdateStatusID(e),null!=this.ScreenObject.drpStatus&&(null==this.ScreenObject.drpStatus.Items.find(t=>t.Value==e.toString())&&("1001"==e.toString()?this.ScreenObject.drpStatus.Items.push(n.d.ComboBoxItems_2("Un Approved","1001")):"1002"==e.toString()?this.ScreenObject.drpStatus.Items.push(n.d.ComboBoxItems_2("Approved","1002")):this.ScreenObject.drpStatus.Items.push(n.d.ComboBoxItems_2("Rejected","1003"))),this.ScreenObject.drpStatus.SelectedValue=e.toString(),this.ScreenObject.drpStatus.SetSelectedItem(e.toString())),i.a.SessionManager.IsWebApplication&&(this.retValWeb=e)),i.a.page.HideDialog())}else if("Reject"==t){if(!this.IsSaveValidated())return;let t=i.a.common.ApproveCostCenter(this.CostCenterID,this.NodeID,s,this.Remarks.Text,!0,0);this.DisplayMessage=t.Message,e=t.RetValue,e>0&&(this.IsUpdated||(this.UpdateStatusID(e),null!=this.ScreenObject.drpStatus&&(null==this.ScreenObject.drpStatus.Items.find(t=>t.Value==e.toString())&&("1001"==e.toString()?this.ScreenObject.drpStatus.Items.push(n.d.ComboBoxItems_2("Un Approved","1001")):"1002"==e.toString()?this.ScreenObject.drpStatus.Items.push(n.d.ComboBoxItems_2("Approved","1002")):this.ScreenObject.drpStatus.Items.push(n.d.ComboBoxItems_2("Rejected","1003"))),this.ScreenObject.drpStatus.SelectedValue=e.toString(),this.ScreenObject.drpStatus.SetSelectedItem(e.toString())),i.a.SessionManager.IsWebApplication&&(this.retValWeb=e)),i.a.page.HideDialog())}else i.a.page.HideDialog()}}UpdateStatusID(t){this.ScreenObject.CurrentStatus=t,"QuickAddAccountScreenViewModel"==this.Parent.ClassName||"AddEditAccountScreenViewModel"==this.Parent.ClassName?this.Parent.obj.StatusID=t:"QuickAddProductViewModel"==this.Parent.ClassName?this.Parent.objProduct.ProductStatus=t:"AddProductScreenViewModel"==this.Parent.ClassName?this.Parent.oProduct.ProductStatus=t:"QuickAddCostCenterViewModel"==this.Parent.ClassName||"AddCostCenterViewModel"==this.Parent.ClassName?this.Parent.objCostCenter.Status=t:"AddEditEmpMasterViewModel"==this.Parent.ClassName&&(this.Parent.objEmp.StatusID=t)}IsSaveValidated(){if(this.IsUpdated=!1,"QuickAddAccountScreenViewModel"==this.Parent.ClassName){let t=this.Parent;if(t.ButtonSave.Visible&&t.ButtonSave.Enable){if(t.SaveMethod("APPROVE_CALL"),0!=t.AccountID)return this.DisplayMessage=t.DisplayMessage,t.DisplayMessage="",!1;this.IsUpdated=!0,t.DisplayMessage=""}}else if("AddEditAccountScreenViewModel"==this.Parent.ClassName){let t=this.Parent;if(t.ButtonSave.Visible&&t.ButtonSave.Enable){if(t.OnSaveAccount("APPROVE_CALL"),0!=t.AccountID)return this.DisplayMessage=t.DisplayMessage,t.DisplayMessage="",!1;this.IsUpdated=!0,t.DisplayMessage=""}}else if("QuickAddProductViewModel"==this.Parent.ClassName){let t=this.Parent;if(t.ButtonSave.Visible&&t.ButtonSave.Enable){if(t.onSaveProduct("APPROVE_CALL"),0!=t.objProduct.ProductID)return this.DisplayMessage=t.DisplayMessage,t.DisplayMessage="",!1;this.IsUpdated=!0,t.DisplayMessage=""}}else if("AddProductScreenViewModel"==this.Parent.ClassName){let t=this.Parent;if(t.ButtonSave.Visible&&t.ButtonSave.Enable){if(t.OnSaveProduct("APPROVE_CALL"),0!=t.ProductID)return this.DisplayMessage=t.DisplayMessage,t.DisplayMessage="",!1;this.IsUpdated=!0,t.DisplayMessage=""}}else if("QuickAddCostCenterViewModel"==this.Parent.ClassName){let t=this.Parent;if(t.ButtonSave.Visible&&t.ButtonSave.Enable){if(t.SaveMethod(),0!=t.NodeID)return this.DisplayMessage=t.DisplayMessage,t.DisplayMessage="",!1;this.IsUpdated=!0,t.DisplayMessage=""}}else if("AddCostCenterViewModel"==this.Parent.ClassName){let t=this.Parent;if(t.ButtonSave.Visible&&t.ButtonSave.Enable){if(t.OnSaveCostCenter("Save"),0!=t.NodeID)return this.DisplayMessage=t.DisplayMessage,t.DisplayMessage="",!1;this.IsUpdated=!0,t.DisplayMessage=""}}else if("AddEditEmpMasterViewModel"==this.Parent.ClassName){let t=this.Parent;if(t.ButtonSave.Visible&&t.ButtonSave.Enable){if(t.OnSaveEmployee("Save"),0!=t.NodeID)return this.DisplayMessage=t.DisplayMessage,t.DisplayMessage="",!1;this.IsUpdated=!0,t.DisplayMessage=""}}return!0}}},EggS:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var i=s("Do2H"),a=s("Lp6j"),h=s("eQJW");class n{constructor(){this.CustomerID=0,this.CustomerTypeID=0,this.StatusID=0,this.AccountID=0,this.ParentID=0,this.SelectedNodeID=0,this.CodeNumber=0,this.IsGroup=!1,this.CreditDays=0,this.CreditLimit=0,this.DebitDays=0,this.Debitlimit=0,this.IsCode=!1,this.ActivityXml="",this.CCXML=""}SaveCustomerQuick(){try{let t=[];return t.push(this.CustomerID),t.push(null!=this.CustomerCode?this.CustomerCode:""),t.push(null!=this.CustomerName?this.CustomerName:""),t.push(this.StatusID),t.push(this.CodePrefix),t.push(this.CodeNumber),t.push(this.StaticFieldsQuery),t.push(this.CustomFieldsQuery),t.push(this.CustomCostCenterFieldsQuery),t.push(i.a.SessionManager.CompanyGUID),t.push(this.GUID),t.push(""),t.push(i.a.SessionManager.UserName),t.push(i.a.SessionManager.RoleID),t.push(i.a.SessionManager.LanguageID),i.a.crmService.SetCustomerQuick(t)}catch(t){return Logger.ErrorLog("Account:: SaveAccountQuick"+t.stack),""}}SaveCustomer(){Logger.InfoLog("Customer:: Inside SaveCustomer");try{0==this.CustomerID&&(this.GUID=a.e.NewGuid());let t=[];return t.push(this.CustomerID),t.push(null!=this.CustomerCode?this.CustomerCode:""),t.push(null!=this.CustomerName?this.CustomerName:""),t.push(null!=this.AliasName?this.AliasName:""),t.push(this.CustomerTypeID),t.push(this.StatusID),t.push(this.AccountID),t.push(this.SelectedNodeID),t.push(this.IsGroup),t.push(this.CreditDays),t.push(this.CreditLimit),t.push(null!=this.UserName?this.UserName:""),t.push(null!=this.Password?this.Password:""),t.push(null!=this.OnlineCustType?this.OnlineCustType:""),t.push(i.a.SessionManager.CompanyGUID),t.push(null!=this.GUID?this.GUID:"GUID"),t.push(""),t.push(i.a.SessionManager.UserName),t.push(this.CustomFieldsQuery),t.push(this.CustomCostCenterFieldsQuery),t.push(this.ContactsXML),t.push(this.AttachmetsXML),t.push(this.NotesXML),t.push(this.AddressXML),t.push(this.ActivityXml),t.push(this.CCXML),t.push(!1),t.push(null==this.PrimaryContactQuery?"":this.PrimaryContactQuery),t.push(i.a.SessionManager.RoleID),t.push(i.a.SessionManager.LanguageID),t.push(null!=this.CodePrefix?this.CodePrefix:""),t.push(this.CodeNumber),t.push(this.IsCode),i.a.crmService.SaveCustomer(t)}catch(t){return Logger.ErrorLog("Customer:: SaveCustomer"+t.stack),""}}GetCustomerDetails(){let t=i.a.crmService.GetCustomerInfo("?UserID="+i.a.SessionManager.UserID+"&RoleID="+i.a.SessionManager.RoleID+"&LangID="+i.a.SessionManager.LangID+"&CustomerID="+this.CustomerID);return!t.Columns[0].Contains("ErrorMessage")&&t.Tables.length>0&&t.Tables[0].length>0&&(this.CustomerID=parseInt(t.Tables[0][0].CustomerID),this.CustomerCode=a.e.String(t.Tables[0][0].CustomerCode),this.CustomerName=a.e.String(t.Tables[0][0].CustomerName),this.AliasName=a.e.String(t.Tables[0][0].AliasName),a.e.IsEmpty(t.Tables[0][0].CustomerTypeID)||(this.CustomerTypeID=parseInt(t.Tables[0][0].CustomerTypeID)),this.StatusID=parseInt(t.Tables[0][0].StatusID),a.e.IsEmpty(t.Tables[0][0].AccountID)||(this.AccountID=parseInt(t.Tables[0][0].AccountID)),this.IsGroup=Object(h.j)(t.Tables[0][0].IsGroup),a.e.IsEmpty(t.Tables[0][0].CreditDays)||(this.CreditDays=parseInt(t.Tables[0][0].CreditDays)),a.e.IsEmpty(t.Tables[0][0].CreditLimit)||(this.CreditLimit=parseFloat(t.Tables[0][0].CreditLimit)),this.ParentID=parseInt(t.Tables[0][0].ParentID),this.GUID=a.e.String(t.Tables[0][0].GUID),this.Description=a.e.String(t.Tables[0][0].Description),this.CodePrefix=a.e.String(t.Tables[0][0].CodePrefix),this.UserName=a.e.String(t.Tables[0][0].UserName),this.OnlineCustType=a.e.String(t.Tables[0][0].OnlineCustType),this.Password=a.e.String(t.Tables[0][0].Password),a.e.IsEmpty(t.Tables[0][0].CodeNumber)||(this.CodeNumber=parseInt(t.Tables[0][0].CodeNumber))),t}DeleteCustomer(t,e){try{let s=[];return s.push(t),s.push(e),s.push(i.a.SessionManager.RoleID),s.push(i.a.SessionManager.LanguageID),Logger.InfoLog("Customer:: Success: DBH.DeleteCustomer "+t.toString()),i.a.crmService.RemoveCustomer(s)}catch(s){return Logger.ErrorLog("LEAD::DeleteLead"+s.stack),""}}}},NM0h:function(t,e,s){"use strict";s.d(e,"a",(function(){return h}));var i=s("Do2H"),a=s("Lp6j");class h{constructor(){this.ChangeValueXML=null,this.DetailsXML=null,this.AMCode=null,this.AMName=null,this.AMPurchaseValue=null,this.HistoryXML=null,this.DocNo=null,this.XML=null,this.DocSave=null,this.CodePrefix=null,this.Sno=null,this.AssetClassID=0,this.DeprBookID=0,this.AcqnCostACCID=0,this.AccumDeprACCID=0,this.AcqnCostDispACCID=0,this.AccumDeprDispACCID=0,this.GainsDispACCID=0,this.LossDispACCID=0,this.MaintExpenseACCID=0,this.DeprExpenseACCID=0,this.PostingGroupID=0,this.AMStatusID=0,this.CodeNumber=0,this.AMAssetID=0,this.AMParentAssetID=0,this.IsGroup=!1,this.Post=!1,this.StatusID=0,this.DeprBookMethod=0,this.DeprBookMethodBasedOn=0,this.AveragingMethodID=0,this.DeprScheduleID=0,this.DeprTypeID=0,this.AssetClassCode=null,this.AssetClassName=null,this.GUID=null,this.DeprBookCode=null,this.DeprBookName=null,this.PostGroupCode=null,this.PostGroupName=null,this.AMGUID=null,this.RecordType=null,this.AMGroup=!1,this.IsIncreaseAssetValue=!1,this.EmpName=null,this.EmpCode=null,this.EmpID=0,this.SelectedNodeID=0,this.PostCCID=0,this.PostAssetID=0,this.ScheduleID=0,this.LocationID=0,this.AddressXML=null,this.NotesXML=null,this.ContactsXML=null,this.CustomCostCenterFieldsQuery=null,this.CustomFieldsQuery=null,this.PrimaryContactQuery=null,this.AttachmetsXML=null,this.DepreciationXML=null,this.JVXML=null,this.Description=null,this.DeprStartValue=0,this.ChangeVal=0,this.AssetNetValueChange=0,this.DeprBookMethodBasedOnValue=0,this.TotalYears=0}static GetAssetClassDetails(t){let e=[];return e.push(t),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.GetAssetClassDetails(e)}static GetPostingGroupDetails(t){let e=[];return e.push(t),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.GetPostingGroupDetails(e)}SaveAssetClass(){0==this.AssetClassID&&(this.GUID=a.e.NewGuid());let t=[];return t.push(this.AssetClassID),t.push(null!=this.AssetClassCode?this.AssetClassCode:""),t.push(null!=this.AssetClassName?this.AssetClassName:""),t.push(this.PostingGroupID),t.push(this.DeprBookID),t.push(this.DeprTypeID),t.push(this.TotalYears),t.push(this.StatusID),t.push(i.a.SessionManager.CompanyGUID),t.push(this.GUID),t.push(""),t.push(i.a.SessionManager.UserName),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.LanguageID),i.a.accounting.SetAssetClass(t)}static GetDeprBookDetails(t){let e=[];return e.push(t),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.GetDeprBookDetails(e)}PostJVvoucher(){this.GUID=a.e.NewGuid();let t=[];return t.push(this.PostAssetID),t.push(this.PostCCID),t.push(this.JVXML),t.push(this.Post),t.push(this.DeprTypeID),t.push(this.DocXML),t.push(this.DocSave),t.push(this.DepreciationXML),t.push(this.RecordType),t.push(i.a.SessionManager.CompanyGUID),t.push(this.GUID),t.push(i.a.SessionManager.UserName),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.LanguageID),i.a.accounting.GetPostJvVoucher(t)}SetAssetDispose(t){this.GUID=a.e.NewGuid();let e=[];return e.push(this.PostAssetID),e.push(t.ToString("dd/MMM/yyyy")),e.push(this.PostCCID),e.push(this.JVXML),e.push(this.Post),e.push(this.DeprTypeID),e.push(this.DocXML),e.push(this.DocSave),e.push(this.DepreciationXML),e.push(this.RecordType),e.push(i.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.SetAssetDispose(e)}SaveDeprBook(t,e,s){0==this.DeprBookID&&(this.GUID=a.e.NewGuid());let h=[];return h.push(this.DeprBookID),h.push(this.DeprBookCode),h.push(this.DeprBookName),h.push(this.DeprBookMethod),h.push(this.DeprBookMethodBasedOn),h.push(this.DeprBookMethodBasedOnValue),h.push(this.StatusID),h.push(this.AveragingMethodID),h.push(t),h.push(e),h.push(s),h.push(i.a.SessionManager.CompanyGUID),h.push(this.GUID),h.push(""),h.push(i.a.SessionManager.UserName),h.push(i.a.SessionManager.UserID),h.push(i.a.SessionManager.LanguageID),i.a.accounting.SetDeprBook(h)}SaveFAPostingGroup(){0==this.PostingGroupID&&(this.GUID=a.e.NewGuid());let t=[];return t.push(this.PostingGroupID),t.push(this.PostGroupCode),t.push(this.PostGroupName),t.push(this.AcqnCostACCID),t.push(this.AccumDeprACCID),t.push(this.AcqnCostDispACCID),t.push(this.AccumDeprDispACCID),t.push(this.GainsDispACCID),t.push(this.LossDispACCID),t.push(this.MaintExpenseACCID),t.push(this.DeprExpenseACCID),t.push(this.StatusID),t.push(0),t.push(this.IsGroup),t.push(i.a.SessionManager.CompanyGUID),t.push(this.GUID),t.push(i.a.SessionManager.UserName),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.LanguageID),i.a.accounting.SetPostingGroup(t)}static GetAssetManagementDetails(t){let e=[];return e.push(t),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.GetAssetManagementDetails(e)}static GetAssetDeprSchDetails(t){let e=[];return e.push(t),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.GetAssetDeprSchDetails(e)}SetAssetManagementDetails(){let t=[];return t.push(this.AMAssetID),t.push(this.AMCode),t.push(this.AMName),t.push(this.AMStatusID),t.push(this.AMPurchaseValue),t.push(this.AMParentAssetID),t.push(this.AMGroup),t.push(this.CodePrefix),t.push(this.CodeNumber),t.push(this.Sno),t.push(this.DetailsXML),t.push(this.ChangeValueXML),t.push(this.CustomFieldsQuery),t.push(this.CustomCostCenterFieldsQuery),t.push(this.DepreciationXML),t.push(this.HistoryXML),t.push(this.NotesXML),t.push(this.AttachmetsXML),t.push(i.a.SessionManager.CompanyGUID),t.push(this.AMGUID),t.push(i.a.SessionManager.UserName),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.LanguageID),i.a.accounting.SetAssetManagementDetails(t).toPromise()}static DeleteAsset(t){let e=[];return e.push(t),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.RoleID),i.a.accounting.DeleteAsset(e)}static DeleteAssetDeprSchedule(t){let e=[];return e.push(t),e.push(i.a.SessionManager.RoleID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.DeleteAssetDeprSchedule(e)}static DeleteAssetRefDoc(t,e){let s=[];return s.push(t),s.push(e),s.push(i.a.SessionManager.UserID),i.a.accounting.DeleteAssetRefDoc(s)}PostDeprJV(){this.GUID=a.e.NewGuid();let t=[];return t.push(this.PostCCID),t.push(this.JVXML),t.push(this.Post),t.push(i.a.SessionManager.CompanyGUID),t.push(this.GUID),t.push(i.a.SessionManager.UserName),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.LanguageID),t.push(i.a.SessionManager.RoleID),i.a.accounting.PostDeprJV(t)}PostDeprJVSummary(t,e,s,h,n){this.GUID=a.e.NewGuid();let o=[];return o.push(t),o.push(e),o.push(s),o.push(h),o.push(n),o.push(i.a.SessionManager.CompanyGUID),o.push(i.a.SessionManager.UserName),o.push(i.a.SessionManager.UserID),o.push(i.a.SessionManager.LanguageID),i.a.accounting.SetDeprPostingJVSummary(o).toPromise()}static SetsPostDeprReverseJV(t,e,s){let a=[];return a.push(t),a.push(e),a.push(s),a.push(i.a.SessionManager.CompanyGUID),a.push(i.a.SessionManager.UserName),a.push(i.a.SessionManager.UserID),a.push(i.a.SessionManager.LanguageID),i.a.accounting.SetsPostDeprReverseJV(a)}ChangeValue(t,e){this.GUID=a.e.NewGuid();let s=[];return s.push(this.PostAssetID),s.push(t),s.push(this.ChangeVal),s.push(this.AssetNetValueChange),s.push(e.ToString("dd/MMM/yyyy")),s.push(this.Description),s.push(this.DepreciationXML),s.push(this.ChangeValueXML),s.push(this.HistoryXML),s.push(this.LocationID),s.push(this.IsIncreaseAssetValue),s.push(this.JVXML),s.push(this.ChangeValueTypeID),s.push(i.a.SessionManager.CompanyGUID),s.push(this.GUID),s.push(i.a.SessionManager.UserName),s.push(i.a.SessionManager.UserID),s.push(i.a.SessionManager.LanguageID),i.a.accounting.SetAssetChangeValue(s)}DisposeReverse(t){let e=[];return e.push(t),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.DisposeReverse(e)}}},wJuo:function(t,e,s){"use strict";s.d(e,"a",(function(){return l}));var i=s("Do2H"),a=s("Lp6j"),h=s("eQJW"),n=s("4HhE"),o=s("OvA8"),r=s("xnJf");class l{constructor(){this.parent=null,this.SubmitClick=new n.b,this._AttachmentVisibility=!1,this.ClassName="PopupAttachmentsViewModel"}get ProductPhoto(){return this._ProductPhoto}set ProductPhoto(t){t!=this._ProductPhoto&&(this._ProductPhoto=t)}get AttachmentVisibility(){return this._AttachmentVisibility}set AttachmentVisibility(t){t!=this._AttachmentVisibility&&(this._AttachmentVisibility=t)}get Attachment(){return this._Attachment}set Attachment(t){t!=this._Attachment&&(this._Attachment=t)}get ViewAttachments(){return this._ViewAttachments}set ViewAttachments(t){t!=this._ViewAttachments&&(this._ViewAttachments=t)}OnShowAttachment(){Logger.InfoLog("AddProductViewModel::Entering OnShowAttachment"),Logger.InfoLog("AddProductViewModel::Exiting OnShowAttachment")}OnAddAttachment(){Logger.InfoLog("AddProductViewModel::Entering AddAttachment"),this.Attachment=new r.AddAttachmentViewModel,this.Attachment.AddAttachmentViewModel_2(this),Logger.InfoLog("AddProductViewModel::Entering AddAttachment")}PopupAttachmentsViewModel_1(t,e,s){var i,n,l;this.parent=s,this.AttachmentVisibility=!0,this.OnAddAttachment(),this.CostCenterID=t,this.NID=e,this._ViewAttachments=new o.ViewAttachmentViewModel(this),this.SubmitClick.Subscribe(this,"ListAttachments");let u=0,p="",c="";if("AddProductScreenViewModel"==(null===(i=this.parent)||void 0===i?void 0:i.ClassName)?(u=s.FileID,p=s.ProductPhoto,c=s.FileDescription):"AddEditAccountViewModel"==(null===(n=this.parent)||void 0===n?void 0:n.ClassName)||"AddUsersViewModel"==(null===(l=this.parent)||void 0===l?void 0:l.ClassName)?(u=s.FileID,p=s.AccountPhoto):(u=this.parent.FileID,p=this.parent.AccountPhoto,c=this.parent.FileDescription),null!=s){if(!a.e.IsEmpty(p)){let t=new r.AddAttachmentViewModel;if(t.AddAttachmentViewModel_2(this),t.AttachmentID=u,u>0){let e=null;"AddProductScreenViewModel"==this.parent.ClassName||"AddEditAccountViewModel"==this.parent.ClassName?e=s.ds.Tables[4].filter(t=>t.FileID==u):"AddUsersViewModel"==this.parent.ClassName||"AddCostCenterViewModel"==this.parent.ClassName?e=this.parent.ds.Tables[3].filter(t=>t.FileID==u):"AddEditEmpMasterViewModel"==this.parent.ClassName?e=this.parent.dsEdit.Tables[3].filter(t=>t.FileID==u):"AddEditPropertyViewModel"==s.ClassName?e=s.ds.Tables[18].filter(t=>t.FileID==u):"AddEditUnitsViewModel"==s.ClassName?e=s.ds.Tables[6].filter(t=>t.FileID==u):"AddEditTenantViewModel"==s.ClassName&&(e=s.Dset.Tables[4].filter(t=>t.FileID==u)),e.length>0&&(t.ActualFileName=e[0].ActualFileName.toString(),t.FileExtension=e[0].FileExtension.toString(),t.FileDescription=e[0].FileDescription.toString(),t.FilePath="",t.Guid=e[0].GUID.toString(),t.RelativeFileName=e[0].RelativeFileName.toString(),t.MainFilePath=e[0].FilePath.toString(),t.IsProductImage=!0,t.IsDefaultImage=!0,t.IsDefaultImageVisible=!0,t.CancelVisible=!1,t.Guid=e[0].GUID.toString(),a.e.hasprop(e[0],"HasThumb")&&(t.HasThumb=Object(h.j)(e[0].HasThumb)))}else{t.FilePath=p,t.MainFilePath=p,t.RelativeFileName=p,t.ActualFileName=t.FilePath.substr(t.FilePath.lastIndexOf("\\")+1);let e=t.FilePath.split("."),s="";e.length>1&&(s=e[e.length-1]),t.FileExtension=s,t.FileDescription=c,t.IsProductImage=!0,t.IsDefaultImage=!0,t.IsDefaultImageVisible=!0,t.CancelVisible=!1,t.Guid=this.parent.guid}this.ViewAttachments.AttachmentsList.push(t)}let t=[];(a.e.IsType(s,"IAttachment")||a.e.hasprop(s,"ViewAttachments"))&&(t=this.parent.ViewAttachments.AttachmentsList),t.forEach(t=>{if(t.IsProductImage){let e=new r.AddAttachmentViewModel;e.AddAttachmentViewModel_2(this),e.AttachmentID=t.AttachmentID,e.ActualFileName=t.ActualFileName,e.FileExtension=t.FileExtension,e.FileDescription=t.FileDescription,e.MainFilePath=t.MainFilePath,e.FilePath=t.FilePath,e.Guid=t.guid,e.RelativeFileName=t.RelativeFileName,e.IsProductImage=t.IsProductImage,e.IsDefaultImage=t.IsDefaultImage,e.IsDefaultImageVisible=!0,e.HasThumb=t.HasThumb,this.ViewAttachments.AttachmentsList.push(e)}})}}ListAttachments(t){if("Submit"==t.toString()){if("AddProductScreenViewModel"==this.parent.ClassName){let t=0;this.ViewAttachments.AttachmentsList.forEach(e=>{var s=this.parent.ViewAttachments.AttachmentsList.filter(t=>t.RelativeFileName==e.RelativeFileName);e.IsDefaultImage?(t++,null!=s&&s.length>0&&this.parent.ViewAttachments.AttachmentsList.Remove(s),(a.e.IsEmpty(e.FilePath)||this.parent.ProductPhoto==e.FilePath)&&this.parent.ProductPhoto.Contains(a.e.GetPath(e.guid+"."+e.FileExtension))||(this.parent.FileID=e.AttachmentID,this.parent.ProductPhoto=a.e.IsEmpty(e.guid)?e.FilePath:a.e.GetPath(e.guid+"."+e.FileExtension),this.parent.ActualFileName=e.ActualFileName,this.parent.ThumbnailPhoto=e.ThumbnailPhoto,this.parent.guid=e.guid,this.parent.Guid=e.guid,this.parent.FileExtension=e.FileExtension,this.parent.IsPhotoChanged=!0,this.parent.PhotoTextVisibility=!1,this.parent.DisplayMessage="",this.parent.MessageVisibility=!1,this.parent.FileDescription=e.FileDescription),e.IsModified=!0):null==s||0==s.length?(e.AttachmentID>0?(e.IsModified=!0,null!=(s=this.parent.ViewAttachments.AttachmentsList.filter(t=>t.AttachmentID==e.AttachmentID))&&this.parent.ViewAttachments.AttachmentsList.Remove(s)):(e.IsModified=!1,e._Flg=!0),this.parent.ViewAttachments.AttachmentsList.push(e)):(s.FileDescription=e.FileDescription,s.IsModified=!0)}),0==t&&(this.parent.ProductPhoto="",this.parent.ActualFileName="",this.parent.ThumbnailPhoto="",this.parent.IsPhotoChanged=!1,this.parent.IsPhotoDelete=!1,this.parent.DialogResult=!1,this.parent.PhotoTextVisibility=!0,this.parent.DisplayMessage="",this.parent.FileDescription=""),this.ViewAttachments.DeletedAttachments.forEach(t=>{this.parent.ViewAttachments.DeletedAttachments.push(t);let e=this.parent.ViewAttachments.AttachmentsList.find(e=>e.AttachmentID==t.AttachmentID);null!=e&&this.parent.ViewAttachments.AttachmentsList.Remove(e)})}else if("AddEditAccountViewModel"==this.parent.ClassName){let t=0;this.ViewAttachments.AttachmentsList.forEach(e=>{var s=this.parent.ViewAttachments.AttachmentsList.filter(t=>t.RelativeFileName==e.RelativeFileName);e.IsDefaultImage?(t++,null!=s&&s.length>0&&this.parent.ViewAttachments.AttachmentsList.Remove(s),(a.e.IsEmpty(e.FilePath)||this.parent.AccountPhoto==e.FilePath)&&this.parent.AccountPhoto.Contains(a.e.GetPath(e.guid+"."+e.FileExtension))||(this.parent.FileID=e.AttachmentID,this.parent.AccountPhoto=a.e.IsEmpty(e.guid)?e.FilePath:a.e.GetPath(e.guid+"."+e.FileExtension),this.parent.ActualFileName=e.ActualFileName,this.parent.guid=e.guid,this.parent.Guid=e.guid,this.parent.FileExtension=e.FileExtension,this.parent.IsPhotoChanged=!0,this.parent.PhotoTextVisibility=!1,this.parent.DisplayMessage="",this.parent.MessageVisibility=!1),e.IsModified=!0):null==s||0==s.length?(e.AttachmentID>0?(e.IsModified=!0,null!=(s=this.parent.ViewAttachments.AttachmentsList.filter(t=>t.AttachmentID==e.AttachmentID))&&this.parent.ViewAttachments.AttachmentsList.Remove(s)):(e.IsModified=!1,e._Flg=!0),this.parent.ViewAttachments.AttachmentsList.push(e)):(s.FileDescription=e.FileDescription,s.IsModified=!0)}),0==t&&(this.parent.AccountPhoto="",this.parent.ActualFileName="",this.parent.IsPhotoChanged=!1,this.parent.IsPhotoDelete=!1,this.parent.PhotoTextVisibility=!0,this.parent.DisplayMessage=""),this.ViewAttachments.DeletedAttachments.forEach(t=>{this.parent.ViewAttachments.DeletedAttachments.push(t);let e=this.parent.ViewAttachments.AttachmentsList.filter(e=>e.AttachmentID==t.AttachmentID);null!=e&&this.parent.ViewAttachments.AttachmentsList.Remove(e)})}else if("AddUsersViewModel"==this.parent.ClassName){let t=0;this.ViewAttachments.AttachmentsList.forEach(e=>{var s=this.parent.ViewAttachments.AttachmentsList.filter(t=>t.RelativeFileName==e.RelativeFileName);e.IsDefaultImage?(t++,null!=s&&s.length>0&&this.parent.ViewAttachments.AttachmentsList.Remove(s),(a.e.IsEmpty(e.FilePath)||this.parent.AccountPhoto==e.FilePath)&&this.parent.AccountPhoto.Contains(a.e.GetPath(e.guid+"."+e.FileExtension))||(this.parent.FileID=e.AttachmentID,this.parent.AccountPhoto=a.e.IsEmpty(e.guid)?e.FilePath:a.e.GetPath(e.guid+"."+e.FileExtension),this.parent.ActualFileName=e.ActualFileName,this.parent.IsPhotoChanged=!0,this.parent.PhotoTextVisibility=!1,this.parent.DisplayMessage="",this.parent.MessageVisibility=!1),e.IsModified=!0):null==s||0==s.length?(e.AttachmentID>0?(e.IsModified=!0,null!=(s=this.parent.ViewAttachments.AttachmentsList.filter(t=>t.AttachmentID==e.AttachmentID))&&this.parent.ViewAttachments.AttachmentsList.Remove(s)):(e.IsModified=!1,e._Flg=!0),this.parent.ViewAttachments.AttachmentsList.push(e)):(s.FileDescription=e.FileDescription,s.IsModified=!0)}),0==t&&(this.parent.AccountPhoto="",this.parent.ActualFileName="",this.parent.IsPhotoChanged=!1,this.parent.IsPhotoDelete=!1,this.parent.DialogResult=!1,this.parent.PhotoTextVisibility=!0,this.parent.DisplayMessage=""),this.ViewAttachments.DeletedAttachments.forEach(t=>{this.parent.ViewAttachments.DeletedAttachments.push(t);let e=this.parent.ViewAttachments.AttachmentsList.find(e=>e.AttachmentID==t.AttachmentID);e&&this.parent.ViewAttachments.AttachmentsList.Remove(e)})}else if("AddCostCenterViewModel"==this.parent.ClassName){let t=0;this.ViewAttachments.AttachmentsList.forEach(e=>{var s=this.parent.ViewAttachments.AttachmentsList.filter(t=>t.RelativeFileName==e.RelativeFileName);e.IsDefaultImage?(t++,null!=s&&s.length>0&&this.parent.ViewAttachments.AttachmentsList.Remove(s),(a.e.IsEmpty(e.FilePath)||this.parent.AccountPhoto==e.FilePath)&&this.parent.AccountPhoto.Contains(a.e.GetPath(e.guid))||(this.parent.FileID=e.AttachmentID,this.parent.AccountPhoto=a.e.IsEmpty(e.guid)?e.FilePath:a.e.GetPath(e.guid),this.parent.ThumbnailPhoto=e.ThumbnailPhoto,this.parent.ActualFileName=e.ActualFileName,this.parent.guid=e.guid,this.parent.Guid=e.guid,this.parent.FileExtension=e.FileExtension,this.parent.IsPhotoChanged=!0,this.parent.PhotoTextVisibility=!1,this.parent.DisplayMessage="",this.parent.MessageVisibility=!1),e.IsModified=!0):null==s||0==s.length?(e.AttachmentID>0?(e.IsModified=!0,null!=(s=this.parent.ViewAttachments.AttachmentsList.filter(t=>t.AttachmentID==e.AttachmentID))&&this.parent.ViewAttachments.AttachmentsList.Remove(s)):(e.IsModified=!1,e._Flg=!0),this.parent.ViewAttachments.AttachmentsList.push(e)):(s.FileDescription=e.FileDescription,s.IsModified=!0)}),0==t&&(this.parent.AccountPhoto="",this.parent.ThumbnailPhoto="",this.parent.ActualFileName="",this.parent.IsPhotoChanged=!1,this.parent.IsPhotoDelete=!1,this.parent.PhotoTextVisibility=!0,this.parent.DisplayMessage=""),this.ViewAttachments.DeletedAttachments.forEach(t=>{this.parent.ViewAttachments.DeletedAttachments.push(t);let e=this.parent.ViewAttachments.AttachmentsList.find(e=>e.AttachmentID==t.AttachmentID);e&&this.parent.ViewAttachments.AttachmentsList.Remove(e)})}else if("AddEditEmpMasterViewModel"==this.parent.ClassName||"AddEditPropertyViewModel"==this.parent.ClassName||"AddEditUnitsViewModel"==this.parent.ClassName||"AddEditTenantViewModel"==this.parent.ClassName){let t=0;this.ViewAttachments.AttachmentsList.forEach(e=>{var s=this.parent.ViewAttachments.AttachmentsList.filter(t=>t.RelativeFileName==e.RelativeFileName);e.IsDefaultImage?(t++,null!=s&&this.parent.ViewAttachments.AttachmentsList.Remove(s),(a.e.IsEmpty(e.FilePath)||this.parent.AccountPhoto==e.FilePath)&&this.parent.AccountPhoto.Contains(a.e.GetPath(e.guid+"."+e.FileExtension))||(this.parent.FileID=e.AttachmentID,this.parent.AccountPhoto=a.e.IsEmpty(e.guid)?e.FilePath:a.e.GetPath(e.guid+"."+e.FileExtension),this.parent.ActualFileName=e.ActualFileName,this.parent.IsPhotoChanged=!0,this.parent.PhotoTextVisibility=!1,this.parent.EmpAttachmentguid=e.guid.toString(),this.parent.DisplayMessage="",this.parent.FileExtension=e.FileExtension,this.parent.MessageVisibility=!1,this.parent.FileDescription=e.FileDescription),e.IsModified=!0):null==s||0==s.length?(e.AttachmentID>0?(e.IsModified=!0,null!=(s=this.parent.ViewAttachments.AttachmentsList.filter(t=>t.AttachmentID==e.AttachmentID))&&this.parent.ViewAttachments.AttachmentsList.Remove(s)):(e.IsModified=!1,e._Flg=!0),this.parent.ViewAttachments.AttachmentsList.push(e)):(s.FileDescription=e.FileDescription,s.IsModified=!0)}),0==t&&(this.parent.AccountPhoto="",this.parent.ActualFileName="",this.parent.IsPhotoChanged=!1,this.parent.IsPhotoDelete=!1,this.parent.PhotoTextVisibility=!0,this.parent.DisplayMessage="",this.parent.FileDescription=""),this.ViewAttachments.DeletedAttachments.forEach(t=>{this.parent.ViewAttachments.DeletedAttachments.push(t);let e=this.parent.ViewAttachments.AttachmentsList.filter(e=>e.AttachmentID==t.AttachmentID);null!=e&&this.parent.ViewAttachments.AttachmentsList.Remove(e)})}i.a.page.HideDialog()}else i.a.page.HideDialog()}}}}]);