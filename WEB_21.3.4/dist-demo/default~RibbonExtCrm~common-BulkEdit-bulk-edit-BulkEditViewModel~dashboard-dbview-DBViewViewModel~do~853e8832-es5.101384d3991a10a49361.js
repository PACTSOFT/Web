function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var s=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,s)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{c6GQ:function(e,t,n){"use strict";n.r(t),n.d(t,"AddEditUnitsViewModel",(function(){return k}));var i=n("mrSG"),s=n("Do2H"),a=n("Lp6j"),o=n("eQJW"),l=n("n56n"),r=n("EQd/"),c=n("0/4Q"),u=n("Jnyl"),d=n("4HhE"),h=n("NkMH"),b=n("xnJf"),S=n("OvA8"),m=n("VxiT"),T=n("OljK"),g=n("JIg3"),D=n("jgdN"),p=n("tCvu"),f=n("3Pt+"),C=n("ScVY"),A=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this)).Module="RENT",i.ClassName="AddEditUnitRateViewModel",i.UnitRateID=0,i.AddressTypes=[],i.AddressTypeEnabled=!0,i.SelectedAddressType="",i.AnnualRent=new r.d(0),i.Amount=new r.d(0),i.Discount=new r.d(0),i.UnitRateDate=new g.a(0),i.RentAmount="",i.Address2="",i.Address3="",i.City="",i.State="",i.Country="",i.Pin="",i.Phone1="",i.Phone2="",i.Fax="",i.Email1="",i.Email2="",i.URL="",i.UnitRateVisibility=!1,i.IsModified=!1,i.FeatureID=0,i.FeaturePK=0,i.AddressType=1,i.form=new f.j({}),Logger.InfoLog("AddAddressViewModel::Entering AddAddressViewModel with Parent="+e),i.Parent=e,i.InitCombo(),i.Amount.Label=s.a.GetResource("BillWise_AmountPaid"),i.Discount.Label=s.a.GetResource("BillWise_Discount"),i.AnnualRent.Label=s.a.GetResource("Com_RenAnnualRent"),i.UnitRateDate.Label=s.a.GetResource("Com_WithEffectFrom"),i.Amount.LostFocusCommand.Subscribe(_assertThisInitialized(i),"OnSerialNo_LostFoucs"),i.Discount.LostFocusCommand.Subscribe(_assertThisInitialized(i),"OnSerialNo_LostFoucs"),i.AmountTypes.SelectionChangedCommand.Subscribe(_assertThisInitialized(i),"OnSerialNo_LostFoucs"),i.DiscountTypes.SelectionChangedCommand.Subscribe(_assertThisInitialized(i),"OnSerialNo_LostFoucs"),Logger.InfoLog("AddAddressViewModel::Exiting AddAddressViewModel"),i}return _createClass(n,[{key:"AddEditUnitRateViewModel_3",value:function(e,t,n){this.FeatureID=e,this.FeaturePK=t,this.AddressType=n,this.InitCombo(),this.SelectedAddressType=n.toString(),this.AddressTypeEnabled=!1}},{key:"InitCombo",value:function(){this.DiscountTypes=new c.e(0),this.AmountTypes=new c.e(0),this.AmountTypes.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Annual"),"1")),this.AmountTypes.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Monthly"),"2")),this.AmountTypes.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Sq Ft"),"3")),this.AmountTypes.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Daily"),"4")),this.AmountTypes.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Quarterly"),"5")),this.AmountTypes.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Halfyearly"),"6")),this.DiscountTypes.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Value"),"1")),this.DiscountTypes.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Percentage"),"2")),this.AmountTypes.SelectedValue="1",this.DiscountTypes.SelectedValue="1",this.SelectedAddressType="1"}},{key:"OnSerialNo_LostFoucs",value:function(e){Logger.InfoLog("AddEditUnitsViewModel:: OnDiscount_LostFoucs Begin"),this.CalculateAmount(),Logger.InfoLog("AddEditUnitsViewModel:: OnDiscount_LostFoucs End")}},{key:"CalculateAmount",value:function(){Logger.InfoLog("AddEditUnitsViewModel:: CalculateAmount Begin");try{var e="";if(""==this.Discount.Text&&(this.Discount.Text="0"),a.e.ValidateDouble(this.Discount.Text)&&a.e.ValidateDouble(this.Amount.Text)){var t=parseFloat(this.Amount.Text),n=parseFloat(this.Discount.Text);"1"==this.AmountTypes.SelectedValue?this.AnnualRent.Text="2"==this.DiscountTypes.SelectedValue?(t-t*n/100).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()):(t-n).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()):"2"==this.AmountTypes.SelectedValue?(e="2"==this.DiscountTypes.SelectedValue?(t-t*n/100).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()):(t-n).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()),this.AnnualRent.Text=(12*parseFloat(e)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString())):"4"==this.AmountTypes.SelectedValue?(e="2"==this.DiscountTypes.SelectedValue?(30*(t-t*n/100)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()):(30*(t-n)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()),this.AnnualRent.Text=(365*parseFloat(e)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString())):"5"==this.AmountTypes.SelectedValue?(e="2"==this.DiscountTypes.SelectedValue?((t-t*n/100)/3).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()):((t-n)/3).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()),this.AnnualRent.Text=(12*parseFloat(e)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString())):"6"==this.AmountTypes.SelectedValue&&(e="2"==this.DiscountTypes.SelectedValue?((t-t*n/100)/6).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()):((t-n)/6).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()),this.AnnualRent.Text=(12*parseFloat(e)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()))}}catch(i){Logger.ErrorLog("AddEditUnitsRatesViewModel::CalculateAmount"+i.stack)}Logger.InfoLog("AddEditUnitsViewModel:: CalculateAmount End")}},{key:"OnSaveUnitRate",value:function(e){if(null!=e&&"Cancel"==e.toString())this.Parent.UnitRateVisibility=!1,s.a.page.HideDialog();else{if(Logger.InfoLog("OnSaveUnitRate::Entering OnSaveUnitRate"),this.UnitRateID>0&&(this.IsModified=!0),""==this.Amount.Text.Trim())return void alert(s.a.GetResource("Ren_AmtMsg"));if(this.UnitRateVisibility=!1,!this.Parent.ViewUnitRate.UnitRateList.Contains(this)){if(this.Amount.Text.Trim().length>0)for(var t=0;t<this.Parent.ViewUnitRate.UnitRateList.length;t++)if(this.Amount==this.Parent.ViewUnitRate.UnitRateList[t].Amount)return void alert(s.a.GetResource("Ren_AmtMsgExists"));this.Parent.ViewUnitRate.UnitRateList.push(this);var n=this.Parent.ViewUnitRate.UnitRateGridObj.NewRow();n.Amount=r.d.GetValidXml(this.Amount.Text),n.Discount=r.d.GetValidXml(this.Discount.Text),n.AnnualRent=parseFloat(r.d.GetValidXml(this.AnnualRent.Text)),n.UnitRateDate=this.UnitRateDate.Date,this.Parent.ViewUnitRate.UnitRateGridObj.addRow(n)}this.Parent.OnAddUnitRate(),Logger.InfoLog("AddContactViewModel::Exiting OnSaveUnitRate")}}},{key:"OnSaveUnitRateByDialog",value:function(e){var t=this;if(this.DisplayMessage="",null!=e&&"Cancel"==e.toString())s.a.page.HideDialog();else{if(Logger.InfoLog("AddContactViewModel::Entering OnSaveUnitRateByDialog"),this.UnitRateID>0&&(this.IsModified=!0),""==this.Amount.Text)return;var n="";n+='<AddressXML><Row Action="NEW"',n+=' AddressID="0"',n+=' Amount="'+r.d.GetValidXml(this.Amount.Text)+'"',n+=' Discount="'+r.d.GetValidXml(this.Discount.Text)+'"',n+=' UnitRateDate="'+this.UnitRateDate.Date+'"',n+="/></AddressXML>";var i="",a=0,o={};o.AccountID=this.FeatureID,o.WID=this.FeaturePK,o.CCMapXML=n.toString(),s.a.rental.SaveUnitRate(o,"SaveUnitRate").subscribe((function(e){i=e.Message,(a=e.RetValue)>0||a<-1e4?(t.UnitRateID=a,s.a.page.HideDialog()):t.DisplayMessage=i}),(function(e){console.log("Save Add Edit Unit Rate : "+JSON.stringify(e))})),Logger.InfoLog("AddContactViewModel::Exiting OnSaveUnitRateByDialog")}}},{key:"SelectedAddressTypeName",get:function(){var e=this;return""!=this.SelectedAddressType&&null!=this.AddressTypes.find((function(t){return t.Value==e.SelectedAddressType}))?this.AddressTypes.find((function(t){return t.Value==e.SelectedAddressType})).Name:""}}]),n}(C.b),I=n("ockk"),y=n("8B8H"),R=n("pV49"),V=function(){function e(t){_classCallCheck(this,e),this.Module="RENT",this.ClassName="ViewUnitRateViewModel",this.Visible=!0,this.contextVisible=!0,this.UnitRateList=[],this.DeletedContacts=[],this.ButtonAdd=new h.a,this.ButtonUpdate=new h.a,this.ButtonDelete=new h.a,this.ColumnSpan="4",this.UnitRateGridObj=new y.a,s.a.SessionManager.HideUnathorizedAccess?this.ButtonAdd.Visible=s.a.SessionManager.IsActionAssigned(t.CostCenterID,"UnitRate_Create"):this.ButtonAdd.Enable=s.a.SessionManager.IsActionAssigned(t.CostCenterID,"UnitRate_Create"),s.a.SessionManager.HideUnathorizedAccess?this.ButtonUpdate.Visible=s.a.SessionManager.IsActionAssigned(t.CostCenterID,"UnitRate_Update"):this.ButtonUpdate.Enable=s.a.SessionManager.IsActionAssigned(t.CostCenterID,"UnitRate_Update"),s.a.SessionManager.HideUnathorizedAccess?this.ButtonDelete.Visible=s.a.SessionManager.IsActionAssigned(t.CostCenterID,"UnitRate_Delete"):this.ButtonDelete.Enable=s.a.SessionManager.IsActionAssigned(t.CostCenterID,"UnitRate_Delete"),this.ButtonUpdate.Visible||this.ButtonDelete.Visible||(this.contextVisible=!1),this.Parent=t,this.InitGrid()}return _createClass(e,[{key:"OnCmnItem_Click",value:function(e){switch(e){case"EDIT":null!=this.SelectedContact&&(this.Parent.UnitRate=this.SelectedContact,this.Parent.UnitRateVisibility=!0);break;case"DELETE":null!=this.SelectedContact&&(this.SelectedContact.UnitRateID>0&&this.DeletedContacts.push(this.SelectedContact),this.UnitRateList.Remove(this.SelectedContact))}}},{key:"onCanCmnItem_Click",value:function(e){return!0}},{key:"GetXML",value:function(){Logger.InfoLog("ViewContactViewModel::Entering GetXML");for(var e="",t=0;t<this.UnitRateList.length;t++){if(0==this.UnitRateList[t].UnitRateID)e+='<Row Action="NEW"';else{if(!this.UnitRateList[t].IsModified)continue;e+='<Row Action="MODIFY"'}e+=' UnitRateID="'+this.UnitRateList[t].UnitRateID+'"',e+=' Amount="'+r.d.GetValidXml(this.UnitRateList[t].Amount.Text)+'"',e+=' Discount="'+r.d.GetValidXml(this.UnitRateList[t].Discount.Text)+'"',e+=' AnnualRent="'+parseFloat(r.d.GetValidXml(this.UnitRateList[t].AnnualRent.Text))+'"',e+=' WithEffFrom="'+this.UnitRateList[t].UnitRateDate.Date.ToString("dd/MMM/yyyy")+'"',e+="/>"}for(var n=0;n<this.DeletedContacts.length;n++)e+='<Row Action="DELETE"',e+=' UnitRateID="'+this.DeletedContacts[n].UnitRateID+'"/>';return e.length>0&&(e="<UnitRateXML>"+e+"</UnitRateXML>"),Logger.InfoLog("ViewContactViewModel::Exiting GetXML which returns XML="+e),e.toString()}},{key:"OnShowNewUnitRate",value:function(e){try{this.ButtonAdd.Enable&&this.ButtonAdd.Visible&&(this.Parent.UnitRate=new A(this.Parent),this.Parent.UnitRateVisibility=!0,this.Parent.OnShowUnitRate(),s.a.page.ShowDialog(this.Parent.UnitRate,R.a,{Title:s.a.GetResource("AddUnitRate")}))}catch(t){Logger.ErrorLog("ViewContactViewModel:: OnShowNewContact"+t.stack)}}},{key:"LoadUnitRates",value:function(e){var t;this.UnitRateList.Clear(),this.UnitRateGridObj.Clear();for(var n=0;n<e.length;n++){(t=new A(this.Parent)).UnitRateID=parseInt(e[n].UnitRateID),t.Amount.Text=e[n].Amount.toString(),t.Discount.Text=e[n].Discount.toString(),t.AnnualRent.Text=e[n].AnnualRent.toString(),t.UnitRateDate.Date=new Date(e[n].WithEffectFrom),t.UnitRateDate.Text=new Date(e[n].WithEffectFrom).ToString(s.a.SessionManager.Preferences["Date Format"]),this.UnitRateList.push(t);var i=this.UnitRateGridObj.NewRow();i.Amount=t.Amount.Text,i.Discount=t.Discount.Text,i.AnnualRent=t.AnnualRent.Text,i.UnitRateDate=t.UnitRateDate.Text,this.UnitRateGridObj.addRow(i)}}},{key:"InitGrid",value:function(){this.UnitRateGridObj=new y.a;var e=new I.a;(e=new I.a).DisplayMember="Amount",e.Header="Amount",e.DataType="TextBlock",e.Width=150,e.ReadOnly=!0,e.IsVisible=!0,this.ColumnSource.push(e),(e=new I.a).DisplayMember="Discount",e.Header="Discount",e.DataType="TextBlock",e.Width=150,e.ReadOnly=!0,e.IsVisible=!0,this.ColumnSource.push(e),(e=new I.a).DisplayMember="AnnualRent",e.Header="Annual Rent",e.DataType="TextBlock",e.Width=150,e.ReadOnly=!0,e.IsVisible=!0,this.ColumnSource.push(e),(e=new I.a).DisplayMember="UnitRateDate",e.Header="With Effect from",e.DataType="TextBlock",e.Width=150,e.ReadOnly=!0,e.IsVisible=!0,this.ColumnSource.push(e)}},{key:"angularGrid",get:function(){return this.UnitRateGridObj.angularGrid}},{key:"UnitRateGrid",get:function(){return this.UnitRateGridObj.Table}},{key:"ColumnSource",get:function(){return this.UnitRateGridObj.Columns}},{key:"UnitRateColumns",get:function(){return this.UnitRateGridObj.TableColumns}}]),e}(),P=n("Q01V"),U=n("4k0m"),L=n("++IR"),v=n("wlFP"),x=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;_classCallCheck(this,n),(i=t.call(this)).Property=new l.b(0),i.Fields=[],i.Search=new d.b,i.lstCols=null,i.Search.Subscribe(_assertThisInitialized(i),"OnSearch");var a=0,o=0,r=null;i.Parent=e,s.a.SessionManager.PersonalSettings.ContainsKey("UntProCopyTabs")&&(r=s.a.SessionManager.PersonalSettings.UntProCopyTabs.split(",")),i.oPactCheck=new v.a(-1),i.oPactCheck.CheckedChangedCommand.Subscribe(_assertThisInitialized(i),"OnCheckedChangedCommand"),i.oPactCheck.Label="Unit Fields",i.oPactCheck.Row=a,i.oPactCheck.Column=o,i.oPactCheck.FeatureID=0,3==o?(a+=1,o=0):o+=1,(null==r||r.Contains("-1"))&&(i.oPactCheck.IsChecked=!0),i.Fields.push(i.oPactCheck);for(var c=[961,1013],u=0;u<i.Parent.ScreenObject.CustomTab.Pages.length;u++){var h=i.Parent.ScreenObject.CustomTab.Pages[u];c.Contains(h.DBColumnID)||h.Visible&&(i.oPactCheck=new v.a(h.DBColumnID),i.oPactCheck.CheckedChangedCommand.Subscribe(_assertThisInitialized(i),"OnCheckedChangedCommand"),i.oPactCheck.Label=h.Name,i.oPactCheck.Row=a,i.oPactCheck.Column=o,i.oPactCheck.FeatureID=h.QuickViewCCID,3==o?(a+=1,o=0):o+=1,(null==r||r.Contains(h.DBColumnID.toString()))&&(i.oPactCheck.IsChecked=!0),i.Fields.push(i.oPactCheck))}return i.Property.CCID=i.Parent.Property.CCID,i.Property.Label="Copy "+i.Parent.Property.Label,i.Property.TypeID=i.Parent.Property.TypeID,i.Property.SelectedValue=i.Parent.Property.SelectedValue,i.Property.IsReadOnly=!0,i}return _createClass(n,[{key:"CopyDataViewModel",value:function(){}},{key:"OnCheckedChangedCommand",value:function(e){for(var t="",n=0;n<this.Fields.length;n++){var i=this.Fields[n];i.IsChecked&&(t.length>0&&(t+=","),t+=i.DBColumnID.toString())}null!=this.Parent&&a.e.SetPersonalize("UntProCopyTabs",t)}},{key:"OnSearch",value:function(e){"OK"==e.toString()?(this.SelectProperty(),s.a.page.HideDialog()):"Cancel"==e.toString()&&s.a.page.HideDialog()}},{key:"SelectProperty",value:function(){var e=this,t=s.a.rental.GetProperty(this.Property.SelectedValue,0);this.Fields.forEach((function(n){if(-1==n.DBColumnID&&n.IsChecked)e.Parent.RentalIncomeAcc.SelectedValue=parseInt(t.Tables[2][0].RentalIncomeAccountID),e.Parent.LocationUnit instanceof l.b?e.Parent.LocationUnit.SelectedValue=parseInt(t.Tables[2][0].LocationID):e.Parent.LocationUnit instanceof l.a&&e.Parent.LocationUnit.SetValue(parseInt(t.Tables[2][0].LocationID)),e.Parent.Landlord instanceof l.b?e.Parent.Landlord.SelectedValue=parseInt(t.Tables[2][0].LandLordID):e.Parent.Landlord instanceof l.a&&e.Parent.Landlord.SetValue(parseInt(t.Tables[2][0].LandLordID));else if(909==n.DBColumnID&&n.IsChecked)e.Parent.PropertyDeposits.Load(t.Tables[8]);else if(1004==n.DBColumnID&&n.IsChecked)t.Tables.length>18&&t.Tables[18].length>0&&(t.Tables[18].Columns.FileID.Expression="0"),e.Parent.ViewAttachments.LoadAttachments(t.Tables[18]),e.Parent.ViewAttachments.LoadAttachmentsCopy();else if(n.IsChecked){var i=e.Parent.ScreenObject.CustomTab.Pages.find((function(e){return e.DBColumnID==n.DBColumnID}));null!=i&&null!=i&&(e.LoadFieldsData(i,t.Tables[13],t.Tables[15]),e.LoadStaticFieldsTabData(i,t.Tables[2]))}}))}},{key:"LoadFieldsData",value:function(e,t,n){for(var i,s=0;s<e.Fields.length;s++){var o=e.Fields[s];if(null==(i=o||null)||null==this.lstCols||this.lstCols.Contains(i.DBColumnID))if(null!=i&&null!=i.DBColumnName&&null!=t[0][i.DBColumnName]&&i.DBColumnName.toLowerCase().Contains("alpha")){if(o instanceof r.d)o.Text=t[0][i.DBColumnName].toString();else if(o instanceof c.e)o.SelectedValue=t[0][i.DBColumnName].toString();else if(o instanceof r.c)o.Text=t[0][i.DBColumnName].toString();else if(o instanceof g.c){var u=void 0;""!=t[0][i.DBColumnName].toString()&&a.e.isValidDate(new Date(t[0][i.DBColumnName].toString()))&&(u=new Date(t[0][i.DBColumnName].toString()),o.Date=u)}else if(o instanceof g.b){var d=void 0;""!=t[0][i.DBColumnName].toString()&&a.e.isValidDate(new Date(t[0][i.DBColumnName].toString()))&&(d=new Date(t[0][i.DBColumnName].toString()),o.Date=d)}else if(o instanceof g.a){var h=void 0;""!=t[0][i.DBColumnName].toString()&&a.e.isValidDate(new Date(t[0][i.DBColumnName].toString()))&&(h=new Date(t[0][i.DBColumnName].toString()),o.Date=h)}else if(o instanceof D.a)o.Text=t[0][i.DBColumnName].toString();else if(o instanceof l.b){var b=void 0;a.e.IntTryParse(t[0][i.DBColumnName].toString())&&(b=t[0][i.DBColumnName].toString(),o.SelectedValue=b)}}else o instanceof l.b&&null!=o.DBColumnName&&a.e.hasprop(n[0],o.DBColumnName.toLowerCase())&&!a.e.IsEmpty(n[0][o.DBColumnName])&&(o.SelectedValue=parseInt(n[0][o.DBColumnName].toString()))}}},{key:"LoadStaticFieldsTabData",value:function(e,t){for(var n,i=0;i<e.Fields.length;i++){var s=e.Fields[i];if((null==(n=s||null)||null==this.lstCols||this.lstCols.Contains(n.DBColumnID))&&null!=n&&null!=n.DBColumnName&&a.e.hasprop(t[0],n.DBColumnName.toLowerCase()))if(s instanceof r.d)s.Text=t[0][n.DBColumnName].toString();else if(s instanceof c.e)s.SelectedValue=t[0][n.DBColumnName]instanceof Boolean&&a.e.IntTryParse(s.Items[0].Value)?parseInt(t[0][n.DBColumnName]).toString():t[0][n.DBColumnName].toString();else if(s instanceof r.c)s.Text=t[0][n.DBColumnName].toString();else if(s instanceof l.b)null!=t[0][n.DBColumnName]&&(s.SelectedValue=parseInt(t[0][n.DBColumnName]));else if(s instanceof g.c){var o=void 0;""!=t[0][n.DBColumnName].toString()&&a.e.isValidDate(new Date(t[0][n.DBColumnName].toString()))&&(o=new Date(t[0][n.DBColumnName].toString()),s.Date=o)}else if(s instanceof g.b){var u=void 0;""!=t[0][n.DBColumnName].toString()&&a.e.isValidDate(new Date(t[0][n.DBColumnName].toString()))&&(u=new Date(t[0][n.DBColumnName].toString()),s.Date=u)}else if(s instanceof g.a){""!=t[0][n.DBColumnName].toString()&&a.e.isValidDate(new Date(t[0][n.DBColumnName].toString()))&&(s.Date=void 0)}else s instanceof D.a&&(s.Text=t[0][n.DBColumnName].toString())}}}]),n}(C.b),O=n("ls7+"),w=n("bgvB"),N=n("wJuo"),B=n("x68t"),M=n("Huqd"),F=n("bwbx"),E=n("c6C+"),j=n("RJs6"),k=function(e){_inherits(f,e);var t=_createSuper(f);function f(e,n,i,a){var d;if(_classCallCheck(this,f),(d=t.call(this)).CostCenterID=0,d.AttachmentVisibility=!1,d.Unitsmodel={},d.UnitID=0,d.parentid=0,d.selectedNode=0,d.group=!1,d._ReportInfoVisibility=!0,d.ReportsList=[],d.PenaltyAcc=new l.b,d.RentalIncomeAcc=new l.b,d.RentalReceivableAcc=new l.b,d.AdvanceRentAcc=new l.b,d.AdvReceivableCloseAcc=new l.b,d.BankAcc=new l.b,d.BankLoanAcc=new l.b,d.AdvanceReceivableAcc=new l.b,d.ProvisionAccountID=new l.b,d.RentAcc=new l.b,d.RentPayableAcc=new l.b,d.AdvanceRentPaid=new l.b,d.TenantID=new l.b,d.ScreenName="",d.Title="",d.DetailButtonVisibility=!0,d.RightRegionVisibility=!0,d.UnitCode=new r.a(25624),d.PostIncome=new c.e(54207),d.BasedOn=new c.e(54205),d.UnitName=new r.d(25625),d.TermsConditions=new r.c(26150),d.RentArea=new r.d(25627),d.BuildArea=new r.d(25628),d.NoOfBathrooms=new r.d(25631),d.NoOfParkings=new r.d(25632),d.ElectricityCode=new r.d(25633),d.AmountType=new c.e(0),d.DiscountType=new c.e(0),d.Amount=new u.a(25638),d.Discount=new u.a(25640),d.AnnualRent=new r.d(25641),d.MonthlyRent=new r.d(25642),d.RentSQFT=new r.d(25643),d.Tenant=new r.d(25897),d.StartDate=new r.d(25898),d.EndDate=new r.d(25899),d.Electricity=new r.d(25634),d.Floor=new l.b(25629),d.View=new l.b(25630),d.UnitType=new c.e(25772),d.Status=new c.e(25626),d.UnitStatus=new l.a(26442),d.TypeofUnit=new l.b(25635),d.Property=new l.b(25623),d.Group=new l.b(25721),d.IsPhotoDelete=!1,d.ActualFileName="",d.NoteVisibility=!1,d.RetValue=0,d.ScreenObject=new m.a,d.ds=null,d.DefaultPropertyID=0,d.PickPayables=!0,d.LocAccountant=!1,d.LocLandLord=!1,d.LocSalesman=!1,d.ErrorMessage="Missing Report Parameter ' ",d.UnitstatusHistory=null,d.CodePrefix="",d.CodeNumber=0,d.GroupSeqNoLength=0,d.IsLocationAv=!1,d.UnitRateVisibility=!1,d.ClassName="AddEditUnitsViewModel",Logger.InfoLog("AddEditUnitsViewModel:: AddEditUnitsViewModel Begin"),d.ButtonSave=new h.a,d.ButtonCustomize=new h.a,d.ButtonCopy=new h.a,0==a?s.a.SessionManager.HideUnathorizedAccess?d.ButtonSave.Visible=s.a.SessionManager.IsActionAssigned(93,"Create"):d.ButtonSave.Enable=s.a.SessionManager.IsActionAssigned(93,"Create"):s.a.SessionManager.HideUnathorizedAccess?d.ButtonSave.Visible=s.a.SessionManager.IsActionAssigned(93,"Update"):d.ButtonSave.Enable=s.a.SessionManager.IsActionAssigned(93,"Update"),s.a.SessionManager.HideUnathorizedAccess?d.ButtonCustomize.Visible=s.a.SessionManager.IsActionAssigned(93,"Customize"):d.ButtonCustomize.Enable=s.a.SessionManager.IsActionAssigned(93,"Customize"),s.a.SessionManager.HideUnathorizedAccess?d.ButtonCopy.Visible=s.a.SessionManager.IsActionAssigned(93,"Copy"):d.ButtonCopy.Enable=s.a.SessionManager.IsActionAssigned(93,"Copy"),d.ScreenObject=new m.a,d.UnitID=e,d.CostCenterID=93,d.Property.SelectionChangedCommand.Subscribe(_assertThisInitialized(d),"onListSelectedChanged"),d.UnitStatus.ClickCommand.Subscribe(_assertThisInitialized(d),"OnUnitstatusClick"),d.selectedNode=a,d.group=n,d.Amount.TextBox.Align="Right",d.Discount.TextBox.Align="Right",d.Amount.ComboBox=d.AmountType,d.Discount.ComboBox=d.DiscountType,d.ScreenObject.SkipFields=[26431,26430,53524,26429],d.ScreenObject.LoadScreen_2(_assertThisInitialized(d),93),d.LoadImageDimensions(),d.PhotoTextVisibility=!0,d.Salesman=d.GetControl("26431"),d.Landlord=d.GetControl("26430"),d.LocationUnit=d.GetControl("53524"),d.Accountant=d.GetControl("26429"),d.ScreenObject.Data.Tables.length>4){if(d.ScreenObject.Data.Tables[4].length>0){var b=d.ScreenObject.Data.Tables[4].filter((function(e){return"Salesman"==e.Name}));b.length>0&&parseInt(b[0].Value)>0&&(d.Salesman instanceof l.b||d.Salesman instanceof l.a)&&(d.Salesman.CCID=parseInt(b[0].Value)),(b=d.ScreenObject.Data.Tables[4].filter((function(e){return"Accountant"==e.Name}))).length>0&&parseInt(b[0].Value)>0&&(d.Accountant instanceof l.b||d.Accountant instanceof l.a)&&(d.Accountant.CCID=parseInt(b[0].Value)),(b=d.ScreenObject.Data.Tables[4].filter((function(e){return"Landlord"==e.Name}))).length>0&&parseInt(b[0].Value)>0&&(d.Landlord instanceof l.b||d.Landlord instanceof l.a)&&(d.Landlord.CCID=parseInt(b[0].Value)),(b=d.ScreenObject.Data.Tables[4].filter((function(e){return"LocAccountant"==e.Name}))).length>0&&(d.LocAccountant=Object(o.j)(b[0].Value)),(b=d.ScreenObject.Data.Tables[4].filter((function(e){return"LocLandLord"==e.Name}))).length>0&&(d.LocLandLord=Object(o.j)(b[0].Value)),(b=d.ScreenObject.Data.Tables[4].filter((function(e){return"LocSalesman"==e.Name}))).length>0&&(d.LocSalesman=Object(o.j)(b[0].Value)),(d.Accountant instanceof l.b||d.Accountant instanceof l.a)&&(d.Accountant.TypeID=1),(d.Landlord instanceof l.b||d.Landlord instanceof l.a)&&(d.Landlord.TypeID=1),(d.Salesman instanceof l.b||d.Salesman instanceof l.a)&&(d.Salesman.TypeID=1)}if(d.ScreenObject.Data.Tables[5].length>0){var T=d.ScreenObject.Data.Tables[5].filter((function(e){return"GetPayable"==e.Name}));T.length>0&&(d.PickPayables=Object(o.j)(T[0].Value))}}if(null!=d.ScreenObject.Data&&d.ScreenObject.Data.Tables.length>6&&d.ScreenObject.Data.Columns[6].Contains("IsParentCodeInherited")&&d.ScreenObject.Data.Tables[6].length>0&&d.ScreenObject.InitAutoCode(d.ScreenObject.Data.Tables[6],n),d.ViewAttachments=new S.ViewAttachmentViewModel(_assertThisInitialized(d),s.a.SessionManager,s.a.admin),d.ViewUnitRate=new V(_assertThisInitialized(d)),d.ViewNotes=new j.a(_assertThisInitialized(d),s.a.SessionManager,s.a.admin),d.LoadTabs(),d.RentArea.LostFocusCommand.Subscribe(_assertThisInitialized(d),"OnSerialNo_LostFoucs"),d.RentSQFT.LostFocusCommand.Subscribe(_assertThisInitialized(d),"OnSerialNo_LostFoucs"),d.Amount.TextBox.LostFocusCommand.Subscribe(_assertThisInitialized(d),"OnSerialNo_LostFoucs"),d.Amount.ComboBox.SelectionChangedCommand.Subscribe(_assertThisInitialized(d),"OnSerialNo_LostFoucs"),d.Discount.TextBox.LostFocusCommand.Subscribe(_assertThisInitialized(d),"OnSerialNo_LostFoucs"),d.Discount.ComboBox.SelectionChangedCommand.Subscribe(_assertThisInitialized(d),"OnSerialNo_LostFoucs"),d.PropertyDeposits=new p.a(_assertThisInitialized(d),0,93),null!=d.PropertyDeposits&&null!=d.PropertyDeposits.ds&&d.PropertyDeposits.ds.Tables.length>0&&d.PropertyDeposits.ds.Tables[1].length>0)for(var g=0;g<d.PropertyDeposits.ds.Tables[1].length;g++)d.UnitType.Items.push(c.d.ComboBoxItems_2(d.PropertyDeposits.ds.Tables[1][g].Type.toString(),d.PropertyDeposits.ds.Tables[1][g].NodeID.toString()));if(null!=d.ScreenObject.Data&&d.ScreenObject.Data.Tables.length>0&&d.ScreenObject.Data.Tables[0].length>0){var D=d.ScreenObject.Data.Tables[0].filter((function(e){return 54205==e.CostCenterColID}));if(D.length>0){for(var C=D[0].UserProbableValues.toString().Trim().split(";"),A=0;A<C.length;A++)d.BasedOn.Items.push(c.d.ComboBoxItems_2(C[A].replace("''","'"),C[A].replace("''","'")));d.BasedOn.SelectedValue=D[0].UserDefaultValue.toString()}}return d.PostIncome.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Com_Yes"),"1")),d.PostIncome.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Com_No"),"0")),d.PostIncome.SelectedValue="1",d.ScreenObject.StaticFields.sort((function(e,t){return e.Row>t.Row||e.Row==t.Row&&e.Column>t.Column?1:-1})),d.ScreenObject.HeaderFields.sort((function(e,t){return e.Row>t.Row||e.Row==t.Row&&e.Column>t.Column?1:-1})),d.OnLoad(),d.Property.CCID=92,d.Property.TypeID=2,d.TypeofUnit.CCID=44,d.TypeofUnit.TypeID=6,(d.LocationUnit instanceof l.b||d.LocationUnit instanceof l.a)&&(d.LocationUnit.CCID=50002),(d.LocationUnit instanceof l.b||d.LocationUnit instanceof l.a)&&(d.LocationUnit.TypeID=1),d.Group.CCID=93,d.Group.TypeID=1,d.Group.SelectionChangedCommand.Subscribe(_assertThisInitialized(d),"OnGroupSelectionChanged"),d.parentid=i,0==d.UnitID?(d.Title=s.a.GetResource("REN_UnitsAdd"),d.Unitsmodel.GUID="GUID",d.Group.SelectedValue=i,d.AutoGenerateCode(),d.LoadParentData()):(d.Title=s.a.GetResource("REN_UnitsEdit"),d.ScreenObject.NodeID=d.UnitID,d.ds=s.a.rental.GetUnitDetails(d.UnitID),d.LoadEditData(),d.ScreenObject.IsAutoCode&&(d.UnitCode.Enable=parseInt(d.ds.Tables[0][0].Depth)<=1&&!d.ScreenObject.IsRootAutoCode)),d.Unitsmodel.UnitID=d.UnitID,s.a.SessionManager.LocationID>0&&d.IsLocationAv&&(d.LocAccountant&&(d.Accountant instanceof l.b||d.Accountant instanceof l.a)&&(d.Accountant.CustomWhere="   CC.CCNID2 IN ("+s.a.SessionManager.LocationID+") "),d.LocSalesman&&(d.Salesman instanceof l.b?d.Salesman.CustomWhere="  CC.CCNID2 IN ("+s.a.SessionManager.LocationID+") ":d.Salesman instanceof l.a&&(d.Salesman.CustomWhere="   CC.CCNID2 IN ("+s.a.SessionManager.LocationID+") "))),d.RentSQFT.Enable=!1,d.ReportView(),d.Amount.ComboBox.Visible=!0,d.Discount.ComboBox.Visible=!0,Logger.InfoLog("AddEditUnitsViewModel:: AddEditUnitsViewModel End"),_possibleConstructorReturn(d)}return _createClass(f,[{key:"GetXML",value:function(){Logger.InfoLog("AddEditUnitsViewModel::Entering GetXML"),Logger.InfoLog("AddEditUnitsViewModel::Exiting GetXML")}},{key:"OnShowNote",value:function(){}},{key:"OnAddNote",value:function(){this.Note=new E.AddNoteViewModel,this.Note.AddNoteViewModel_2(this)}},{key:"OnShowAttachment",value:function(){Logger.InfoLog("AddEditAccountScreenViewModel::Entering OnShowAttachment"),Logger.InfoLog("AddEditAccountScreenViewModel::Exiting OnShowAttachment")}},{key:"OnAddAttachment",value:function(){Logger.InfoLog("AddEditAccountScreenViewModel::Entering AddAttachment"),this.Attachment=new b.AddAttachmentViewModel,this.Attachment.AddAttachmentViewModel_2(this),Logger.InfoLog("AddEditAccountScreenViewModel::Exiting AddAttachment")}},{key:"AddEditUnitsViewModel_1",value:function(){}},{key:"ReportView",value:function(){var e=this;this.ReportDimension=new l.b(0),this.ReportDimension.CCID=this.CostCenterID,this.ReportDimension.TypeID=1,this.ReportDimension.SelectedValue=this.UnitID,this.ReportsList=[],this.ReportDimension.OnPactListBoxValueChanged.Subscribe(this,"OnReportsLinkClick");var t=[];null!=this.ScreenObject.Data&&this.ScreenObject.Data.Tables.length>7&&this.ScreenObject.Data.Tables[7].forEach((function(n){var i=new h.a;i.DBColumnID=parseInt(n.ReportID),i.Label=n.ReportName.toString(),e.ScreenObject.Data.Columns[7].Contains("Shortcut")&&(i.KeyTip=n.Shortcut.toString()),e.ScreenObject.Data.Columns[7].Contains("DisplayAsPopup")&&""!=n.DisplayAsPopup.toString()&&(i.Dependantinuse="1"==n.DisplayAsPopup.toString()),e.ScreenObject.Data.Columns[7].Contains("Width")&&""!=n.Width.toString()&&(i.Width=n.Width.toString()),e.ScreenObject.Data.Columns[7].Contains("Height")&&""!=n.Height.toString()&&(i.Length=n.Height.toString()),e.ScreenObject.Data.Columns[7].Contains("DocumentField")&&""!=n.DocumentField.toString()&&(i.Formula=n.DocumentField.toString()),e.ScreenObject.Data.Columns[7].Contains("mapxml")&&""!=n.mapxml.toString()&&(i.ToolTipDescription=n.mapxml.toString()),t.Contains(parseInt(n.ReportID))||(t.push(parseInt(n.ReportID)),e.ReportsList.push(i))}))}},{key:"OnReportsLinkClick",value:function(e){return Object(i.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var i,o,l,r,c,u,d,h,b;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(2),n.e(1),n.e(3),n.e(5),n.e(4),n.e(6),n.e(7),n.e(10),n.e(9),n.e(8),n.e(12),n.e(11),n.e(13),n.e(19),n.e(15),n.e(21),n.e(20),n.e(16),n.e(14),n.e(18),n.e(17),n.e(22),n.e(23),n.e(24),n.e(25),n.e(28),n.e(30),n.e(29),n.e(32),n.e(31),n.e(27),n.e(26),n.e(35),n.e(37),n.e(38),n.e(36),n.e(33),n.e(34),n.e(39),n.e(40),n.e(41),n.e(212)]).then(n.bind(null,"ThYU"));case 2:return i=t.sent,o=i.ReportViewModel,t.next=6,Promise.all([n.e(32),n.e(37)]).then(n.bind(null,"YU11"));case 6:l=t.sent,r=l.ReportViewComponent,u={strXML:""},d=new o,this.ReportDimension.SelectedValue=this.UnitID,this.DisplayMessage=this.GetReportFilterXML(e,u),c=u.strXML,0==this.DisplayMessage.length&&(null!=(h=this.ReportsList.find((function(t){return t.DBColumnID==parseInt(e)})))&&h.Dependantinuse?(d.ReportViewModel_Document(this.CostCenterID,c,parseInt(e),!0,null,null),!a.e.IsEmpty(h.Width)&&parseFloat(h.Width)>0&&(d.RptWidth=parseFloat(h.Width)),!a.e.IsEmpty(h.length)&&parseFloat(h.length)>0&&(d.RptHeight=parseFloat(h.length)),d.DocumentObject=this,s.a.page.HideDialog(),s.a.page.ShowDialog(d,r,{Title:"",HideClose:!0,ShowCenter:!0})):((b=new o).ReportViewModel_Document(this.CostCenterID,c,parseInt(e),!1,null,null),b.DocumentObject=this,s.a.page.HideDialog(),s.a.page.addNewTab({component:r,params:{obj:b}})));case 10:case"end":return t.stop()}}),t,this)})))}},{key:"GetReportFilterXML",value:function(e,t){var n=this,i="";t.strXML="";var s=this.ScreenObject.Data.Tables[7];s=s.filter((function(t){return t.ReportID==e}));var a,c=!1;s.forEach((function(e){Object(o.j)(e.GroupLevel)&&(c=!0)})),i+="<XML",c&&(i+=' GroupLevel="1"'),i+=" >";for(var d=function(e){a=s[e].ReportField.toString(),i+="<Row ",i+='ColID ="'+a+'" ';for(var t=0;t<n.ScreenObject.StaticFields.length;t++)if(n.ScreenObject.StaticFields[t].DBColumnID==parseInt(s[e].DocumentField.toString()))if(n.ScreenObject.StaticFields[t]instanceof r.d){if(""==n.ScreenObject.StaticFields[t].Text)return{v:(alert(n.ErrorMessage+n.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};"SNO"==s[e].SysColumnName.toString()?i+='Value ="'+n.ReportDimension.SelectedValue+'" ':i+='Value ="'+n.ScreenObject.StaticFields[t].Text+'" '}else if(n.ScreenObject.StaticFields[t]instanceof u.a){if(""==n.ScreenObject.StaticFields[t].TextBox.Text||""==n.ScreenObject.StaticFields[t].ComboBox.SelectedValue)return{v:(alert(n.ErrorMessage+n.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};i+='Value ="'+n.ScreenObject.StaticFields[t].ComboBox.SelectedValue+'" '}else if(n.ScreenObject.StaticFields[t]instanceof r.c){if(""==n.ScreenObject.StaticFields[t].Text)return{v:(alert(n.ErrorMessage+n.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};i+='Value ="'+n.ScreenObject.StaticFields[t].Text+'" '}else if(n.ScreenObject.StaticFields[t]instanceof g.a||n.ScreenObject.StaticFields[t]instanceof g.d||n.ScreenObject.StaticFields[t]instanceof g.c){if(n.ScreenObject.StaticFields[t]instanceof g.a||n.ScreenObject.StaticFields[t]instanceof g.d){if(""==n.ScreenObject.StaticFields[t].Text)return{v:(alert(n.ErrorMessage+n.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};i+='Value ="'+n.ScreenObject.StaticFields[t].Date.ToString("dd/MMM/yyyy")+'" '}else if(n.ScreenObject.StaticFields[t]instanceof g.c){if(!n.ScreenObject.StaticFields[t].Date)return{v:(alert(n.ErrorMessage+n.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};i+='Value ="'+n.ScreenObject.StaticFields[t].Date.ToString("dd/MMM/yyyy")+'" '}}else if(n.ScreenObject.StaticFields[t]instanceof l.b){if(""==n.ScreenObject.StaticFields[t].Text)return{v:(alert(n.ErrorMessage+n.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};i+='Value ="'+n.ScreenObject.StaticFields[t].SelectedValue+'" '}else if(n.ScreenObject.StaticFields[t]instanceof M.a){if(""==n.ScreenObject.StaticFields[t].Text)return{v:(alert(n.ErrorMessage+n.ScreenObject.StaticFields[t].Label+" '"),"Empty Value")};i+='Value ="'+n.ScreenObject.StaticFields[t].SelectedValue+'" '}n.ScreenObject.CustomTab.Pages.forEach((function(t){t.Fields.forEach((function(t){if(null!=t&&(t instanceof r.d||t instanceof u.a||t instanceof r.c||t instanceof g.a||t instanceof g.d||t instanceof g.c||t instanceof l.b||t instanceof M.a)&&t.DBColumnID==parseInt(s[e].DocumentField.toString()))if(t instanceof r.d){if(""==t.Text)return alert(n.ErrorMessage+t.Label+" '"),"Empty Value";i+='Value ="'+t.Text+'" '}else if(t instanceof u.a){if(""==t.TextBox.Text||""==t.ComboBox.SelectedValue)return alert(n.ErrorMessage+t.Label+" '"),"Empty Value";i+='Value ="'+t.TextBox.Text+'" '}else if(t instanceof r.c){if(""==t.Text)return alert(n.ErrorMessage+t.Label+" '"),"Empty Value";i+='Value ="'+t.Text+'" '}else if(t instanceof g.a||t instanceof g.d||t instanceof g.c){if(t||t){if(""==t.Text)return alert(n.ErrorMessage+t.Label+" '"),"Empty Value";i+='Value ="'+t.Date.ToString("dd/MMM/yyyy")+'" '}else if(t instanceof g.c){if(!t.Date)return alert(n.ErrorMessage+t.Label+" '"),"Empty Value";i+='Value ="'+t.Date.ToString("dd/MMM/yyyy")+'" '}}else if(t instanceof l.b){if(""==t.Text&&0==t.SelectedValue)return alert(n.ErrorMessage+t.Label+" '"),"Empty Value";i+='Value ="'+t.SelectedValue+'" '}else if(t instanceof M.a){if(""==t.Text)return alert(n.ErrorMessage+t.Label+" '"),"Empty Value";i+='Value ="'+t.SelectedValue+'" '}}))})),i+=" />"},h=0;h<s.length;h++){var b=d(h);if("object"==typeof b)return b.v}return i+="</XML>",t.strXML=i.toString(),""}},{key:"OnGroupSelectionChanged",value:function(e){null!=e&&("Group"==e.toString()||"PACT.COMMON.PactListBoxData"==e.toString()&&"IsGroup"==e.DBColumnName)&&this.Group.SelectedValue>0&&this.parentid!=this.Group.SelectedValue&&(this.parentid=this.Group.SelectedValue,this.Group.DefaultValue=this.Group.SelectedValue.toString(),this.AutoGenerateCode(),this.LoadParentData())}},{key:"LoadParentData",value:function(){var e=this;if(0==this.UnitID&&0!=this.Group.SelectedValue&&!this.group){var t=this.ScreenObject.Data.Tables[5].filter((function(e){return"Copygroupdatatonode"==e.Name}));if(0!=t.length&&""!=t[0].Value.toString()&&Object(o.j)(t[0].Value)){var n=s.a.rental.GetUnitDetails(this.Group.SelectedValue);if(0!=n.Tables.length&&0!=n.Tables[0].length){var i=null,a=null,l=null;n.Tables.length>0&&n.Tables[0].length>0&&(i=n.Tables[0][0]),n.Tables.length>2&&n.Tables[2].length>0&&(a=n.Tables[2][0]),n.Tables.length>4&&n.Tables[4].length>0&&(l=n.Tables[4][0]),this.ScreenObject.FillParentData(i,a,l,["Code","Name","Group","IsGroup"]),(t=this.ScreenObject.Data.Tables[5].filter((function(e){return"CopyGroupTabs"==e.Name}))).length>0&&""!=t[0].Value.toString()&&function(){var i=t[0].Value.toString().split(";");if(null!=i&&i.length>0)for(var s=function(s){if((t=e.ScreenObject.Data.Tables[e.ScreenObject.Data.Tables.length-1].filter((function(e){return e.CCTabID==i[s]}))).length>0&&""!=t[0].CCTabName.toString())switch(t[0].CCTabName.toString()){case"Particulars":e.PropertyDeposits.Load(n.Tables[1]);break;case"Share Holder":case"Units":case"Parkings":break;case"Attachments":e.ViewAttachments.LoadAttachments(n.Tables[6])}},a=0;a<i.length;a++)s(a)}()}}}}},{key:"LoadImageDimensions",value:function(){var e=new w.b;e.Column=3,e.RowSpan=4}},{key:"GetControl",value:function(e){var t=null,n=this.ScreenObject.Data.Tables[0].filter((function(t){return t.CostCenterColID==e}));if(n.length>0)if(a.e.StringIsNullOrEmpty(n[0].UserProbableValues)||"H"!=n[0].UserProbableValues.toString().toUpperCase()&&"HISTORY"!=n[0].UserProbableValues.toString().toUpperCase()?(t=new l.b(parseInt(n[0].CostCenterColID)),a.e.IsEmpty(n[0].ColumnCostCenterID)||"0"==n[0].ColumnCostCenterID.toString()||(t.CCID=parseInt(n[0].ColumnCostCenterID)),t.TypeID=0==n[0].ColumnCCListViewTypeID.toString().Trim().length?1:parseInt(n[0].ColumnCCListViewTypeID),t.OnPactListBoxValueChanged.Subscribe(this.ScreenObject,"OnGetReference"),t.AccDimInUse=!1):(t=new l.a(parseInt(n[0].CostCenterColID)),a.e.IsEmpty(n[0].ColumnCostCenterID)||"0"==n[0].ColumnCostCenterID.toString()||(t.CCID=parseInt(n[0].ColumnCostCenterID)),t.TypeID=0==n[0].ColumnCCListViewTypeID.toString().Trim().length||"0"==n[0].ColumnCCListViewTypeID.toString()?1:parseInt(n[0].ColumnCCListViewTypeID),t.ParentCostCenterID=this.CostCenterID,t.ClickCommand.Subscribe(this,"OnHistoryButtonClick"),t.AccDimInUse=!0),a.e.StringIsNullOrEmpty(n[0].Sectionid))this.ScreenObject.HeaderFields.push(t);else{var i=this.ScreenObject.CustomTab.Pages.find((function(e){return e.DBColumnID==parseInt(n[0].Sectionid.toString())}));null!=i&&null!=i&&i.Fields.push(t)}return this.ScreenObject.StaticFields.push(t),this.ScreenObject.SetProperties_Static(t),t}},{key:"OnSerialNo_LostFoucs",value:function(e){Logger.InfoLog("AddEditUnitsViewModel:: OnDiscount_LostFoucs Begin"),this.CalculateAmount(e),Logger.InfoLog("AddEditUnitsViewModel:: OnDiscount_LostFoucs End")}},{key:"OnUnitstatusClick",value:function(e){this.DisplayMessage="",null==this.UnitstatusHistory&&(this.UnitstatusHistory=new T.a(e),this.UnitID>0&&this.ds.Tables.length>9&&this.UnitstatusHistory.LoadEditData(this.ds.Tables[9],this.ds.Columns[9])),s.a.page.ShowDialog(this.UnitstatusHistory,P.a,{ShowCenter:!0,Title:s.a.GetResource("History")}).subscribe((function(e){}))}},{key:"OnHistoryButtonClick",value:function(e){this.ScreenObject.OnHistoryButtonClick(e)}},{key:"onListSelectedChanged",value:function(e){Logger.InfoLog("AddEditRenContractViewModel ::Entering onListSelectedChanged");try{if(null!=e&&("Property"==e.toString()||e==this.Property)&&this.Property.SelectedValue>0){this.TermsConditions.Text="";var t,n=s.a.rental.GetProperty(this.Property.SelectedValue,0);null!=n&&null!=n&&n.Tables.length>2&&n.Tables[2].length>0&&(null!=n.Tables[2][0].TermsConditions&&""!=n.Tables[2][0].TermsConditions.toString()&&(this.TermsConditions.Text=n.Tables[2][0].TermsConditions.toString()),null!=n.Tables[2][0].RentalIncomeAccountID&&""!=n.Tables[2][0].RentalIncomeAccountID.toString()&&(this.RentalIncomeAcc.SelectedValue=parseInt(n.Tables[2][0].RentalIncomeAccountID)),null!=n.Tables[2][0].PenaltyAccountID&&""!=n.Tables[2][0].PenaltyAccountID.toString()&&(this.PenaltyAcc.SelectedValue=parseInt(n.Tables[2][0].PenaltyAccountID)),null!=n.Tables[2][0].RentalReceivableAccountID&&""!=n.Tables[2][0].RentalReceivableAccountID.toString()&&(this.RentalReceivableAcc.SelectedValue=parseInt(n.Tables[2][0].RentalReceivableAccountID)),null!=n.Tables[2][0].ProvisionAccountID&&""!=n.Tables[2][0].ProvisionAccountID.toString()&&(this.ProvisionAccountID.SelectedValue=parseInt(n.Tables[2][0].ProvisionAccountID)),null!=n.Tables[2][0].AdvanceReceivableAccountID&&""!=n.Tables[2][0].AdvanceReceivableAccountID.toString()&&(this.AdvanceReceivableAcc.SelectedValue=parseInt(n.Tables[2][0].AdvanceReceivableAccountID)),null!=n.Tables[2][0].AdvanceRentAccountID&&""!=n.Tables[2][0].AdvanceRentAccountID.toString()&&(this.AdvanceRentAcc.SelectedValue=parseInt(n.Tables[2][0].AdvanceRentAccountID)),null!=n.Tables[2][0].AdvReceivableCloseAccID&&""!=n.Tables[2][0].AdvReceivableCloseAccID.toString()&&(this.AdvReceivableCloseAcc.SelectedValue=parseInt(n.Tables[2][0].AdvReceivableCloseAccID)),null!=n.Tables[2][0].BankAccount&&""!=n.Tables[2][0].BankAccount.toString()&&(this.BankAcc.SelectedValue=parseInt(n.Tables[2][0].BankAccount)),null!=n.Tables[2][0].BankLoanAccount&&""!=n.Tables[2][0].BankLoanAccount.toString()&&(this.BankLoanAcc.SelectedValue=parseInt(n.Tables[2][0].BankLoanAccount)),n.Tables[15].length>0&&(n.Columns[15].Contains("ccnid58")&&null!=n.Tables[15][0].ccnid58&&""!=n.Tables[15][0].ccnid58.toString()&&null!=(t=this.ScreenObject.GetExtrFieldByName("ccnid58"))&&null!=t&&t instanceof l.b&&(t.SelectedValue=parseInt(n.Tables[15][0].ccnid58.toString())),n.Columns[15].Contains("ccnid70")&&null!=n.Tables[15][0].ccnid70&&""!=n.Tables[15][0].ccnid70.toString()&&null!=(t=this.ScreenObject.GetExtrFieldByName("ccnid70"))&&null!=t&&t instanceof l.b&&(t.SelectedValue=parseInt(n.Tables[15][0].ccnid70.toString())),n.Columns[15].Contains("ccnid59")&&null!=n.Tables[15][0].ccnid59&&""!=n.Tables[15][0].ccnid59.toString()&&null!=(t=this.ScreenObject.GetExtrFieldByName("ccnid59"))&&null!=t&&t instanceof l.b&&(t.SelectedValue=parseInt(n.Tables[15][0].ccnid59.toString())),n.Columns[15].Contains("ccnid61")&&null!=n.Tables[15][0].ccnid61&&""!=n.Tables[15][0].ccnid61.toString()&&null!=(t=this.ScreenObject.GetExtrFieldByName("ccnid61"))&&null!=t&&t instanceof l.b&&(t.SelectedValue=parseInt(n.Tables[15][0].ccnid61.toString())),n.Columns[15].Contains("ccnid62")&&null!=n.Tables[15][0].ccnid62&&""!=n.Tables[15][0].ccnid62.toString()&&null!=(t=this.ScreenObject.GetExtrFieldByName("ccnid62"))&&null!=t&&t instanceof l.b&&(t.SelectedValue=parseInt(n.Tables[15][0].ccnid62.toString()))),null!=n.Tables[2][0].LocationID&&"0"!=n.Tables[2][0].LocationID.toString()&&(this.LocationUnit instanceof l.b?this.LocationUnit.SelectedValue=parseInt(n.Tables[2][0].LocationID):this.LocationUnit instanceof l.a&&this.LocationUnit.SetValue(parseInt(n.Tables[2][0].LocationID))),null!=n.Tables[2][0].LandLordID&&"0"!=n.Tables[2][0].LandLordID.toString()&&(this.Landlord instanceof l.b?this.Landlord.SelectedValue=parseInt(n.Tables[2][0].LandLordID):this.Landlord instanceof l.a&&this.Landlord.SetValue(parseInt(n.Tables[2][0].LandLordID))),this.PickPayables&&(null!=n.Tables[2][0].RentalAccount&&""!=n.Tables[2][0].RentalAccount.toString()&&(this.RentAcc.SelectedValue=parseInt(n.Tables[2][0].RentalAccount)),null!=n.Tables[2][0].RentPayableAccount&&""!=n.Tables[2][0].RentPayableAccount.toString()&&(this.RentPayableAcc.SelectedValue=parseInt(n.Tables[2][0].RentPayableAccount)),null!=n.Tables[2][0].AdvanceRentPaid&&""!=n.Tables[2][0].AdvanceRentPaid.toString()&&(this.AdvanceRentPaid.SelectedValue=parseInt(n.Tables[2][0].AdvanceRentPaid)))),null!=n&&n.Tables.length>8&&this.PropertyDeposits.PropertyID!=this.Property.SelectedValue&&(this.PropertyDeposits.PropertyID=this.Property.SelectedValue,this.PropertyDeposits.Load(n.Tables[8])),this.ScreenObject.OnGetReference(this.Property)}}catch(i){}}},{key:"CalculateAmount",value:function(e){Logger.InfoLog("AddEditUnitsViewModel:: CalculateAmount Begin");try{if(this.RentSQFT.Enable=!1,""==this.Discount.TextBox.Text&&(this.Discount.TextBox.Text="0"),""==this.RentArea.Text&&(this.RentArea.Text="0"),a.e.ValidateDouble(this.Discount.TextBox.Text)&&a.e.ValidateDouble(this.Amount.TextBox.Text)){var t=0,n=0;t=parseFloat(this.Amount.TextBox.Text),n=parseFloat(this.Discount.TextBox.Text),"1"==this.AmountType.SelectedValue?(this.AnnualRent.Text="2"==this.DiscountType.SelectedValue?(t-t*n/100).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()):(t-n).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()),this.MonthlyRent.Text=(parseFloat(this.AnnualRent.Text)/12).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()),this.RentSQFT.Text=a.e.ValidateDouble(this.RentArea.Text)&&parseFloat(this.RentArea.Text)>0?(parseFloat(this.AnnualRent.Text)/parseFloat(this.RentArea.Text)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()):(parseFloat(this.AnnualRent.Text)/1).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString())):"2"==this.AmountType.SelectedValue?(this.MonthlyRent.Text="2"==this.DiscountType.SelectedValue?(t-t*n/100).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()):(t-n).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()),this.AnnualRent.Text=(12*parseFloat(this.MonthlyRent.Text)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()),this.RentSQFT.Text=a.e.ValidateDouble(this.RentArea.Text)&&parseFloat(this.RentArea.Text)>0?(parseFloat(this.MonthlyRent.Text)/parseFloat(this.RentArea.Text)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()):(parseFloat(this.MonthlyRent.Text)/1).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString())):"3"==this.AmountType.SelectedValue?(this.RentSQFT.Text="2"==this.DiscountType.SelectedValue&&parseFloat(this.RentArea.Text)>0?((t-t*n/100)/parseFloat(this.RentArea.Text)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()):parseFloat(this.RentArea.Text)>0?(t-n/parseFloat(this.RentArea.Text)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()):(t-n/1).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()),this.AnnualRent.Text=(365*parseFloat(this.RentSQFT.Text)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()),this.MonthlyRent.Text=(30*parseFloat(this.RentSQFT.Text)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString())):"4"==this.AmountType.SelectedValue&&(null!=e&&e==this.RentSQFT?(this.RentSQFT.Enable=!0,this.MonthlyRent.Text="",this.AnnualRent.Text="",a.e.ValidateDouble(this.RentSQFT.Text)&&parseFloat(this.RentSQFT.Text)>0&&parseFloat(this.RentArea.Text)>0&&(this.Amount.TextBox.Text=(parseFloat(this.RentSQFT.Text)*parseFloat(this.RentArea.Text)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString())),t=parseFloat(this.Amount.TextBox.Text),n=parseFloat(this.Discount.TextBox.Text),this.MonthlyRent.Text="2"==this.DiscountType.SelectedValue?(30*(t-t*n/100)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()):(30*(t-n)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString()),this.AnnualRent.Text=(12*parseFloat(this.MonthlyRent.Text)).ToString("N"+s.a.SessionManager.Preferences.DecimalsinRate.toString())):null==e&&(this.RentSQFT.Enable=!0,this.MonthlyRent.Text="",this.AnnualRent.Text="",this.RentSQFT.Text="",this.Amount.TextBox.Text="0"))}}catch(i){}Logger.InfoLog("AddEditUnitsViewModel:: CalculateAmount End")}},{key:"LoadEditData",value:function(){if(null!=this.ds&&this.ds.Tables.length>4&&this.ds.Tables[0].length>0){if(this.CodePrefix="",this.CodeNumber=0,this.GroupSeqNoLength=0,a.e.StringIsNullOrEmpty(this.ds.Tables[0][0].GUID)||(this.Unitsmodel.GUID=this.ds.Tables[0][0].GUID.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[0][0].Code)||(this.UnitCode.Text=this.ds.Tables[0][0].Code.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[0][0].Name)||(this.UnitName.Text=this.ds.Tables[0][0].Name.toString()),this.UnitType.SelectedValue=a.e.StringValue(this.ds.Tables[0][0].NodeID),this.ds.Columns[0].Contains("UnitType")&&!a.e.StringIsNullOrEmpty(this.ds.Tables[0][0].UnitType)&&(this.TypeofUnit.SelectedValue=parseInt(this.ds.Tables[0][0].UnitType.toString())),null!=this.ds.Tables[0][0].Status&&""!=this.ds.Tables[0][0].Status.toString()&&(this.Status.SelectedValue=this.ds.Tables[0][0].Status.toString()),this.Group.SelectedValue=parseInt(this.ds.Tables[0][0].ParentID),a.e.StringIsNullOrEmpty(this.ds.Tables[0][0].CodePrefix)||(this.CodePrefix=this.ds.Tables[0][0].CodePrefix.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[0][0].CodeNumber)||(this.CodeNumber=parseInt(this.ds.Tables[0][0].CodeNumber)),a.e.StringIsNullOrEmpty(this.ds.Tables[0][0].GroupSeqNoLength)||(this.GroupSeqNoLength=parseInt(this.ds.Tables[0][0].GroupSeqNoLength.toString())),null!=this.ds.Tables[0][0].PropertyID&&""!=this.ds.Tables[0][0].PropertyID.toString()&&(this.Property.SelectedValue=parseInt(this.ds.Tables[0][0].PropertyID)),null!=this.ds.Tables[0][0].FloorLookUpID&&""!=this.ds.Tables[0][0].FloorLookUpID.toString()&&(this.Floor.SelectedValue=this.ds.Tables[0][0].FloorLookUpID.toString()),a.e.StringIsNullOrEmpty(this.ds.Tables[0][0].UnitStatus))this.UnitStatus.Text="";else{var e="";a.e.StringIsNullOrEmpty(this.ds.Tables[0][0].UnitStatusName)||(e=this.ds.Tables[0][0].UnitStatusName.toString()),this.UnitStatus.SetValue_2(parseInt(this.ds.Tables[0][0].UnitStatus),e)}if(a.e.StringIsNullOrEmpty(this.ds.Tables[0][0].BasedOn)||(this.BasedOn.SelectedValue=this.ds.Tables[0][0].BasedOn.toString()),this.ds.Columns[0].Contains("PostIncome")&&!a.e.StringIsNullOrEmpty(this.ds.Tables[0][0].PostIncome)&&(this.PostIncome.SelectedValue="true"==this.ds.Tables[0][0].PostIncome.toString().toLowerCase()||"1"==this.ds.Tables[0][0].PostIncome.toString()?"1":"0"),null!=this.ds.Tables[0][0].LocationID&&"0"!=this.ds.Tables[0][0].LocationID.toString()&&(this.LocationUnit instanceof l.b?this.LocationUnit.SelectedValue=parseInt(this.ds.Tables[0][0].LocationID.toString()):this.LocationUnit instanceof l.a&&this.LocationUnit.SetValue(parseInt(this.ds.Tables[0][0].LocationID.toString()))),null!=this.ds.Tables[0][0].ViewLookUpID&&""!=this.ds.Tables[0][0].ViewLookUpID.toString()&&(this.View.SelectedValue=this.ds.Tables[0][0].ViewLookUpID.toString()),null!=this.ds.Tables[0][0].RentableArea&&""!=this.ds.Tables[0][0].RentableArea.toString()&&(this.RentArea.Text=this.ds.Tables[0][0].RentableArea.toString()),null!=this.ds.Tables[0][0].BuildUpArea&&""!=this.ds.Tables[0][0].BuildUpArea.toString()&&(this.BuildArea.Text=this.ds.Tables[0][0].BuildUpArea.toString()),null!=this.ds.Tables[0][0].NoOfBathrooms&&""!=this.ds.Tables[0][0].NoOfBathrooms.toString()&&(this.NoOfBathrooms.Text=this.ds.Tables[0][0].NoOfBathrooms.toString()),null!=this.ds.Tables[0][0].NoOfParkings&&""!=this.ds.Tables[0][0].NoOfParkings.toString()&&(this.NoOfParkings.Text=this.ds.Tables[0][0].NoOfParkings.toString()),null!=this.ds.Tables[0][0].ElectricityCode&&""!=this.ds.Tables[0][0].ElectricityCode.toString()&&(this.ElectricityCode.Text=this.ds.Tables[0][0].ElectricityCode.toString()),null!=this.ds.Tables[0][0].ElectricityKW&&""!=this.ds.Tables[0][0].ElectricityKW.toString()&&(this.Electricity.Text=this.ds.Tables[0][0].ElectricityKW.toString()),null!=this.ds.Tables[0][0].Rent&&""!=this.ds.Tables[0][0].Rent.toString()&&(this.Amount.TextBox.Text=this.ds.Tables[0][0].Rent.toString()),null!=this.ds.Tables[0][0].RentTypeID&&""!=this.ds.Tables[0][0].RentTypeID.toString()&&parseInt(this.ds.Tables[0][0].RentTypeID.toString())>0&&(this.AmountType.SelectedValue=this.ds.Tables[0][0].RentTypeID.toString()),null!=this.ds.Tables[0][0].AccountantID&&""!=this.ds.Tables[0][0].AccountantID.toString()&&(this.Accountant instanceof l.b?this.Accountant.SelectedValue=parseInt(this.ds.Tables[0][0].AccountantID.toString()):this.Accountant instanceof l.a&&this.Accountant.SetValue(parseInt(this.ds.Tables[0][0].AccountantID.toString()))),null!=this.ds.Tables[0][0].SalesmanID&&""!=this.ds.Tables[0][0].SalesmanID.toString()&&(this.Salesman instanceof l.b?this.Salesman.SelectedValue=parseInt(this.ds.Tables[0][0].SalesmanID.toString()):this.Salesman instanceof l.a&&this.Salesman.SetValue(parseInt(this.ds.Tables[0][0].SalesmanID.toString()))),null!=this.ds.Tables[0][0].LandlordID&&""!=this.ds.Tables[0][0].LandlordID.toString()&&(this.Landlord instanceof l.b?this.Landlord.SelectedValue=parseInt(this.ds.Tables[0][0].LandlordID.toString()):this.Landlord instanceof l.a&&this.Landlord.SetValue(parseInt(this.ds.Tables[0][0].LandlordID.toString()))),null!=this.ds.Tables[0][0].DiscountAmount&&""!=this.ds.Tables[0][0].DiscountAmount.toString()&&("-100"!=this.ds.Tables[0][0].DiscountAmount.toString()?(this.DiscountType.SelectedValue="1",this.Discount.TextBox.Text=this.ds.Tables[0][0].DiscountAmount.toString()):(this.DiscountType.SelectedValue="2",this.Discount.TextBox.Text=this.ds.Tables[0][0].DiscountPercentage.toString())),null!=this.ds.Tables[0][0].AnnualRent&&""!=this.ds.Tables[0][0].AnnualRent.toString()&&(this.AnnualRent.Text=this.ds.Tables[0][0].AnnualRent.toString()),null!=this.ds.Tables[0][0].MonthlyRent&&""!=this.ds.Tables[0][0].MonthlyRent.toString()&&(this.MonthlyRent.Text=this.ds.Tables[0][0].MonthlyRent.toString()),null!=this.ds.Tables[0][0].RentPerSQFT&&""!=this.ds.Tables[0][0].RentPerSQFT.toString()&&(this.RentSQFT.Text=this.ds.Tables[0][0].RentPerSQFT.toString()),null!=this.ds.Tables[0][0].TermsConditions&&""!=this.ds.Tables[0][0].TermsConditions.toString()&&(this.TermsConditions.Text=this.ds.Tables[0][0].TermsConditions.toString()),null!=this.ds.Tables[0][0].PenaltyAccountID&&""!=this.ds.Tables[0][0].PenaltyAccountID.toString()&&(this.PenaltyAcc.SelectedValue=parseInt(this.ds.Tables[0][0].PenaltyAccountID)),null!=this.ds.Tables[0][0].RentalIncomeAccountID&&""!=this.ds.Tables[0][0].RentalIncomeAccountID.toString()&&(this.RentalIncomeAcc.SelectedValue=parseInt(this.ds.Tables[0][0].RentalIncomeAccountID)),null!=this.ds.Tables[0][0].RentalReceivableAccountID&&""!=this.ds.Tables[0][0].RentalReceivableAccountID.toString()&&(this.RentalReceivableAcc.SelectedValue=parseInt(this.ds.Tables[0][0].RentalReceivableAccountID)),null!=this.ds.Tables[0][0].AdvanceReceivableAccountID&&""!=this.ds.Tables[0][0].AdvanceReceivableAccountID.toString()&&(this.AdvanceReceivableAcc.SelectedValue=parseInt(this.ds.Tables[0][0].AdvanceReceivableAccountID)),null!=this.ds.Tables[0][0].ProvisionAccountID&&""!=this.ds.Tables[0][0].ProvisionAccountID.toString()&&(this.ProvisionAccountID.SelectedValue=parseInt(this.ds.Tables[0][0].ProvisionAccountID)),null!=this.ds.Tables[0][0].AdvanceRentAccountID&&""!=this.ds.Tables[0][0].AdvanceRentAccountID.toString()&&(this.AdvanceRentAcc.SelectedValue=parseInt(this.ds.Tables[0][0].AdvanceRentAccountID)),null!=this.ds.Tables[0][0].AdvReceivableCloseAccID&&""!=this.ds.Tables[0][0].AdvReceivableCloseAccID.toString()&&(this.AdvReceivableCloseAcc.SelectedValue=parseInt(this.ds.Tables[0][0].AdvReceivableCloseAccID)),null!=this.ds.Tables[0][0].BankAccount&&""!=this.ds.Tables[0][0].BankAccount.toString()&&(this.BankAcc.SelectedValue=parseInt(this.ds.Tables[0][0].BankAccount)),null!=this.ds.Tables[0][0].BankLoanAccount&&""!=this.ds.Tables[0][0].BankLoanAccount.toString()&&(this.BankLoanAcc.SelectedValue=parseInt(this.ds.Tables[0][0].BankLoanAccount)),null!=this.ds.Tables[0][0].RentalAccount&&""!=this.ds.Tables[0][0].RentalAccount.toString()&&(this.RentAcc.SelectedValue=parseInt(this.ds.Tables[0][0].RentalAccount)),null!=this.ds.Tables[0][0].RentPayableAccount&&""!=this.ds.Tables[0][0].RentPayableAccount.toString()&&(this.RentPayableAcc.SelectedValue=parseInt(this.ds.Tables[0][0].RentPayableAccount)),null!=this.ds.Tables[0][0].AdvanceRentPaid&&""!=this.ds.Tables[0][0].AdvanceRentPaid.toString()&&(this.AdvanceRentPaid.SelectedValue=parseInt(this.ds.Tables[0][0].AdvanceRentPaid)),null!=this.ds.Tables[0][0].TenantID&&""!=this.ds.Tables[0][0].TenantID.toString()&&(this.TenantID.SelectedValue=parseInt(this.ds.Tables[0][0].TenantID)),this.ds.Tables.length>2&&this.ScreenObject.LoadCustomFieldsData(this.ds.Tables[2]),this.ds.Tables.length>1&&(this.PropertyDeposits.PropertyID=this.Property.SelectedValue,this.PropertyDeposits.Load(this.ds.Tables[1])),this.ds.Tables.length>3&&this.LoadCustomFieldsData(this.ds.Tables[3]),this.ds.Tables.length>4&&this.ScreenObject.LoadCustomFieldsCCData(this.ds.Tables[4]),this.ds.Tables.length>6){this.ViewAttachments.LoadAttachments(this.ds.Tables[6]);var t=this.ds.Tables[6].filter((function(e){return 1==e.IsProductImage}));t.length>0?(this.PhotoTextVisibility=!1,this.FileID=parseInt(t[0].FileID),this.AccountPhoto=a.e.GetPath(t[0].GUID.toString()+"."+t[0].FileExtension.toString()),this.ActualFileName=t[0].ActualFileName.toString()):(this.FileID=0,this.PhotoTextVisibility=!0)}this.ds.Tables.length>7&&this.ViewUnitRate.LoadUnitRates(this.ds.Tables[7]),this.ScreenObject.CanApprove(this.ds.Tables[0][0],this.ds.Tables[8][0],this.ButtonSave)}}},{key:"AutoGenerateCode",value:function(){if(0==this.UnitID&&null!=this.ScreenObject.Data&&this.ScreenObject.Data.Tables.length>6&&(this.ScreenObject.SetAutoCode(this.UnitCode,this.group,this.Group.SelectedValue,this.ScreenObject.Data.Tables[6]),this.ScreenObject.IsAutoName)){this.ScreenObject.IsNameAutoGenerate=!0,this.UnitName.Enable=!1;var e=this.ScreenObject.Data.Tables[6];e=e.filter((function(e){return 1==e.IsName})),this.ScreenObject.IsName=!0,e.length>0&&(this.UnitName.Text=this.ScreenObject.SetAutoCodeParams_1(this.UnitName,this.Group.SelectedValue,e))}this.NoOfParkings.Text="0",this.NoOfBathrooms.Text="0",this.BuildArea.Text="0",this.RentArea.Text="1",this.RentSQFT.Text="0",this.Discount.TextBox.Text="0",this.Amount.TextBox.Text="0",this.Electricity.Text="0"}},{key:"AssignRowColumns",value:function(){var e;e=this.ScreenObject.CustomFields.length;for(var t=0;t<e;t++)this.ScreenObject.CustomFields[t].Row=t/4,this.ScreenObject.CustomFields[t].Column=t%4}},{key:"OnLoad",value:function(){var e=this;this.lstPropertyIDs=new Array,null!=this.ScreenObject.Data&&this.ScreenObject.Data.Tables.length>3&&(this.ScreenObject.Data.Tables[3].forEach((function(t){e.Status.Items.push(c.d.ComboBoxItems_2(t.Status.toString(),t.StatusID.toString()))})),this.Status.SelectedValue="424"),this.AmountType.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Annual"),"1")),this.AmountType.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Monthly"),"2")),this.AmountType.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Daily"),"4")),this.DiscountType.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Value"),"1")),this.DiscountType.Items.push(c.d.ComboBoxItems_2(s.a.GetResource("Percentage"),"2")),this.DiscountType.SelectedValue="1",this.AmountType.SelectedValue="1",this.AssignRowColumns();for(var t=this.ScreenObject.CustomTab.Pages.length-1;t>=0;t--){var n=this.ScreenObject.CustomTab.Pages[t];switch(n.Name){case"Particulars":n.Fields.push(this.PropertyDeposits)}}this.ScreenObject.CustomTab.Pages.forEach((function(t){t.Fields.forEach((function(t){t instanceof l.b&&"RentalIncomeAccountID"==t.DBColumnName?e.RentalIncomeAcc=t:t instanceof l.b&&"PenaltyAccountID"==t.DBColumnName?e.PenaltyAcc=t:t instanceof l.b&&"RentalReceivableAccountID"==t.DBColumnName?e.RentalReceivableAcc=t:t instanceof l.b&&"ProvisionAccountID"==t.DBColumnName?e.ProvisionAccountID=t:t instanceof l.b&&"AdvanceReceivableAccountID"==t.DBColumnName?e.AdvanceReceivableAcc=t:t instanceof l.b&&"AdvanceRentAccountID"==t.DBColumnName?e.AdvanceRentAcc=t:t instanceof l.b&&"AdvReceivableCloseAccID"==t.DBColumnName?e.AdvReceivableCloseAcc=t:t instanceof l.b&&"BankAccount"==t.DBColumnName?e.BankAcc=t:t instanceof l.b&&"BankLoanAccount"==t.DBColumnName?e.BankLoanAcc=t:t instanceof l.b&&"RentalAccount"==t.DBColumnName?e.RentAcc=t:t instanceof l.b&&"RentPayableAccount"==t.DBColumnName?e.RentPayableAcc=t:t instanceof l.b&&"AdvanceRentPaid"==t.DBColumnName?e.AdvanceRentPaid=t:t instanceof l.b&&"TenantID"==t.DBColumnName&&(e.TenantID=t)}))})),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"true"==s.a.SessionManager.Preferences.EnableLocationWise.toString().toLowerCase()&&s.a.SessionManager.Preferences.ContainsKey("LW Units")&&"true"==s.a.SessionManager.Preferences["LW Units"].toString().toLowerCase()&&(this.Property.CustomWhere=" a.LocationID in ("+s.a.SessionManager.LocationWhere+")")}},{key:"ValidateFloatFields",value:function(){return 0==a.e.ValidateDouble(this.BuildArea.Text)?"Please enter valid Build Area":0==a.e.ValidateDouble(this.RentArea.Text)?"Please enter valid Rent Area":0==a.e.ValidateDouble(this.NoOfBathrooms.Text)?"Please enter valid NoOfBathrooms":0==a.e.ValidateDouble(this.NoOfParkings.Text)?"Please enter valid NoOfParkings":0==a.e.ValidateDouble(this.Discount.TextBox.Text)?"Please enter valid Discount":0==a.e.ValidateDouble(this.Amount.TextBox.Text)?"Please enter valid Amount":0==a.e.ValidateDouble(this.Electricity.Text)?"Please enter valid Electricity":""}},{key:"OnSave",value:function(e){var t=this;if("Customize"==e);else if("ShowApprove"==e.toString()){var n=new U.a(93,this.Unitsmodel.UnitID,this.ScreenObject,this);s.a.page.ShowDialog(n,L.a,{ShowCenter:!0,Title:s.a.GetResource("ApproveReject")})}else if("Copy"==e.toString())if(0!=this.Property.SelectedValue){var i=new x(this);s.a.page.ShowDialog(i,O.a,{ShowCenter:!0,HideHeader:!0})}else this.DisplayMessage="Select "+this.Property.Label+" to Copy",this.MessageVisibility=!0;else if("Report"==e.toString())this.ReportInfoVisibility=!0,s.a.page.ShowDialog(this,F.a,{Title:"Reports"});else if("DeletePhoto"==e.toString())this.IsPhotoDelete=!0,this.AccountPhoto="",this.ActualFileName="",this.IsPhotoChanged=!1,this.PhotoTextVisibility=!0,this.DisplayMessage="";else if("PopUp"==e.toString()){null!=this.ds&&this.ds.Tables[6].filter((function(e){return"jpg"==e.FileExtension||"png"==e.FileExtension})).forEach((function(e){a.e.GetPath(e.GUID.toString()+"."+e.FileExtension.toString())+";"}))}else if("UploadPhoto"==e.toString()){var o=new N.a;o.PopupAttachmentsViewModel_1(93,this.UnitID,this),s.a.page.ShowDialog(o,B.a,{ShowCenter:!0,Title:"Add Images"})}else if("MouseDown"==e.toString()){var c=new N.a;c.PopupAttachmentsViewModel_1(2,this.AccountPhoto,this),s.a.page.ShowDialog(c,B.a,{ShowCenter:!0,Title:"Add Images"})}else if("Save"==e.toString()){Logger.InfoLog("SaveUnitViewModel:: OnSave");try{if(0==this.ValidateFloatFields().length){var u,d,h=this.ScreenObject.ValidateData();if(!a.e.StringIsNullOrEmpty(h))return this.DisplayMessage=h,void(this.MessageVisibility=!0);if(null==this.UnitName.Text.Trim()||""==this.UnitName.Text.Trim())return this.DisplayMessage="Enter Unit Name",void(this.MessageVisibility=!0);for(var b=0;b<this.PropertyDeposits.DepositsGrid1Obj.Table.length;b++){if(!a.e.StringIsNullOrEmpty(this.PropertyDeposits.DepositsGrid1Obj.Table[b].Particulars_Key)&&!a.e.StringIsNullOrEmpty(this.PropertyDeposits.DepositsGrid1Obj.Table[b].Advance_Key)&&parseInt(this.PropertyDeposits.DepositsGrid1Obj.Table[b].Advance_Key.toString())>0&&"1"==this.PropertyDeposits.DepositsGrid1Obj.Table[b].Refund.toString())return this.DisplayMessage="Can not select full refund at row no:"+(b+1),void(this.MessageVisibility=!0);if(""!=a.e.StringValue(this.PropertyDeposits.DepositsGrid1Obj.Table[b].PostDebit)&&"1"==a.e.String(this.PropertyDeposits.DepositsGrid1Obj.Table[b].PostDebit)&&a.e.IsEmpty(this.PropertyDeposits.DepositsGrid1Obj.Table[b].DebitAccount.toString()))return this.DisplayMessage="Please select debit account at row no:"+(b+1),void(this.MessageVisibility=!0)}if(this.Unitsmodel.UnitID=this.UnitID,0==this.UnitID){var S=this.ScreenObject.Data.Tables[6];S=S.filter((function(e){return 0==e.IsName}));var m={StrCode:this.Unitsmodel.Code,CodePrefix:this.Unitsmodel.CodePrefix,CodeNumber:this.Unitsmodel.CodeNumber};if(this.DisplayMessage=this.ScreenObject.SetAutoCodeParams_3(this.UnitCode,this.Group.SelectedValue,S,m),this.Unitsmodel.Code=m.StrCode,this.Unitsmodel.CodePrefix=m.CodePrefix,this.Unitsmodel.CodeNumber=m.CodeNumber,this.DisplayMessage.length>0)return}else this.Unitsmodel.Code=this.UnitCode.Text,this.Unitsmodel.CodePrefix=this.CodePrefix,this.Unitsmodel.CodeNumber=this.CodeNumber,this.Unitsmodel.GroupSeqNoLength=this.GroupSeqNoLength;d=a.e.IntTryParse(this.Status.SelectedValue),this.Unitsmodel.StatusID=""!=this.Status.SelectedValue?d:0,this.UnitName.Enable?this.Unitsmodel.Name=this.UnitName.Text:this.UnitName.Visible&&this.UnitName.Enable||(this.Unitsmodel.Name=this.UnitCode.Text),d=a.e.DoubleTryParse(this.UnitType.SelectedValue),this.Unitsmodel.UnitType=this.UnitType.Enable&&""!=this.UnitType.SelectedValue?d:this.UnitType.Enable||""==this.UnitType.SelectedValue?1:parseInt(this.UnitType.SelectedValue),this.Unitsmodel.TypeofUnit=this.TypeofUnit.SelectedValue>0?this.TypeofUnit.SelectedValue:999,this.Unitsmodel.UnitStatus=this.UnitStatus.SelectedValue,this.Unitsmodel.IsGroup=this.group,this.Unitsmodel.Property=this.Property.SelectedValue,this.Unitsmodel.SelectedNodeID=this.selectedNode,u=a.e.DoubleTryParse(this.RentArea.Text),this.Unitsmodel.RentalArea=""!=this.RentArea.Text?u:0,u=a.e.DoubleTryParse(this.BuildArea.Text),this.Unitsmodel.BuildUpArea=""!=this.BuildArea.Text?u:0,this.Unitsmodel.Floor=a.e.IntTryParse(this.Floor.SelectedValue),this.Unitsmodel.View=a.e.IntTryParse(this.View.SelectedValue),u=a.e.DoubleTryParse(this.NoOfBathrooms.Text),this.Unitsmodel.NoOfBathrooms=""!=this.NoOfBathrooms.Text?u:0,u=a.e.DoubleTryParse(this.NoOfParkings.Text),this.Unitsmodel.NoOfParkings=""!=this.NoOfParkings.Text?u:0,this.Unitsmodel.ElectricityCode=""!=this.ElectricityCode.Text?this.ElectricityCode.Text:"",u=a.e.DoubleTryParse(this.Electricity.Text),this.Unitsmodel.Electricity=""!=this.Electricity.Text?u:0,u=a.e.DoubleTryParse(this.Amount.TextBox.Text),this.Unitsmodel.Amount=""!=this.Amount.TextBox.Text?u:0,this.Unitsmodel.TermsConditions=""!=this.TermsConditions.Text&&null!=this.TermsConditions.Text?this.TermsConditions.Text:"",d=a.e.IntTryParse(this.AmountType.SelectedValue),this.Unitsmodel.AmountType=""!=this.AmountType.SelectedValue?d:0,"1"==this.DiscountType.SelectedValue?(this.Unitsmodel.DiscountPercentage=-100,u=a.e.DoubleTryParse(this.Discount.TextBox.Text),this.Unitsmodel.Discount=""!=this.Discount.TextBox.Text?u:0):(this.Unitsmodel.Discount=-100,u=a.e.DoubleTryParse(this.Discount.TextBox.Text),this.Unitsmodel.DiscountPercentage=""!=this.Discount.TextBox.Text?u:0),u=a.e.DoubleTryParse(this.AnnualRent.Text),this.Unitsmodel.AnnaulRent=""!=this.AnnualRent.Text?u:0,u=a.e.DoubleTryParse(this.MonthlyRent.Text),this.Unitsmodel.MonthlyRent=""!=this.MonthlyRent.Text?u:0,u=a.e.DoubleTryParse(this.RentSQFT.Text),this.Unitsmodel.RentperSqft=""!=this.RentSQFT.Text?u:0,this.Unitsmodel.Accountant=this.Accountant instanceof l.b&&this.Accountant.SelectedValue>0||this.Accountant instanceof l.a&&this.Accountant.SelectedValue>0?this.Accountant.SelectedValue:0,this.Unitsmodel.Salesman=this.Salesman instanceof l.b&&this.Salesman.SelectedValue>0||this.Salesman instanceof l.a&&this.Salesman.SelectedValue>0?this.Salesman.SelectedValue:0,this.Unitsmodel.Landlord=this.Landlord instanceof l.b&&this.Landlord.SelectedValue>0||this.Landlord instanceof l.a&&this.Landlord.SelectedValue>0?this.Landlord.SelectedValue:0,this.Unitsmodel.PenaltyAcc=0!=this.PenaltyAcc.SelectedValue?this.PenaltyAcc.SelectedValue:0,this.Unitsmodel.RentalIncomeAcc=0!=this.RentalIncomeAcc.SelectedValue?this.RentalIncomeAcc.SelectedValue:0,this.Unitsmodel.RentalReceivableAcc=0!=this.RentalReceivableAcc.SelectedValue?this.RentalReceivableAcc.SelectedValue:0,this.Unitsmodel.AdvanceReceivableAcc=0!=this.AdvanceReceivableAcc.SelectedValue?this.AdvanceReceivableAcc.SelectedValue:0,this.Unitsmodel.ProvisionAccountID=0!=this.ProvisionAccountID.SelectedValue?this.ProvisionAccountID.SelectedValue:0,this.Unitsmodel.AdvanceRentAcc=0!=this.AdvanceRentAcc.SelectedValue?this.AdvanceRentAcc.SelectedValue:0,this.Unitsmodel.AdvReceivableCloseAcc=0!=this.AdvReceivableCloseAcc.SelectedValue?this.AdvReceivableCloseAcc.SelectedValue:0,this.Unitsmodel.BankAcc=0!=this.BankAcc.SelectedValue?this.BankAcc.SelectedValue:0,this.Unitsmodel.BankLoanAcc=0!=this.BankLoanAcc.SelectedValue?this.BankLoanAcc.SelectedValue:0,this.Unitsmodel.RentAcc=0!=this.RentAcc.SelectedValue?this.RentAcc.SelectedValue:0,this.Unitsmodel.RentPayableAcc=0!=this.RentPayableAcc.SelectedValue?this.RentPayableAcc.SelectedValue:0,this.Unitsmodel.AdvanceRentPaid=0!=this.AdvanceRentPaid.SelectedValue?this.AdvanceRentPaid.SelectedValue:0,this.Unitsmodel.TenantID=0!=this.TenantID.SelectedValue?this.TenantID.SelectedValue:0,this.Unitsmodel.BasedOn=""!=this.BasedOn.SelectedValue?this.BasedOn.SelectedValue:"Monthly",this.Unitsmodel.PostIncome=a.e.StringIsNullOrEmpty(this.PostIncome.SelectedValue)?"1":this.PostIncome.SelectedValue,this.Unitsmodel.LocationID=this.LocationUnit instanceof l.b&&this.LocationUnit.SelectedValue>0||this.LocationUnit instanceof l.a&&this.LocationUnit.SelectedValue>0?this.LocationUnit.SelectedValue:0,this.Unitsmodel.CustomFieldsQuery=this.ScreenObject.GetCustomFieldsQuery(),this.Unitsmodel.CustomCCQuery=this.ScreenObject.GetCustomCostCenterFieldsQuery(),null!=this.LocationUnit&&this.LocationUnit.Visible&&this.Unitsmodel.LocationID>0&&(this.Unitsmodel.CustomCCQuery+="CCNID2="+this.Unitsmodel.LocationID+","),this.Unitsmodel.DetailsXML=this.PropertyDeposits.GetXML(),this.Unitsmodel.UnitRateHistoryXML=this.ViewUnitRate.GetXML(),this.Unitsmodel.HistoryXML=this.ScreenObject.HistoryCCXML,this.Unitsmodel.NotesXML=this.ViewNotes.GetXML();try{this.Unitsmodel.AttachmetsXML=this.ViewAttachments.GetXML();var T="";if(this.IsPhotoChanged&&!a.e.IsEmpty(this.AccountPhoto))if(T+=0==this.FileID?'<Row Action="NEW"':'<Row Action="MODIFY"',s.a.SessionManager.IsWebApplication)T+=' AttachmentID="'+this.FileID+'"',T+=' FilePath="'+this.AccountPhoto+'"',T+=' ActualFileName="'+this.AccountPhoto.substr(this.AccountPhoto.lastIndexOf("\\")+1)+'"',T+=' RelativeFileName="'+this.AccountPhoto+'"',T+=' FileExtension="'+this.FileExtension+'"',T+=' FileDescription="'+r.d.GetValidXml(this.FileDescription)+'"',T+=' IsProductImage="1"',T+=' IsDefaultImage="1"',T+=' GUID="'+this.guid+'"',T+="/>";else{var g=a.e.GetPath(this.AccountPhoto);this.guid=g.guid,this.FileExtension=g.FileExtension,T+=' AttachmentID="'+this.FileID+'"',T+=' FilePath="'+this.AccountPhoto+'"',T+=' ActualFileName="'+this.ActualFileName+'"',T+=' RelativeFileName="'+this.AccountPhoto+'"',T+=' FileExtension="'+this.FileExtension+'"',T+=' FileDescription="'+r.d.GetValidXml(this.FileDescription)+'"',T+=' IsProductImage="1"',T+=' IsDefaultImage="1"',T+=' GUID="'+this.guid+'"',T+="/>"}else this.IsPhotoDelete&&this.FileID>0&&(T+='<Row Action="DELETE"',T+=' AttachmentID="'+this.FileID+'"/>');T.length>0&&(T="<AttachmentsXML>"+T+"</AttachmentsXML>",this.Unitsmodel.AttachmetsXML=this.Unitsmodel.AttachmetsXML+T.toString())}catch(D){return this.DisplayMessage=s.a.GetResource("Upload_Path_notExists"),void(this.MessageVisibility=!0)}try{this.Unitsmodel.AttachmetsXML=this.ViewAttachments.GetXML()}catch(p){return this.DisplayMessage=s.a.GetResource("Upload_Path_notExists"),void(this.MessageVisibility=!0)}this.Unitsmodel.WID=this.ScreenObject.CheckWorkFlow(),s.a.rental.SaveUnits(this.Unitsmodel,"SaveUnits").subscribe((function(e){t.DisplayMessage=e.Message,t.MessageVisibility=!0,t.RetValue=e.RetValue,t.RetValue>0&&(t.Unitsmodel.UnitID=0,t.UnitID=0,t.UnitCode.Text="",t.UnitName.Text="",t.Status.SelectedValue="424",t.BuildArea.Text="0",t.RentArea.Text="0",t.Floor.SelectedIndex=0,t.View.SelectedIndex=0,t.Amount.TextBox.Text="0",t.AmountType.SelectedValue="1",t.MonthlyRent.Text="0",t.AnnualRent.Text="0",t.UnitstatusHistory=null,t.Property.SelectedValue=t.DefaultPropertyID>0?t.DefaultPropertyID:1,t.UnitType.SelectedIndex=0,t.RentSQFT.Text="0",t.ElectricityCode.Text="",t.Discount.TextBox.Text="0",t.Electricity.Text="0",t.NoOfBathrooms.Text="0",t.NoOfParkings.Text="0",t.AutoGenerateCode(),t.Group.SelectedValue=t.parentid,t.PropertyDeposits.ClearData(),t.ViewAttachments.AttachmentsListObj.Clear(),t.ViewUnitRate.UnitRateList.Clear(),t.ViewNotes.NotesList.Clear(),t.ViewNotes.DeletedNotes.Clear(),t.AccountPhoto="",t.ActualFileName="",t.PhotoTextVisibility=!0,t.ViewUnitRate.UnitRateGridObj.Clear(),t.TenantID.SelectedValue=0,t.CodePrefix="",t.CodeNumber=0,t.GroupSeqNoLength=0)}),(function(e){console.log(" Unit Save : "+JSON.stringify(e))}))}else this.DisplayMessage=this.ValidateFloatFields(),this.MessageVisibility=!0;Logger.InfoLog("SaveUnitViewModel:: OnSave")}catch(h){Logger.ErrorLog("SaveUnitViewModel:: OnSave"+h.stack)}}}},{key:"LoadCustomFieldsData",value:function(e){var t=this;if(Logger.InfoLog("AddEditTenantViewModel:: Entering LoadCustomFieldsData"),null!=e&&null!=e&&e.length>0){try{this.ScreenObject.CustomTab.Pages.forEach((function(n){n.Fields.forEach((function(n){if(n instanceof d.c&&null!=n.DBColumnName&&null!=e[0][n.DBColumnName])if(n instanceof r.d)n.Text="Tenant"==n.DBColumnName?e[0][n.DBColumnName]:new Date(e[0][n.DBColumnName]).ToString(s.a.SessionManager.Preferences["Date Format"]);else if(n instanceof c.e)n.SelectedValue=e[0][n.DBColumnName].toString();else if(n instanceof g.a)!a.e.StringIsNullOrEmpty(e[0][n.DBColumnName])&&a.e.isValidDate(e[0][n.DBColumnName].toString())&&(n.Date=new Date(e[0][n.DBColumnName]));else if(n instanceof D.a)n.Text=e[0][n.DBColumnName].toString();else if(n instanceof l.b){var i=a.e.IntTryParse(e[0][n.DBColumnName]);!a.e.StringIsNullOrEmpty(e[0][n.DBColumnName])&&i>0&&(n.SelectedValue=parseInt(e[0][n.DBColumnName].toString()))}else n instanceof r.c&&"TermsConditions"==n.DBColumnName&&(t.TermsConditions=n)}))}))}catch(n){Logger.ErrorLog("AddEditTenantViewModel:: LoadCustomFieldsData : "+n.stack)}Logger.InfoLog("AddEditTenantViewModel:: Exiting LoadCustomFieldsData")}}},{key:"LoadTabs",value:function(){for(var e=this,t=this.ScreenObject.CustomTab.Pages.length-1;t>=0;t--){var n=this.ScreenObject.CustomTab.Pages[t];switch(n.Name){case"Attachments":n.Fields.push(this.ViewAttachments);break;case"UnitRate":n.Fields.push(this.ViewUnitRate)}}this.ScreenObject.CustomTab.Pages.forEach((function(t){t.Fields.forEach((function(t){t instanceof r.c&&"TermsConditions"==t.DBColumnName&&(e.TermsConditions=t),t instanceof l.b&&50002==t.CCID&&(e.Location=t,e.IsLocationAv=!0)}))}))}},{key:"OnShowUnitRate",value:function(){}},{key:"OnAddUnitRate",value:function(){this.UnitRate=new A(this)}},{key:"ReportInfoVisibility",get:function(){return this._ReportInfoVisibility},set:function(e){e!=this._ReportInfoVisibility&&(this._ReportInfoVisibility=e)}}]),f}(C.b)},"ls7+":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("3Pt+"),s=n("fXoL"),a=n("sYmb");function o(e,t){if(1&e&&(s.Zb(0,"div",11),s.Wc(1,"\n            "),s.Vb(2,12),s.Wc(3,"\n        "),s.Yb()),2&e){var n=s.lc();s.Db(2),s.tc("obj",n.obj.Property)("group",n.form)}}function l(e,t){if(1&e&&(s.Zb(0,"div",14),s.Wc(1,"\n                "),s.Vb(2,12),s.Wc(3,"\n            "),s.Yb()),2&e){var n=s.lc().$implicit,i=s.lc();s.Db(2),s.tc("obj",n)("group",i.form)}}function r(e,t){if(1&e&&(s.Xb(0),s.Wc(1,"\n            "),s.Uc(2,l,4,2,"div",13),s.Wc(3,"\n        "),s.Wb()),2&e){var n=t.$implicit;s.Db(2),s.tc("ngIf",n.Visible)}}var c=function(){var e=function(){function e(t){_classCallCheck(this,e),this.translate=t,this.form=new i.j({})}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(s.Tb(a.e))},e.\u0275cmp=s.Nb({type:e,selectors:[["app-copy-data"]],inputs:{obj:"obj"},decls:31,vars:10,consts:[[1,"pactdailog"],[1,"PactdailogHeader"],[1,"card-title"],[1,"row"],[1,"primary-btn-wicon",3,"click"],[1,"fa-light","fa-circle-check"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"],[1,"row","form-row"],["style","margin-top: 4px;",4,"ngIf"],[4,"ngFor","ngForOf"],[2,"margin-top","4px"],["FieldDirective","",3,"obj","group"],["class","form-group col PACTControl",4,"ngIf"],[1,"form-group","col","PACTControl"]],template:function(e,t){1&e&&(s.Zb(0,"div",0),s.Wc(1,"\n    "),s.Zb(2,"div",1),s.Wc(3,"\n        "),s.Zb(4,"h5",2),s.Wc(5,"Copy"),s.Yb(),s.Wc(6,"\n        "),s.Zb(7,"div",3),s.Wc(8,"\n            "),s.Zb(9,"button",4),s.hc("click",(function(){return t.obj.OnSearch("OK")})),s.Ub(10,"i",5),s.Wc(11),s.mc(12,"translate"),s.Yb(),s.Wc(13,"\n            "),s.Zb(14,"button",6),s.hc("click",(function(){return t.obj.OnSearch("Cancel")})),s.Ub(15,"i",7),s.Wc(16),s.mc(17,"translate"),s.Yb(),s.Wc(18,"\n        "),s.Yb(),s.Wc(19,"\n    "),s.Yb(),s.Wc(20,"\n    "),s.Zb(21,"div",8),s.Wc(22,"\n        "),s.Uc(23,o,4,2,"div",9),s.Wc(24,"\n    "),s.Yb(),s.Wc(25,"\n    "),s.Zb(26,"div",8),s.Wc(27,"\n        "),s.Uc(28,r,4,1,"ng-container",10),s.Wc(29,"\n    "),s.Yb(),s.Wc(30,"\n"),s.Yb()),2&e&&(s.Sc("width",t.obj.IsMobile?"unset":"800px"),s.Db(11),s.Xc(s.nc(12,6,"Com_OK")),s.Db(5),s.Xc(s.nc(17,8,"Cancel")),s.Db(7),s.tc("ngIf",t.obj.Property.Visible),s.Db(5),s.tc("ngForOf",t.obj.Fields))},encapsulation:2}),e}()},pV49:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("vfbs"),s=n("fXoL"),a=function(){var e=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this)}return _createClass(n,[{key:"ngOnInit",value:function(){}}]),n}(i.a);return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Nb({type:e,selectors:[["app-add-edit-unit-rate"]],features:[s.Ab],decls:59,vars:19,consts:[[1,"master-screen",3,"formGroup"],[1,"PACTHeaderFields","dialogSubBody"],[1,"row","form-row"],[1,"form-group","col-xl-6","col-md-6","col-sm-6","col-xs-6","PACTControl"],["FieldDirective","",3,"obj","group"],[1,"form-group","col-xl-12","col-md-12","col-sm-12","col-xs-12","PACTControl"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"fa-light","fa-floppy-disk"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"]],template:function(e,t){1&e&&(s.Wc(0,"\n"),s.Zb(1,"div",0),s.Wc(2,"\n    "),s.Zb(3,"div",1),s.Wc(4,"\n        "),s.Zb(5,"div",2),s.Wc(6,"\n            "),s.Zb(7,"div",3),s.Wc(8,"\n                "),s.Vb(9,4),s.Wc(10,"\n            "),s.Yb(),s.Wc(11,"\n            "),s.Zb(12,"div",3),s.Wc(13,"\n                "),s.Vb(14,4),s.Wc(15,"\n            "),s.Yb(),s.Wc(16,"\n        "),s.Yb(),s.Wc(17,"\n        "),s.Zb(18,"div",2),s.Wc(19,"\n            "),s.Zb(20,"div",3),s.Wc(21,"\n                "),s.Vb(22,4),s.Wc(23,"\n            "),s.Yb(),s.Wc(24,"\n            "),s.Zb(25,"div",3),s.Wc(26,"\n                "),s.Vb(27,4),s.Wc(28,"\n            "),s.Yb(),s.Wc(29,"\n        "),s.Yb(),s.Wc(30,"\n        "),s.Zb(31,"div",5),s.Wc(32,"\n            "),s.Vb(33,4),s.Wc(34,"\n        "),s.Yb(),s.Wc(35,"\n        "),s.Zb(36,"div",5),s.Wc(37,"\n            "),s.Vb(38,4),s.Wc(39,"\n        "),s.Yb(),s.Wc(40,"\n        \n      \n  "),s.Yb(),s.Wc(41,"\n  "),s.Zb(42,"div",6),s.Wc(43,"\n    "),s.Zb(44,"div"),s.Wc(45,"\n        "),s.Zb(46,"button",7),s.hc("click",(function(){return t.obj.OnSaveUnitRate("Save")})),s.Ub(47,"i",8),s.Wc(48),s.mc(49,"translate"),s.Yb(),s.Wc(50,"\n        "),s.Zb(51,"button",9),s.hc("click",(function(){return t.obj.OnSaveUnitRate("Cancel")})),s.Ub(52,"i",10),s.Wc(53),s.mc(54,"translate"),s.Yb(),s.Wc(55,"\n    "),s.Yb(),s.Wc(56,"      \n  "),s.Yb(),s.Wc(57,"\n"),s.Yb(),s.Wc(58,"\n\n")),2&e&&(s.Db(1),s.tc("formGroup",t.obj.form),s.Db(8),s.tc("obj",t.obj.Amount)("group",t.obj.form),s.Db(5),s.tc("obj",t.obj.AmountTypes)("group",t.obj.form),s.Db(8),s.tc("obj",t.obj.Discount)("group",t.obj.form),s.Db(5),s.tc("obj",t.obj.DiscountTypes)("group",t.obj.form),s.Db(6),s.tc("obj",t.obj.AnnualRent)("group",t.obj.form),s.Db(5),s.tc("obj",t.obj.UnitRateDate)("group",t.obj.form),s.Db(10),s.Xc(s.nc(49,15,"Save")),s.Db(5),s.Xc(s.nc(54,17,"Cancel")))},encapsulation:2}),e}()}}]);