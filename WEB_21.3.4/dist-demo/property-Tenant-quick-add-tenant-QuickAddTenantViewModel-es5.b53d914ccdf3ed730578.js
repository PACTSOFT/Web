function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var s,i=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;s=Reflect.construct(i,arguments,n)}else s=i.apply(this,arguments);return _possibleConstructorReturn(this,s)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[201,127,200],{"4k0m":function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var i=s("Do2H"),n=s("ScVY"),a=s("EQd/"),o=s("0/4Q"),r=function(e){_inherits(s,e);var t=_createSuper(s);function s(e,n,o,r){var l;return _classCallCheck(this,s),(l=t.call(this)).Remarks=new a.c(0),l.CostCenterID=0,l.NodeID=0,l.Parent=null,l.retValWeb=0,l.IsUpdated=!1,l.CostCenterID=e,l.NodeID=n,l.Parent=r,l.ScreenObject=o,l.Remarks.Label=i.a.GetResource("Remarks"),l}return _createClass(s,[{key:"SaveStatus",value:function(e,t,s){!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var i=!1,n=null;"MonthlyPayrollViewModel"==this.Parent.ClassName?(null!=(n=this.Parent.SetDocStatus(e,t,s,new Date,this.Remarks.Text,!0,""))&&n.Tables.length>0&&n.Tables[0].length>0&&n.Columns[0].Contains("status")&&(this.Parent.DocStatus="["+n.Tables[0][0].status.toString()+"]",i=!0),null!=n&&n.Tables.length>0&&n.Tables[n.Tables.length-1].length>0&&n.Columns[n.Tables.length-1].Contains("ErrorMessage")&&(this.Parent.this.DisplayMessage=n.Tables[n.Tables.length-1][0].ErrorMessage.toString()),this.Parent.this.MessageVisibility=!0,i&&this.Parent.btnClear_Click()):"FinalSettlementViewModel"==this.Parent.ClassName&&(null!=(n=this.Parent.SetDocStatus(e,t,s,new Date,this.Remarks.Text,!0,""))&&n.Tables.length>0&&n.Tables[0].length>0&&n.Columns[0].Contains("status")&&(this.Parent.DocStatus="["+n.Tables[0][0].status.toString()+"]",i=!0),null!=n&&n.Tables.length>0&&n.Tables[n.Tables.length-1].length>0&&n.Columns[n.Tables.length-1].Contains("ErrorMessage")&&(this.Parent.this.DisplayMessage=n.Tables[n.Tables.length-1][0].ErrorMessage.toString()),this.Parent.this.MessageVisibility=!0,i&&this.Parent.Button_Click("Clear"))}},{key:"onButtonClick",value:function(e){var t=0;if(40054==this.CostCenterID)"Approve"==e?i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Edit")?this.Parent.btnPost_Click():this.SaveStatus(369,parseInt(this.Parent.oCMP.arrLstOthMPFields[0].dvPayProcessed[0].WorkFlowID),""):"Reject"==e&&this.SaveStatus(372,0,""),i.a.page.HideDialog();else if(40095==this.CostCenterID)"Approve"==e?i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Edit")?(this.Parent.sCmdParameter="Approve",this.Parent.Button_Click("Save")):this.SaveStatus(369,this.Parent.WID,""):"Reject"==e&&this.SaveStatus(372,0,""),i.a.page.HideDialog();else{var s=this.ScreenObject.CurrentStatus;if("Approve"==e){if(!this.IsSaveValidated())return;var n=i.a.common.ApproveCostCenter(this.CostCenterID,this.NodeID,s,this.Remarks.Text,!1,0);this.DisplayMessage=n.Message,(t=n.RetValue)>0&&(this.IsUpdated||(this.ScreenObject.ButtonApproveVisible=!1,this.UpdateStatusID(t),null!=this.ScreenObject.drpStatus&&(null==this.ScreenObject.drpStatus.Items.find((function(e){return e.Value==t.toString()}))&&("1001"==t.toString()?this.ScreenObject.drpStatus.Items.push(o.d.ComboBoxItems_2("Un Approved","1001")):"1002"==t.toString()?this.ScreenObject.drpStatus.Items.push(o.d.ComboBoxItems_2("Approved","1002")):this.ScreenObject.drpStatus.Items.push(o.d.ComboBoxItems_2("Rejected","1003"))),this.ScreenObject.drpStatus.SelectedValue=t.toString(),this.ScreenObject.drpStatus.SetSelectedItem(t.toString())),i.a.SessionManager.IsWebApplication&&(this.retValWeb=t)),i.a.page.HideDialog())}else if("Reject"==e){if(!this.IsSaveValidated())return;var a=i.a.common.ApproveCostCenter(this.CostCenterID,this.NodeID,s,this.Remarks.Text,!0,0);this.DisplayMessage=a.Message,(t=a.RetValue)>0&&(this.IsUpdated||(this.UpdateStatusID(t),null!=this.ScreenObject.drpStatus&&(null==this.ScreenObject.drpStatus.Items.find((function(e){return e.Value==t.toString()}))&&("1001"==t.toString()?this.ScreenObject.drpStatus.Items.push(o.d.ComboBoxItems_2("Un Approved","1001")):"1002"==t.toString()?this.ScreenObject.drpStatus.Items.push(o.d.ComboBoxItems_2("Approved","1002")):this.ScreenObject.drpStatus.Items.push(o.d.ComboBoxItems_2("Rejected","1003"))),this.ScreenObject.drpStatus.SelectedValue=t.toString(),this.ScreenObject.drpStatus.SetSelectedItem(t.toString())),i.a.SessionManager.IsWebApplication&&(this.retValWeb=t)),i.a.page.HideDialog())}else i.a.page.HideDialog()}}},{key:"UpdateStatusID",value:function(e){this.ScreenObject.CurrentStatus=e,"QuickAddAccountScreenViewModel"==this.Parent.ClassName||"AddEditAccountScreenViewModel"==this.Parent.ClassName?this.Parent.obj.StatusID=e:"QuickAddProductViewModel"==this.Parent.ClassName?this.Parent.objProduct.ProductStatus=e:"AddProductScreenViewModel"==this.Parent.ClassName?this.Parent.oProduct.ProductStatus=e:"QuickAddCostCenterViewModel"==this.Parent.ClassName||"AddCostCenterViewModel"==this.Parent.ClassName?this.Parent.objCostCenter.Status=e:"AddEditEmpMasterViewModel"==this.Parent.ClassName&&(this.Parent.objEmp.StatusID=e)}},{key:"IsSaveValidated",value:function(){if(this.IsUpdated=!1,"QuickAddAccountScreenViewModel"==this.Parent.ClassName){var e=this.Parent;if(e.ButtonSave.Visible&&e.ButtonSave.Enable){if(e.SaveMethod("APPROVE_CALL"),0!=e.AccountID)return this.DisplayMessage=e.DisplayMessage,e.DisplayMessage="",!1;this.IsUpdated=!0,e.DisplayMessage=""}}else if("AddEditAccountScreenViewModel"==this.Parent.ClassName){var t=this.Parent;if(t.ButtonSave.Visible&&t.ButtonSave.Enable){if(t.OnSaveAccount("APPROVE_CALL"),0!=t.AccountID)return this.DisplayMessage=t.DisplayMessage,t.DisplayMessage="",!1;this.IsUpdated=!0,t.DisplayMessage=""}}else if("QuickAddProductViewModel"==this.Parent.ClassName){var s=this.Parent;if(s.ButtonSave.Visible&&s.ButtonSave.Enable){if(s.onSaveProduct("APPROVE_CALL"),0!=s.objProduct.ProductID)return this.DisplayMessage=s.DisplayMessage,s.DisplayMessage="",!1;this.IsUpdated=!0,s.DisplayMessage=""}}else if("AddProductScreenViewModel"==this.Parent.ClassName){var i=this.Parent;if(i.ButtonSave.Visible&&i.ButtonSave.Enable){if(i.OnSaveProduct("APPROVE_CALL"),0!=i.ProductID)return this.DisplayMessage=i.DisplayMessage,i.DisplayMessage="",!1;this.IsUpdated=!0,i.DisplayMessage=""}}else if("QuickAddCostCenterViewModel"==this.Parent.ClassName){var n=this.Parent;if(n.ButtonSave.Visible&&n.ButtonSave.Enable){if(n.SaveMethod(),0!=n.NodeID)return this.DisplayMessage=n.DisplayMessage,n.DisplayMessage="",!1;this.IsUpdated=!0,n.DisplayMessage=""}}else if("AddCostCenterViewModel"==this.Parent.ClassName){var a=this.Parent;if(a.ButtonSave.Visible&&a.ButtonSave.Enable){if(a.OnSaveCostCenter("Save"),0!=a.NodeID)return this.DisplayMessage=a.DisplayMessage,a.DisplayMessage="",!1;this.IsUpdated=!0,a.DisplayMessage=""}}else if("AddEditEmpMasterViewModel"==this.Parent.ClassName){var o=this.Parent;if(o.ButtonSave.Visible&&o.ButtonSave.Enable){if(o.OnSaveEmployee("Save"),0!=o.NodeID)return this.DisplayMessage=o.DisplayMessage,o.DisplayMessage="",!1;this.IsUpdated=!0,o.DisplayMessage=""}}return!0}}]),s}(n.b)},T0de:function(e,t,s){"use strict";s.r(t),s.d(t,"QuickAddTenantViewModel",(function(){return m}));var i=s("Do2H"),n=s("Lp6j"),a=s("eQJW"),o=s("ScVY"),r=s("VxiT"),l=s("EQd/"),c=s("0/4Q"),u=s("n56n"),d=s("NkMH"),h=s("XR/+"),b=s("x9zH"),p=s("4HhE"),g=s("JIg3"),S=s("jgdN"),C=s("4k0m"),f=s("++IR"),m=function(e){_inherits(s,e);var t=_createSuper(s);function s(e,n,a,o,c){var h;_classCallCheck(this,s),(h=t.call(this)).Obj={},h.ScreenObject=new r.a,h.RetValue=0,h._Height=700,h.Height=0,h.QuickVisible=!0,h.txtCode=new l.d(25694),h.Type=new u.b(25695),h.Position=new u.b(25696),h.FstName=new l.d(25697),h.Group=new u.b(25789),h.Title="",h.DetailButtonVisibility=!0,h.parentid=0,h.group=!0,h.NodeID=0,h.TenantID=0,h.ClassName="QuickAddTenantViewModel",Logger.InfoLog("QuickAddTenantViewModel::Entering QuickAddTenantViewModel With Parameters Selectednodeid="+e+" Costcenterid="+n+" Parentid="+a+"Isgroup="+o+" Oparent="+c);try{h.DisplayMessage="",h.MessageVisibility=!1,h.Title=i.a.GetResource("TNT_Title"),h.ScreenObject.LoadQuickScreen(_assertThisInitialized(h),94,o),o&&(h.QuickVisible=!1,h.DetailButtonVisibility=!1,h.Title=i.a.GetResource("TNT_AddGroup")),h.QuickVisible=!0,h.txtCode=h.ScreenObject.GetQuickText(25694),null==h.txtCode&&(h.txtCode=new l.d(25694),h.txtCode.Visible=!1),h.Type=h.ScreenObject.GetQuickField(25695),null==h.Type&&(h.Type=new u.b(25695),h.Type.Visible=!1),h.Position=h.ScreenObject.GetQuickField(25696),null==h.Position&&(h.Position=new u.b(25696),h.Position.Visible=!1),h.FstName=h.ScreenObject.GetQuickText(25697),null==h.FstName&&(h.FstName=new l.d(25697),h.FstName.Visible=!1),h.Group=h.ScreenObject.GetQuickField(25789),null==h.Group&&(h.Group=new u.b(25789),h.Group.Visible=!1),h.ButtonSave=new d.a,h.Parent=c,h.parentid=a,h.group=o,h.Obj.TenantID=e,h.TenantID=h.Obj.TenantID,h.NodeID=h.Obj.TenantID,h.Group.SelectedValue=h.parentid,h.AutoGenerateCode(),e>0&&(h.LoadEditData(),h.Group.Enable=!1,h.Title=i.a.GetResource(o?"TNT_EditGroup":"TNT_Edit"))}catch(b){Logger.ErrorLog("QuickAddTenantViewModel:: QuickAddTenantViewModel"+b.stack)}return Logger.InfoLog("QuickAddTenantViewModel::Exiting QuickAddTenantViewModel"),h}return _createClass(s,[{key:"AutoGenerateCode",value:function(){var e=i.a.common.GetAutoSequence(94,"","94",i.a.SessionManager.CompanyIndex.toString()),t=this.ScreenObject.Data.Tables[4].filter((function(e){return"CodeAutoGen"==e.Name}));if(t.length>0&&Object(a.j)(t[0].Value)){this.txtCode.Enable=!1,this.txtCode.Mandatory=!1;var s=this.ScreenObject.StaticFields.find((function(e){return 25694==e.DBColumnID}));null!=s&&null!=s&&(s.Enable=!1,0==this.TenantID&&(s.Text=e))}}},{key:"LoadEditData",value:function(){Logger.InfoLog("QuickAddTenantViewModel::Entering LoadEditData");try{var e=i.a.rental.GetTenantDetails(this.Obj.TenantID);Object.assign(this.Obj,e.obj),this.txtCode.Text=this.Obj.Code,this.FstName.Text=this.Obj.FirstName,this.Type.SelectedValue=this.Obj.TypeID,this.Position.SelectedValue=this.Obj.PositionID,this.ScreenObject.FillControls(e.Tables[0][0],e.Tables[1][0],e.Tables[2].length>0?e.Tables[2][0]:null,null),this.ScreenObject.CanApprove(e.Tables[0][0],e.Tables[5][0],this.ButtonSave)}catch(t){Logger.InfoLog("QuickAddTenantViewModel:: LoadEditData"+t.stack)}Logger.InfoLog("QuickAddTenantViewModel::Exiting LoadEditData")}},{key:"OnSave",value:function(e){var t=this;Logger.InfoLog("QuickAddTenantViewModel::Entering OnSave");try{if("Cancel"==e.toString())i.a.page.HideDialog();else if("Details"==e.toString()){i.a.page.HideDialog();var s=new h.AddEditTenantViewModel(this.NodeID,this.parentid,this.group);s.FstName.Text=this.FstName.Text,s.txtCode.Text=this.ScreenObject.GetTextComboValue_string(25694,""),s.Type.SelectedValue=this.Type.SelectedValue,s.Position.SelectedValue=this.Position.SelectedValue,s.Group.SelectedValue=this.Group.SelectedValue,i.a.page.addNewTab({title:this.ScreenName,component:b.AddEditTenantComponent,params:{obj:s}})}else if("ShowApprove"==e.toString()){var a=new C.a(94,this.Obj.TenantID,this.ScreenObject,this);i.a.page.ShowDialog(a,f.a,{ShowCenter:!0,Title:i.a.GetResource("ApproveReject")})}else if("Save"==e.toString()){var o=this.ScreenObject.ValidateData();if(!n.e.IsEmpty(o))return this.DisplayMessage=o,void(this.MessageVisibility=!0);this.txtCode.Text=this.ScreenObject.GetTextComboValue_string(25694,""),this.Obj.Code=this.txtCode.Text,this.Obj.TypeID=this.Type.SelectedValue,this.Obj.PositionID=this.Position.SelectedValue,this.FstName.Text=this.ScreenObject.GetTextComboValue_string(25697,""),this.Obj.FirstName=this.FstName.Text,this.Obj.SelectedNodeId=this.Group.SelectedValue,this.Obj.IsGroup=this.group,this.Obj.MiddleName=this.ScreenObject.GetTextComboValue_string(25698,""),this.Obj.LastName=this.ScreenObject.GetTextComboValue_string(25699,""),this.Obj.LeaseSignatory=this.ScreenObject.GetTextComboValue_string(25700,""),this.Obj.ContactPerson=this.ScreenObject.GetTextComboValue_string(25701,""),this.Obj.Phone1=this.ScreenObject.GetTextComboValue_string(25702,""),this.Obj.Phone2=this.ScreenObject.GetTextComboValue_string(25703,""),this.Obj.Email=this.ScreenObject.GetTextComboValue_string(25704,""),this.Obj.Fax=this.ScreenObject.GetTextComboValue_string(25705,""),this.Obj.IDNumber=this.ScreenObject.GetTextComboValue_string(25706,""),this.Obj.Profession=this.ScreenObject.GetTextComboValue_string(25707,""),this.Obj.AttachmetsXML="",this.Obj.PostingID=0,this.Obj.TabsData=this.getFields().Trim(","),this.Obj.CustomFieldsQuery=this.ScreenObject.GetQuickExtraFieldsQuery(),this.Obj.CustomCostCenterFieldsQuery=this.ScreenObject.GetQuickExtraCCFieldsQuery(),this.Obj.WID=this.ScreenObject.CheckWorkFlow(),this.Obj.ContactsXML="",this.Obj.PrimaryContactQuery="",i.a.rental.SaveTenant(this.Obj,"SaveTenant").subscribe((function(e){t.DisplayMessage=e.Message,t.MessageVisibility=!0,t.RetValue=e.RetValue,t.RetValue>0&&(t.txtCode.Text="",t.FstName.Text="",null==t.Parent?i.a.page.HideDialog():t.Parent.Refresh(),i.a.page.HideDialog())}),(function(e){console.log(" Unit Save : "+JSON.stringify(e))}))}}catch(o){Logger.ErrorLog("QuickAddTenantViewModel:: OnSave"+o.stack)}Logger.InfoLog("QuickAddTenantViewModel::Exiting OnSave")}},{key:"getFields",value:function(){Logger.InfoLog("AddEditTenantViewModel::Entering getFields");var e="",t="";return this.ScreenObject.StaticFields.forEach((function(s){s instanceof p.c&&!n.e.IsEmpty(s.DBColumnName)&&!s.DBColumnName.toLowerCase().Contains("alpha")&&!s.DBColumnName.toLowerCase().Contains("ccnid")&&(s instanceof l.d?"Passport"!=s.DBColumnName&&"Nationality"!=s.DBColumnName&&"SponsorName"!=s.DBColumnName&&"SponsorPassport"!=s.DBColumnName&&"License"!=s.DBColumnName&&"LicenseIssuedBy"!=s.DBColumnName||(e=s.Text,n.e.IsEmpty(e)&&(e="",null),t+=s.DBColumnName+"=N'"+e.replace("'","''")+"',"):s instanceof c.e?(e=s.SelectedValue,n.e.IsEmpty(e)&&(e=""),t+=s.DBColumnName+"=N'"+e+"',"):s instanceof g.c?s.Date&&(e=s.Date.ToString("dd/MMM/yyyy"),n.e.IsEmpty(e)&&(e=""),t+=s.DBColumnName+"='"+e+"',"):s instanceof g.a?(e=s.Date.ToString("dd/MMM/yyyy"),n.e.IsEmpty(e)&&(e=""),t+=s.DBColumnName+"=Convert(float,Convert(DateTime,'"+e+"')),"):s instanceof S.a&&(e=s.Text,n.e.IsEmpty(e)&&(e=""),t+=s.DBColumnName+"='"+e+"',"))})),t.toString()}}]),s}(o.b)},bwbx:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var i=s("3Pt+"),n=s("fXoL"),a=s("ofXK"),o=s("sYmb");function r(e,t){if(1&e){var s=n.ac();n.Zb(0,"div",7),n.Wc(1,"\n            "),n.Zb(2,"a",8),n.hc("click",(function(){n.Ic(s);var e=t.$implicit;return n.lc(2).obj.OnReportsLinkClick(e.DBColumnID)})),n.Wc(3),n.Yb(),n.Wc(4,"\n        "),n.Yb()}if(2&e){var i=t.$implicit;n.Db(3),n.Xc(i.Label)}}function l(e,t){if(1&e){var s=n.ac();n.Zb(0,"div",1),n.Wc(1,"\n    "),n.Zb(2,"div",2),n.Wc(3,"\n        "),n.Wc(4,"\n        "),n.Uc(5,r,5,1,"div",3),n.Wc(6,"\n    "),n.Yb(),n.Wc(7,"\n\n    "),n.Zb(8,"div",4),n.Wc(9,"\n        "),n.Zb(10,"div"),n.Wc(11,"\n            "),n.Zb(12,"button",5),n.hc("click",(function(){return n.Ic(s),n.lc().obj.OnSave("Cancel")})),n.Ub(13,"i",6),n.Wc(14),n.mc(15,"translate"),n.Yb(),n.Wc(16,"\n        "),n.Yb(),n.Wc(17,"\n    "),n.Yb(),n.Wc(18,"\n"),n.Yb()}if(2&e){var i=n.lc();n.Db(5),n.tc("ngForOf",i.obj.ReportsList),n.Db(9),n.Xc(n.nc(15,2,"Cancel"))}}var c=function(){var e=function(){function e(){_classCallCheck(this,e),this.form=new i.j({})}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Nb({type:e,selectors:[["app-reportslist"]],inputs:{obj:"obj"},decls:1,vars:1,consts:[["class","master-screen",4,"ngIf"],[1,"master-screen"],[1,"pagesection-noborder","row","form-row"],["class","form-group col-xl-12 col-md-12 col-sm-12 col-xs-12 PACTControl hlink",4,"ngFor","ngForOf"],[1,"Pactdailogfooter"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"],[1,"form-group","col-xl-12","col-md-12","col-sm-12","col-xs-12","PACTControl","hlink"],[3,"click"]],template:function(e,t){1&e&&n.Uc(0,l,19,4,"div",0),2&e&&n.tc("ngIf",t.obj.ReportInfoVisibility)},directives:[a.t,a.s],pipes:[o.d],styles:[""]}),e}()}}]);