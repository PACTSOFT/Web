(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{"4cRv":function(t,e,i){"use strict";i.r(e),i.d(e,"QuickAddBudgetViewModel",(function(){return h}));var s=i("Do2H"),a=i("ScVY"),l=i("JNtG"),o=i("EQd/"),u=i("0/4Q"),d=i("pZbb"),n=i("iiNn");class h extends a.b{constructor(t,e,i,a,d){super(),this.BudgetDefID=0,this.SelectedNodeID=0,this.ParentID=0,this.DataCollection=null,this.DetailButtonVisibility=!1,this.Name=new o.d(0),this.Status=new u.e(0),this.Group=new u.e(0),this.DataCollection=new l.a,this.BudgetDefID=t,this.DataCollection.isGroup=a,this.SelectedNodeID=e,this.parent=i,this.ParentID=d,this.Status.Items.push(u.d.ComboBoxItems_2(s.a.GetResource("Budget_InActive"),"0")),this.Status.Items.push(u.d.ComboBoxItems_2(s.a.GetResource("Budget_Active"),"1")),this.Status.SelectedValue="1",this.DetailButtonVisibility=!a,this.Title=s.a.GetResource(a?t>0?"Budget_EditGroup":"Budget_AddGroup":t>0?"Budget_EditBudget":"Budget_AddBudget"),this.Name.Label=s.a.GetResource("Budget_Name"),this.Status.Label=s.a.GetResource("Budget_Status"),this.Group.Label=s.a.GetResource("Budget_Group");let n=this.DataCollection.GetBudgetScreenDetails(0,0);if(n.Tables.length>1&&n.Tables[1].length>0)for(let s=0;s<n.Tables[1].length;s++)this.Group.Items.push(u.d.ComboBoxItems_2(n.Tables[1][s].BudgetName.toString(),n.Tables[1][s].BudgetDefID.toString()));this.Group.SelectedValue=this.ParentID.toString(),"0"==this.SelectedNodeID.toString()&&(this.Group.SelectedValue="1");let h=this.DataCollection.GetBudgetScreenDetails(0,this.BudgetDefID);t>0&&(this.Name.Text=h.Tables[0][0].BudgetName.toString(),this.Status.SelectedValue=h.Tables[0][0].StatusID.toString(),this.DataCollection.NumDimensions=parseInt(h.Tables[0][0].NumDimensions))}OnSaveBudget(t){if("Cancel"==t.toString())this.parent.AddEditBudgetVisibility=!1,this.parent.DetailsVisibility=!0;else if("Save"==t.toString()){if(""==this.Name.Text||null==this.Name.Text)return void(this.DisplayMessage="Enter Name");this.DataCollection.BudgetName=this.Name.Text,this.DataCollection.StartYear=Date.Today(),this.DataCollection.Status=parseInt(this.Status.SelectedValue),this.DataCollection.Budgetid=this.BudgetDefID,this.DataCollection.BudgetTypeID=parseInt("0"),this.DataCollection.BudgetType="Annual",this.DataCollection.SelectedNodeID=this.SelectedNodeID;let t=this.DataCollection.SaveBudgetScreenDetails();this.DisplayMessage=t.Message,t.RetValue>0&&(this.Name.Text="",this.Status.SelectedValue="1",this.parent.Refresh())}else{let t=new d.AddEditBudgetViewModel(this.BudgetDefID,this.SelectedNodeID,this.DataCollection.isGroup,this.ParentID);s.a.page.addNewTab({title:this.ScreenName,component:n.AddEditBudgetComponent,params:{obj:t}})}}}}}]);