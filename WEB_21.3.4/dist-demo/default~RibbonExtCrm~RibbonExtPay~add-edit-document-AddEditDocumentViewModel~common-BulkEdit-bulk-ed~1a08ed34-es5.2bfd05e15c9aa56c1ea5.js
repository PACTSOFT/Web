function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,s=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(s,arguments,i)}else n=s.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{BUEH:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var s=n("3Pt+"),i=n("fXoL");function o(e,t){1&e&&i.Ub(0,"app-pact-tree",20),2&e&&i.tc("obj",t.$implicit)}function a(e,t){if(1&e&&(i.Zb(0,"div",18),i.Wc(1,"\n                    "),i.Uc(2,o,1,1,"app-pact-tree",19),i.Wc(3,"\n                "),i.Yb()),2&e){var n=i.lc();i.Db(2),i.tc("ngForOf",n.obj.tree)}}function r(e,t){if(1&e){var n=i.ac();i.Zb(0,"div"),i.Wc(1,"\n                "),i.Zb(2,"div",4),i.Wc(3,"\n                    "),i.Zb(4,"div",21),i.Wc(5,"\n                        "),i.Vb(6,6),i.Wc(7,"\n                    "),i.Yb(),i.Wc(8,"\n                "),i.Yb(),i.Wc(9,"\n                "),i.Zb(10,"div",4),i.Wc(11,"\n                    "),i.Zb(12,"div",21),i.Wc(13,"\n                        "),i.Vb(14,6),i.Wc(15,"\n                    "),i.Yb(),i.Wc(16,"\n                "),i.Yb(),i.Wc(17,"\n                "),i.Zb(18,"div",22),i.Wc(19,"\n\n                    "),i.Zb(20,"div",23),i.Wc(21,"\n                        "),i.Zb(22,"input",24),i.hc("change",(function(){i.Ic(n);var e=i.lc();return e.obj.rBtnPostAttDocs=!e.obj.rBtnPostAttDocs})),i.Yb(),i.Wc(23,"\n                        "),i.Zb(24,"label",25),i.hc("click",(function(){return i.Ic(n),i.lc().obj.rBtnPostAttDocs=!0})),i.Wc(25),i.mc(26,"translate"),i.Yb(),i.Wc(27,"\n                    "),i.Yb(),i.Wc(28,"\n                    "),i.Zb(29,"div",23),i.Wc(30,"\n                        "),i.Zb(31,"input",24),i.hc("change",(function(){i.Ic(n);var e=i.lc();return e.obj.rBtnPostTimeSheetDocs=!e.obj.rBtnPostTimeSheetDocs})),i.Yb(),i.Wc(32,"\n                        "),i.Zb(33,"label",25),i.hc("click",(function(){return i.Ic(n),i.lc().obj.rBtnPostTimeSheetDocs=!0})),i.Wc(34),i.mc(35,"translate"),i.Yb(),i.Wc(36,"\n                    "),i.Yb(),i.Wc(37,"\n                "),i.Yb(),i.Wc(38,"\n\n              \n              \n\n            "),i.Yb()}if(2&e){var s=i.lc();i.Db(6),i.tc("obj",s.obj.FromDatePicker)("group",s.form),i.Db(8),i.tc("obj",s.obj.ToDatePicker)("group",s.form),i.Db(8),i.tc("checked",s.obj.rBtnPostAttDocs)("value",s.obj.rBtnPostAttDocs),i.Db(3),i.Xc(i.nc(26,10,"Post Attendance Documents")),i.Db(6),i.tc("checked",s.obj.rBtnPostTimeSheetDocs)("value",s.obj.rBtnPostTimeSheetDocs),i.Db(3),i.Xc(i.nc(35,12,"Post Time Sheet Documents"))}}function l(e,t){if(1&e&&(i.Zb(0,"div",4),i.Wc(1,"\n                "),i.Zb(2,"div",21),i.Wc(3,"\n                    "),i.Vb(4,6),i.Wc(5,"\n                "),i.Yb(),i.Wc(6,"\n            "),i.Yb()),2&e){var n=i.lc();i.Db(4),i.tc("obj",n.obj.PaymentModes)("group",n.form)}}function c(e,t){if(1&e&&(i.Zb(0,"div",4),i.Wc(1,"\n                "),i.Zb(2,"div",21),i.Wc(3,"\n                    "),i.Vb(4,6),i.Wc(5,"\n                "),i.Yb(),i.Wc(6,"\n            "),i.Yb()),2&e){var n=i.lc();i.Db(4),i.tc("obj",n.obj.StatusModes)("group",n.form)}}function d(e,t){if(1&e&&(i.Xb(0),i.Wc(1,"\n                            "),i.Vb(2,26),i.Wc(3,"\n                        "),i.Wb()),2&e){var n=t.$implicit,s=i.lc();i.Db(2),i.tc("obj",n)("group",s.form)}}var h=function(){var e=function(){function e(){_classCallCheck(this,e),this.form=new s.j({})}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Nb({type:e,selectors:[["app-emp-tree-filter"]],inputs:{obj:"obj"},decls:56,vars:14,consts:[[2,"margin","auto","padding","10px","max-width","1100px"],[1,"page-subheader"],[1,"page-subtitle",2,"padding-top","8px"],[1,"rptfilter",2,"display","flex"],[1,"form-group"],[1,"row","form-row","PACTControl",2,"margin-top","4px","padding-left","8px !important"],["FieldDirective","",3,"obj","group"],[1,"row","form-row"],["class","form-group PACTControl","style","width:450px;",4,"ngIf"],[4,"ngIf"],["class","form-group",4,"ngIf"],[1,"RptPreference","row","form-row"],[2,"overflow","auto","max-height","550px","width","320px"],[4,"ngFor","ngForOf"],[1,"btnMetroDiv","secondary-btn-group",2,"padding-top","8px","height","42px"],[1,"primary-btn-wicon",3,"click"],[1,"secondary-btn",3,"click"],[1,"fa-light","fa-rectangle-xmark"],[1,"form-group","PACTControl",2,"width","450px"],[3,"obj",4,"ngFor","ngForOf"],[3,"obj"],[1,"row","form-row","PACTControl"],[1,"form-group","PACTControl"],[1,"form-group","divRadio"],["type","radio","name","secondary-btn-wiconTypes",3,"checked","value","change"],[1,"input_cntrl_label",3,"click"],["ScreenDirective","",3,"obj","group"]],template:function(e,t){1&e&&(i.Zb(0,"div",0),i.Wc(1,"\n    "),i.Zb(2,"div",1),i.Wc(3,"\n        "),i.Zb(4,"span",2),i.Wc(5),i.Yb(),i.Wc(6,"\n      \n    "),i.Yb(),i.Wc(7,"\n    "),i.Zb(8,"div",3),i.Wc(9,"\n        "),i.Zb(10,"div",4),i.Wc(11,"\n            "),i.Zb(12,"div",5),i.Wc(13,"\n                "),i.Vb(14,6),i.Wc(15,"\n            "),i.Yb(),i.Wc(16,"\n            "),i.Zb(17,"div",7),i.Wc(18,"\n                "),i.Uc(19,a,4,1,"div",8),i.Wc(20,"\n            "),i.Yb(),i.Wc(21,"\n        "),i.Yb(),i.Wc(22,"\n\n        "),i.Zb(23,"div"),i.Wc(24,"\n            "),i.Uc(25,r,39,14,"div",9),i.Wc(26,"\n            "),i.Uc(27,l,7,2,"div",10),i.Wc(28,"\n            "),i.Uc(29,c,7,2,"div",10),i.Wc(30,"\n            "),i.Zb(31,"div",4),i.Wc(32,"\n                "),i.Zb(33,"div",11),i.Wc(34,"\n                    "),i.Zb(35,"div",12),i.Wc(36,"\n                        "),i.Uc(37,d,4,2,"ng-container",13),i.Wc(38,"\n                    "),i.Yb(),i.Wc(39,"\n\n                "),i.Yb(),i.Wc(40,"\n            "),i.Yb(),i.Wc(41,"\n        "),i.Yb(),i.Wc(42,"\n    "),i.Yb(),i.Wc(43,"\n    "),i.Zb(44,"div",14),i.Wc(45,"\n        "),i.Zb(46,"button",15),i.hc("click",(function(){return t.obj.Button_Click("Ok")})),i.Wc(47),i.mc(48,"translate"),i.Yb(),i.Wc(49,"\n        "),i.Zb(50,"button",16),i.hc("click",(function(){return t.obj.Button_Click("Cancel")})),i.Ub(51,"i",17),i.Wc(52),i.mc(53,"translate"),i.Yb(),i.Wc(54,"\n    "),i.Yb(),i.Wc(55,"\n"),i.Yb()),2&e&&(i.Db(5),i.Yc("\n            ",t.obj.Title,"\n        "),i.Db(9),i.tc("obj",t.obj.CostCenters)("group",t.form),i.Db(5),i.tc("ngIf",t.obj.tree.length>0),i.Db(6),i.tc("ngIf",t.obj.PostAttTimeSheetFiltersVisibility),i.Db(2),i.tc("ngIf",t.obj.PaymentModeFiltersVisibility),i.Db(2),i.tc("ngIf",t.obj.StatusModeFiltersVisibility),i.Db(8),i.tc("ngForOf",t.obj.CostCenterFilters),i.Db(10),i.Xc(i.nc(48,10,"Com_OK")),i.Db(5),i.Xc(i.nc(53,12,"Cancel")))},encapsulation:2}),e}()},s7Y5:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var s=n("Do2H"),i=n("Lp6j"),o=n("JIg3"),a=n("0/4Q"),r=n("8iaB"),l=n("/G+I"),c=n("6z9j"),d=n("4HhE"),h=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,i,r){var l;return _classCallCheck(this,n),(l=t.call(this)).ProfileID=0,l.Filter=0,l.Mode="",l.DeletedIDs=new Array,l.oChart={},l.DisplayName="",l.FromDatePicker=new o.a(0),l.ToDatePicker=new o.a(0),l.IsEdit=!1,l.IsEditFilter=!1,l.GenerateVisibility=!0,l.ColumnSpan="",l.PriceChartAtProduct=!1,l.PostAttTimeSheetFiltersVisibility=!1,l.rBtnPostAttDocs=!1,l.rBtnPostTimeSheetDocs=!1,l.Title="",l.PaymentModeFiltersVisibility=!1,l.StatusModeFiltersVisibility=!1,l.IsCompleted=!1,l.ProfileID=i,l.Filter=r,l.Mode=e,l.SetTitle(),l.MessageVisibility=!1,l.DisplayMessage="",l.tree=[],l.CostCenters=new a.e(0),l.CostCenters.Label=s.a.GetResource("SelectCostCenter"),l.CostCenters.LblWidth="140",l.CostCenterFilters=[],l.CostCenters.SelectionChangedCommand.Subscribe(_assertThisInitialized(l),"OnCostCenterChange"),l.FromDatePicker.Label="From Date",l.ToDatePicker.Label="To Date",10==l.Filter?(l.PostAttTimeSheetFiltersVisibility=!0,l.FromDatePicker.Date=l.ToDatePicker.Date=new Date,l.rBtnPostAttDocs=!0):l.PostAttTimeSheetFiltersVisibility=!1,l.PaymentModeFiltersVisibility=!1,l.InitControls(),l}return _createClass(n,[{key:"InitControls",value:function(){var e=new Array;e.push(50051);var t=s.a.empService.GetQueryData(0,"ETF001","","","");if(null!=t&&t.Tables[0].length>0)for(var n=0;n<t.Tables[0].length;n++)e.push(parseInt(t.Tables[0][n].CCIDs.toString()));this.CostCenters.Items.length>0&&this.CostCenters.Items.Clear();for(var i=s.a.inventory.GetTaxChart(0,this.ProfileID,""),o=0;o<i.Tables[0].length;o++)e.Contains(parseInt(i.Tables[0][o].ID))&&this.CostCenters.Items.push(a.d.ComboBoxItems_2(i.Tables[0][o].NAME.toString(),i.Tables[0][o].ID.toString()));1==this.Filter?(this.CostCenters.SelectedValue=s.a.SessionManager.Preferences.MonthlyPayrollFilter.toString(),this.CostCenters.Enable=!1):2==this.Filter?(this.CostCenters.SelectedValue=s.a.SessionManager.Preferences.PostPayrollFilter.toString(),this.CostCenters.Enable=!1,s.a.SessionManager.Preferences.ContainsKey("ShowPaymentModeselectionWhilePayrollProcessing")&&"True"==s.a.SessionManager.Preferences.ShowPaymentModeselectionWhilePayrollProcessing&&(this.PaymentModeFiltersVisibility=!0,this.PaymentModes=new a.e(0),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Default","Default")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Cash","Cash")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Cheque","Cheque")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Bank Transfer","Bank Transfer")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Demand Draft","Demand Draft")),this.PaymentModes.SelectedValue="Default",this.PaymentModes.Label="Payment Mode"),this.StatusModeFiltersVisibility=!0,this.StatusModes=new a.e(0),this.StatusModes.Items.push(a.d.ComboBoxItems_2("All","All")),this.StatusModes.Items.push(a.d.ComboBoxItems_2("Processed","Processed")),this.StatusModes.Items.push(a.d.ComboBoxItems_2("UnProcessed","UnProcessed")),this.StatusModes.SelectedValue="All",this.StatusModes.Label="Status"):3==this.Filter?(this.CostCenters.SelectedValue=s.a.SessionManager.Preferences.ConsolidatedPayrollFilter.toString(),this.CostCenters.Enable=!1,s.a.SessionManager.Preferences.ContainsKey("ShowPaymentModeselectionWhilePayrollProcessing")&&"True"==s.a.SessionManager.Preferences.ShowPaymentModeselectionWhilePayrollProcessing&&(this.PaymentModeFiltersVisibility=!0,this.PaymentModes=new a.e(0),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Default","Default")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Cash","Cash")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Cheque","Cheque")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Bank Transfer","Bank Transfer")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Demand Draft","Demand Draft")),this.PaymentModes.SelectedValue="Default",this.PaymentModes.Label="Payment Mode"),this.StatusModeFiltersVisibility=!0,this.StatusModes=new a.e(0),this.StatusModes.Items.push(a.d.ComboBoxItems_2("All","All")),this.StatusModes.Items.push(a.d.ComboBoxItems_2("Processed","Processed")),this.StatusModes.Items.push(a.d.ComboBoxItems_2("UnProcessed","UnProcessed")),this.StatusModes.SelectedValue="All",this.StatusModes.Label="Status"):4==this.Filter?(this.CostCenters.SelectedValue=s.a.SessionManager.Preferences.PayslipFilter.toString(),this.PaymentModeFiltersVisibility=!0,this.PaymentModes=new a.e(0),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("All","All")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Cash","Cash")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Cheque","Cheque")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Bank Transfer","Bank Transfer")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Demand Draft","Demand Draft")),this.PaymentModes.SelectedValue="All",this.PaymentModes.Label="Payment Mode"):5==this.Filter?(this.CostCenters.SelectedValue=s.a.SessionManager.Preferences.DailyAttendanceFilter.toString(),this.CostCenters.Enable=!1):6==this.Filter?(this.CostCenters.SelectedValue="50053",this.CostCenters.Enable=!0,this.btnOK_Click()):0==this.Filter?(this.CostCenters.Enable=!1,this.IsCompleted=!0):10==this.Filter?(this.CostCenters.SelectedValue="50051",this.CostCenters.Enable=!0,this.btnOK_Click()):11==this.Filter?(this.CostCenters.SelectedValue="50051",this.CostCenters.Enable=!0):(this.CostCenters.SelectedValue="50051",this.CostCenters.Enable=!0,this.btnOK_Click()),this.OnCostCenterChange(null)}},{key:"SetTitle",value:function(){this.ScreenName=s.a.GetResource("EmployeeFilter"),this.Title=this.ScreenName,this.DisplayName=this.ScreenName}},{key:"Button_Click",value:function(e){if("Ok"==e){if(10==this.Filter){if(this.FromDatePicker.Date.Date>this.ToDatePicker.Date.Date)return this.DisplayMessage="From Date should be less than or equal to To Date",void(this.MessageVisibility=!0);if(!this.rBtnPostAttDocs&&!this.rBtnPostTimeSheetDocs)return this.DisplayMessage="Select any document type to post.",void(this.MessageVisibility=!0)}this.btnOK_Click()}else"Cancel"==e&&this.btnCancel_Click()}},{key:"btnCancel_Click",value:function(){this.IsCompleted=!1,s.a.page.HideDialog()}},{key:"btnOK_Click",value:function(){this.IsCompleted=!0,s.a.page.HideDialog()}},{key:"LoadEditData",value:function(){var e=1,t="",n="";this.CostCenterFilters.forEach((function(s){if(s.CostCenterID>5e4&&(e=2,t="NodeID",n="T.CCNID"+(s.CostCenterID-5e4)),s.SelectedNodes.length>0){if(1==s.SelectedNodes.length)" AND ",n+"="+s.SelectedNodes[0].Id;else if(null==s.SelectedNodes.find((function(t){return t.Id==e&&1==t.IsGroup})))if(" AND ",l.IPrefetchFilter.IsGroupTree(s)){for(var o="",a=0;a<s.SelectedNodes.length;a++)null!=s.SelectedNodes[a].Parent&&s.SelectedNodes[a].Parent.IsSelected||(o.length>0&&(o+=","),o+=s.SelectedNodes[a].Id);0==o.length&&(o+=-12912),n+" IN "," (select T."+t+" GTID from ",i.e.GetTagTableName(s.CostCenterID)+" T with(nolock),",i.e.GetTagTableName(s.CostCenterID)+" GTP with(nolock) where T.lft BETWEEN GTP.lft AND GTP.rgt AND GTP."+t+" IN ",o.toString()+")  group by T."+t+")"}else{n+" IN (";for(var r=0;r<s.SelectedNodes.length;r++)r>0&&",",s.SelectedNodes[r].Id;")"}}else s.DeleteButtonVisibility||(" AND ",n+"=-12912")}))}},{key:"OnCostCenterChange",value:function(e){var t=this;if(!i.e.IsEmpty(this.CostCenters.SelectedValue)){var n=this.CostCenters.Items.find((function(e){return e.Value==t.CostCenters.SelectedValue}));if(null!=n&&(this.CostCenters.SelectedItem=n),0==this.tree.length||this.tree[0].CostCenterID!=parseInt(this.CostCenters.SelectedValue)){var s=0;null==this.CostCenters.SelectedItem||i.e.IsEmpty(this.CostCenters.SelectedItem.Parent)||(s=i.e.Int(this.CostCenters.SelectedItem.Parent)),this.LoadCostCenterTree(parseInt(this.CostCenters.SelectedValue),s,0,null)}}}},{key:"LoadCostCenterTree",value:function(e,t,n,o){this.tree.Clear();var a,r="";if(50002==e&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()&&"True"==s.a.SessionManager.Preferences["LW Reports"]&&(r=i.e.IsEmpty(s.a.SessionManager.LocationWhere)?"a.NodeID IN (-1234)":"a.NodeID IN ("+s.a.SessionManager.LocationWhere+")"),null==o)for(var l=0;l<this.CostCenterFilters.length;l++){var h=this.CostCenterFilters[l];if(h.CostCenterID==e&&h.LookupTypeID==t){o=h.SelectedNodes;break}}var u=new c.a;null==o?(u.TreeViewModel_5(e,this,n,r,""),a=u):(u.TreeViewModel_6(e,this,n,r,o,""),a=u),a.LookupTypeID=t,a.HeaderVisiblity=!1,a.btnFilterVisibility=!0,a.OnNodeSelected||(a.OnNodeSelected=new d.b,a.OnNodeSelected.Subscribe(this,"OnNodeSelected")),this.tree.push(a)}}]),n}(r.a)},y4Z9:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var s=n("Do2H"),i=n("Lp6j"),o=n("vTM8"),a=function(){function e(t){_classCallCheck(this,e),this.IsHoliday=!1,this.IsWeeklyOff=!1,this.IsHolidayMast=!1,this.dsWOffData={Tables:[]},this.dsHMData={Tables:[]},this.dsWOffDataDict=new o.a,this.dsHMDataDict=new o.a,this.dtEmpData=null,this.ScreenObject=t}return _createClass(e,[{key:"filterResult",value:function(e,t,n){var s=[];s=n;for(var o="",a=0;a<e.length;a++)null!=e[a]&&""!=e[a]&&(o="dcCCNID"+(parseInt(e[a])-5e4),s=i.e.IsEmpty(t[o+"_Key"])?s.filter((function(e){return 1==e[o]})):s.filter((function(e){return e[o]==t[o+"_Key"].toString()||1==e[o]})));return s}},{key:"CheckIsHolidayDate",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.IsHoliday=this.IsWeeklyOff=this.IsHolidayMast=!1;var r="",l=!1;if(s.a.SessionManager.Preferences.ContainsKey("WeeklyOffsDefBasedOn")&&""!=s.a.SessionManager.Preferences.WeeklyOffsDefBasedOn){var c=s.a.SessionManager.Preferences.WeeklyOffsDefBasedOn.split(",");if(null!=c&&c.length>0){for(var d=" 1=1 ",h="",u=0;u<c.length;u++)null!=c[u]&&""!=c[u]&&(h="dcCCNID"+(parseInt(c[u])-5e4),i.e.IsEmpty(n[h+"_Key"])?d+=" AND "+h+"=1":d+=" AND ( "+h+"="+n[h+"_Key"].toString()+" OR "+h+"=1 )");if(d.length>0){r=new Date(t).ToString("ddMMMyyyy")+"_"+d.Replace(" ","");var f=null;if(o){if(null!=a&&a.Tables.length>3){var y=a.Tables[3];" 1=1 "!=d?y=(y=this.filterResult(c,n,y)).filter((function(e){return e.WEFDate<=new Date(t).ToString("dd/MMM/yyyy")})):y=y.filter((function(e){return e.WEFDate<=new Date(t).ToString("dd/MMM/yyyy")})),null!=y&&y.length>0&&(f=y)}}else null!=this.dsWOffDataDict&&this.dsWOffDataDict.length>0&&this.dsWOffDataDict.ContainsKey(r)&&(l=!0),l?f=this.dsWOffDataDict[r]:(f=s.a.common.GetDataSet3("PAY053",t,d).Tables[0],this.dsWOffDataDict.push(r,f));if(null!=f&&f.length>0){var b,D,C,m={PayrollMonth:b,PayrollMonthStart:D,PayrollMonthEnd:C};if(i.e.SetPayrollDate(new Date(t),m),b=m.PayrollMonth,D=m.PayrollMonthStart,C=m.PayrollMonthEnd,i.e.CheckIsWeeklyOffFromDef(new Date(t),D,C,f)){if(this.IsHoliday=!0,s.a.SessionManager.Preferences.ContainsKey("HolidaysBasedOn")&&""!=s.a.SessionManager.Preferences.HolidaysBasedOn&&(null!=(c=s.a.SessionManager.Preferences.HolidaysBasedOn.split(","))&&c.length>0)){d=" 1=1 ",h="";for(var g=0;g<c.length;g++)null!=c[g]&&""!=c[g]&&(h="dcCCNID"+(parseInt(c[g])-5e4),i.e.IsEmpty(n[h+"_Key"])?d+=" AND "+h+"=1":d+=" AND ( "+h+"="+n[h+"_Key"].toString()+" OR "+h+"=1 )");if(d.length>0){r=new Date(t).ToString("ddMMMyyyy")+"_"+d.Replace(" ","");var p=null;if(l=!1,o){if(null!=a&&a.Tables.length>4){var M=a.Tables[4];" 1=1 "!=d?M=(M=this.filterResult(c,n,M)).filter((function(e){return e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy")})):M=M.filter((function(e){return e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy")})),null!=M&&M.length>0&&(p=M)}}else null!=this.dsHMDataDict&&this.dsHMDataDict.length>0&&this.dsHMDataDict.ContainsKey(r)&&(l=!0),l?p=this.dsHMDataDict[r]:(p=s.a.common.GetDataSet3("PAY054",t,d).Tables[0],this.dsHMDataDict.push(r,p));null!=p&&p.length>0&&(this.IsHoliday=!0,this.IsHolidayMast=!0)}}this.IsHolidayMast||(this.IsWeeklyOff=!0)}else if(s.a.SessionManager.Preferences.ContainsKey("HolidaysBasedOn")&&""!=s.a.SessionManager.Preferences.HolidaysBasedOn&&(null!=(c=s.a.SessionManager.Preferences.HolidaysBasedOn.split(","))&&c.length>0)){d=" 1=1 ",h="";for(var S=0;S<c.length;S++)null!=c[S]&&""!=c[S]&&(h="dcCCNID"+(parseInt(c[S])-5e4),i.e.IsEmpty(n[h+"_Key"])?d+=" AND "+h+"=1":d+=" AND ( "+h+"="+n[h+"_Key"].toString()+" OR "+h+"=1 )");if(d.length>0){r=new Date(t).ToString("ddMMMyyyy")+"_"+d.Replace(" ","");var P=null;if(l=!1,o){if(null!=a&&a.Tables.length>4){var I=a.Tables[4];" 1=1 "!=d?I=(I=this.filterResult(c,n,I)).filter((function(e){return e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy")})):I=I.filter((function(e){return e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy")})),null!=I&&I.length>0&&(P=I)}}else null!=this.dsHMDataDict&&this.dsHMDataDict.length>0&&this.dsHMDataDict.ContainsKey(r)&&(l=!0),l?P=this.dsHMDataDict[r]:(P=s.a.common.GetDataSet3("PAY055",t,d).Tables[0],this.dsHMDataDict.push(r,P));null!=P&&P.length>0&&(this.IsHoliday=!0,this.IsHolidayMast=!0)}}}else this.CheckWeeklyOffsAtPrefAndMaster(e,new Date(t),n,o,a)}}}else this.CheckWeeklyOffsAtPrefAndMaster(e,new Date(t),n,o,a);n.PayrollType=this.IsHoliday?this.IsWeeklyOff?"WeeklyOff":"Holiday":"",null!=this.ScreenObject&&67==this.ScreenObject.DocumentType&&(this.ScreenObject.GridDataColumns.Contains("dcAlpha15")&&(n.dcAlpha15=n.PayrollType),this.ScreenObject.GridDataColumns.Contains("dcNum2")&&this.IsHoliday&&(this.IsWeeklyOff?s.a.SessionManager.Preferences.ContainsKey("Pick-1inNormalWorkingHoursforWeeklyOffsinDailyAttendance")&&"True"==s.a.SessionManager.Preferences["Pick-1inNormalWorkingHoursforWeeklyOffsinDailyAttendance"]&&(n.dcNum2="-1"):s.a.SessionManager.Preferences.ContainsKey("Pick-2inNormalWorkingHoursforHolidaysinDailyAttendance")&&"True"==s.a.SessionManager.Preferences["Pick-2inNormalWorkingHoursforHolidaysinDailyAttendance"]&&(n.dcNum2="-2"))),null!=this.ScreenObject&&62!=this.ScreenObject.DocumentType&&99!=this.ScreenObject.DocumentType&&97!=this.ScreenObject.DocumentType&&(this.ScreenObject.GridDataColumns.Contains("Row_Background")||this.ScreenObject.GridDataColumns.push("Row_Background"),n.Row_Background="WeeklyOff"==n.PayrollType.toString()?"#F77B7E":"Holiday"==n.PayrollType.toString()?"#40C8B7":"#FFFFFF")}},{key:"CheckWeeklyOffsAtPrefAndMaster",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r="",l="";null==this.dtEmpData&&(this.dtEmpData=s.a.common.GetDataSet("PAY002","").Tables[0]);var c=this.dtEmpData.filter((function(t){return t.NodeID==e}));if(r=null!=c&&c.length>0&&"NONE"!=c[0].WeeklyOff1.toString().toUpperCase()?c[0].WeeklyOff1.toString():s.a.SessionManager.Preferences.WeeklyOff1.toString(),null!=c&&c.length>0&&"NONE"!=c[0].WeeklyOff2.toString().toUpperCase()?c[0].WeeklyOff2.toString().toUpperCase()!=r.toUpperCase()&&(l=c[0].WeeklyOff2.toString()):l=s.a.SessionManager.Preferences.WeeklyOff2.toString(),t.getDay().toString()==r||t.getDay().toString()==l){if(this.IsHoliday=!0,s.a.SessionManager.Preferences.ContainsKey("HolidaysBasedOn")&&""!=s.a.SessionManager.Preferences.HolidaysBasedOn){var d=s.a.SessionManager.Preferences.HolidaysBasedOn.split(",");if(null!=d&&d.length>0){for(var h=" 1=1 ",u="",f=0;f<d.length;f++)null!=d[f]&&""!=d[f]&&(u="dcCCNID"+(parseInt(d[f])-5e4),i.e.IsEmpty(n[u+"_Key"])?h+=" AND "+u+"=1":h+=" AND ( "+u+"="+n[u+"_Key"].toString()+" OR "+u+"=1 )");if(h.length>0){var y=t.ToString("ddMMMyyyy")+"_"+h.Replace(" ",""),b=null,D=!1;if(o){if(null!=a&&a.Tables.length>4){var C=a.Tables[4];" 1=1 "!=h?C=(C=this.filterResult(d,n,C)).filter((function(e){return e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy")})):C=C.filter((function(e){return e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy")})),null!=C&&C.length>0&&(b=C)}}else null!=this.dsHMDataDict&&this.dsHMDataDict.length>0&&this.dsHMDataDict.ContainsKey(y)&&(D=!0),D?b=this.dsHMDataDict[y]:(b=s.a.common.GetDataSet3("PAY056",new Date(t).ToString("dd MMM yyyy"),h).Tables[0],this.dsHMDataDict.push(y,b));null!=b&&b.length>0&&(this.IsHoliday=!0,this.IsHolidayMast=!0)}}}this.IsHolidayMast||(this.IsWeeklyOff=!0)}else if(s.a.SessionManager.Preferences.ContainsKey("HolidaysBasedOn")&&""!=s.a.SessionManager.Preferences.HolidaysBasedOn){var m=s.a.SessionManager.Preferences.HolidaysBasedOn.split(",");if(null!=m&&m.length>0){for(var g=" 1=1 ",p="",M=0;M<m.length;M++)null!=m[M]&&""!=m[M]&&(p="dcCCNID"+(parseInt(m[M])-5e4),i.e.IsEmpty(n[p+"_Key"])?g+=" AND "+p+"=1":g+=" AND ( "+p+"="+n[p+"_Key"].toString()+" OR "+p+"=1 )");if(g.length>0){var S=t.ToString("ddMMMyyyy")+"_"+g.Replace(" ",""),P=null,I=!1;if(o){if(null!=a&&a.Tables.length>4){var T=a.Tables[4];" 1=1 "!=g?T=(T=this.filterResult(m,n,T)).filter((function(e){return e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy")})):T=T.filter((function(e){return e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy")})),null!=T&&T.length>0&&(P=T.ToTable())}}else null!=this.dsHMDataDict&&this.dsHMDataDict.length>0&&this.dsHMDataDict.ContainsKey(S)&&(I=!0),I?P=this.dsHMDataDict[S]:(P=s.a.common.GetDataSet3("PAY057",new Date(t).ToString("dd MMM yyyy"),g).Tables[0],this.dsHMDataDict.push(S,P));null!=P&&P.length>0&&(this.IsHoliday=!0,this.IsHolidayMast=!0)}}}}}]),e}()}}]);