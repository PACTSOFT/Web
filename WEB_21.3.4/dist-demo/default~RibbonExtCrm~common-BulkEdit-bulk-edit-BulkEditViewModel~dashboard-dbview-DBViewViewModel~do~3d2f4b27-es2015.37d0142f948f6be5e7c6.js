(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{Q0PM:function(e,t,s){"use strict";s.r(t),s.d(t,"AddEditPropertyViewModel",(function(){return w})),s.d(t,"PropertyRoleUser",(function(){return G}));var i=s("mrSG"),a=s("Do2H"),n=s("Lp6j"),o=s("eQJW"),r=s("NkMH"),l=s("VxiT"),h=s("tCvu"),c=s("n56n"),d=s("EQd/"),u=s("0/4Q"),p=s("JIg3"),S=s("OvA8"),b=s("ockk"),g=s("8B8H");class m{constructor(e,t,s){this.Module="RENT",this.ClassName="PropertyUnitsViewModel",this.Visible=!0,this.contextVisible=!0,this.ds=null,this.PropertyID=0,this.SelectedNode=0,this.ColumnSpan="4",this.tempUnitsGrid1Cols=[],this.UnitsGrid1Obj=new g.a,this.SNO=1,Logger.InfoLog("PropertyUnitsViewModel::Entering PropertyUnitsViewModel With oParent="+e),this.ds=s,this.PropertyID=t,this.BuildTempDataTable(),Logger.InfoLog("PropertyUnitsViewModel::Leaving PropertyUnitsViewModel")}get angularGrid(){return this.UnitsGrid1Obj.angularGrid}get UnitsGrid1(){return this.UnitsGrid1Obj.Table}get UnitsGrid(){return this.UnitsGrid1Obj.Columns}set UnitsGrid(e){this.UnitsGrid1Obj.Columns=e}get PropertUnitColumns(){return this.UnitsGrid1Obj.TableColumns}get SelectedRow(){return this.UnitsGrid1Obj.SelectedItem}set SelectedRow(e){this.UnitsGrid1Obj.SelectedItem=e}BuildTempDataTable(){this.UnitsGrid1Obj=new g.a,this.tempUnitsGrid1Cols.push("Sno"),this.tempUnitsGrid1Cols.push("Type"),this.tempUnitsGrid1Cols.push("NodeID"),this.tempUnitsGrid1Cols.push("Numbers"),this.tempUnitsGrid1Cols.push("Rent");let e=[],t=new b.a;t=new b.a,t.DisplayMember="Sno",t.Header=a.a.GetResource("Sno"),t.DataType="TextBox",t.Width=50,t.IsVisible=!0,t.ReadOnly=!0,e.push(t),t=new b.a,t.ComboData=this.ds.Tables[11],t.DisplayMember="Type",t.ValueMember="NodeID",t.ValueBinding="NodeID",t.DataType="ComboBox",t.Header=a.a.GetResource("Units_Type"),t.Width=200,t.IsVisible=!0,e.push(t),t=new b.a,t.DisplayMember="Numbers",t.Header=a.a.GetResource("Units_Numbers"),t.DataType="INT",t.Width=100,t.IsVisible=!0,e.push(t),t=new b.a,t.DisplayMember="Rent",t.Header=a.a.GetResource("Units_Rent"),t.DataType="FLOAT",t.Width=100,t.IsVisible=!0,e.push(t),this.UnitsGrid=e;for(let s=0;s<10;s++)this.UnitsGrid1Obj.addEmptyRow()}OnCmnItem_Click(e){switch(Logger.InfoLog("PropertyUnitsViewModel::Entering OnCmnItem_Click"),e){case"DELETE":this.UnitsGrid1.length>0&&(this.UnitsGrid1Obj.removeRow(this.SelectedNode),this.UpdateSequence())}Logger.InfoLog("PropertyUnitsViewModel::Exiting OnCmnItem_Click")}UnitsGrid1_TableNewRow(e,t){this.UpdateSequence(),t.Row.Sno=this.SNO}UpdateSequence(){this.SNO=1,this.UnitsGrid1.forEach(e=>{e.Sno=this.SNO++})}GetXML(){Logger.InfoLog("PropertyUnitsViewModel::Entering GetXML");let e="";if(null!=this.UnitsGrid1&&this.UnitsGrid1.length>0){e+="<XML>";for(let t=0;t<this.UnitsGrid1.length;t++)n.e.StringIsNullOrEmpty(this.UnitsGrid1[t].NodeID)||(e+="<Row   ",e+=' PropertyID="'+this.PropertyID+'"',e+=' TypeID="1"',e+=' RowNo="'+(t+1)+'"',e+=' Type="'+this.UnitsGrid1[t].NodeID.toString()+'"',e+=' Numbers="'+n.e.String(this.UnitsGrid1[t].Numbers)+'"',e+=' Rent="'+n.e.String(this.UnitsGrid1[t].Rent)+'"',e+="/>");e.length>0&&(e+="</XML>")}return Logger.InfoLog("PropertyUnitsViewModel::Leaving GetXML Which Returns XML as"+e),e.toString()}Load(e){if(null!=e.Tables[9]&&e.Tables[9].length>0){let t=e.Tables[9];t=t.filter(e=>1==e.TypeID);for(let e=0;e<t.length;e++)this.UnitsGrid1Obj.addEmptyRow(),this.UnitsGrid1[e].NodeID=t[e].Type.toString(),this.UnitsGrid1[e].Numbers=t[e].Numbers.toString(),this.UnitsGrid1[e].Rent=t[e].Rent.toString()}}}class I{constructor(e,t,s){this.Module="RENT",this.ClassName="PropertyParkingViewModel",this.Visible=!0,this.contextVisible=!0,this.ds=null,this.PropertyID=0,this.SelectedNode=0,this.ColumnSpan="4",this.tempParkingGrid1Cols=[],this.ParkingGrid1Obj=new g.a,this.SNO=1,Logger.InfoLog("PropertyParkingViewModel::Entering PropertyParkingViewModel With oParent="+e),this.ds=s,this.PropertyID=t,this.BuildTempDataTable(),Logger.InfoLog("PropertyParkingViewModel::Leaving PropertyParkingViewModel")}get angularGrid(){return this.ParkingGrid1Obj.angularGrid}get ParkingGrid1(){return this.ParkingGrid1Obj.Table}get ParkingGrid(){return this.ParkingGrid1Obj.Columns}set ParkingGrid(e){this.ParkingGrid1Obj.Columns=e}get SelectedRow(){return this.ParkingGrid1Obj.SelectedItem}set SelectedRow(e){this.ParkingGrid1Obj.SelectedItem=e}BuildTempDataTable(){this.ParkingGrid1Obj=new g.a,this.tempParkingGrid1Cols.push("Sno"),this.tempParkingGrid1Cols.push("Type"),this.tempParkingGrid1Cols.push("NodeID"),this.tempParkingGrid1Cols.push("Numbers"),this.tempParkingGrid1Cols.push("Rent");let e=[],t=new b.a;t=new b.a,t.DisplayMember="Sno",t.Header=a.a.GetResource("Sno"),t.DataType="TextBox",t.Width=50,t.IsVisible=!0,t.ReadOnly=!0,e.push(t),t=new b.a,this.ds.Tables.length>16&&this.ds.Tables[16].length>0&&(t.ComboData=this.ds.Tables[16]),t.DisplayMember="Type",t.ValueMember="NodeID",t.ValueBinding="NodeID",t.DataType="ComboBox",t.Header=a.a.GetResource("Units_Type"),t.Width=200,t.IsVisible=!0,e.push(t),t=new b.a,t.DisplayMember="Numbers",t.Header=a.a.GetResource("Units_Numbers"),t.DataType="INT",t.Width=100,t.IsVisible=!0,e.push(t),t=new b.a,t.DisplayMember="Rent",t.Header=a.a.GetResource("Units_Rent"),t.DataType="FLOAT",t.Width=100,t.IsVisible=!0,e.push(t),this.ParkingGrid=e;for(let s=0;s<10;s++)this.ParkingGrid1Obj.addEmptyRow()}OnCmnItem_Click(e){switch(Logger.InfoLog("PropertyParkingViewModel::Entering OnCmnItem_Click"),e){case"DELETE":this.ParkingGrid1.length>0&&(this.ParkingGrid1.RemoveAt(this.SelectedNode),this.UpdateSequence())}Logger.InfoLog("PropertyParkingViewModel::Exiting OnCmnItem_Click")}ParkingGrid1_TableNewRow(e,t){this.UpdateSequence(),t.Row.Sno=this.SNO}UpdateSequence(){this.SNO=1,this.ParkingGrid1.forEach(e=>{e.Sno=this.SNO++})}GetXML(){Logger.InfoLog("PropertyParkingViewModel::Entering GetXML");let e="";if(null!=this.ParkingGrid1&&this.ParkingGrid1.length>0){e+="<XML>";for(let t=0;t<this.ParkingGrid1.length;t++)n.e.StringIsNullOrEmpty(this.ParkingGrid1[t].NodeID)||(e+="<Row   ",e+=' PropertyID="'+this.PropertyID+'"',e+=' TypeID="2"',e+=' RowNo="'+(t+1)+'"',e+=' Type="'+this.ParkingGrid1[t].NodeID.toString()+'"',e+=' Numbers="'+n.e.String(this.ParkingGrid1[t].Numbers)+'"',e+=' Rent="'+n.e.String(this.ParkingGrid1[t].Rent)+'"',e+="/>");e.length>0&&(e+="</XML>")}return Logger.InfoLog("PropertyParkingViewModel::Leaving GetXML Which Returns XML as"+e),e.toString()}Load(e){if(null!=e.Tables[9]&&e.Tables[9].length>0){let t=e.Tables[9];t=t.filter(e=>2==e.TypeID);for(let e=0;e<t.length;e++)this.ParkingGrid1Obj.addEmptyRow(),this.ParkingGrid1[e].NodeID=t[e].Type.toString(),this.ParkingGrid1[e].Numbers=t[e].Numbers.toString(),this.ParkingGrid1[e].Rent=t[e].Rent.toString()}}}var D=s("ScVY");class T{constructor(e,t){this.Module="RENT",this.ClassName="PropertyShareHolderViewModel",this.Visible=!0,this.contextVisible=!0,this.ShareHolderGrid=new g.a,this.ShareHolderGridCols=[],this.ColumnSpan="4",this.Parent=null,Logger.InfoLog("PropertyShareHolderViewModel::Entering PropertyShareHolderViewModel With oParent="+e),this.Parent=e,this.ShareHolderGrid=new g.a,this.ShareHolderGrid.Table=[],this.ShareHolderGrid.CanUserAddRows=!0,this.ShareHolderGrid.CanUserDeleteRows=!0,this.BuildTempDataTable(),Logger.InfoLog("PropertyShareHolderViewModel::Leaving PropertyShareHolderViewModel")}get angularGrid(){return this.ShareHolderGrid.angularGrid}BuildTempDataTable(){this.ShareHolderGrid.Clear(),this.ShareHolderGridCols.push("Account"),this.ShareHolderGridCols.push("Account_Key"),this.ShareHolderGridCols.push("Income"),this.ShareHolderGridCols.push("Expenses"),this.ShareHolderGridCols.push("OpIncome"),this.ShareHolderGridCols.push("OpExpenses");let e=[],t=new b.a;t=new b.a,t.CostCenterID=2,t.TypeID=2,t.DataType="LISTBOX",t.DisplayMember="Account",t.ValueMember="Account_Key",t.Header="Share Holder",t.Width=250,e.push(t),t=new b.a,t.DisplayMember="Income",t.Header="Income %",t.DataType="FLOAT",t.Width=100,t.ShowTotal=!0,t.IsCalculated=1,t.IsVisible=!0,t.DefaultValue="0",t.DecimalPoints=this.Parent.ShareDec>0?this.Parent.ShareDec.toString():a.a.SessionManager.Preferences.DecimalsinAmount,e.push(t),t=new b.a,t.DisplayMember="Expenses",t.Header="Expenses %",t.DataType="FLOAT",t.Width=100,t.ShowTotal=!0,t.IsCalculated=1,t.IsVisible=!0,t.DefaultValue="0",t.DecimalPoints=this.Parent.ShareDec>0?this.Parent.ShareDec.toString():a.a.SessionManager.Preferences.DecimalsinAmount,e.push(t),t=new b.a,t.DisplayMember="OpIncome",t.Header="Opening Income",t.DataType="FLOAT",t.Width=150,t.ShowTotal=!0,t.IsCalculated=1,t.IsVisible=!0,t.DefaultValue="0",t.DecimalPoints=this.Parent.ShareDec>0?this.Parent.ShareDec.toString():a.a.SessionManager.Preferences.DecimalsinAmount,e.push(t),t=new b.a,t.DisplayMember="OpExpenses",t.Header="Opening Expenses",t.DataType="FLOAT",t.Width=150,t.ShowTotal=!0,t.IsCalculated=1,t.IsVisible=!0,t.DefaultValue="0",t.DecimalPoints=this.Parent.ShareDec>0?this.Parent.ShareDec.toString():a.a.SessionManager.Preferences.DecimalsinAmount,e.push(t),this.ShareHolderGrid.Columns=e;for(let s=0;s<10;s++)this.ShareHolderGrid.addEmptyRow();this.ShareHolderGrid.ConstructFormulaFields(),this.ShareHolderGrid.OnCellEditEnding.Subscribe(this,"onCellEditEnding")}onCellEditEnding(e,t,s){this.ShareHolderGrid.UpdateTotals()}GetShareHolderXML(){Logger.InfoLog("PropertyShareHolderViewModel::Entering GetShareHolderXML");let e="";if(null!=this.ShareHolderGrid.Table&&this.ShareHolderGrid.Table.length>0){for(let t=0;t<this.ShareHolderGrid.Table.length;t++)n.e.StringIsNullOrEmpty(this.ShareHolderGrid.Table[t].Account_Key)||(e+="<Row   ",e+=' RowNo="'+(t+1)+'"',e+=' Account="'+this.ShareHolderGrid.Table[t].Account_Key.toString()+'"',e+=' Income="'+n.e.String(this.ShareHolderGrid.Table[t].Income)+'"',e+=' Expenses="'+n.e.String(this.ShareHolderGrid.Table[t].Expenses)+'"',e+=' OpIncome="'+n.e.String(this.ShareHolderGrid.Table[t].OpIncome)+'"',e+=' OpExpenses="'+n.e.String(this.ShareHolderGrid.Table[t].OpExpenses)+'"',e+="/>");e.length>0&&(e="<XML>"+e+"</XML>")}return Logger.InfoLog("PropertyShareHolderViewModel::Leaving GetShareHolderXML Which Returns XML as"+e),e.toString()}LoadData(e){Logger.InfoLog("PropertyShareHolderViewModel :: Entering LoadData With DataTable="+e);let t=0,s=e;for(this.ShareHolderGrid.Clear();t<s.length;t++){let i=this.ShareHolderGrid.NewRow();i.Account=s[t].AccountName.toString(),i.Account_Key=s[t].Account.toString(),null!=e[0].Income&&(i.Income=s[t].Income.toString()),null!=e[0].Expenses&&(i.Expenses=s[t].Expenses.toString()),null!=e[0].OpIncome&&(i.OpIncome=s[t].OpIncome.toString()),null!=e[0].OpExpenses&&(i.OpExpenses=s[t].OpExpenses.toString()),this.ShareHolderGrid.addRow(i)}for(;t<10;t++)this.ShareHolderGrid.addEmptyRow();this.ShareHolderGrid.UpdateTotals(),Logger.InfoLog("PropertyShareHolderViewModel::Exiting LoadBundles")}}var P=s("4k0m"),y=s("++IR"),C=s("bgvB"),A=s("wJuo"),R=s("x68t"),L=s("Jnyl"),V=s("Huqd"),f=s("bwbx"),N=s("c6C+"),O=s("RJs6");class w extends D.b{constructor(e,t,s){if(super(),this.CostCenterID=0,this.AttachmentVisibility=!1,this.ButtonSave=new r.a,this.PropertyID=0,this.ShareDec=0,this.SelectedNodeID=0,this.ds=null,this.ds1=null,this.PRT={},this.LocAccountant=!1,this.LocLandLord=!1,this.LocSalesman=!1,this.ScreenObject=new l.a,this.DisplayName="",this.Title="",this.ReportInfoVisibility=!0,this.ReportsList=[],this.DepositsTab=!1,this.UnitsTab=!1,this.ButtonCustomize=new r.a,this.Salesman=new c.b(26384),this.Accountant=new c.b(26385),this.Landlord=new c.b(26386),this.LocationProperty=new c.b(53523),this.ParkingTab=!1,this.TermsConditions=new d.c(26149),this.Code=new d.a(25542),this.Name=new d.d(25543),this.Group=new c.b(26394),this.Status=new u.e(25544),this.Type=new u.e(25545),this.Total=new d.d(25546),this.PlotArea=new d.d(25547),this.BuildUpArea=new d.d(25548),this.Owner=new u.e(25549),this.Address1=new d.d(25550),this.Address2=new d.d(25551),this.City=new d.d(25552),this.State=new d.d(25553),this.Zip=new d.d(25554),this.Country=new d.d(25555),this.BondNo=new d.d(25556),this.BondDate=new p.a(25557),this.BondType=new u.e(25558),this.TowerType=new u.e(27285),this.GPS=new d.d(27286),this.PropertyNo=new d.d(25559),this.PropertyPosition=new u.e(25560),this.PropertyCategory=new u.e(25561),this.Units=new d.d(25562),this.Parkings=new d.d(25563),this.Floors=new d.d(25564),this.ObjPropertyRoleUser=new G,this.FileID=0,this.IsPhotoDelete=!1,this.IsPhotoChanged=!1,this.Isgroup=!1,this.AccountPhoto="",this.PhotoTextVisibility=!1,this.guid="",this.FileExtension="",this.FileDescription="",this.ActualFileName="",this.NoteVisibility=!1,this.ErrorMessage="Missing Report Parameter ' ",this.IsLocationAv=!1,this.RetValue=0,this.CodePrefix="",this.CodeNumber=0,this.GroupSeqNoLength=0,e>0?a.a.SessionManager.HideUnathorizedAccess?this.ButtonSave.Visible=a.a.SessionManager.IsActionAssigned(92,"Update"):this.ButtonSave.Enable=a.a.SessionManager.IsActionAssigned(92,"Update"):a.a.SessionManager.HideUnathorizedAccess?this.ButtonSave.Visible=a.a.SessionManager.IsActionAssigned(92,"Create"):this.ButtonSave.Enable=a.a.SessionManager.IsActionAssigned(92,"Create"),a.a.SessionManager.HideUnathorizedAccess?this.ButtonCustomize.Visible=a.a.SessionManager.IsActionAssigned(92,"Customize"):this.ButtonCustomize.Enable=a.a.SessionManager.IsActionAssigned(92,"Customize"),this.CostCenterID=92,this.PRT.IsGroup=s,this.ScreenObject.LoadScreen_2(this,92),this.LoadImageDimensions(),this.PhotoTextVisibility=!0,this.LocationProperty.OnPactListBoxValueChanged.Subscribe(this,"onSelectionChangedCommand"),this.Landlord.OnPactListBoxValueChanged.Subscribe(this,"onSelectionChangedCommand"),this.ScreenObject.Data.Tables.length>4&&this.ScreenObject.Data.Tables[4].length>0){let e=this.ScreenObject.Data.Tables[4].filter(e=>"Salesman"==e.Name);e.length>0&&parseInt(e[0].Value)>0&&(this.Salesman.CCID=parseInt(e[0].Value)),e=this.ScreenObject.Data.Tables[4].filter(e=>"Accountant"==e.Name),e.length>0&&parseInt(e[0].Value)>0&&(this.Accountant.CCID=parseInt(e[0].Value)),e=this.ScreenObject.Data.Tables[4].filter(e=>"Landlord"==e.Name),e.length>0&&parseInt(e[0].Value)>0&&(this.Landlord.CCID=parseInt(e[0].Value)),e=this.ScreenObject.Data.Tables[4].filter(e=>"LocAccountant"==e.Name),e.length>0&&(this.LocAccountant=Object(o.j)(e[0].Value)),e=this.ScreenObject.Data.Tables[4].filter(e=>"LocLandLord"==e.Name),e.length>0&&(this.LocLandLord=Object(o.j)(e[0].Value)),e=this.ScreenObject.Data.Tables[4].filter(e=>"LocSalesman"==e.Name),e.length>0&&(this.LocSalesman=Object(o.j)(e[0].Value)),e=this.ScreenObject.Data.Tables[4].filter(e=>"ShareholderDec"==e.Name),e.length>0&&(this.ShareDec=parseInt(e[0].Value)),this.Accountant.TypeID=1,this.Landlord.TypeID=1,this.Salesman.TypeID=1}if(this.ScreenObject.Data.Tables.length>6&&u.e.FillComboWithDefaultOption(this.ScreenObject.Data.Tables[6],this.TowerType),null!=this.ScreenObject.Data&&this.ScreenObject.Data.Tables.length>7&&this.ScreenObject.Data.Columns[7].Contains("IsParentCodeInherited")&&this.ScreenObject.Data.Tables[7].length>0&&this.ScreenObject.InitAutoCode(this.ScreenObject.Data.Tables[7],this.PRT.IsGroup),this.ds=a.a.rental.GetProperty(e,0),this.PropertyID=e,this.PropertyShareHolder=new T(this,e),this.PropertyDeposits=new h.a(this,e,92),this.PropertyUnits=new m(this,this.PropertyID,this.ds),this.PropertyParking=new I(this,this.PropertyID,this.ds),this.ViewAttachments=new S.ViewAttachmentViewModel(this,a.a.SessionManager,a.a.admin),this.ViewNotes=new O.a(this,a.a.SessionManager,a.a.admin),this.LoadTabs(),this.ds.Tables[3].forEach(e=>{this.Status.Items.push(u.d.ComboBoxItems_2(e.Status.toString(),e.StatusID.toString())),this.Status.SelectedValue="422"}),this.LocationProperty.CCID=50002,this.LocationProperty.TypeID=1,u.e.FillComboWithDefaultOption(this.ds.Tables[4],this.PropertyPosition),u.e.FillComboWithDefaultOption(this.ds.Tables[12],this.BondType),u.e.FillComboWithDefaultOption(this.ds.Tables[5],this.PropertyCategory),u.e.FillComboWithDefaultOption(this.ds.Tables[6],this.Type),u.e.FillComboWithDefaultOption(this.ds.Tables[7],this.Owner),this.Group.SelectionChangedCommand.Subscribe(this,"OnGroupSelectionChanged"),0==e?(this.DisplayName=a.a.GetResource("RENTALSProperty_AddProperty"),this.Title=this.DisplayName,this.PRT.GUID="GUID",this.Group.SelectedValue=0!=t?t:2,this.AutoGenerateCode(),this.LoadParentData(),this.ScreenObject.CheckViewForUser(!1)):(this.DisplayName=a.a.GetResource("RENTALSProperty_EditProperty"),this.Title=this.DisplayName,this.LoadData(),this.PRT.GUID=this.ds.Tables[2][0].GUID.toString(),this.ObjPropertyRoleUser.SetUserRoles(this.ds),this.ScreenObject.IsAutoCode&&(this.Code.Enable=parseInt(this.ds.Tables[0][0].Depth)<=1&&!this.ScreenObject.IsRootAutoCode)),a.a.SessionManager.LocationID>0&&this.IsLocationAv&&(this.LocAccountant&&(this.Accountant.CustomWhere="   CC.CCNID2 IN ("+a.a.SessionManager.LocationID+") "),this.LocLandLord&&(this.Landlord.CustomWhere="   CC.CCNID2 IN ("+a.a.SessionManager.LocationID+") "),this.LocSalesman&&(this.Salesman.CustomWhere="  CC.CCNID2 IN ("+a.a.SessionManager.LocationID+") ")),a.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"true"==a.a.SessionManager.Preferences.EnableLocationWise.toString().toLowerCase()&&a.a.SessionManager.Preferences.ContainsKey("LW Property")&&"true"==a.a.SessionManager.Preferences["LW Property"].toString().toLowerCase()&&0!=this.LocationProperty.SelectedValue){let e=a.a.rental.GetLandLordLocation(0,this.LocationProperty.SelectedValue),t="";null!=e&&e.Tables.length>0&&e.Tables[0].length>0?(e.Tables[0].forEach(e=>{""!=t&&(t+=" , "),t+=e.ParentNodeID.toString()}),this.Landlord.CustomWhere=""!=t?" a.NodeID in ( "+t+") ":" a.NodeID = -1 "):this.Landlord.CustomWhere=" a.NodeID = -1 "}this.ReportView()}GetXML(){}OnShowNote(){}OnAddNote(){this.Note=new N.AddNoteViewModel,this.Note.AddNoteViewModel_2(this)}OnShowAttachment(){Logger.InfoLog("AddEditAccountScreenViewModel::Entering OnShowAttachment"),Logger.InfoLog("AddEditAccountScreenViewModel::Exiting OnShowAttachment")}OnAddAttachment(){Logger.InfoLog("AddEditAccountScreenViewModel::Entering AddAttachment"),Logger.InfoLog("AddEditAccountScreenViewModel::Exiting AddAttachment")}AddEditPropertyViewModel_1(){}ReportView(){this.ReportDimension=new c.b(0),this.ReportDimension.CCID=this.CostCenterID,this.ReportDimension.TypeID=1,this.ReportDimension.SelectedValue=this.PropertyID,this.ReportsList=[],this.ReportDimension.OnPactListBoxValueChanged.Subscribe(this,"OnReportsLinkClick");let e=[];null!=this.ScreenObject.Data&&this.ScreenObject.Data.Tables.length>8&&this.ScreenObject.Data.Tables[8].forEach(t=>{let s=new r.a;s.DBColumnID=parseInt(t.ReportID),s.Label=t.ReportName.toString(),this.ScreenObject.Data.Columns[8].Contains("Shortcut")&&(s.KeyTip=t.Shortcut.toString()),this.ScreenObject.Data.Columns[8].Contains("DisplayAsPopup")&&""!=t.DisplayAsPopup.toString()&&(s.Dependantinuse="1"==t.DisplayAsPopup.toString()),this.ScreenObject.Data.Columns[8].Contains("Width")&&""!=t.Width.toString()&&(s.Width=t.Width.toString()),this.ScreenObject.Data.Columns[8].Contains("Height")&&""!=t.Height.toString()&&(s.Length=t.Height.toString()),this.ScreenObject.Data.Columns[8].Contains("DocumentField")&&""!=t.DocumentField.toString()&&(s.Formula=t.DocumentField.toString()),this.ScreenObject.Data.Columns[8].Contains("mapxml")&&""!=t.mapxml.toString()&&(s.ToolTipDescription=t.mapxml.toString()),e.Contains(parseInt(t.ReportID))||(e.push(parseInt(t.ReportID)),this.ReportsList.push(s))})}OnReportsLinkClick(e){return Object(i.b)(this,void 0,void 0,(function*(){const{ReportViewModel:t}=yield Promise.all([s.e(2),s.e(1),s.e(3),s.e(5),s.e(4),s.e(6),s.e(7),s.e(10),s.e(9),s.e(8),s.e(12),s.e(11),s.e(13),s.e(19),s.e(15),s.e(21),s.e(20),s.e(16),s.e(14),s.e(18),s.e(17),s.e(22),s.e(23),s.e(24),s.e(25),s.e(28),s.e(30),s.e(29),s.e(32),s.e(31),s.e(27),s.e(26),s.e(35),s.e(37),s.e(38),s.e(36),s.e(33),s.e(34),s.e(39),s.e(40),s.e(41),s.e(212)]).then(s.bind(null,"ThYU")),{ReportViewComponent:i}=yield Promise.all([s.e(32),s.e(37)]).then(s.bind(null,"YU11"));let o,r={strXML:""},l=new t;if(this.ReportDimension.SelectedValue=this.PropertyID,this.DisplayMessage=this.GetReportFilterXML(e,r),o=r.strXML,0==this.DisplayMessage.length){var h=this.ReportsList.find(t=>t.DBColumnID==parseInt(e));if(null!=h&&h.Dependantinuse)l.ReportViewModel_Document(this.CostCenterID,o,parseInt(e),!0,null,null),!n.e.IsEmpty(h.Width)&&parseFloat(h.Width)>0&&(l.RptWidth=parseFloat(h.Width)),!n.e.IsEmpty(h.length)&&parseFloat(h.length)>0&&(l.RptHeight=parseFloat(h.length)),l.DocumentObject=this,a.a.page.HideDialog(),a.a.page.ShowDialog(l,i,{Title:"",HideClose:!0,ShowCenter:!0});else{let s=new t;s.ReportViewModel_Document(this.CostCenterID,o,parseInt(e),!1,null,null),s.DocumentObject=this,a.a.page.HideDialog(),a.a.page.addNewTab({component:i,params:{obj:s}})}}}))}GetReportFilterXML(e,t){let s="";t.strXML="";let i=this.ScreenObject.Data.Tables[8];i=i.filter(t=>t.ReportID==e);let a,n=!1;i.forEach(e=>{Object(o.j)(e.GroupLevel)&&(n=!0)}),s+="<XML",n&&(s+=' GroupLevel="1"'),s+=" >";for(let o=0;o<i.length;o++){a=i[o].ReportField.toString(),s+="<Row ",s+='ColID ="'+a+'" ';for(let e=0;e<this.ScreenObject.StaticFields.length;e++)if(this.ScreenObject.StaticFields[e].DBColumnID==parseInt(i[o].DocumentField.toString()))if(this.ScreenObject.StaticFields[e]instanceof d.d){if(""==this.ScreenObject.StaticFields[e].Text)return alert(this.ErrorMessage+this.ScreenObject.StaticFields[e].Label+" '"),"Empty Value";"SNO"==i[o].SysColumnName.toString()?s+='Value ="'+this.ReportDimension.SelectedValue+'" ':s+='Value ="'+this.ScreenObject.StaticFields[e].Text+'" '}else if(this.ScreenObject.StaticFields[e]instanceof L.a){if(""==this.ScreenObject.StaticFields[e].TextBox.Text||""==this.ScreenObject.StaticFields[e].ComboBox.SelectedValue)return alert(this.ErrorMessage+this.ScreenObject.StaticFields[e].Label+" '"),"Empty Value";s+='Value ="'+this.ScreenObject.StaticFields[e].ComboBox.SelectedValue+'" '}else if(this.ScreenObject.StaticFields[e]instanceof d.c){if(""==this.ScreenObject.StaticFields[e].Text)return alert(this.ErrorMessage+this.ScreenObject.StaticFields[e].Label+" '"),"Empty Value";s+='Value ="'+this.ScreenObject.StaticFields[e].Text+'" '}else if(this.ScreenObject.StaticFields[e]instanceof p.a||this.ScreenObject.StaticFields[e]instanceof p.d||this.ScreenObject.StaticFields[e]instanceof p.c){if(this.ScreenObject.StaticFields[e]instanceof p.a||this.ScreenObject.StaticFields[e]instanceof p.d){if(""==this.ScreenObject.StaticFields[e].Text)return alert(this.ErrorMessage+this.ScreenObject.StaticFields[e].Label+" '"),"Empty Value";s+='Value ="'+this.ScreenObject.StaticFields[e].Date.ToString("dd/MMM/yyyy")+'" '}else if(this.ScreenObject.StaticFields[e]instanceof p.c){if(!this.ScreenObject.StaticFields[e].Date)return alert(this.ErrorMessage+this.ScreenObject.StaticFields[e].Label+" '"),"Empty Value";s+='Value ="'+this.ScreenObject.StaticFields[e].Date.ToString("dd/MMM/yyyy")+'" '}}else if(this.ScreenObject.StaticFields[e]instanceof c.b){if(""==this.ScreenObject.StaticFields[e].Text)return alert(this.ErrorMessage+this.ScreenObject.StaticFields[e].Label+" '"),"Empty Value";s+='Value ="'+this.ScreenObject.StaticFields[e].SelectedValue+'" '}else if(this.ScreenObject.StaticFields[e]instanceof V.a){if(""==this.ScreenObject.StaticFields[e].Text)return alert(this.ErrorMessage+this.ScreenObject.StaticFields[e].Label+" '"),"Empty Value";s+='Value ="'+this.ScreenObject.StaticFields[e].SelectedValue+'" '}this.ScreenObject.CustomTab.Pages.forEach(e=>{e.Fields.forEach(e=>{if(null!=e&&(e instanceof d.d||e instanceof L.a||e instanceof d.c||e instanceof p.a||e instanceof p.d||e instanceof p.c||e instanceof c.b||e instanceof V.a)&&e.DBColumnID==parseInt(i[o].DocumentField.toString()))if(e instanceof d.d){if(""==e.Text)return alert(this.ErrorMessage+e.Label+" '"),"Empty Value";s+='Value ="'+e.Text+'" '}else if(e instanceof L.a){if(""==e.TextBox.Text||""==e.ComboBox.SelectedValue)return alert(this.ErrorMessage+e.Label+" '"),"Empty Value";s+='Value ="'+e.TextBox.Text+'" '}else if(e instanceof d.c){if(""==e.Text)return alert(this.ErrorMessage+e.Label+" '"),"Empty Value";s+='Value ="'+e.Text+'" '}else if(e instanceof p.a||e instanceof p.d||e instanceof p.c){if(e||e){if(""==e.Text)return alert(this.ErrorMessage+e.Label+" '"),"Empty Value";s+='Value ="'+e.Date.ToString("dd/MMM/yyyy")+'" '}else if(e instanceof p.c){if(!e.Date)return alert(this.ErrorMessage+e.Label+" '"),"Empty Value";s+='Value ="'+e.Date.ToString("dd/MMM/yyyy")+'" '}}else if(e instanceof c.b){if(""==e.Text&&0==e.SelectedValue)return alert(this.ErrorMessage+e.Label+" '"),"Empty Value";s+='Value ="'+e.SelectedValue+'" '}else if(e instanceof V.a){if(""==e.Text)return alert(this.ErrorMessage+e.Label+" '"),"Empty Value";s+='Value ="'+e.SelectedValue+'" '}})}),s+=" />"}return s+="</XML>",t.strXML=s.toString(),""}OnGroupSelectionChanged(e){null!=e&&("Group"==e.toString()||"PACT.COMMON.PactListBoxData"==e.toString()&&"IsGroup"==e.DBColumnName)&&this.Group.SelectedValue>0&&this.SelectedNodeID!=this.Group.SelectedValue&&(this.SelectedNodeID=this.Group.SelectedValue,this.Group.DefaultValue=this.Group.SelectedValue.toString(),this.AutoGenerateCode(),this.LoadParentData())}LoadParentData(){if(0!=this.PropertyID||0==this.Group.SelectedValue||this.Isgroup)return;let e=this.ScreenObject.Data.Tables[4].filter(e=>"Copygroupdatatonode"==e.Name);if(0==e.length||n.e.StringIsNullOrEmpty(e[0].Value)||!Object(o.j)(e[0].Value))return;let t=a.a.rental.GetEditProperty(this.Group.SelectedValue);if(0==t.Tables.length||0==t.Tables[0].length)return;let s=null,i=null,r=null;if(t.Tables.length>0&&t.Tables[0].length>0&&(s=t.Tables[0][0]),t.Tables.length>1&&t.Tables[1].length>0&&(i=t.Tables[1][0]),t.Tables.length>2&&t.Tables[2].length>0&&(r=t.Tables[2][0]),this.ScreenObject.FillParentData(s,i,r,["Code","Name","Group","IsGroup"]),e=this.ScreenObject.Data.Tables[4].filter(e=>"CopyGroupTabs"==e.Name),e.length>0&&""!=e[0].Value.toString()){let s=e[0].Value.toString().split(";");if(null!=s&&s.length>0)for(let i=0;i<s.length;i++)if(e=this.ScreenObject.Data.Tables[this.ScreenObject.Data.Tables.length-1].filter(e=>e.CCTabID=s[i]),e.length>0&&""!=e[0].CCTabName.toString())switch(e[0].CCTabName.toString()){case"Particulars":this.PropertyDeposits.FillParticulars(t.Tables[3]);break;case"Share Holder":case"Units":case"Parkings":break;case"Attachments":this.ViewAttachments.LoadAttachments(t.Tables[4])}}}LoadImageDimensions(){let e=new C.b;e.Column=3,e.RowSpan=4}onSelectionChangedCommand(e){if(a.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"true"==a.a.SessionManager.Preferences.EnableLocationWise.toString().toLowerCase()&&a.a.SessionManager.Preferences.ContainsKey("LW Property")&&"true"==a.a.SessionManager.Preferences["LW Property"].toString().toLowerCase())if("LocationProperty"==e.toString()||e instanceof c.b&&53523==e.DBColumnID)if(0!=this.LocationProperty.SelectedValue){let e=a.a.rental.GetLandLordLocation(0,this.LocationProperty.SelectedValue),t="";null!=e&&e.Tables.length>0&&e.Tables[0].length>0?(e.Tables[0].forEach(e=>{""!=t&&(t+=" , "),t+=e.ParentNodeID.toString()}),this.Landlord.CustomWhere=""!=t?" a.NodeID in ( "+t+") ":" a.NodeID = -1 "):this.Landlord.CustomWhere=" a.NodeID = -1 "}else this.Landlord.CustomWhere="";else if("Landlord"==e.toString()||e instanceof c.b&&26386==e.DBColumnID)if(0!=this.Landlord.SelectedValue){let e=a.a.rental.GetLandLordLocation(this.Landlord.SelectedValue,0),t="";null!=e&&e.Tables.length>0&&e.Tables[0].length>0?(e.Tables[0].forEach(e=>{""!=t&&(t+=" , "),t+=e.NodeID.toString()}),this.LocationProperty.CustomWhere=""!=t?" a.NodeID in ( "+t+") ":" a.NodeID = -1 "):this.LocationProperty.CustomWhere=" a.NodeID = -1 "}else this.LocationProperty.CustomWhere=""}onTabSelectionChanged(e){null!=this.ScreenObject.CustomTab.SelectedTab&&("Notes"==this.ScreenObject.CustomTab.SelectedTab.Name?(this.AttachmentVisibility=!1,this.ReportInfoVisibility=!1,this.NoteVisibility=!0,this.ViewNotes.OnShowNewNote(null)):"Attachments"==this.ScreenObject.CustomTab.SelectedTab.Name?(this.ViewAttachments.OnShowNewAttachment(null),this.AttachmentVisibility=!0,this.ReportInfoVisibility=!1,this.NoteVisibility=!1):(this.AttachmentVisibility=!1,this.ReportInfoVisibility=!0,this.NoteVisibility=!1))}LoadTabs(){this.AssignRowColumns();for(let e=this.ScreenObject.CustomTab.Pages.length-1;e>=0;e--){let t=this.ScreenObject.CustomTab.Pages[e];switch(t.Name){case"Particulars":t.Fields.push(this.PropertyDeposits);break;case"Share Holder":t.Fields.push(this.PropertyShareHolder);break;case"Units":t.Fields.push(this.PropertyUnits);break;case"Parkings":t.Fields.push(this.PropertyParking);break;case"Attachments":t.Fields.push(this.ViewAttachments);break;case"Assign":t.Fields.push(this.ObjPropertyRoleUser);break;case"Notes":t.Fields.push(this.ViewNotes)}}this.PropertyDeposits.FillParticulars(this.ScreenObject.Data.Tables[5]),this.ScreenObject.CustomTab.Pages.forEach(e=>{e.Fields.forEach(e=>{e instanceof c.b&&50002==e.CCID&&(e.SelectionChangedCommand.Subscribe(this,"onListSelectedChanged"),this.Location=e,this.IsLocationAv=!0),e instanceof c.b&&"RentalIncomeAccountID"==e.DBColumnName?this.RentalIncomeAcc=e:e instanceof c.b&&"RentalReceivableAccountID"==e.DBColumnName?this.RentalReceivableAcc=e:e instanceof c.b&&"AdvanceReceivableAccountID"==e.DBColumnName?this.AdvanceReceivableAcc=e:e instanceof c.b&&"ProvisionAccountID"==e.DBColumnName?this.ProvisionAccountID=e:e instanceof c.b&&"PenaltyAccountID"==e.DBColumnName?this.PenaltyAcc=e:e instanceof c.b&&"AdvanceRentAccountID"==e.DBColumnName?this.AdvanceRentAcc=e:e instanceof c.b&&"AdvReceivableCloseAccID"==e.DBColumnName?this.AdvReceivableCloseAcc=e:e instanceof c.b&&"BankAccount"==e.DBColumnName?this.BankAcc=e:e instanceof c.b&&"BankLoanAccount"==e.DBColumnName?this.BankLoanAcc=e:e instanceof c.b&&"RentalAccount"==e.DBColumnName?this.RentAcc=e:e instanceof c.b&&"RentPayableAccount"==e.DBColumnName?this.RentPayableAcc=e:e instanceof c.b&&"AdvanceRentPaid"==e.DBColumnName?this.AdvanceRentPaid=e:e instanceof d.c&&"TermsConditions"==e.DBColumnName&&(this.TermsConditions=e)})})}onListSelectedChanged(e){50002==e.CCID&&(this.LocAccountant&&(this.Accountant.CustomWhere="    CC.CCNID2 IN ("+this.Location.SelectedValue+") "),this.LocLandLord&&(this.Landlord.CustomWhere="    CC.CCNID2 IN ("+this.Location.SelectedValue+") "),this.LocSalesman&&(this.Salesman.CustomWhere="   CC.CCNID2 IN ("+this.Location.SelectedValue+") "))}AssignRowColumns(){let e;e=this.ScreenObject.CustomFields.length;for(let t=0;t<e;t++)this.ScreenObject.CustomFields[t].Row=t/4,this.ScreenObject.CustomFields[t].Column=t%4}AutoGenerateCode(){if(0==this.PropertyID&&null!=this.ScreenObject.Data&&this.ScreenObject.Data.Tables.length>7&&(this.ScreenObject.SetAutoCode(this.Code,this.PRT.IsGroup,this.Group.SelectedValue,this.ScreenObject.Data.Tables[7]),this.ScreenObject.IsAutoName)){this.ScreenObject.IsNameAutoGenerate=!0,this.Name.Enable=!1;let e=this.ScreenObject.Data.Tables[7];e=e.filter(e=>1==e.IsName),this.ScreenObject.IsName=!0,e.length>0&&(this.Name.Text=this.ScreenObject.SetAutoCodeParams_1(this.Name,this.Group.SelectedValue,e))}this.ds1=this.ScreenObject.Data;let e=this.ds1.Tables[4].filter(e=>"CodeAutoGen"==e.Name);e=this.ds1.Tables[4].filter(e=>"CapsLock"==e.Name),e.length>0&&Object(o.j)(e[0].Value)&&(this.Name.IsAllCaps=!0),e=this.ds1.Tables[4].filter(e=>"CapsToFirstLetter"==e.Name),e.length>0&&Object(o.j)(e[0].Value)&&(this.Name.IsFirstLetterCaps=!0)}OnSave(e){if("Save"==e){if(null==this.Code.Text.Trim()||""==this.Code.Text.Trim())return this.DisplayMessage="Enter Property Code",void(this.MessageVisibility=!0);if(null==this.Name.Text.Trim()||""==this.Name.Text.Trim())return this.DisplayMessage="Enter Property Name",void(this.MessageVisibility=!0);if(0==n.e.ValidateDouble(this.PlotArea.Text))return this.MessageVisibility=!0,void(this.DisplayMessage="Please Enter Valid PlotArea");if(0==n.e.ValidateDouble(this.BuildUpArea.Text))return this.MessageVisibility=!0,void(this.DisplayMessage="Please Enter Valid BuildUpArea");if(0==n.e.ValidateDouble(this.Units.Text))return this.MessageVisibility=!0,void(this.DisplayMessage="Please Enter Valid Units");if(0==n.e.ValidateDouble(this.Parkings.Text))return this.MessageVisibility=!0,void(this.DisplayMessage="Please Enter Valid Parkings");if(0==n.e.ValidateDouble(this.Floors.Text))return this.MessageVisibility=!0,void(this.DisplayMessage="Please Enter Valid Floors");try{let e=this.ScreenObject.ValidateData();if(!n.e.StringIsNullOrEmpty(e))return this.DisplayMessage=e,void(this.MessageVisibility=!0);for(let t=0;t<this.PropertyDeposits.DepositsGrid1Obj.Table.length;t++){if(!n.e.StringIsNullOrEmpty(this.PropertyDeposits.DepositsGrid1Obj.Table[t].Particulars_Key)&&!n.e.StringIsNullOrEmpty(this.PropertyDeposits.DepositsGrid1Obj.Table[t].Advance_Key)&&!n.e.StringIsNullOrEmpty(this.PropertyDeposits.DepositsGrid1Obj.Table[t].Refund)&&"1"==this.PropertyDeposits.DepositsGrid1Obj.Table[t].Refund.toString())return this.DisplayMessage="Can not select full refund at row no:"+(t+1),void(this.MessageVisibility=!0);if(""!=n.e.StringValue(this.PropertyDeposits.DepositsGrid1Obj.Table[t].PostDebit)&&"1"==n.e.StringValue(this.PropertyDeposits.DepositsGrid1Obj.Table[t].PostDebit)&&n.e.IsEmpty(this.PropertyDeposits.DepositsGrid1Obj.Table[t].DebitAccount.toString()))return this.DisplayMessage="Please select debit account at row no:"+(t+1),void(this.MessageVisibility=!0)}if(this.ScreenObject.IsAutoName&&!this.Name.Enable){this.ScreenObject.IsNameAutoGenerate=!0,this.Name.Enable=!1;let e=this.ScreenObject.Data.Tables[7];e=e.filter(e=>1==e.IsName),this.ScreenObject.IsName=!0,e.length>0&&(this.Name.Text=this.ScreenObject.SetAutoCodeParams_1(this.Name,this.Group.SelectedValue,e),this.PRT.Name=this.Name.Text)}if(0==this.PropertyID){let e=this.ScreenObject.Data.Tables[7];e=e.filter(e=>0==e.IsName);let t={StrCode:this.PRT.Code,CodePrefix:this.PRT.CodePrefix,CodeNumber:this.PRT.CodeNumber};if(this.DisplayMessage=this.ScreenObject.SetAutoCodeParams_3(this.Code,this.Group.SelectedValue,e,t),this.PRT.Code=t.StrCode,this.PRT.CodePrefix=t.CodePrefix,this.PRT.CodeNumber=t.CodeNumber,this.DisplayMessage.length>0)return}else this.PRT.Code=this.Code.Text,this.PRT.CodePrefix=this.CodePrefix,this.PRT.CodeNumber=this.CodeNumber,this.PRT.GroupSeqNoLength=this.GroupSeqNoLength;if(this.PRT.PropertyID=this.PropertyID,this.PRT.Name=this.Name.Text,this.PRT.StatusID=""!=this.Status.SelectedValue?parseInt(this.Status.SelectedValue):0,this.PRT.DetailsXML=this.GETXML(),this.PRT.DepositXML=this.PropertyDeposits.GetXML(),this.PRT.UnitXML=this.PropertyUnits.GetXML(),this.PRT.ParkingXML=this.PropertyParking.GetXML(),null!=this.PropertyShareHolder){let e=0,t=0;if(e=parseFloat(this.PropertyShareHolder.ShareHolderGrid.Columns[1].footer),t=parseFloat(this.PropertyShareHolder.ShareHolderGrid.Columns[2].footer),e>100)return this.DisplayMessage="Income % greater than 100, Total Income % is "+e,void(this.MessageVisibility=!0);if(t>100)return this.DisplayMessage="Expense % greater than 100, Total Expense % is "+t,void(this.MessageVisibility=!0);this.PRT.ShareHolderXML=this.PropertyShareHolder.GetShareHolderXML()}else this.PRT.ShareHolderXML="";this.PRT.CustomFieldsQuery=this.ScreenObject.GetCustomFieldsQuery(),this.PRT.CustomCostCenterFieldsQuery=this.ScreenObject.GetCustomCostCenterFieldsQuery(),this.LocationProperty.Visible&&this.LocationProperty.SelectedValue>0&&(this.PRT.CustomCostCenterFieldsQuery+="CCNID2="+this.LocationProperty.SelectedValue+","),this.PRT.SelectedNodeID=0==this.SelectedNodeID?1:this.SelectedNodeID,this.PRT.UserQuery=this.ObjPropertyRoleUser.GetXml(),this.PRT.NotesXML=this.ViewNotes.GetXML();try{this.PRT.AttachmetsXML=this.ViewAttachments.GetXML();let e="";if(this.IsPhotoChanged&&!n.e.IsEmpty(this.AccountPhoto))if(e+=0==this.FileID?'<Row Action="NEW"':'<Row Action="MODIFY"',a.a.SessionManager.IsWebApplication)e+=' AttachmentID="'+this.FileID+'"',e+=' FilePath="'+this.AccountPhoto+'"',e+=' ActualFileName="'+this.AccountPhoto.substr(this.AccountPhoto.lastIndexOf("\\")+1)+'"',e+=' RelativeFileName="'+this.AccountPhoto+'"',e+=' FileExtension="'+this.FileExtension+'"',e+=' FileDescription="'+d.d.GetValidXml(this.FileDescription)+'"',e+=' IsProductImage="1"',e+=' IsDefaultImage="1"',e+=' GUID="'+this.guid+'"',e+="/>";else{let t=n.e.GetPath(this.AccountPhoto);this.guid=t.guid,this.FileExtension=t.FileExtension,e+=' AttachmentID="'+this.FileID+'"',e+=' FilePath="'+this.AccountPhoto+'"',e+=' ActualFileName="'+this.ActualFileName+'"',e+=' RelativeFileName="'+this.AccountPhoto+'"',e+=' FileExtension="'+this.FileExtension+'"',e+=' FileDescription="'+d.d.GetValidXml(this.FileDescription)+'"',e+=' IsProductImage="1"',e+=' IsDefaultImage="1"',e+=' GUID="'+this.guid+'"',e+="/>"}else this.IsPhotoDelete&&this.FileID>0&&(e+='<Row Action="DELETE"',e+=' AttachmentID="'+this.FileID+'"/>');e.length>0&&(e="<AttachmentsXML>"+e+"</AttachmentsXML>",this.PRT.AttachmetsXML=this.PRT.AttachmetsXML+e.toString())}catch(t){return this.DisplayMessage=a.a.GetResource("Upload_Path_notExists"),void(this.MessageVisibility=!0)}this.PRT.WID=this.ScreenObject.CheckWorkFlow(),a.a.rental.SaveProperty(this.PRT,"SaveProperty").subscribe(e=>{if(this.DisplayMessage=e.Message,this.MessageVisibility=!0,this.RetValue=e.RetValue,this.RetValue>0){let e=this.Group.SelectedValue;this.ClearField(),this.Group.SelectedValue=e,this.ObjPropertyRoleUser.clear(),this.AutoGenerateCode(),Logger.InfoLog("AddEditPropertyViewModel :: Exiting OnSaveProperty")}},e=>{console.log(" Unit Save : "+JSON.stringify(e))})}catch(s){Logger.ErrorLog("AddEditPropertyViewModel :: OnSaveProperty"+s.stack)}}else if("DeletePhoto"==e.toString())this.IsPhotoDelete=!0,this.AccountPhoto="",this.IsPhotoChanged=!1,this.ActualFileName="",this.PhotoTextVisibility=!0,this.DisplayMessage="";else if("PopUp"==e.toString()){let e="";null!=this.ds&&this.ds.Tables[18].filter(e=>"jpg"==e.FileExtension||"png"==e.FileExtension).forEach(t=>{e+=n.e.GetPath(t.GUID.toString()+"."+t.FileExtension.toString())+";"})}else if("UploadPhoto"==e.toString()){let e=new A.a;e.PopupAttachmentsViewModel_1(92,this.PropertyID,this),a.a.page.ShowDialog(e,R.a,{ShowCenter:!0,Title:"Add Images"})}else if("MouseDown"==e.toString()){let e=new A.a;e.PopupAttachmentsViewModel_1(2,this.AccountPhoto,this),a.a.page.ShowDialog(e,R.a,{ShowCenter:!0,Title:"Add Images"})}else if("ShowApprove"==e.toString()){let e=new P.a(92,this.PropertyID,this.ScreenObject,this);a.a.page.ShowDialog(e,y.a,{ShowCenter:!0,Title:a.a.GetResource("ApproveReject")})}else"Report"==e.toString()?(this.AttachmentVisibility=!1,this.ReportInfoVisibility=!0,a.a.page.ShowDialog(this,f.a,{Title:"Reports"})):"Cancel"==e.toString()&&(this.ReportInfoVisibility=!1)}GETXML(){let e="";return e+=""!=this.Type.SelectedValue?"PropertyTypeLookUpID="+parseInt(this.Type.SelectedValue)+",":"PropertyTypeLookUpID=0,",e+="PlotArea='"+this.PlotArea.Text+"' ,",e+="BuiltUpArea='"+this.BuildUpArea.Text+"' ,",e+=""!=this.Owner.SelectedValue?"LandLordLookUpID="+this.Owner.SelectedValue+",":"LandLordLookUpID=0,",e+="Address1='"+this.Address1.Text+"',",e+="Address2='"+this.Address2.Text+"',",e+="City='"+this.City.Text+"',",e+="State='"+this.State.Text+"',",e+="Zip='"+this.Zip.Text+"',",e+="Country='"+this.Country.Text+"',",e+="BondNo='"+this.BondNo.Text+"',",e+="BondDate=convert(float,convert(datetime,'"+this.BondDate.Date.ToString("dd/MMM/yyyy")+"')),",e+="BondTypeLookUpID='"+this.BondType.SelectedValue+"',",e+="PropertyNo='"+this.PropertyNo.Text+"',",e+=null!=this.PropertyPosition&&""!=this.PropertyPosition.SelectedValue?"PropertyPositionLookUpID="+parseInt(this.PropertyPosition.SelectedValue)+",":"PropertyPositionLookUpID=0,",e+=""!=this.PropertyCategory.SelectedValue?"PropertyCategoryLookUpID="+parseInt(this.PropertyCategory.SelectedValue)+",":"PropertyCategoryLookUpID=0,",e+="Units='"+this.Units.Text+"',",e+="Parkings='"+this.Parkings.Text+"',",e+="Floors='"+this.Floors.Text+"',",e+=null!=this.RentalIncomeAcc&&0!=this.RentalIncomeAcc.SelectedValue?"RentalIncomeAccountID="+n.e.IntTryParse(this.RentalIncomeAcc.SelectedValue)+",":"RentalIncomeAccountID=0,",e+=null!=this.ParkingAdvanceRentAccountID&&0!=this.ParkingAdvanceRentAccountID.SelectedValue?"ParkingAdvanceRentAccountID="+n.e.IntTryParse(this.ParkingAdvanceRentAccountID.SelectedValue)+",":"ParkingAdvanceRentAccountID=0,",e+=null!=this.ParkingIncomeAccountID&&0!=this.ParkingIncomeAccountID.SelectedValue?"ParkingIncomeAccountID="+n.e.IntTryParse(this.ParkingIncomeAccountID.SelectedValue)+",":"ParkingIncomeAccountID=0,",e+=null!=this.PenaltyAcc&&0!=this.PenaltyAcc.SelectedValue?"PenaltyAccountID="+n.e.IntTryParse(this.PenaltyAcc.SelectedValue)+",":"PenaltyAccountID=0,",e+=null!=this.RentalReceivableAcc&&0!=this.RentalReceivableAcc.SelectedValue?"RentalReceivableAccountID="+n.e.IntTryParse(this.RentalReceivableAcc.SelectedValue)+",":"RentalReceivableAccountID=0,",e+=null!=this.AdvanceReceivableAcc&&0!=this.AdvanceReceivableAcc.SelectedValue?"AdvanceReceivableAccountID="+n.e.IntTryParse(this.AdvanceReceivableAcc.SelectedValue)+",":"AdvanceReceivableAccountID=0,",e+=null!=this.ProvisionAccountID&&0!=this.ProvisionAccountID.SelectedValue?"ProvisionAccountID="+n.e.IntTryParse(this.ProvisionAccountID.SelectedValue)+",":"ProvisionAccountID=0,",e+=null!=this.AdvanceRentAcc&&0!=this.AdvanceRentAcc.SelectedValue?"AdvanceRentAccountID="+n.e.IntTryParse(this.AdvanceRentAcc.SelectedValue)+",":"AdvanceRentAccountID=0,",e+=null!=this.AdvReceivableCloseAcc&&0!=this.AdvReceivableCloseAcc.SelectedValue?"AdvReceivableCloseAccID="+n.e.IntTryParse(this.AdvReceivableCloseAcc.SelectedValue)+",":"AdvReceivableCloseAccID=0,",e+=null!=this.BankAcc&&0!=this.BankAcc.SelectedValue?"BankAccount="+n.e.IntTryParse(this.BankAcc.SelectedValue)+",":"BankAccount=0,",e+=null!=this.BankLoanAcc&&0!=this.BankLoanAcc.SelectedValue?"BankLoanAccount="+n.e.IntTryParse(this.BankLoanAcc.SelectedValue)+",":"BankLoanAccount=0,",e+=null!=this.RentAcc&&0!=this.RentAcc.SelectedValue?"RentalAccount="+n.e.IntTryParse(this.RentAcc.SelectedValue)+",":"RentalAccount=0,",e+=null!=this.RentPayableAcc&&0!=this.RentPayableAcc.SelectedValue?"RentPayableAccount="+n.e.IntTryParse(this.RentPayableAcc.SelectedValue)+",":"RentPayableAccount=0,",e+=null!=this.AdvanceRentPaid&&0!=this.AdvanceRentPaid.SelectedValue?"AdvanceRentPaid="+n.e.IntTryParse(this.AdvanceRentPaid.SelectedValue)+",":"AdvanceRentPaid=0,",e+=""!=this.TermsConditions.Text?"TermsConditions='"+this.TermsConditions.Text+"',":"TermsConditions='',",e+=this.Salesman.SelectedValue>0?"SalesmanID="+this.Salesman.SelectedValue+",":"SalesmanID=1,",e+=this.Accountant.SelectedValue>0?"AccountantID="+this.Accountant.SelectedValue+",":"AccountantID=1,",e+=this.Landlord.SelectedValue>0?"LandlordID="+this.Landlord.SelectedValue+",":"LandlordID=1,",e+=this.LocationProperty.SelectedValue>0?"LocationID="+this.LocationProperty.SelectedValue+",":"LocationID=1,",e+=null!=this.TowerType.SelectedValue?"TowerType='"+this.TowerType.SelectedValue+"',":"TowerType='"+this.TowerType.DefaultValue+"',",e+=null!=this.GPS.Text&&""!=this.GPS.Text?"GPS='"+this.GPS.Text+"',":"GPS='',",e.toString()}LoadData(){if(null!=this.ds&&this.ds.Tables.length>2&&1==this.ds.Tables[2].length){if(this.CodePrefix="",this.CodeNumber=0,this.GroupSeqNoLength=0,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Code)||(this.Code.Text=this.ds.Tables[2][0].Code.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Name)||(this.Name.Text=this.ds.Tables[2][0].Name.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].StatusID)||(this.Status.SelectedValue=this.ds.Tables[2][0].StatusID.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].PropertyTypeLookUpID)||(this.Type.SelectedValue=this.ds.Tables[2][0].PropertyTypeLookUpID.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].PlotArea)||(this.PlotArea.Text=this.ds.Tables[2][0].PlotArea.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].BuiltUpArea)||(this.BuildUpArea.Text=this.ds.Tables[2][0].BuiltUpArea.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].LandLordLookUpID)||(this.Owner.SelectedValue=this.ds.Tables[2][0].LandLordLookUpID.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Address1)||(this.Address1.Text=this.ds.Tables[2][0].Address1.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Address2)||(this.Address2.Text=this.ds.Tables[2][0].Address2.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].City)||(this.City.Text=this.ds.Tables[2][0].City.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].State)||(this.State.Text=this.ds.Tables[2][0].State.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Zip)||(this.Zip.Text=this.ds.Tables[2][0].Zip.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Country)||(this.Country.Text=this.ds.Tables[2][0].Country.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].BondNo)||(this.BondNo.Text=this.ds.Tables[2][0].BondNo.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].BD)||(this.BondDate.Date=new Date(this.ds.Tables[2][0].BD)),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].BondTypeLookUpID)||(this.BondType.SelectedValue=this.ds.Tables[2][0].BondTypeLookUpID.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].PropertyNo)||(this.PropertyNo.Text=this.ds.Tables[2][0].PropertyNo.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].PropertyPositionLookUpID)||(this.PropertyPosition.SelectedValue=this.ds.Tables[2][0].PropertyPositionLookUpID.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].PropertyCategoryLookUpID)||(this.PropertyCategory.SelectedValue=this.ds.Tables[2][0].PropertyCategoryLookUpID.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Units)||(this.Units.Text=this.ds.Tables[2][0].Units.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Parkings)||(this.Parkings.Text=this.ds.Tables[2][0].Parkings.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].Floors)||(this.Floors.Text=this.ds.Tables[2][0].Floors.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].ParentID)||(this.Group.SelectedValue=parseInt(this.ds.Tables[2][0].ParentID)),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].CodePrefix)||(this.CodePrefix=this.ds.Tables[2][0].CodePrefix.toString()),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].CodeNumber)||(this.CodeNumber=parseInt(this.ds.Tables[2][0].CodeNumber)),n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].GroupSeqNoLength)||(this.GroupSeqNoLength=parseInt(this.ds.Tables[2][0].GroupSeqNoLength.toString())),null!=this.ds.Tables[2][0].SalesmanID&&""!=this.ds.Tables[2][0].SalesmanID.toString()&&(this.Salesman.SelectedValue=parseInt(this.ds.Tables[2][0].SalesmanID.toString())),null!=this.ds.Tables[2][0].AccountantID&&""!=this.ds.Tables[2][0].AccountantID.toString()&&(this.Accountant.SelectedValue=parseInt(this.ds.Tables[2][0].AccountantID.toString())),null!=this.ds.Tables[2][0].LandlordID&&""!=this.ds.Tables[2][0].LandlordID.toString()&&(this.Landlord.SelectedValue=parseInt(this.ds.Tables[2][0].LandlordID.toString())),null!=this.ds.Tables[2][0].LocationID&&"0"!=this.ds.Tables[2][0].LocationID.toString()&&(this.LocationProperty.SelectedValue=parseInt(this.ds.Tables[2][0].LocationID.toString())),this.TowerType.SelectedValue=null!=this.ds.Tables[2][0].TowerType&&""!=this.ds.Tables[2][0].TowerType.toString()?this.ds.Tables[2][0].TowerType.toString():this.TowerType.DefaultValue,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].GPS)||(this.GPS.Text=this.ds.Tables[2][0].GPS.toString()),this.ScreenObject.CustomTab.Pages.forEach(e=>{e.Fields.forEach(e=>{e instanceof c.b&&"RentalIncomeAccountID"==e.DBColumnName?(this.RentalIncomeAcc=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].RentalIncomeAccountID)||(this.RentalIncomeAcc.SelectedValue=parseInt(this.ds.Tables[2][0].RentalIncomeAccountID.toString()))):e instanceof c.b&&"RentalReceivableAccountID"==e.DBColumnName?(this.RentalReceivableAcc=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].RentalReceivableAccountID)||(this.RentalReceivableAcc.SelectedValue=parseInt(this.ds.Tables[2][0].RentalReceivableAccountID.toString()))):e instanceof c.b&&"ProvisionAccountID"==e.DBColumnName?(this.ProvisionAccountID=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].ProvisionAccountID)||(this.ProvisionAccountID.SelectedValue=parseInt(this.ds.Tables[2][0].ProvisionAccountID.toString()))):e instanceof c.b&&"AdvanceReceivableAccountID"==e.DBColumnName?(this.AdvanceReceivableAcc=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].AdvanceReceivableAccountID)||(this.AdvanceReceivableAcc.SelectedValue=parseInt(this.ds.Tables[2][0].AdvanceReceivableAccountID.toString()))):e instanceof c.b&&"ParkingIncomeAccountID"==e.DBColumnName?(this.ParkingIncomeAccountID=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].ParkingIncomeAccountID)||(this.ParkingIncomeAccountID.SelectedValue=parseInt(this.ds.Tables[2][0].ParkingIncomeAccountID.toString()))):e instanceof c.b&&"ParkingAdvanceRentAccountID"==e.DBColumnName?(this.ParkingAdvanceRentAccountID=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].ParkingAdvanceRentAccountID)||(this.ParkingAdvanceRentAccountID.SelectedValue=parseInt(this.ds.Tables[2][0].ParkingAdvanceRentAccountID.toString()))):e instanceof c.b&&"PenaltyAccountID"==e.DBColumnName?(this.PenaltyAcc=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].PenaltyAccountID)||(this.PenaltyAcc.SelectedValue=parseInt(this.ds.Tables[2][0].PenaltyAccountID.toString()))):e instanceof c.b&&"AdvanceRentAccountID"==e.DBColumnName?(this.AdvanceRentAcc=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].AdvanceRentAccountID)||(this.AdvanceRentAcc.SelectedValue=parseInt(this.ds.Tables[2][0].AdvanceRentAccountID.toString()))):e instanceof c.b&&"AdvReceivableCloseAccID"==e.DBColumnName?(this.AdvReceivableCloseAcc=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].AdvReceivableCloseAccID)||(this.AdvReceivableCloseAcc.SelectedValue=parseInt(this.ds.Tables[2][0].AdvReceivableCloseAccID.toString()))):e instanceof c.b&&"BankAccount"==e.DBColumnName?(this.BankAcc=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].BankAccount)||(this.BankAcc.SelectedValue=parseInt(this.ds.Tables[2][0].BankAccount.toString()))):e instanceof c.b&&"BankLoanAccount"==e.DBColumnName?(this.BankLoanAcc=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].BankLoanAccount)||(this.BankLoanAcc.SelectedValue=parseInt(this.ds.Tables[2][0].BankLoanAccount.toString()))):e instanceof c.b&&"RentalAccount"==e.DBColumnName?(this.RentAcc=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].RentalAccount)||(this.RentAcc.SelectedValue=parseInt(this.ds.Tables[2][0].RentalAccount.toString()))):e instanceof c.b&&"RentPayableAccount"==e.DBColumnName?(this.RentPayableAcc=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].RentPayableAccount)||(this.RentPayableAcc.SelectedValue=parseInt(this.ds.Tables[2][0].RentPayableAccount.toString()))):e instanceof c.b&&"AdvanceRentPaid"==e.DBColumnName?(this.AdvanceRentPaid=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].AdvanceRentPaid)||(this.AdvanceRentPaid.SelectedValue=parseInt(this.ds.Tables[2][0].AdvanceRentPaid.toString()))):e instanceof d.c&&"TermsConditions"==e.DBColumnName&&(this.TermsConditions=e,n.e.StringIsNullOrEmpty(this.ds.Tables[2][0].TermsConditions)||(this.TermsConditions.Text=this.ds.Tables[2][0].TermsConditions.toString()))})}),this.PropertyDeposits.Load(this.ds.Tables[8]),this.PropertyUnits.Load(this.ds),this.PropertyParking.Load(this.ds),null!=this.ds&&this.ds.Tables.length>13&&this.ScreenObject.LoadCustomFieldsData(this.ds.Tables[13]),null!=this.ds&&this.ds.Tables.length>15&&this.ScreenObject.LoadCustomFieldsCCData(this.ds.Tables[15]),this.ds.Tables.length>17&&this.ViewNotes.LoadNotes(this.ds.Tables[17]),this.ds.Tables.length>18){this.ViewAttachments.LoadAttachments(this.ds.Tables[18]);let e=this.ds.Tables[18].filter(e=>1==e.IsProductImage&&1==e.IsDefaultImage);e.length>0?(this.PhotoTextVisibility=!1,this.FileID=parseInt(e[0].FileID),this.AccountPhoto=n.e.GetPath(e[0].GUID.toString()+"."+e[0].FileExtension.toString()),this.ActualFileName=e[0].ActualFileName.toString()):(this.FileID=0,this.PhotoTextVisibility=!0)}null!=this.ds&&this.ds.Tables.length>19&&this.PropertyShareHolder.LoadData(this.ds.Tables[19]),null!=this.ds&&this.ds.Tables.length>20&&this.ds.Tables[20].length>0&&this.ScreenObject.CanApprove(this.ds.Tables[2][0],this.ds.Tables[20][0],this.ButtonSave)}}ClearField(){this.PropertyID=0,this.ScreenObject.Clear(),this.Status.SelectedValue="422",this.Group.SelectedValue=this.SelectedNodeID,this.CodePrefix="",this.CodeNumber=0,this.GroupSeqNoLength=0,this.PropertyDeposits.DepositsGrid1Obj.Clear(),this.PropertyDeposits.DepositsGrid1Obj.addEmptyRow(),null!=this.PropertyShareHolder&&(this.PropertyShareHolder.ShareHolderGrid.Clear(),this.PropertyShareHolder.ShareHolderGrid.UpdateTotals()),this.PropertyUnits.UnitsGrid1Obj.Clear(),this.PropertyUnits.UnitsGrid1Obj.addEmptyRow(),this.PropertyParking.ParkingGrid1Obj.Clear(),this.PropertyParking.ParkingGrid1Obj.addEmptyRow(),this.ViewAttachments.AttachmentsListObj.Clear(),this.ViewNotes.NotesList.Clear(),this.ViewNotes.DeletedNotes.Clear(),this.AccountPhoto="",this.ActualFileName="",this.PhotoTextVisibility=!0}}class G{constructor(){this.ReportRolesItems=[],this.ReportUsersItems=[],this.ReportLocationItems=[],this.ReportAssignItems=[],this.SelectedAssign="",this._RolesVisible=!1,this._UsersVisible=!1,this._LocationVisible=!1,this.ReportRolesItems.Clear(),this.ReportUsersItems.Clear(),this.ReportAssignItems.Clear(),this.ReportAssignItems.push(u.d.ComboBoxItems_2(a.a.GetResource("DocumentDesigner_Roles"),"1")),this.ReportAssignItems.push(u.d.ComboBoxItems_2(a.a.GetResource("DocumentDesigner_Users"),"2"));let e=a.a.common.GetDocumentViewScreenDetails(92,0);if(e.Tables.length>2){this.ReportRolesItems.push(u.c.CheckedListBoxItem_3("All","0"));for(let t=0;t<e.Tables[2].length;t++)this.ReportRolesItems.push(u.c.CheckedListBoxItem_3(e.Tables[2][t].Name.toString(),e.Tables[2][t].RoleID.toString()))}if(e.Tables.length>3){this.ReportUsersItems.push(u.c.CheckedListBoxItem_3("All","0"));for(let t=0;t<e.Tables[3].length;t++)this.ReportUsersItems.push(u.c.CheckedListBoxItem_3(e.Tables[3][t].UserName.toString(),e.Tables[3][t].UserID.toString()))}if(null!=a.a.SessionManager.Locations){this.ReportAssignItems.push(u.d.ComboBoxItems_2(a.a.GetResource("DocumentDesigner_Location"),"50002")),this.ReportLocationItems.Clear(),this.ReportLocationItems.push(u.c.CheckedListBoxItem_3("All","0"));for(let e=0;e<a.a.SessionManager.Locations.length;e++)Object(o.j)(a.a.SessionManager.Locations[e].IsGroup.toString())||this.ReportLocationItems.push(u.c.CheckedListBoxItem_3(a.a.SessionManager.Locations[e].Location.toString(),a.a.SessionManager.Locations[e].NodeID.toString()))}"1"==this.SelectedAssign?this.RolesVisible=!0:"2"==this.SelectedAssign?this.UsersVisible=!0:"50002"==this.SelectedAssign&&(this.LocationVisible=!0)}get RolesVisible(){return this._RolesVisible}set RolesVisible(e){e!=this._RolesVisible&&(e&&(this.UsersVisible=!1,this.LocationVisible=!1),this._RolesVisible=e)}get UsersVisible(){return this._UsersVisible}set UsersVisible(e){e!=this._UsersVisible&&(e&&(this.RolesVisible=!1,this.LocationVisible=!1),this._UsersVisible=e)}get LocationVisible(){return this._LocationVisible}set LocationVisible(e){e!=this._LocationVisible&&(e&&(this.RolesVisible=!1,this.UsersVisible=!1),this._LocationVisible=e)}OnDocViewsCheckedChanged(e){let t=e;if("0"==t.Value){if(this.ReportRolesItems.Contains(t))for(let e=0;e<this.ReportRolesItems.length;e++)this.ReportRolesItems[e].IsChecked=t.IsChecked;if(this.ReportUsersItems.Contains(t))for(let e=0;e<this.ReportUsersItems.length;e++)this.ReportUsersItems[e].IsChecked=t.IsChecked;if(this.ReportLocationItems.Contains(t))for(let e=0;e<this.ReportLocationItems.length;e++)this.ReportLocationItems[e].IsChecked=t.IsChecked}else t.IsChecked||(this.ReportRolesItems.Contains(t)&&(this.ReportRolesItems[0].IsChecked=!1),this.ReportUsersItems.Contains(t)&&(this.ReportUsersItems[0].IsChecked=!1),this.ReportLocationItems.Contains(t)&&(this.ReportLocationItems[0].IsChecked=!1))}SetUserRoles(e){if(null!=e&&null!=e&&e.Tables.length>14&&e.Tables[14].length>0){let t=e.Tables[14].filter(e=>e.RoleID>0);if(t.length>0)for(let e=0;e<t.length;e++)for(let s=0;s<this.ReportRolesItems.length;s++)if(t[e].RoleID.toString()==this.ReportRolesItems[s].Value.toString()){this.ReportRolesItems[s].IsChecked=!0;break}if(t=e.Tables[14].filter(e=>e.serID>0),t.length>0)for(let e=0;e<t.length;e++)for(let s=0;s<this.ReportUsersItems.length;s++)if(t[e].UserID.toString()==this.ReportUsersItems[s].Value.toString()){this.ReportUsersItems[s].IsChecked=!0;break}if(t=e.Tables[14].filter(e=>e.LocationID>0),t.length>0)for(let e=0;e<t.length;e++)for(let s=0;s<this.ReportLocationItems.length;s++)if(t[e].LocationID.toString()==this.ReportLocationItems[s].Value.toString()){this.ReportLocationItems[s].IsChecked=!0;break}}}onViewChanged(e){"Assign"==e&&("1"==this.SelectedAssign?this.RolesVisible=!0:"2"==this.SelectedAssign?this.UsersVisible=!0:"50002"==this.SelectedAssign&&(this.LocationVisible=!0))}GetXml(){let e="";e+="<XML>";for(let t=0;t<this.ReportRolesItems.length;t++)this.ReportRolesItems[t].IsChecked&&"0"!=this.ReportRolesItems[t].Value&&(e+="<Row ",e+='RoleID="'+this.ReportRolesItems[t].Value+'" ',e+="></Row>");for(let t=0;t<this.ReportUsersItems.length;t++)this.ReportUsersItems[t].IsChecked&&"0"!=this.ReportUsersItems[t].Value&&(e+="<Row ",e+='UserID="'+this.ReportUsersItems[t].Value+'" ',e+="></Row>");for(let t=0;t<this.ReportLocationItems.length;t++)this.ReportLocationItems[t].IsChecked&&"0"!=this.ReportLocationItems[t].Value&&(e+="<Row ",e+='LocationID="'+this.ReportLocationItems[t].Value+'" ',e+="></Row>");return e+="</XML>",e.toString()}clear(){for(let e=0;e<this.ReportRolesItems.length;e++)this.ReportRolesItems[e].IsChecked=this.ReportRolesItems[e].Value==a.a.SessionManager.RoleID;for(let e=0;e<this.ReportUsersItems.length;e++)this.ReportUsersItems[e].IsChecked=this.ReportUsersItems[e].Value==a.a.SessionManager.UserID;for(let e=0;e<this.ReportLocationItems.length;e++)this.ReportLocationItems[e].IsChecked=parseInt(this.ReportLocationItems[e].Value)==a.a.SessionManager.LocationID&&a.a.SessionManager.LocationID>0}}}}]);