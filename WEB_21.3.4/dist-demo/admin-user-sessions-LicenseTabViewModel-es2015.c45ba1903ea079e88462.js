(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{kDjn:function(e,s,t){"use strict";t.r(s),t.d(s,"LicenseTabViewModel",(function(){return c}));var i=t("Do2H"),o=t("Lp6j"),a=t("ScVY"),h=t("8B8H"),n=t("ockk"),r=t("4HhE"),l=t("0/4Q");class c extends a.b{constructor(){super(),this.ActiveSessionsObj=new h.a,this.Save=new r.b,this.ActiveSessionsObj.Table=[],this.ActiveSessionsObj.Columns=[],this.ActiveSessionsObj.CanUserAddRows=!1,this.ActiveSessionsObj.CanUserDeleteRows=!1,this.ActiveSessionsObj.Height=0;let e=[],s=new n.a;s.Header="Select",s.DisplayMember="Select",s.DataType="CheckBox",s.Width=50,s.ReadOnly=!0,e.push(s),s=new n.a,s.Header="System Name",s.DisplayMember="SysName",s.DataType="TextBlock",s.Width=150,s.ReadOnly=!0,e.push(s),s=new n.a,s.Header="IP Address",s.DisplayMember="IPAddress",s.DataType="TextBlock",s.Width=120,s.ReadOnly=!0,e.push(s),s=new n.a,s.Header="Create Time",s.DisplayMember="LoginTimeText",s.DataType="TextBlock",s.Width=140,s.ReadOnly=!0,e.push(s),s=new n.a,s.Header="Last Access Time",s.DisplayMember="LastAccessTimeText",s.DataType="TextBlock",s.Width=140,s.ReadOnly=!0,e.push(s),s=new n.a,s.Header="Status",s.DisplayMember="Status",s.DataType="TextBlock",s.Width=80,s.ReadOnly=!0,e.push(s),s=new n.a,s.Header="IP Address",s.DisplayMember="UserName",s.DataType="TextBlock",s.Width=parseInt(this.UserWidth),s.ReadOnly=!0,e.push(s),s=new n.a,s.Header="Site",s.DisplayMember="SiteName",s.DataType="TextBlock",s.Width=parseInt(this.SiteWidth),s.ReadOnly=!0,e.push(s),s=new n.a,s.Header="DB Index",s.DisplayMember="DBIndex",s.DataType="TextBlock",s.Width=70,s.ReadOnly=!0,e.push(s),this.ActiveSessionsObj.Columns=e,this.Save.Subscribe(this,"OnSave"),this.FillSearchDetails()}OnButtonClick(e){if("Refresh"==e)this.RefreshData();else if("Kill"==e){let e=this.ActiveSessionsObj.Table.filter(e=>e.Select);0==e.length?this.DisplayMessage="Select session to kill":e.forEach(s=>{i.a.ForwardProgress.LoginGUID!=s.GUID.toString()?(i.a.ForwardProgress.KillLoginSession(s.GUID.toString()),this.ActiveSessionsObj.removeRow(s)):1==e.length&&(this.DisplayMessage="Selected session can not be killed, because its owned by you.")})}}RefreshData(){this.ActiveSessionsObj.Clear(),this.LicenseCount=i.a.ForwardProgress.NoOfLicenses.toString(),i.a.ForwardProgress.IsSiteWise?(this.SiteWidth="120",this.UserWidth="100"):(this.SiteWidth="0",this.UserWidth="100");let e=i.a.admin.GetAccessRights(5,i.a.ForwardProgress.LCDBIndex,i.a.ForwardProgress.IsSiteWise?"1":"0",i.a.AccessPoint,"",i.a.ForwardProgress.SessionRefreshTime.toString(),"").ds;console.log(e.Table);for(let s=0;s<e.Table.length;s++)e.Table[s].Sno=s+1,e.Table[s].Select=!1,e.Table[s].LoginTimeText=new Date(e.Table[s].LoginTime).ToString("dd MMM yyyy hh:mm:ss"),e.Table[s].LastAccessTimeText=new Date(e.Table[s].LastAccessTime).ToString("dd MMM yyyy hh:mm:ss");if(this.ActiveSessionsObj.addRows(e.Table),this.InUse=e.Table.filter(e=>"Active"==e.Status).length.toString(),this.AvailableCount=(i.a.ForwardProgress.NoOfLicenses-parseInt(this.InUse)).toString(),this.ActiveSessionsObj.Columns.length>0){this.SearchCols.Items.push(l.d.ComboBoxItems_2("System Name","SysName")),this.SearchCols.Items.push(l.d.ComboBoxItems_2("IP Address","IPAddress")),this.SearchCols.Items.push(l.d.ComboBoxItems_2("Create Time","LoginTimeText")),this.SearchCols.Items.push(l.d.ComboBoxItems_2("Last Access Time","LastAccessTimeText")),this.SearchCols.Items.push(l.d.ComboBoxItems_2("Status","Status"));for(let e=0;e<this.ActiveSessionsObj.Columns.length;e++)"UserName"==this.ActiveSessionsObj.Columns[e].toString()?this.SearchCols.Items.push(l.d.ComboBoxItems_2("User","UserName")):"SiteName"==this.ActiveSessionsObj.Columns[e].toString()&&this.SearchCols.Items.push(l.d.ComboBoxItems_2("Site","SiteName"));this.SearchCols.Items.push(l.d.ComboBoxItems_2("DB Index","DBIndex"))}this.SearchCols.Items.length>0&&(this.SearchCols.SelectedValue=this.SearchCols.Items[0].Value)}FillSearchDetails(){this.Options=new l.e(0),this.SearchCols=new l.e(0),this.Options.Items.push(l.d.ComboBoxItems_2(i.a.GetResource("Com_Equals"),"1")),this.Options.Items.push(l.d.ComboBoxItems_2(i.a.GetResource("Com_NotEquals"),"2")),this.Options.Items.push(l.d.ComboBoxItems_2(i.a.GetResource("Com_BeginsWith"),"3")),this.Options.Items.push(l.d.ComboBoxItems_2(i.a.GetResource("Com_EndsWith"),"4")),this.Options.Items.push(l.d.ComboBoxItems_2(i.a.GetResource("Com_Contains"),"5")),this.Options.Items.push(l.d.ComboBoxItems_2(i.a.GetResource("Com_NotContains"),"6")),this.Options.SelectedValue="5"}OnSave(e){"Search"!=e.toString()&&"Filter"!=e.toString()||this.SearchGrid(e.toString())}Setselectedrow(e){this.SelectedRow=this.ActiveSessionsObj[e]}SearchGrid(e){if(o.e.StringIsNullOrEmpty(this.SearchText))return;let s="";if(""!=this.SearchCols.SelectedValue)s=this.SearchCols.SelectedValue;else{if(!(this.SearchCols.Items.length>0))return;s=this.SearchCols.Items[0].Value}if(!this.ActiveSessionsObj.TableColumns.Contains(s))return;let t=this.SelectedIndex;null!=this.SelectedRow&&this.ActiveSessionsObj.Table.indexOf(this.SelectedRow),-1==t&&(t=0)}}}}]);