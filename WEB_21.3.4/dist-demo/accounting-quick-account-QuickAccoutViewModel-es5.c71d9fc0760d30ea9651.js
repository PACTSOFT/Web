function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var s=t[o];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var o,s=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;o=Reflect.construct(s,arguments,n)}else o=s.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{VYMu:function(e,t,o){"use strict";o.r(t),o.d(t,"QuickAccoutViewModel",(function(){return A})),o.d(t,"ControlAccountDialog",(function(){return C}));var s=o("VxiT"),n=o("0/4Q"),c=o("NkMH"),i=o("Do2H"),a=o("eQJW"),u=o("REyf"),r=o("mQEZ"),l=o("Lp6j"),h=o("ScVY"),b=o("sW9y"),d=o("PDNK"),S=o("4k0m"),p=o("++IR"),A=function(e){_inherits(o,e);var t=_createSuper(o);function o(e,n,u,r,l,h){var b;if(_classCallCheck(this,o),(b=t.call(this)).ScreenObject=new s.a,b.DefaultValuation=1,b.AccountCode=null,b.AccountName=null,b.Status=null,b.NodeID=0,b.ParentId=0,b.GParentID=0,b.Parent=null,b.obj={},b.Height="",b.AccountType=null,b.Group=null,b._AccountID=0,b._Parent=0,b.RetValue=0,b.IsControlAccounts=!1,b.iAccountType=0,b.ControlType=0,b.ButtonSave=new c.a,i.a.SessionManager.Preferences.ContainsKey("IsControlAccounts")&&"TRUE"==i.a.SessionManager.Preferences.IsControlAccounts.toUpperCase()&&(b.IsControlAccounts=!0,0==h&&(h=1)),b.AccountID=e,b.obj.IsGroup=r,b.obj.AccountID=b.AccountID,b.ParentId=u,b.ControlType=h,b.ScreenObject.LoadQuickScreen(_assertThisInitialized(b),2,r),b.OnLoad(),b.dtTypes=b.ScreenObject.Data.Tables[4],h>0&&(2==h?l=7:3==h&&(l=6)),b.iAccountType=l,null!=b.AccountType&&(b.AccountType.SelectedValue=l.toString()),0==b.obj.AccountID&&(null!=b.Group&&(b.Group.SelectedValue=b.ParentId,b.Group.DefaultValue=b.Group.SelectedValue.toString()),0!=n&&(b.obj.SelectedNodeID=n)),b.FillAccountTypes(b.AccountType,l,0==u||1==u?1:-1),null!=b.ScreenObject.Data&&b.ScreenObject.Data.Tables.length>8&&b.ScreenObject.Data.Columns[8].Contains("IsParentCodeInherited")&&b.ScreenObject.Data.Tables[8].length>0){b.ScreenObject.InitAutoCode(b.ScreenObject.Data.Tables[8],r);var d=b.ScreenObject.StaticFields.find((function(e){return 26721==e.DBColumnID}));if(d&&(d.Visible=!(!r||!b.ScreenObject.IsAutoCode)),null!=b.AccountName){var S=b.ScreenObject.Data.Tables[5].filter((function(e){return"CapsLock"==e.Name}));S.length>0&&Object(a.j)(S[0].Value)&&(b.AccountName.IsAllCaps=!0),(S=b.ScreenObject.Data.Tables[5].filter((function(e){return"CapsToFirstLetter"==e.Name}))).length>0&&Object(a.j)(S[0].Value)&&(b.AccountName.IsFirstLetterCaps=!0)}}if(0!=b.obj.AccountID?(b.LoadEditData(),null!=b.Group&&(b.Group.Enable=!1)):(null!=b.Group&&(b.Group.SelectedValue=b.ParentId),b.obj.GUID=""),b.DisplayName=b.ScreenName,b.obj.SelectedNodeID=n,0==b.AccountID&&(b.AutoGenerateCode(),b.LoadParentData()),b.Title=i.a.GetResource(r?0!=b.AccountID?"Account_EditGroup":"Account_AddGroup":0!=b.AccountID?"Account_EditAccount":"Account_AddAccount"),b.DisplayName=b.Title,i.a.SessionManager.IsActionAssigned(2,"DefaultInActive")){var p=b.ScreenObject.GetQuickCombo(242);null!=p&&(p.DefaultValue="34",0==b.AccountID&&(p.SelectedValue="34"))}return _possibleConstructorReturn(b)}return _createClass(o,[{key:"FillAccountTypes",value:function(e,t,o){var s=this;if(0==t&&(t=1),null!=e){var c=e.SelectedValue;if(e.Items.Clear(),this.IsControlAccounts){var i=[];1==this.ControlType?i=this.dtTypes.filter((function(e){return 6==e.AccountTypeID||7==e.AccountTypeID})):2==this.ControlType?(t=7,e.DefaultValue="7",i=this.dtTypes.filter((function(e){return 7!=e.AccountTypeID}))):3==this.ControlType&&(t=6,e.DefaultValue="6",i=this.dtTypes.filter((function(e){return 6!=e.AccountTypeID}))),i.forEach((function(e){s.dtTypes.Remove(e)}))}this.dtTypes.forEach((function(s){var c=parseInt(s.AccountTypeID);1!=o&&(4!=t&&8!=t&&11!=t&&5!=t&&9!=t&&12!=t||4!=c&&8!=c&&11!=c&&5!=c&&9!=c&&12!=c)&&(1!=t&&2!=t&&7!=t&&10!=t&&13!=t&&15!=t&&3!=t&&6!=t&&14!=t&&16!=t||1!=c&&2!=c&&7!=c&&10!=c&&13!=c&&15!=t&&3!=c&&6!=c&&14!=c&&16!=t)||e.Items.push(n.d.ComboBoxItems_2(s.ResourceData,s.AccountTypeID))})),e.SelectedValue=0!=t?t.toString():c}else this.iAccountType=t;this.OnAccountTypeSelectionChanged(null)}},{key:"OnLoad",value:function(){var e=this;if(this.ButtonSave=new c.a,0==this.AccountID?i.a.SessionManager.HideUnathorizedAccess?this.ButtonSave.Visible=i.a.SessionManager.IsActionAssigned(2,"Create"):this.ButtonSave.Enable=i.a.SessionManager.IsActionAssigned(2,"Create"):(this.ScreenObject.IsEdit=!0,i.a.SessionManager.HideUnathorizedAccess?this.ButtonSave.Visible=i.a.SessionManager.IsActionAssigned(2,"Update"):this.ButtonSave.Enable=i.a.SessionManager.IsActionAssigned(2,"Update")),this.QuickAssign=new b.a,this.QuickAssign.QuickAssignGrid_1(2,this.ScreenObject.Data,this.obj.IsGroup),this.AccountCode=this.ScreenObject.GetQuickCode(238),this.AccountName=this.ScreenObject.GetQuickText(239),null!=this.AccountName&&this.AccountName.LostFocusCommand.Subscribe(this,"OnNameLostFocus"),this.Status=this.ScreenObject.GetQuickCombo(242),null!=this.Status&&(this.ScreenObject.Data.Tables[3].forEach((function(t){e.Status.Items.push(n.d.ComboBoxItems_2(t.Status.toString(),t.StatusID.toString()))})),this.ScreenObject.Data.Tables[3].length>0&&(this.Status.SelectedValue=this.ScreenObject.Data.Tables[3][0].StatusID.toString())),this.AccountType=this.ScreenObject.GetQuickCombo(241),null!=this.AccountType&&(this.ScreenObject.Data.Tables[4].forEach((function(t){e.AccountType.Items.push(n.d.ComboBoxItems_2(t.ResourceData.toString(),t.AccountTypeID.toString()))})),this.AccountType.SelectionChangedCommand.Subscribe(this,"OnAccountTypeSelectionChanged"),this.ControlType>1&&(this.AccountType.Enable=!1),this.OnAccountTypeSelectionChanged(null)),this.Group=this.ScreenObject.GetQuickField(247),null!=this.Group){if(this.IsControlAccounts)this.SetControlWhere(this.Group,this.ControlType);else if(this.ScreenObject.Data.Tables[4].length<14){var t="";this.ScreenObject.Data.Tables[4].forEach((function(e){t.length>0&&(t+=","),t+=e[Object.keys(e)[0]].toString()})),this.Group.CustomWhere="(A.AccountID=1 or A.AccountTypeID IN ("+t+"))"}this.Group.SelectionChangedCommand.Subscribe(this,"OnGroupSelectionChanged")}this.oCombo=this.ScreenObject.GetQuickCombo(252),null!=this.oCombo&&(this.oCombo.Items.push(n.d.ComboBoxItems_2(i.a.GetResource("Com_Yes"),"1")),this.oCombo.Items.push(n.d.ComboBoxItems_2(i.a.GetResource("Com_No"),"0")),this.obj.IsBillwise=Object(a.j)(i.a.SessionManager.Preferences.On),this.oCombo.SelectedValue=this.obj.IsBillwise?"1":"0"),this.oCombo=this.ScreenObject.GetQuickCombo(7082),null!=this.oCombo&&this.ScreenObject.Data.Tables[6].forEach((function(t){e.oCombo.Items.push(n.d.ComboBoxItems_2(t.Name.toString(),t.CurrencyID.toString()))})),this.oCombo=this.ScreenObject.GetQuickCombo(50393),null!=this.oCombo&&(this.oCombo.Items.push(n.d.ComboBoxItems_2("","")),this.ScreenObject.Data.Tables[7].forEach((function(t){e.oCombo.Items.push(n.d.ComboBoxItems_2(t.ProfileName.toString(),t.ProfileID.toString()))}))),this.oCombo=this.ScreenObject.GetQuickCombo(890),null!=this.oCombo&&(this.oCombo.Items.push(n.d.ComboBoxItems_2("Normal","0")),this.oCombo.Items.push(n.d.ComboBoxItems_2("Daily","1")),this.oCombo.Items.push(n.d.ComboBoxItems_2("Monthly","2")))}},{key:"SetControlWhere",value:function(e,t){var o="";1==t?o="#COATEE#":2==t?o="#DEBTORTEE#":3==t&&(o="#CREDITORTEE#"),e.CustomWhere=l.e.StringIsNullOrEmpty(e.CustomWhere)?o:"("+e.CustomWhere+") and "+o}},{key:"AutoGenerateCode",value:function(){0==this.NodeID&&null!=this.AccountCode&&(this.obj.SelectedNodeID=null!=this.Group?this.Group.SelectedValue:this.ParentId,this.ScreenObject.SetAutoCode(this.AccountCode,this.obj.IsGroup,this.obj.SelectedNodeID,this.ScreenObject.Data.Tables[8]))}},{key:"OnGroupSelectionChanged",value:function(e){this.Group.SelectedValue>0&&this.Group.SelectedValue.toString()!=this.Group.DefaultValue&&(this.Group.DefaultValue=this.Group.SelectedValue.toString(),this.FillAccountTypes(this.AccountType,i.a.accounting.GetAccountType(this.Group.SelectedValue),this.Group.SelectedValue),this.AutoGenerateCode(),this.LoadParentData())}},{key:"OnAccountTypeSelectionChanged",value:function(e){null!=this.AccountType&&this.ScreenObject.SetViewByType(this.AccountType.SelectedValue,this.obj.IsGroup)}},{key:"LoadEditData",value:function(){var e=i.a.accounting.GetAccountDetails(this.obj.AccountID);Object.assign(this.obj,e.obj),this.AccountID=this.obj.AccountID,this.QuickAssign.LoadGrid(this.obj.AccountID,e.Tables[12]),null!=this.AccountCode&&(this.AccountCode.Text=this.obj.AccountCode,(this.ScreenObject.InheritParentCode||this.ScreenObject.IsAutoCode)&&(this.AccountCode.Enable=parseInt(e.Tables[0][0].Depth)<=1&&!this.ScreenObject.IsRootAutoCode)),this.ScreenObject.FillControls(e.Tables[0][0],e.Tables[1][0],e.Tables[5].length>0?e.Tables[5][0]:null,null,e.Tables[17],e.Tables[4]),this.ScreenObject.CanApprove(e.Tables[0][0],e.Tables[13][0],this.ButtonSave),e.Tables[5].length>0&&this.ScreenObject.LoadCustomFieldsCCData(e.Tables[5],e.Tables[17]),i.a.SessionManager.IsOffline&&this.AccountID>0&&(this.ButtonSave.Visible=!1),null!=this.ScreenObject.StatusAssignGrid&&this.ScreenObject.StatusAssignGrid.Load(e.Tables[18]),null!=this.Group&&(this.Group.SelectedValue=parseInt(e.Tables[0][0].ParentID),this.Group.DefaultValue=this.Group.SelectedValue.toString()),this.ControlType>1&&((null!=this.AccountType&&2==this.ControlType&&"7"!=this.AccountType.SelectedValue||3==this.ControlType&&"6"!=this.AccountType.SelectedValue)&&(this.ButtonSave.Visible=!1),null!=this.AccountType&&(this.AccountType.Enable=!1)),null!=this.AccountType&&this.ScreenObject.SetViewByType(this.AccountType.SelectedValue,this.obj.IsGroup)}},{key:"OnSaveAccount",value:function(e){var t=this;if("Details"==e)i.a.page.ShowLoading=!0,setTimeout((function(){i.a.page.HideDialog(),null!=t.AccountType&&(t.iAccountType=parseInt(t.AccountType.SelectedValue));var e=new r.AddEditAccountViewModel(t.obj.AccountID,t.obj.SelectedNodeID,t.ParentId,t.iAccountType.toString(),t.obj.IsGroup,t.ControlType),o={obj:e};null!=t.AccountName&&(e.AccountName.Text=t.AccountName.Text),null!=t.AccountCode&&(e.AccountCode.Text=t.AccountCode.Text,e.AccountCode.PrefixCode=t.AccountCode.PrefixCode),e.OnGroupSelectionChanged("Group"),e.ScreenObject.CopyQuickToDetail(t.ScreenObject.StaticFields,[null!=t.AccountCode?t.AccountCode.DBColumnID:0,null!=t.AccountName?t.AccountName.DBColumnID:0]),e.OnGroupSelectionChanged("Type"),i.a.page.addNewTab({title:"Account Edit",component:u.AddEditAccountComponent,params:o})}),50);else if("ShowApprove"==e){var o=new S.a(2,this.AccountID,this.ScreenObject,this);i.a.page.ShowDialog(o,p.a,{ShowCenter:!0,Title:i.a.GetResource("ApproveReject")})}else try{this.SaveMethod(e)}catch(s){i.a.SessionManager.Logger.ErrorLog("QuickAddAccountScreenViewModel:: OnSaveAccount"+s.stack)}}},{key:"SaveMethod",value:function(e){var t=this;if(this.DisplayMessage=this.ScreenObject.ValidateData(),!(this.DisplayMessage.length>0))if(null==this.Group||!this.IsControlAccounts||0!=this.Group.SelectedValue&&1!=this.Group.SelectedValue||(2==this.ControlType?(this.ParentId=parseInt(i.a.SessionManager.Preferences.DebtorsControlGroup),this.Group.SelectedValue=this.ParentId):3==this.ControlType&&(this.ParentId=parseInt(i.a.SessionManager.Preferences.CreditorsControlGroup),this.Group.SelectedValue=this.ParentId)),0==this.obj.AccountID){if(null!=this.AccountCode&&(this.obj.AccountCode=this.AccountCode.Text),null!=this.AccountName&&(this.obj.AccountName=this.AccountName.Text),this.obj.AliasName=this.ScreenObject.GetTextComboValue_string(240,this.obj.AccountName),this.obj.AccountTypeID=null==this.AccountType||l.e.StringIsNullOrEmpty(this.AccountType.SelectedValue)?this.iAccountType:parseInt(this.AccountType.SelectedValue),this.obj.StatusID=i.a.SessionManager.IsActionAssigned(2,"DefaultInActive")?this.ScreenObject.GetTextComboValue_int(242,34):this.ScreenObject.GetTextComboValue_int(242,33),this.obj.CreditDays=this.ScreenObject.GetTextComboValue_int(248,0),this.obj.CreditLimit=this.ScreenObject.GetTextComboValue_double(249,0),this.obj.DebitDays=this.ScreenObject.GetTextComboValue_int(7081,0),this.obj.Debitlimit=this.ScreenObject.GetTextComboValue_double(7080,0),this.obj.IsGroup||0!=this.obj.AccountID||(this.obj.IsBillwise=6==this.obj.AccountTypeID||7==this.obj.AccountTypeID,this.obj.SelectedNodeID=null!=this.Group?this.Group.SelectedValue:this.ParentId,null!=this.AccountType&&(this.AccountType.SelectedValue=this.obj.AccountTypeID.toString())),this.oCombo=this.ScreenObject.GetQuickCombo(252),null!=this.oCombo&&(this.obj.IsBillwise="1"==this.oCombo.SelectedValue),null!=this.AccountCode){var o={StrCode:this.obj.AccountCode,CodePrefix:this.obj.CodePrefix,CodeNumber:this.obj.CodeNumber};if(this.DisplayMessage=this.ScreenObject.SetAutoCodeParams_3(this.AccountCode,this.obj.SelectedNodeID,this.ScreenObject.Data.Tables[8],o),this.obj.AccountCode=o.StrCode,this.obj.CodePrefix=o.CodePrefix,this.obj.CodeNumber=o.CodeNumber,this.DisplayMessage.length>0)return}this.obj.IsGroup||(this.obj.PurchaseAccount=this.ScreenObject.GetPactListValue(250,2),this.obj.SalesAccount=this.ScreenObject.GetPactListValue(251,3),this.obj.COGSAccount=this.ScreenObject.GetPactListValue(23845,4),this.obj.ClosingStkAccount=this.ScreenObject.GetPactListValue(23846,5),this.obj.PDCReceivableAccount=this.ScreenObject.GetPactListValue(26581,0),this.obj.PDCPayableAccount=this.ScreenObject.GetPactListValue(26582,0),this.obj.PaymentTerms=this.ScreenObject.GetTextComboValue_int(50393,0),this.obj.LetterofCredit=this.ScreenObject.GetTextComboValue_double(53357,0),this.obj.TrustReceipt=this.ScreenObject.GetTextComboValue_double(53358,0),this.obj.TrustReceiptAccount=this.ScreenObject.GetPactListValue(53526,0),this.obj.MarginAccount=this.ScreenObject.GetPactListValue(53527,0),this.obj.Currency=this.ScreenObject.GetTextComboValue_int(7082,1)),this.obj.TB=0,this.obj.PL=0,this.obj.BS=0,this.obj.PLT=0,this.obj.CustomFieldsQuery=this.ScreenObject.GetQuickExtraFieldsQuery(),this.obj.CustomCostCenterFieldsQuery=this.ScreenObject.GetQuickExtraCCFieldsQuery(),this.obj.HistoryXML=this.ScreenObject.HistoryCCXML,this.obj.StatusXML=null!=this.ScreenObject.StatusAssignGrid?this.ScreenObject.StatusAssignGrid.GetXML():"",this.obj.ContactsXML="",this.obj.NotesXML="",this.obj.AttachmetsXML=this.ScreenObject.GetExtraAttachmentXML(),this.obj.AddressXML="",this.obj.IsCode=!1;var s={};if(this.DisplayMessage=this.QuickAssign.GetXML(s),this.obj.CCMapXML=s.strXML,!l.e.StringIsNullOrEmpty(this.DisplayMessage))return;if(!this.ScreenObject.ValidateDataonSave())return;var n={Message:""};if(!this.obj.IsGroup&&!this.ScreenObject.ValidateGSTRules(this.obj.AccountTypeID,n))return this.DisplayMessage=n.Message,void(this.MessageVisibility=!0);var c=this.ScreenObject.StaticFields.find((function(e){return 26721==e.DBColumnID}));this.obj.GroupSeqNoLength=c&&this.obj.IsGroup?parseInt(c.Text):0,this.obj.WID=this.ScreenObject.CheckWorkFlow(),i.a.accounting.SaveAccount(this.obj,"SaveAccount").subscribe((function(e){t.SaveCallBack(e)}),(function(e){console.log("Quick Account Save : "+JSON.stringify(e))}))}else{var a=this.ScreenObject.GetStaticFieldsQuery();null!=this.AccountCode&&(this.obj.AccountCode=this.AccountCode.Text),null!=this.AccountName&&(this.obj.AccountName=this.AccountName.Text),this.obj.StaticFieldsQuery=a,this.obj.CustomFieldsQuery=this.ScreenObject.GetQuickExtraFieldsQuery(),this.obj.CustomCostCenterFieldsQuery=this.ScreenObject.GetQuickExtraCCFieldsQuery(),this.obj.HistoryXML=this.ScreenObject.HistoryCCXML,this.obj.StatusXML=null!=this.ScreenObject.StatusAssignGrid?this.ScreenObject.StatusAssignGrid.GetXML():"";var u={};if(this.DisplayMessage=this.QuickAssign.GetXML(u),this.obj.CCMapXML=u.strXML,!l.e.StringIsNullOrEmpty(this.DisplayMessage))return;if(!this.ScreenObject.ValidateDataonSave())return;var r={Message:""};if(!this.obj.IsGroup&&!this.ScreenObject.ValidateGSTRules(this.obj.AccountTypeID,r))return this.DisplayMessage=r.Message,void(this.MessageVisibility=!0);this.obj.WID=this.ScreenObject.CheckWorkFlow(),i.a.accounting.SaveAccount(this.obj,"SaveAccountQuick").subscribe((function(e){t.SaveCallBack(e)}),(function(e){alert(JSON.stringify(e)),console.log("Quick Account Save : "+JSON.stringify(e))}))}}},{key:"SaveCallBack",value:function(e){e.Message&&(this.DisplayMessage=e.Message,this.RetValue=e.RetValue,(this.RetValue>0||this.RetValue<-1e4)&&(this.AccountID=0,this.QuickAssign.Clear(),this.ScreenObject.Clear(),this.Title=i.a.GetResource(this.obj.IsGroup?"Account_AddGroup":"Account_AddAccount"),this.AccountCode&&(this.AccountCode.Text=""),this.Group&&(this.Group.SelectedValue=this.ParentId),this.AutoGenerateCode(),this.LoadParentData()),this.Parent&&(this.Parent.obj.SelectedNode&&(this.Parent.obj.SetFocusNodeID=this.Parent.obj.SelectedNode.Id),this.Parent.Refresh()))}},{key:"OnNameLostFocus",value:function(e){if(!l.e.StringIsNullOrEmpty(this.AccountName.Text)){this.iAccountType;null!=this.AccountType&&(this.AccountType.Visible&&this.AccountType.Enable?parseInt(this.AccountType.SelectedValue):0==this.AccountID?parseInt(this.AccountType.DefaultValue):this.obj.AccountTypeID)}this.ScreenObject.onTextBoxLostFocus(e)}},{key:"LoadParentData",value:function(){if(this.ScreenObject.dsParentData=null,0==this.NodeID&&0!=this.ParentId&&!this.obj.IsGroup){var e=this.ScreenObject.Data.Tables[5].filter((function(e){return"Copygroupdatatonode"==e.Name}));0!=e.Length&&""!=e[0].Value.toString()&&Object(a.j)(e[0].Value)&&(this.ScreenObject.dsParentData=i.a.accounting.GetCopyAccountDetails(this.ParentId),0!=this.ScreenObject.dsParentData.Tables[0].length?this.ScreenObject.FillParentData(this.ScreenObject.dsParentData.Tables[0][0],this.ScreenObject.dsParentData.Tables[1][0],this.ScreenObject.dsParentData.Tables[5][0],["AccountCode","AccountName","AccountGroup","IsGroup"]):this.ScreenObject.dsParentData=null)}}},{key:"AccountID",get:function(){return this._AccountID},set:function(e){this._AccountID=e,this.obj.AccountID=e}}]),o}(h.b),C=function(){function e(){_classCallCheck(this,e),this.IsCOA=!1,this.IsCustomer=!1,this.IsVendor=!1,this.ControlType=0,this.ControlAccounts=new d.b,this.ControlAccounts.Items.push(new d.a("Chart of Account",1,"ctrlAccount")),this.ControlAccounts.Items.push(new d.a("Accounts Receivable",2,"ctrlAccount")),this.ControlAccounts.Items.push(new d.a("Accounts Payable",3,"ctrlAccount")),i.a.SessionManager.IsActionAssigned(2,"Read")||(this.ControlAccounts.Items[0].Visible=!1),i.a.SessionManager.IsActionAssigned(2,"Accounts Receivable")||(this.ControlAccounts.Items[1].Visible=!1),i.a.SessionManager.IsActionAssigned(2,"Accounts Payable")||(this.ControlAccounts.Items[2].Visible=!1),this.ControlAccounts.Items[0].Label="Chart of Account",this.ControlAccounts.Items[1].Label="Accounts Receivable",this.ControlAccounts.Items[2].Label="Accounts Payable";var t=this.ControlAccounts.Items.filter((function(e){return 1==e.Visible}));if(1==t.length&&(this.ControlType=t[0].FeatureID),i.a.SessionManager.PersonalSettings.ContainsKey("ControlAccountType")){var o=parseInt(i.a.SessionManager.PersonalSettings.ControlAccountType);o>0&&this.ControlAccounts.Items[o-1].Visible&&(this.ControlAccounts.Items[o-1].IsChecked=!0)}}return _createClass(e,[{key:"OnButtonClick",value:function(e){"OK"==e?(this.ControlAccounts.Items[0].IsChecked?this.ControlType=1:this.ControlAccounts.Items[1].IsChecked?this.ControlType=2:this.ControlAccounts.Items[2].IsChecked&&(this.ControlType=3),this.ControlType>0&&l.e.SetPersonalize("ControlAccountType",this.ControlType.toString()),i.a.page.HideDialog()):(this.ControlType=0,i.a.page.HideDialog())}}]),e}()}}]);