(window.webpackJsonp=window.webpackJsonp||[]).push([[201,127,200],{"4k0m":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var i=s("Do2H"),a=s("ScVY"),n=s("EQd/"),o=s("0/4Q");class l extends a.b{constructor(e,t,s,a){super(),this.Remarks=new n.c(0),this.CostCenterID=0,this.NodeID=0,this.Parent=null,this.retValWeb=0,this.IsUpdated=!1,this.CostCenterID=e,this.NodeID=t,this.Parent=a,this.ScreenObject=s,this.Remarks.Label=i.a.GetResource("Remarks")}SaveStatus(e,t,s,i=!0){let a=!1,n=null;"MonthlyPayrollViewModel"==this.Parent.ClassName?(n=this.Parent.SetDocStatus(e,t,s,new Date,this.Remarks.Text,!0,""),null!=n&&n.Tables.length>0&&n.Tables[0].length>0&&n.Columns[0].Contains("status")&&(this.Parent.DocStatus="["+n.Tables[0][0].status.toString()+"]",a=!0),null!=n&&n.Tables.length>0&&n.Tables[n.Tables.length-1].length>0&&n.Columns[n.Tables.length-1].Contains("ErrorMessage")&&(this.Parent.this.DisplayMessage=n.Tables[n.Tables.length-1][0].ErrorMessage.toString()),this.Parent.this.MessageVisibility=!0,a&&this.Parent.btnClear_Click()):"FinalSettlementViewModel"==this.Parent.ClassName&&(n=this.Parent.SetDocStatus(e,t,s,new Date,this.Remarks.Text,!0,""),null!=n&&n.Tables.length>0&&n.Tables[0].length>0&&n.Columns[0].Contains("status")&&(this.Parent.DocStatus="["+n.Tables[0][0].status.toString()+"]",a=!0),null!=n&&n.Tables.length>0&&n.Tables[n.Tables.length-1].length>0&&n.Columns[n.Tables.length-1].Contains("ErrorMessage")&&(this.Parent.this.DisplayMessage=n.Tables[n.Tables.length-1][0].ErrorMessage.toString()),this.Parent.this.MessageVisibility=!0,a&&this.Parent.Button_Click("Clear"))}onButtonClick(e){let t=0;if(40054==this.CostCenterID)"Approve"==e?i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Edit")?this.Parent.btnPost_Click():this.SaveStatus(369,parseInt(this.Parent.oCMP.arrLstOthMPFields[0].dvPayProcessed[0].WorkFlowID),""):"Reject"==e&&this.SaveStatus(372,0,""),i.a.page.HideDialog();else if(40095==this.CostCenterID)"Approve"==e?i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Edit")?(this.Parent.sCmdParameter="Approve",this.Parent.Button_Click("Save")):this.SaveStatus(369,this.Parent.WID,""):"Reject"==e&&this.SaveStatus(372,0,""),i.a.page.HideDialog();else{let s=this.ScreenObject.CurrentStatus;if("Approve"==e){if(!this.IsSaveValidated())return;let e=i.a.common.ApproveCostCenter(this.CostCenterID,this.NodeID,s,this.Remarks.Text,!1,0);this.DisplayMessage=e.Message,t=e.RetValue,t>0&&(this.IsUpdated||(this.ScreenObject.ButtonApproveVisible=!1,this.UpdateStatusID(t),null!=this.ScreenObject.drpStatus&&(null==this.ScreenObject.drpStatus.Items.find(e=>e.Value==t.toString())&&("1001"==t.toString()?this.ScreenObject.drpStatus.Items.push(o.d.ComboBoxItems_2("Un Approved","1001")):"1002"==t.toString()?this.ScreenObject.drpStatus.Items.push(o.d.ComboBoxItems_2("Approved","1002")):this.ScreenObject.drpStatus.Items.push(o.d.ComboBoxItems_2("Rejected","1003"))),this.ScreenObject.drpStatus.SelectedValue=t.toString(),this.ScreenObject.drpStatus.SetSelectedItem(t.toString())),i.a.SessionManager.IsWebApplication&&(this.retValWeb=t)),i.a.page.HideDialog())}else if("Reject"==e){if(!this.IsSaveValidated())return;let e=i.a.common.ApproveCostCenter(this.CostCenterID,this.NodeID,s,this.Remarks.Text,!0,0);this.DisplayMessage=e.Message,t=e.RetValue,t>0&&(this.IsUpdated||(this.UpdateStatusID(t),null!=this.ScreenObject.drpStatus&&(null==this.ScreenObject.drpStatus.Items.find(e=>e.Value==t.toString())&&("1001"==t.toString()?this.ScreenObject.drpStatus.Items.push(o.d.ComboBoxItems_2("Un Approved","1001")):"1002"==t.toString()?this.ScreenObject.drpStatus.Items.push(o.d.ComboBoxItems_2("Approved","1002")):this.ScreenObject.drpStatus.Items.push(o.d.ComboBoxItems_2("Rejected","1003"))),this.ScreenObject.drpStatus.SelectedValue=t.toString(),this.ScreenObject.drpStatus.SetSelectedItem(t.toString())),i.a.SessionManager.IsWebApplication&&(this.retValWeb=t)),i.a.page.HideDialog())}else i.a.page.HideDialog()}}UpdateStatusID(e){this.ScreenObject.CurrentStatus=e,"QuickAddAccountScreenViewModel"==this.Parent.ClassName||"AddEditAccountScreenViewModel"==this.Parent.ClassName?this.Parent.obj.StatusID=e:"QuickAddProductViewModel"==this.Parent.ClassName?this.Parent.objProduct.ProductStatus=e:"AddProductScreenViewModel"==this.Parent.ClassName?this.Parent.oProduct.ProductStatus=e:"QuickAddCostCenterViewModel"==this.Parent.ClassName||"AddCostCenterViewModel"==this.Parent.ClassName?this.Parent.objCostCenter.Status=e:"AddEditEmpMasterViewModel"==this.Parent.ClassName&&(this.Parent.objEmp.StatusID=e)}IsSaveValidated(){if(this.IsUpdated=!1,"QuickAddAccountScreenViewModel"==this.Parent.ClassName){let e=this.Parent;if(e.ButtonSave.Visible&&e.ButtonSave.Enable){if(e.SaveMethod("APPROVE_CALL"),0!=e.AccountID)return this.DisplayMessage=e.DisplayMessage,e.DisplayMessage="",!1;this.IsUpdated=!0,e.DisplayMessage=""}}else if("AddEditAccountScreenViewModel"==this.Parent.ClassName){let e=this.Parent;if(e.ButtonSave.Visible&&e.ButtonSave.Enable){if(e.OnSaveAccount("APPROVE_CALL"),0!=e.AccountID)return this.DisplayMessage=e.DisplayMessage,e.DisplayMessage="",!1;this.IsUpdated=!0,e.DisplayMessage=""}}else if("QuickAddProductViewModel"==this.Parent.ClassName){let e=this.Parent;if(e.ButtonSave.Visible&&e.ButtonSave.Enable){if(e.onSaveProduct("APPROVE_CALL"),0!=e.objProduct.ProductID)return this.DisplayMessage=e.DisplayMessage,e.DisplayMessage="",!1;this.IsUpdated=!0,e.DisplayMessage=""}}else if("AddProductScreenViewModel"==this.Parent.ClassName){let e=this.Parent;if(e.ButtonSave.Visible&&e.ButtonSave.Enable){if(e.OnSaveProduct("APPROVE_CALL"),0!=e.ProductID)return this.DisplayMessage=e.DisplayMessage,e.DisplayMessage="",!1;this.IsUpdated=!0,e.DisplayMessage=""}}else if("QuickAddCostCenterViewModel"==this.Parent.ClassName){let e=this.Parent;if(e.ButtonSave.Visible&&e.ButtonSave.Enable){if(e.SaveMethod(),0!=e.NodeID)return this.DisplayMessage=e.DisplayMessage,e.DisplayMessage="",!1;this.IsUpdated=!0,e.DisplayMessage=""}}else if("AddCostCenterViewModel"==this.Parent.ClassName){let e=this.Parent;if(e.ButtonSave.Visible&&e.ButtonSave.Enable){if(e.OnSaveCostCenter("Save"),0!=e.NodeID)return this.DisplayMessage=e.DisplayMessage,e.DisplayMessage="",!1;this.IsUpdated=!0,e.DisplayMessage=""}}else if("AddEditEmpMasterViewModel"==this.Parent.ClassName){let e=this.Parent;if(e.ButtonSave.Visible&&e.ButtonSave.Enable){if(e.OnSaveEmployee("Save"),0!=e.NodeID)return this.DisplayMessage=e.DisplayMessage,e.DisplayMessage="",!1;this.IsUpdated=!0,e.DisplayMessage=""}}return!0}}},T0de:function(e,t,s){"use strict";s.r(t),s.d(t,"QuickAddTenantViewModel",(function(){return D}));var i=s("Do2H"),a=s("Lp6j"),n=s("eQJW"),o=s("ScVY"),l=s("VxiT"),r=s("EQd/"),c=s("0/4Q"),h=s("n56n"),d=s("NkMH"),u=s("XR/+"),b=s("x9zH"),S=s("4HhE"),p=s("JIg3"),g=s("jgdN"),m=s("4k0m"),C=s("++IR");class D extends o.b{constructor(e,t,s,a,n){super(),this.Obj={},this.ScreenObject=new l.a,this.RetValue=0,this._Height=700,this.Height=0,this.QuickVisible=!0,this.txtCode=new r.d(25694),this.Type=new h.b(25695),this.Position=new h.b(25696),this.FstName=new r.d(25697),this.Group=new h.b(25789),this.Title="",this.DetailButtonVisibility=!0,this.parentid=0,this.group=!0,this.NodeID=0,this.TenantID=0,this.ClassName="QuickAddTenantViewModel",Logger.InfoLog("QuickAddTenantViewModel::Entering QuickAddTenantViewModel With Parameters Selectednodeid="+e+" Costcenterid="+t+" Parentid="+s+"Isgroup="+a+" Oparent="+n);try{this.DisplayMessage="",this.MessageVisibility=!1,this.Title=i.a.GetResource("TNT_Title"),this.ScreenObject.LoadQuickScreen(this,94,a),a&&(this.QuickVisible=!1,this.DetailButtonVisibility=!1,this.Title=i.a.GetResource("TNT_AddGroup")),this.QuickVisible=!0,this.txtCode=this.ScreenObject.GetQuickText(25694),null==this.txtCode&&(this.txtCode=new r.d(25694),this.txtCode.Visible=!1),this.Type=this.ScreenObject.GetQuickField(25695),null==this.Type&&(this.Type=new h.b(25695),this.Type.Visible=!1),this.Position=this.ScreenObject.GetQuickField(25696),null==this.Position&&(this.Position=new h.b(25696),this.Position.Visible=!1),this.FstName=this.ScreenObject.GetQuickText(25697),null==this.FstName&&(this.FstName=new r.d(25697),this.FstName.Visible=!1),this.Group=this.ScreenObject.GetQuickField(25789),null==this.Group&&(this.Group=new h.b(25789),this.Group.Visible=!1),this.ButtonSave=new d.a,this.Parent=n,this.parentid=s,this.group=a,this.Obj.TenantID=e,this.TenantID=this.Obj.TenantID,this.NodeID=this.Obj.TenantID,this.Group.SelectedValue=this.parentid,this.AutoGenerateCode(),e>0&&(this.LoadEditData(),this.Group.Enable=!1,this.Title=i.a.GetResource(a?"TNT_EditGroup":"TNT_Edit"))}catch(o){Logger.ErrorLog("QuickAddTenantViewModel:: QuickAddTenantViewModel"+o.stack)}Logger.InfoLog("QuickAddTenantViewModel::Exiting QuickAddTenantViewModel")}AutoGenerateCode(){let e=i.a.common.GetAutoSequence(94,"","94",i.a.SessionManager.CompanyIndex.toString()),t=this.ScreenObject.Data.Tables[4].filter(e=>"CodeAutoGen"==e.Name);if(t.length>0&&Object(n.j)(t[0].Value)){this.txtCode.Enable=!1,this.txtCode.Mandatory=!1;let t=this.ScreenObject.StaticFields.find(e=>25694==e.DBColumnID);null!=t&&null!=t&&(t.Enable=!1,0==this.TenantID&&(t.Text=e))}}LoadEditData(){Logger.InfoLog("QuickAddTenantViewModel::Entering LoadEditData");try{let e=i.a.rental.GetTenantDetails(this.Obj.TenantID);Object.assign(this.Obj,e.obj),this.txtCode.Text=this.Obj.Code,this.FstName.Text=this.Obj.FirstName,this.Type.SelectedValue=this.Obj.TypeID,this.Position.SelectedValue=this.Obj.PositionID,this.ScreenObject.FillControls(e.Tables[0][0],e.Tables[1][0],e.Tables[2].length>0?e.Tables[2][0]:null,null),this.ScreenObject.CanApprove(e.Tables[0][0],e.Tables[5][0],this.ButtonSave)}catch(e){Logger.InfoLog("QuickAddTenantViewModel:: LoadEditData"+e.stack)}Logger.InfoLog("QuickAddTenantViewModel::Exiting LoadEditData")}OnSave(e){Logger.InfoLog("QuickAddTenantViewModel::Entering OnSave");try{if("Cancel"==e.toString())i.a.page.HideDialog();else if("Details"==e.toString()){i.a.page.HideDialog();let e=new u.AddEditTenantViewModel(this.NodeID,this.parentid,this.group);e.FstName.Text=this.FstName.Text,e.txtCode.Text=this.ScreenObject.GetTextComboValue_string(25694,""),e.Type.SelectedValue=this.Type.SelectedValue,e.Position.SelectedValue=this.Position.SelectedValue,e.Group.SelectedValue=this.Group.SelectedValue,i.a.page.addNewTab({title:this.ScreenName,component:b.AddEditTenantComponent,params:{obj:e}})}else if("ShowApprove"==e.toString()){let e=new m.a(94,this.Obj.TenantID,this.ScreenObject,this);i.a.page.ShowDialog(e,C.a,{ShowCenter:!0,Title:i.a.GetResource("ApproveReject")})}else if("Save"==e.toString()){let e=this.ScreenObject.ValidateData();if(!a.e.IsEmpty(e))return this.DisplayMessage=e,void(this.MessageVisibility=!0);this.txtCode.Text=this.ScreenObject.GetTextComboValue_string(25694,""),this.Obj.Code=this.txtCode.Text,this.Obj.TypeID=this.Type.SelectedValue,this.Obj.PositionID=this.Position.SelectedValue,this.FstName.Text=this.ScreenObject.GetTextComboValue_string(25697,""),this.Obj.FirstName=this.FstName.Text,this.Obj.SelectedNodeId=this.Group.SelectedValue,this.Obj.IsGroup=this.group,this.Obj.MiddleName=this.ScreenObject.GetTextComboValue_string(25698,""),this.Obj.LastName=this.ScreenObject.GetTextComboValue_string(25699,""),this.Obj.LeaseSignatory=this.ScreenObject.GetTextComboValue_string(25700,""),this.Obj.ContactPerson=this.ScreenObject.GetTextComboValue_string(25701,""),this.Obj.Phone1=this.ScreenObject.GetTextComboValue_string(25702,""),this.Obj.Phone2=this.ScreenObject.GetTextComboValue_string(25703,""),this.Obj.Email=this.ScreenObject.GetTextComboValue_string(25704,""),this.Obj.Fax=this.ScreenObject.GetTextComboValue_string(25705,""),this.Obj.IDNumber=this.ScreenObject.GetTextComboValue_string(25706,""),this.Obj.Profession=this.ScreenObject.GetTextComboValue_string(25707,""),this.Obj.AttachmetsXML="",this.Obj.PostingID=0,this.Obj.TabsData=this.getFields().Trim(","),this.Obj.CustomFieldsQuery=this.ScreenObject.GetQuickExtraFieldsQuery(),this.Obj.CustomCostCenterFieldsQuery=this.ScreenObject.GetQuickExtraCCFieldsQuery(),this.Obj.WID=this.ScreenObject.CheckWorkFlow(),this.Obj.ContactsXML="",this.Obj.PrimaryContactQuery="",i.a.rental.SaveTenant(this.Obj,"SaveTenant").subscribe(e=>{this.DisplayMessage=e.Message,this.MessageVisibility=!0,this.RetValue=e.RetValue,this.RetValue>0&&(this.txtCode.Text="",this.FstName.Text="",null==this.Parent?i.a.page.HideDialog():this.Parent.Refresh(),i.a.page.HideDialog())},e=>{console.log(" Unit Save : "+JSON.stringify(e))})}}catch(t){Logger.ErrorLog("QuickAddTenantViewModel:: OnSave"+t.stack)}Logger.InfoLog("QuickAddTenantViewModel::Exiting OnSave")}getFields(){Logger.InfoLog("AddEditTenantViewModel::Entering getFields");let e="",t="",s=null;return this.ScreenObject.StaticFields.forEach(i=>{i instanceof S.c&&!a.e.IsEmpty(i.DBColumnName)&&!i.DBColumnName.toLowerCase().Contains("alpha")&&!i.DBColumnName.toLowerCase().Contains("ccnid")&&(i instanceof r.d?"Passport"!=i.DBColumnName&&"Nationality"!=i.DBColumnName&&"SponsorName"!=i.DBColumnName&&"SponsorPassport"!=i.DBColumnName&&"License"!=i.DBColumnName&&"LicenseIssuedBy"!=i.DBColumnName||(e=i.Text,a.e.IsEmpty(e)&&(e="",s=null),t+=i.DBColumnName+"=N'"+e.replace("'","''")+"',"):i instanceof c.e?(e=i.SelectedValue,a.e.IsEmpty(e)&&(e=""),t+=i.DBColumnName+"=N'"+e+"',"):i instanceof p.c?i.Date&&(e=i.Date.ToString("dd/MMM/yyyy"),a.e.IsEmpty(e)&&(e=""),t+=i.DBColumnName+"='"+e+"',"):i instanceof p.a?(e=i.Date.ToString("dd/MMM/yyyy"),a.e.IsEmpty(e)&&(e=""),t+=i.DBColumnName+"=Convert(float,Convert(DateTime,'"+e+"')),"):i instanceof g.a&&(e=i.Text,a.e.IsEmpty(e)&&(e=""),t+=i.DBColumnName+"='"+e+"',"))}),t.toString()}}},bwbx:function(e,t,s){"use strict";s.d(t,"a",(function(){return c}));var i=s("3Pt+"),a=s("fXoL"),n=s("ofXK"),o=s("sYmb");function l(e,t){if(1&e){const e=a.ac();a.Zb(0,"div",7),a.Wc(1,"\n            "),a.Zb(2,"a",8),a.hc("click",(function(){a.Ic(e);const s=t.$implicit;return a.lc(2).obj.OnReportsLinkClick(s.DBColumnID)})),a.Wc(3),a.Yb(),a.Wc(4,"\n        "),a.Yb()}if(2&e){const e=t.$implicit;a.Db(3),a.Xc(e.Label)}}function r(e,t){if(1&e){const e=a.ac();a.Zb(0,"div",1),a.Wc(1,"\n    "),a.Zb(2,"div",2),a.Wc(3,"\n        "),a.Wc(4,"\n        "),a.Uc(5,l,5,1,"div",3),a.Wc(6,"\n    "),a.Yb(),a.Wc(7,"\n\n    "),a.Zb(8,"div",4),a.Wc(9,"\n        "),a.Zb(10,"div"),a.Wc(11,"\n            "),a.Zb(12,"button",5),a.hc("click",(function(){return a.Ic(e),a.lc().obj.OnSave("Cancel")})),a.Ub(13,"i",6),a.Wc(14),a.mc(15,"translate"),a.Yb(),a.Wc(16,"\n        "),a.Yb(),a.Wc(17,"\n    "),a.Yb(),a.Wc(18,"\n"),a.Yb()}if(2&e){const e=a.lc();a.Db(5),a.tc("ngForOf",e.obj.ReportsList),a.Db(9),a.Xc(a.nc(15,2,"Cancel"))}}let c=(()=>{class e{constructor(){this.form=new i.j({})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Nb({type:e,selectors:[["app-reportslist"]],inputs:{obj:"obj"},decls:1,vars:1,consts:[["class","master-screen",4,"ngIf"],[1,"master-screen"],[1,"pagesection-noborder","row","form-row"],["class","form-group col-xl-12 col-md-12 col-sm-12 col-xs-12 PACTControl hlink",4,"ngFor","ngForOf"],[1,"Pactdailogfooter"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"],[1,"form-group","col-xl-12","col-md-12","col-sm-12","col-xs-12","PACTControl","hlink"],[3,"click"]],template:function(e,t){1&e&&a.Uc(0,r,19,4,"div",0),2&e&&a.tc("ngIf",t.obj.ReportInfoVisibility)},directives:[n.t,n.s],pipes:[o.d],styles:[""]}),e})()}}]);