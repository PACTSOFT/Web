function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var s,i=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;s=Reflect.construct(i,arguments,o)}else s=i.apply(this,arguments);return _possibleConstructorReturn(this,s)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{kDjn:function(e,t,s){"use strict";s.r(t),s.d(t,"LicenseTabViewModel",(function(){return h}));var i=s("Do2H"),o=s("Lp6j"),r=s("ScVY"),n=s("8B8H"),a=s("ockk"),c=s("4HhE"),l=s("0/4Q"),h=function(e){_inherits(s,e);var t=_createSuper(s);function s(){var e;_classCallCheck(this,s),(e=t.call(this)).ActiveSessionsObj=new n.a,e.Save=new c.b,e.ActiveSessionsObj.Table=[],e.ActiveSessionsObj.Columns=[],e.ActiveSessionsObj.CanUserAddRows=!1,e.ActiveSessionsObj.CanUserDeleteRows=!1,e.ActiveSessionsObj.Height=0;var i=[],o=new a.a;return o.Header="Select",o.DisplayMember="Select",o.DataType="CheckBox",o.Width=50,o.ReadOnly=!0,i.push(o),(o=new a.a).Header="System Name",o.DisplayMember="SysName",o.DataType="TextBlock",o.Width=150,o.ReadOnly=!0,i.push(o),(o=new a.a).Header="IP Address",o.DisplayMember="IPAddress",o.DataType="TextBlock",o.Width=120,o.ReadOnly=!0,i.push(o),(o=new a.a).Header="Create Time",o.DisplayMember="LoginTimeText",o.DataType="TextBlock",o.Width=140,o.ReadOnly=!0,i.push(o),(o=new a.a).Header="Last Access Time",o.DisplayMember="LastAccessTimeText",o.DataType="TextBlock",o.Width=140,o.ReadOnly=!0,i.push(o),(o=new a.a).Header="Status",o.DisplayMember="Status",o.DataType="TextBlock",o.Width=80,o.ReadOnly=!0,i.push(o),(o=new a.a).Header="IP Address",o.DisplayMember="UserName",o.DataType="TextBlock",o.Width=parseInt(e.UserWidth),o.ReadOnly=!0,i.push(o),(o=new a.a).Header="Site",o.DisplayMember="SiteName",o.DataType="TextBlock",o.Width=parseInt(e.SiteWidth),o.ReadOnly=!0,i.push(o),(o=new a.a).Header="DB Index",o.DisplayMember="DBIndex",o.DataType="TextBlock",o.Width=70,o.ReadOnly=!0,i.push(o),e.ActiveSessionsObj.Columns=i,e.Save.Subscribe(_assertThisInitialized(e),"OnSave"),e.FillSearchDetails(),e}return _createClass(s,[{key:"OnButtonClick",value:function(e){var t=this;if("Refresh"==e)this.RefreshData();else if("Kill"==e){var s=this.ActiveSessionsObj.Table.filter((function(e){return e.Select}));0==s.length?this.DisplayMessage="Select session to kill":s.forEach((function(e){i.a.ForwardProgress.LoginGUID!=e.GUID.toString()?(i.a.ForwardProgress.KillLoginSession(e.GUID.toString()),t.ActiveSessionsObj.removeRow(e)):1==s.length&&(t.DisplayMessage="Selected session can not be killed, because its owned by you.")}))}}},{key:"RefreshData",value:function(){this.ActiveSessionsObj.Clear(),this.LicenseCount=i.a.ForwardProgress.NoOfLicenses.toString(),i.a.ForwardProgress.IsSiteWise?(this.SiteWidth="120",this.UserWidth="100"):(this.SiteWidth="0",this.UserWidth="100");var e=i.a.admin.GetAccessRights(5,i.a.ForwardProgress.LCDBIndex,i.a.ForwardProgress.IsSiteWise?"1":"0",i.a.AccessPoint,"",i.a.ForwardProgress.SessionRefreshTime.toString(),"").ds;console.log(e.Table);for(var t=0;t<e.Table.length;t++)e.Table[t].Sno=t+1,e.Table[t].Select=!1,e.Table[t].LoginTimeText=new Date(e.Table[t].LoginTime).ToString("dd MMM yyyy hh:mm:ss"),e.Table[t].LastAccessTimeText=new Date(e.Table[t].LastAccessTime).ToString("dd MMM yyyy hh:mm:ss");if(this.ActiveSessionsObj.addRows(e.Table),this.InUse=e.Table.filter((function(e){return"Active"==e.Status})).length.toString(),this.AvailableCount=(i.a.ForwardProgress.NoOfLicenses-parseInt(this.InUse)).toString(),this.ActiveSessionsObj.Columns.length>0){this.SearchCols.Items.push(l.d.ComboBoxItems_2("System Name","SysName")),this.SearchCols.Items.push(l.d.ComboBoxItems_2("IP Address","IPAddress")),this.SearchCols.Items.push(l.d.ComboBoxItems_2("Create Time","LoginTimeText")),this.SearchCols.Items.push(l.d.ComboBoxItems_2("Last Access Time","LastAccessTimeText")),this.SearchCols.Items.push(l.d.ComboBoxItems_2("Status","Status"));for(var s=0;s<this.ActiveSessionsObj.Columns.length;s++)"UserName"==this.ActiveSessionsObj.Columns[s].toString()?this.SearchCols.Items.push(l.d.ComboBoxItems_2("User","UserName")):"SiteName"==this.ActiveSessionsObj.Columns[s].toString()&&this.SearchCols.Items.push(l.d.ComboBoxItems_2("Site","SiteName"));this.SearchCols.Items.push(l.d.ComboBoxItems_2("DB Index","DBIndex"))}this.SearchCols.Items.length>0&&(this.SearchCols.SelectedValue=this.SearchCols.Items[0].Value)}},{key:"FillSearchDetails",value:function(){this.Options=new l.e(0),this.SearchCols=new l.e(0),this.Options.Items.push(l.d.ComboBoxItems_2(i.a.GetResource("Com_Equals"),"1")),this.Options.Items.push(l.d.ComboBoxItems_2(i.a.GetResource("Com_NotEquals"),"2")),this.Options.Items.push(l.d.ComboBoxItems_2(i.a.GetResource("Com_BeginsWith"),"3")),this.Options.Items.push(l.d.ComboBoxItems_2(i.a.GetResource("Com_EndsWith"),"4")),this.Options.Items.push(l.d.ComboBoxItems_2(i.a.GetResource("Com_Contains"),"5")),this.Options.Items.push(l.d.ComboBoxItems_2(i.a.GetResource("Com_NotContains"),"6")),this.Options.SelectedValue="5"}},{key:"OnSave",value:function(e){"Search"!=e.toString()&&"Filter"!=e.toString()||this.SearchGrid(e.toString())}},{key:"Setselectedrow",value:function(e){this.SelectedRow=this.ActiveSessionsObj[e]}},{key:"SearchGrid",value:function(e){if(!o.e.StringIsNullOrEmpty(this.SearchText)){var t="";if(""!=this.SearchCols.SelectedValue)t=this.SearchCols.SelectedValue;else{if(!(this.SearchCols.Items.length>0))return;t=this.SearchCols.Items[0].Value}if(this.ActiveSessionsObj.TableColumns.Contains(t)){var s=this.SelectedIndex;null!=this.SelectedRow&&this.ActiveSessionsObj.Table.indexOf(this.SelectedRow),-1==s&&(s=0)}}}}]),s}(r.b)}}]);