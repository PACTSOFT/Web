function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var o,i=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,n)}else o=i.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[189],{C0PX:function(e,t,o){"use strict";o.r(t),o.d(t,"MoveSelectedAccountViewModel",(function(){return u}));var i=o("Do2H"),n=o("ScVY"),c=o("4HhE"),s=o("n56n"),r=o("ww0f"),l=o("0/4Q"),u=function(e){_inherits(o,e);var t=_createSuper(o);function o(){var e;return _classCallCheck(this,o),(e=t.apply(this,arguments)).Move=new c.b,e._TargetAccountID=new s.b(0),e.IsAbove=!1,e.Group=[],e}return _createClass(o,[{key:"MoveSelectedAccountViewModel",value:function(e,t,o,n,c){if(this.IsAbove=n,Logger.InfoLog("MoveSelectedAccountViewModel::Entering MoveSelectedAccountViewModel with AccountID="+e+",AccName="+t),this.SelectedAccount=t,this.CCID=c,this.IsAbove?(this.TargetAccount.Label="Move Above",this.lblTarget="Move Above"):(this.TargetAccount.Label="Move After",this.lblTarget="Move After"),3!=c&&2!=c||(this.AccountID=e,this.TargetAccount.CCID=c,this.TargetAccount.TypeID=105,this.MoveLabel="Select"),3==c)this.Title="Move Product",this.MoveLabel="Selected Product",this.TargetAccount.CustomWhere=" a.parentid="+o+" and a.ProductID<> "+e+" ";else if(2==c)this.Title="Move Account",this.MoveLabel="Selected Account",this.TargetAccount.CustomWhere=" a.parentid="+o+" and a.accountid<> "+e+" ";else if(c>5e4){if(1==e)return this.DisplayMessage=i.a.GetResource("Root_Mve"),void(this.MessageVisibility=!0);this.SelectedNode=t,this.NodeID=e,this.CCID=c,this.FillControls()}this.Move.Subscribe(this,"OnMove"),this.DisplayMessage="",this.MessageVisibility=!1,Logger.InfoLog("MoveSelectedAccountViewModel::Exiting MoveSelectedAccountViewModel")}},{key:"FillControls",value:function(){this.Group=[],this.Title="Move Dimension",this.MoveLabel=i.a.GetResource("Dmn_Sel");var e=i.a.common.GetSameLevelCostCenterNodes(this.NodeID,this.CCID);if(null!=e&&e.Tables.length>1)for(var t=0;t<e.Tables[0].length;t++){var o=e.Tables[0][t];this.Group.push(l.d.ComboBoxItems_2(o[e.Columns[0][1]],o[e.Columns[0][0]]))}Logger.InfoLog("MoveAfterCostCenterViewModel::Exiting FillControls")}},{key:"OnMove",value:function(e){if(null!=e&&"Cancel"==e.toString())i.a.page.HideDialog(),this.Parent.MoveSelectedAccountVisibility=!1;else{Logger.InfoLog("MoveSelectedAccountViewModel::Entering OnMove");try{var t="";if(2==this.CCID||3==this.CCID){if(null==this.TargetAccount.SelectedValue||this.TargetAccount.SelectedValue<1||0==this.TargetAccount.SelectedValue)return this.DisplayMessage=i.a.GetResource("Select")+" "+i.a.GetResource("Move_Target"),void(this.MessageVisibility=!0)}else if(this.CCID>=5e4){if(this.SelectedGroup<=0)return this.DisplayMessage=i.a.GetResource("Select")+" "+this.lblTarget,void(this.MessageVisibility=!0);this.IsAbove?t=(new r.a).MoveAboveSelectedAccount(this.NodeID.toString(),this.SelectedGroup,4,this.CCID).Message:t=(new r.a).MoveAfterSelectedAccount(this.NodeID.toString(),this.SelectedGroup,5,this.CCID).Message}2==this.TargetAccount.CCID?this.IsAbove?t=(new r.a).MoveAboveSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,1,this.CCID).Message:t=(new r.a).MoveAfterSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,0,this.CCID).Message:3==this.TargetAccount.CCID&&(this.IsAbove?t=(new r.a).MoveAboveSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,2,this.CCID).Message:t=(new r.a).MoveAfterSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,3,this.CCID).Message),this.DisplayMessage=t,this.MessageVisibility=!0,this.Parent.tree[0].SetFocusNodeID=this.NextFocusNodeID,this.Parent.Refresh(),this.Parent.ClearSelectedNodes=!0,Logger.InfoLog("MoveSelectedAccountViewModel::Exiting OnMove")}catch(o){Logger.ErrorLog("MoveSelectedAccountViewModel:: OnMove"+o.stack)}}}},{key:"TargetAccount",get:function(){return this._TargetAccountID},set:function(e){e!=this._TargetAccountID&&(this._TargetAccountID=e)}},{key:"SelectedNode",get:function(){return this._lblSelectedNodeName},set:function(e){e!=this._lblSelectedNodeName&&(this._lblSelectedNodeName=e)}}]),o}(n.b)}}]);