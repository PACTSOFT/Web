function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,r=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{dQvv:function(e,t,n){"use strict";n.r(t),n.d(t,"DocumentNumberViewModel",(function(){return u}));var r=n("Do2H"),i=n("Lp6j"),a=n("eQJW"),s=n("ScVY"),o=n("n56n"),l=n("6z9j"),c=n("MCLT"),u=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,s,u){var C,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(_classCallCheck(this,n),(C=t.call(this)).DocNumberFields=[],C.ISTree=!1,C.IsNormal=!1,C.IsFirstCall=!1,C.Prefixdt=null,C.Parent=null,C.objRent=null,C.objparent=null,C.ClearSelectedNodes=!1,C.SelectedNodes=[],"AddEditRenContractViewModel"==e.ClassName)return _possibleConstructorReturn(C);C.ISTree=u,C.IsNormal=!u,C.Parent=e,C.Prefixdt=s;for(var S=i.e.IsType(d,"AddEditDocumentViewModel")?d:null,D=d&&"object"==typeof d&&!Object(c.isUndefined)(d.length)?d:null,f=function(t){if(parseInt(s[t].CCID.toString())>5e4){if(C.DocNumberFields.find((function(e){return e.CCID==parseInt(s[t].CCID)})))return"continue";var n=new o.b(0);if(n.CCID=parseInt(s[t].CCID.toString()),n.TypeID=1,n.Label=s[t].Name.toString(),n.DBColumnName=s[t].SysColumnName.toString(),n.Mandatory=!0,n.Row=C.DocNumberFields.length/2,n.Column=C.DocNumberFields.length%2,n.OnPactListBoxValueChanged.Subscribe(_assertThisInitialized(C),"onSelectedValueChanged"),n.SetTimeToZero(),(C.Parent.IsPOs||C.Parent.ScreenObject.GridDataColumns.Contains("FieldType"))&&n.CCID==r.a.SessionManager.RegisterCCID?(n.DefaultValue=C.Parent.ScreenObject.RegisterNodeID.toString(),n.SelectedValue=C.Parent.ScreenObject.RegisterNodeID,n.Enable=!1,C.Register=n):(C.Parent.IsPOs||C.Parent.ScreenObject.GridDataColumns.Contains("FieldType"))&&r.a.SessionManager.Preferences.ContainsKey("PosShifts")&&""!=r.a.SessionManager.Preferences.PosShifts.toString()&&parseInt(r.a.SessionManager.Preferences.PosShifts.toString())==n.CCID&&(n.DefaultValue=C.Parent.ScreenObject.ShiftNodeID.toString(),n.SelectedValue=C.Parent.ScreenObject.ShiftNodeID,C.Shift=n),e.ScreenObject.Data.Columns[0].Contains("dependanton")){var l=e.ScreenObject.Data.Tables[0].filter((function(e){return e.SysColumnName=="dcCCNID"+(n.CCID-5e4)}));if(l.length>0&&(i.e.StringIsNullOrEmpty(l[0].IsEditable)||(n.IsReadOnly=!Object(a.j)(l[0].IsEditable)),C.Parent.IsPOs&&n.CCID!=r.a.SessionManager.RegisterCCID&&e.ScreenObject.Data.Columns[0].Contains("LocalCCID")&&i.e.String(l[0].LocalCCID)==r.a.SessionManager.RegisterCCID.toString()&&e.ScreenObject.Data.Columns[1].Contains("CCNID"+(n.CCID-5e4))?(n.SelectedValue=parseInt(e.ScreenObject.Data.Tables[1][0]["CCNID"+(n.CCID-5e4)].toString()),n.DefaultValue=n.SelectedValue.toString()):i.e.IsNum(l[0].UserDefaultValue)&&(n.SelectedValue=parseInt(l[0].UserDefaultValue.toString())),i.e.IsNum(l[0].ColumnCCListViewTypeID)&&(n.TypeID=parseInt(l[0].ColumnCCListViewTypeID.toString())),!i.e.StringIsNullOrEmpty(l[0].dependanton)&&"0"!=l[0].dependanton.toString())){var c=null;null!=(c=83==parseInt(l[0].dependanton.toString())||parseInt(l[0].dependanton.toString())>5e4&&parseInt(l[0].dependanton)<50050?e.ScreenObject.Data.Tables[0].filter((function(e){return e.SysColumnName.startsWith("dcCCNID")&&e.ColumnCostCenterID==l[0].dependanton})):e.ScreenObject.Data.Tables[0].filter((function(e){return e.CostCenterColID==l[0].dependanton})))&&c.length>0&&(n.DependantOn=c[0].SysColumnName.toString(),e.ScreenObject.Data.Columns[0].Contains("dependancy")&&!i.e.StringIsNullOrEmpty(l[0].dependancy)&&(n.Dependancy=parseInt(l[0].dependancy.toString())),e.ScreenObject.Data.Columns[0].Contains("filterinuse")&&!i.e.StringIsNullOrEmpty(l[0].filterinuse)&&(n.Dependantinuse=Object(a.j)(l[0].filterinuse.toString())))}n.SelectedValue>0&&(n.IsRendred=!0)}if(0==n.SelectedValue)if(null!=S)if(S.ScreenObject.GridDataColumns.Contains("dcCCNID"+(n.CCID-5e4)))i.e.StringIsNullOrEmpty(S.ScreenObject.GridData[t]["dcCCNID"+(n.CCID-5e4)+"_Key"])||(n.SelectedValue=parseInt(S.ScreenObject.GridData[t]["dcCCNID"+(n.CCID-5e4)+"_Key"].toString()));else{var u=S.ScreenObject._CCFields.find((function(e){return e instanceof o.b&&e.CCID==n.CCID}));u&&(n.SelectedValue=u.SelectedValue)}else null!=D&&(n.SelectedValue=parseInt(D[0]["dcCCNID"+(n.CCID-5e4)].toString()));C.DocNumberFields.push(n),50001==n.CCID?C.Division=n:50002==n.CCID?C.Location=n:C.Parent.ScreenObject.CostCentersValues.ContainsKey(n.CCID.toString())?C.Parent.ScreenObject.CostCentersValues[n.CCID.toString()]="":C.Parent.ScreenObject.CostCentersValues.push(n.CCID.toString(),"")}},b=0;b<s.length;b++)f(b);if(null==C.Division&&r.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==r.a.SessionManager.Preferences.EnableDivisionWise.toString()&&(!C.Parent.ScreenObject.Preferences.ContainsKey("Donotusedivision")||""==C.Parent.ScreenObject.Preferences.Donotusedivision||!Object(a.j)(C.Parent.ScreenObject.Preferences.Donotusedivision))){var I=new o.b(0);if(I.CCID=50001,I.TypeID=1,I.DBColumnName="Name",I.Label=r.a.SessionManager.Preferences.ContainsKey("DivisionName")?r.a.SessionManager.Preferences.DivisionName:"Division",I.Mandatory=!0,I.Row=C.DocNumberFields.length/2,I.Column=C.DocNumberFields.length%2,I.OnPactListBoxValueChanged.Subscribe(_assertThisInitialized(C),"onSelectedValueChanged"),I.SetTimeToZero(),e.ScreenObject.Data.Columns[0].Contains("dependanton")){var g=e.ScreenObject.Data.Tables[0].filter((function(e){return"dcCCNID1"==e.SysColumnName}));if(g.length>0&&(i.e.StringIsNullOrEmpty(g[0].IsEditable)||(I.IsReadOnly=!Object(a.j)(g[0].IsEditable)),C.Parent.IsPOs&&e.ScreenObject.Data.Columns[0].Contains("LocalCCID")&&g[0].LocalCCID.toString()==r.a.SessionManager.RegisterCCID.toString()&&e.ScreenObject.Data.Columns[1].Contains("CCNID1")?(I.SelectedValue=parseInt(e.ScreenObject.Data.Tables[1][0].CCNID1.toString()),I.DefaultValue=I.SelectedValue.toString()):!i.e.StringIsNullOrEmpty(g[0].UserDefaultValue)&&isFinite(g[0].UserDefaultValue)&&(I.SelectedValue=parseInt(g[0].UserDefaultValue.toString())),!i.e.StringIsNullOrEmpty(g[0].dependanton)&&"0"!=g[0].dependanton.toString())){var h=null;null!=(h=83==parseInt(g[0].dependanton.toString())||parseInt(g[0].dependanton.toString())>5e4&&parseInt(g[0].dependanton.toString())<50050?e.ScreenObject.Data.Tables[0].filter((function(e){return e.ColumnCostCenterID==g[0].dependanton.toString()})):e.ScreenObject.Data.Tables[0].filter((function(e){return e.CostCenterColID==g[0].dependanton.toString()})))&&h.length>0&&(I.DependantOn=h[0].SysColumnName.toString(),e.ScreenObject.Data.Columns[0].Contains("dependancy")&&!i.e.StringIsNullOrEmpty(g[0].dependancy)&&(I.Dependancy=parseInt(g[0].dependancy.toString())),e.ScreenObject.Data.Columns[0].Contains("filterinuse")&&!i.e.StringIsNullOrEmpty(g[0].filterinuse)&&(I.Dependantinuse=Object(a.j)(g[0].filterinuse.toString())))}}if(0==I.SelectedValue)if(null!=S){var p=S.ScreenObject._CCFields.find((function(e){return e instanceof o.b&&e.CCID==I.CCID}));p&&(I.SelectedValue=p.SelectedValue)}else null!=D&&(I.SelectedValue=parseInt(D[0].dcCCNID1.toString()));C.DocNumberFields.push(I),C.Division=I}if(null==C.Location&&r.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==r.a.SessionManager.Preferences.EnableLocationWise.toString()&&(!C.Parent.ScreenObject.Preferences.ContainsKey("Donotuselocation")||""==C.Parent.ScreenObject.Preferences.Donotuselocation||!Object(a.j)(C.Parent.ScreenObject.Preferences.Donotuselocation))){var m=new o.b(0);if(m.CCID=50002,m.TypeID=1,m.DBColumnName="Name",m.Label=r.a.SessionManager.Preferences.ContainsKey("LocationName")?r.a.SessionManager.Preferences.LocationName:"Location",m.Mandatory=!0,m.Row=C.DocNumberFields.length/2,m.Column=C.DocNumberFields.length%2,m.OnPactListBoxValueChanged.Subscribe(_assertThisInitialized(C),"onSelectedValueChanged"),m.SetTimeToZero(),e.ScreenObject.Data.Columns[0].Contains("dependanton")){var P=e.ScreenObject.Data.Tables[0].filter((function(e){return"dcCCNID2"==e.SysColumnName}));if(P.length>0&&(i.e.StringIsNullOrEmpty(P[0].IsEditable)||(m.IsReadOnly=!Object(a.j)(P[0].IsEditable)),C.Parent.IsPOs&&e.ScreenObject.Data.Columns[0].Contains("LocalCCID")&&P[0].LocalCCID.toString()==r.a.SessionManager.RegisterCCID.toString()&&e.ScreenObject.Data.Columns[1].Contains("CCNID2")?(m.SelectedValue=parseInt(e.ScreenObject.Data.Tables[1][0].CCNID2.toString()),m.DefaultValue=m.SelectedValue.toString()):!i.e.StringIsNullOrEmpty(P[0].UserDefaultValue)&&isFinite(P[0].UserDefaultValue)&&(m.SelectedValue=parseInt(P[0].UserDefaultValue.toString())),!i.e.StringIsNullOrEmpty(P[0].dependanton)&&"0"!=P[0].dependanton.toString())){var O=null;null!=(O=83==parseInt(P[0].dependanton.toString())||parseInt(P[0].dependanton.toString())>5e4&&parseInt(P[0].dependanton.toString())<50050?e.ScreenObject.Data.Tables[0].filter((function(e){return e.ColumnCostCenterID==P[0].dependanton})):e.ScreenObject.Data.Tables[0].filter((function(e){return e.CostCenterColID==P[0].dependanton})))&&O.length>0&&(m.DependantOn=O[0].SysColumnName.toString(),e.ScreenObject.Data.Columns[0].Contains("dependancy")&&!i.e.StringIsNullOrEmpty(P[0].dependancy)&&(m.Dependancy=parseInt(P[0].dependancy.toString())),e.ScreenObject.Data.Columns[0].Contains("filterinuse")&&!i.e.StringIsNullOrEmpty(P[0].filterinuse)&&(m.Dependantinuse=Object(a.j)(P[0].filterinuse.toString())))}}if(0==m.SelectedValue)if(null!=S){var N=S.ScreenObject._CCFields.find((function(e){return e instanceof o.b&&e.CCID==m.CCID}));N&&(m.SelectedValue=N.SelectedValue)}else null!=D&&(m.SelectedValue=parseInt(D[0].dcCCNID2.toString()));C.DocNumberFields.push(m),C.Location=m}if(C.ISTree){if(C.ISTree){C.tree=[];var y=new l.a;y.TreeViewModel_5(3,_assertThisInitialized(C),0,"",""),y.HeaderVisiblity=!1,C.tree.push(y);var j=i.e.IntTryParse(r.a.SessionManager.Preferences["Maintain Dimensionwise stock"]);if(r.a.SessionManager.Preferences.ContainsKey("Maintain Dimensionwise stock")&&j>0&&!C.DocNumberFields.find((function(e){return e instanceof o.b&&e.CCID==j}))){var v=new o.b(0);v.CCID=j,v.TypeID=1,v.DBColumnName="Name";var V=C.Parent.ScreenObject._CCFields.find((function(e){return e instanceof o.b&&e.CCID==j}));if(V)v.Label=V.Label;else{var M=C.Parent.ScreenObject.ColumnSource.find((function(e){return e.CostCenterID==j}));v.Label=M?M.Header:C.Parent.ScreenObject.GetCostcenterName(j)}if(v.Mandatory=!0,v.Row=C.DocNumberFields.length/2,v.Column=C.DocNumberFields.length%2,e.ScreenObject.Data.Columns[0].Contains("dependanton")){var L=e.ScreenObject.Data.Tables[0].filter((function(e){return"dcCCNID2"==e.SysColumnName}));if(L.length>0&&!i.e.StringIsNullOrEmpty(L[0].dependanton)&&"0"!=L[0].dependanton.toString()){var T=null;null!=(T=83==parseInt(L[0].dependanton.toString())||parseInt(L[0].dependanton.toString())>5e4&&parseInt(L[0].dependanton.toString())<50050?e.ScreenObject.Data.Tables[0].filter((function(e){return e.ColumnCostCenterID==L[0].dependanton})):e.ScreenObject.Data.Tables[0].filter((function(e){return e.CostCenterColID==L[0].dependanton})))&&T.length>0&&(v.DependantOn=T[0].SysColumnName.toString(),e.ScreenObject.Data.Columns[0].Contains("dependancy")&&!i.e.StringIsNullOrEmpty(L[0].dependancy)&&(v.Dependancy=parseInt(L[0].dependancy.toString())),e.ScreenObject.Data.Columns[0].Contains("filterinuse")&&!i.e.StringIsNullOrEmpty(L[0].filterinuse)&&(v.Dependantinuse=Object(a.j)(L[0].filterinuse.toString())))}}C.DocNumberFields.push(v),C.Parent.ScreenObject.CostCentersValues.ContainsKey(v.CCID.toString())?C.Parent.ScreenObject.CostCentersValues[v.CCID.toString()]="":C.Parent.ScreenObject.CostCentersValues.push(v.CCID.toString(),"")}}}else C.OnSave("Save");return C.SetFocus(),_possibleConstructorReturn(C)}return _createClass(n,[{key:"InitVariables",value:function(e){this.Parent=e,this.Prefixdt=e.ScreenObject.Data.Tables[8],this.Division=this.DocNumberFields.find((function(e){return 50001==e.CCID})),this.Location=this.DocNumberFields.find((function(e){return 50002==e.CCID})),this.Parent.IsPOs&&(r.a.SessionManager.Preferences.ContainsKey("PosShifts")&&""!=r.a.SessionManager.Preferences.PosShifts.toString()&&parseInt(r.a.SessionManager.Preferences.PosShifts.toString())>5e4&&(this.Shift=this.DocNumberFields.find((function(e){return e.CCID==parseInt(r.a.SessionManager.Preferences.PosShifts.toString())}))),this.Register=this.DocNumberFields.find((function(e){return e.CCID==r.a.SessionManager.RegisterCCID})))}},{key:"CommandController",value:function(e){}},{key:"SetFocus",value:function(){this.DocNumberFields.length>0&&(this.DocNumberFields[0].SetFocus=!0)}},{key:"onSelectedValueChanged",value:function(e){var t=this,n=e,r="dcccnid"+(n.CCID-5e4);this.DocNumberFields.filter((function(e){return null!=e.DependantOn&&e.DependantOn.toLowerCase()==r})).forEach((function(n){if(n instanceof o.b){var r="";n.CCID>5e4?n.Dependantinuse?(r="(ccnid"+(e.CCID-5e4)+"="+e.SelectedValue.toString(),1==n.Dependancy&&(r+=" OR ccnid"+(e.CCID-5e4)+"=1 "),r+=")"):r=5==n.Dependancy?"  JOIN "+t.Parent.ScreenObject.GetTableName(n.CCID)+" CMJ with(nolock) ON a.lft between  CMJ.lft and CMJ.rgt JOIN COM_CostCenterCostCenterMap CM on CM.CostCenterID="+n.CCID+" and CM.ParentCostCenterID="+e.CCID+" and CM.ParentNodeID="+e.SelectedValue.toString()+" and CMJ.NodeID=CM.NodeID ":"  JOIN "+t.Parent.ScreenObject.GetTableName(n.CCID)+" CMJ with(nolock) ON a.lft between  CMJ.lft and CMJ.rgt JOIN COM_CostCenterCostCenterMap CM on CM.CostCenterID="+e.CCID+" and CM.ParentCostCenterID="+n.CCID+" and CM.NodeID="+e.SelectedValue.toString()+" and CMJ.NodeID=CM.ParentNodeID ":65==n.CCID&&(r="(FeatureID="+e.CCID+" and  FeaturePK="+e.SelectedValue.toString()+")"),n.CustomWhere=r}}));var a=this.Parent.ScreenObject._CCFields.find((function(e){return e instanceof o.b&&e.CCID==n.CCID}));if(a&&this.Parent.ScreenObject.Data.Tables[0].filter((function(e){return e.SysColumnName.startsWith("dcCCNID")&&e.LocalReference==a.DBColumnID})).length>0){var s=this.Parent.ScreenObject.GetLinkRefDataSet(a.DBColumnID,this.Parent.DocumentID,n.SelectedValue,this.Parent.DocumentDate,a.DBColumnName,n.CCID,null);if(null!=s&&s.Tables.length>0&&s.Tables[0].length>0)for(var l=0;l<s.Columns[0].length;l++)s.Columns[0][l].toUpperCase().Contains("CCNID")&&!i.e.StringIsNullOrEmpty(s.Tables[0][0][s.Columns[0][l]])&&function(){var e=i.e.IntTryParse(s.Columns[0][l].toUpperCase().replace("DCCCNID",""));if(e>0){e+=5e4;var n=t.DocNumberFields.find((function(t){return t.CCID==e}));n&&(n.SelectedValue=parseInt(s.Tables[0][0][s.Columns[0][l]].toString()))}}()}}},{key:"DocumentNumberViewModel_1",value:function(e){var t;if(this.objRent=e,r.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"true"==r.a.SessionManager.Preferences.EnableLocationWise.toString().toLowerCase()&&r.a.SessionManager.Preferences.ContainsKey("LW Contracts")&&"true"==r.a.SessionManager.Preferences["LW Contracts"].toString().toLowerCase()&&((t=new o.b(0)).CCID=50002,t.TypeID=1,t.DBColumnName="Name",t.Label=r.a.SessionManager.Preferences.ContainsKey("LocationName")?r.a.SessionManager.Preferences.LocationName:"Location",t.Mandatory=!0,t.Row=this.DocNumberFields.length/2,t.Column=this.DocNumberFields.length%2,this.DocNumberFields.push(t),this.Location=t),r.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"true"==r.a.SessionManager.Preferences.EnableDivisionWise.toString().toLowerCase()&&r.a.SessionManager.Preferences.ContainsKey("DW Contracts")&&"true"==r.a.SessionManager.Preferences["DW Contracts"].toString().toLowerCase()&&((t=new o.b(0)).CCID=50001,t.TypeID=1,t.DBColumnName="Name",t.Label=r.a.SessionManager.Preferences.ContainsKey("DivisionName")?r.a.SessionManager.Preferences.DivisionName:"Division",t.Mandatory=!0,t.Row=this.DocNumberFields.length/2,t.Column=this.DocNumberFields.length%2,this.DocNumberFields.push(t),this.Division=t),e.DimWiseFields>5e4){var n=e.ScreenObject.GetCustomField("CCNID"+(e.DimWiseFields-5e4).toString());(t=new o.b(0)).CCID=e.DimWiseFields,t.TypeID=1,t.DBColumnName="Name",t.Label=n?n.Label:"view",t.Mandatory=!0,t.Row=this.DocNumberFields.length/2,t.Column=this.DocNumberFields.length%2,this.DocNumberFields.push(t),this.Register=t}this.IsNormal=!0,this.SetFocus()}},{key:"DocumentNumberViewModel_2",value:function(e){this.objparent=e,this.IsNormal=!0}},{key:"OnSave",value:function(e){var t,s=this;if("Save"==e.toString()||"ReSave"==e.toString()){if(null!=this.Parent){for(var l=function(e){var t=s.DocNumberFields[e],n=t.GetValidationError("SelectedValue");if(!i.e.StringIsNullOrEmpty(n))return{v:(s.DisplayMessage=n,void(s.MessageVisibility=!0))};if(!i.e.StringIsNullOrEmpty(t.DependantOn)&&t.DependantOn.toLowerCase().startsWith("dcccnid")){var a=s.DocNumberFields.find((function(e){return e.CCID==parseInt(t.DependantOn.toLowerCase().replace("dcccnid",""))+5e4}));if(!s.Parent.ScreenObject.IsValidSelection(a,t))return{v:(s.DisplayMessage=r.a.GetResource("Invalid")+" "+t.Label,void(s.MessageVisibility=!0))}}},c=0;c<this.DocNumberFields.length;c++){var u=l(c);if("object"==typeof u)return u.v}this.Parent.ScreenObject.DocPrefix.Prefixes.Clear();for(var C="",d=0,S=function(e){if(0==e&&(d=parseInt(s.Prefixdt[e].SeriesNo.toString())),i.e.StringIsNullOrEmpty(s.Prefixdt[e].SeriesNo)||parseInt(s.Prefixdt[e].SeriesNo.toString())==d||(null==s.Parent.ScreenObject.DocPrefix||s.Parent.ScreenObject.DocPrefix.Prefixes.ContainsKey(C)||s.Parent.ScreenObject.DocPrefix.Prefixes.push(C,Object(a.j)(s.Prefixdt[e-1].Isdefault.toString())),d=parseInt(s.Prefixdt[e].SeriesNo.toString()),C=""),51==parseInt(s.Prefixdt[e].CCID.toString())||52==parseInt(s.Prefixdt[e].CCID.toString())||53==parseInt(s.Prefixdt[e].CCID.toString()))C+="'"+s.Prefixdt[e].Length.toString()+"'"+s.Prefixdt[e].Delimiter.toString();else if(54==parseInt(s.Prefixdt[e].CCID.toString()))C+=s.Prefixdt[e].Length.toString()+s.Prefixdt[e].Delimiter.toString();else{var t=s.DocNumberFields.find((function(t){return t.CCID==parseInt(s.Prefixdt[e].CCID.toString())}));t&&(C+=n.GetTrimString(s.Parent.ScreenObject.GetDocNumberString(s.Prefixdt[e].SysColumnName.toString(),t.CCID,t.SelectedValue),parseInt(s.Prefixdt[e].Length.toString()))+s.Prefixdt[e].Delimiter.toString(),s.Parent.ScreenObject.CostCentersValues[t.CCID.toString()]=t.SelectedValue.toString())}},D=0;D<this.Prefixdt.length;D++)S(D);if(this.Prefixdt.length>0&&null!=this.Parent.ScreenObject.DocPrefix&&!this.Parent.ScreenObject.DocPrefix.Prefixes.ContainsKey(C)&&this.Parent.ScreenObject.DocPrefix.Prefixes.push(C,Object(a.j)(this.Prefixdt[this.Prefixdt.length-1].Isdefault.toString())),this.Parent.DialogResult=!0,null!=this.Division&&r.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==r.a.SessionManager.Preferences.EnableDivisionWise.toString()?(this.Parent.ScreenObject.DivisionID=this.Division.SelectedValue,this.Parent.ScreenObject.DivisionName=this.Division.Text):null!=this.Division&&(this.Parent.ScreenObject.CostCentersValues.ContainsKey("50001")?this.Parent.ScreenObject.CostCentersValues[50001]=this.Division.SelectedValue.toString():this.Parent.ScreenObject.CostCentersValues.push("50001",this.Division.SelectedValue.toString())),null!=this.Location&&r.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==r.a.SessionManager.Preferences.EnableLocationWise.toString()?(this.Parent.ScreenObject.LocationID=this.Location.SelectedValue,this.Parent.ScreenObject.LocationName=this.Location.Text):null!=this.Location&&(this.Parent.ScreenObject.CostCentersValues.ContainsKey("50002")?this.Parent.ScreenObject.CostCentersValues[50002]=this.Location.SelectedValue.toString():this.Parent.ScreenObject.CostCentersValues.push("50002",this.Location.SelectedValue.toString())),this.Parent.IsPOs&&null!=this.Shift&&this.Shift.SelectedValue!=this.Parent.ScreenObject.ShiftNodeID&&(this.Parent.ScreenObject.ShiftNodeID=this.Shift.SelectedValue),this.ISTree){this.DisplayMessage="Loading data.Please wait...",this.MessageVisibility=!0;var f=i.e.IntTryParse(r.a.SessionManager.Preferences["Maintain Dimensionwise stock"]);if(r.a.SessionManager.Preferences.ContainsKey("Maintain Dimensionwise stock")&&f>0){var b=this.DocNumberFields.find((function(e){return e instanceof o.b&&e.CCID==f}));if(b){this.Parent.ScreenObject.CostCentersValues[f.toString()]=b.SelectedValue.toString();var I=this.Parent.ScreenObject._CCFields.find((function(e){return e instanceof o.b&&e.CCID==f}));I&&(I.SelectedValue=b.SelectedValue)}}if(null!=this.Location){var g=this.Parent.ScreenObject._CCFields.find((function(e){return e instanceof o.b&&50002==e.CCID}));g&&(g.SelectedValue=this.Location.SelectedValue)}if(null!=this.Division){var h=this.Parent.ScreenObject._CCFields.find((function(e){return e instanceof o.b&&50001==e.CCID}));h&&(h.SelectedValue=this.Division.SelectedValue)}if(this.tree&&null!=this.tree[0].SelectedNodes&&this.tree[0].SelectedNodes.length>0&&!this.tree[0].IsDynamicTree){for(var p,m=0,P=0;P<this.Parent.ScreenObject.GridData.length;P++)if(i.e.StringIsNullOrEmpty(this.Parent.ScreenObject.GridData[P].ProductID_Key)){m=P;break}P=0,this.tree[0].SelectedNodes.forEach((function(e){if(!e.IsGroup){if(p=s.Parent.ScreenObject.GridDataObj.NewRow(),s.Parent.ScreenObject.GridDataObj.insertRowAt(p,m+P),f>5e4&&s.Parent.ScreenObject.GridDataColumns.Contains("dcCCNID"+(f-5e4).toString())){var t=s.DocNumberFields.find((function(e){return e instanceof o.b&&e.CCID==f}));t&&(p["dcCCNID"+(f-5e4).toString()+"_Key"]=t.SelectedValue)}null!=s.Location&&s.Parent.ScreenObject.GridDataColumns.Contains("dcCCNID2")&&(p.dcCCNID2_Key=s.Location.SelectedValue),null!=s.Division&&s.Parent.ScreenObject.GridDataColumns.Contains("dcCCNID1")&&(p.dcCCNID1_Key=s.Division.SelectedValue),s.Parent.IsInventoryVoucher=!0,p.ProductID_Key=e.Id,s.Parent.AddProductData(p,!1,!0),s.Parent.CalculateTotals(p,!1),P++}})),this.Parent.ScreenObject.UpdateSequence(),this.Parent.RefreshGrid=!this.Parent.RefreshGrid}}this.Parent.ScreenObject.DocPrefix.ComboBox.IsRendred=!1,this.Parent.ScreenObject.FillDocumentPrefix(!1)}else if(null!=this.objRent){for(var O=0;O<this.DocNumberFields.length;O++){var N=this.DocNumberFields[O].GetValidationError("SelectedValue");if(!i.e.StringIsNullOrEmpty(N))return this.DisplayMessage=N,void(this.MessageVisibility=!0)}null!=this.Location&&null!=this.Location&&this.objRent.ChangeLocation(this.Location.SelectedValue),null!=this.Division&&null!=this.Division&&(this.objRent.DivisionContract.SelectedValue=this.Division.SelectedValue),null!=this.Register&&null!=this.Register&&(this.objRent.DimWiseFieldsID=this.Register.SelectedValue)}else null!=this.objparent&&this.DocNumberFields.forEach((function(e){var t=e.GetValidationError("SelectedValue");if(!i.e.IsEmpty(t))return s.DisplayMessage=t,void(s.MessageVisibility=!0)}));"Save"==e.toString()&&(r.a.page.HideDialog(),this.DialogCallBack(!this.IsFirstCall))}else"Cancel"==e.toString()&&(null!=this.objparent&&this.DocNumberFields.forEach((function(e){var t=e.GetValidationError("SelectedValue");if(!i.e.IsEmpty(t))return s.DisplayMessage=t,void(s.MessageVisibility=!0)})),null!=this.Parent&&(this.Parent.DialogResult=!1),null!=this.objRent&&(this.objRent.DialogResult=!1),r.a.page.HideDialog(),null!=this.Parent&&this.Parent.ToLinkParent?(this.Parent.ToLinkParent.GenerateLinkDocument_Sub1(this.Parent),this.Parent.ToLinkParent=null):this.IsFirstCall&&(null===(t=r.a.page.ActiveTab.params)||void 0===t?void 0:t.obj)==this.Parent&&r.a.page.removeActiveTab())}}],[{key:"GetTrimString",value:function(e,t){return null!=e&&t>=0&&e.length>t?e.substr(0,t):e}}]),n}(s.b)}}]);