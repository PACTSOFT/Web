(window.webpackJsonp=window.webpackJsonp||[]).push([[149,75,77,89,113,121,141,148,150,160,210,212],{"7D6E":function(e,t,s){"use strict";s.r(t),s.d(t,"BulkDocumentPostingViewModel",(function(){return g}));var i=s("Do2H"),n=s("Lp6j"),o=s("eQJW"),a=s("ScVY"),r=s("n56n"),l=s("0/4Q"),h=s("8B8H"),u=s("ockk"),D=s("lUlH"),m=s("vTM8"),c=s("jDOZ"),C=s("1Cra"),d=s("MCKn");class p extends a.b{constructor(e,t,s,i,n,o){super(),this.CostCenterID=0,this.CostCenterName="",this.Cnt=0,this.DesCols=null,this.DocLinkDefID=0,this.LocID=0,Logger.InfoLog("BulkPostingViewModel::Entering BulkPostingViewModel"),this.LocID=o,this.Docs=e,this.CostCenterID=t,this.DesCols=n,this.CostCenterName=s,this.DocLinkDefID=i,this.LoadDocument(),Logger.InfoLog("BulkPostingViewModel::Exiting BulkPostingViewModel"),this.DisplayName=this.Document.DisplayName}onButtonClick(e){"Done"==e?i.a.page.HideDialog():"Next"==e&&(this.Cnt++,this.LoadDocument())}LoadDocument(){if(this.Cnt<this.Docs.length){this.Document=new C.AddEditDocumentViewModel(this.CostCenterID,this.CostCenterName,!0),this.Document.ChangeLocation(!1,!1,this.LocID),this.Document.ScreenObject.LocationID=this.LocID,this.Document.ScreenObject.SetDefaultValuesforCostCenters(0);for(let e=0;e<this.Docs.values[this.Cnt].length;e++)this.Document.FillLink(this.Docs.values[this.Cnt].keys[e],this.DocLinkDefID,this.Docs.values[this.Cnt].values[e],this.DesCols);if(null!=this.Document.ScreenObject.CreditAccount&&(this.Document.ScreenObject.CreditAccount.SelectedValue=this.Docs.keys[this.Cnt]),null!=this.Document.ScreenObject.Link){let e;this.Document.ScreenObject.Link.LinkCombo.SelectedValue=this.DocLinkDefID.toString(),e=this.Document.ScreenObject.GetLinkDetails(parseInt(this.Document.ScreenObject.Link.LinkCombo.SelectedValue),this.Document.ScreenObject.DocDate.Date.ToString("dd/MMM/yyyy"),null!=this.Document.ScreenObject.DueDate&&this.Document.ScreenObject.DueDate.Date?this.Document.ScreenObject.DueDate.Date.ToString("dd/MMM/yyyy"):""),e.Tables.length>0&&e.Columns[0].Contains("voucherno")&&(this.Document.ScreenObject.Link.VouchersList=e.Tables[0].AsDataView(),this.Document.ScreenObject.FillPendingList(!0))}this.Document.ScreenObject.UpdateSequence(),this.Document.RefreshGrid=!0}}}var S=s("u7dY");class g extends a.b{constructor(){super(),this.StaticFields=new Array,this.lstLocation=new r.b(0),this.lstNames=new l.e(0),this.dvLoadNames=null,this.dtCompleteData=null,this.dtCompleteData_Columns=null,this.dtLinkColumns=null,this.dtLinkColumns_Columns=null,this.Source=0,this.Destination=0,this.LinkDefId=0,this.DestinationName="",this.dvSouceColumns=null,this.dvSouceColumnsTable=null,this.destinationCOls=new Array,this.lst1=new Array,this.lstCombo=new Array,this.sbAccounts="",this.strStatic="",this.sbNumeric="",this.sbText="",this.sbCC="",this.DisplayName=i.a.GetResource("BulkDocumentPosting"),this.Title=this.DisplayName,this.lstLocation.Label=i.a.GetResource("Location"),this.lstNames.Label=i.a.GetResource("AccountCreate_Name"),this.lstLocation.CCID=50002,this.lstLocation.TypeID=1,this.LoadGrid();let e=c.a.GetBulkDocumentInfo(0,0);this.LoadNames(e)}LoadNames(e){if(this.lstNames.Items.Clear(),null!=e&&e.Tables[0].length>0){for(let t=0;t<e.Tables[0].length;t++)this.lstNames.Items.push(l.d.ComboBoxItems_2(e.Tables[0][t].NAME.toString(),e.Tables[0][t].BULKID.toString()));this.dvLoadNames=e.Tables[0].DefaultView}this.lstNames.Items.push(l.d.ComboBoxItems_2("New","-100"))}LoadGrid(){this.Grid=new h.a,this.Grid.CanUserDeleteRows=!0,this.Grid.Table=[],this.Grid.TableColumns.push("Sno"),this.Grid.TableColumns.push("Doc No"),this.Grid.Height=0;let e=new u.a;this.Grid.Columns=new Array,e=new u.a,e.Header="S No",e.DisplayMember="Sno",e.DataType="TextBlock",e.Width=150,this.Grid.Columns.push(e),e=new u.a,e.Header="Doc No",e.DisplayMember="Doc No",e.DataType="TextBlock",e.Width=250,this.Grid.Columns.push(e);for(let t=0;t<20;t++)this.Grid.addEmptyRow()}OnClick(e){if("Show"==e.toString()){if(this.MessageVisibility=!1,0==this.lstLocation.SelectedValue)return this.DisplayMessage="Please Select Location",void(this.MessageVisibility=!0);if(null==this.lstNames.SelectedValue)return this.DisplayMessage="Please Select Name",void(this.MessageVisibility=!0);let e=c.a.GetBulkDocumentInfo(parseInt(this.lstNames.SelectedValue),this.lstLocation.SelectedValue);if(null!=e&&e.Tables.length>0&&e.Columns[0].Contains("UserColumnName")){this.Grid.Table=[],this.Grid.TableColumns=[];let t=new Array;this.Grid.Columns=new Array;let s=new u.a;this.Grid.TableColumns.push("InvDocDetailsID"),this.Grid.TableColumns.push("DocNo"),this.Grid.Columns=new Array,s=new u.a,s.Header="#",s.DisplayMember="Select",s.DataType="CheckBox",s.Width=50,s.IsFrozen=!0,t.push(s),this.Grid.TableColumns.push("Select"),this.destinationCOls.Clear(),e.Tables[0].forEach(i=>{if(s=this.AddColumns(t,s,i),null!=this.lstLocation&&this.lstLocation.SelectedValue>0&&(s.LocationID=this.lstLocation.SelectedValue),"2"==i.Type.toString()&&this.destinationCOls.push(i.SysColumnName.toString()),e.Tables.length>6&&e.Columns[6].Contains("CostCenterColID")){let t=e.Tables[6].filter(e=>e.CostCenterColID==s.ID);t.length>0&&(s.FilterCondition=t[0].UserProbableValues.toString())}}),this.Grid.Columns=t;let i=e.Tables[0];this.dvSouceColumns=i,this.dvSouceColumnsTable=i,i=e.Tables[0].filter(e=>1==e.Type);let n=i.length;i.length>0&&(this.Source=parseInt(i[0].Document.toString())),i=e.Tables[0].filter(e=>2==e.Type),i.length>0&&(this.Destination=parseInt(i[0].Document.toString()),this.DestinationName=i[0].DocumentName.toString()),null!=e&&e.Tables.length>0&&e.Tables[1].length>0&&this.LoadEditData(e,n),null!=e&&e.Tables.length>0&&e.Tables[4].length>0&&(this.dtCompleteData=e.Tables[4],this.dtCompleteData_Columns=e.Columns[4]),null!=e&&e.Tables.length>5&&e.Tables[5].length>0&&(this.LinkDefId=parseInt(e.Tables[5][0][0].toString())),null!=e&&e.Tables.length>0&&e.Tables[3].length>0&&(this.dtLinkColumns=e.Tables[3],this.dtLinkColumns_Columns=e.Columns[3])}}else if("Post"==e.toString()&&this.ValidateOnGrid())try{this.PostDocument()}catch(t){throw t}}ValidateOnGrid(){let e=!1;for(let t=0;t<this.Grid.Table.length;t++)if(this.Grid.TableColumns.Contains("Select")&&Object(o.j)(this.Grid.Table[t].Select)){for(let e=1;e<this.Grid.Columns.length;e++)if(this.Grid.Columns[e].Mandatory&&(null==this.Grid.Table[t][this.Grid.Columns[e].DisplayMember].toString()||""==this.Grid.Table[t][this.Grid.Columns[e].DisplayMember].toString()||"0"==this.Grid.Table[t][this.Grid.Columns[e].DisplayMember].toString()))return this.DisplayMessage="Please provide valid details at Column : '"+this.Grid.Columns[e].Header+"'   at  row no:"+(t+1).toString(),this.MessageVisibility=!0,!1;e=!0}return e}CheckForSourceColumnsUpdate(){for(let e=1;e<this.Grid.Columns.length;e++)if(this.Grid.Columns[e].isUpdate)return!0;return!1}CheckForSourceColumnsUpdate_str(e){for(let t=1;t<this.Grid.Columns.length;t++)if(e==this.Grid.Columns[t].DisplayMember&&this.Grid.Columns[t].isUpdate)return!0;return!1}CheckForSourceColumnsUpdate_num(e){for(let t=1;t<this.Grid.Columns.length;t++)if(e.toString()==this.Grid.Columns[t].ID&&this.Grid.Columns[t].isUpdate)return!0;return!1}ReturnINVDocIDsNos(e,t){let s="";if((t=t.filter(t=>t.CreditAccount_Key==e)).length>0)for(let i=0;i<t.length;i++)n.e.IsEmpty(t[i].InvDocDetailsID)||(s+="'"+t[i].InvDocDetailsID.toString()+"',");return s.Trim(",")}ReturnDocIDs(e,t){let s="";if((t=t.filter(t=>t.VoucherNo==e)).length>0)for(let i=0;i<t.length;i++)n.e.IsEmpty(t[i].DocID)||(s+="'"+t[i].DocID.toString()+"',");return s.Trim(",")}PostDocument(){this.lst1.Clear(),this.lstCombo.Clear(),this.DisplayMessage="",this.MessageVisibility=!1;let e="",t=new D.a(0,0),s=this.dtCompleteData,a="";if(this.lst1.Clear(),this.lstCombo.Clear(),this.dvSouceColumns=this.dvSouceColumnsTable.filter(e=>1==e.Type),this.CheckForSourceColumnsUpdate()){for(let n=0;n<this.Grid.Table.length&&this.Grid.TableColumns.Contains("DocNo");n++){if(""==this.Grid.Table[n].Select.toString()||0==Object(o.j)(this.Grid.Table[n].Select))continue;let i={sbRows:e,DocIDS:a};this.UpdateSourceDocument(i,t,s,n),e=i.sbRows,a=i.DocIDS}let i=c.a.GetBulkDocumentInfo(parseInt(this.lstNames.SelectedValue),this.lstLocation.SelectedValue);null!=i&&i.Tables.length>0&&i.Tables[4].length>0&&(this.dtCompleteData=i.Tables[4],this.dtCompleteData_Columns=i.Columns[4]),s=this.dtCompleteData}if(this.Destination>0){this.lst1.Clear(),this.lstCombo.Clear();let e=new m.c,t=0;for(let s=0;s<this.Grid.Table.length;s++)if(""!=this.Grid.Table[s].Select.toString()&&0!=Object(o.j)(this.Grid.Table[s].Select))if(t=0,this.Grid.TableColumns.Contains("CreditAccount")&&n.e.Int(this.Grid.Table[s].CreditAccount_Key)>0?t=parseInt(this.Grid.Table[s].CreditAccount_Key):this.Grid.TableColumns.Contains("CreditAccount1_Key")&&n.e.Int(this.Grid.Table[s].CreditAccount1_Key)>0&&(t=parseInt(this.Grid.Table[s].CreditAccount1_Key)),e.ContainsKey(t))e[t].ContainsKey(this.Grid.Table[s].DocNo.toString())||e[t].push(this.Grid.Table[s].DocNo.toString(),new Array),e[t][this.Grid.Table[s].DocNo.toString()].push(this.Grid.Table[s]);else{let i=new m.a;i.push(this.Grid.Table[s].DocNo.toString(),new Array),i[this.Grid.Table[s].DocNo.toString()].push(this.Grid.Table[s]),e.push(t,i)}if(e.length>0){let t=i.a.SessionManager.LocationID;null!=this.lstLocation&&this.lstLocation.SelectedValue>0&&(t=this.lstLocation.SelectedValue);let s=new p(e,this.Destination,this.DestinationName,this.LinkDefId,this.destinationCOls,t);i.a.page.ShowDialog(s,S.a,{ShowCenter:!0})}}}GetSourceColumnData(e,t){if(e>0){let s=this.Grid.Table.filter(t=>t.InvDocDetailsID==e);if(s.length>0&&("PRODUCTID1"==t.toUpperCase()&&(t="ProductID1_Key"),this.Grid.TableColumns.Contains(t)))return s[0][t].toString()}return""}UpdateSourceDocument(e,t,s,i){let n=0,o=0,a=0,r="";if(this.Grid.TableColumns.Contains("DocNo")&&(this.Grid.TableColumns.Contains("DocNo")&&(r=this.Grid.Table[i].DocNo.toString()),e.DocIDS=this.ReturnDocIDs(r,this.dtCompleteData),0==this.lst1.filter(e=>e.Name==r.toString()).length)){let i=0;s=s.filter(t=>e.DocIDS.split(",").Contains(t.DocID)),this.lst1.push(l.d.ComboBoxItems_1(r.toString())),s.length>0&&(a=parseInt(s[0].DocID)),e.sbRows="",e.sbRows+="<DocumentXML>",this.strStatic="",this.sbNumeric="",this.sbText="",this.sbCC="",this.sbAccounts="",o=this.CheckForSourceColumnsUpdate_str("DebitAccount1")?parseInt(this.GetSourceColumnData(parseInt(s[0].InvDocDetailsID.toString()),"DebitAccount1_Key")):parseInt(s[0].DebitAccount),this.sbAccounts=" DebitAccount="+o,this.sbAccounts+=",",n=this.CheckForSourceColumnsUpdate_str("CreditAccount1")?parseInt(this.GetSourceColumnData(parseInt(s[0].InvDocDetailsID.toString()),"CreditAccount1_Key")):parseInt(s[0].CreditAccount),this.sbAccounts+=" CreditAccount="+n,this.sbAccounts+=",";for(let e=0;e<s.length;e++)if(this.lstCombo.Clear(),this.sbNumeric="",this.sbText="",this.sbCC="",this.strStatic="",this.dtLinkColumns&&this.dtLinkColumns.length>0){this.lstCombo.push(l.d.ComboBoxItems_1("DebitAccount")),this.lstCombo.push(l.d.ComboBoxItems_1("CreditAccount")),this.lstCombo.push(l.d.ComboBoxItems_1("Amount")),this.lstCombo.push(l.d.ComboBoxItems_1("CurrencyID")),this.lstCombo.push(l.d.ComboBoxItems_1("ExchangeRate"));for(let t=0;t<this.dvSouceColumns.length;t++)0==this.lstCombo.filter(e=>e.Name==this.dvSouceColumns[t].SysColumnName.toString()).length&&this.dtCompleteData_Columns.Contains(this.dvSouceColumns[t].SysColumnName.toString())&&this.BuildSourceColumnData(s,e,t);this.sbNumeric.length>0&&(this.sbNumeric=this.sbNumeric.Trim(",")+" where InvDocDetailsID="+s[e].InvDocDetailsID.toString()),this.sbText.length>0&&(this.sbText=this.sbText.Trim(",")+" where InvDocDetailsID="+s[e].InvDocDetailsID.toString()),this.sbCC.length>0&&(this.sbCC=this.sbCC.Trim(",")+" where  InvDocDetailsID="+s[e].InvDocDetailsID.toString()),this.strStatic.length>0&&(this.strStatic=this.strStatic.Trim(",")+" where  InvDocDetailsID="+s[e].InvDocDetailsID.toString()),i=t.UpdateBulkInventoryDocument(this.sbAccounts.Trim(","),this.strStatic,this.sbNumeric,this.sbText,this.sbCC,this.Source,a).RetValue}i>0&&(this.DisplayMessage="Sucessfully Updated"),this.MessageVisibility=!0}}BuildSourceColumnData(e,t,s){this.lstCombo.push(l.d.ComboBoxItems_1(this.dvSouceColumns[s].SysColumnName.toString())),this.dvSouceColumns[s].SysColumnName.toString().Contains("dcNum")?this.CheckForSourceColumnsUpdate_num(parseInt(this.dvSouceColumns[s].CostcenterColID))&&(this.sbNumeric+=this.dvSouceColumns[s].SysColumnName.toString()+"='"+this.GetSourceColumnData(parseInt(e[t].InvDocDetailsID.toString()),this.dvSouceColumns[s].SysColumnName.toString()+"1")+"',"):this.dvSouceColumns[s].SysColumnName.toString().Contains("dcCCNID")?this.CheckForSourceColumnsUpdate_num(parseInt(this.dvSouceColumns[s].CostcenterColID))&&(this.sbCC+=this.dvSouceColumns[s].SysColumnName.toString()+"='"+this.GetSourceColumnData(parseInt(e[t].InvDocDetailsID.toString()),this.dvSouceColumns[s].SysColumnName.toString()+"1_Key")+"',"):this.dvSouceColumns[s].SysColumnName.toString().Contains("dcAlpha")?this.CheckForSourceColumnsUpdate_num(parseInt(this.dvSouceColumns[s].CostcenterColID))&&(this.sbText+=this.dvSouceColumns[s].SysColumnName.toString()+"='"+this.GetSourceColumnData(parseInt(e[t].InvDocDetailsID.toString()),this.dvSouceColumns[s].SysColumnName.toString()+"1")+"',"):(this.dvSouceColumns[s].SysColumnName.toString().Contains("Quantity"),this.CheckForSourceColumnsUpdate_num(parseInt(this.dvSouceColumns[s].CostcenterColID))&&(this.strStatic+=this.dvSouceColumns[s].SysColumnName.toString()+"='"+this.GetSourceColumnData(parseInt(e[t].InvDocDetailsID.toString()),this.dvSouceColumns[s].SysColumnName.toString()+"1")+"',"))}FreshDocument(e,t,s,n){let o,a,r,h,u=0;if(this.Grid.TableColumns.Contains("CreditAccount")&&(u=""!=this.Grid.Table[n].CreditAccount_Key&&0!=parseInt(this.Grid.Table[n].CreditAccount_Key)?parseInt(this.Grid.Table[n].CreditAccount_Key):parseInt(this.Grid.Table[n].CreditAccount1_Key),e.DocIDS=this.ReturnINVDocIDsNos(u,this.Grid.Table),0==this.lst1.filter(e=>e.Name==u.toString()).length)){s=s.filter(t=>e.DocIDS.split(",").Contains(t.InvDocDetailsID)),this.lst1.push(l.d.ComboBoxItems_1(u.toString())),e.sbRows="",e.sbRows+="<DocumentXML>";for(let t=0;t<s.length;t++){if(o="",a="",r="",h="",e.sbRows+="<Row>",e.sbRows+="<AccountsXML><Accounts ",o+="<Transactions ",a+="<Numeric ",r+="<Alpha ",h+="<CostCenters ",this.dtLinkColumns&&this.dtLinkColumns.length>0){let i=1,n=1;e.DebitAccount=parseInt(s[t].DebitAccount),this.lstCombo.push(l.d.ComboBoxItems_1("DebitAccount")),this.lstCombo.push(l.d.ComboBoxItems_1("CreditAccount")),this.lstCombo.push(l.d.ComboBoxItems_1("Amount")),this.lstCombo.push(l.d.ComboBoxItems_1("CurrencyID")),this.lstCombo.push(l.d.ComboBoxItems_1("ExchangeRate")),e.sbRows+='DebitAccount="'+e.DebitAccount+'" ',e.sbRows+='CreditAccount="'+u+'" ',e.sbRows+='Amount="'+i*n+'" ',e.sbRows+='AmtFc="'+i.toString()+'" ',e.sbRows+='CurrencyID="'+s[t].CurrencyID+'" ',e.sbRows+='ExchangeRate="'+s[t].ExchangeRate+'" ',e.sbRows+="></Accounts></AccountsXML>",o+="  DocSeqNo='0'  DocDetailsID='0'  ",o+=" RefNO='"+s[t].Voucherno.toString()+"'  LinkedInvDocDetailsID='"+s[t].InvDocDetailsID.toString()+"' LinkedFieldName='Quantity'  ";for(let e=0;e<this.dtLinkColumns.length;e++)0==this.lstCombo.filter(t=>t.Name==this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString()).length&&this.dtCompleteData_Columns.Contains(this.dtLinkColumns[e][this.dtLinkColumns_Columns[1]].toString())&&(this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString().Contains("dcNum")?this.CheckForSourceColumnsUpdate_num(parseInt(this.dtLinkColumns[e][this.dtLinkColumns_Columns[3]]))?a+=this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString()+'="'+this.GetSourceColumnData(parseInt(s[t].InvDocDetailsID.toString()),this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString())+'" ':a+=this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString()+'="'+s[t][this.dtLinkColumns[e][this.dtLinkColumns_Columns[1]].toString()].toString()+'" ':this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString().Contains("dcCCNID")?this.CheckForSourceColumnsUpdate_num(parseInt(this.dtLinkColumns[e][this.dtLinkColumns_Columns[3]]))?h+=this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString()+'="'+this.GetSourceColumnData(parseInt(s[t].InvDocDetailsID.toString()),this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString())+'" ':h+=this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString()+'="'+s[t][this.dtLinkColumns[e][this.dtLinkColumns_Columns[1]].toString()].toString()+'" ':this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString().Contains("dcAlpha")?this.CheckForSourceColumnsUpdate_num(parseInt(this.dtLinkColumns[e][this.dtLinkColumns_Columns[3]]))?r+=this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString()+'="'+this.GetSourceColumnData(parseInt(s[t].InvDocDetailsID.toString()),this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString())+'" ':r+=this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString()+'="'+s[t][this.dtLinkColumns[e][this.dtLinkColumns_Columns[1]].toString()].toString()+'" ':this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString().Contains("Quantity")?(o+='LinkedFieldValue="'+s[t].Quantity.toString()+'" ',o+=this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString()+'="'+s[t][this.dtLinkColumns[e][this.dtLinkColumns_Columns[1]].toString()].toString()+'" '):this.CheckForSourceColumnsUpdate_num(parseInt(this.dtLinkColumns[e][this.dtLinkColumns_Columns[3]]))?o+=this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString()+'="'+this.GetSourceColumnData(parseInt(s[t].InvDocDetailsID.toString()),this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString())+'" ':o+=this.dtLinkColumns[e][this.dtLinkColumns_Columns[2]].toString()+'="'+s[t][this.dtLinkColumns[e][this.dtLinkColumns_Columns[1]].toString()].toString()+'" ');o+='DebitAccount="'+e.DebitAccount+'" ',o+='CreditAccount="'+u+'" ',o+='Amount="'+i*n+'" ',o+='AmtFc="'+i.toString()+'" ',o+='CurrencyID="'+s[t].CurrencyID+'" ',o+='ExchangeRate="'+s[t].ExchangeRate+'" ',a+=" ></Numeric>",r+=" ></Alpha>",h+=" ></CostCenters>",o+=" ></Transactions>"}e.sbRows+=o.toString()+a.toString()+h.toString()+r.toString(),e.sbRows+="</Row>"}e.sbRows+="</DocumentXML>",t.CostCenterID=this.Destination,t.DocID=0;let n=0;if(null!=this.dvLoadNames&&(n=parseInt(this.dvLoadNames[0].MappingType)),1==n)this.MessageVisibility=!0;else if(2==n){let e=new C.AddEditDocumentViewModel(this.Destination,this.Destination.toString(),!0);e.ScreenObject.DocPrefix.ComboBox.SelectedValue="",e.ScreenObject.DocPrefix.TextBox.Text="",e.OnDocPrefixChanged("lostFocus"),e.ScreenObject.FillDocumentPrefix(!0),i.a.page.addNewTab({component:d.AddEditDocumentComponent,params:{obj:e}})}}}CheckExistingColumn(e){for(let t=1;t<this.Grid.Columns.length;t++)if(e==this.Grid.Columns[t].DisplayMember)return!0;return!1}LoadEditData(e,t){e.Tables[2][0][e.Columns[2][0]].toString().split(",");for(let s=0;s<e.Tables[1].length;s++){let o=this.Grid.NewRow();o.Select=!1,this.Grid.TableColumns.Contains("InvDocDetailsID")&&(o.InvDocDetailsID=e.Tables[1][s].InvDocDetailsID.toString()),this.Grid.TableColumns.Contains("DocNo")&&(o.DocNo=e.Tables[1][s].Docno.toString());for(let a=0;a<t;a++)if("DATE"==this.Grid.Columns[a+1].DataType){if(!n.e.IsEmpty(e.Tables[1][s][this.Grid.Columns[a+1].DisplayMember.Remove(this.Grid.Columns[a+1].DisplayMember.length-1,1)])){let t="dd/MMM/yyyy";i.a.SessionManager.Preferences.ContainsKey("Date Format")&&""!=i.a.SessionManager.Preferences["Date Format"]&&(t=i.a.SessionManager.Preferences["Date Format"]),o[this.Grid.Columns[a+1].DisplayMember]=new Date(e.Tables[1][s][this.Grid.Columns[a+1].DisplayMember.Remove(this.Grid.Columns[a+1].DisplayMember.length-1,1)].toString()).ToString(t),o[this.Grid.Columns[a+1].DisplayMember+"_Key"]=new Date(e.Tables[1][s][this.Grid.Columns[a+1].DisplayMember.Remove(this.Grid.Columns[a+1].DisplayMember.length-1,1)].toString())}}else"ComboBox"==this.Grid.Columns[a+1].DataType?o[this.Grid.Columns[a+1].ValueBinding]=e.Tables[1][s][this.Grid.Columns[a+1].ValueBinding.Remove(this.Grid.Columns[a+1].ValueBinding.length-1,1)]:"PactComboBox"==this.Grid.Columns[a+1].DataType?(o[this.Grid.Columns[a+1].ValueBinding]=e.Tables[1][s][this.Grid.Columns[a+1].ValueBinding.Remove(this.Grid.Columns[a+1].ValueBinding.length-1,1)],o[this.Grid.Columns[a+1].ValueBinding+"_Key"]=e.Tables[1][s][this.Grid.Columns[a+1].ValueBinding.Remove(this.Grid.Columns[a+1].ValueBinding.length-1,1)]):"FLOAT"==this.Grid.Columns[a].DataType?n.e.IsNum(e.Tables[1][s][this.Grid.Columns[a+1].DisplayMember.Remove(this.Grid.Columns[a+1].DisplayMember.length-1,1)])&&(o[this.Grid.Columns[a+1].DisplayMember]=e.Tables[1][s][this.Grid.Columns[a+1].DisplayMember.Remove(this.Grid.Columns[a+1].DisplayMember.length-1,1)]):3==this.Grid.Columns[a+1].CostCenterID?o[this.Grid.Columns[a+1].ValueMember]=e.Tables[1][s].ProductID:"LISTBOX"==this.Grid.Columns[a+1].DataType?o[this.Grid.Columns[a+1].ValueMember]=e.Tables[1][s][this.Grid.Columns[a+1].DisplayMember.Remove(this.Grid.Columns[a+1].DisplayMember.length-1,1)]:o[this.Grid.Columns[a+1].DisplayMember]=e.Tables[1][s][this.Grid.Columns[a+1].DisplayMember.Remove(this.Grid.Columns[a+1].DisplayMember.length-1,1)];this.Grid.Table.push(o)}this.Grid.refreshDataView()}AddColumns(e,t,s){let a=s.SysColumnName.toString();switch("1"==s.type.toString()&&(a+="1"),(t=new u.a).Header=s.UserColumnName.toString(),t.DisplayMember=a,t.DataType=s.ColumnDataType.toString().toUpperCase(),t.ReadOnly=Object(o.j)(s.ReadOnly.toString()),t.IsColumnUserDefined=Object(o.j)(s.IsColumnUserDefined.toString()),t.Mandatory=Object(o.j)(s.Mandatory),t.isUpdate=Object(o.j)(s.Update),t.Width=150,t.ID=s.CostCenterColID.toString(),"VOUCHERNO"==t.DisplayMember.toUpperCase()&&(t.IsFrozen=!0),s.ColumnDataType.toString().toUpperCase()){case"BIGINT":case"INT":this.Grid.TableColumns.push(a);break;case"FLOAT":this.Grid.TableColumns.push(a),a.toLowerCase().Contains("dcnum")?(t.DefaultValue=s.UserDefaultValue.toString(),this.Grid.TableColumns.push("dcCalc"+a),n.e.Double(s.Decimal)>0?t.DecimalPoints=s.Decimal.toString():i.a.SessionManager.Preferences.ContainsKey("DecimalsinExtraFields")&&""!=i.a.SessionManager.Preferences.DecimalsinExtraFields&&(t.DecimalPoints=i.a.SessionManager.Preferences.DecimalsinExtraFields)):a.toLowerCase().Contains("dcexchrt")||("Quantity"==a?(this.Grid.TableColumns.push("Linked"+a),i.a.SessionManager.Preferences.ContainsKey("DecimalsinQty")&&""!=i.a.SessionManager.Preferences.DecimalsinQty&&(t.DecimalPoints=i.a.SessionManager.Preferences.DecimalsinQty)):"Gross"==a||"Rate"==a?("Gross"==a&&this.Grid.TableColumns.push("Linked"+a),i.a.SessionManager.Preferences.ContainsKey("DecimalsinRate")&&""!=i.a.SessionManager.Preferences.DecimalsinRate&&(t.DecimalPoints=i.a.SessionManager.Preferences.DecimalsinRate)):"Amount"!=a&&"DebitAmount"!=a&&"CreditAmount"!=a||!i.a.SessionManager.Preferences.ContainsKey("DecimalsinAmount")||""==i.a.SessionManager.Preferences.DecimalsinAmount||(t.DecimalPoints=i.a.SessionManager.Preferences.DecimalsinAmount)),"Quantity"==a?t.ShowTotal=!(!i.a.SessionManager.Preferences.ContainsKey("ShowQtyTotal")||""==i.a.SessionManager.Preferences.ShowQtyTotal||!Object(o.j)(i.a.SessionManager.Preferences.ShowQtyTotal)):"DebitAmount"==a||"CreditAmount"==a?t.ShowTotal=!0:a.toLowerCase().Contains("dcexchrt")||"exchangerate"==a.toLowerCase()||"rate"==a.toLowerCase()||Object(o.j)(s.ShowTotal)&&(t.ShowTotal=!0);break;case"LISTBOX":t.ValueMember="accountid"==a.toLowerCase()||"debitaccount"==a.toLowerCase()||"creditaccount"==a.toLowerCase()?"":a+"_Key","unit"==a.toLowerCase()?(this.Grid.TableColumns.push(a),this.Grid.TableColumns.push(a+"_Key"),this.Grid.TableColumns.push("UOMConversion"),this.Grid.TableColumns.push("UOMConvertedQty")):"productid1"==a.toLowerCase()||"productid"==a.toLowerCase()?(t.ValueMember="ProductID_Key",t.DisplayMember=s.UserColumnName.toString(),this.Grid.TableColumns.push(t.DisplayMember),this.Grid.TableColumns.Contains(t.ValueMember)||this.Grid.TableColumns.push(t.ValueMember)):"accountid"==a.toLowerCase()||"debitaccount"==a.toLowerCase()||"creditaccount"==a.toLowerCase()?(t.ValueMember=a+"_Key",a.Trim(),t.DisplayMember=a.Replace(" ",""),this.Grid.TableColumns.push(t.DisplayMember),this.Grid.TableColumns.Contains(t.ValueMember)||this.Grid.TableColumns.push(t.ValueMember)):(this.Grid.TableColumns.push(a),this.Grid.TableColumns.push(a+"_Key")),t.CostCenterID=parseInt(s.ColumnCostCenterID.toString()),t.TypeID=parseInt(s.ColumnCCListViewTypeID.toString()),61==t.CostCenterID&&(this.Grid.TableColumns.push("StartYear"),this.Grid.TableColumns.push("EndYear")),i.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==i.a.SessionManager.Preferences.EnableDivisionWise.toString()&&50001==t.CostCenterID&&(t.ReadOnly=!0),i.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==i.a.SessionManager.Preferences.EnableLocationWise.toString()&&50002==t.CostCenterID&&(t.ReadOnly=!0);break;case"TEXT":case"COMBOTEXT":case"STRING":if(this.Grid.TableColumns.push(a),t.IsColumnUserDefined)if("Date"==s.UserColumnType.toString())t.DataType="DATE",this.Grid.TableColumns.push(a+"_Key");else if("Numeric"==s.UserColumnType.toString())t.DataType="FLOAT";else if("SELECTIONBOX"==s.UserColumnType.toString()||"editablecombobox"==s.UserColumnType.toString().toLowerCase())t.DataType="SELECTIONBOX",t.CostCenterID=0;else if("Combobox"==s.UserColumnType.toString()){if(t.ValueBinding=a,this.Grid.TableColumns.Contains("linkData")&&22803==n.e.Int(s.linkData)){t.DataType="PactComboBox";let e=[];for(let t=1980;t<2100;t++){let s={};s.Year=t.toString(),e.push(s)}t.DisplayMember="Year",t.ValueMember="Year",t.ComboData=e}else{t.DataType="ComboBox",t.DisplayMember="Name",t.ValueMember="Value";let e=[],i=s.UserProbableValues.toString().Trim();if(i.length>0){let t=i.split(";");for(let s=0;s<t.length;s++)e.push(l.d.ComboBoxItems_2(t[s],t[s]))}t.ComboData=e}this.Grid.TableColumns.push(a+"_Key")}else"LISTBOX"==s.UserColumnType.toString()&&(t.DataType="LISTBOX",t.CostCenterID=0,t.ValueMember=a+"_Key",this.Grid.TableColumns.push(a+"_Key"),t.CostCenterID=parseInt(s.ColumnCostCenterID.toString()),t.TypeID=parseInt(s.ColumnCCListViewTypeID.toString()));else if("VoucherType"==a){t.DataType="ComboBox",t.DisplayMember="Name",t.ValueMember="Value",t.ValueBinding=a;let e=[];e.push(l.d.ComboBoxItems_2(i.a.GetResource("StockJVIssue"),"-1")),e.push(l.d.ComboBoxItems_2(i.a.GetResource("StockJVRecieve"),"1")),t.ComboData=e}break;case"DATE":t.DataType="DATE",this.Grid.TableColumns.push(a),this.Grid.TableColumns.push(a+"_Key")}return e.push(t),t}}},EggS:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var i=s("Do2H"),n=s("Lp6j"),o=s("eQJW");class a{constructor(){this.CustomerID=0,this.CustomerTypeID=0,this.StatusID=0,this.AccountID=0,this.ParentID=0,this.SelectedNodeID=0,this.CodeNumber=0,this.IsGroup=!1,this.CreditDays=0,this.CreditLimit=0,this.DebitDays=0,this.Debitlimit=0,this.IsCode=!1,this.ActivityXml="",this.CCXML=""}SaveCustomerQuick(){try{let e=[];return e.push(this.CustomerID),e.push(null!=this.CustomerCode?this.CustomerCode:""),e.push(null!=this.CustomerName?this.CustomerName:""),e.push(this.StatusID),e.push(this.CodePrefix),e.push(this.CodeNumber),e.push(this.StaticFieldsQuery),e.push(this.CustomFieldsQuery),e.push(this.CustomCostCenterFieldsQuery),e.push(i.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(""),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.RoleID),e.push(i.a.SessionManager.LanguageID),i.a.crmService.SetCustomerQuick(e)}catch(e){return Logger.ErrorLog("Account:: SaveAccountQuick"+e.stack),""}}SaveCustomer(){Logger.InfoLog("Customer:: Inside SaveCustomer");try{0==this.CustomerID&&(this.GUID=n.e.NewGuid());let e=[];return e.push(this.CustomerID),e.push(null!=this.CustomerCode?this.CustomerCode:""),e.push(null!=this.CustomerName?this.CustomerName:""),e.push(null!=this.AliasName?this.AliasName:""),e.push(this.CustomerTypeID),e.push(this.StatusID),e.push(this.AccountID),e.push(this.SelectedNodeID),e.push(this.IsGroup),e.push(this.CreditDays),e.push(this.CreditLimit),e.push(null!=this.UserName?this.UserName:""),e.push(null!=this.Password?this.Password:""),e.push(null!=this.OnlineCustType?this.OnlineCustType:""),e.push(i.a.SessionManager.CompanyGUID),e.push(null!=this.GUID?this.GUID:"GUID"),e.push(""),e.push(i.a.SessionManager.UserName),e.push(this.CustomFieldsQuery),e.push(this.CustomCostCenterFieldsQuery),e.push(this.ContactsXML),e.push(this.AttachmetsXML),e.push(this.NotesXML),e.push(this.AddressXML),e.push(this.ActivityXml),e.push(this.CCXML),e.push(!1),e.push(null==this.PrimaryContactQuery?"":this.PrimaryContactQuery),e.push(i.a.SessionManager.RoleID),e.push(i.a.SessionManager.LanguageID),e.push(null!=this.CodePrefix?this.CodePrefix:""),e.push(this.CodeNumber),e.push(this.IsCode),i.a.crmService.SaveCustomer(e)}catch(e){return Logger.ErrorLog("Customer:: SaveCustomer"+e.stack),""}}GetCustomerDetails(){let e=i.a.crmService.GetCustomerInfo("?UserID="+i.a.SessionManager.UserID+"&RoleID="+i.a.SessionManager.RoleID+"&LangID="+i.a.SessionManager.LangID+"&CustomerID="+this.CustomerID);return!e.Columns[0].Contains("ErrorMessage")&&e.Tables.length>0&&e.Tables[0].length>0&&(this.CustomerID=parseInt(e.Tables[0][0].CustomerID),this.CustomerCode=n.e.String(e.Tables[0][0].CustomerCode),this.CustomerName=n.e.String(e.Tables[0][0].CustomerName),this.AliasName=n.e.String(e.Tables[0][0].AliasName),n.e.IsEmpty(e.Tables[0][0].CustomerTypeID)||(this.CustomerTypeID=parseInt(e.Tables[0][0].CustomerTypeID)),this.StatusID=parseInt(e.Tables[0][0].StatusID),n.e.IsEmpty(e.Tables[0][0].AccountID)||(this.AccountID=parseInt(e.Tables[0][0].AccountID)),this.IsGroup=Object(o.j)(e.Tables[0][0].IsGroup),n.e.IsEmpty(e.Tables[0][0].CreditDays)||(this.CreditDays=parseInt(e.Tables[0][0].CreditDays)),n.e.IsEmpty(e.Tables[0][0].CreditLimit)||(this.CreditLimit=parseFloat(e.Tables[0][0].CreditLimit)),this.ParentID=parseInt(e.Tables[0][0].ParentID),this.GUID=n.e.String(e.Tables[0][0].GUID),this.Description=n.e.String(e.Tables[0][0].Description),this.CodePrefix=n.e.String(e.Tables[0][0].CodePrefix),this.UserName=n.e.String(e.Tables[0][0].UserName),this.OnlineCustType=n.e.String(e.Tables[0][0].OnlineCustType),this.Password=n.e.String(e.Tables[0][0].Password),n.e.IsEmpty(e.Tables[0][0].CodeNumber)||(this.CodeNumber=parseInt(e.Tables[0][0].CodeNumber))),e}DeleteCustomer(e,t){try{let s=[];return s.push(e),s.push(t),s.push(i.a.SessionManager.RoleID),s.push(i.a.SessionManager.LanguageID),Logger.InfoLog("Customer:: Success: DBH.DeleteCustomer "+e.toString()),i.a.crmService.RemoveCustomer(s)}catch(s){return Logger.ErrorLog("LEAD::DeleteLead"+s.stack),""}}}},NM0h:function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var i=s("Do2H"),n=s("Lp6j");class o{constructor(){this.ChangeValueXML=null,this.DetailsXML=null,this.AMCode=null,this.AMName=null,this.AMPurchaseValue=null,this.HistoryXML=null,this.DocNo=null,this.XML=null,this.DocSave=null,this.CodePrefix=null,this.Sno=null,this.AssetClassID=0,this.DeprBookID=0,this.AcqnCostACCID=0,this.AccumDeprACCID=0,this.AcqnCostDispACCID=0,this.AccumDeprDispACCID=0,this.GainsDispACCID=0,this.LossDispACCID=0,this.MaintExpenseACCID=0,this.DeprExpenseACCID=0,this.PostingGroupID=0,this.AMStatusID=0,this.CodeNumber=0,this.AMAssetID=0,this.AMParentAssetID=0,this.IsGroup=!1,this.Post=!1,this.StatusID=0,this.DeprBookMethod=0,this.DeprBookMethodBasedOn=0,this.AveragingMethodID=0,this.DeprScheduleID=0,this.DeprTypeID=0,this.AssetClassCode=null,this.AssetClassName=null,this.GUID=null,this.DeprBookCode=null,this.DeprBookName=null,this.PostGroupCode=null,this.PostGroupName=null,this.AMGUID=null,this.RecordType=null,this.AMGroup=!1,this.IsIncreaseAssetValue=!1,this.EmpName=null,this.EmpCode=null,this.EmpID=0,this.SelectedNodeID=0,this.PostCCID=0,this.PostAssetID=0,this.ScheduleID=0,this.LocationID=0,this.AddressXML=null,this.NotesXML=null,this.ContactsXML=null,this.CustomCostCenterFieldsQuery=null,this.CustomFieldsQuery=null,this.PrimaryContactQuery=null,this.AttachmetsXML=null,this.DepreciationXML=null,this.JVXML=null,this.Description=null,this.DeprStartValue=0,this.ChangeVal=0,this.AssetNetValueChange=0,this.DeprBookMethodBasedOnValue=0,this.TotalYears=0}static GetAssetClassDetails(e){let t=[];return t.push(e),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.LanguageID),i.a.accounting.GetAssetClassDetails(t)}static GetPostingGroupDetails(e){let t=[];return t.push(e),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.LanguageID),i.a.accounting.GetPostingGroupDetails(t)}SaveAssetClass(){0==this.AssetClassID&&(this.GUID=n.e.NewGuid());let e=[];return e.push(this.AssetClassID),e.push(null!=this.AssetClassCode?this.AssetClassCode:""),e.push(null!=this.AssetClassName?this.AssetClassName:""),e.push(this.PostingGroupID),e.push(this.DeprBookID),e.push(this.DeprTypeID),e.push(this.TotalYears),e.push(this.StatusID),e.push(i.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(""),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.SetAssetClass(e)}static GetDeprBookDetails(e){let t=[];return t.push(e),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.LanguageID),i.a.accounting.GetDeprBookDetails(t)}PostJVvoucher(){this.GUID=n.e.NewGuid();let e=[];return e.push(this.PostAssetID),e.push(this.PostCCID),e.push(this.JVXML),e.push(this.Post),e.push(this.DeprTypeID),e.push(this.DocXML),e.push(this.DocSave),e.push(this.DepreciationXML),e.push(this.RecordType),e.push(i.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.GetPostJvVoucher(e)}SetAssetDispose(e){this.GUID=n.e.NewGuid();let t=[];return t.push(this.PostAssetID),t.push(e.ToString("dd/MMM/yyyy")),t.push(this.PostCCID),t.push(this.JVXML),t.push(this.Post),t.push(this.DeprTypeID),t.push(this.DocXML),t.push(this.DocSave),t.push(this.DepreciationXML),t.push(this.RecordType),t.push(i.a.SessionManager.CompanyGUID),t.push(this.GUID),t.push(i.a.SessionManager.UserName),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.LanguageID),i.a.accounting.SetAssetDispose(t)}SaveDeprBook(e,t,s){0==this.DeprBookID&&(this.GUID=n.e.NewGuid());let o=[];return o.push(this.DeprBookID),o.push(this.DeprBookCode),o.push(this.DeprBookName),o.push(this.DeprBookMethod),o.push(this.DeprBookMethodBasedOn),o.push(this.DeprBookMethodBasedOnValue),o.push(this.StatusID),o.push(this.AveragingMethodID),o.push(e),o.push(t),o.push(s),o.push(i.a.SessionManager.CompanyGUID),o.push(this.GUID),o.push(""),o.push(i.a.SessionManager.UserName),o.push(i.a.SessionManager.UserID),o.push(i.a.SessionManager.LanguageID),i.a.accounting.SetDeprBook(o)}SaveFAPostingGroup(){0==this.PostingGroupID&&(this.GUID=n.e.NewGuid());let e=[];return e.push(this.PostingGroupID),e.push(this.PostGroupCode),e.push(this.PostGroupName),e.push(this.AcqnCostACCID),e.push(this.AccumDeprACCID),e.push(this.AcqnCostDispACCID),e.push(this.AccumDeprDispACCID),e.push(this.GainsDispACCID),e.push(this.LossDispACCID),e.push(this.MaintExpenseACCID),e.push(this.DeprExpenseACCID),e.push(this.StatusID),e.push(0),e.push(this.IsGroup),e.push(i.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.SetPostingGroup(e)}static GetAssetManagementDetails(e){let t=[];return t.push(e),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.LanguageID),i.a.accounting.GetAssetManagementDetails(t)}static GetAssetDeprSchDetails(e){let t=[];return t.push(e),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.LanguageID),i.a.accounting.GetAssetDeprSchDetails(t)}SetAssetManagementDetails(){let e=[];return e.push(this.AMAssetID),e.push(this.AMCode),e.push(this.AMName),e.push(this.AMStatusID),e.push(this.AMPurchaseValue),e.push(this.AMParentAssetID),e.push(this.AMGroup),e.push(this.CodePrefix),e.push(this.CodeNumber),e.push(this.Sno),e.push(this.DetailsXML),e.push(this.ChangeValueXML),e.push(this.CustomFieldsQuery),e.push(this.CustomCostCenterFieldsQuery),e.push(this.DepreciationXML),e.push(this.HistoryXML),e.push(this.NotesXML),e.push(this.AttachmetsXML),e.push(i.a.SessionManager.CompanyGUID),e.push(this.AMGUID),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),i.a.accounting.SetAssetManagementDetails(e).toPromise()}static DeleteAsset(e){let t=[];return t.push(e),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.RoleID),i.a.accounting.DeleteAsset(t)}static DeleteAssetDeprSchedule(e){let t=[];return t.push(e),t.push(i.a.SessionManager.RoleID),t.push(i.a.SessionManager.LanguageID),i.a.accounting.DeleteAssetDeprSchedule(t)}static DeleteAssetRefDoc(e,t){let s=[];return s.push(e),s.push(t),s.push(i.a.SessionManager.UserID),i.a.accounting.DeleteAssetRefDoc(s)}PostDeprJV(){this.GUID=n.e.NewGuid();let e=[];return e.push(this.PostCCID),e.push(this.JVXML),e.push(this.Post),e.push(i.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),e.push(i.a.SessionManager.RoleID),i.a.accounting.PostDeprJV(e)}PostDeprJVSummary(e,t,s,o,a){this.GUID=n.e.NewGuid();let r=[];return r.push(e),r.push(t),r.push(s),r.push(o),r.push(a),r.push(i.a.SessionManager.CompanyGUID),r.push(i.a.SessionManager.UserName),r.push(i.a.SessionManager.UserID),r.push(i.a.SessionManager.LanguageID),i.a.accounting.SetDeprPostingJVSummary(r).toPromise()}static SetsPostDeprReverseJV(e,t,s){let n=[];return n.push(e),n.push(t),n.push(s),n.push(i.a.SessionManager.CompanyGUID),n.push(i.a.SessionManager.UserName),n.push(i.a.SessionManager.UserID),n.push(i.a.SessionManager.LanguageID),i.a.accounting.SetsPostDeprReverseJV(n)}ChangeValue(e,t){this.GUID=n.e.NewGuid();let s=[];return s.push(this.PostAssetID),s.push(e),s.push(this.ChangeVal),s.push(this.AssetNetValueChange),s.push(t.ToString("dd/MMM/yyyy")),s.push(this.Description),s.push(this.DepreciationXML),s.push(this.ChangeValueXML),s.push(this.HistoryXML),s.push(this.LocationID),s.push(this.IsIncreaseAssetValue),s.push(this.JVXML),s.push(this.ChangeValueTypeID),s.push(i.a.SessionManager.CompanyGUID),s.push(this.GUID),s.push(i.a.SessionManager.UserName),s.push(i.a.SessionManager.UserID),s.push(i.a.SessionManager.LanguageID),i.a.accounting.SetAssetChangeValue(s)}DisposeReverse(e){let t=[];return t.push(e),t.push(i.a.SessionManager.UserName),t.push(i.a.SessionManager.UserID),t.push(i.a.SessionManager.LanguageID),i.a.accounting.DisposeReverse(t)}}},ouML:function(e,t,s){"use strict";s.r(t),s.d(t,"DocumentDraftsViewModel",(function(){return D}));var i=s("mrSG"),n=s("Do2H"),o=s("Lp6j"),a=s("ScVY"),r=s("8B8H"),l=s("ockk"),h=s("rJVx"),u=s("CUWK");class D extends a.b{constructor(e,t,s=0){if(super(),this.Grid=new r.a,this.IsFromDocs=!1,this.PopupWidth=0,this.ReportType=0,this.Parent=null,this.CCID=0,this.WID=0,this.LevelID=0,this.PactGridVisible=!1,this.CCID=s,this.Parent=e,this.ReportType=t,this.Parent instanceof h.GeneralDashboardViewModel||"DashAddOnsViewModel"==this.Parent.ClassName)1==t&&(this.ColSource=h.GeneralDashboardViewModel.InitColumns("Document Drafts_DashBoardCustomize"));else{let e;1==t?this.DisplayName="Drafts":2==t?this.DisplayName="Hold Documents":3==t?this.DisplayName="Approval History":4==t&&(this.DisplayName="Level Info",this.PactGrid=new r.a),this.Title=this.DisplayName,this.IsFromDocs=!0,this.FillGrid(),this.Grid.OnLinkClick.Subscribe(this,"GridLinkClick"),this.ColSource=[],1==t?(this.ColSource=h.GeneralDashboardViewModel.InitColumns("Document Drafts_DashBoardCustomize"),this.PopupWidth=22,this.ColSource.forEach(e=>{this.PopupWidth=this.PopupWidth+e.Width})):2==t?(e=new l.a,e.DataType="TextBlock",e.Header="Hold Date",e.DisplayMember="HoldDate_Key",e.Width=100,this.ColSource.push(e),e=new l.a,e.DataType="LINK",e.Header=n.a.GetResource("DocName"),e.DisplayMember="DocName",e.Width=135,this.ColSource.push(e),e=new l.a,e.DataType="TextBlock",e.Header="NetValue",e.DisplayMember="NetValue",e.Width=100,this.ColSource.push(e),e=new l.a,e.DataType="TextBlock",e.Header="NoOfProducts",e.DisplayMember="NoOfProducts",e.Width=50,this.ColSource.push(e),e=new l.a,e.DataType="LINK",e.Header=n.a.GetResource("Delete"),e.DisplayMember="Delete",e.Width=100,this.ColSource.push(e),this.PopupWidth=450):3==t?(e=new l.a,e.DataType="TextBlock",e.Header="User",e.DisplayMember="CreatedBy",e.Width=90,this.ColSource.push(e),e=new l.a,e.DataType="TextBlock",e.Header="FirstName",e.DisplayMember="FirstName",e.Width=90,this.ColSource.push(e),e=new l.a,e.DataType="TextBlock",e.Header="LastName",e.DisplayMember="LastName",e.Width=90,this.ColSource.push(e),e=new l.a,e.DataType="TextBlock",e.Header="Email",e.DisplayMember="Email1",e.Width=150,this.ColSource.push(e),e=new l.a,e.DataType="TextBlock",e.Header=n.a.GetResource("Date"),e.DisplayMember="AppDate",e.Width=128,this.ColSource.push(e),e=new l.a,e.DataType="LINK",e.Header="Level",e.DisplayMember="LevelName",e.Width=93,this.ColSource.push(e),e=new l.a,e.DataType="TextBlock",e.Header="Status",e.DisplayMember="Status",e.Width=80,this.ColSource.push(e),e=new l.a,e.DataType="Format",e.Header="Remarks",e.DisplayMember="Remarks",e.Width=190,this.ColSource.push(e),this.PopupWidth=950,"AddEditDocumentViewModel"==this.Parent.ClassName&&(e=new l.a,e.Header="WorkFlowName",e.DisplayMember="WorkFlowName",e.Width=200,this.ColSource.push(e)),this.PopupWidth=950):4==t&&(e=new l.a,e.DataType="TextBlock",e.ReadOnly=!0,e.Header="User Name",e.DisplayMember="UserName",e.Width=120,this.ColSource.push(e),e=new l.a,e.DataType="TextBlock",e.ReadOnly=!0,e.Header="First Name",e.DisplayMember="FirstName",e.Width=120,this.ColSource.push(e),e=new l.a,e.DataType="TextBlock",e.ReadOnly=!0,e.Header="Last Name",e.DisplayMember="LastName",e.Width=120,this.ColSource.push(e),this.PactGrid.Columns=this.ColSource,this.PopupWidth=400)}}get Table(){return this.Grid.Table}set Table(e){this.Grid.Table=e}get TableColumns(){return this.Grid.TableColumns}set TableColumns(e){this.Grid.TableColumns=e}get ColSource(){return this.Grid.Columns}set ColSource(e){this.Grid.Columns=e}get SelectedRow(){return this.Grid.SelectedItem}set SelectedRow(e){this.Grid.SelectedItem=e}onClick(e){event.preventDefault(),null!=this.SelectedRow&&this.LoadDraft(this.SelectedRow)}FillGrid(){let e=0,t=null;if(o.e.IsType(this.Parent,"AddEditDocumentViewModel")?(t=this.Parent,e=0==this.CCID?t.CostCenterID:this.CCID):o.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName||(e=this.CCID),1==this.ReportType||2==this.ReportType){let s;s=o.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName?null==t||38!=t.ScreenObject.DocumentType&&39!=t.ScreenObject.DocumentType?n.a.document.GetDocumentDrafts(0,e,this.ReportType,!1):n.a.document.GetDocumentDrafts(t.ScreenObject.RegisterNodeID,e,this.ReportType,!1,!0):n.a.document.GetDocumentDrafts(0,this.Parent.CostCenterID,this.ReportType,!1),s.subscribe(e=>{this.Table=e.Tables[0],this.Grid.TableColumns.Contains("Date_Text")||(this.Grid.TableColumns.push("Date_Text"),this.Grid.TableColumns.push("Delete")),this.Grid.TableColumns.Contains("HoldDate_Key")||this.Grid.TableColumns.push("HoldDate_Key"),this.Table.forEach(e=>{e.Delete="Delete",e.id=n.a.slick.rowid,e.Date_Text=new Date(e.Date).ToString(n.a.SessionManager.Preferences["Date Format"]+" hh:mm a"),null!=e.HoldDate&&(e.HoldDate_Key=new Date(e.HoldDate).ToString(n.a.SessionManager.Preferences["Date Format"]))})})}else if(3==this.ReportType){let t=null;if(o.e.IsType(this.Parent,"AddEditDocumentViewModel")?(t=this.Parent.ScreenObject.GetDocStatusHistory(),t.Tables.length>1&&t.Tables[1].length>0&&t.Columns[1].Contains("WID")&&(this.WID=parseInt(t.Tables[1][0].WID))):o.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName?o.e.IsEmpty(this.Parent.ClassName)||"AddEditCasesViewModel"!=this.Parent.ClassName||(t=this.GetDocStatusHistory(73,this.Parent.CaseID,!1)):t=n.a.rental.GetHistory(e,this.Parent.ContractID),null!=t&&t.Tables.length>0){this.Table=t.Tables[0],this.Grid.TableColumns.push("AppDate");for(let t=0;t<this.Table.length;t++)""!=this.Table[t].Date.toString()&&(this.Table[t].AppDate=new Date(this.Table[t].Date.toString()).ToString(n.a.SessionManager.Preferences["Date Format"]+" hh:mm a"));let e=0,s=0;this.Table.length>0&&(e=o.e.IntTryParse(this.Table[this.Table.length-1].WorkFlowLevel.toString()),s=o.e.IntTryParse(this.Table[this.Table.length-1].StatusID.toString())),369!=s&&(t.Tables[1]=t.Tables[1].filter(t=>t.levelID>e),t.Tables[1].forEach(e=>{let t=this.Grid.NewRow();t.LevelName=e.LevelName,t.Status="Pending",t.WorkFlowLevel=e.LevelID,this.Grid.addRow(t)}));for(let t=this.Table.length;t<7;t++)this.Grid.addEmptyRow()}}else if(4==this.ReportType){let e=null;if("WFLevelDoc"==this.Parent.ClassName?e=n.a.SessionManager.Preferences.ContainsKey("CanApproveFunction")&&"True"==n.a.SessionManager.Preferences.CanApproveFunction?n.a.report.GetExtWFDet(this.Parent.WID,this.Parent.LevelID,this.Parent.ccid,this.Parent.DOcId):n.a.report.GetWorkFlowLevelDetails(this.Parent.WID,this.Parent.LevelID,this.Parent.ccDate):this.Parent instanceof D&&(n.a.SessionManager.Preferences.ContainsKey("CanApproveFunction")&&"True"==n.a.SessionManager.Preferences.CanApproveFunction?"AddEditDocumentViewModel"==this.Parent.Parent.ClassName?e=n.a.report.GetExtWFDet(this.Parent.WID,this.Parent.LevelID,this.Parent.Parent.CostCenterID,this.Parent.Parent.ScreenObject.DocID):"ReportViewModel"==this.Parent.Parent.ClassName&&"INV_ComparisonReport"==this.Parent.Parent.StaticReportObject&&(e=n.a.report.GetExtWFDet(this.Parent.WID,this.Parent.LevelID,this.Parent.Parent.StaticReportObject.QuotationDocument,this.Parent.Parent.StatusDocID)):e=n.a.report.GetWorkFlowLevelDetails(this.Parent.WID,this.Parent.LevelID,"AddEditDocumentViewModel"==this.Parent.Parent.ClassName?this.Parent.Parent.ScreenObject.DocDate.Date:Date.Today())),null!=e){for(let t=e.Tables[0].length;t<8;t++)e.Tables[0].push();this.PactGrid.Table=e.Tables[0]}this.PactGrid.Width="",this.PactGrid.SearchVisible=!0,this.PactGrid.SearchCols.Width="85",this.PactGrid.SearchOptions.Width="90",this.PactGrid.SearchText.Width="110",this.PactGridVisible=!0}}GetDocStatusHistory(e,t,s){Logger.InfoLog("DocumentDraftsViewModel:: Inside GetDocStatusHistory");let i=[];i.push(e),i.push(t),i.push(s),i.push(n.a.SessionManager.UserID),i.push(n.a.SessionManager.LanguageID);let o=n.a.document.GetDocStatusHistory(i);return Logger.InfoLog("DocumentDraftsViewModel:: Exiting GetDocStatusHistory"),o}OnButtonClick(e){"Cancel"==e.toString()&&(o.e.IsType(this.Parent,"AddEditDocumentViewModel")&&this.CCID>0&&(this.Parent.res="No"),n.a.page.HideDialog())}DeleteDraft(e){let t;t=o.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName?n.a.document.DeleteDocumentDraft(parseInt(e.DraftID)):n.a.rental.DeleteQuotation(parseInt(e.CostCenterID),parseInt(e.DraftID)),t.RetValue>0&&this.Grid.removeRow(e)}LoadDraft(e){return Object(i.b)(this,void 0,void 0,(function*(){if(o.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName){const{AddEditDocumentViewModel:t}=yield Promise.all([s.e(2),s.e(1),s.e(3),s.e(5),s.e(4),s.e(6),s.e(7),s.e(10),s.e(9),s.e(12),s.e(11),s.e(13),s.e(19),s.e(15),s.e(21),s.e(20),s.e(16),s.e(14),s.e(18),s.e(17),s.e(22),s.e(89)]).then(s.bind(null,"1Cra")),{AddEditDocumentComponent:i}=yield Promise.all([s.e(4),s.e(6)]).then(s.bind(null,"MCKn"));let o,a;a=n.a.document.GetDocumentDrafts(parseInt(e.DraftID),0,1,!1),a.subscribe(s=>{if(o=s.Tables[0],null!=o&&o.length>0)if("AddEditDocumentViewModel"==this.Parent.ClassName||"POSDocumentViewModel"==this.Parent.ClassName)this.CCID>0||(this.Parent.clear(1),this.Parent.LoadDraftXML(o[0]),n.a.page.HideDialog(),this.Parent.ScreenObject.GridDataObj.RefreshGridView());else{let s=1==this.ReportType,a=new t(parseInt(e.CostCenterID),e.Type.toString(),s);n.a.page.addNewTab({component:i,params:{obj:a}}),a.LoadDraftXML(o[0],s)}})}else u.RibbonExtViewModel.LoadDraftRentalContract(this.Parent,parseInt(e.DraftID)),n.a.page.HideDialog()}))}GridLinkClick(e,t,s){event.preventDefault(),"Delete"==t?this.DeleteDraft(e):"Date_Text"!=t&&"DocName"!=t||this.LoadDraft(e)}}},rJVx:function(e,t,s){"use strict";s.r(t),s.d(t,"GeneralDashboardViewModel",(function(){return u}));var i=s("mrSG"),n=s("Do2H"),o=s("Lp6j"),a=s("ScVY"),r=s("NkMH"),l=s("ockk"),h=s("JIg3");class u extends a.b{constructor(){super(),this.ButtonPDC=new r.a,this.timerdashboard=new o.d,this.Date=new h.a(0),this.tdMaximize=new Array(4).fill(!1),Logger.InfoLog("DashboardViewModel::Entering DashboardViewModel"),this.timerdashboard.Enabled=!0,this.timerdashboard.Interval=6e4,n.a.SessionManager.IsWebApplication||this.timerdashboard.Elapsed(this,"timerdashboard_Elapsed"),this.DisplayName=n.a.GetResource("Dashboard_Maindashboard"),this.loadDrafts(),Logger.InfoLog("DashboardViewModel::Exiting DashboardViewModel")}loadDrafts(){return Object(i.b)(this,void 0,void 0,(function*(){const{DocumentDraftsViewModel:e}=yield s.e(150).then(s.bind(null,"ouML"));this.DocumentDrafts=new e(this,1),setTimeout(()=>{this.DocumentDrafts.FillGrid()},500);const{UnAppDocumentsViewModel:t}=yield s.e(0).then(s.bind(null,"AyOk"));this.UnApprovedDocuments=new t;const{DashBoardNotifViewModel:i}=yield Promise.all([s.e(2),s.e(1),s.e(5),s.e(26),s.e(42),s.e(0),s.e(73)]).then(s.bind(null,"Wh9R"));this.NotifEvents=new i(2),this.PDCDocuments=new i(4)}))}timerdashboard_Elapsed(e,t){n.a.page.isActiveTab(this)&&(this.OnButtonClick("RefreshPDC"),this.OnButtonClick("RefreshEvents"),this.NotifEvents.RefreshData(),this.UnApprovedDocuments.OnLoad())}OnButtonClick(e){"PostPDC"==e||("RefreshPDC"==e?(this.PDCDocuments.EventsType=4,this.PDCDocuments.InitColumns()):"PostEvents"==e||("RefreshEvents"==e?this.NotifEvents.RefreshData():"UnApproved"==e?this.UnApprovedDocuments.OnLoad():"Drafts"==e&&this.DocumentDrafts.FillGrid()))}OnMessageCallBack(){this.res="Yes"}static InitColumns(e){let t,s="",i=[];if(n.a.SessionManager.Preferences.ContainsKey(e)&&(s=n.a.SessionManager.Preferences[e]),s.length>0){let a=new o.f;a.LoadXml(s);for(let s=0;s<a.DocumentElement.children.length;s++){let o=a.DocumentElement.children[s];t=new l.a,t.Header=n.a.GetResource(o.attributes.Header.value),t.DisplayMember=o.attributes.ID.value,t.ReadOnly=!0,t.Width=parseInt(o.attributes.Width.value),i.push(t),"Un Approved Documents_DashBoardCustomize"==e?"VoucherNo"==t.DisplayMember?t.DataType="LINK":"Amount"==t.DisplayMember&&(t.DataType="FLOAT",t.DecimalPoints=n.a.SessionManager.Preferences.DecimalsinAmount.toString()):"Document Drafts_DashBoardCustomize"==e?"Date_Text"!=t.DisplayMember&&"Delete"!=t.DisplayMember||(t.DataType="LINK"):"Post Dated Documents_DashBoardCustomize"==e?"VoucherNo"==t.DisplayMember?t.DataType="LINK":"Amount"==t.DisplayMember&&(t.DataType="FLOAT",t.DecimalPoints=n.a.SessionManager.Preferences.DecimalsinAmount.toString()):"Notification Events_DashBoardCustomize"==e&&"VoucherNo"==t.DisplayMember&&(t.DataType="LINK")}}return i}static IsActionAssigned(e,t){return n.a.SessionManager.IsActionAssigned(e,t)}}}}]);