(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{u90B:function(s,e,t){"use strict";t.r(e),t.d(e,"ResetPasswordViewModel",(function(){return n}));var a=t("mrSG"),i=t("Do2H"),r=t("Lp6j"),o=t("ScVY"),d=t("VxiT"),l=t("0/4Q"),h=t("EQd/");class n extends o.b{constructor(){if(super(),this.ScreenObject=new d.a,this.SaveUserId="",this.guid="",this.UserName=new l.e(22898),this.txtPassword=new h.d(22899),this.ConfirmPassword=new h.d,this.txtOldPassword=new h.d,this.ds=null,this.IsLoginCall=!1,this.DialogResult=!1,this.ds=i.a.common.GetDataSet("ADM003",""),null!=this.ds)for(let s=0;s<this.ds.Tables[0].length;s++)this.UserName.Items.push(l.d.ComboBoxItems_2(this.ds.Tables[0][s].UserName.toString(),this.ds.Tables[0][s].UserID.toString()));this.DisplayName=i.a.GetResource("ResetPassword"),this.lblTitle=i.a.GetResource("ResetPassword"),this.UserName.Label=i.a.GetResource("UserName"),this.txtOldPassword.Label=i.a.GetResource("Users_OldPassword"),this.txtPassword.Label=i.a.GetResource("Users_Password"),this.ConfirmPassword.Label=i.a.GetResource("Users_CnfrPassword"),this.UserName.LblWidth="150",this.txtOldPassword.LblWidth="150",this.txtPassword.LblWidth="150",this.ConfirmPassword.LblWidth="150",this.txtOldPassword.IsPwd=!0,this.txtPassword.IsPwd=!0,this.ConfirmPassword.IsPwd=!0,this.UserName.SelectedValue=i.a.SessionManager.UserID.toString(),this.UserName.Enable="1"==i.a.SessionManager.UserID||"1"==i.a.SessionManager.RoleID,this.ConfirmPassword.LostFocusCommand.Subscribe(this,"OnTextChange"),this.txtOldPassword.LostFocusCommand.Subscribe(this,"OnTextChange","OldPasswordCheck")}OnTextChange(s){return Object(a.b)(this,void 0,void 0,(function*(){if(this.DisplayMessage="",null!=s&&"OldPasswordCheck"==s.toString())null!=this.txtOldPassword&&""!=this.txtOldPassword.Text&&1!=i.a.admin.CheckOldPassword(this.UserName.GetText(),this.txtOldPassword.Text).RetValue&&(this.DisplayMessage="Invalid Password",this.txtOldPassword.Text="");else if(null!=s&&"PasswordCheck"==s.toString())return Logger.InfoLog("AddUsersViewModel::Entering CheckPassword"),null!=this.txtPassword.Text&&null!=this.ConfirmPassword.Text?this.txtPassword.Text!=this.ConfirmPassword.Text?void(this.DisplayMessage=i.a.GetResource("Users_PwdError")):void 0:(this.DisplayMessage=" Password Mismatch ",void Logger.InfoLog("AddUsersViewModel::Exiting CheckPassword"))}))}OnSaveUsers(s){try{if(this.DisplayMessage="","Save"==s){if(""==this.txtOldPassword.Text||null==this.txtOldPassword.Text)return void(this.DisplayMessage="Enter Old password");let s="";if(""==this.UserName.SelectedValue.toString()&&(s="Select User Name"),null!=this.txtPassword.Text&&null!=this.ConfirmPassword&&this.txtPassword.Text!=this.ConfirmPassword.Text)return void(this.DisplayMessage=i.a.GetResource("Users_PwdError"));if(s.length>0)return void(this.DisplayMessage=s);if(null==this.ConfirmPassword||""==this.ConfirmPassword.Text)return void(this.DisplayMessage=" Please Enter Confirm Password");{if(this.DisplayMessage=r.e.ValidatePassword(this.txtPassword.Text),this.DisplayMessage.length>0)return;if(this.txtPassword.Text==this.txtOldPassword.Text)return void(this.DisplayMessage="Please Enter New Password");let s=[];s.push(this.UserName.SelectedValue),s.push(this.UserName.GetText()),s.push(this.txtPassword.Text),s.push(i.a.SessionManager.CompanyIndex),s.push(i.a.SessionManager.UserName),s.push(i.a.SessionManager.UserID),s.push(i.a.SessionManager.LanguageID);let e=i.a.admin.ResetPassword(s,this.txtOldPassword.Text);r.e.Int(e.obj)>0?(parseInt(this.UserName.SelectedValue)>0&&(this.DisplayMessage="User Updated Successfully"),this.ConfirmPassword.Text="",this.txtOldPassword.Text="",this.txtPassword.Text="",this.IsLoginCall&&(this.DialogResult=!0,i.a.page.HideDialog())):null!=e&&e.Tables.length>1&&(this.DisplayMessage=e.Tables[e.Tables.length-1][0].ErrorMessage.toString())}}else"Close"==s&&i.a.page.HideDialog()}catch(e){Logger.ErrorLog("ResetPasswordViewModel:: OnSaveUsers ::"+e.stack)}}}}}]);