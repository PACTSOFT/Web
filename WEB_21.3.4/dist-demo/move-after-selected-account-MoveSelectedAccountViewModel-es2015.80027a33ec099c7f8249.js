(window.webpackJsonp=window.webpackJsonp||[]).push([[189],{C0PX:function(e,t,o){"use strict";o.r(t),o.d(t,"MoveSelectedAccountViewModel",(function(){return r}));var s=o("Do2H"),i=o("ScVY"),c=o("4HhE"),l=o("n56n"),n=o("ww0f"),a=o("0/4Q");class r extends i.b{constructor(){super(...arguments),this.Move=new c.b,this._TargetAccountID=new l.b(0),this.IsAbove=!1,this.Group=[]}get TargetAccount(){return this._TargetAccountID}set TargetAccount(e){e!=this._TargetAccountID&&(this._TargetAccountID=e)}get SelectedNode(){return this._lblSelectedNodeName}set SelectedNode(e){e!=this._lblSelectedNodeName&&(this._lblSelectedNodeName=e)}MoveSelectedAccountViewModel(e,t,o,i,c){if(this.IsAbove=i,Logger.InfoLog("MoveSelectedAccountViewModel::Entering MoveSelectedAccountViewModel with AccountID="+e+",AccName="+t),this.SelectedAccount=t,this.CCID=c,this.IsAbove?(this.TargetAccount.Label="Move Above",this.lblTarget="Move Above"):(this.TargetAccount.Label="Move After",this.lblTarget="Move After"),3!=c&&2!=c||(this.AccountID=e,this.TargetAccount.CCID=c,this.TargetAccount.TypeID=105,this.MoveLabel="Select"),3==c)this.Title="Move Product",this.MoveLabel="Selected Product",this.TargetAccount.CustomWhere=" a.parentid="+o+" and a.ProductID<> "+e+" ";else if(2==c)this.Title="Move Account",this.MoveLabel="Selected Account",this.TargetAccount.CustomWhere=" a.parentid="+o+" and a.accountid<> "+e+" ";else if(c>5e4){if(1==e)return this.DisplayMessage=s.a.GetResource("Root_Mve"),void(this.MessageVisibility=!0);this.SelectedNode=t,this.NodeID=e,this.CCID=c,this.FillControls()}this.Move.Subscribe(this,"OnMove"),this.DisplayMessage="",this.MessageVisibility=!1,Logger.InfoLog("MoveSelectedAccountViewModel::Exiting MoveSelectedAccountViewModel")}FillControls(){this.Group=[],this.Title="Move Dimension",this.MoveLabel=s.a.GetResource("Dmn_Sel");let e=s.a.common.GetSameLevelCostCenterNodes(this.NodeID,this.CCID);if(null!=e&&e.Tables.length>1)for(let t=0;t<e.Tables[0].length;t++){const o=e.Tables[0][t];this.Group.push(a.d.ComboBoxItems_2(o[e.Columns[0][1]],o[e.Columns[0][0]]))}Logger.InfoLog("MoveAfterCostCenterViewModel::Exiting FillControls")}OnMove(e){if(null!=e&&"Cancel"==e.toString())s.a.page.HideDialog(),this.Parent.MoveSelectedAccountVisibility=!1;else{Logger.InfoLog("MoveSelectedAccountViewModel::Entering OnMove");try{let e,t="";if(2==this.CCID||3==this.CCID){if(null==this.TargetAccount.SelectedValue||this.TargetAccount.SelectedValue<1||0==this.TargetAccount.SelectedValue)return this.DisplayMessage=s.a.GetResource("Select")+" "+s.a.GetResource("Move_Target"),void(this.MessageVisibility=!0)}else if(this.CCID>=5e4){if(this.SelectedGroup<=0)return this.DisplayMessage=s.a.GetResource("Select")+" "+this.lblTarget,void(this.MessageVisibility=!0);this.IsAbove?(e=(new n.a).MoveAboveSelectedAccount(this.NodeID.toString(),this.SelectedGroup,4,this.CCID),t=e.Message):(e=(new n.a).MoveAfterSelectedAccount(this.NodeID.toString(),this.SelectedGroup,5,this.CCID),t=e.Message)}2==this.TargetAccount.CCID?this.IsAbove?(e=(new n.a).MoveAboveSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,1,this.CCID),t=e.Message):(e=(new n.a).MoveAfterSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,0,this.CCID),t=e.Message):3==this.TargetAccount.CCID&&(this.IsAbove?(e=(new n.a).MoveAboveSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,2,this.CCID),t=e.Message):(e=(new n.a).MoveAfterSelectedAccount(this.AccountID.toString(),this.TargetAccount.SelectedValue,3,this.CCID),t=e.Message)),this.DisplayMessage=t,this.MessageVisibility=!0,this.Parent.tree[0].SetFocusNodeID=this.NextFocusNodeID,this.Parent.Refresh(),this.Parent.ClearSelectedNodes=!0,Logger.InfoLog("MoveSelectedAccountViewModel::Exiting OnMove")}catch(t){Logger.ErrorLog("MoveSelectedAccountViewModel:: OnMove"+t.stack)}}}}}}]);