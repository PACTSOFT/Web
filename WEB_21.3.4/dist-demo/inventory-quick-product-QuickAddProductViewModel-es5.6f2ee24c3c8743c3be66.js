function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var i=t[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var o,i=_getPrototypeOf(e);if(t){var s=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,s)}else o=i.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{WEnO:function(e,t,o){"use strict";o.r(t),o.d(t,"QuickAddProductViewModel",(function(){return g}));var i=o("VxiT"),s=o("0/4Q"),r=o("n56n"),n=o("NkMH"),a=o("Do2H"),c=o("eQJW"),u=o("Lp6j"),l=o("ScVY"),h=o("sW9y"),d=o("DLiw"),b=o("MJVe"),m=o("4k0m"),S=o("++IR"),C=o("pcVU"),P=o("4HhE"),g=function(e){_inherits(o,e);var t=_createSuper(o);function o(e,s,r,n,a){var c;return _classCallCheck(this,o),(c=t.call(this)).oProduct=new C.a,c.ImageView=null,c.InheritImage=!1,c.InheritGrpImage=!1,c.InheritDimImageID=-1,c.ScreenObject=new i.a,c.NameSameasCode=!1,c.MessageVisibility=!1,c.RetValue=0,c.DisplayMessage="",c.Height="",c.IsAutoBarCode=!1,c.ParentId=0,c.SelectedNode=0,c.ScreenName="",c.Title="",c.NodeID=0,c.objProduct={},c.GParentID=0,c.LinkColumnCostcenterID=-1,c.DefaultValuation=1,c.FileID=0,c.ProductPhoto="",c.isPhotoChanged=!1,c.ClassName="QuickAddProductViewModel",c.LoadViewModel(e,s,r,n,a),c}return _createClass(o,[{key:"LoadViewModel",value:function(e,t,o,i,s){Logger.InfoLog("QuickAddProductViewModel::Entering QuickAddProductViewModel"),0==t&&(t=1),this.NodeID=e,this.GParentID=i,this.oProduct.ProductID=this.NodeID,this.ParentId=t,this.oProduct.IsGroup=s,this.ScreenObject.LoadQuickScreen(this,3,s),this.OnLoad(),this.FillControls(),this.Title=s?0!=this.NodeID?"Edit Group":"Add Group":a.a.GetResource(0!=this.NodeID?"Product_QuickEdit":"Product_QuickAdd"),this.DisplayName=this.Title;var r=this.ScreenObject.StaticFields.find((function(e){return 26722==e.DBColumnID}));s||null==r||null==r||(r.Visible=!1),null!=this.Code&&this.Code.TextChangedCommand.Subscribe(this,"OnTextChanged"),this.SetViewByType(),Logger.InfoLog("QuickAddProductViewModel::BuildControls Success")}},{key:"SetViewFilter",value:function(e,t){var o=this;return t.filter="",e.forEach((function(e){if("3"==e){if(!(null!=(i=o.ScreenObject.QuickAddFields.find((function(e){return 281==e.DBColumnID})))&&null!=i&&i instanceof r.b&&i.SelectedValue>0))return!1;t.filter+=" and GroupID="+i.SelectedValue}else if(!u.e.IsEmpty(e)&&parseInt(e)>5e4){var i;if(!(null!=(i=o.ScreenObject.QuickAddFields.find((function(t){return t instanceof r.b&&t.CCID==parseInt(e)})))&&null!=i&&i instanceof r.b&&i.SelectedValue>0))return!1;t.filter+=" and DcCCNID"+(parseInt(e)-5e4)+"="+i.SelectedValue}})),!0}},{key:"SetViewByType",value:function(){var e,t=this,o=null,i="",s=this.ScreenObject.Data.Tables[10].filter((function(e){return"PrDimWiseFields"==e.Name})),n=null;if(s.length>0&&""!=s[0].Value.toString()&&(n=s[0].Value.toString().split(";")),null!=n){var a={filter:i};this.SetViewFilter(n,a)||(i=a.filter),i=a.filter,n.forEach((function(e){if("3"==e)null!=(o=t.ScreenObject.QuickAddFields.find((function(e){return 281==e.DBColumnID})))&&null!=o&&o instanceof r.b&&(o.Enable=!1);else if(!u.e.IsEmpty(e)&&parseInt(e)>5e4){var i=t.ScreenObject.QuickAddFields.find((function(t){return t instanceof r.b&&t.CCID==parseInt(e)}));null!=i&&null!=i&&i instanceof r.b&&(i.Enable=!1)}}))}u.e.IsEmpty(i)||(this.ScreenObject.Data.Tables[18].filter((function(e){return 0==e.IsTab})).forEach((function(i){null!=(o=t.ScreenObject.QuickAddFields.find((function(e){return e instanceof P.c&&e.DBColumnID==parseInt(i.CostCenterColID)})))&&null!=o&&(1!=(e=parseInt(i.Hide))&&2!=e||(o.Visible=!1),1!=(e=parseInt(i.Mandatory))&&2!=e||(o.Mandatory=!0))})),this.SetFieldPOsition())}},{key:"SetFieldPOsition",value:function(){var e=this.ScreenObject.QuickAddFields.filter((function(e){return!u.e.IsEmpty(e.Row)}));e.sort((function(e,t){return e.Row-t.Row}));for(var t=0,o=0;o<e.length;o++){var i=e.ElementAt(o);i.Visible&&(i.Row=t++)}}},{key:"OnLoad",value:function(){var e,t=this;if(this.ButtonSave=new n.a,0==this.NodeID?a.a.SessionManager.HideUnathorizedAccess?this.ButtonSave.Visible=a.a.SessionManager.IsActionAssigned(3,"Create"):this.ButtonSave.Enable=a.a.SessionManager.IsActionAssigned(3,"Create"):(this.ScreenObject.IsEdit=!0,a.a.SessionManager.HideUnathorizedAccess?this.ButtonSave.Visible=a.a.SessionManager.IsActionAssigned(3,"Update"):this.ButtonSave.Enable=a.a.SessionManager.IsActionAssigned(3,"Update")),this.QuickAssign=new h.a,this.QuickAssign.QuickAssignGrid_1(2,this.ScreenObject.Data,this.oProduct.IsGroup),this.Code=this.ScreenObject.GetQuickCode(261),this.Name=this.ScreenObject.GetQuickText(262),this.BarCode=this.ScreenObject.GetQuickText(280),this.ProductLength=this.ScreenObject.GetQuickText(601),null!=this.ProductLength){this.ProductLength.TextChangedCommand.Subscribe(this,"onTextValueChanged");var o=0;o=u.e.IntTryParse(this.ScreenObject.Data.Tables[10].filter((function(e){return"LengthDecimals"==e.Name}))[0].Value.toString()),this.ProductLength.DecimalPoints=o.toString(),this.ProductLength.LostFocusCommand.Subscribe(this,"onLostFocus")}if(this.ProductWidth=this.ScreenObject.GetQuickText(602),null!=this.ProductWidth){this.ProductWidth.TextChangedCommand.Subscribe(this,"onTextValueChanged");var i=0;i=u.e.IntTryParse(this.ScreenObject.Data.Tables[10].filter((function(e){return"WidthDecimals"==e.Name}))[0].Value.toString()),this.ProductWidth.DecimalPoints=i.toString(),this.ProductWidth.LostFocusCommand.Subscribe(this,"onLostFocus")}if(this.ProductHeight=this.ScreenObject.GetQuickText(603),null!=this.ProductHeight){this.ProductHeight.TextChangedCommand.Subscribe(this,"onTextValueChanged");var r=0;r=u.e.IntTryParse(this.ScreenObject.Data.Tables[10].filter((function(e){return"HeightDecimals"==e.Name}))[0].Value.toString()),this.ProductHeight.DecimalPoints=r.toString(),this.ProductHeight.LostFocusCommand.Subscribe(this,"onLostFocus")}if(this.ProductVolume=this.ScreenObject.GetQuickText(604),null!=this.ProductVolume){var l=0;l=u.e.IntTryParse(this.ScreenObject.Data.Tables[10].filter((function(e){return"VolumeDecimals"==e.Name}))[0].Value.toString()),this.ProductVolume.DecimalPoints=l.toString(),this.ProductVolume.LostFocusCommand.Subscribe(this,"onLostFocus")}if(this.ProductWeight=this.ScreenObject.GetQuickText(605),null!=this.ProductWeight){var d=0;d=u.e.IntTryParse(this.ScreenObject.Data.Tables[10].filter((function(e){return"VolumeDecimals"==e.Name}))[0].Value.toString()),this.ProductWeight.DecimalPoints=d.toString(),this.ProductWeight.LostFocusCommand.Subscribe(this,"onLostFocus")}if(this.ProductWastage=this.ScreenObject.GetQuickText(584),null!=this.ProductWastage){var b=0;b=u.e.IntTryParse(this.ScreenObject.Data.Tables[10].filter((function(e){return"VolumeDecimals"==e.Name}))[0].Value.toString()),this.ProductWastage.DecimalPoints=b.toString(),this.ProductWastage.LostFocusCommand.Subscribe(this,"onLostFocus")}null!=this.Name&&this.Name.LostFocusCommand.Subscribe(this,"OnNameLostFocus"),this.oCombo=this.ScreenObject.GetQuickCombo(266),null!=this.oCombo&&(this.ScreenObject.Data.Tables[3].forEach((function(e){t.oCombo.Items.push(s.d.ComboBoxItems_2(e[Object.keys(e)[1]].toString(),e[Object.keys(e)[0]].toString()))})),this.ScreenObject.Data.Tables[3].length>0&&(u.e.StringIsNullOrEmpty(this.oCombo.SelectedValue)||parseInt(this.oCombo.SelectedValue)<=1||0==this.ScreenObject.Data.Tables[3].filter((function(e){return e.StatusID==t.oCombo.SelectedValue})).length)&&(this.oCombo.SelectedValue=this.ScreenObject.Data.Tables[3][0][Object.keys(this.ScreenObject.Data.Tables[3][0])[0]].toString())),this.oCombo=this.ScreenObject.GetQuickCombo(264),null!=this.oCombo&&(this.ScreenObject.Data.Tables[4].forEach((function(e){"2"==e[Object.keys(e)[0]].toString()&&!Object(c.j)(a.a.SessionManager.Preferences.EnableSerialProducts.toString())||"5"==e[Object.keys(e)[0]].toString()&&!Object(c.j)(a.a.SessionManager.Preferences.EnableBatchProducts.toString())||!("8"!=e[Object.keys(e)[0]].toString()&&"3"!=e[Object.keys(e)[0]].toString()||Object(c.j)(a.a.SessionManager.Preferences.EnableDynamicProducts.toString()))||t.oCombo.Items.push(s.d.ComboBoxItems_2(e[Object.keys(e)[1]].toString(),e[Object.keys(e)[0]].toString()))})),this.ProductType=this.oCombo,this.ProductType.SelectionChangedCommand.Subscribe(this,"OnProductTypeChange")),this.ProductGroup=this.ScreenObject.GetQuickField(281),null!=this.ProductGroup&&(0!=this.ParentId&&0==this.NodeID?(this.ProductGroup.SelectedValue=this.ParentId,this.ProductGroup.DefaultValue=this.ProductGroup.SelectedValue.toString()):(this.ProductGroup.SelectedValue=this.GParentID,this.ProductGroup.DefaultValue=this.ProductGroup.SelectedValue.toString()),this.ProductGroup.SelectionChangedCommand.Subscribe(this,"OnGroupSelectionChanged"),this.ProductGroup.Enable=0==this.NodeID);var m=this.ScreenObject.Data.Tables[10];if(e=m,null!=(m=m.filter((function(e){return"DefaultProductValuation"==e.Name})))&&m.length>0){var S=this.ScreenObject.Data.Tables[6].filter((function(e){return e.ValuationMethod==m[0][Object.keys(m[0])[1]].toString()}));null!=S&&S.length>0&&(this.DefaultValuation=parseInt(S[0].ValuationID))}null!=(m=(m=e).filter((function(e){return"AutoBarcode"==e.Name})))&&m.length>0&&Object(c.j)(m[0].Value)?(this.IsAutoBarCode=!0,null!=this.BarCode&&(this.BarCode.Enable=!1)):this.IsAutoBarCode=!1;var C=this.ScreenObject.Data.Tables[10].filter((function(e){return"DefaultImage"==e.Name}));if(null!=C&&C.length>0&&(this.InheritImage=Object(c.j)(C[0].Value)),null!=(C=this.ScreenObject.Data.Tables[10].filter((function(e){return"InheritGroupImage"==e.Name})))&&C.length>0&&(this.InheritGrpImage=Object(c.j)(C[0].Value)),null!=(C=this.ScreenObject.Data.Tables[10].filter((function(e){return"InheritDimensionImage"==e.Name})))&&C.length>0&&(this.InheritDimImageID=""!=C[0].Value.toString()?parseInt(C[0].Value):-1),null!=this.ScreenObject.Data&&null!=this.ScreenObject.Data&&this.ScreenObject.Data.Tables.length>14&&(this.ImageView=this.ScreenObject.Data.Tables[14]),this.oCombo=this.ScreenObject.GetQuickCombo(265),null!=this.oCombo&&(this.ScreenObject.Data.Tables[6].forEach((function(e){t.oCombo.Items.push(s.d.ComboBoxItems_2(e[Object.keys(e)[1]].toString(),e[Object.keys(e)[0]].toString()))})),this.oCombo.SelectedValue=this.DefaultValuation.toString()),this.oCombo=this.ScreenObject.GetQuickCombo(269),null!=this.oCombo&&this.ScreenObject.Data.Tables[7].forEach((function(e){t.oCombo.Items.push(s.d.ComboBoxItems_2(e[Object.keys(e)[1]].toString(),e[Object.keys(e)[0]].toString()))})),this.oCombo=this.ScreenObject.GetQuickCombo(50392),null!=this.oCombo&&(this.oCombo.Items.push(s.d.ComboBoxItems_2("Yes","1")),this.oCombo.Items.push(s.d.ComboBoxItems_2("No","0")),this.oCombo.SelectedValue=this.oCombo.DefaultValue),this.oCombo=this.ScreenObject.GetQuickCombo(275),null!=this.oCombo&&(this.oCombo.Items.push(s.d.ComboBoxItems_2("Yes","1")),this.oCombo.Items.push(s.d.ComboBoxItems_2("No","0")),this.oCombo.SelectedValue="0"),this.oCombo=this.ScreenObject.GetQuickCombo(600),null!=this.oCombo&&(this.oCombo.Items.push(s.d.ComboBoxItems_2("No","0")),this.oCombo.Items.push(s.d.ComboBoxItems_2("Yes","1")),this.oCombo.SelectedValue=a.a.SessionManager.Preferences.ContainsKey("PackDimension")&&""!=a.a.SessionManager.Preferences.PackDimension&&parseInt(a.a.SessionManager.Preferences.PackDimension)>0?"1":"0"),this.oCombo=this.ScreenObject.GetQuickCombo(587),null!=this.oCombo&&(this.oCombo.Items.push(s.d.ComboBoxItems_2("No","0")),this.oCombo.Items.push(s.d.ComboBoxItems_2("Yes","1")),this.oCombo.Items.push(s.d.ComboBoxItems_2("FIFO","2")),this.oCombo.SelectedValue="0"),this.oCombo=this.ScreenObject.GetQuickCombo(588),null!=this.oCombo&&(this.oCombo.Items.push(s.d.ComboBoxItems_2("None","0")),this.oCombo.Items.push(s.d.ComboBoxItems_2("Order","1")),this.oCombo.Items.push(s.d.ComboBoxItems_2("Max.Level","2")),this.oCombo.Items.push(s.d.ComboBoxItems_2("Reorder","3")),this.oCombo.SelectedValue="0"),this.oCombo=this.ScreenObject.GetQuickCombo(593),null!=this.oCombo&&(this.oCombo.Items.push(s.d.ComboBoxItems_2("None","0")),this.oCombo.Items.push(s.d.ComboBoxItems_2("MRP","1")),this.oCombo.SelectedValue="0"),this.oCombo=this.ScreenObject.GetQuickCombo(594),null!=this.oCombo&&(this.oCombo.Items.push(s.d.ComboBoxItems_2("Purchased","0")),this.oCombo.Items.push(s.d.ComboBoxItems_2("Produced","1")),this.oCombo.SelectedValue="0"),this.oCombo=this.ScreenObject.GetQuickCombo(585),null!=this.oCombo){if(this.ScreenObject.Data.Tables.length>17&&this.ScreenObject.Data.Tables[17].length>0){var P=this.ScreenObject.Data.Tables[17];if(null!=(P=P.filter((function(e){return 0==e.RuleType})))&&null!=P&&P.length>0)for(var g=0;g<P.length;g++)this.oCombo.Items.push(s.d.ComboBoxItems_2(P[g].ProfileName.toString(),P[g].ProfileID.toString()))}this.oCombo.SelectedValue=""}if(this.oCombo=this.ScreenObject.GetQuickCombo(586),null!=this.oCombo){if(this.ScreenObject.Data.Tables.length>17&&this.ScreenObject.Data.Tables[17].length>0){var O=this.ScreenObject.Data.Tables[17];if(null!=(O=O.filter((function(e){return 0==e.RuleType})))&&null!=O&&O.length>0)for(var I=0;I<O.length;I++)this.oCombo.Items.push(s.d.ComboBoxItems_2(O[I].ProfileName.toString(),O[I].ProfileID.toString()))}this.oCombo.SelectedValue=""}this.oCombo=this.ScreenObject.GetQuickCombo(274),null!=this.oCombo&&(this.oCombo.Items.push(s.d.ComboBoxItems_2("Not Applicable","3")),this.oCombo.Items.push(s.d.ComboBoxItems_2("Optional","2")),this.oCombo.Items.push(s.d.ComboBoxItems_2("Mandatory","1")),this.oCombo.SelectedValue="3"),this.ReorderQty=this.ScreenObject.GetQuickTextBoxWithCombo(277),null!=this.ReorderQty&&(this.ReorderQty.Items.push(s.d.ComboBoxItems_2("Value","0")),this.ReorderQty.Items.push(s.d.ComboBoxItems_2("Percentage","1")),this.ReorderQty.SelectedValue="0"),this.ReorderTrigger=this.ScreenObject.GetQuickTextBoxWithCombo(11496),null!=this.ReorderTrigger&&(this.ReorderTrigger.Items.push(s.d.ComboBoxItems_2("Value","0")),this.ReorderTrigger.Items.push(s.d.ComboBoxItems_2("Percentage","1")),this.ReorderTrigger.SelectedValue="0"),this.UOM=this.ScreenObject.GetQuickUom(268),null!=this.UOM&&(this.ScreenObject.Data.Tables[13].forEach((function(e){t.UOM.Items.push(s.d.ComboBoxItems_2(e.UnitName.toString(),e.UOMID.toString()))})),this.UOM.Items.push(s.d.ComboBoxItems_2("Product-Wise","-399")),this.UOM.SelectedValue=this.UOM.DefaultValue),null!=this.ScreenObject.Data&&this.ScreenObject.Data.Tables.length>15&&this.ScreenObject.Data.Columns[15].Contains("IsParentCodeInherited")&&this.ScreenObject.Data.Tables[15].length>0&&this.ScreenObject.InitAutoCode(this.ScreenObject.Data.Tables[15],this.oProduct.IsGroup);var f=this.ScreenObject.Data.Tables[10].filter((function(e){return e.Name==(t.oProduct.IsGroup?"GroupNameSameasCode":"NameSameasCode")}));null!=f&&f.length>0&&Object(c.j)(f[0].Value)?(this.NameSameasCode=!0,null!=this.Name&&(this.Name.Enable=!1)):(this.NameSameasCode=!1,null!=this.Name&&(this.Name.Enable=!0))}},{key:"LoadUnitsProductWise",value:function(e){}},{key:"AutoGenerateCode",value:function(){var e=this,t=this.ScreenObject.Data.Tables[10].filter((function(e){return"CodeCapsLock"==e.Name}));if(null!=this.Code&&(t.length>0&&Object(c.j)(t[0].Value)&&(this.Code.IsAllCaps=!0),t=this.ScreenObject.Data.Tables[10].filter((function(e){return"CodeCapsToFirstLetter"==e.Name})),null!=this.Code&&t.length>0&&Object(c.j)(t[0].Value)&&(this.Code.IsFirstLetterCaps=!0),(t=this.ScreenObject.Data.Tables[10].filter((function(e){return"CodeIgnoreSpaces"==e.Name}))).length>0&&Object(c.j)(t[0].Value)&&(this.Code.IgnoreSpaces=!0)),(t=this.ScreenObject.Data.Tables[10].filter((function(t){return t.Name==(e.oProduct.IsGroup?"GroupNameSameasCode":"NameSameasCode")}))).length>0&&Object(c.j)(t[0].Value)?(this.NameSameasCode=!0,null!=this.Name&&(this.Name.Enable=!1)):(this.NameSameasCode=!1,null!=this.Name&&(this.Name.Enable=!0)),0==this.NodeID&&null!=this.BarCode&&this.IsAutoBarCode&&(this.BarCode.Text=this.oProduct.GetAutoBarcode()),0==this.NodeID&&null!=this.Code?(null!=this.ProductGroup&&null!=this.ProductGroup.SelectedValue&&(this.ParentId=this.ProductGroup.SelectedValue),this.ScreenObject.SetAutoCode(this.Code,this.oProduct.IsGroup,this.ParentId,this.ScreenObject.Data.Tables[15]),this.OnTextChanged("")):this.ScreenObject.GetCodeParams(this.ScreenObject.Data.Tables[15]),null!=this.Name){var o=this.ScreenObject.Data.Tables[10].filter((function(e){return"CapsLock"==e.Name}));if(o.length>0&&Object(c.j)(o[0].Value)&&(this.Name.IsAllCaps=!0),(o=this.ScreenObject.Data.Tables[10].filter((function(e){return"CapsToFirstLetter"==e.Name}))).length>0&&Object(c.j)(o[0].Value)&&(this.Name.IsFirstLetterCaps=!0),(o=this.ScreenObject.Data.Tables[10].filter((function(e){return"IgnoreSpaces"==e.Name}))).length>0&&Object(c.j)(o[0].Value)&&(this.Name.IgnoreSpaces=!0),null!=this.ScreenObject.Data.Tables[10]){if((o=this.ScreenObject.Data.Tables[10].filter((function(e){return"ProductName"==e.Name}))).length>0&&""!=o[0].Value.toString()&&(this.LinkColumnCostcenterID=parseInt(o[0].Value),this.ScreenObject.LinkColumnCostcenterID=this.LinkColumnCostcenterID,this.LinkColumnCostcenterID>0)){if(null!=this.ScreenObject.Data.Tables[12]&&this.ScreenObject.Data.Tables[12].length>0){var i=this.ScreenObject.Data.Tables[12].filter((function(t){return t.FeatureID==e.LinkColumnCostcenterID}));i.length>0&&!u.e.StringIsNullOrEmpty(i[0].NAME)&&0==this.NodeID&&(this.Name.Text=i[0].NAME.toString())}this.Name.Enable=!1}-1!=this.LinkColumnCostcenterID&&0!=this.LinkColumnCostcenterID||((o=this.ScreenObject.Data.Tables[10].filter((function(t){return t.Name==(e.oProduct.IsGroup?"GroupNameSameasCode":"NameSameasCode")}))).length>0&&Object(c.j)(o[0].Value)?this.Name.Enable=!1:this.ScreenObject.IsAutoName?(this.ScreenObject.IsNameAutoGenerate=!0,this.Name.Enable=!1):(this.ScreenObject.IsNameAutoGenerate=!1,this.Name.Enable=!0))}}var s=this.ScreenObject.GetQuickCombo(264);if(null!=s&&0==this.NodeID){var r=this.ScreenObject.Data.Tables[10].filter((function(e){return"DefaultProductType"==e.Name}));r.length>0&&""!=r[0].Value.toString()&&(s.SelectedValue=r[0].Value.toString())}if(null!=this.UOM&&null!=this.UOM&&null!=this.ScreenObject.Data.Tables[10]&&0==this.NodeID){var n=this.ScreenObject.Data.Tables[10].filter((function(e){return"DefaultUOM"==e.Name}));n.length>0&&""!=n[0].Value.toString()&&(this.UOM.SelectedValue=n[0].Value.toString())}}},{key:"OnTextChanged",value:function(e){null!=this.Name&&null!=this.Name&&(!this.NameSameasCode||this.Code.PrefixVisibility||this.Code.SuffixVisibility?this.NameSameasCode&&this.Code.PrefixVisibility&&this.Code.SuffixVisibility&&this.Code.Enable?this.Name.Text=this.Code.PrefixCode+this.Code.SuffixCode:this.NameSameasCode&&this.Code.PrefixVisibility&&!this.Code.SuffixVisibility?this.Name.Text=this.Code.PrefixCode+this.Code.Text:this.NameSameasCode&&!this.Code.PrefixVisibility&&this.Code.SuffixVisibility&&(this.Name.Text=this.Code.Text+this.Code.SuffixCode):this.Name.Text=this.Code.Text)}},{key:"onTextValueChanged",value:function(e){var t,o,i;t=u.e.DoubleTryParse(this.ProductLength.Text),o=u.e.DoubleTryParse(this.ProductWidth.Text),i=u.e.DoubleTryParse(this.ProductHeight.Text),this.ProductVolume.Text=(t*o*i).ToString("N"+this.ProductVolume.DecimalPoints)}},{key:"onLostFocus",value:function(e){var t=0;(t=u.e.DoubleTryParse(e.Text))&&(e.Text=t.ToString("N"+e.DecimalPoints)),this.ScreenObject.onTextBoxLostFocus(e)}},{key:"FillControls",value:function(){if(0!=this.NodeID){this.oProduct.ProductID=this.NodeID;var e=this.oProduct.GetProductDetails();this.QuickAssign.LoadGrid(this.NodeID,e.Tables[11]),null!=this.Code&&(this.Code.Text=this.oProduct.ProductCode,this.Code.Code=this.oProduct.ProductCode,(this.ScreenObject.InheritParentCode||this.ScreenObject.IsAutoCode)&&(this.Code.Enable=parseInt(e.Tables[0][0].Depth)<=1&&!this.ScreenObject.IsRootAutoCode));var t=this.ScreenObject.GetQuickField(281);null!=t&&(t.SelectedValue=this.oProduct.ProductGroup),this.ScreenObject.FillControls(e.Tables[0][0],e.Tables[1][0],e.Tables[7].length>0?e.Tables[7][0]:null,null,e.Tables[19],e.Tables[4]),e.Tables[7].length>0&&this.ScreenObject.LoadCustomFieldsCCData(e.Tables[7],e.Tables[19]),this.ScreenObject.CanApprove(e.Tables[0][0],e.Tables[16][0],this.ButtonSave),null!=this.ScreenObject.StatusAssignGrid&&this.ScreenObject.StatusAssignGrid.Load(e.Tables[20]),this.AddCCFieldsSelectionChange(),this.AutoGenerateCode(),e.Tables.length>13&&null!=this.UOM&&e.Tables[13].length>0&&(this.UOM.SelectedValue="-399",this.UOM.DefaultValue=e.Tables[0][0].UOMID.toString());var o=e.Tables[4].filter((function(e){return 1==e.IsProductImage}));o.length>0?this.FileID=parseInt(o[0].FileID):this.InheritImage?this.FileID=0:(this.FileID=0,this.InheritGrpImage?this.OnLoadImage("Group",this.ProductGroup.SelectedValue):this.OnLoadImage("Dimension",this.GetImageCCVal())),a.a.SessionManager.IsOffline&&this.NodeID>0&&(this.ButtonSave.Visible=!1)}else this.AutoGenerateCode(),this.LoadParentData(),this.oProduct.GUID="";this.OnProductTypeChange(null)}},{key:"OnLoadImage",value:function(e,t){var o=this;"Group"!=e&&"Dimension"!=e||this.InheritImage||(null!=this.ScreenObject.Data&&null!=this.ScreenObject.Data&&this.ScreenObject.Data.Tables.length>14&&(this.ImageView=this.ScreenObject.Data.Tables[14]),this.InheritGrpImage?this.ImageView=this.ImageView.filter((function(e){return 3==e.FeatureID&&e.FeaturePK==t&&1==e.IsProductImage})):this.InheritDimImageID>5e4&&(this.ImageView=this.ImageView.filter((function(e){return e.FeatureID==o.InheritDimImageID&&e.FeaturePK==t&&1==e.IsProductImage}))),this.ImageView.length>0&&(this.isPhotoChanged=!0))}},{key:"onSaveProduct",value:function(e){var t=this;Logger.InfoLog("QuickAddProductViewModel::Entering onSaveProduct");try{if("Save"==e.toString()||"APPROVE_CALL"==e.toString()){if(0==this.oProduct.ProductID){if(null!=this.Code){var o;o=(o=this.ScreenObject.Data.Tables[15]).filter((function(e){return 0==e.IsName}));var i={StrCode:this.oProduct.ProductCode,CodePrefix:this.oProduct.CodePrefix,CodeNumber:this.oProduct.CodeNumber};if(this.DisplayMessage=this.ScreenObject.SetAutoCodeParams_3(this.Code,this.ParentId,o,i),this.oProduct.ProductCode=i.StrCode,this.oProduct.CodePrefix=i.CodePrefix,this.oProduct.CodeNumber=i.CodeNumber,this.OnTextChanged(""),this.DisplayMessage.length>0)return}}else if(this.oProduct.ProductID>0&&null!=this.Code){if(this.Code.Enable||this.ScreenObject.CodeSeqExist)null!=this.Code&&(this.oProduct.ProductCode=this.Code.Text);else{var s;s=(s=this.ScreenObject.Data.Tables[15]).filter((function(e){return 0==e.IsName}));var r={StrCode:this.oProduct.ProductCode,CodePrefix:this.oProduct.CodePrefix,CodeNumber:this.oProduct.CodeNumber};if(this.DisplayMessage=this.ScreenObject.SetAutoCodeParams_3(this.Code,this.ParentId,s,r),this.oProduct.ProductCode=r.StrCode,this.oProduct.CodePrefix=r.CodePrefix,this.oProduct.CodeNumber=r.CodeNumber,this.OnTextChanged(""),this.DisplayMessage.length>0)return}this.Code.Code=this.Code.Text}var n;if(this.oProduct.ProductName=this.ScreenObject.GetTextComboValue_string(262,"").trim(),null!=this.Name&&this.ScreenObject.IsNameAutoGenerate)n=(n=this.ScreenObject.Data.Tables[15]).filter((function(e){return 1==e.IsName})),this.ScreenObject.IsName=!0,null!=n&&n.length>0&&(this.Name.Text=this.ScreenObject.SetAutoCodeParams_1(this.Name,this.ParentId,n),this.oProduct.ProductName=this.Name.Text.trim());var l=this.ScreenObject.ValidateData();if(l.length>0)return this.MessageVisibility=!0,void(this.DisplayMessage=l);if(0==this.oProduct.ProductID){this.oProduct.AliasName=this.ScreenObject.GetTextComboValue_string(263,this.oProduct.ProductName),this.oProduct.ProductType=this.ScreenObject.GetTextComboValue_int(264,1,"ProductTypeID"),this.oProduct.UOM=this.ScreenObject.GetTextComboValue_int(268,1,"UOMID"),this.oProduct.ProductStatus=this.ScreenObject.GetTextComboValue_int(266,31,"StatusID"),this.oProduct.Valuation=this.ScreenObject.GetTextComboValue_int(265,this.DefaultValuation,"ValuationID"),this.oProduct.ProductGroup=this.ScreenObject.GetPactListValue(281,this.ParentId),this.oProduct.Currency=this.ScreenObject.GetTextComboValue_int(269,1,"CurrencyID");var h=1;null!=this.ScreenObject.dsParentData&&this.ScreenObject.dsParentData.Tables.length>0&&!u.e.StringIsNullOrEmpty(this.ScreenObject.dsParentData.Tables[0][0].ManufacturerBarcode)&&(h=Object(c.j)(this.ScreenObject.dsParentData.Tables[0][0].ManufacturerBarcode)?1:0);var C=!1,P=this.ScreenObject.GetTextComboValue_int(50392,h);if(null!=P&&1===P&&(C=!0),this.oProduct.ManufacturerBarcode=C,this.oProduct.SalesAccount=this.ScreenObject.GetPactListValue(270,3,"SalesAccountID"),this.oProduct.PurchaseAccount=this.ScreenObject.GetPactListValue(271,2,"PurchaseAccountID"),this.oProduct.COGSAccount=this.ScreenObject.GetPactListValue(272,4,"COGSAccountID"),this.oProduct.ClosingStockAccount=this.ScreenObject.GetPactListValue(273,5,"ClosingStockAccountID"),this.oProduct.QtyAdjustment=this.ScreenObject.GetTextComboValue_int(274,3,"QtyAdjustType"),u.e.StringIsNullOrEmpty(this.ScreenObject.Data.Tables[10].filter((function(e){return"BinsDimension"==e.Name}))[0].Value))this.oProduct.BinWise=!1;else{h=0,null!=this.ScreenObject.dsParentData&&null!=this.ScreenObject.dsParentData&&this.ScreenObject.dsParentData.Tables.length>0&&!u.e.StringIsNullOrEmpty(this.ScreenObject.dsParentData.Tables[0][0].BinWise)&&(h=Object(c.j)(this.ScreenObject.dsParentData.Tables[0][0].BinWise)?1:0);var g=!1,O=this.ScreenObject.GetTextComboValue_int(275,0,"BinWise");null!=O&&1===O&&(g=!0),this.oProduct.BinWise=g}this.oProduct.PurchaseRates=this.ScreenObject.GetTextComboValue_double(22820,0,"PurchaseRate"),this.oProduct.PurchaseRateA=this.ScreenObject.GetTextComboValue_double(22786,0,"PurchaseRateA"),this.oProduct.PurchaseRateB=this.ScreenObject.GetTextComboValue_double(22787,0,"PurchaseRateB"),this.oProduct.PurchaseRateC=this.ScreenObject.GetTextComboValue_double(22788,0,"PurchaseRateC"),this.oProduct.PurchaseRateD=this.ScreenObject.GetTextComboValue_double(22789,0,"PurchaseRateD"),this.oProduct.PurchaseRateE=this.ScreenObject.GetTextComboValue_double(22790,0,"PurchaseRateE"),this.oProduct.PurchaseRateF=this.ScreenObject.GetTextComboValue_double(22791,0,"PurchaseRateF"),this.oProduct.PurchaseRateG=this.ScreenObject.GetTextComboValue_double(22792,0,"PurchaseRateG"),this.oProduct.SellingRates=this.ScreenObject.GetTextComboValue_double(22821,0,"SellingRate"),this.oProduct.SellingRateA=this.ScreenObject.GetTextComboValue_double(22793,0,"SellingRateA"),this.oProduct.SellingRateB=this.ScreenObject.GetTextComboValue_double(22794,0,"SellingRateB"),this.oProduct.SellingRateC=this.ScreenObject.GetTextComboValue_double(22795,0,"SellingRateC"),this.oProduct.SellingRateD=this.ScreenObject.GetTextComboValue_double(22796,0,"SellingRateD"),this.oProduct.SellingRateE=this.ScreenObject.GetTextComboValue_double(22797,0,"SellingRateE"),this.oProduct.SellingRateF=this.ScreenObject.GetTextComboValue_double(22798,0,"SellingRateF"),this.oProduct.SellingRateG=this.ScreenObject.GetTextComboValue_double(22799,0,"SellingRateG"),this.oProduct.ProductLength=this.ScreenObject.GetTextComboValue_double(601,0,"Length"),this.oProduct.ProductWidth=this.ScreenObject.GetTextComboValue_double(602,0,"Width"),this.oProduct.ProductHeight=this.ScreenObject.GetTextComboValue_double(603,0,"Height"),this.oProduct.ProductVolume=this.ScreenObject.GetTextComboValue_double(604,0,"Volume"),this.oProduct.ProductWeight=this.ScreenObject.GetTextComboValue_double(605,0,"Weight"),this.oProduct.ProductWastage=this.ScreenObject.GetTextComboValue_double(584,0,"Wastage"),this.oProduct.ProductPacking=this.ScreenObject.GetTextComboValue_int(600,0,"IsPacking"),this.oProduct.ProductBillOfEntry=this.ScreenObject.GetTextComboValue_int(587,0,"IsBillOfEntry"),this.oProduct.ReorderPolicy=this.ScreenObject.GetTextComboValue_int(588,0,"ReorderPolicy"),this.oProduct.MaxInventoryLevel=this.ScreenObject.GetTextComboValue_double(589,0,"MaxInventoryLevel"),this.oProduct.ReorderMinOrderQty=this.ScreenObject.GetTextComboValue_double(590,0,"ReorderMinOrderQty"),this.oProduct.ReorderMaxOrderQty=this.ScreenObject.GetTextComboValue_double(591,0,"ReorderMaxOrderQty"),this.oProduct.ReorderOrderMultiple=this.ScreenObject.GetTextComboValue_double(592,0,"ReorderOrderMultiple"),this.oProduct.PlanningMethod=this.ScreenObject.GetTextComboValue_int(593,0,"PlanningMethod"),this.oProduct.ProcurementMethod=this.ScreenObject.GetTextComboValue_int(594,0,"ProcurementMethod"),this.oProduct.LeadTime=this.ScreenObject.GetTextComboValue_double(597,0,"LeadTime"),this.oProduct.SafetyStock=this.ScreenObject.GetTextComboValue_double(598,0,"SafetyStock"),this.oProduct.ProductBOM=this.ScreenObject.GetPactListValue(599,0,"BOM"),this.oProduct.ReorderLevel=this.ScreenObject.GetTextComboValue_double(276,0,"ReorderLevel"),null!=this.ReorderQty&&null!=this.ReorderQty&&(this.oProduct.ReorderQty=u.e.DoubleTryParse(this.ReorderQty.Text),this.oProduct.ReorderQtyType=u.e.IntTryParse(this.ReorderQty.SelectedValue)),null!=this.ReorderTrigger&&null!=this.ReorderTrigger&&(this.oProduct.ReorderTrigger=u.e.DoubleTryParse(this.ReorderTrigger.Text),this.oProduct.ReorderTriggerType=u.e.IntTryParse(this.ReorderTrigger.SelectedValue)),this.oProduct.ShelfLife=this.ScreenObject.GetTextComboValue_double(278,0,"ShelfLife"),this.oProduct.Packing=this.ScreenObject.GetTextComboValue_string(279,"0","Packing"),this.oProduct.Barcode=this.ScreenObject.GetTextComboValue_string(280,""),this.oProduct.Category=this.ScreenObject.GetPactListValue(284,0,"CategoryID"),this.oProduct.Department=this.ScreenObject.GetPactListValue(285,0,"DepartmentID"),this.oProduct.Description=this.ScreenObject.GetTextComboValue_string(282,"","Description"),this.oProduct.ProductPacking=this.ScreenObject.GetTextComboValue_int(581,0,"IsWeightable"),this.oProduct.SerialNumber=this.ScreenObject.GetTextComboValue_string(582,"","SerialNumber"),this.oProduct.KitSize=this.ScreenObject.GetTextComboValue_double(583,0,"KitSize"),this.oProduct.MinTolerancePer=this.ScreenObject.GetTextComboValue_double(53726,0,"MinTolerancePer"),this.oProduct.MinToleranceVal=this.ScreenObject.GetTextComboValue_double(53727,0,"MinToleranceVal"),this.oProduct.MaxTolerancePer=this.ScreenObject.GetTextComboValue_double(53586,0,"MaxTolerancePer"),this.oProduct.MaxToleranceVal=this.ScreenObject.GetTextComboValue_double(53587,0,"MaxToleranceVal"),this.oProduct.CreditDays=this.ScreenObject.GetTextComboValue_int(53588,0,"CreditDays"),this.oProduct.PreExpiryDays=this.ScreenObject.GetTextComboValue_int(53585,0,"PreexpiryDays");var I=this.ScreenObject.StaticFields.find((function(e){return 26722==e.DBColumnID}));this.oProduct.GroupSeqNoLength=null!=I&&null!=I&&this.oProduct.IsGroup?parseInt(I.Text):0,this.oProduct.LotWise=!1,this.oProduct.CustomFieldsQuery=this.ScreenObject.GetQuickExtraFieldsQuery(),this.oProduct.CustomCostCenterFieldsQuery=this.ScreenObject.GetQuickExtraCCFieldsQuery(),this.oProduct.ContactsXML="",this.oProduct.NotesXML="",this.GetAttachmentXML(),this.oProduct.AttachmetsXML+=this.ScreenObject.GetExtraAttachmentXML(),this.oProduct.ProductwiseUOM="",this.oProduct.ProductwiseUOM1="";var f={};if(this.DisplayMessage=this.QuickAssign.GetXML(f),!u.e.StringIsNullOrEmpty(this.DisplayMessage))return;if(this.oProduct.CCCCMapDATA=f.strXML,this.oProduct.HistoryXML=this.ScreenObject.HistoryCCXML,this.oProduct.StatusXML=null!=this.ScreenObject.StatusAssignGrid?this.ScreenObject.StatusAssignGrid.GetXML():"",!this.ScreenObject.ValidateDataonSave())return;this.oProduct.WID=this.ScreenObject.CheckWorkFlow(),this.oProduct.IsLink=this.ScreenObject.EvaluateExpression(this.ScreenObject.Data.Tables[10].filter((function(e){return"LinkDimensionBasedOn"==e.Name}))[0].Value.toString(),this.oProduct.IsGroup),this.oProduct.AddProduct("","AddProduct").subscribe((function(e){t.SaveCallBack(e)}),(function(e){alert(JSON.stringify(e)),console.log("Quick Product Save : "+JSON.stringify(e))}))}else{null!=this.Name&&(this.oProduct.ProductName=this.Name.Text.trim()),this.oProduct.AliasName=this.ScreenObject.GetTextComboValue_string(263,this.oProduct.ProductName),this.oProduct.ProductType=this.ScreenObject.GetTextComboValue_int(264,1),this.oProduct.ProductGroup=this.ScreenObject.GetPactListValue(281,this.ParentId),this.oProduct.QuickStaticFieldsQuery=this.ScreenObject.GetStaticFieldsQuery(),this.oProduct.CustomFieldsQuery=this.ScreenObject.GetQuickExtraFieldsQuery(),this.oProduct.CustomCostCenterFieldsQuery=this.ScreenObject.GetQuickExtraCCFieldsQuery();var j={};if(this.DisplayMessage=this.QuickAssign.GetXML(j),!u.e.StringIsNullOrEmpty(this.DisplayMessage))return;if(this.oProduct.CCCCMapDATA=j.strXML,this.oProduct.HistoryXML=this.ScreenObject.HistoryCCXML,this.oProduct.StatusXML=null!=this.ScreenObject.StatusAssignGrid?this.ScreenObject.StatusAssignGrid.GetXML():"",this.GetAttachmentXML(),this.oProduct.AttachmetsXML+=this.ScreenObject.GetExtraAttachmentXML(),!this.ScreenObject.ValidateDataonSave())return;this.oProduct.WID=this.ScreenObject.CheckWorkFlow(),this.oProduct.IsLink=this.ScreenObject.EvaluateExpression(this.ScreenObject.Data.Tables[10].filter((function(e){return"LinkDimensionBasedOn"==e.Name}))[0].Value.toString(),this.oProduct.IsGroup),this.oProduct.AddProduct("","SetProductQuick").subscribe((function(e){t.SaveCallBack(e)}),(function(e){alert(JSON.stringify(e)),console.log("Quick Product Save : "+JSON.stringify(e))}))}}else if("Details"==e.toString())a.a.page.ShowLoading=!0,setTimeout((function(){a.a.page.HideDialog();var e;e=a.a.GetResource(0==t.oProduct.ProductID?"Product_NewScreenName":"Product_EditScreenName");var o=new d.AddProductScreenViewModel(t.NodeID,t.ScreenName,t.ParentId,t.oProduct.IsGroup),i={obj:o};null!=t.Name&&(o.ProductName.Text=t.Name.Text),null!=t.Code&&(o.ProductCode.Text=t.Code.Text,o.ProductCode.PrefixCode=t.Code.PrefixCode),o.OnGroupSelectionChanged("Group"),o.ScreenObject.CopyQuickToDetail(t.ScreenObject.QuickAddFields,[null!=t.Code?t.Code.DBColumnID:0,null!=t.Name?t.Name.DBColumnID:0]),o.OnTypeChanged(),null!=o.DimFields&&o.DimFields.length>0&&(o.SetViewByType(),o.SetFieldsposition()),a.a.page.addNewTab({title:e,component:b.AddProductComponent,params:i})}),50);else if("Cancel"==e.toString())a.a.page.HideDialog();else if("ShowApprove"==e.toString()){var D=new m.a(3,this.oProduct.ProductID,this.ScreenObject,this);a.a.page.ShowDialog(D,S.a,{ShowCenter:!0,Title:a.a.GetResource("ApproveReject")})}Logger.InfoLog("QuickAddProductViewModel::Exiting onSaveProduct")}catch(T){Logger.ErrorLog("QuickAddProductViewModel:: onSaveProduct"+T.stack)}}},{key:"SaveCallBack",value:function(e){e.Message&&(this.MessageVisibility=!0,this.DisplayMessage=e.Message,this.RetValue=e.RetValue,(this.RetValue>0||this.RetValue<-1e4)&&(this.NodeID=0,this.oProduct.ProductID=0,this.QuickAssign.Clear(),this.ScreenObject.Clear(),null!=this.Code&&(this.Code.Text=""),this.Title=this.oProduct.IsGroup?"Add Group":a.a.GetResource("Product_QuickAdd"),this.AutoGenerateCode(),this.LoadParentData(),null==this.Parent||null==this.Parent?a.a.page.HideDialog():(null!=this.Parent.SelectedNode&&(this.Parent.obj.SetFocusNodeID=this.Parent.SelectedNode.Id),this.Parent.Refresh(),this.Parent.AddEditProductVisibility=!0)))}},{key:"GetAttachmentXML",value:function(){var e=this;this.InheritImage||!this.isPhotoChanged&&this.FileID>0?this.oProduct.AttachmetsXML="":(null!=this.ScreenObject.Data&&null!=this.ScreenObject.Data&&this.ScreenObject.Data.Tables.length>14&&(this.ImageView=this.ScreenObject.Data.Tables[14]),this.InheritGrpImage?this.ImageView=this.ImageView.filter((function(t){return 3==t.FeatureID&&t.FeaturePK==e.oProduct.ProductGroup&&1==t.IsProductImage})):this.InheritDimImageID>5e4&&(this.ImageView=this.ImageView.filter((function(t){return t.FeatureID==e.InheritDimImageID&&t.FeaturePK==e.GetImageCCVal()&&1==t.IsProductImage}))),this.ImageView.length>0?u.e.GetPath(this.ImageView[0].GUID.toString()+"."+this.ImageView[0].FileExtension.toString()):this.oProduct.AttachmetsXML="")}},{key:"GetImageCCVal",value:function(){var e=this;return this.ScreenObject.StaticFields.forEach((function(t){if(t instanceof r.b&&t.DBColumnName.toUpperCase().startsWith("CCNID")&&t.CCID==e.InheritDimImageID)return t.SelectedValue})),0}},{key:"OnNameLostFocus",value:function(e){if(!u.e.StringIsNullOrEmpty(this.Name.Text)){var t=a.a.accounting.CheckDuplicateName(3,this.NodeID,this.Name.Text,0,this.oProduct.IsGroup);t.length>0&&(this.DisplayMessage=t)}this.ScreenObject.onTextBoxLostFocus(e)}},{key:"OnGroupSelectionChanged",value:function(e){this.ProductGroup.SelectedValue>0&&(this.ProductGroup.DefaultValue=this.ProductGroup.SelectedValue.toString(),this.AutoGenerateCode(),this.LoadParentData()),this.InheritGrpImage&&this.OnLoadImage("Group",this.ProductGroup.SelectedValue)}},{key:"OnProductTypeChange",value:function(e){null!=this.ProductType&&this.ScreenObject.SetViewByType(this.ProductType.SelectedValue,this.oProduct.IsGroup)}},{key:"ParentCallBack",value:function(e){null!=e.SelectedNode&&e.PickerType.startsWith("PRODUCTGROUPS")&&(this.ProductGroup.SelectedValue=e.SelectedNode.Id,this.ProductGroup.DefaultValue=this.ProductGroup.SelectedValue.toString())}},{key:"AddCCFieldsSelectionChange",value:function(){var e=this;this.ScreenObject.StaticFields.forEach((function(t){t instanceof r.b&&t.CCID==e.InheritDimImageID&&t.SelectionChangedCommand.Subscribe(e,"OnccChanged")}))}},{key:"OnccChanged",value:function(e){null!=e&&null!=e&&e instanceof r.b&&e.SelectedValue>1&&e.CCID==this.InheritDimImageID&&this.OnLoadImage("Dimension",e.SelectedValue)}},{key:"LoadParentData",value:function(){if(this.ScreenObject.dsParentData=null,0==this.NodeID&&0!=this.ParentId&&!this.oProduct.IsGroup){var e=this.ScreenObject.Data.Tables[10].filter((function(e){return"Copygroupdatatonode"==e.Name}));0!=e.length&&u.e.StringIsNullOrEmpty(e[0].Value)&&Object(c.j)(e[0].Value)&&(this.ScreenObject.dsParentData=this.oProduct.GetCopyProductDetails(this.ParentId),0!=this.ScreenObject.dsParentData.Tables[0].length?this.ScreenObject.FillParentData(this.ScreenObject.dsParentData.Tables[0][0],this.ScreenObject.dsParentData.Tables[1][0],this.ScreenObject.dsParentData.Tables[7][0],["ProductCode","ProductName","ProductGroup"]):this.ScreenObject.dsParentData=null)}}}]),o}(l.b)}}]);