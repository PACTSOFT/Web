function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,s=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[133],{"F+4J":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("Do2H"),n=function(){function e(){_classCallCheck(this,e),this.TeamID=0,this.Status=0,this.IsGroup=!1,this.FetaureID=0,this.FeatureNodeID=0,this.TeamNodeID=0,this.UserID=0,this.ActivityID=0,this.isTeam=0,this.isRole=0,this.isGroup=0}return _createClass(e,[{key:"GetAssignedDetails",value:function(e,t,i){var n=[];n.push(e),n.push(t),n.push(i),n.push(s.a.SessionManager.UserID),n.push(s.a.SessionManager.LanguageID);var a="?CompanyIndex="+s.a.SessionManager.CompanyIndex+"&param="+JSON.stringify(n);return s.a.crmService.GetAssignedList(a)}},{key:"GetCRMHistoryDetails",value:function(e,t){Logger.InfoLog("Team:: Inside GetCRMHistoryDetails");var i=[];i.push(e),i.push(t),i.push(s.a.SessionManager.UserID),i.push(s.a.SessionManager.LanguageID);var n="?param="+JSON.stringify(i);return Logger.InfoLog("Team:: Success: DBH.GetCRMHistoryDetails "+e.ToString()),s.a.crmService.GetCRMHistoryDetails(n)}},{key:"FeatureAssign",value:function(){var e=[];return e.push(this.FetaureID),e.push(this.FeatureNodeID),e.push(this.TeamNodeID),e.push(this.UserID),e.push(this.isTeam),e.push(this.UsersXML),e.push(this.RolesXML),e.push(this.GroupXML),e.push(s.a.SessionManager.CompanyGUID),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.LanguageID),s.a.crmService.AssignFeature(e)}},{key:"ActivityAssign",value:function(){var e=[];return e.push(this.FetaureID),e.push(this.FeatureNodeID),e.push(this.TeamNodeID),e.push(this.UserID),e.push(this.isTeam),e.push(this.UsersXML),e.push(this.RolesXML),e.push(this.GroupXML),e.push(s.a.SessionManager.CompanyGUID),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.LanguageID),e.push(this.ActivityID),s.a.crmService.ActivityAssign(e)}},{key:"SetInvite",value:function(){var e=[];return e.push(this.FetaureID),e.push(this.FeatureNodeID),e.push(this.TeamNodeID),e.push(this.UserID),e.push(this.isTeam),e.push(this.UsersXML),e.push(this.RolesXML),e.push(this.GroupXML),e.push(s.a.SessionManager.CompanyGUID),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.LanguageID),e.push(this.InviteComments),s.a.crmService.SetInvite(e)}},{key:"SetInviteStatus",value:function(e){Logger.InfoLog("Team::Entering SetInviteStatus");try{var t=[];t.push(e),t.push(s.a.SessionManager.UserName),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID);var i=s.a.crmService.SetInviteStatus(t);return Logger.InfoLog("Team::Exiting SetInviteStatus"),i}catch(n){return Logger.ErrorLog("Team::SetInviteStatus"+n.stack),""}}},{key:"AssignMultipleFeature",value:function(){var e=[];return e.push(this.FetaureID),e.push(this.NodesXML),e.push(this.TeamNodeID),e.push(this.UserID),e.push(this.isTeam),e.push(this.UsersXML),e.push(this.RolesXML),e.push(this.GroupXML),e.push(s.a.SessionManager.CompanyGUID),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.LanguageID),s.a.crmService.AssignMultipleFeature(e)}}]),e}()},UlzB:function(e,t,i){"use strict";i.r(t),i.d(t,"InvitesViewModel",(function(){return d}));var s=i("Do2H"),n=i("Lp6j"),a=i("ScVY"),r=i("4HhE"),o=i("8B8H"),u=i("JIg3"),h=i("ockk"),l=i("F+4J"),d=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;return _classCallCheck(this,i),(e=t.call(this)).SaveInvite=new r.b,e._ActivityID=0,e._SearchDate=new u.a(0),e.dset=[],e}return _createClass(i,[{key:"InvitesViewModel_1",value:function(e,t,i){Logger.InfoLog("InvitesViewModel :: entering "),this.IsInvite=i,this.InviteGrid=new o.a,this.dset=t,this.IsInvite?(this.LblText="Invities",this.Title="Invities",this.CancelVisibility=!0,this.Width="1000",this.SaveVisibility=!0,this.SearchVisibility=!0,this.AddGridColumns()):(this.LblText="Attendies",this.Title="Attendies",this.CancelVisibility=!0,this.Width="600",this.SaveVisibility=!1,this.SearchVisibility=!1,this.AddAttendiesGridColumns()),this.LoadData(),this.SaveInvite.Subscribe(this,"onSaveInvite"),Logger.InfoLog("InvitesViewModel :: exiting ")}},{key:"InvitesViewModel_2",value:function(e,t,i,s){this.InvitesViewModel_1(e,t,i),Logger.InfoLog("InvitesViewModel :: entering "),this.ActivityID=s,Logger.InfoLog("InvitesViewModel :: exiting ")}},{key:"BuildTempTable",value:function(){Logger.InfoLog("InvitesViewModel :: entering BuildTempTable "),this.InviteGrid.Table=[],this.InviteGrid.Width=(parseInt(this.Width)-25).toString(),this.InviteGrid.Height=300,this.InviteGrid.TableColumns.push("SNo"),this.InviteGrid.TableColumns.push("ActivityID"),this.InviteGrid.TableColumns.push("Customer"),this.InviteGrid.TableColumns.push("Subject"),this.InviteGrid.TableColumns.push("StartDate"),this.InviteGrid.TableColumns.push("EndDate"),this.InviteGrid.TableColumns.push("RequestedBy"),this.InviteGrid.TableColumns.push("RequestedDate"),this.InviteGrid.TableColumns.push("InviteComments"),this.InviteGrid.TableColumns.push("InviteStatus"),Logger.InfoLog("InvitesViewModel :: exiting BuildTempTable ")}},{key:"AddGridColumns",value:function(){Logger.InfoLog("InvitesViewModel :: entering AddGridColumns "),this.BuildTempTable();var e=[],t=new h.a;(t=new h.a).DisplayMember="SNo",t.Header=s.a.GetResource("UOM_Sno"),t.DataType="TextBlock",t.Width=50,t.ReadOnly=!0,t.IsVisible=!0,e.push(t),(t=new h.a).ComboData=this.ReturnStatus(),t.DisplayMember="InviteStatus",t.ValueMember="Value",t.ValueBinding="InviteStatus",t.Header="Status",t.DataType="ComboBox",t.Width=100,t.IsVisible=!0,e.push(t),(t=new h.a).DisplayMember="Customer",t.Header="Customer",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new h.a).DisplayMember="Subject",t.Header="Subject",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new h.a).DisplayMember="StartDate",t.Header="Start Date",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new h.a).DisplayMember="EndDate",t.Header="End Date",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new h.a).DisplayMember="RequestedBy",t.Header="Requested By",t.DataType="TextBlock",t.Width=80,t.IsVisible=!0,e.push(t),(t=new h.a).DisplayMember="RequestedDate",t.Header="Requested Date",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new h.a).DisplayMember="InviteComments",t.Header="Comments",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),this.InviteGrid.Columns=e,this.InviteGrid.OnCellEditEnding.Subscribe(this,"OnGridCellEditEnding"),Logger.InfoLog("InvitesViewModel :: exiting AddGridColumns ")}},{key:"BuildAttendiesTempTable",value:function(){Logger.InfoLog("InvitesViewModel :: entering BuildTempTable "),this.InviteGrid.Table=[],this.InviteGrid.Width=(parseInt(this.Width)-25).toString(),this.InviteGrid.Height=300,this.InviteGrid.TableColumns.push("SNo"),this.InviteGrid.TableColumns.push("ActivityID"),this.InviteGrid.TableColumns.push("CreatedBy"),this.InviteGrid.TableColumns.push("UserName"),this.InviteGrid.TableColumns.push("InviteStatus"),this.InviteGrid.TableColumns.push("InvAtt"),Logger.InfoLog("InvitesViewModel :: exiting BuildTempTable ")}},{key:"AddAttendiesGridColumns",value:function(){Logger.InfoLog("InvitesViewModel :: entering AddGridColumns "),this.BuildAttendiesTempTable();var e=[],t=new h.a;(t=new h.a).DisplayMember="SNo",t.Header=s.a.GetResource("UOM_Sno"),t.DataType="TextBlock",t.Width=50,t.ReadOnly=!0,t.IsVisible=!0,e.push(t),(t=new h.a).DisplayMember="UserName",t.Header="User",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new h.a).DisplayMember="InviteStatus",t.Header="Status",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),(t=new h.a).DisplayMember="InvAtt",t.Header="Invite / Attendies",t.DataType="TextBlock",t.Width=150,t.IsVisible=!0,e.push(t),this.InviteGrid.Columns=e,Logger.InfoLog("InvitesViewModel :: exiting AddGridColumns ")}},{key:"ReturnStatus",value:function(){var e=[];return e.push({InviteStatus:"",Value:""}),e.push({InviteStatus:"Accepted",Value:"Accepted"}),e.push({InviteStatus:"Rejected",Value:"Rejected"}),e.push({InviteStatus:"Cancelled",Value:"Cancelled"}),e}},{key:"OnGridCellEditEnding",value:function(e,t,i){var n=this;if("InviteStatus"==t){if(Logger.InfoLog("InvitesViewModel::Entering OnGridCellEditEnding ColName="+t.toString()),"Cancelled"==e.InviteStatus.toString())e.InviteStatus="",this.DisplayMessage="Select Accepted/Rejected",this.MessageVisibility=!0;else{var a=s.a.common.GetDataSetQuery("SELECT statusid from crm_activities WITH(NOLOCK) where activityid in (select inviterefactid from crm_activities WITH(NOLOCK) where activityid="+e.ActivityID.toString()+")");null!=a&&a.Tables.length>0&&a.Tables[0].forEach((function(t){if("413"==t.statusid.toString())return n.DisplayMessage="Activity is Closed, click on save to update status",e.InviteStatus="Cancelled",void(n.MessageVisibility=!0)}))}Logger.InfoLog("InvitesViewModel::Exiting OnGridCellEditEnding ColName="+t.toString())}}},{key:"LoadData",value:function(){var e=this;if(Logger.InfoLog("InvitesViewModel :: entering LoadData "),null!=this.dset&&this.dset.Tables.length>0){this.InviteGrid.Clear();var t=0;this.IsInvite?this.dset.Tables[0].length>0&&this.dset.Tables[0].forEach((function(i){var s=[];t+=1,s.SNo=t,n.e.hasprop(i,"CustomerID")&&(s.Customer=i.CustomerID),n.e.hasprop(i,"ActSubject")&&(s.Subject=i.ActSubject),n.e.hasprop(i,"InviteComments")&&(s.InviteComments=i.InviteComments),n.e.hasprop(i,"InviteStatus")&&(s.InviteStatus=i.InviteStatus),n.e.hasprop(i,"ActStartDate")&&(s.StartDate=i.ActStartDate.toString()+" "+new Date(i.ActStartTime.toString()).ToString("hh:mm:ss tt")),n.e.hasprop(i,"ActEndDate")&&(s.EndDate=i.ActEndDate+" "+new Date(i.ActEndTime.toString()).ToString("hh:mm:ss tt")),n.e.hasprop(i,"UserName")&&(s.RequestedBy=i.UserName),n.e.hasprop(i,"CreatedDate")&&(s.RequestedDate=i.CreatedDate),s.ActivityID=i.ActivityID,e.InviteGrid.addRow(s)})):this.dset.Tables[0].length>0&&this.dset.Tables[0].forEach((function(i){var s=[];t+=1,s.SNo=t,n.e.hasprop(i,"ActivityID")&&(s.ActivityID=i.ActivityID),n.e.hasprop(i,"CreatedBy")&&(s.CreatedBy=i.CreatedBy),n.e.hasprop(i,"UserName")&&(s.UserName=i.UserName),n.e.hasprop(i,"InviteStatus")&&(s.InviteStatus=i.InviteStatus),n.e.hasprop(i,"InvAtt")&&(s.InvAtt=i.InvAtt),e.InviteGrid.addRow(s)}))}Logger.InfoLog("InvitesViewModel :: exiting LoadData ")}},{key:"onSaveInvite",value:function(e){if(null!=e){if(Logger.InfoLog("InvitesViewModel :: entering onSaveInvite, sender "+e.toString()),"Cancel"==e.toString())s.a.page.HideDialog();else if("Search"==e.toString()){if(null!=this.SearchDate.Date){this.DisplayMessage="",this.MessageVisibility=!1;var t=s.a.cases.GetInvities(-100,-100,-100,0,this.SearchDate.Date);null!=t&&t.Tables.length>0&&(t.Tables[0].length>0?(this.dset=t,this.LoadData()):(this.DisplayMessage="No invitations",this.InviteGrid.Clear(),this.MessageVisibility=!0))}}else if("Clear"==e.toString())this.InviteGrid.Clear();else try{var i="";if(""!=(i=this.GetInviteXML()).toString()){var n=new l.a,a=n.SetInviteStatus(i);this.DisplayMessage=a.message,a.RetValue>0&&(this.DisplayMessage="Saved Successfully",this.MessageVisibility=!0,Logger.InfoLog("InvitesViewModel :: Exiting onSaveInvite set invite error "))}}catch(r){throw Logger.ErrorLog("InvitesViewModel :: Exiting onSaveInvite set invite error "+r.Message),""}Logger.InfoLog("InvitesViewModel :: exiting onSaveInvite ")}}},{key:"GetInviteXML",value:function(){Logger.InfoLog("InvitesViewModel :: entering GetInviteXML ");var e="";try{for(var t=0;t<this.InviteGrid.Table.length;t++)""!=this.InviteGrid.Table[t].InviteStatus.toString()&&(e+="<Row  ",e+=' ActivityID="'+this.InviteGrid.Table[t].ActivityID.toString()+'"',e+=' InviteComments="'+this.InviteGrid.Table[t].InviteComments.toString()+'"',e+=' InviteStatus="'+this.InviteGrid.Table[t].InviteStatus.toString()+'"',e+=" />");e.length>0&&(e="<XML>"+e+"</XML>")}catch(i){return Logger.ErrorLog("InvitesViewModel :: exiting GetInviteXML error message is "+i.Message),this.DisplayMessage=i,this.MessageVisibility=!0,""}return Logger.InfoLog("InvitesViewModel :: exiting GetInviteXML "),e.toString()}},{key:"ActivityID",get:function(){},set:function(e){this._ActivityID=e}},{key:"SearchDate",get:function(){return this._SearchDate},set:function(e){this._SearchDate=e}}]),i}(a.b)}}]);