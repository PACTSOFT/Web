function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _createSuper(t){var e=_isNativeReflectConstruct();return function(){var a,s=_getPrototypeOf(t);if(e){var i=_getPrototypeOf(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return _possibleConstructorReturn(this,a)}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[56,75,77,89,113,121,141,148,150,160,210,212],{"4k0m":function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var s=a("Do2H"),i=a("ScVY"),l=a("EQd/"),n=a("0/4Q"),o=function(t){_inherits(a,t);var e=_createSuper(a);function a(t,i,n,o){var r;return _classCallCheck(this,a),(r=e.call(this)).Remarks=new l.c(0),r.CostCenterID=0,r.NodeID=0,r.Parent=null,r.retValWeb=0,r.IsUpdated=!1,r.CostCenterID=t,r.NodeID=i,r.Parent=o,r.ScreenObject=n,r.Remarks.Label=s.a.GetResource("Remarks"),r}return _createClass(a,[{key:"SaveStatus",value:function(t,e,a){!(arguments.length>3&&void 0!==arguments[3])||arguments[3];var s=!1,i=null;"MonthlyPayrollViewModel"==this.Parent.ClassName?(null!=(i=this.Parent.SetDocStatus(t,e,a,new Date,this.Remarks.Text,!0,""))&&i.Tables.length>0&&i.Tables[0].length>0&&i.Columns[0].Contains("status")&&(this.Parent.DocStatus="["+i.Tables[0][0].status.toString()+"]",s=!0),null!=i&&i.Tables.length>0&&i.Tables[i.Tables.length-1].length>0&&i.Columns[i.Tables.length-1].Contains("ErrorMessage")&&(this.Parent.this.DisplayMessage=i.Tables[i.Tables.length-1][0].ErrorMessage.toString()),this.Parent.this.MessageVisibility=!0,s&&this.Parent.btnClear_Click()):"FinalSettlementViewModel"==this.Parent.ClassName&&(null!=(i=this.Parent.SetDocStatus(t,e,a,new Date,this.Remarks.Text,!0,""))&&i.Tables.length>0&&i.Tables[0].length>0&&i.Columns[0].Contains("status")&&(this.Parent.DocStatus="["+i.Tables[0][0].status.toString()+"]",s=!0),null!=i&&i.Tables.length>0&&i.Tables[i.Tables.length-1].length>0&&i.Columns[i.Tables.length-1].Contains("ErrorMessage")&&(this.Parent.this.DisplayMessage=i.Tables[i.Tables.length-1][0].ErrorMessage.toString()),this.Parent.this.MessageVisibility=!0,s&&this.Parent.Button_Click("Clear"))}},{key:"onButtonClick",value:function(t){var e=0;if(40054==this.CostCenterID)"Approve"==t?s.a.SessionManager.IsActionAssigned(this.CostCenterID,"Edit")?this.Parent.btnPost_Click():this.SaveStatus(369,parseInt(this.Parent.oCMP.arrLstOthMPFields[0].dvPayProcessed[0].WorkFlowID),""):"Reject"==t&&this.SaveStatus(372,0,""),s.a.page.HideDialog();else if(40095==this.CostCenterID)"Approve"==t?s.a.SessionManager.IsActionAssigned(this.CostCenterID,"Edit")?(this.Parent.sCmdParameter="Approve",this.Parent.Button_Click("Save")):this.SaveStatus(369,this.Parent.WID,""):"Reject"==t&&this.SaveStatus(372,0,""),s.a.page.HideDialog();else{var a=this.ScreenObject.CurrentStatus;if("Approve"==t){if(!this.IsSaveValidated())return;var i=s.a.common.ApproveCostCenter(this.CostCenterID,this.NodeID,a,this.Remarks.Text,!1,0);this.DisplayMessage=i.Message,(e=i.RetValue)>0&&(this.IsUpdated||(this.ScreenObject.ButtonApproveVisible=!1,this.UpdateStatusID(e),null!=this.ScreenObject.drpStatus&&(null==this.ScreenObject.drpStatus.Items.find((function(t){return t.Value==e.toString()}))&&("1001"==e.toString()?this.ScreenObject.drpStatus.Items.push(n.d.ComboBoxItems_2("Un Approved","1001")):"1002"==e.toString()?this.ScreenObject.drpStatus.Items.push(n.d.ComboBoxItems_2("Approved","1002")):this.ScreenObject.drpStatus.Items.push(n.d.ComboBoxItems_2("Rejected","1003"))),this.ScreenObject.drpStatus.SelectedValue=e.toString(),this.ScreenObject.drpStatus.SetSelectedItem(e.toString())),s.a.SessionManager.IsWebApplication&&(this.retValWeb=e)),s.a.page.HideDialog())}else if("Reject"==t){if(!this.IsSaveValidated())return;var l=s.a.common.ApproveCostCenter(this.CostCenterID,this.NodeID,a,this.Remarks.Text,!0,0);this.DisplayMessage=l.Message,(e=l.RetValue)>0&&(this.IsUpdated||(this.UpdateStatusID(e),null!=this.ScreenObject.drpStatus&&(null==this.ScreenObject.drpStatus.Items.find((function(t){return t.Value==e.toString()}))&&("1001"==e.toString()?this.ScreenObject.drpStatus.Items.push(n.d.ComboBoxItems_2("Un Approved","1001")):"1002"==e.toString()?this.ScreenObject.drpStatus.Items.push(n.d.ComboBoxItems_2("Approved","1002")):this.ScreenObject.drpStatus.Items.push(n.d.ComboBoxItems_2("Rejected","1003"))),this.ScreenObject.drpStatus.SelectedValue=e.toString(),this.ScreenObject.drpStatus.SetSelectedItem(e.toString())),s.a.SessionManager.IsWebApplication&&(this.retValWeb=e)),s.a.page.HideDialog())}else s.a.page.HideDialog()}}},{key:"UpdateStatusID",value:function(t){this.ScreenObject.CurrentStatus=t,"QuickAddAccountScreenViewModel"==this.Parent.ClassName||"AddEditAccountScreenViewModel"==this.Parent.ClassName?this.Parent.obj.StatusID=t:"QuickAddProductViewModel"==this.Parent.ClassName?this.Parent.objProduct.ProductStatus=t:"AddProductScreenViewModel"==this.Parent.ClassName?this.Parent.oProduct.ProductStatus=t:"QuickAddCostCenterViewModel"==this.Parent.ClassName||"AddCostCenterViewModel"==this.Parent.ClassName?this.Parent.objCostCenter.Status=t:"AddEditEmpMasterViewModel"==this.Parent.ClassName&&(this.Parent.objEmp.StatusID=t)}},{key:"IsSaveValidated",value:function(){if(this.IsUpdated=!1,"QuickAddAccountScreenViewModel"==this.Parent.ClassName){var t=this.Parent;if(t.ButtonSave.Visible&&t.ButtonSave.Enable){if(t.SaveMethod("APPROVE_CALL"),0!=t.AccountID)return this.DisplayMessage=t.DisplayMessage,t.DisplayMessage="",!1;this.IsUpdated=!0,t.DisplayMessage=""}}else if("AddEditAccountScreenViewModel"==this.Parent.ClassName){var e=this.Parent;if(e.ButtonSave.Visible&&e.ButtonSave.Enable){if(e.OnSaveAccount("APPROVE_CALL"),0!=e.AccountID)return this.DisplayMessage=e.DisplayMessage,e.DisplayMessage="",!1;this.IsUpdated=!0,e.DisplayMessage=""}}else if("QuickAddProductViewModel"==this.Parent.ClassName){var a=this.Parent;if(a.ButtonSave.Visible&&a.ButtonSave.Enable){if(a.onSaveProduct("APPROVE_CALL"),0!=a.objProduct.ProductID)return this.DisplayMessage=a.DisplayMessage,a.DisplayMessage="",!1;this.IsUpdated=!0,a.DisplayMessage=""}}else if("AddProductScreenViewModel"==this.Parent.ClassName){var s=this.Parent;if(s.ButtonSave.Visible&&s.ButtonSave.Enable){if(s.OnSaveProduct("APPROVE_CALL"),0!=s.ProductID)return this.DisplayMessage=s.DisplayMessage,s.DisplayMessage="",!1;this.IsUpdated=!0,s.DisplayMessage=""}}else if("QuickAddCostCenterViewModel"==this.Parent.ClassName){var i=this.Parent;if(i.ButtonSave.Visible&&i.ButtonSave.Enable){if(i.SaveMethod(),0!=i.NodeID)return this.DisplayMessage=i.DisplayMessage,i.DisplayMessage="",!1;this.IsUpdated=!0,i.DisplayMessage=""}}else if("AddCostCenterViewModel"==this.Parent.ClassName){var l=this.Parent;if(l.ButtonSave.Visible&&l.ButtonSave.Enable){if(l.OnSaveCostCenter("Save"),0!=l.NodeID)return this.DisplayMessage=l.DisplayMessage,l.DisplayMessage="",!1;this.IsUpdated=!0,l.DisplayMessage=""}}else if("AddEditEmpMasterViewModel"==this.Parent.ClassName){var n=this.Parent;if(n.ButtonSave.Visible&&n.ButtonSave.Enable){if(n.OnSaveEmployee("Save"),0!=n.NodeID)return this.DisplayMessage=n.DisplayMessage,n.DisplayMessage="",!1;this.IsUpdated=!0,n.DisplayMessage=""}}return!0}}]),a}(i.b)},EW98:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var s=a("3Pt+"),i=a("fXoL"),l=a("ofXK"),n=a("q8k3"),o=a("sT9C"),r=a("sYmb");function d(t,e){if(1&t){var a=i.ac();i.Zb(0,"span",5),i.hc("click",(function(){return i.Ic(a),i.lc().obj.Button_Click("Post")})),i.Ub(1,"i",19),i.Wc(2),i.mc(3,"translate"),i.Yb()}2&t&&(i.Db(2),i.Xc(i.nc(3,1,"Post")))}function h(t,e){if(1&t){var a=i.ac();i.Zb(0,"span",5),i.hc("click",(function(){return i.Ic(a),i.lc().obj.Button_Click("UnPost")})),i.Ub(1,"i",20),i.Wc(2),i.mc(3,"translate"),i.Yb()}2&t&&(i.Db(2),i.Xc(i.nc(3,1,"UnPost")))}var c=function(){var t=function(){function t(){_classCallCheck(this,t),this.form=new s.j({})}return _createClass(t,[{key:"ngOnInit",value:function(){this.obj=this.params.obj}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Nb({type:t,selectors:[["app-post-payroll"]],decls:93,vars:25,consts:[[1,"maincontainer"],[1,"page-header"],[1,"page-title"],[1,"btnMetroDiv","secondary-btn-group",2,"margin-right","6px"],["class","secondary-btn",3,"click",4,"ngIf"],[1,"secondary-btn",3,"click"],[1,"fa-light","fa-broom"],[1,"fa-light","fa-filter"],[1,"main_div",2,"display","flex","flex-direction","column","padding","10px"],[1,"masterscreen",2,"height","120px"],[1,"row",2,"height","30px"],[1,"col-xl-3","col-md-4","col-sm-6","col-xs-12",2,"display","flex","flex-direction","row","margin-bottom","9px"],[1,"input_cntrl_label",2,"font-size","13px"],[1,"input_cntrl_label",2,"font-weight","bold","font-size","12px !important"],[1,"form-group","col-xl-3","col-md-4","col-sm-6","col-xs-12",2,"display","flex","flex-direction","row"],[1,"form-group","col-xl-3","col-md-4","col-sm-6","col-xs-12"],["FieldDirective","",3,"obj"],[1,"documentgrid",2,"flex","1","overflow","auto"],[2,"width","100%","height","100%",3,"obj"],[1,"fa-light","fa-floppy-disk-circle-arrow-right"],[1,"fa-light","fa-file-times"]],template:function(t,e){1&t&&(i.Zb(0,"div",0),i.Wc(1,"\n      "),i.Zb(2,"div",1),i.Wc(3,"\n        "),i.Zb(4,"span",2),i.Wc(5),i.Yb(),i.Wc(6,"\n        "),i.Zb(7,"div",3),i.Wc(8,"\n          "),i.Uc(9,d,4,3,"span",4),i.Wc(10,"\n          "),i.Zb(11,"span",5),i.hc("click",(function(){return e.obj.Button_Click("Clear")})),i.Ub(12,"i",6),i.Wc(13),i.mc(14,"translate"),i.Yb(),i.Wc(15,"\n          "),i.Uc(16,h,4,3,"span",4),i.Wc(17,"\n          "),i.Zb(18,"span",5),i.hc("click",(function(){return e.obj.Button_Click("Filter")})),i.Ub(19,"i",7),i.Wc(20),i.mc(21,"translate"),i.Yb(),i.Wc(22,"\n        "),i.Yb(),i.Wc(23,"\n      "),i.Yb(),i.Wc(24,"\n      "),i.Zb(25,"div",8),i.Wc(26," \n        "),i.Zb(27,"div",9),i.Wc(28,"\n          "),i.Zb(29,"div",10),i.Wc(30," \n            "),i.Zb(31,"div",11),i.Wc(32,"\n                  "),i.Zb(33,"label",12),i.Wc(34),i.mc(35,"translate"),i.Yb(),i.Wc(36,"\n                  "),i.Zb(37,"label",13),i.Wc(38),i.Yb(),i.Wc(39,"\n              "),i.Yb(),i.Wc(40,"\n            "),i.Yb(),i.Wc(41,"\n          "),i.Zb(42,"div",10),i.Wc(43,"\n                "),i.Zb(44,"div",14),i.Wc(45,"\n                "),i.Zb(46,"label",12),i.Wc(47),i.mc(48,"translate"),i.Yb(),i.Wc(49,"\n                "),i.Zb(50,"label",13),i.Wc(51),i.Yb(),i.Wc(52,"\n              "),i.Yb(),i.Wc(53,"\n              "),i.Zb(54,"div",14),i.Wc(55,"\n                "),i.Zb(56,"label",12),i.Wc(57),i.mc(58,"translate"),i.Yb(),i.Wc(59,"\n                "),i.Zb(60,"label",13),i.Wc(61),i.Yb(),i.Wc(62,"              \n            "),i.Yb(),i.Wc(63,"\n          "),i.Yb(),i.Wc(64,"\n          "),i.Zb(65,"div",10),i.Wc(66,"\n            "),i.Zb(67,"div",15),i.Wc(68,"\n              "),i.Vb(69,16),i.Wc(70,"\n          "),i.Yb(),i.Wc(71,"\n  \n          "),i.Zb(72,"div",15),i.Wc(73,"\n            "),i.Vb(74,16),i.Wc(75,"\n        "),i.Yb(),i.Wc(76,"                  \n           "),i.Yb(),i.Wc(77,"\n           "),i.Zb(78,"div",10),i.Wc(79,"\n        "),i.Zb(80,"div",15),i.Wc(81,"\n          "),i.Vb(82,16),i.Wc(83,"\n      "),i.Yb(),i.Wc(84,"\n          "),i.Yb(),i.Wc(85,"\n        "),i.Yb(),i.Wc(86,"\n        "),i.Zb(87,"div",17),i.Wc(88,"\n          "),i.Ub(89,"app-PactGridView",18),i.Wc(90,"  \n        "),i.Yb(),i.Wc(91,"\n      "),i.Yb(),i.Wc(92,"\n "),i.Yb()),2&t&&(i.Db(5),i.Xc(e.obj.Title),i.Db(4),i.tc("ngIf",e.obj.PostVisiblility),i.Db(4),i.Xc(i.nc(14,15,"Clear")),i.Db(3),i.tc("ngIf",e.obj.UnPostVisiblility),i.Db(4),i.Xc(i.nc(21,17,"Filter")),i.Db(14),i.Yc("",i.nc(35,19,"Payroll_PayMonth"),"        :"),i.Db(4),i.Xc(e.obj.lblPayrollMonth),i.Db(9),i.Yc("",i.nc(48,21,"Payroll_StartDate"),"   :"),i.Db(4),i.Xc(e.obj.lblPayrollMonthStart),i.Db(6),i.Yc("",i.nc(58,23,"Payroll_EndDate"),"   :"),i.Db(4),i.Xc(e.obj.lblPayrollMonthEnd),i.Db(8),i.tc("obj",e.obj.chkPostBasedOnDailyAttendance),i.Db(5),i.tc("obj",e.obj.chkIncludeOTHours),i.Db(8),i.tc("obj",e.obj.chkPostBasedOnAttDimWise),i.Db(7),i.tc("obj",e.obj.EmployeesList))},directives:[l.t,n.a,o.a],pipes:[r.d],encapsulation:2}),t}()},EggS:function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));var s=a("Do2H"),i=a("Lp6j"),l=a("eQJW"),n=function(){function t(){_classCallCheck(this,t),this.CustomerID=0,this.CustomerTypeID=0,this.StatusID=0,this.AccountID=0,this.ParentID=0,this.SelectedNodeID=0,this.CodeNumber=0,this.IsGroup=!1,this.CreditDays=0,this.CreditLimit=0,this.DebitDays=0,this.Debitlimit=0,this.IsCode=!1,this.ActivityXml="",this.CCXML=""}return _createClass(t,[{key:"SaveCustomerQuick",value:function(){try{var t=[];return t.push(this.CustomerID),t.push(null!=this.CustomerCode?this.CustomerCode:""),t.push(null!=this.CustomerName?this.CustomerName:""),t.push(this.StatusID),t.push(this.CodePrefix),t.push(this.CodeNumber),t.push(this.StaticFieldsQuery),t.push(this.CustomFieldsQuery),t.push(this.CustomCostCenterFieldsQuery),t.push(s.a.SessionManager.CompanyGUID),t.push(this.GUID),t.push(""),t.push(s.a.SessionManager.UserName),t.push(s.a.SessionManager.RoleID),t.push(s.a.SessionManager.LanguageID),s.a.crmService.SetCustomerQuick(t)}catch(e){return Logger.ErrorLog("Account:: SaveAccountQuick"+e.stack),""}}},{key:"SaveCustomer",value:function(){Logger.InfoLog("Customer:: Inside SaveCustomer");try{0==this.CustomerID&&(this.GUID=i.e.NewGuid());var t=[];return t.push(this.CustomerID),t.push(null!=this.CustomerCode?this.CustomerCode:""),t.push(null!=this.CustomerName?this.CustomerName:""),t.push(null!=this.AliasName?this.AliasName:""),t.push(this.CustomerTypeID),t.push(this.StatusID),t.push(this.AccountID),t.push(this.SelectedNodeID),t.push(this.IsGroup),t.push(this.CreditDays),t.push(this.CreditLimit),t.push(null!=this.UserName?this.UserName:""),t.push(null!=this.Password?this.Password:""),t.push(null!=this.OnlineCustType?this.OnlineCustType:""),t.push(s.a.SessionManager.CompanyGUID),t.push(null!=this.GUID?this.GUID:"GUID"),t.push(""),t.push(s.a.SessionManager.UserName),t.push(this.CustomFieldsQuery),t.push(this.CustomCostCenterFieldsQuery),t.push(this.ContactsXML),t.push(this.AttachmetsXML),t.push(this.NotesXML),t.push(this.AddressXML),t.push(this.ActivityXml),t.push(this.CCXML),t.push(!1),t.push(null==this.PrimaryContactQuery?"":this.PrimaryContactQuery),t.push(s.a.SessionManager.RoleID),t.push(s.a.SessionManager.LanguageID),t.push(null!=this.CodePrefix?this.CodePrefix:""),t.push(this.CodeNumber),t.push(this.IsCode),s.a.crmService.SaveCustomer(t)}catch(e){return Logger.ErrorLog("Customer:: SaveCustomer"+e.stack),""}}},{key:"GetCustomerDetails",value:function(){var t=s.a.crmService.GetCustomerInfo("?UserID="+s.a.SessionManager.UserID+"&RoleID="+s.a.SessionManager.RoleID+"&LangID="+s.a.SessionManager.LangID+"&CustomerID="+this.CustomerID);return!t.Columns[0].Contains("ErrorMessage")&&t.Tables.length>0&&t.Tables[0].length>0&&(this.CustomerID=parseInt(t.Tables[0][0].CustomerID),this.CustomerCode=i.e.String(t.Tables[0][0].CustomerCode),this.CustomerName=i.e.String(t.Tables[0][0].CustomerName),this.AliasName=i.e.String(t.Tables[0][0].AliasName),i.e.IsEmpty(t.Tables[0][0].CustomerTypeID)||(this.CustomerTypeID=parseInt(t.Tables[0][0].CustomerTypeID)),this.StatusID=parseInt(t.Tables[0][0].StatusID),i.e.IsEmpty(t.Tables[0][0].AccountID)||(this.AccountID=parseInt(t.Tables[0][0].AccountID)),this.IsGroup=Object(l.j)(t.Tables[0][0].IsGroup),i.e.IsEmpty(t.Tables[0][0].CreditDays)||(this.CreditDays=parseInt(t.Tables[0][0].CreditDays)),i.e.IsEmpty(t.Tables[0][0].CreditLimit)||(this.CreditLimit=parseFloat(t.Tables[0][0].CreditLimit)),this.ParentID=parseInt(t.Tables[0][0].ParentID),this.GUID=i.e.String(t.Tables[0][0].GUID),this.Description=i.e.String(t.Tables[0][0].Description),this.CodePrefix=i.e.String(t.Tables[0][0].CodePrefix),this.UserName=i.e.String(t.Tables[0][0].UserName),this.OnlineCustType=i.e.String(t.Tables[0][0].OnlineCustType),this.Password=i.e.String(t.Tables[0][0].Password),i.e.IsEmpty(t.Tables[0][0].CodeNumber)||(this.CodeNumber=parseInt(t.Tables[0][0].CodeNumber))),t}},{key:"DeleteCustomer",value:function(t,e){try{var a=[];return a.push(t),a.push(e),a.push(s.a.SessionManager.RoleID),a.push(s.a.SessionManager.LanguageID),Logger.InfoLog("Customer:: Success: DBH.DeleteCustomer "+t.toString()),s.a.crmService.RemoveCustomer(a)}catch(i){return Logger.ErrorLog("LEAD::DeleteLead"+i.stack),""}}}]),t}()},Gc3p:function(t,e,a){"use strict";a.d(e,"a",(function(){return c}));var s=a("3Pt+"),i=a("fXoL"),l=a("q8k3"),n=a("ofXK"),o=a("sYmb");function r(t,e){if(1&t&&(i.Zb(0,"div",20),i.Wc(1),i.Yb()),2&t){var a=i.lc().$implicit;i.Db(1),i.Xc(a.Label)}}function d(t,e){if(1&t&&(i.Xb(0),i.Wc(1,"\n              "),i.Vb(2,11),i.Wc(3,"\n            "),i.Wb()),2&t){var a=i.lc().$implicit,s=i.lc();i.Db(2),i.tc("obj",a)("group",s.form)}}function h(t,e){if(1&t&&(i.Xb(0),i.Wc(1,"\n          "),i.Zb(2,"div",17),i.Wc(3,"\n            "),i.Uc(4,r,2,1,"div",18),i.Wc(5,"\n            "),i.Uc(6,d,4,2,"ng-container",19),i.Wc(7,"\n          "),i.Yb(),i.Wc(8,"\n        "),i.Wb()),2&t){var a=e.$implicit;i.Db(2),i.tc("ngSwitch",!0),i.Db(2),i.tc("ngSwitchCase","LABEL"==a.tabname),i.Db(2),i.tc("ngSwitchCase","TEXTBOX"==a.tabname||"COMBOTEXTVALUE"==a.tabname)}}var c=function(){var t=function(){function t(){_classCallCheck(this,t),this.form=new s.j({})}return _createClass(t,[{key:"ngOnInit",value:function(){this.obj=this.params.obj,console.log(this.obj)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Nb({type:t,selectors:[["app-income-tax-declaration"]],decls:61,vars:17,consts:[[2,"height","100%","padding","20px"],[1,"page-header"],[1,"page-title"],[1,"btnMetroDiv","secondary-btn-group"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-save"],[1,"fa-light","fa-broom"],[1,"fa-light","fa-paperclip"],[1,"section",2,"height","calc(100% - 60px)","overflow","hidden"],[1,"row"],[1,"form-group","col-xl-3","col-md-4","col-sm-12","col-xs-12","PACTControl"],["FieldDirective","",3,"obj","group"],[2,"height","calc(100% - 200px)","overflow","auto"],[1,"PACTHeaderFields","row","form-row"],[4,"ngFor","ngForOf"],[1,"documentgrid"],[1,"page-subtitle",2,"padding","12px 0","display","block"],[1,"form-group","row","PACTControl",3,"ngSwitch"],["class","input_cntrl_label panel-heading","style","font-weight: bold; color:var(--base-color); padding: 4px;",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"input_cntrl_label","panel-heading",2,"font-weight","bold","color","var(--base-color)","padding","4px"]],template:function(t,e){1&t&&(i.Zb(0,"div",0),i.Wc(1,"\n  "),i.Zb(2,"div",1),i.Wc(3,"\n    "),i.Zb(4,"label",2),i.Wc(5),i.Yb(),i.Wc(6,"\n    "),i.Zb(7,"div",3),i.Wc(8,"\n      "),i.Zb(9,"span",4),i.hc("click",(function(){return e.obj.OnSaveITDeclarations()})),i.Wc(10,"\n        "),i.Ub(11,"i",5),i.Wc(12),i.mc(13,"translate"),i.Yb(),i.Wc(14,"\n      "),i.Zb(15,"span",4),i.hc("click",(function(){return e.obj.OnClear("Clear")})),i.Wc(16,"\n        "),i.Ub(17,"i",6),i.Wc(18),i.mc(19,"translate"),i.Yb(),i.Wc(20,"\n      "),i.Zb(21,"span",4),i.hc("click",(function(){return e.obj.OnAddAttachment()})),i.Wc(22,"\n        "),i.Ub(23,"i",7),i.Wc(24),i.mc(25,"translate"),i.Yb(),i.Wc(26,"\n    "),i.Yb(),i.Wc(27,"\n  "),i.Yb(),i.Wc(28,"\n  "),i.Zb(29,"div",8),i.Wc(30,"\n    "),i.Zb(31,"div",9),i.Wc(32,"\n      "),i.Zb(33,"div",10),i.Wc(34,"\n        "),i.Vb(35,11),i.Wc(36,"\n      "),i.Yb(),i.Wc(37,"\n      "),i.Zb(38,"div",10),i.Wc(39,"\n        "),i.Vb(40,11),i.Wc(41,"\n      "),i.Yb(),i.Wc(42,"\n    "),i.Yb(),i.Wc(43,"\n    "),i.Zb(44,"div",12),i.Wc(45,"\n      "),i.Zb(46,"div",13),i.Wc(47,"\n        "),i.Uc(48,h,9,3,"ng-container",14),i.Wc(49,"\n      "),i.Yb(),i.Wc(50,"\n    "),i.Yb(),i.Wc(51,"\n    "),i.Zb(52,"div",15),i.Wc(53,"\n      "),i.Zb(54,"span",16),i.Wc(55,"HRA Information"),i.Yb(),i.Wc(56,"\n      "),i.Vb(57,11),i.Wc(58,"\n    "),i.Yb(),i.Wc(59,"\n  "),i.Yb(),i.Wc(60,"\n"),i.Yb()),2&t&&(i.Db(5),i.Yc("\n      ",e.obj.Title,"\n    "),i.Db(7),i.Xc(i.nc(13,11,"Save")),i.Db(6),i.Xc(i.nc(19,13,"Clear")),i.Db(6),i.Xc(i.nc(25,15,"Attachments")),i.Db(11),i.tc("obj",e.obj.EmpYear)("group",e.form),i.Db(5),i.tc("obj",e.obj.Employee)("group",e.form),i.Db(8),i.tc("ngForOf",e.obj.PayrollTaxFields),i.Db(9),i.tc("obj",e.obj.dtPayrollTaxCmptsObj)("group",e.form))},directives:[l.a,n.s,n.x,n.y],pipes:[o.d],encapsulation:2}),t}()},Kz05:function(t,e,a){"use strict";a.d(e,"a",(function(){return ot}));var s=a("3Pt+"),i=a("Do2H"),l=a("EQd/"),n=a("8B8H"),o=a("sDFv"),r=a("eQJW"),d=a("Lp6j"),h=a("wlFP"),c=a("MRsC"),u=a("+0zN"),g=a("4HhE"),m=a("Jnyl"),b=a("MCKn"),D=a("1Cra"),p=a("ockk"),T=a("0/4Q"),y=a("OvA8"),C=a("xnJf"),v=a("4k0m"),I=a("++IR"),S=a("E7Kr"),x=a("fXoL"),f=a("ofXK"),P=a("S8xs"),A=a("44PX"),M=a("q8k3"),E=a("sT9C"),L=a("sYmb");function G(t,e){if(1&t){var a=x.ac();x.Zb(0,"span",7),x.hc("click",(function(){return x.Ic(a),x.lc().obj.Button_Click("Approve")})),x.Ub(1,"i",43),x.Wc(2),x.mc(3,"translate"),x.Yb()}2&t&&(x.Db(2),x.Xc(x.nc(3,1,"Approve")))}function R(t,e){if(1&t){var a=x.ac();x.Zb(0,"span",7),x.hc("click",(function(){return x.Ic(a),x.lc().obj.Button_Click("Save")})),x.Ub(1,"i",44),x.Wc(2),x.mc(3,"translate"),x.Yb()}2&t&&(x.Db(2),x.Xc(x.nc(3,1,"Post")))}function N(t,e){if(1&t){var a=x.ac();x.Zb(0,"span",7),x.hc("click",(function(){return x.Ic(a),x.lc().obj.Button_Click("SaveAndPrint")})),x.Ub(1,"i",45),x.Wc(2),x.mc(3,"translate"),x.Yb()}2&t&&(x.Db(2),x.Xc(x.nc(3,1,"SaveAndPrint")))}function V(t,e){if(1&t){var a=x.ac();x.Zb(0,"span",7),x.hc("click",(function(){return x.Ic(a),x.lc().obj.Button_Click("Delete")})),x.Ub(1,"i",46),x.Wc(2),x.mc(3,"translate"),x.Yb()}2&t&&(x.Db(2),x.Xc(x.nc(3,1,"Delete")))}function F(t,e){if(1&t){var a=x.ac();x.Zb(0,"div",26),x.Wc(1,"\n                "),x.Zb(2,"div"),x.Wc(3,"\n                  "),x.Zb(4,"div",47),x.Wc(5,"\n                    "),x.Vb(6,48),x.Wc(7,"\n                    "),x.Zb(8,"div",49),x.Wc(9,"\n                      "),x.Zb(10,"label",50),x.Wc(11),x.Yb(),x.Wc(12,"\n                      "),x.Zb(13,"div",51),x.Wc(14,"\n                        "),x.Zb(15,"span",52),x.hc("click",(function(){return x.Ic(a),x.lc().Calculate_Click("Previous")})),x.Ub(16,"i",53),x.Yb(),x.Wc(17,"\n                        "),x.Zb(18,"span",52),x.hc("click",(function(){return x.Ic(a),x.lc().Calculate_Click("Next")})),x.Ub(19,"i",54),x.Yb(),x.Wc(20,"\n                      "),x.Yb(),x.Wc(21,"\n                    "),x.Yb(),x.Wc(22,"\n                  "),x.Yb(),x.Wc(23,"\n                  \n                  \n                "),x.Yb(),x.Wc(24,"\n              "),x.Yb()}if(2&t){var s=x.lc();x.Db(6),x.tc("obj",s.obj.txtDocNo)("group",s.form),x.Db(5),x.Xc(s.obj.lblDocNo)}}function w(t,e){if(1&t&&(x.Zb(0,"div",26),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.obj.dtpDocDate)("group",a.form)}}function O(t,e){if(1&t&&(x.Zb(0,"div",55),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.obj.EmployeeList)("group",a.form)}}function k(t,e){if(1&t&&(x.Zb(0,"div",26),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.obj.cmbSettlementType)("group",a.form)}}function W(t,e){if(1&t&&(x.Zb(0,"div",26),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.obj.dtpDateOfJoining)("group",a.form)}}function B(t,e){if(1&t&&(x.Zb(0,"div",26),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.obj.dtpDateOfRelieving)("group",a.form)}}function U(t,e){if(1&t&&(x.Zb(0,"div",55),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.obj.txtRemarks)("group",a.form)}}function Y(t,e){if(1&t&&(x.Zb(0,"div",26),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.obj.txtNetAmount)("group",a.form)}}function _(t,e){if(1&t&&(x.Zb(0,"div",56),x.Wc(1,"\n              "),x.Wc(2,"\n              "),x.Ub(3,"app-PactGridView",57),x.Wc(4,"\n            "),x.Yb()),2&t){var a=x.lc();x.Db(3),x.tc("obj",a.dgvGratuity)("group",a.form)}}function j(t,e){if(1&t&&(x.Zb(0,"div",36),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.cmbResignType)("group",a.form)}}function H(t,e){if(1&t&&(x.Zb(0,"div",36),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.txtGratuityAmount)("group",a.form)}}function Z(t,e){if(1&t&&(x.Zb(0,"div",36),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.txtAvailedGratuityAmount)("group",a.form)}}function X(t,e){if(1&t&&(x.Zb(0,"div",36),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.txtPartialGratuityAmount)("group",a.form)}}function q(t,e){if(1&t&&(x.Zb(0,"div",56),x.Wc(1,"\n              "),x.Ub(2,"app-PactGridView",57),x.Wc(3,"\n            "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.dgvLeaveEncash)("group",a.form)}}function Q(t,e){if(1&t&&(x.Zb(0,"div",36),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.txtCumLeaveSalBalAmt)("group",a.form)}}function J(t,e){if(1&t&&(x.Zb(0,"div",36),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.txtLEAmount)("group",a.form)}}function K(t,e){if(1&t&&(x.Zb(0,"div",56),x.Wc(1,"\n              "),x.Ub(2,"app-PactGridView",57),x.Wc(3,"\n            "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.dgvUPS)("group",a.form)}}function z(t,e){if(1&t&&(x.Zb(0,"div",36),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.txtUPSAmount)("group",a.form)}}function $(t,e){if(1&t&&(x.Zb(0,"div",56),x.Wc(1,"\n              "),x.Ub(2,"app-PactGridView",57),x.Wc(3,"\n            "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.dgvNoticePay)("group",a.form)}}function tt(t,e){if(1&t&&(x.Zb(0,"div",36),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.txtNPAmount)("group",a.form)}}function et(t,e){if(1&t&&(x.Zb(0,"div",56),x.Wc(1,"\n              "),x.Ub(2,"app-PactGridView",57),x.Wc(3,"\n            "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.dgvOthAdd)("group",a.form)}}function at(t,e){if(1&t&&(x.Zb(0,"div",36),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.txtOthAddAmount)("group",a.form)}}function st(t,e){if(1&t&&(x.Zb(0,"div",56),x.Wc(1,"\n              "),x.Ub(2,"app-PactGridView",57),x.Wc(3,"\n            "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.dgvOthDed)("group",a.form)}}function it(t,e){if(1&t&&(x.Zb(0,"div",36),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.txtOthDedAmount)("group",a.form)}}function lt(t,e){if(1&t&&(x.Zb(0,"div",56),x.Wc(1,"\n              "),x.Ub(2,"app-PactGridView",57),x.Wc(3,"\n            "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.dgvLoanBal)("group",a.form)}}function nt(t,e){if(1&t&&(x.Zb(0,"div",36),x.Wc(1,"\n                "),x.Vb(2,37),x.Wc(3,"\n              "),x.Yb()),2&t){var a=x.lc();x.Db(2),x.tc("obj",a.txtLoanBalAmount)("group",a.form)}}var ot=function(){var t=function(){function t(){_classCallCheck(this,t),this.form=new s.j({}),this.IsAccordionOpen=!0,this.EmpSeqNo=0,this.GratuityGrade=0,this.EmpGrade=0,this.GratuityDocID=0,this.sDocNo="0",this.strFormula="",this.isLoaded=!1,this.dblAmount=0,this.drwRes=null,this.chkCalcBasedOnLastSal=new h.a,this.chkCalcBasedOnActDays=new h.a,this.GratuityRemarks=new l.d(0),this.LeaveRemarks=new l.d(0),this.UPSRemarks=new l.d(0),this.NoticePayRemarks=new l.d(0),this.OAddRemarks=new l.d(0),this.ODedRemarks=new l.d(0),this.LoanRemarks=new l.d(0),this.txtGratuityAmount=new l.d(0),this.txtAvailedGratuityAmount=new l.d(0),this.txtPartialGratuityAmount=new l.d(0),this.txtCumLeaveSalBalAmt=new l.d(0),this.txtLEAmount=new l.d(0),this.txtUPSAmount=new l.d(0),this.txtOthAddAmount=new l.d(0),this.txtOthDedAmount=new l.d(0),this.txtNPAmount=new l.d(0),this.txtLoanBalAmount=new l.d(0),this.lblGratuityTotalDays="",this.lblGratuityServiceDays="",this.lblGratuityLOPDays="",this.lblGratuityBalDays="",this.lblGratuityTotalGrDays="",this.lblGratuityTaken="",this.lblActRelievingDate="",this.dgvGratuity=new n.a,this.dgvLeaveEncash=new n.a,this.dgvUPS=new n.a,this.dgvOthAdd=new n.a,this.dgvOthDed=new n.a,this.dgvNoticePay=new n.a,this.dgvLoanBal=new n.a,this.lblDocNo="",this.tpGratuity="",this.tpLeaveEncashment="",this.tpUnProcessedSalary="",this.tpNoticePay="",this.tpOtherAdditions="",this.tpOtherDeductions="",this.tpLoanBalances="",this.btnCalcGratuity="",this.lbl1GratuityTotalDays="",this.lbl1GratuityServiceDays="",this.lbl1GratuityLOPDays="",this.lbl1GratuityBalDays="",this.lbl1GratuityTotalGrDays="",this.lblGratuityAmount="",this.lblAvailedGratuityAmount="",this.lblPartialGratuityAmount="",this.lbl1GratuityTaken="",this.lblCumLeaveSalBalAmt="",this.btnCalcLE="",this.lblLEAmount="",this.lblUPSAmount="",this.lblNPAmount="",this.lblOthAddAmount="",this.lblOthDedAmount="",this.lblLoanBalAmount="",this.dtEdit=null,this.iCurDocNo=0,this.CostCenterID=40095,this.DefProdID=0,this.dblBasic=0,this.EOS_ROff=0,this.dServiceDaysFormulaAmount=0,this.dblGratuityAmount=0,this.dActServiceDays=0,this.dServiceDaysAfterLOP=0,this.dLOPDays=0,this.isLast=!1,this.sVacTypeSeqNo="-1",this.EOS_GratuityFormula="",this.EOS_AvailedFormula="",this.EOS_MaxDays=0,this.dEarnedGrDays=0,this.lst=new Array,this.dTotGratuityDays=0,this.dGratuityTaken=0,this.isMaxDaysExceded=!1,this.oEvalPayFormulas=null}return _createClass(t,[{key:"ngOnInit",value:function(){var t;this.obj=null===(t=this.params)||void 0===t?void 0:t.obj,this.FinalSettlement_DataContextChanged(),this.FinalSettlement_Loaded(),console.log(this)}},{key:"onSelectTab",value:function(t){var e=this;console.log(t),console.log(this.dgvLeaveEncash.Table),console.log(this.dgvLeaveEncash.Columns),t.length>0&&setTimeout((function(){e[t].refreshUI(),e[t].refreshDataView()}),1e3)}},{key:"FinalSettlement_DataContextChanged",value:function(){var t;this.ViewModel=null===(t=this.params)||void 0===t?void 0:t.obj,this.ViewModel.CalculateClick.Subscribe(this,"Calculate_Click"),this.ViewModel.EmpSelectionChanged.Subscribe(this,"Employee_SelectionChanged"),this.ViewModel.txtDocNo.LostFocusCommand.Subscribe(this,"txtDocNo_LostFocus"),this.dgvOthAdd.CellEditEnding.Subscribe(this,"dgvOthAdd_CellEndEdit"),this.dgvOthDed.CellEditEnding.Subscribe(this,"dgvOthDed_CellEndEdit")}},{key:"FinalSettlement_Loaded",value:function(){this.isLoaded||(this.LoadGrids(),this.Clear_Click(),this.dsLookups=i.a.common.GetDataSet("CRM015",""),this.dgvOthAdd.Columns.find((function(t){return"dgColOthAddParticulars"==t.ValueBinding})).ComboData=this.dsLookups.Tables[0],this.dgvOthDed.Columns.find((function(t){return"dgColOthDedParticulars"==t.ValueBinding})).ComboData=this.dsLookups.Tables[1],this.dgvOthAdd.CanUserAddRows=!0,this.dgvOthAdd.CanUserDeleteRows=!0,this.dgvOthAdd.addEmptyRow(),this.dgvOthDed.CanUserAddRows=!0,this.dgvOthDed.CanUserDeleteRows=!0,this.dgvOthDed.addEmptyRow(),this.dgvOthAdd.refreshDataView(),this.lblDocNo=this.GetResource("VoucherNo",40095),this.tpGratuity=this.GetResource("Gratuity",40095),this.tpLeaveEncashment=this.GetResource("Leave Encashment",40095),this.tpUnProcessedSalary=this.GetResource("Un-Processed Salary",40095),this.tpNoticePay=this.GetResource("Notice Pay",40095),this.tpOtherAdditions=this.GetResource("Other Additions",40095),this.tpOtherDeductions=this.GetResource("Other Deductions",40095),this.tpLoanBalances=this.GetResource("Loan Balances",40095),this.chkCalcBasedOnLastSal.Label=this.GetResource("Calculate based on Last Salary",40095),this.chkCalcBasedOnActDays.Label=this.GetResource("Calculate Salary based on Actual Days",40095),this.btnCalcGratuity=this.GetResource("Calculate",40095),this.lbl1GratuityTotalDays=this.GetResource("Total Days",40095)+" : ",this.lbl1GratuityServiceDays=this.GetResource("Service Days",40095)+" : ",this.lbl1GratuityLOPDays=", "+this.GetResource("LOP",40095)+" : ",this.lbl1GratuityBalDays=", "+this.GetResource("Balance",40095)+" : ",this.lbl1GratuityTotalGrDays=this.GetResource("Total Gratuity Days",40095)+" : ",this.lbl1GratuityTaken=this.GetResource("Gratuity Taken",40095)+" : ",this.lblGratuityAmount=this.GetResource("Gratuity Amount",40095),this.lblAvailedGratuityAmount=this.GetResource("Availed Gratuity Amount",40095),this.lblPartialGratuityAmount=this.GetResource("Partial Gratuity Amount",40095),this.lblCumLeaveSalBalAmt=this.GetResource("Cumulative Leave Salary Balance Amount",40095),this.btnCalcLE=this.GetResource("Calculate",40095),this.lblLEAmount=this.GetResource("Amount",40095),this.lblUPSAmount=this.GetResource("Amount",40095),this.lblNPAmount=this.GetResource("Amount",40095),this.lblOthAddAmount=this.GetResource("Amount",40095),this.lblOthDedAmount=this.GetResource("Amount",40095),this.lblLoanBalAmount=this.GetResource("Amount",40095),this.isLoaded=!0,""!=this.ViewModel.sVNo&&this.LoadDocument(parseInt(this.ViewModel.sVNo.Replace("FST-",""))))}},{key:"txtDocNo_LostFocus",value:function(t){try{this.txtDocNo.Text.Trim().length>0&&this.LoadDocument(parseInt(this.txtDocNo.Text.Trim()))}catch(e){this.ViewModel.DisplayMessage="Enter Valid DocNo."}}},{key:"LoadDocument",value:function(t){var e,a=this;this.ViewModel.DisplayMessage="",this.ViewModel.MessageVisibility=!0,this.sDocNo=t.toString();var s=i.a.common.GetDataTable("CRM016",t.toString());if(null!=s&&s.length>0){if(!d.e.IsEmpty(i.a.SessionManager.sEmpFilteredEmpSeqNos)&&!i.a.SessionManager.sEmpFilteredEmpSeqNos.split(",").Contains(parseInt(s[0].EmpSeqNo).toString()))return this.ViewModel.DisplayMessage="You don't have permission to view this Document.",this.ViewModel.MessageVisibility=!0,this.Clear_Click(),this.txtDocNo.Text=t.toString(),void(this.EmployeeList.IsEnabled=!1);this.EmployeeList.IsEnabled=!0,this.EmployeeList.SelectedValue=parseInt(s[0].EmpSeqNo),this.EmployeeList.SelectedValue=parseInt(s[0].EmpSeqNo),this.ClearControlValues(),this.dtEdit=null,this.EmpSeqNo=parseInt(s[0].EmpSeqNo),this.dtEdit=i.a.common.GetDataTable("CRM018",this.EmpSeqNo.toString()+"~"+t),null!=this.dtEdit&&this.dtEdit.length>0&&(this.dtpDocDate.Date=new Date(this.dtEdit[0].cDocDate));var l=new Date(this.dtpDocDate.Date.getFullYear(),this.dtpDocDate.Date.iMonth(),1);if(this.dsD=i.a.common.GetDataSet3("CRM019",this.EmpSeqNo.toString()+"~"+i.a.SessionManager.UserID+"~"+i.a.SessionManager.RoleID+"~"+this.CostCenterID,this.dtpDocDate.Date.ToString("dd MMM yyyy"),l.ToString("dd/MMM/yyyy")),null!=this.dsD&&this.dsD.Tables.length>0&&this.dsD.Tables[0].length>0){if(this.dtpDateOfJoining.Date=new Date(this.dsD.Tables[0][0].DOJ),this.EmpGrade=parseInt(this.dsD.Tables[13][0].HistoryNodeID),this.cmbSettlementType.SelectedValue="Final",9e3!=new Date(this.dsD.Tables[0][0].DORelieve).getFullYear()?(this.dtpDateOfRelieving.Date=new Date(this.dsD.Tables[0][0].DORelieve),this.lblActRelievingDate=this.GetResource("Actual Relieving Date",40095)+" : "+this.dtpDateOfRelieving.Date.ToString("dd/MMM/yyyy")):this.dtpDateOfRelieving.Date=new Date,this.cmbResignType.SelectedValue=!d.e.IsEmpty(this.dsD.Tables[0][0].ResignType)&&this.dsD.Tables[0][0].ResignType.toString().startsWith("Terminated")?this.dsD.Tables[0][0].ResignType.toString():"Resigned","Posted"==d.e.String(this.dsD.Tables[0][0].ResignStatus)&&function(){var t=new Date(a.dsD.Tables[0][0].DOResign),s=new Date(t.Year,t.Month,1),l=new Date,n=s;"Terminated With Cause"==a.dsD.Tables[0][0].ResignType.toString()?""!=i.a.SessionManager.Preferences.NPTerminatedWithCause&&parseInt(i.a.SessionManager.Preferences.NPTerminatedWithCause)>0&&(l=s.AddMonths(parseInt(i.a.SessionManager.Preferences.NPTerminatedWithCause)-1)):"Terminated Without Cause"==a.dsD.Tables[0][0].ResignType.toString()?""!=i.a.SessionManager.Preferences.NPTerminatedWithOutCause&&parseInt(i.a.SessionManager.Preferences.NPTerminatedWithOutCause)>0&&(l=s.AddMonths(parseInt(i.a.SessionManager.Preferences.NPTerminatedWithOutCause)-1)):"Resigned"==a.dsD.Tables[0][0].ResignType.toString()&&""!=i.a.SessionManager.Preferences.NPResignation&&parseInt(i.a.SessionManager.Preferences.NPResignation)>0&&(l=s.AddMonths(parseInt(i.a.SessionManager.Preferences.NPResignation)-1));var o,r=new Date(a.dtpDateOfRelieving.Date.getFullYear(),a.dtpDateOfRelieving.Date.iMonth(),1);if(l<r)for(;l<r;)l=l.AddMonths(1);for(var h=new Date,c=new Date,u=new Date;n<=l;){if(null==(e=a.dsD.Tables[5].filter((function(t){return t.PayrollDate==n.ToString("dd/MMM/yyyy")})))||0==e.length){if(a.dgvNoticePay.addEmptyRow(),a.dgvNoticePay.Table[a.dgvNoticePay.Table.length-1].dgColNPType="Add",a.dgvNoticePay.Table[a.dgvNoticePay.Table.length-1].dgColNPPayrollMonth=n.ToString("dd/MMM/yyyy"),"Actual Days"==i.a.SessionManager.Preferences.PayDays){var g={PayrollMonth:h,PayrollMonthStart:c,PayrollMonthEnd:u};d.e.SetPayrollDate(n,g),h=g.PayrollMonth,c=g.PayrollMonthStart,o=(u=g.PayrollMonthEnd).Subtract(c).Days+1}else o=parseInt(i.a.SessionManager.Preferences.PayDays);a.dgvNoticePay.Table[a.dgvNoticePay.Table.length-1].dgColNPMonthDays=o,a.dgvNoticePay.Table[a.dgvNoticePay.Table.length-1].dgColNPDaysAtt=0,a.dgvNoticePay.Table[a.dgvNoticePay.Table.length-1].dgColNPLOP=0,a.dgvNoticePay.Table[a.dgvNoticePay.Table.length-1].dgColNPNetSal=(0).ToString(i.a.SessionManager.sPayrollDecimals)}n=n.AddMonths(1)}}(),this.dsD.Tables[2].length>0&&(this.sVacTypeSeqNo=this.dsD.Tables[2][0].VacationField.toString()),this.ViewModel.WID=this.dsD.Tables[12].length>0?parseInt(this.dsD.Tables[12][0].WorkFlowID):0,this.dsD.Tables[1].length>0&&this.RefreshLeaveEncashDetails(),this.dsD.Tables[8].length>0&&i.a.SessionManager.Preferences.ContainsKey("DonotCalculateCumulativeLeaveSalaryBalanceinFinalSettlement")&&"False"==i.a.SessionManager.Preferences.DonotCalculateCumulativeLeaveSalaryBalanceinFinalSettlement.toString()){for(var n=0,h=0,c=0;c<this.dsD.Columns[8].length;c++)d.e.IsEmpty(this.dsD.Tables[8][0][c])||(n+=parseFloat(this.dsD.Tables[8][0][c]));for(var u=0;u<this.dsD.Tables[9].length;u++)d.e.IsEmpty(this.dsD.Tables[9][u].Amount)||(h+=parseFloat(this.dsD.Tables[9][u].Amount));this.txtCumLeaveSalBalAmt.Text=(n-h).ToString(i.a.SessionManager.sPayrollDecimals)}else this.txtCumLeaveSalBalAmt.Text=(0).ToString(i.a.SessionManager.sPayrollDecimals);if(this.txtLEAmount.Text=parseFloat(this.txtCumLeaveSalBalAmt.Text).ToString(i.a.SessionManager.sPayrollDecimals),this.AutoCalculateLeaveEncashment(),this.dsD.Tables[3].length>0&&(this.dblBasic=parseFloat(this.dsD.Tables[3][this.dsD.Tables[3].length-1].BasicMonthly.toString())),this.dsD.Tables[4].length>0){var g;this.dgvUPS.addEmptyRows(this.dsD.Tables[4].length);for(var m=0;m<this.dsD.Tables[4].length;m++)g=new Date(this.dsD.Tables[4][m].PayrollMonth),this.dgvUPS.Table[m].dgColUPSPayrollMonth=g.ToString("dd/MMM/yyyy"),this.dgvUPS.Table[m].dgColUPSMonthDays=g.DaysInMonth(),this.dgvUPS.Table[m].dgColUPSDaysAtt=0,this.dgvUPS.Table[m].dgColUPSLOP=0,this.dgvUPS.Table[m].dgColUPSNetSal=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.dgvUPS.Table[m].dgColUPSCalc=this.GetResource("Calculate",40095),this.dgvUPS.updateRow(this.dgvUPS.Table[m])}var b=0;if(this.dsD.Tables[10].length>0){this.dgvLoanBal.addEmptyRows(this.dsD.Tables[10].length);for(var D=0;D<this.dsD.Tables[10].length;D++)this.dgvLoanBal.Table[D].dgColLoanBalSNo=(D+1).toString(),this.dgvLoanBal.Table[D].dgColLoanBalDocNo=this.dsD.Tables[10][D].DocNo.toString(),this.dgvLoanBal.Table[D].dgColLoanBalDocNo_Tag=this.dsD.Tables[10][D].DocID.toString(),this.dgvLoanBal.Table[D].dgColLoanBalLoanType=this.dsD.Tables[10][D].LoanType.toString(),this.dgvLoanBal.Table[D].dgColLoanBalLoanType_Tag=this.dsD.Tables[10][D].LoanCompID.toString(),this.dgvLoanBal.Table[D].dgColLoanBalApprAmount=parseFloat(this.dsD.Tables[10][D].ApprovedAmt).ToString(i.a.SessionManager.sPayrollDecimals),this.dgvLoanBal.Table[D].dgColLoanBalAmountPaid=parseFloat(this.dsD.Tables[10][D].Paid).ToString(i.a.SessionManager.sPayrollDecimals),this.dgvLoanBal.Table[D].dgColLoanBalBalAmount=parseFloat(this.dsD.Tables[10][D].Balance).ToString(i.a.SessionManager.sPayrollDecimals),b+=parseFloat(this.dsD.Tables[10][D].Balance),this.dgvLoanBal.updateRow(this.dgvLoanBal.Table[D])}this.txtLoanBalAmount.Text=b.ToString(i.a.SessionManager.sPayrollDecimals),this.ViewModel.ApproveVisibility=!1;var p=null;if(null!=this.dtEdit&&this.dtEdit.length>0){if(this.ViewModel.DocStatus="["+this.dtEdit[0].DocStatus.toString()+"]",this.ViewModel.DocID=parseInt(this.dtEdit[0].DocID),this.sDocNo=this.dtEdit[0].DocNumber.toString(),this.txtDocNo.Text=this.sDocNo,this.dtpDocDate.Date=new Date(this.dtEdit[0].cDocDate),this.dtpDateOfRelieving.Date=new Date(this.dtEdit[0].dcAlpha3),this.txtRemarks.Text=this.dtEdit[0].CommonNarration.toString(),this.ViewModel.StatusID=parseInt(this.dtEdit[0].StatusID),this.ViewModel.WID=parseInt(this.dtEdit[0].WorkflowID),this.cmbSettlementType.Text=d.e.String(this.dtEdit[0].dcAlpha10),p=i.a.common.GetDataSet("CRM029",this.ViewModel.DocID.toString()),null!=(e=this.dtEdit.filter((function(t){return"1"==t.dcAlpha1})))&&e.length>0&&(this.GratuityRemarks.Text=e[0].dcAlpha8.toString(),this.cmbResignType.Text=e[0].dcAlpha11.toString(),this.chkCalcBasedOnLastSal.IsChecked=Object(r.j)(e[0].dcAlpha12),this.chkCalcBasedOnActDays.IsChecked=Object(r.j)(e[0].dcAlpha13),this.Calculate_Click("Gratuity"),this.txtPartialGratuityAmount.Text=parseFloat(e[0].dcCalcNum4).ToString(i.a.SessionManager.sPayrollDecimals)),null!=(e=this.dtEdit.filter((function(t){return"2"==t.dcAlpha1})))&&e.length>0){this.LeaveRemarks.Text=e[0].dcAlpha8.toString();for(var T=0;T<e.length;T++)for(var y=0;y<this.dgvLeaveEncash.Table.length;y++)if(e[T].dcAlpha11.toString()==this.dgvLeaveEncash.Table[y+"_Tag"].toString()){this.dgvLeaveEncash.Table[y].dgColLEAvailable=e[T].dcAlpha13.toString(),this.dgvLeaveEncash.Table[y].dgColLEMaxEncash=e[T].dcAlpha14.toString(),this.dgvLeaveEncash.Table[y].dgColLEApplied=e[T].dcAlpha15.toString();break}this.Calculate_Click("LeaveEncash")}if(null!=(e=this.dtEdit.filter((function(t){return"3"==t.dcAlpha1})))&&e.length>0){this.UPSRemarks.Text=e[0].dcAlpha8.toString();for(var v=0;v<e.length;v++)for(var I=0;I<this.dgvUPS.Table.length;I++)if(new Date(e[v].dcAlpha11)==new Date(this.dgvUPS.Table[I].dgColUPSPayrollMonth)){this.dgvUPS.Table[I].dgColUPSDaysAtt=e[v].dcAlpha13.toString(),this.dgvUPS.Table[I].dgColUPSLOP=e[v].dcAlpha14.toString(),this.dgvUPS.Table[I].dgColUPSNetSal=e[v].dcAlpha15.toString();break}this.txtUPSAmount.Text=parseFloat(e[0].dcCalcNum1).ToString(i.a.SessionManager.sPayrollDecimals)}if(null!=(e=this.dtEdit.filter((function(t){return"4"==t.dcAlpha1})))&&e.length>0){this.NoticePayRemarks.Text=e[0].dcAlpha8.toString();for(var S=0;S<e.length;S++)for(var x=0;x<this.dgvNoticePay.Table.length;x++)if(new Date(e[S].dcAlpha11)==new Date(this.dgvNoticePay.Table[x].dgColNPPayrollMonth)){this.dgvNoticePay.Table[x].dgColNPDaysAtt=e[S].dcAlpha13.toString(),this.dgvNoticePay.Table[x].dgColNPLOP=e[S].dcAlpha14.toString(),this.dgvNoticePay.Table[x].dgColNPNetSal=e[S].dcAlpha15.toString(),this.dgvNoticePay.Table[x].dgColNPType=e[S].dcAlpha16.toString(),this.dgvNoticePay.Table[x].dgColNPCalc=this.GetResource("Calculate",40095),this.dgvNoticePay.updateRow(this.dgvNoticePay.Table[x]);break}this.txtNPAmount.Text=parseFloat(e[0].dcCalcNum1).ToString(i.a.SessionManager.sPayrollDecimals)}if(null!=(e=this.dtEdit.filter((function(t){return"5"==t.dcAlpha1})))&&e.length>0){this.OAddRemarks.Text=e[0].dcAlpha8.toString(),this.dgvOthAdd.addEmptyRows(e.length);for(var f=0;f<e.length;f++)this.dgvOthAdd.Table[f].dgColOthAddParticulars=parseInt(e[f].dcAlpha11.toString()),this.dgvOthAdd.Table[f].dgColOthAddAmount=e[f].dcAlpha12.toString(),d.e.IsEmpty(e[f].dcAlpha13)||(this.dgvOthAdd.Table[f].dgColOthAddRemarks=e[f].dcAlpha13.toString()),this.dgvOthAdd.updateRow(this.dgvOthAdd.Table[f]),this.dgvOthAdd_CellEndEdit(this.dgvOthAdd,2)}if(null!=(e=this.dtEdit.filter((function(t){return"6"==t.dcAlpha1})))&&e.length>0){this.ODedRemarks.Text=e[0].dcAlpha8.toString(),this.dgvOthDed.addEmptyRows(e.length);for(var P=0;P<e.length;P++)this.dgvOthDed.Table[P].dgColOthDedParticulars=parseInt(e[P].dcAlpha11.toString()),this.dgvOthDed.Table[P].dgColOthDedAmount=e[P].dcAlpha12.toString(),d.e.IsEmpty(e[P].dcAlpha13)||(this.dgvOthDed.Table[P].dgColOthDedRemarks=e[P].dcAlpha13.toString()),this.dgvOthDed.updateRow(this.dgvOthDed.Table[P]),this.dgvOthDed_CellEndEdit(this.dgvOthDed,2)}if(null!=(e=this.dtEdit.filter((function(t){return"7"==t.dcAlpha1})))&&e.length>0){this.LoanRemarks.Text=e[0].dcAlpha8.toString();for(var A=0;A<e.length;A++)for(var M=0;M<this.dgvLoanBal.Table.length;M++)if(e[A].dcAlpha12.toString()==this.dgvLoanBal.Table[M].dgColLoanBalDocNo_Tag.toString()){this.dgvLoanBal.Table[M].dgColLoanBalCalc_Tag="Paid",this.dgvLoanBal.Table[M].dgColLoanBalSNo_Tag=e[A].dcAlpha17.toString(),this.dgvLoanBal.updateRow(this.dgvLoanBal.Table[M]);break}}if(null!=p&&p.Tables.length>0&&p.Tables[0].length>0){var E=p.Tables[0];if(null!=E&&E.length>0)for(var L=0;L<E.length;L++){var G=new C.AddAttachmentViewModel;G.AddAttachmentViewModel_2(this.ViewModel),G.AttachmentID=parseInt(E[L].FileID),G.ActualFileName=E[L].ActualFileName.toString(),G.FileExtension=E[L].FileExtension.toString(),G.FileDescription=E[L].FileDescription.toString(),G.FilePath=d.e.GetPath(E[L].GUID+"."+E[L].FileExtension),G.RelativeFileName=E[L].RelativeFileName.toString(),G.IsProductImage=!1,this.ViewModel.ViewAttachments.AttachmentsList.push(G)}}if(this.ViewModel.WID>0){var R=i.a.common.GetDataTable("CRM020",this.dtEdit[0].InvDocDetailsID.toString()+",95,'"+i.a.SessionManager.UserName+"',40095,"+this.ViewModel.WID+","+this.dtEdit[0].WorkFlowLevel.toString()+","+this.dtEdit[0].StatusID.toString()+","+this.dtEdit[0].CreatedDate.toString()+","+i.a.SessionManager.UserID+","+i.a.SessionManager.RoleID);null!=R&&R.length>0&&(null!=R[0].CanApprove&&null!=R[0].CanApprove&&"TRUE"==R[0].CanApprove.toString().toUpperCase()?(this.ViewModel.ApproveVisibility=!0,this.ViewModel.PostVisiblility=!1):this.ViewModel.PostVisiblility=!(!i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Edit Posted Docs")&&!i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Edit Approved Docs")))}var N=i.a.common.GetDataSet3("CRM021",this.CostCenterID.toString(),this.ViewModel.DocID.toString());this.ViewModel.WFDocLevelList.Clear();var V=null,F=null;if(V=N.Tables[1],F=N.Tables[0],null!=V&&V.length>0&&!i.a.SessionManager.IsActionAssigned(this.CostCenterID,"HideWorkflowLevels")){var w=parseInt(this.dtEdit[0].WorkFlowLevel);F.length>0&&parseInt(F[F.length-1].StatusID);for(var O=F.length>0?parseInt(F[0].WORKFLOWLEVEL)-1:0,k=0;k<V.length;k++){var W=new o.a(parseInt(V[0].WID),parseInt(V[k].LEVELID),V[k].LEVELNAME.toString(),this.CostCenterID,this.ViewModel.DocID,new Date(V[k].DocDate));k==O&&(W.IsPending=!0,W.Label="C"),0==k&&(W.LeftLineBrush="#FFFFFFFF"),k==V.length-1&&(W.RightLineBrush="#FFFFFFFF"),this.ViewModel.WFDocLevelList.push(W)}for(var B=F.length-1;B>=0;B--){var U=parseInt(F[B].WORKFLOWLEVEL);if(U<=w&&U<=this.ViewModel.WFDocLevelList.length&&!this.ViewModel.WFDocLevelList[U-1].IsSet){this.ViewModel.WFDocLevelList[U-1].IsSet=!0,this.ViewModel.WFDocLevelList[U-1].ModifiedBy=F[B].STATUS.toString()+" By "+F[B].CREATEDBY.toString(),F[B].FIRSTNAME.toString().length>0&&(this.ViewModel.WFDocLevelList[U-1].ModifiedBy+="("+F[B].FIRSTNAME.toString()+")");var Y=new Date(F[B].DATE);this.ViewModel.WFDocLevelList[U-1].ModifiedBy+=" On "+Y.ToString(i.a.SessionManager.Preferences["Date Format"]);var _=parseInt(F[B].STATUSID);372==_?this.ViewModel.WFDocLevelList[U-1].IsRejected=!0:441==_?this.ViewModel.WFDocLevelList[U-1].IsApproved=!0:369==_&&(this.ViewModel.WFDocLevelList[U-1].IsPending=!0,this.ViewModel.WFDocLevelList[U-1].Label=" P")}}}}else this.ViewModel.DocStatus="[UnPosted]",this.ViewModel.DocID=0,this.sDocNo="0",this.ViewModel.StatusID=0,this.ViewModel.PostVisiblility=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Create"),this.ViewModel.UnPostVisiblility=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Delete");this.CalculateTotalAmount()}this.ViewModel.EmployeeList.Code.SelectedValue=parseInt(s[0].EmpSeqNo),this.ViewModel.EmployeeList.Name.SelectedValue=parseInt(s[0].EmpSeqNo),this.ViewModel.DocID=parseInt(s[0].DocID),this.ViewModel.sVoucherNo=s[0].VoucherNo.toString()}else this.Clear_Click(),this.txtDocNo.Text=t.toString(),this.dtpDocDate.SetFocus=!0}},{key:"Clear_Click",value:function(){this.GetNextDocNo(),this.EmployeeList.IsEnabled=!0,this.EmployeeList.SelectedValue=0,this.EmpSeqNo=0,this.ViewModel.DocID=0,this.ClearControlValues(),this.ViewModel.sCmdParameter="",this.ViewModel.SelectedEmpID=0,this.dTotGratuityDays=0,null!=this.ViewModel&&null!=this.ViewModel.WFDocLevelList&&this.ViewModel.WFDocLevelList.Clear(),this.ViewModel.ApproveVisibility=!1,this.ViewModel.PostVisiblility=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Create"),this.ViewModel.UnPostVisiblility=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Delete"),null!=this.ViewModel.ViewAttachments&&this.ViewModel.ViewAttachments.AttachmentsList.Clear(),this.ViewModel.ViewAttachments=new y.ViewAttachmentViewModel(this.ViewModel,i.a.SessionManager,i.a.admin),this.ViewModel.OnAddAttachment()}},{key:"ClearControlValues",value:function(){this.dtEdit=null,this.lblGratuityTotalDays="",this.lblGratuityServiceDays="",this.lblGratuityLOPDays="",this.lblGratuityBalDays="",this.lblGratuityTotalGrDays="",this.lblGratuityTaken="0",this.chkCalcBasedOnLastSal.Label="Calculate based on Last Salary",this.chkCalcBasedOnActDays.Label="Calculate Salary based on Actual Days",this.txtRemarks.Label=i.a.GetResource("Remarks"),this.txtRemarks.Text="",this.GratuityRemarks.Label=i.a.GetResource("Remarks"),this.GratuityRemarks.Text="",this.LeaveRemarks.Label=i.a.GetResource("Remarks"),this.LeaveRemarks.Text="",this.UPSRemarks.Label=i.a.GetResource("Remarks"),this.UPSRemarks.Text="",this.NoticePayRemarks.Label=i.a.GetResource("Remarks"),this.NoticePayRemarks.Text="",this.OAddRemarks.Label=i.a.GetResource("Remarks"),this.OAddRemarks.Text="",this.ODedRemarks.Label=i.a.GetResource("Remarks"),this.ODedRemarks.Text="",this.cmbSettlementType.SelectedIndex=0,this.LoanRemarks.Label=i.a.GetResource("Remarks"),this.LoanRemarks.Text="",this.dtpDocDate.Date=(new Date).Date(),this.cmbResignType.Label=i.a.GetResource("Resign Type"),this.cmbResignType.SelectedValue="Resigned",this.dblBasic=0,this.sDocNo="0",this.ViewModel.DocStatus="[UnPosted]",this.dGratuityTaken=0,this.dgvGratuity.Clear(),this.dgvLeaveEncash.Clear(),this.dgvUPS.Clear(),this.dgvOthAdd.Clear(),this.dgvOthDed.Clear(),this.dgvNoticePay.Clear(),this.dgvLoanBal.Clear(),this.txtGratuityAmount.Label=this.GetResource("Gratuity Amount",40095),this.txtGratuityAmount.Text=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.txtGratuityAmount.Align="right",this.txtAvailedGratuityAmount.Label=this.GetResource("Availed Gratuity Amount",40095),this.txtAvailedGratuityAmount.Text=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.txtAvailedGratuityAmount.Align="right",this.txtPartialGratuityAmount.Label=this.GetResource("Partial Gratuity Amount",40095),this.txtPartialGratuityAmount.Text=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.txtPartialGratuityAmount.Align="right",this.txtCumLeaveSalBalAmt.Label=this.GetResource("Cumulative Leave Salary Balance Amount",40095),this.txtCumLeaveSalBalAmt.Text=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.txtCumLeaveSalBalAmt.Align="right",this.txtLEAmount.Label=this.GetResource("Amount",40095),this.txtLEAmount.Text=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.txtLEAmount.Align="right",this.txtUPSAmount.Label=this.GetResource("Amount",40095),this.txtUPSAmount.Text=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.txtUPSAmount.Align="right",this.txtOthAddAmount.Label=this.GetResource("Amount",40095),this.txtOthAddAmount.Text=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.txtOthAddAmount.Align="right",this.txtOthDedAmount.Label=this.GetResource("Amount",40095),this.txtOthDedAmount.Text=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.txtOthDedAmount.Align="right",this.txtNPAmount.Label=this.GetResource("Amount",40095),this.txtNPAmount.Text=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.txtNPAmount.Align="right",this.txtLoanBalAmount.Label=this.GetResource("Amount",40095),this.txtLoanBalAmount.Text=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.txtLoanBalAmount.Align="right",this.txtNetAmount.Text=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.txtNetAmount.Align="right",this.lblActRelievingDate="",null!=this.ViewModel.ViewAttachments&&this.ViewModel.ViewAttachments.AttachmentsList.Clear(),this.ViewModel.ViewAttachments=new y.ViewAttachmentViewModel(this.ViewModel,i.a.SessionManager,i.a.admin),this.ViewModel.OnAddAttachment()}},{key:"GetNextDocNo",value:function(){var t=i.a.common.GetDataTable("CRM017","");null!=t&&(this.txtDocNo.Text=t.length>0?d.e.IsEmpty(t[0].CurrentCodeNumber)?"1":parseInt(t[0].CurrentCodeNumber).toString():"1")}},{key:"Employee_SelectionChanged",value:function(t){var e=this;if(this.EmpSeqNo!=t){var a;this.EmpSeqNo=t,this.ClearControlValues();var s=new Date(this.dtpDocDate.Date.getFullYear(),this.dtpDocDate.Date.getMonth(),1);if(this.dsD=i.a.common.GetDataSet3("CRM032",this.EmpSeqNo.toString()+"~"+i.a.SessionManager.UserID+"~"+i.a.SessionManager.RoleID+"~"+this.CostCenterID,this.dtpDocDate.Date.ToString("dd MMM yyyy"),s.ToString("dd/MMM/yyyy")),null!=this.dsD&&this.dsD.Tables.length>0&&this.dsD.Tables[0].length>0){if(this.dtpDateOfJoining.Date=new Date(this.dsD.Tables[0][0].DOJ),this.EmpGrade=parseInt(this.dsD.Tables[13][0].HistoryNodeID),this.cmbSettlementType.SelectedValue="Final",9e3!=new Date(this.dsD.Tables[0][0].DORelieve).getFullYear()?(this.dtpDateOfRelieving.Date=new Date(this.dsD.Tables[0][0].DORelieve),this.lblActRelievingDate=this.GetResource("Actual Relieving Date",40095)+this.dtpDateOfRelieving.Date.ToString("dd/MMM/yyyy")):this.dtpDateOfRelieving.Date=Date.Today(),this.cmbResignType.SelectedValue=!d.e.IsEmpty(this.dsD.Tables[0][0].ResignType)&&this.dsD.Tables[0][0].ResignType.toString().startsWith("Terminated")?this.dsD.Tables[0][0].ResignType.toString():"Resigned","Posted"==this.dsD.Tables[0][0].ResignStatus.toString()&&function(){var t=new Date(e.dsD.Tables[0][0].DOResign),s=new Date,l=new Date,n=new Date,o={PayrollMonth:s,PayrollMonthStart:l,PayrollMonthEnd:n};d.e.SetPayrollDate(t,o),s=o.PayrollMonth,l=o.PayrollMonthStart,n=o.PayrollMonthEnd;var r=new Date(s.getFullYear(),s.iMonth(),1),h=new Date,c=r;"Terminated With Cause"==e.dsD.Tables[0][0].ResignType.toString()?""!=i.a.SessionManager.Preferences.NPTerminatedWithCause&&parseInt(i.a.SessionManager.Preferences.NPTerminatedWithCause)>0&&(h=r.AddMonths(parseInt(i.a.SessionManager.Preferences.NPTerminatedWithCause)-1)):"Terminated Without Cause"==e.dsD.Tables[0][0].ResignType.toString()?""!=i.a.SessionManager.Preferences.NPTerminatedWithOutCause&&parseInt(i.a.SessionManager.Preferences.NPTerminatedWithOutCause)>0&&(h=r.AddMonths(parseInt(i.a.SessionManager.Preferences.NPTerminatedWithOutCause)-1)):"Resigned"==e.dsD.Tables[0][0].ResignType.toString()&&""!=i.a.SessionManager.Preferences.NPResignation&&parseInt(i.a.SessionManager.Preferences.NPResignation)>0&&(h=r.AddMonths(parseInt(i.a.SessionManager.Preferences.NPResignation)-1)),o={PayrollMonth:s=new Date,PayrollMonthStart:l=new Date,PayrollMonthEnd:n=new Date},d.e.SetPayrollDate(e.dtpDateOfRelieving.Date,o),s=o.PayrollMonth,l=o.PayrollMonthStart,n=o.PayrollMonthEnd;var u=new Date(s.getFullYear(),s.iMonth(),1);if(h<u)for(;h<u;)h=h.AddMonths(1);var g=0;for(s=new Date,l=new Date,n=new Date;c<=h;){if(null==(a=e.dsD.Tables[5].filter((function(t){return t.PayrollDate==c.ToString("dd/MMM/yyyy")})))||0==a.length){if(e.dgvNoticePay.addEmptyRow(),e.dgvNoticePay.Table[e.dgvNoticePay.Table.length-1].dgColNPType="Add",e.dgvNoticePay.Table[e.dgvNoticePay.Table.length-1].dgColNPPayrollMonth=c.ToString("dd/MMM/yyyy"),"Actual Days"==i.a.SessionManager.Preferences.PayDays){var m={PayrollMonth:s,PayrollMonthStart:l,PayrollMonthEnd:n};d.e.SetPayrollDate(c,m),s=m.PayrollMonth,l=m.PayrollMonthStart,g=(n=m.PayrollMonthEnd).Subtract(l).Days+1}else g=parseInt(i.a.SessionManager.Preferences.PayDays);e.dgvNoticePay.Table[e.dgvNoticePay.Table.length-1].dgColNPMonthDays=g,e.dgvNoticePay.Table[e.dgvNoticePay.Table.length-1].dgColNPDaysAtt=0,e.dgvNoticePay.Table[e.dgvNoticePay.Table.length-1].dgColNPLOP=0,e.dgvNoticePay.Table[e.dgvNoticePay.Table.length-1].dgColNPNetSal=(0).ToString(i.a.SessionManager.sPayrollDecimals),e.dgvNoticePay.Table[e.dgvNoticePay.Table.length-1].dgColNPCalc=e.GetResource("Calculate",40095),e.dgvNoticePay.updateRow(e.dgvNoticePay.Table[e.dgvNoticePay.Table.length-1])}c=c.AddMonths(1)}}(),this.dsD.Tables[2].length>0&&(this.sVacTypeSeqNo=this.dsD.Tables[2][0].VacationField.toString()),this.ViewModel.WID=this.dsD.Tables[12].length>0?parseInt(this.dsD.Tables[12][0].WorkFlowID):0,this.dsD.Tables[1].length>0&&this.RefreshLeaveEncashDetails(),this.dsD.Tables[8].length>0&&i.a.SessionManager.Preferences.ContainsKey("DonotCalculateCumulativeLeaveSalaryBalanceinFinalSettlement")&&"False"==i.a.SessionManager.Preferences.DonotCalculateCumulativeLeaveSalaryBalanceinFinalSettlement.toString()){for(var l=0,n=0,o=0;o<this.dsD.Columns[8].length;o++)d.e.IsEmpty(this.dsD.Tables[8][0][o])||(l+=parseFloat(this.dsD.Tables[8][0][o]));for(var r=0;r<this.dsD.Tables[9].length;r++)d.e.IsEmpty(this.dsD.Tables[9][r].Amount)||(n+=parseFloat(this.dsD.Tables[9][r].Amount));this.txtCumLeaveSalBalAmt.Text=(l-n).ToString(i.a.SessionManager.sPayrollDecimals)}else this.txtCumLeaveSalBalAmt.Text=(0).ToString(i.a.SessionManager.sPayrollDecimals);if(this.txtLEAmount.Text=parseFloat(this.txtCumLeaveSalBalAmt.Text).ToString(i.a.SessionManager.sPayrollDecimals),this.AutoCalculateLeaveEncashment(),this.dsD.Tables[3].length>0&&(this.dblBasic=parseFloat(this.dsD.Tables[3][this.dsD.Tables[3].length-1].BasicMonthly.toString())),this.dsD.Tables[4].length>0){var h;this.dgvUPS.addEmptyRows(this.dsD.Tables[4].length);for(var c=0;c<this.dsD.Tables[4].length;c++)h=new Date(this.dsD.Tables[4][c].PayrollMonth),this.dgvUPS.Table[c].dgColUPSPayrollMonth=h.ToString("dd/MMM/yyyy"),this.dgvUPS.Table[c].dgColUPSMonthDays=h.DaysInMonth(),this.dgvUPS.Table[c].dgColUPSDaysAtt=0,this.dgvUPS.Table[c].dgColUPSLOP=0,this.dgvUPS.Table[c].dgColUPSNetSal=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.dgvUPS.Table[c].dgColNPCalc=this.GetResource("Calculate",40095),this.dgvUPS.updateRow(this.dgvUPS.Table[c])}var u=0;if(this.dsD.Tables[10].length>0){this.dgvLoanBal.addEmptyRows(this.dsD.Tables[10].length);for(var g=0;g<this.dsD.Tables[10].length;g++)this.dgvLoanBal.Table[g].dgColLoanBalSNo=(g+1).toString(),this.dgvLoanBal.Table[g].dgColLoanBalDocNo=this.dsD.Tables[10][g].DocNo.toString(),this.dgvLoanBal.Table[g].dgColLoanBalDocNo_Tag=this.dsD.Tables[10][g].DocID.toString(),this.dgvLoanBal.Table[g].dgColLoanBalLoanType=this.dsD.Tables[10][g].LoanType.toString(),this.dgvLoanBal.Table[g].dgColLoanBalLoanType_Tag=this.dsD.Tables[10][g].LoanCompID.toString(),this.dgvLoanBal.Table[g].dgColLoanBalApprAmount=parseFloat(this.dsD.Tables[10][g].ApprovedAmt).ToString(i.a.SessionManager.sPayrollDecimals),this.dgvLoanBal.Table[g].dgColLoanBalAmountPaid=parseFloat(this.dsD.Tables[10][g].Paid).ToString(i.a.SessionManager.sPayrollDecimals),this.dgvLoanBal.Table[g].dgColLoanBalBalAmount=parseFloat(this.dsD.Tables[10][g].Balance).ToString(i.a.SessionManager.sPayrollDecimals),u+=parseFloat(this.dsD.Tables[10][g].Balance),this.dgvLoanBal.updateRow(this.dgvLoanBal.Table[g])}this.txtLoanBalAmount.Text=u.ToString(i.a.SessionManager.sPayrollDecimals),this.CalculateTotalAmount()}}}},{key:"AutoCalculateLeaveEncashment",value:function(){i.a.SessionManager.Preferences.ContainsKey("AutoCalcLeaveEncashmentInFinalSettlement")&&"True"==i.a.SessionManager.Preferences.AutoCalcLeaveEncashmentInFinalSettlement.toString()&&this.btnCalcLeaveEncash_Click()}},{key:"RefreshLeaveEncashDetails",value:function(){if(this.EmpSeqNo>0&&(this.dgvLeaveEncash.Clear(),this.dsD.Tables[1].length>0)){this.dgvLeaveEncash.addEmptyRows(this.dsD.Tables[1].length);for(var t=0;t<this.dsD.Tables[1].length;t++){this.dgvLeaveEncash.Table[t+"_Tag"]=this.dsD.Tables[1][t].SNo.toString(),this.dgvLeaveEncash.Table[t].dgColLELeaveType=this.dsD.Tables[1][t].ComponentName.toString();var e=0;if(this.dsD.Tables[1][t].ComponentID.toString()==this.sVacTypeSeqNo)this.dgvLeaveEncash.Table[t].dgColLEAvailable=this.GetVacationAvailability(this.dtpDateOfRelieving.Date,parseInt(this.sVacTypeSeqNo));else{var a={dTaken:0,dAvail:0};this.GetLeavesTaken(this.dtpDateOfJoining.Date,this.dtpDateOfRelieving.Date,this.dsD.Tables[1][t].ComponentID.toString(),a),a.dTaken,e=a.dAvail,this.dgvLeaveEncash.Table[t].dgColLEAvailable=e}this.dgvLeaveEncash.Table[t].dgColLEMaxEncash=parseFloat(this.dgvLeaveEncash.Table[t].dgColLEAvailable)>parseFloat(this.dsD.Tables[1][t].MaxEncashDays)?this.dsD.Tables[1][t].MaxEncashDays.toString():this.dgvLeaveEncash.Table[t].dgColLEAvailable.toString(),this.dgvLeaveEncash.Table[t].dgColLEApplied=0,this.dgvLeaveEncash.Table[t].dgColLEAmount=(0).ToString(i.a.SessionManager.sPayrollDecimals),this.dgvLeaveEncash.Table[t].dgColLEAmount_Tag=this.dsD.Tables[1][t].EncashFormula.toString(),i.a.SessionManager.Preferences.ContainsKey("AutoCalcLeaveEncashmentInFinalSettlement")&&"True"==i.a.SessionManager.Preferences.AutoCalcLeaveEncashmentInFinalSettlement.toString()&&(this.dgvLeaveEncash.Table[t].dgColLEApplied=this.dgvLeaveEncash.Table[t].dgColLEMaxEncash)}this.dgvLeaveEncash.refreshDataView()}}},{key:"GetAvailableLeavesToEncash",value:function(t){t.SNo.toString();var e=t.ComponentID.toString();if(this.sVacTypeSeqNo!=e){var a=i.a.common.GetDataSet3("CRM022",this.dtpDocDate.Date.ToString("dd MMM yyyy"),new Date(this.dtpDocDate.Date.getFullYear(),parseInt(i.a.SessionManager.Preferences.LeaveYear.toString()),1).ToString("dd MMM yyyy"),this.EmpSeqNo+"~"+e);if(null!=a&&a.Tables.length>0&&a.Tables[0].length>0){var s=0,l=0;return a.Tables[1].length>0&&(s=parseFloat(a.Tables[1][0].NoOfDays.toString())),a.Tables[2].length>0&&(l=parseFloat(a.Tables[2][0].NoOfDays.toString())),0-s-l}return 0}try{return 0}catch(n){return this.ViewModel.DisplayMessage="Exception when Calculating Available leaves of Vacation Type",console.log(n),0}}},{key:"GetVacationAvailability",value:function(t,e){Logger.InfoLog("CommonMonthlyPayroll::Entering GetVacationAvailability()");var a=0,s=[];s.push(t.ToString("dd/MMM/yyyy")),s.push(this.EmpSeqNo),s.push(2),s.push(i.a.SessionManager.UserID),s.push(i.a.SessionManager.LanguageID);var l=i.a.common.GetDataSet_SP(s,"spPAY_GetRemainingVacationDays");if(null!=l&&l.Tables.length>0&&l.Tables[0].length>0){var n=l.Tables[0].filter((function(t){return t.LeaveType==e}));null!=n&&n.length>0&&(a=parseFloat(n[0].AvlblDays))}return Logger.InfoLog("CommonMonthlyPayroll::Exiting GetVacationAvailability()"),a.toString()}},{key:"GetLeavesTaken",value:function(t,e,a,s){s.dTaken=s.dAvail=0;var l=[];l.push(t.ToString("dd/MMM/yyyy")),l.push(e.ToString("dd/MMM/yyyy")),l.push(this.EmpSeqNo),l.push(a),l.push("Both"),l.push(i.a.SessionManager.UserID),l.push(i.a.SessionManager.LanguageID);var n=i.a.common.GetDataSet_SP(l,"spPAY_ExtGetAvlblNoofDays");null!=n&&n.Tables.length>0&&n.Tables[0].length>0&&(d.e.IsEmpty(n.Tables[0][0].LeavesTaken)||(s.dTaken=parseFloat(n.Tables[0][0].LeavesTaken)),d.e.IsEmpty(n.Tables[0][0].AvailableLeaves)||(s.dAvail=parseFloat(n.Tables[0][0].AvailableLeaves)))}},{key:"CalculateTotalAmount",value:function(){var t=0;t+="Partial"==this.cmbSettlementType.SelectedValue?parseFloat(this.txtPartialGratuityAmount.Text):parseFloat(this.txtAvailedGratuityAmount.Text)-this.dGratuityTaken,t+=parseFloat(this.txtLEAmount.Text),t+=parseFloat(this.txtUPSAmount.Text),t+=parseFloat(this.txtOthAddAmount.Text),t-=parseFloat(this.txtOthDedAmount.Text),t+=parseFloat(this.txtNPAmount.Text),t-=parseFloat(this.txtLoanBalAmount.Text),this.txtNetAmount.Text=t.ToString(i.a.SessionManager.sPayrollDecimals)}},{key:"GenerateSerialNos",value:function(t){for(var e=0;e<t.Table.length;e++)t.Table[e].Text=e+1;t.refreshDataView()}},{key:"LoadGrids",value:function(){var t;this.SetGridProperties(this.dgvLeaveEncash),(t=new p.a).DisplayMember="dgColLELeaveType",t.Header=this.GetResource("Leave Type",40095),t.ReadOnly=!0,this.dgvLeaveEncash.Columns.push(t),this.dgvLeaveEncash.TableColumns.push("dgColLELeaveType"),(t=new p.a).DisplayMember="dgColLEAvailable",t.Header=this.GetResource("Available Days",40095),t.ReadOnly=!0,t.TextAlign="Center",this.dgvLeaveEncash.Columns.push(t),this.dgvLeaveEncash.TableColumns.push("dgColLEAvailable"),(t=new p.a).DisplayMember="dgColLEMaxEncash",t.Header=this.GetResource("Max Encash Days",40095),t.ReadOnly=!0,t.TextAlign="Center",this.dgvLeaveEncash.Columns.push(t),this.dgvLeaveEncash.TableColumns.push("dgColLEMaxEncash"),(t=new p.a).DisplayMember="dgColLEApplied",t.Header=this.GetResource("Applied Days",40095),t.TextAlign="Center",this.dgvLeaveEncash.Columns.push(t),this.dgvLeaveEncash.TableColumns.push("dgColLEApplied"),(t=new p.a).DisplayMember="dgColLEAmount",t.Header=this.GetResource("Encash Amount",40095),t.ReadOnly=!0,t.TextAlign="Right",this.dgvLeaveEncash.Columns.push(t),this.dgvLeaveEncash.TableColumns.push("dgColLEAmount"),this.SetGridProperties(this.dgvUPS),(t=new p.a).DisplayMember="dgColUPSPayrollMonth",t.Header=this.GetResource("Payroll Month",40095),t.ReadOnly=!0,t.TextAlign="Center",this.dgvUPS.Columns.push(t),this.dgvUPS.TableColumns.push("dgColUPSPayrollMonth"),(t=new p.a).DisplayMember="dgColUPSMonthDays",t.Header=this.GetResource("Month Days",40095),t.ReadOnly=!0,t.TextAlign="Center",this.dgvUPS.Columns.push(t),this.dgvUPS.TableColumns.push("dgColUPSMonthDays"),(t=new p.a).DisplayMember="dgColUPSDaysAtt",t.Header=this.GetResource("Days Attended",40095),t.ReadOnly=!0,t.TextAlign="Center",this.dgvUPS.Columns.push(t),this.dgvUPS.TableColumns.push("dgColUPSDaysAtt"),(t=new p.a).DisplayMember="dgColUPSLOP",t.Header=this.GetResource("LOP Days",40095),t.ReadOnly=!0,t.TextAlign="Center",this.dgvUPS.Columns.push(t),this.dgvUPS.TableColumns.push("dgColUPSLOP"),(t=new p.a).DisplayMember="dgColUPSNetSal",t.Header=this.GetResource("Net Salary",40095),t.ReadOnly=!0,t.TextAlign="Right",this.dgvUPS.Columns.push(t),this.dgvUPS.TableColumns.push("dgColUPSNetSal"),(t=new p.a).DataType="LINK",t.DisplayMember="dgColUPSCalc",t.Header=this.GetResource("Calculate",40095),t.TextAlign="Center",t.Click.Subscribe(this,"dgvUPS_CellClick"),this.dgvUPS.Columns.push(t),this.dgvUPS.TableColumns.push("dgColUPSCalc"),this.SetGridProperties(this.dgvNoticePay),(t=new p.a).DataType="ComboBox",t.ValueBinding="dgColNPType",t.DisplayMember="Name",t.ValueMember="Value",t.Header=this.GetResource("Type",40095);var e=new Array;e.push(T.d.ComboBoxItems_2("Add","Add")),e.push(T.d.ComboBoxItems_2("Subtract","Subtract")),e.push(T.d.ComboBoxItems_2("None","None")),t.ComboData=e,this.dgvNoticePay.Columns.push(t),this.dgvNoticePay.TableColumns.push("dgColNPType"),(t=new p.a).DisplayMember="dgColNPPayrollMonth",t.Header=this.GetResource("Payroll Month",40095),t.ReadOnly=!0,t.TextAlign="Center",this.dgvNoticePay.Columns.push(t),this.dgvNoticePay.TableColumns.push("dgColNPPayrollMonth"),(t=new p.a).DisplayMember="dgColNPMonthDays",t.Header=this.GetResource("Month Days",40095),t.ReadOnly=!0,t.TextAlign="Center",this.dgvNoticePay.Columns.push(t),this.dgvNoticePay.TableColumns.push("dgColNPMonthDays"),(t=new p.a).DisplayMember="dgColNPDaysAtt",t.Header=this.GetResource("Days Attended",40095),t.ReadOnly=!0,t.TextAlign="Center",this.dgvNoticePay.Columns.push(t),this.dgvNoticePay.TableColumns.push("dgColNPDaysAtt"),(t=new p.a).DisplayMember="dgColNPLOP",t.Header=this.GetResource("LOP Days",40095),t.ReadOnly=!0,t.TextAlign="Center",this.dgvNoticePay.Columns.push(t),this.dgvNoticePay.TableColumns.push("dgColNPLOP"),(t=new p.a).DisplayMember="dgColNPNetSal",t.Header=this.GetResource("Net Salary",40095),t.ReadOnly=!0,t.TextAlign="Right",this.dgvNoticePay.Columns.push(t),this.dgvNoticePay.TableColumns.push("dgColNPNetSal"),(t=new p.a).DataType="LINK",t.DisplayMember="dgColNPCalc",t.Header=this.GetResource("Calculate",40095),t.TextAlign="Center",t.Click.Subscribe(this,"dgvNoticePay_CellClick"),this.dgvNoticePay.Columns.push(t),this.dgvNoticePay.TableColumns.push("dgColNPCalc"),this.SetGridProperties(this.dgvOthAdd),(t=new p.a).DisplayMember="dgColOthAddSNo",t.Header="#",t.ReadOnly=!0,t.TextAlign="Center",this.dgvOthAdd.Columns.push(t),this.dgvOthAdd.TableColumns.push("dgColOthAddSNo"),(t=new p.a).DataType="ComboBox",t.ValueBinding="dgColOthAddParticulars",t.DisplayMember="Name",t.ValueMember="NodeID",t.Header=this.GetResource("Particulars",40095),this.dgvOthAdd.Columns.push(t),this.dgvOthAdd.TableColumns.push("dgColOthAddParticulars"),(t=new p.a).DisplayMember="dgColOthAddAmount",t.Header=this.GetResource("Amount",40095),t.TextAlign="Right",this.dgvOthAdd.Columns.push(t),this.dgvOthAdd.TableColumns.push("dgColOthAddAmount"),(t=new p.a).DisplayMember="dgColOthAddRemarks",t.Header=this.GetResource("LineNarration",40095),this.dgvOthAdd.Columns.push(t),this.dgvOthAdd.TableColumns.push("dgColOthAddRemarks"),this.SetGridProperties(this.dgvOthDed),(t=new p.a).DisplayMember="dgColOthDedSNo",t.Header="#",t.ReadOnly=!0,t.TextAlign="Center",this.dgvOthDed.Columns.push(t),this.dgvOthDed.TableColumns.push("dgColOthDedSNo"),(t=new p.a).DataType="ComboBox",t.ValueBinding="dgColOthDedParticulars",t.DisplayMember="Name",t.ValueMember="NodeID",t.Header=this.GetResource("Particulars",40095),this.dgvOthDed.Columns.push(t),this.dgvOthDed.TableColumns.push("dgColOthDedParticulars"),(t=new p.a).DisplayMember="dgColOthDedAmount",t.Header=this.GetResource("Amount",40095),t.TextAlign="Right",this.dgvOthDed.Columns.push(t),this.dgvOthDed.TableColumns.push("dgColOthDedAmount"),(t=new p.a).DisplayMember="dgColOthDedRemarks",t.Header=this.GetResource("LineNarration",40095),this.dgvOthDed.Columns.push(t),this.dgvOthDed.TableColumns.push("dgColOthDedRemarks"),this.SetGridProperties(this.dgvLoanBal),(t=new p.a).DisplayMember="dgColLoanBalSNo",t.Header="#",t.ReadOnly=!0,t.TextAlign="Center",this.dgvLoanBal.Columns.push(t),this.dgvLoanBal.TableColumns.push("dgColLoanBalSNo"),(t=new p.a).DisplayMember="dgColLoanBalDocNo",t.Header=this.GetResource("Loan Doc. No.",40095),t.ReadOnly=!0,this.dgvLoanBal.Columns.push(t),this.dgvLoanBal.TableColumns.push("dgColLoanBalDocNo"),(t=new p.a).DisplayMember="dgColLoanBalLoanType",t.Header=this.GetResource("Loan Type",40095),t.ReadOnly=!0,this.dgvLoanBal.Columns.push(t),this.dgvLoanBal.TableColumns.push("dgColLoanBalLoanType"),(t=new p.a).DisplayMember="dgColLoanBalApprAmount",t.Header=this.GetResource("Approved Amount",40095),t.ReadOnly=!0,t.TextAlign="Right",this.dgvLoanBal.Columns.push(t),this.dgvLoanBal.TableColumns.push("dgColLoanBalApprAmount"),(t=new p.a).DisplayMember="dgColLoanBalAmountPaid",t.Header=this.GetResource("Amount Paid",40095),t.ReadOnly=!0,t.TextAlign="Right",this.dgvLoanBal.Columns.push(t),this.dgvLoanBal.TableColumns.push("dgColLoanBalAmountPaid"),(t=new p.a).DisplayMember="dgColLoanBalBalAmount",t.Header=this.GetResource("Balance Amount",40095),t.ReadOnly=!0,t.TextAlign="Right",this.dgvLoanBal.Columns.push(t),this.dgvLoanBal.TableColumns.push("dgColLoanBalBalAmount"),(t=new p.a).DisplayMember="dgColLoanBalRemarks",t.Header=this.GetResource("LineNarration",40095),this.dgvLoanBal.Columns.push(t),this.dgvLoanBal.TableColumns.push("dgColLoanBalRemarks"),(t=new p.a).DataType="LINK",t.DisplayMember="dgColLoanBalCalc",t.Header=this.GetResource("Pay",40095),t.TextAlign="Center",this.dgvLoanBal.Columns.push(t),this.dgvLoanBal.TableColumns.push("dgColLoanBalCalc")}},{key:"SetGridProperties",value:function(t){t.Table=[],t.Columns=[]}},{key:"Calculate_Click",value:function(t){switch(t){case"Gratuity":this.btnCalcGratuity_Click();break;case"LeaveEncash":this.btnCalcLeaveEncash_Click();break;case"Clear":this.Clear_Click();break;case"Save":this.Save_Click();break;case"Delete":this.Delete_Click();break;case"Previous":this.Previous_Click();break;case"Next":this.Next_Click();break;case"Approve":this.Approve_Click()}return""}},{key:"Approve_Click",value:function(){var t=new v.a(this.CostCenterID,this.ViewModel.DocID,null,this.ViewModel);i.a.page.ShowDialog(t,I.a,{ShowCenter:!0,Title:i.a.GetResource("ApproveReject")})}},{key:"Next_Click",value:function(){this.iCurDocNo=parseInt(this.txtDocNo.Text.Trim()),this.LoadDocument(this.iCurDocNo+1)}},{key:"Previous_Click",value:function(){this.iCurDocNo=parseInt(this.txtDocNo.Text.Trim()),this.iCurDocNo>1&&this.LoadDocument(this.iCurDocNo-1)}},{key:"Delete_Click",value:function(){if(""!=this.sDocNo&&parseInt(this.sDocNo)>0){if(confirm("Are you sure want to Delete.?")){var t=0,e=[];e.push(40095),e.push(this.ViewModel.DocID),e.push(1);var a=i.a.document.DeleteSelectedRows(e,t);this.ViewModel.DisplayMessage=a.Message,t=a.RetValue,this.ViewModel.MessageVisibility=!0,this.Clear_Click()}}else this.ViewModel.DisplayMessage="Select any saved Document to Delete",this.ViewModel.MessageVisibility=!0}},{key:"Save_Click",value:function(){var t=this;if(this.ValidateSave()){var e=[];e.push(this.CostCenterID),e.push(this.ViewModel.DocID),e.push(""),e.push(this.txtDocNo.Text),e.push(this.dtpDocDate.Date.ToString("dd/MMM/yyyy")),e.push(this.dtpDocDate.Date.ToString("dd/MMM/yyyy")),e.push(""),e.push(this.GetDocumentXML()),e.push(""),e.push(""),e.push(this.ViewModel.ViewAttachments.GetXML()),e.push(this.GetActivityXML()),e.push("false"),i.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==i.a.SessionManager.Preferences.EnableLocationWise.toString()?e.push(i.a.SessionManager.LocationID>0?i.a.SessionManager.LocationID:1):e.push(0),i.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==i.a.SessionManager.Preferences.EnableDivisionWise.toString()?e.push(i.a.SessionManager.DivisionID>0?i.a.SessionManager.DivisionID:1):e.push(0),e.push(this.ViewModel.WID),e.push(i.a.SessionManager.RoleID),e.push(""),e.push(0),e.push(0),e.push(i.a.SessionManager.CompanyGUID),e.push(i.a.SessionManager.UserName),e.push(i.a.SessionManager.UserID),e.push(i.a.SessionManager.LanguageID),e.push(i.a.SessionManager.IsOffline);var a=0,s="";i.a.document.SetTempInvDocument(e).subscribe((function(e){a=e.obj;var l=e;if(s=null!=l&&l.Tables.length>0&&l.Tables[l.Tables.length-1].length>0&&l.Columns[l.Tables.length-1].Contains("ErrorMessage")?l.Tables[l.Tables.length-1][0].ErrorMessage.toString():"Problem in processing your request,Please contact administrator.",a>0){var n=[];n.push(a),n.push(i.a.SessionManager.UserID),n.push(i.a.SessionManager.LanguageID);var o=t.ViewModel.PostApplyLeaves(parseInt(i.a.SessionManager.CompanyIndex),n,"spPAY_PostApplyLeaves");null!=o&&o.Tables.length>0&&(s="Problem in processing your request,Please contact administrator."),t.ViewModel.SelectedEmpID=t.EmpSeqNo,t.Clear_Click()}else null!=l&&l.Tables.length>0&&l.Tables[l.Tables.length-1].length>0&&l.Columns[l.Tables.length-1].Contains("ServerMessage")&&(a="-407"==l.Tables[l.Tables.length-1][0].ServerMessage.toString()?-407:-12345);t.ViewModel.DisplayMessage=s,t.ViewModel.MessageVisibility=!0}))}}},{key:"GetActivityXML",value:function(){var t="<XML   ";return"Approve"==this.ViewModel.sCmdParameter&&(t+=' AppRejDate="'+Date.Today().ToString("dd/MMM/yyyy")+'"'),t+=" >",t+=" </XML> "}},{key:"GetDocumentXML",value:function(){var t,e="",a="",s="",l="",n="",o="";if(new Array,null!=i.a.SessionManager.dtDocDefAccs&&(null!=(t=i.a.SessionManager.dtDocDefAccs.filter((function(t){return 40095==t.CostCenterID&&"CreditAccount"==t.SysColumnName})))&&t.length>0&&null!=t[0].UserDefaultValue&&""!=t[0].UserDefaultValue.toString().Trim()&&(n=t[0].UserDefaultValue.toString()),null!=(t=i.a.SessionManager.dtDocDefAccs.filter((function(t){return 40095==t.CostCenterID&&"DebitAccount"==t.SysColumnName})))&&t.length>0&&null!=t[0].UserDefaultValue&&""!=t[0].UserDefaultValue.toString().Trim()&&(o=t[0].UserDefaultValue.toString())),a+='" ProductID="'+this.DefProdID+'" Quantity="0" Unit="1" UOMConversion="1" UOMConvertedQty="0" Rate="0" Gross="0" IsQtyIgnored="1" AverageRate="0" StockValue="0" StockValueFC="0" RefNO="" BillDate="'+i.a.SessionManager.PayrollMonth.ToString("dd/MMM/yyyy")+'" CurrencyID="1" ExchangeRate="1" DebitAccount="'+o+'" CreditAccount="'+n+'" CommonNarration="'+d.e.EncodeXML(this.txtRemarks.Text),null!=this.dgvGratuity&&this.dgvGratuity.Table.length>0)for(var r=1,h=0;h<this.dgvGratuity.Table.length;h++)e+="\x11",e+="<Row>",e+="<AccountsXML></AccountsXML>",e+='<Transactions DocSeqNo="1" VoucherType="0" LinkedInvDocDetailsID="0" LinkedFieldName="" LineNarration="Gratuity',e+=(l="").length>0?'" DocDetailsID="'+l:'" DocDetailsID="',e+=a.toString()+'" ></Transactions>',s='<Numeric Query="',s+=" dcNum1="+parseFloat(this.txtGratuityAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum1="+parseFloat(this.txtGratuityAmount.Text).toString().Replace(",","")+",",s+=" dcNum2="+parseFloat(this.txtAvailedGratuityAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum2="+parseFloat(this.txtAvailedGratuityAmount.Text).toString().Replace(",","")+",",s+=" dcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",s+=" dcNum4="+parseFloat(this.txtPartialGratuityAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum4="+parseFloat(this.txtPartialGratuityAmount.Text).toString().Replace(",","")+",",e+=s+='" ></Numeric>',s='<Alpha Query="',s+=" dcAlpha1='1',",s+=" dcAlpha2='"+r+"',",s+=" dcAlpha3='"+this.dtpDateOfRelieving.Date.ToString("dd/MMM/yyyy")+"',",s+=" dcAlpha4='"+this.lblGratuityServiceDays+"',",s+=" dcAlpha5='"+this.lblGratuityLOPDays+"',",s+=" dcAlpha6='"+this.lblGratuityBalDays+"',",s+=" dcAlpha7='"+this.lblGratuityTotalGrDays+"',",s+=" dcAlpha8='"+this.GratuityRemarks.Text+"',",s+=" dcAlpha9='"+this.GratuityGrade+"',",s+=" dcAlpha10='"+this.cmbSettlementType.Text+"',",s+=" dcAlpha11='"+this.cmbResignType.SelectedValue+"',",s+=" dcAlpha12='"+this.chkCalcBasedOnLastSal.IsChecked+"',",s+=" dcAlpha13='"+this.chkCalcBasedOnActDays.IsChecked+"',",s+=" dcAlpha14='"+this.lblGratuityTotalDays+"',",s+=" dcAlpha15='"+this.dgvGratuity.Table[h][this.dgvGratuity.TableColumns[1]]+"',",s+=" dcAlpha16='"+this.dgvGratuity.Table[h+1][this.dgvGratuity.TableColumns[2]]+"',",s+=" dcAlpha17='"+this.dgvGratuity.Table[h+1][this.dgvGratuity.TableColumns[4]]+"',",s+=" dcAlpha18='"+this.dgvGratuity.Table[h+2][this.dgvGratuity.TableColumns[1]]+"',",s+=" dcAlpha19='"+this.dgvGratuity.Table[h+3][this.dgvGratuity.TableColumns[1]]+"',",s+=" dcAlpha20='"+this.dgvGratuity.Table[h+3][this.dgvGratuity.TableColumns[4]]+"',",s+=" dcAlpha21='"+this.dgvGratuity.Table[h+5][this.dgvGratuity.TableColumns[1]]+"',",s+=" dcAlpha22='"+this.dgvGratuity.Table[h+5][this.dgvGratuity.TableColumns[2]]+"',",s+=" dcAlpha23='"+this.dgvGratuity.Table[h+5][this.dgvGratuity.TableColumns[3]]+"',",s+=" dcAlpha24='"+this.dgvGratuity.Table[h+6][this.dgvGratuity.TableColumns[1]]+"',",s+=" dcAlpha25='"+this.dgvGratuity.Table[h+6][this.dgvGratuity.TableColumns[2]]+"',",s+=" dcAlpha26='"+this.dgvGratuity.Table[h+6][this.dgvGratuity.TableColumns[3]]+"',",s+=" dcAlpha27='"+this.dgvGratuity.Table[h+6][this.dgvGratuity.TableColumns[5]]+"',",s+=" dcAlpha28='"+this.dgvGratuity.Table[h+6][this.dgvGratuity.TableColumns[7]]+"',",s+=" dcAlpha29='"+this.dgvGratuity.Table[h+7][this.dgvGratuity.TableColumns[5]]+"',",s+=" dcAlpha30='"+this.dgvGratuity.Table[h+3][this.dgvGratuity.TableColumns[6]]+"',",s+=" dcAlpha31='"+this.GratuityDocID+"',",s+=" dcAlpha32='"+this.lblGratuityTaken+"',",e+=s+='" ></Alpha>',s='<CostCenters Query="',s+=" dcCCNID51="+this.EmpSeqNo+",",s+=" dcCCNID53="+this.EmpGrade+",",e+=s+='" ></CostCenters>',e+="<EXTRAXML></EXTRAXML>",e+="</Row>",h+=8,r++;if(null!=this.dgvLeaveEncash&&this.dgvLeaveEncash.Table.length>0)for(var c=1,u=0;u<this.dgvLeaveEncash.Table.length;u++)0!=d.e.Double(this.dgvLeaveEncash.Table[u].dgColLEAmount)&&(e+="\x11",e+="<Row>",e+="<AccountsXML></AccountsXML>",e+='<Transactions DocSeqNo="1" VoucherType="0" LinkedInvDocDetailsID="0" LinkedFieldName="" LineNarration="Leave Encashment',e+=(l="").length>0?'" DocDetailsID="'+l:'" DocDetailsID="',e+=a.toString()+'" ></Transactions>',s='<Numeric Query="',s+=" dcNum1="+parseFloat(this.txtLEAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum1="+parseFloat(this.txtLEAmount.Text).toString().Replace(",","")+",",s+=" dcNum2="+parseFloat(this.txtCumLeaveSalBalAmt.Text).toString().Replace(",","")+",",s+=" dcCalcNum2="+parseFloat(this.txtCumLeaveSalBalAmt.Text).toString().Replace(",","")+",",s+=" dcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",e+=s+='" ></Numeric>',s='<Alpha Query="',s+=" dcAlpha1='2',",s+=" dcAlpha2='"+c+"',",s+=" dcAlpha3='"+this.dtpDateOfRelieving.Date.ToString("dd/MMM/yyyy")+"',",s+=" dcAlpha8='"+this.LeaveRemarks.Text+"',",s+=" dcAlpha10='"+this.cmbSettlementType.Text+"',",s+=" dcAlpha11='"+this.dgvLeaveEncash.Table[u+"_Tag"].toString()+"',",s+=" dcAlpha12='"+this.dgvLeaveEncash.Table[u].dgColLELeaveType+"',",s+=" dcAlpha13='"+this.dgvLeaveEncash.Table[u].dgColLEAvailable+"',",s+=" dcAlpha14='"+this.dgvLeaveEncash.Table[u].dgColLEMaxEncash+"',",s+=" dcAlpha15='"+this.dgvLeaveEncash.Table[u].dgColLEApplied+"',",s+=" dcAlpha16='"+this.dgvLeaveEncash.Table[u].dgColLEAmount.toString().Replace(",","")+"',",e+=s+='" ></Alpha>',s='<CostCenters Query="',s+=" dcCCNID51="+this.EmpSeqNo+",",s+=" dcCCNID53="+this.EmpGrade+",",e+=s+='" ></CostCenters>',e+="<EXTRAXML></EXTRAXML>",e+="</Row>",c++);if(null!=this.dgvUPS&&this.dgvUPS.Table.length>0)for(var g=1,m=0;m<this.dgvUPS.Table.length;m++)d.e.Double(this.dgvUPS.Table[m].dgColUPSNetSal)>0&&(e+="\x11",e+="<Row>",e+="<AccountsXML></AccountsXML>",e+='<Transactions DocSeqNo="1" VoucherType="0" LinkedInvDocDetailsID="0" LinkedFieldName="" LineNarration="Un-Processed Salary',e+=(l="").length>0?'" DocDetailsID="'+l:'" DocDetailsID="',e+=a.toString()+'" ></Transactions>',s='<Numeric Query="',s+=" dcNum1="+parseFloat(this.txtUPSAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum1="+parseFloat(this.txtUPSAmount.Text).toString().Replace(",","")+",",s+=" dcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",e+=s+='" ></Numeric>',s='<Alpha Query="',s+=" dcAlpha1='3',",s+=" dcAlpha2='"+g+"',",s+=" dcAlpha3='"+this.dtpDateOfRelieving.Date.ToString("dd/MMM/yyyy")+"',",s+=" dcAlpha8='"+this.UPSRemarks.Text+"',",s+=" dcAlpha10='"+this.cmbSettlementType.Text+"',",s+=" dcAlpha11='"+this.dgvUPS.Table[m].dgColUPSPayrollMonth+"',",s+=" dcAlpha12='"+this.dgvUPS.Table[m].dgColUPSMonthDays+"',",s+=" dcAlpha13='"+this.dgvUPS.Table[m].dgColUPSDaysAtt+"',",s+=" dcAlpha14='"+this.dgvUPS.Table[m].dgColUPSLOP+"',",s+=" dcAlpha15='"+this.dgvUPS.Table[m].dgColUPSNetSal.toString().Replace(",","")+"',",e+=s+='" ></Alpha>',s='<CostCenters Query="',s+=" dcCCNID51="+this.EmpSeqNo+",",s+=" dcCCNID53="+this.EmpGrade+",",e+=s+='" ></CostCenters>',e+="<EXTRAXML></EXTRAXML>",e+="</Row>",g++);if(null!=this.dgvNoticePay&&this.dgvNoticePay.Table.length>0)for(var b=1,D=0;D<this.dgvNoticePay.Table.length;D++)d.e.Double(this.dgvNoticePay.Table[D].dgColNPNetSal)>0&&(e+="\x11",e+="<Row>",e+="<AccountsXML></AccountsXML>",e+='<Transactions DocSeqNo="1" VoucherType="0" LinkedInvDocDetailsID="0" LinkedFieldName="" LineNarration="Notice Pay',e+=(l="").length>0?'" DocDetailsID="'+l:'" DocDetailsID="',e+=a.toString()+'" ></Transactions>',s='<Numeric Query="',s+=" dcNum1="+parseFloat(this.txtNPAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum1="+parseFloat(this.txtNPAmount.Text).toString().Replace(",","")+",",s+=" dcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",e+=s+='" ></Numeric>',s='<Alpha Query="',s+=" dcAlpha1='4',",s+=" dcAlpha2='"+b+"',",s+=" dcAlpha3='"+this.dtpDateOfRelieving.Date.ToString("dd/MMM/yyyy")+"',",s+=" dcAlpha8='"+this.NoticePayRemarks.Text+"',",s+=" dcAlpha10='"+this.cmbSettlementType.Text+"',",s+=" dcAlpha11='"+this.dgvNoticePay.Table[D].dgColNPPayrollMonth+"',",s+=" dcAlpha12='"+this.dgvNoticePay.Table[D].dgColNPMonthDays+"',",s+=" dcAlpha13='"+this.dgvNoticePay.Table[D].dgColNPDaysAtt+"',",s+=" dcAlpha14='"+this.dgvNoticePay.Table[D].dgColNPLOP+"',",s+=" dcAlpha15='"+this.dgvNoticePay.Table[D].dgColNPNetSal.toString().Replace(",","")+"',",s+=" dcAlpha16='"+this.dgvNoticePay.Table[D].dgColNPType+"',",e+=s+='" ></Alpha>',s='<CostCenters Query="',s+=" dcCCNID51="+this.EmpSeqNo+",",s+=" dcCCNID53="+this.EmpGrade+",",e+=s+='" ></CostCenters>',e+="<EXTRAXML></EXTRAXML>",e+="</Row>",b++);if(null!=this.dgvOthAdd&&this.dgvOthAdd.Table.length>0)for(var p=1,T=0;T<this.dgvOthAdd.Table.length;T++)!d.e.IsEmpty(this.dgvOthAdd.Table[T].dgColOthAddParticulars)&&d.e.Double(this.dgvOthAdd.Table[T].dgColOthAddAmount)>0&&(e+="\x11",e+="<Row>",e+="<AccountsXML></AccountsXML>",e+='<Transactions DocSeqNo="1" VoucherType="0" LinkedInvDocDetailsID="0" LinkedFieldName="" LineNarration="Other Additions',e+=(l="").length>0?'" DocDetailsID="'+l:'" DocDetailsID="',e+=a.toString()+'" ></Transactions>',s='<Numeric Query="',s+=" dcNum1="+parseFloat(this.txtOthAddAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum1="+parseFloat(this.txtOthAddAmount.Text).toString().Replace(",","")+",",s+=" dcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",e+=s+='" ></Numeric>',s='<Alpha Query="',s+=" dcAlpha1='5',",s+=" dcAlpha2='"+p+"',",s+=" dcAlpha3='"+this.dtpDateOfRelieving.Date.ToString("dd/MMM/yyyy")+"',",s+=" dcAlpha8='"+this.OAddRemarks.Text+"',",s+=" dcAlpha10='"+this.cmbSettlementType.Text+"',",s+=" dcAlpha11='"+this.dgvOthAdd.Table[T].dgColOthAddParticulars+"',",s+=" dcAlpha12='"+this.dgvOthAdd.Table[T].dgColOthAddAmount.toString().Replace(",","")+"',",d.e.IsEmpty(this.dgvOthAdd.Table[T].dgColOthAddRemarks)||(s+=" dcAlpha13='"+this.dgvOthAdd.Table[T].dgColOthAddRemarks+"',"),e+=s+='" ></Alpha>',s='<CostCenters Query="',s+=" dcCCNID51="+this.EmpSeqNo+",",s+=" dcCCNID53="+this.EmpGrade+",",e+=s+='" ></CostCenters>',e+="<EXTRAXML></EXTRAXML>",e+="</Row>",p++);if(null!=this.dgvOthDed&&this.dgvOthDed.Table.length>0)for(var y=1,C=0;C<this.dgvOthDed.Table.length;C++)!d.e.IsEmpty(this.dgvOthDed.Table[C].dgColOthDedParticulars)&&d.e.Double(this.dgvOthDed.Table[C].dgColOthDedAmount)>0&&(e+="\x11",e+="<Row>",e+="<AccountsXML></AccountsXML>",e+='<Transactions DocSeqNo="1" VoucherType="0" LinkedInvDocDetailsID="0" LinkedFieldName="" LineNarration="Other Deductions',e+=(l="").length>0?'" DocDetailsID="'+l:'" DocDetailsID="',e+=a.toString()+'" ></Transactions>',s='<Numeric Query="',s+=" dcNum1="+parseFloat(this.txtOthDedAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum1="+parseFloat(this.txtOthDedAmount.Text).toString().Replace(",","")+",",s+=" dcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",e+=s+='" ></Numeric>',s='<Alpha Query="',s+=" dcAlpha1='6',",s+=" dcAlpha2='"+y+"',",s+=" dcAlpha3='"+this.dtpDateOfRelieving.Date.ToString("dd/MMM/yyyy")+"',",s+=" dcAlpha8='"+this.ODedRemarks.Text+"',",s+=" dcAlpha10='"+this.cmbSettlementType.Text+"',",s+=" dcAlpha11='"+this.dgvOthDed.Table[C].dgColOthDedParticulars+"',",s+=" dcAlpha12='"+this.dgvOthDed.Table[C].dgColOthDedAmount.toString().Replace(",","")+"',",null!=this.dgvOthDed.Table[C].dgColOthDedRemarks&&""!=this.dgvOthDed.Table[C].dgColOthDedRemarks.toString().Trim()&&(s+=" dcAlpha13='"+this.dgvOthDed.Table[C].dgColOthDedRemarks+"',"),e+=s+='" ></Alpha>',s='<CostCenters Query="',s+=" dcCCNID51="+this.EmpSeqNo+",",s+=" dcCCNID53="+this.EmpGrade+",",e+=s+='" ></CostCenters>',e+="<EXTRAXML></EXTRAXML>",e+="</Row>",y++);if(null!=this.dgvLoanBal&&this.dgvLoanBal.Table.length>0)for(var v=1,I=0;I<this.dgvLoanBal.Table.length;I++)d.e.IsEmpty(this.dgvLoanBal.Table[I].dgColLoanBalDocNo_Tag)||(e+="\x11",e+="<Row>",e+="<AccountsXML></AccountsXML>",e+='<Transactions DocSeqNo="1" VoucherType="0" LinkedInvDocDetailsID="0" LinkedFieldName="" LineNarration="Loan Balances',e+=(l="").length>0?'" DocDetailsID="'+l:'" DocDetailsID="',e+=a.toString()+'" ></Transactions>',s='<Numeric Query="',s+=" dcNum1="+parseFloat(this.txtLoanBalAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum1="+parseFloat(this.txtLoanBalAmount.Text).toString().Replace(",","")+",",s+=" dcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",s+=" dcCalcNum3="+parseFloat(this.txtNetAmount.Text).toString().Replace(",","")+",",e+=s+='" ></Numeric>',s='<Alpha Query="',s+=" dcAlpha1='7',",s+=" dcAlpha2='"+v+"',",s+=" dcAlpha3='"+this.dtpDateOfRelieving.Date.ToString("dd/MMM/yyyy")+"',",s+=" dcAlpha8='"+this.LoanRemarks.Text+"',",s+=" dcAlpha10='"+this.cmbSettlementType.Text+"',",s+=" dcAlpha11='"+this.dgvLoanBal.Table[I].dgColLoanBalDocNo+"',",s+=" dcAlpha12='"+this.dgvLoanBal.Table[I].dgColLoanBalDocNo_Tag+"',",s+=" dcAlpha13='"+this.dgvLoanBal.Table[I].dgColLoanBalLoanType_Tag+"',",s+=" dcAlpha14='"+this.dgvLoanBal.Table[I].dgColLoanBalApprAmount.toString().Replace(",","")+"',",s+=" dcAlpha15='"+this.dgvLoanBal.Table[I].dgColLoanBalAmountPaid.toString().Replace(",","")+"',",s+=" dcAlpha16='"+this.dgvLoanBal.Table[I].dgColLoanBalBalAmount.toString().Replace(",","")+"',",s+=" dcAlpha17='"+this.dgvLoanBal.Table[I].dgColLoanBalSNo_Tag+"',",e+=s+='" ></Alpha>',s='<CostCenters Query="',s+=" dcCCNID51="+this.EmpSeqNo+",",s+=" dcCCNID53="+this.EmpGrade+",",e+=s+='" ></CostCenters>',e+="<EXTRAXML></EXTRAXML>",e+="</Row>",v++);return e.toString()}},{key:"GetCalcXML",value:function(){var t="";if(t+="<Rows>",this.dgvGratuity.Table.length>0)for(var e=1,a=0;a<this.dgvGratuity.Table.length;a++)t+='<Row DType="1" SubDType="'+e+'" Field1="'+this.cmbResignType.SelectedValue+'" Field2="'+this.chkCalcBasedOnLastSal.IsChecked+'" Field3="'+this.chkCalcBasedOnActDays.IsChecked+'" Field4="'+this.lblGratuityTotalDays+'" Field5="'+this.dgvGratuity.Table[a][this.dgvGratuity.TableColumns[1]]+'" Field6="'+this.dgvGratuity.Table[a+1][this.dgvGratuity.TableColumns[2]]+'" Field7="'+this.dgvGratuity.Table[a+1][this.dgvGratuity.TableColumns[4]]+'" Field8="'+this.dgvGratuity.Table[a+2][this.dgvGratuity.TableColumns[1]]+'" Field9="'+this.dgvGratuity.Table[a+3][this.dgvGratuity.TableColumns[1]]+'" Field10="'+this.dgvGratuity.Table[a+3][this.dgvGratuity.TableColumns[4]]+'" Field11="'+this.dgvGratuity.Table[a+5][this.dgvGratuity.TableColumns[1]]+'" Field12="'+this.dgvGratuity.Table[a+5][this.dgvGratuity.TableColumns[2]]+'" Field13="'+this.dgvGratuity.Table[a+5][this.dgvGratuity.TableColumns[3]]+'" Field14="'+this.dgvGratuity.Table[a+6][this.dgvGratuity.TableColumns[1]]+'" Field15="'+this.dgvGratuity.Table[a+6][this.dgvGratuity.TableColumns[2]]+'" Field16="'+this.dgvGratuity.Table[a+6][this.dgvGratuity.TableColumns[3]]+'" Field17="'+this.dgvGratuity.Table[a+6][this.dgvGratuity.TableColumns[5]]+'" Field18="'+this.dgvGratuity.Table[a+6][this.dgvGratuity.TableColumns[7]]+'" Field19="'+this.dgvGratuity.Table[a+7][this.dgvGratuity.TableColumns[5]]+'" Field20="'+this.dgvGratuity.Table[a+3][this.dgvGratuity.TableColumns[6]],t+='" />',a+=8,e++;if(this.dgvLeaveEncash.Table.length>0)for(var s=0;s<this.dgvLeaveEncash.Table.length;s++)0!=d.e.Double(this.dgvLeaveEncash.Table[s].dgColLEAmount)&&(t+='<Row DType="2" SubDType="'+s+'1" Field1="'+this.dgvLeaveEncash.Table[s+"_Tag"].toString()+'" Field2="'+this.dgvLeaveEncash.Table[s].dgColLELeaveType+'" Field3="'+this.dgvLeaveEncash.Table[s].dgColLEAvailable+'" Field4="'+this.dgvLeaveEncash.Table[s].dgColLEMaxEncash+'" Field5="'+this.dgvLeaveEncash.Table[s].dgColLEApplied+'" Field6="'+this.dgvLeaveEncash.Table[s].dgColLEAmount,t+='" />');if(this.dgvUPS.Table.length>0)for(var i=0;i<this.dgvUPS.Table.length;i++)d.e.Double(this.dgvUPS.Table[i].dgColUPSNetSal)>0&&(t+='<Row DType="3" SubDType="'+i+'1" Field1="'+this.dgvUPS.Table[i].dgColUPSPayrollMonth+'" Field2="'+this.dgvUPS.Table[i].dgColUPSMonthDays+'" Field3="'+this.dgvUPS.Table[i].dgColUPSDaysAtt+'" Field4="'+this.dgvUPS.Table[i].dgColUPSLOP+'" Field5="'+this.dgvUPS.Table[i].dgColUPSNetSal,t+='" />');if(this.dgvNoticePay.Table.length>0)for(var l=0;l<this.dgvNoticePay.Table.length;l++)d.e.Double(this.dgvNoticePay.Table[l].dgColNPNetSal)>0&&(t+='<Row DType="4" SubDType="'+l+'1" Field1="'+this.dgvNoticePay.Table[l].dgColNPPayrollMonth+'" Field2="'+this.dgvNoticePay.Table[l].dgColNPMonthDays+'" Field3="'+this.dgvNoticePay.Table[l].dgColNPDaysAtt+'" Field4="'+this.dgvNoticePay.Table[l].dgColNPLOP+'" Field5="'+this.dgvNoticePay.Table[l].dgColNPNetSal+'" Field6="'+this.dgvNoticePay.Table[l].dgColNPType,t+='" />');if(this.dgvOthAdd.Table.length>0)for(var n=0;n<this.dgvOthAdd.Table.length;n++)!d.e.IsEmpty(this.dgvOthAdd.Table[n].dgColOthAddParticulars)&&d.e.Double(this.dgvOthAdd.Table[n].dgColOthAddAmount)>0&&(t+='<Row DType="5" SubDType="'+n+'1" Field1="'+this.dgvOthAdd.Table[n].dgColOthAddParticulars+'" Field2="'+this.dgvOthAdd.Table[n].dgColOthAddAmount,d.e.IsEmpty(this.dgvOthAdd.Table[n].dgColOthAddRemarks)||(t+='" Field3="'+this.dgvOthAdd.Table[n].dgColOthAddRemarks),t+='" />');if(this.dgvOthDed.Table.length>0)for(var o=0;o<this.dgvOthDed.Table.length;o++)!d.e.IsEmpty(this.dgvOthDed.Table[o].dgColOthDedParticulars)&&d.e.Double(this.dgvOthDed.Table[o].dgColOthDedAmount)>0&&(t+='<Row DType="6" SubDType="'+o+'1" Field1="'+this.dgvOthDed.Table[o].dgColOthDedParticulars+'" Field2="'+this.dgvOthDed.Table[o].dgColOthDedAmount,d.e.IsEmpty(this.dgvOthDed.Table[o].dgColOthDedRemarks)||(t+='" Field3="'+this.dgvOthDed.Table[o].dgColOthDedRemarks),t+='" />');if(this.dgvLoanBal.Table.length>0)for(var r=0;r<this.dgvLoanBal.Table.length;r++)d.e.IsEmpty(this.dgvLoanBal.Table[r].dgColLoanBalDocNo_Tag)||(t+='<Row DType="7" SubDType="'+r+'1" Field1="'+this.dgvLoanBal.Table[r].dgColLoanBalDocNo+'" Field2="'+this.dgvLoanBal.Table[r].dgColLoanBalDocNo_Tag+'" Field3="'+this.dgvLoanBal.Table[r].dgColLoanBalLoanType_Tag+'" Field4="'+this.dgvLoanBal.Table[r].dgColLoanBalApprAmount+'" Field5="'+this.dgvLoanBal.Table[r].dgColLoanBalAmountPaid+'" Field6="'+this.dgvLoanBal.Table[r].dgColLoanBalBalAmount+'" Field7="'+this.dgvLoanBal.Table[r].dgColLoanBalSNo_Tag,t+='" />');return(t+="</Rows>").toString()}},{key:"ValidateSave",value:function(){if(0==this.EmpSeqNo)return this.ViewModel.DisplayMessage="Please Select Employee.",this.EmployeeList.SetFocus=!0,!1;if(null!=this.dsD&&this.dsD.Tables[0].length>0&&"Final"==this.cmbSettlementType.SelectedValue&&(9e3==new Date(this.dsD.Tables[0][0].DORelieve).getFullYear()||null==this.dsD.Tables[0][0].DORelieve.toString()||""==this.dsD.Tables[0][0].DORelieve.toString()||null==this.dsD.Tables[0][0].DORelieve||""==d.e.String(this.dsD.Tables[0][0].ResignStatus)||"Posted"!=d.e.String(this.dsD.Tables[0][0].ResignStatus)))return this.ViewModel.DisplayMessage="Selected Employee not yet Resigned, Please check",!1;if(this.dgvLoanBal.Table.length>0)for(var t=0;t<this.dgvLoanBal.Table.length;t++)if(d.e.IsEmpty(this.dgvLoanBal.Table[t].dgColLoanBalCalc_Tag))return this.ViewModel.DisplayMessage="Please pay pending Loan Balance amounts.",!1;return null!=i.a.SessionManager.Preferences.PayrollProduct&&""!=i.a.SessionManager.Preferences.PayrollProduct&&(this.DefProdID=parseInt(i.a.SessionManager.Preferences.PayrollProduct)),0!=this.DefProdID||(this.ViewModel.DisplayMessage="Select any Default Payroll Product at Global Preferences",!1)}},{key:"btnCalcGratuity_Click",value:function(){var t=this;this.dgvGratuity.Columns.Clear(),this.dgvGratuity.TableColumns.Clear(),this.dgvGratuity.Clear();var e={dTotGratuitySal:0};if(this.dEarnedGrDays=0,this.isMaxDaysExceded=!1,this.dTotGratuityDays=0,!(this.EmpSeqNo>0))return this.ViewModel.DisplayMessage="Select any Employee",void(this.EmployeeList.SetFocus=!0);var a=i.a.common.GetDataSet3("CRM023",this.EmpSeqNo.toString(),this.dtpDateOfRelieving.Date.Date().ToString("dd MMM yyyy"));if(null!=a&&a.Tables.length>0){if(this.dLOPDays=0,this.dLOPDays=parseFloat(this.dsD.Tables[0][0].OPLOPDays),a.Tables[2].length>0)if(null!=this.dtEdit&&this.dtEdit.length>0){var s=this.dtEdit.filter((function(t){return"1"==t.dcAlpha1&&"1"==t.dcAlpha2}));null!=s&&s.length>0&&(this.dGratuityTaken=parseFloat(""==d.e.String(s[0].dcAlpha32)?"0":s[0].dcAlpha32))}else this.dGratuityTaken=parseFloat(a.Tables[2][0].GratuityTaken);if(!(a.Tables[0].length>0))return void(this.ViewModel.DisplayMessage="Gratuity settings not found for this Grade.");var l=function(){var s,l=t.dtpDateOfJoining.Date.Date(),n=t.dtpDateOfRelieving.Date.Date();if(t.LoadExperinceDaysData(t.lst,a.Tables[0],"Resigned"==t.cmbResignType.SelectedValue?0:1),t.GratuityDocID=parseInt(a.Tables[0][0].DocID),t.GratuityGrade=parseInt(a.Tables[0][0].GradeID),t.EOS_MaxDays=d.e.Double(a.Tables[0][0].MaxDays),t.EOS_ExcludeLOP=a.Tables[0][0].ExcludeLOP.toString(),t.ActEOS_ExcludeLOP=a.Tables[0][0].ExcludeLOP.toString(),t.EOS_ROff=d.e.Double(a.Tables[0][0].ROff),t.EOS_CalcBasedOn=a.Tables[0][0].CalcBasedOn.toString(),t.EOS_GratuityFormula=a.Tables[0][0].Formula.toString(),t.EOS_AvailedFormula=null!=a.Tables[0][0].AvailedFormula&&null!=a.Tables[0][0].AvailedFormula&&""!=a.Tables[0][0].AvailedFormula.toString().Trim()?a.Tables[0][0].AvailedFormula.toString():"GratuityAmount","Exclude at Last"==t.EOS_ExcludeLOP){t.EOS_ExcludeLOP="No";var o,r=new Date(t.dtpDateOfJoining.Date.getFullYear(),t.dtpDateOfJoining.Date.getMonth(),1),h=new Date(t.dtpDateOfRelieving.Date.getFullYear(),t.dtpDateOfRelieving.Date.getMonth(),1);o=t.GetPreviousLOPDays(r,h),t.dLOPDays+=o;var u=i.a.common.GetDataSet3("CRM024",t.EmpSeqNo.toString(),r.ToString("dd/MMM/yyyy"),h.ToString("dd/MMM/yyyy"));null!=u&&u.Tables.length>0&&(u.Tables[0].length>0&&(t.dLOPDays+=parseFloat(u.Tables[0][0].LOP.toString())),u.Tables[1].length>0&&(t.dLOPDays-=parseFloat(u.Tables[1][0].LOP.toString()))),n=n.AddDays(-t.dLOPDays)}for(var g=0;g<8;g++)(s=new p.a).DisplayMember="Column"+g,s.ReadOnly=!0,s.Header="",s.Width=0==g?150:80,t.dgvGratuity.Columns.push(s),t.dgvGratuity.TableColumns.push(s.DisplayMember);if(t.dgvGratuity.RefreshColumns(),t.dActServiceDays=n.Subtract(l).Days+1,"Service Days"==t.EOS_CalcBasedOn){if(t.dServiceDaysAfterLOP=0,"No"!=t.EOS_ExcludeLOP){var m,b=new Date(t.dtpDateOfJoining.Date.getFullYear(),t.dtpDateOfJoining.Date.getMonth(),1),D=new Date(t.dtpDateOfRelieving.Date.getFullYear(),t.dtpDateOfRelieving.Date.getMonth(),1);m=t.GetPreviousLOPDays(b,D),t.dLOPDays+=m;var T=i.a.common.GetDataSet3("CRM025",t.EmpSeqNo.toString(),b.ToString("dd/MMM/yyyy"),D.ToString("dd/MMM/yyyy"));null!=T&&T.Tables.length>0&&T.Tables[0].length>0&&(t.dLOPDays+=parseFloat(T.Tables[0][0].LOP.toString()))}t.dServiceDaysAfterLOP=t.dActServiceDays-t.dLOPDays,t.EOS_GratuityFormula=t.EOS_GratuityFormula.Replace("ServiceDays",t.dActServiceDays.toString()),t.EOS_GratuityFormula=t.EOS_GratuityFormula.Replace("LOPDays",t.dLOPDays.toString()),t.EOS_AvailedFormula=t.EOS_AvailedFormula.Replace("ServiceDays",t.dActServiceDays.toString())}t.dblGratuityAmount=parseFloat(t.dsD.Tables[3][t.dsD.Tables[3].length-1].BasicMonthly);var y=t.dtpDateOfJoining.Date.Date(),C=t.dtpDateOfRelieving.Date.Date(),v=0,I=0,S=0,x={iY:v,iM:I,iD:S};if(d.e.GetYearsMonthsDays(y,C,x),v=x.iY,I=x.iM,S=x.iD,"Service Days"==t.EOS_CalcBasedOn){t.CalcGratuityBasedOnServiceDays(t.dblGratuityAmount,l,n,e);var f=0,P=0,A=0,M={iY:f,iM:P,iD:A};d.e.GetYearsMonthsDays(l,n,M),f=M.iY,P=M.iM,A=M.iD,t.lblGratuityTotalDays=f+" : "+t.GetResource("Years",40095)+", "+P+" : "+t.GetResource("Months",40095)+", "+A+" : "+t.GetResource("Days",40095),t.txtGratuityAmount.Text=e.dTotGratuitySal.ToString(i.a.SessionManager.sPayrollDecimals),t.CalculateTotalAmount(),t.oEvalPayFormulas=new c.b,t.oEvalPayFormulas.sEmpSeqNo=t.EmpSeqNo.toString();var E={PayrollMonth:t.oEvalPayFormulas.PayrollMonth,PayrollMonthStart:t.oEvalPayFormulas.PayrollMonthStart,PayrollMonthEnd:t.oEvalPayFormulas.PayrollMonthEnd};if(d.e.SetPayrollDate(t.dtpDocDate.Date.Date(),E),t.oEvalPayFormulas.PayrollMonth=E.PayrollMonth,t.oEvalPayFormulas.PayrollMonthStart=E.PayrollMonthStart,t.oEvalPayFormulas.PayrollMonthEnd=E.PayrollMonthEnd,t.oEvalPayFormulas.arrLstCPFields[6].Clear(),t.oCPF=new c.a,t.oCPF.ComponentName="GratuityAvailedFormula",t.oCPF.SNo=0,t.oCPF.Formula=t.EOS_AvailedFormula,t.oCPF.dEarned=t.oCPF.dActual="0",t.oEvalPayFormulas.arrLstCPFields[6].push(t.oCPF),a.Tables[1].length>0){t.dgvOthAdd.addEmptyRows(a.Tables[1].length);for(var L=0;L<a.Tables[1].length;L++)t.oCPF=new c.a,t.oCPF.ComponentName="Lookup"+a.Tables[1][L].NodeID.toString(),t.oCPF.SNo=L+1,null!=a.Tables[0][0][a.Tables[1][L].SysColumnName.toString()]&&null!=a.Tables[0][0][a.Tables[1][L].SysColumnName.toString()]&&(t.oCPF.Formula=a.Tables[0][0][a.Tables[1][L].SysColumnName.toString()].toString()),t.oCPF.dEarned=t.oCPF.dActual="0",t.oEvalPayFormulas.arrLstCPFields[6].push(t.oCPF),t.dgvOthAdd.Table[L].dgColOthAddParticulars=parseInt(a.Tables[1][L].NodeID.toString()),t.dgvOthAdd.updateRow(t.dgvOthAdd.Table[L])}t.oEvalPayFormulas.othMPField.sResignType=t.cmbResignType.SelectedValue.toString(),t.oEvalPayFormulas.othMPField.GratuityAmount=parseFloat(t.txtGratuityAmount.Text),t.oEvalPayFormulas.othMPField.dServiceDays=t.dActServiceDays,t.oEvalPayFormulas.othMPField.dServiceYears=v,t.oEvalPayFormulas.Intialize(),t.oEvalPayFormulas.ExecuteAllFormulas();for(var G=0;G<t.oEvalPayFormulas.arrLstCPFields[6].length;G++)if("GratuityAvailedFormula"==t.oEvalPayFormulas.arrLstCPFields[6][G].ComponentName)t.txtPartialGratuityAmount.Text="Partial"==t.cmbSettlementType.SelectedValue?(parseFloat(t.txtAvailedGratuityAmount.Text)-t.dGratuityTaken).ToString(i.a.SessionManager.sPayrollDecimals):(0).ToString(i.a.SessionManager.sPayrollDecimals),t.txtAvailedGratuityAmount.Text=parseFloat(t.oEvalPayFormulas.arrLstCPFields[6][G].dEarned).ToString(i.a.SessionManager.sPayrollDecimals);else for(var R=0;R<t.dgvOthAdd.Table.length;R++)if(t.oEvalPayFormulas.arrLstCPFields[6][G].ComponentName=="Lookup"+d.e.String(t.dgvOthAdd.Table[R].dgColOthAddParticulars)){t.dgvOthAdd.Table[R].dgColOthAddAmount=parseFloat(t.oEvalPayFormulas.arrLstCPFields[6][G].dEarned).ToString(i.a.SessionManager.sPayrollDecimals),t.dgvOthAdd.updateRow(t.dgvOthAdd.Table[R]),t.dgvOthAdd_CellEndEdit(t.dgvOthAdd,2);break}return{v:void 0}}var N,V=l,F=0,w=0,O=0,k={iY:F,iM:w,iD:O};d.e.GetYearsMonthsDays(l,n,k),F=k.iY,w=k.iM,O=k.iD;var W=!!t.chkCalcBasedOnLastSal.IsChecked&&t.chkCalcBasedOnLastSal.IsChecked,B=t.dblGratuityAmount,U=new Array,Y=new Array,_=new Array;U.push(V);for(var j=0;j<t.lst.length;j++){if(F<parseInt(t.lst[j].Year.Replace("=",""))){Y.push(n),_.push(_.length>0?_[_.length-1]:0);break}if(t.lst[j].Days>0){if(t.lst[j].IsApplyToPrevYrs)for(var H=0;H<_.length;H++)_[H]=t.lst[j].Days;if((N=V.AddYears(parseInt(t.lst[j].Year.Replace("=",""))).AddDays(-1))>=n){N=n,Y.push(N),_.push(t.lst[j].Days);break}_.Contains(t.lst[j].Days)?(Y[Y.length-1]=N,U[U.length-1]=N.AddDays(1)):(_.push(t.lst[j].Days),Y.push(N),U.push(N.AddDays(1)))}}if(t.isLast=!1,U.length>0)for(var Z=function(a){if(a==U.length-1&&(t.isLast=!0),W){if(U.length>a+1)if(_[a]!=_[a+1]){if(t.CalcGratuityDays(_[a],B,U[a],Y[a],e),t.isMaxDaysExceded)return X=a,"break"}else Y[a]=Y[a+1],U.RemoveAt(a+1),Y.RemoveAt(a+1),_.RemoveAt(a+1),a--;else if(t.CalcGratuityDays(_[a],B,U[a],Y[a],e),t.isMaxDaysExceded)return X=a,"break"}else if(U.length>a+1)if(_[a]!=_[a+1]){var s=t.dsD.Tables[3].filter((function(t){return new Date(t.dtEffectFrom)>=U[a].AddDays(1)&&new Date(t.dtEffectFrom)<=Y[a]})),i=t.dsD.Tables[3].filter((function(t){return new Date(t.dtEffectFrom)<=U[a]}));if(i.SortBy([{name:"dtEffectFrom",desc:!0}]),null!=s&&s.length>0){var l,n=0;for(n=0;n<s.length;n++)if(0==n){if(t.CalcGratuityDays(_[a],parseFloat(i[0].BasicMonthly),U[a],new Date(s[n].dtEffectFrom).AddDays(-1),e),t.isMaxDaysExceded){l=!0;break}}else if(t.CalcGratuityDays(_[a],parseFloat(s[n-1].BasicMonthly),new Date(s[n-1].dtEffectFrom),new Date(s[n].dtEffectFrom).AddDays(-1),e),t.isMaxDaysExceded){l=!0;break}if(l)return X=a,"break";if(t.CalcGratuityDays(_[a],parseFloat(s[n-1].BasicMonthly),new Date(s[n-1].dtEffectFrom),Y[a],e),t.isMaxDaysExceded)return X=a,"break"}else if(t.CalcGratuityDays(_[a],parseFloat(i[0].BasicMonthly),U[a],Y[a],e),t.isMaxDaysExceded)return X=a,"break"}else Y[a]=Y[a+1],U.RemoveAt(a+1),Y.RemoveAt(a+1),_.RemoveAt(a+1),a--;else{var o=t.dsD.Tables[3].filter((function(t){return new Date(t.dtEffectFrom)>=U[a].AddDays(1)&&new Date(t.dtEffectFrom)<=Y[a]})),r=t.dsD.Tables[3].filter((function(t){return new Date(t.dtEffectFrom)<=U[a]}));if(r.SortBy([{name:"dtEffectFrom",desc:!0}]),null!=o&&o.length>0){var d,h=0;for(h=0;h<o.length;h++)if(0==h){if(t.CalcGratuityDays(_[a],parseFloat(r[0].BasicMonthly),U[a],new Date(o[h].dtEffectFrom).AddDays(-1),e),t.isMaxDaysExceded){d=!0;break}}else if(t.CalcGratuityDays(_[a],parseFloat(o[h-1].BasicMonthly),new Date(o[h-1].dtEffectFrom),new Date(o[h].dtEffectFrom).AddDays(-1),e),t.isMaxDaysExceded){d=!0;break}if(d)return X=a,"break";if(t.CalcGratuityDays(_[a],parseFloat(o[h-1].BasicMonthly),new Date(o[h-1].dtEffectFrom),Y[a],e),t.isMaxDaysExceded)return X=a,"break"}else if(t.CalcGratuityDays(_[a],parseFloat(r[0].BasicMonthly),U[a],Y[a],e),t.isMaxDaysExceded)return X=a,"break"}X=a},X=0;X<U.length;X++){if("break"===Z(X))break}var q=0,Q=0,J=0,K={iY:q,iM:Q,iD:J};d.e.GetYearsMonthsDays(l,n,K),q=K.iY,Q=K.iM,J=K.iD,t.lblGratuityTotalDays=q+" : "+t.GetResource("Years",40095)+", "+Q+" : "+t.GetResource("Months",40095)+", "+J+" : "+t.GetResource("Days",40095),t.txtGratuityAmount.Text=e.dTotGratuitySal.ToString(i.a.SessionManager.sPayrollDecimals);var z=t.dtpDateOfRelieving.Date.Date().Subtract(l.Date()).Days+1;if(t.lblGratuityServiceDays=z.toString(),t.lblGratuityLOPDays=t.dLOPDays.toString(),t.lblGratuityBalDays=(z-t.dLOPDays).toString(),t.lblGratuityTotalGrDays=t.dTotGratuityDays.toString(),t.lblGratuityTaken=t.dGratuityTaken.toString(),t.oEvalPayFormulas=new c.b,t.oEvalPayFormulas.sEmpSeqNo=t.EmpSeqNo.toString(),x={PayrollMonth:t.oEvalPayFormulas.PayrollMonth,PayrollMonthStart:t.oEvalPayFormulas.PayrollMonthStart,PayrollMonthEnd:t.oEvalPayFormulas.PayrollMonthEnd},d.e.SetPayrollDate(t.dtpDocDate.Date.Date(),x),t.oEvalPayFormulas.PayrollMonth=x.PayrollMonth,t.oEvalPayFormulas.PayrollMonthStart=x.PayrollMonthStart,t.oEvalPayFormulas.PayrollMonthEnd=x.PayrollMonthEnd,t.oEvalPayFormulas.arrLstCPFields[6].Clear(),t.oCPF=new c.a,t.oCPF.ComponentName="GratuityAvailedFormula",t.oCPF.SNo=0,t.oCPF.Formula=t.EOS_AvailedFormula,t.oCPF.dEarned=t.oCPF.dActual="0",t.oEvalPayFormulas.arrLstCPFields[6].push(t.oCPF),a.Tables[1].length>0){t.dgvOthAdd.addEmptyRows(a.Tables[1].length);for(var $=0;$<a.Tables[1].length;$++)t.oCPF=new c.a,t.oCPF.ComponentName="Lookup"+a.Tables[1][$].NodeID.toString(),t.oCPF.SNo=$+1,d.e.IsEmpty(a.Tables[0][0][a.Tables[1][$].SysColumnName.toString()])||(t.oCPF.Formula=a.Tables[0][0][a.Tables[1][$].SysColumnName.toString()].toString()),t.oCPF.dEarned=t.oCPF.dActual="0",t.oEvalPayFormulas.arrLstCPFields[6].push(t.oCPF),t.dgvOthAdd.Table[$].dgColOthAddParticulars.Value=parseInt(a.Tables[1][$].NodeID.toString()),t.dgvOthAdd.updateRow(t.dgvOthAdd.Table[$])}t.oEvalPayFormulas.othMPField.IsFinalSettlement=!0,t.oEvalPayFormulas.othMPField.sResignType=t.cmbResignType.SelectedValue.toString(),t.oEvalPayFormulas.othMPField.GratuityAmount=parseFloat(t.txtGratuityAmount.Text),t.oEvalPayFormulas.othMPField.dServiceDays=t.dActServiceDays,t.oEvalPayFormulas.othMPField.dServiceYears=v,t.oEvalPayFormulas.Intialize(),t.oEvalPayFormulas.ExecuteAllFormulas();for(var tt=0;tt<t.oEvalPayFormulas.arrLstCPFields[6].length;tt++)if("GratuityAvailedFormula"==t.oEvalPayFormulas.arrLstCPFields[6][tt].ComponentName)t.txtPartialGratuityAmount.Text="Partial"==t.cmbSettlementType.SelectedValue?(parseFloat(t.txtAvailedGratuityAmount.Text)-t.dGratuityTaken).ToString(i.a.SessionManager.sPayrollDecimals):(0).ToString(i.a.SessionManager.sPayrollDecimals),t.txtAvailedGratuityAmount.Text=parseFloat(t.oEvalPayFormulas.arrLstCPFields[6][tt].dEarned).ToString(i.a.SessionManager.sPayrollDecimals);else for(var et=0;et<t.dgvOthAdd.Table.length;et++)if(t.oEvalPayFormulas.arrLstCPFields[6][tt].ComponentName=="Lookup"+d.e.String(t.dgvOthAdd.Table[et].dgColOthAddParticulars)){t.dgvOthAdd.Table[et].dgColOthAddAmount=parseFloat(t.oEvalPayFormulas.arrLstCPFields[6][tt].dEarned).ToString(i.a.SessionManager.sPayrollDecimals),t.dgvOthAdd.updateRow(t.dgvOthAdd.Table[et]),t.dgvOthAdd_CellEndEdit(t.dgvOthAdd,2);break}}();if("object"==typeof l)return l.v}this.CalculateTotalAmount()}},{key:"LoadExperinceDaysData",value:function(t,e,a){t.Clear();var s="Res";1==a&&(s="Term");for(var i=0;i<e.length;i++)t.push(new rt),t[i].Year=e[i][s+"Exp"].toString().Contains("+")?e[i][s+"Exp"].toString().Replace("[+]",""):"="+e[i][s+"Exp"].toString(),t[i].Days=parseFloat(e[i][s+"GrDays"]),t[i].IsApplyToPrevYrs="Yes"==e[i][s+"ApplyPrevYrs"].toString()}},{key:"CalcGratuityDays",value:function(e,a,s,l,n){n.dTotGratuitySal=0,this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[0]]=this.GetResource("Gratuity/Year",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=e;var o=e;this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[0]]=this.GetResource("Period",40095),this.GetResource("Start Date",40095),s.ToString("dd/MMM/yyyy"),this.GetResource("End Date",40095),l.ToString("dd/MMM/yyyy");var r,h,u,g=this.dtpDateOfJoining.Date.Date(),m=(this.dtpDateOfRelieving.Date.Date(),0),b=0,D=0,p={iY:m,iM:b,iD:D};d.e.GetYearsMonthsDays(g,l,p),m=p.iY,b=p.iM,D=p.iD;var T=0,y=0,C=0,v={iY:T,iM:y,iD:C};d.e.GetYearsMonthsDays(s,l,v),T=v.iY,y=v.iM,C=v.iD;var I=0;if("No"!=this.EOS_ExcludeLOP){I=this.GetPreviousLOPDays(s,l);var S=i.a.common.GetDataSet3("CRM026",this.EmpSeqNo.toString(),s.ToString("dd/MMM/yyyy"),l.ToString("dd/MMM/yyyy"));null!=S&&S.Tables.length>0&&S.Tables[0].length>0&&(I+=parseFloat(S.Tables[0][0].LOP.toString()));var x=l;x=s==this.dtpDateOfJoining.Date.Date()?x.AddDays(-(this.dLOPDays+I)):x.AddDays(-I);var f={iY:T,iM:y,iD:C};d.e.GetYearsMonthsDays(s,x,f),T=f.iY,y=f.iM,C=f.iD,this.dLOPDays+=I}r=T*o,h=y/12*o,u=C/365*o,this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=this.GetResource("Start Date",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[2]]=s.ToString("dd/MMM/yyyy"),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[3]]=this.GetResource("End Date",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[4]]=l.ToString("dd/MMM/yyyy");var P=!!this.chkCalcBasedOnActDays.IsChecked&&this.chkCalcBasedOnActDays.IsChecked,A=0,M=0,E=0;if(P){for(var L,G=s,R=l,N=0;G<=R;){if(!((L=new Date(G.getFullYear(),G.getMonth(),G.DaysInMonth()))<=R)){M+=N=R.Subtract(G).Days+1,E+=a*N/L.getDate();break}M+=N=L.Subtract(G).Days+1,E+=a*N/L.getDate(),G=L.AddDays(1)}A=E/M}var V=l.Subtract(s).Days+1;this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[0]]=this.GetResource("Basic Salary",40095);var F=0;this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=a,F=a,this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[0]]=this.GetResource("Total Days Worked",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=T+" : "+this.GetResource("Years",40095)+", "+y+" : "+this.GetResource("Months",40095)+", "+C+" : "+this.GetResource("Days",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[3]]=this.GetResource("Total Days",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[4]]=V,"Exclude at Last"==this.ActEOS_ExcludeLOP?this.isLast&&(this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[5]]=this.GetResource("Total LOP Days",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[6]]=this.dLOPDays):(this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[5]]=this.GetResource("LOP Days",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[6]]=I),this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=this.GetResource("Years",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[2]]=this.GetResource("Months",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[3]]=this.GetResource("Days",40095),this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=T,this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[2]]=y,this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[3]]=C,this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[0]]=this.GetResource("Available Gratuity",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=r,this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[2]]=h,this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[3]]=u;var w=r+h+u;if(this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[4]]="=",this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[5]]=w,this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[6]]="=",w=t.RoundOffValue(w,this.EOS_ROff),this.EOS_MaxDays>0&&this.dEarnedGrDays+w>=this.EOS_MaxDays?(w=this.EOS_MaxDays-this.dEarnedGrDays,this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[7]]=w,this.isMaxDaysExceded=!0):(this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[7]]=w,this.dEarnedGrDays+=w),this.dTotGratuityDays+=w,this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[0]]=this.GetResource("Gratuity",40095),P)this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=E+" / "+M,F=A*w;else{var O=this.dtpDateOfJoining.Date.Date(),k=this.dtpDateOfRelieving.Date.Date(),W=0,B=0,U=0,Y={iY:W,iM:B,iD:U};d.e.GetYearsMonthsDays(O,k,Y),W=Y.iY,B=Y.iM,U=Y.iD;var _=!!this.chkCalcBasedOnLastSal.IsChecked&&this.chkCalcBasedOnLastSal.IsChecked;this.oEvalPayFormulas=new c.b,this.oEvalPayFormulas.sEmpSeqNo=this.EmpSeqNo.toString(),Y={PayrollMonth:this.oEvalPayFormulas.PayrollMonth,PayrollMonthStart:this.oEvalPayFormulas.PayrollMonthStart,PayrollMonthEnd:this.oEvalPayFormulas.PayrollMonthEnd},d.e.SetPayrollDate(_?this.dtpDocDate.Date.Date():s.Date(),Y),this.oEvalPayFormulas.PayrollMonth=Y.PayrollMonth,this.oEvalPayFormulas.PayrollMonthStart=Y.PayrollMonthStart,this.oEvalPayFormulas.PayrollMonthEnd=Y.PayrollMonthEnd,this.oEvalPayFormulas.arrLstCPFields[6].Clear(),this.oCPF=new c.a,this.oCPF.ComponentName="GratuityFormula",this.oCPF.SNo=0,this.oCPF.Formula=this.EOS_GratuityFormula.Replace("GratuityDays",w.toString()),this.oCPF.dEarned=this.oCPF.dActual="0",this.oEvalPayFormulas.arrLstCPFields[6].push(this.oCPF),this.oEvalPayFormulas.othMPField.IsFinalSettlement=!0,this.oEvalPayFormulas.othMPField.sResignType=this.cmbResignType.SelectedValue.toString(),this.oEvalPayFormulas.othMPField.BasicMonthly=a,this.oEvalPayFormulas.othMPField.TotalLeaves=0,this.oEvalPayFormulas.othMPField.DaysAttended=this.oEvalPayFormulas.othMPField.TotalDays,this.oEvalPayFormulas.othMPField.dServiceDays=this.dActServiceDays,this.oEvalPayFormulas.othMPField.dServiceYears=W,this.oEvalPayFormulas.Intialize(),this.oEvalPayFormulas.ExecuteAllFormulas();for(var j=0;j<this.oEvalPayFormulas.arrLstCPFields[6].length;j++)if("GratuityFormula"==this.oEvalPayFormulas.arrLstCPFields[6][j].ComponentName){F=parseFloat(this.oEvalPayFormulas.arrLstCPFields[6][j].dEarned);break}}this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[5]]=F,n.dTotGratuitySal+=F,this.dgvGratuity.addEmptyRow(),this.dgvGratuity.refreshDataView(),console.log(this.dgvGratuity)}},{key:"GetPreviousLOPDays",value:function(t,e){var a=0,s=i.a.common.GetDataSet3("CRM027",this.EmpSeqNo.toString(),t.ToString("dd/MMM/yyyy"),e.ToString("dd/MMM/yyyy")).Tables[0];return null!=s&&s.length>0&&(a=parseFloat(s[0].LOPDays)),a}},{key:"CalcGratuityBasedOnServiceDays",value:function(t,e,a,s){s.dTotGratuitySal=0,this.dgvGratuity.addEmptyRow();this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[0]]=this.GetResource("Period",40095),this.GetResource("Start Date",40095),e.ToString("dd/MMM/yyyy"),this.GetResource("End Date",40095),a.ToString("dd/MMM/yyyy");var i=0,l=0,n=0,o={iY:i,iM:l,iD:n};d.e.GetYearsMonthsDays(e,a,o),i=o.iY,l=o.iM,n=o.iD,this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=this.GetResource("Start Date",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[2]]=e.ToString("dd/MMM/yyyy"),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[3]]=this.GetResource("End Date",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[4]]=a.ToString("dd/MMM/yyyy");var r=a.Subtract(e).Days+1;this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[0]]=this.GetResource("Basic Salary",40095);this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=t,this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[0]]=this.GetResource("Total Days Worked",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=i+" : "+this.GetResource("Years",40095)+", "+l+" : "+this.GetResource("Months",40095)+", "+n+" : "+this.GetResource("Days",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[3]]=this.GetResource("Total Days",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[4]]=r,this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=this.GetResource("Total Duration Days",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[2]]=this.GetResource("LOP Days",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[3]]=this.GetResource("Total Service Days",40095),this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=this.dActServiceDays,this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[2]]=this.dLOPDays,this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[3]]=this.dServiceDaysAfterLOP,this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[0]]=this.GetResource("Total Years",40095),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[1]]=this.dServiceDaysAfterLOP,this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[2]]="/",this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[3]]="365";var h=this.dServiceDaysAfterLOP/365;this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[4]]="=",this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[5]]=h,this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[6]]="=",this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[7]]=h,this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[0]]=this.GetResource("Gratuity Amount",40095),this.oEvalPayFormulas=new c.b,this.oEvalPayFormulas.sEmpSeqNo=this.EmpSeqNo.toString();var u={PayrollMonth:this.oEvalPayFormulas.PayrollMonth,PayrollMonthStart:this.oEvalPayFormulas.PayrollMonthStart,PayrollMonthEnd:this.oEvalPayFormulas.PayrollMonthEnd};d.e.SetPayrollDate(this.dtpDocDate.Date.Date(),u),this.oEvalPayFormulas.PayrollMonth=u.PayrollMonth,this.oEvalPayFormulas.PayrollMonthStart=u.PayrollMonthStart,this.oEvalPayFormulas.PayrollMonthEnd=u.PayrollMonthEnd,this.oEvalPayFormulas.arrLstCPFields[6].Clear(),this.oCPF=new c.a,this.oCPF.ComponentName="GratuityFormula",this.oCPF.SNo=0,this.oCPF.Formula=this.EOS_GratuityFormula,this.oCPF.dEarned=this.oCPF.dActual="0",this.oEvalPayFormulas.arrLstCPFields[6].push(this.oCPF),this.oEvalPayFormulas.othMPField.sResignType=this.cmbResignType.SelectedValue.toString(),this.oEvalPayFormulas.othMPField.BasicMonthly=t,this.oEvalPayFormulas.othMPField.TotalLeaves=0,this.oEvalPayFormulas.othMPField.DaysAttended=this.oEvalPayFormulas.othMPField.TotalDays,this.oEvalPayFormulas.othMPField.dServiceDays=this.dActServiceDays,this.oEvalPayFormulas.othMPField.dServiceYears=i,this.oEvalPayFormulas.Intialize(),this.oEvalPayFormulas.ExecuteAllFormulas();for(var g=0;g<this.oEvalPayFormulas.arrLstCPFields[6].length;g++)if("GratuityFormula"==this.oEvalPayFormulas.arrLstCPFields[6][g].ComponentName){this.dServiceDaysFormulaAmount=parseFloat(this.oEvalPayFormulas.arrLstCPFields[6][g].dEarned);break}this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[5]]=this.dServiceDaysFormulaAmount,s.dTotGratuitySal+=this.dServiceDaysFormulaAmount,this.dgvGratuity.addEmptyRow(),this.dgvGratuity.Table[this.dgvGratuity.Table.length-1][this.dgvGratuity.TableColumns[0]]="* * * * *"}},{key:"dgvLeaveEncash_CellValidating",value:function(t,e){}},{key:"btnCalcLeaveEncash_Click",value:function(){this.oEvalPayFormulas=new c.b,this.oEvalPayFormulas.othMPField.IsFinalSettlement=!1,this.oEvalPayFormulas.sEmpSeqNo=this.EmpSeqNo.toString();var t={PayrollMonth:this.oEvalPayFormulas.PayrollMonth,PayrollMonthStart:this.oEvalPayFormulas.PayrollMonthStart,PayrollMonthEnd:this.oEvalPayFormulas.PayrollMonthEnd};d.e.SetPayrollDate(this.dtpDocDate.Date.Date(),t),this.oEvalPayFormulas.PayrollMonth=t.PayrollMonth,this.oEvalPayFormulas.PayrollMonthStart=t.PayrollMonthStart,this.oEvalPayFormulas.PayrollMonthEnd=t.PayrollMonthEnd,this.oEvalPayFormulas.arrLstCPFields[6].Clear();var e=0;if(this.dgvLeaveEncash.Table.length>0){for(var a=0;a<this.dgvLeaveEncash.Table.length;a++)d.e.IsEmpty(this.dgvLeaveEncash.Table[a].dgColLEApplied)||(d.e.IsEmpty(this.dgvLeaveEncash.Table[a].dgColLEAmount_Tag)||(this.strFormula=this.dgvLeaveEncash.Table[a].dgColLEAmount_Tag.toString()),this.strFormula=this.strFormula.Replace("EncashDays","("+this.dgvLeaveEncash.Table[a].dgColLEApplied.toString().Replace("-","!")+")"),this.oCPF=new c.a,this.oCPF.ComponentName="LEFormula"+this.dgvLeaveEncash.Table[a+"_Tag"].toString(),this.oCPF.SNo=parseInt(this.dgvLeaveEncash.Table[a+"_Tag"]),this.oCPF.Formula=this.strFormula,this.oCPF.dEarned=this.oCPF.dActual="0",this.oEvalPayFormulas.arrLstCPFields[6].push(this.oCPF));this.oEvalPayFormulas.Intialize(),this.oEvalPayFormulas.othMPField.BasicMonthly=parseFloat(this.dsD.Tables[3][this.dsD.Tables[3].length-1].BasicMonthly),this.oEvalPayFormulas.othMPField.TotalLeaves=0,this.oEvalPayFormulas.othMPField.DaysAttended=this.oEvalPayFormulas.othMPField.TotalDays,this.oEvalPayFormulas.ExecuteAllFormulas();for(var s=0;s<this.dgvLeaveEncash.Table.length;s++)if(0!=d.e.Double(this.dgvLeaveEncash.Table[s].dgColLEApplied))for(var l=0;l<this.oEvalPayFormulas.arrLstCPFields[6].length;l++)if(this.oEvalPayFormulas.arrLstCPFields[6][l].ComponentName=="LEFormula"+this.dgvLeaveEncash.Table[s+"_Tag"].toString()){this.dgvLeaveEncash.Table[s].dgColLEAmount=this.oEvalPayFormulas.arrLstCPFields[6][l].dEarned,e+=parseFloat(this.oEvalPayFormulas.arrLstCPFields[6][l].dEarned);break}this.txtLEAmount.Text=(parseFloat(this.txtCumLeaveSalBalAmt.Text)+e).ToString(i.a.SessionManager.sPayrollDecimals)}this.CalculateTotalAmount()}},{key:"dgvUPS_CellClick",value:function(t,e){var a=this;if("dgColUPSCalc"==this.dgvUPS.Columns[t.cell].DisplayMember){d.e.SetPayrollMonth(new Date(this.dgvUPS.Table[t.row].dgColUPSPayrollMonth));var s=new u.MonthlyPayrollViewModel("Monthly Payroll","UnProcessed");s.sProcessType="UnProcessed",s.SelectedEmpID=this.EmpSeqNo,s.EmployeeList.Code.SelectedValue=s.EmployeeList.Name.SelectedValue=this.EmpSeqNo,s.EmployeeList.Code.Text=s.EmployeeList.Name.Text=this.EmployeeList.Text,s.InitSelectedEmployee(),i.a.page.ShowDialog(s,S.MonthlyPayrollComponent,{ShowCenter:!0,HideHeader:!0}).subscribe((function(){s.DialogResult&&(a.dgvUPS.Table[t.row].dgColUPSDaysAtt=s.dFS_DaysAttended,a.dgvUPS.Table[t.row].dgColUPSLOP=s.dFS_LOPDays,a.dgvUPS.Table[t.row].dgColUPSNetSal=s.dFS_NetSal,a.dgvUPS.updateRow(a.dgvUPS[t.row]));var e=0;if(a.dgvUPS.Table.length>0)for(var l=0;l<a.dgvUPS.Table.length;l++)e+=parseFloat(a.dgvUPS.Table[l].dgColUPSNetSal);a.txtUPSAmount.Text=e.ToString(i.a.SessionManager.sPayrollDecimals),a.CalculateTotalAmount()}))}}},{key:"dgvNoticePay_CellClick",value:function(t,e){var a=this;if("dgColNPCalc"==this.dgvNoticePay.Columns[t.cell].DisplayMember){d.e.SetPayrollMonth(new Date(this.dgvNoticePay.Table[t.row].dgColNPPayrollMonth));var s=new u.MonthlyPayrollViewModel("Monthly Payroll","NoticePay");s.sProcessType="NoticePay",s.SelectedEmpID=this.EmpSeqNo,s.EmployeeList.Code.SelectedValue=s.EmployeeList.Name.SelectedValue=this.EmpSeqNo,s.EmployeeList.Code.Text=s.EmployeeList.Name.Text=this.EmployeeList.Text,s.InitSelectedEmployee(),i.a.page.ShowDialog(s,S.MonthlyPayrollComponent,{ShowCenter:!0,HideHeader:!0}).subscribe((function(){s.DialogResult&&(a.dgvNoticePay.Table[t.row].dgColNPDaysAtt=s.dFS_DaysAttended,a.dgvNoticePay.Table[t.row].dgColNPLOP=s.dFS_LOPDays,a.dgvNoticePay.Table[t.row].dgColNPNetSal=s.dFS_NetSal,a.dgvNoticePay.updateRow(a.dgvNoticePay[t.row])),a.CalculateNoticePayAmount()}))}}},{key:"CalculateNoticePayAmount",value:function(){var t=0;if(this.dgvNoticePay.Table.length>0)for(var e=0;e<this.dgvNoticePay.Table.length;e++)"Add"==d.e.String(this.dgvNoticePay.Table[e].dgColNPType)?t+=parseFloat(this.dgvNoticePay.Table[e].dgColNPNetSal):"Subtract"==d.e.String(this.dgvNoticePay.Table[e].dgColNPType)&&(t-=parseFloat(this.dgvNoticePay.Table[e].dgColNPNetSal));this.txtNPAmount.Text=t.ToString(i.a.SessionManager.sPayrollDecimals),this.CalculateTotalAmount()}},{key:"dgvOthAdd_CellEndEdit",value:function(t,e){null==e&&(e=t.cell),"dgColOthAddAmount"==this.dgvOthAdd.Columns[e].DisplayMember&&this.CalculateOthAddAmount()}},{key:"dgvOthAdd_RowsAdded",value:function(t,e){this.GenerateSerialNos(this.dgvOthAdd)}},{key:"CalculateOthAddAmount",value:function(){for(var t=0,e=0;e<this.dgvOthAdd.Table.length;e++)t+=parseFloat(this.dgvOthAdd.Table[e].dgColOthAddAmount);this.txtOthAddAmount.Text=t.ToString(i.a.SessionManager.sPayrollDecimals),this.CalculateTotalAmount()}},{key:"dgvOthDed_CellEndEdit",value:function(t,e){null==e&&(e=t.cell),"dgColOthDedAmount"==this.dgvOthDed.Columns[e].DisplayMember&&this.CalculateOthDedAmount()}},{key:"dgvOthDed_RowsAdded",value:function(t,e){this.GenerateSerialNos(this.dgvOthDed)}},{key:"CalculateOthDedAmount",value:function(){for(var t=0,e=0;e<this.dgvOthDed.Table.length;e++)t+=parseFloat(this.dgvOthDed.Table[e].dgColOthDedAmount);this.txtOthDedAmount.Text=t.ToString(i.a.SessionManager.sPayrollDecimals),this.CalculateTotalAmount()}},{key:"dtpDateOfRelieving_SelectedDateChanged",value:function(t,e){this.RefreshLeaveEncashDetails()}},{key:"btnSaveAndPrint_Click",value:function(t){this.ViewModel.SelectedEmpID>0?(this.Save_Click(),this.ViewModel.IsSaved&&this.ViewModel.DocID>0&&(this.ViewModel.IsSaved=!1,this.ViewModel.SelectedEmpID=0)):(this.ViewModel.DisplayMessage="Select any Employee.",this.ViewModel.MessageVisibility=!0)}},{key:"btnPrint_Click",value:function(t){this.ViewModel.DocID>0||(this.ViewModel.DisplayMessage="Select any Employee.",this.ViewModel.MessageVisibility=!0)}},{key:"btnPrintPreview_Click",value:function(t){this.ViewModel.DocID>0||(this.ViewModel.DisplayMessage="Select any Employee.",this.ViewModel.MessageVisibility=!0)}},{key:"btnExport_Click",value:function(t){if(!(this.ViewModel.DocID>0))return this.ViewModel.DisplayMessage="Load document in Edit Mode",void(this.ViewModel.MessageVisibility=!0)}},{key:"dgvLoanBal_CellClick",value:function(t,e){var a=this;if("dgColLoanBalCalc"==this.dgvLoanBal.Columns[t.cell].DisplayMember){var s=i.a.common.GetDataTable("CRM028","");if(null!=s&&s.length>0){var n,o=Date.Today(),r=this.dsD.Tables[11].filter((function(e){return e.RefNo==a.dgvLoanBal.Table[t.row].dgColLoanBalDocNo}));if(r.length>0){(n=new D.AddEditDocumentViewModel(40057,"Loan Repayment",!0,"IsFrmFS_LoanBal")).ScreenObject.Link.LinkCombo.Enable=!1,n.ScreenObject.Link.DocumentList.Enable=!1,n.ScreenObject.Preferences.Selective="false";var h={value:o};n.ScreenObject.OnDocPrefixChanged("lostFocus",0,parseInt(r[0].DocID),h,!1),o=h.value}else(n=new D.AddEditDocumentViewModel(40057,"Loan Repayment",!1,"IsFrmFS_LoanBal")).ScreenObject.Link.LinkCombo.SelectedValue=s[0].DocumentLinkDefID.toString(),n.ScreenObject.Link.LinkCombo.Enable=!1,n.ScreenObject.Link.DocumentList.Enable=!1,n.ScreenObject.Preferences.Selective="false",n.OLinkSelectionChanged(null);n.IsFrmFS_LoanBal=!0;var c=n.ScreenObject.HeaderFields.find((function(t){return t instanceof g.c&&"DocDate"==t.DBColumnName.toString()}));c&&(c.Enable=!1),(c=n.ScreenObject.HeaderFields.find((function(t){return t instanceof g.c&&"VoucherNo"==t.DBColumnName.toString()})))instanceof m.a&&(c.Enable=!1,c.LoadVisibility=!1,c.PreviousVisibility=!1,c.NextVisibility=!1);var u=n.ScreenObject.Link.DocumentList.Items.find((function(e){return e.Value==a.dgvLoanBal.Table[t.row].dgColLoanBalDocNo_Tag.toString()}));u&&(u.IsChecked=!0,n.OnLinkDocumentCheckedChanged(u)),(c=n.ScreenObject._CCFields.find((function(t){return"dcCCNID51"==t.DBColumnName})))&&(c.Enable=!1),(c=n.ScreenObject._TextFields.find((function(t){return"dcAlpha6"==t.DBColumnName})))instanceof l.d&&(c.Text="FFS_LoanBalances");for(var p=0;p<n.ScreenObject.GridData.length;p++)d.e.IsEmpty(n.ScreenObject.GridData[p].ProductID_Key)||(n.ScreenObject.GridData[p].dcAlpha5=this.dtpDocDate.Date.ToString(i.a.SessionManager.Preferences["Date Format"]),n.ScreenObject.GridData[p].dcAlpha5_Key=this.dtpDocDate.Date.toString());i.a.page.ShowDialog(n,b.AddEditDocumentComponent),n.DialogResult&&(this.dgvLoanBal.Table[t.row].dgColLoanBalCalc_Tag="Paid",this.dgvLoanBal.Table[t.row].dgColLoanBalSNo_Tag=n.RetValue,this.dgvLoanBal.updateRow(this.dgvLoanBal.Table[t.row]))}}}},{key:"NumberValidationTextBox",value:function(t,e){}},{key:"GetResource",value:function(t,e){var a=t;return this.drwRes=this.ViewModel.dtRes1.filter((function(a){return a.CCID==e&&a.Code=="'"+t+"'"})),null!=this.drwRes&&this.drwRes.length>0?this.drwRes[0].AliasName.toString():a}},{key:"cmbSettlementType_SelectionChanged",value:function(t,e){this.txtPartialGratuityAmount.IsReadOnly="Partial"!=this.cmbSettlementType.SelectedValue}},{key:"txtDocNo",get:function(){return this.ViewModel.txtDocNo}},{key:"txtRemarks",get:function(){return this.ViewModel.txtRemarks}},{key:"txtNetAmount",get:function(){return this.ViewModel.txtNetAmount}},{key:"EmployeeList",get:function(){return this.ViewModel.EmployeeList}},{key:"cmbResignType",get:function(){return this.ViewModel.cmbResignType}},{key:"cmbSettlementType",get:function(){return this.ViewModel.cmbSettlementType}},{key:"dtpDocDate",get:function(){return this.ViewModel.dtpDocDate}},{key:"dtpDateOfJoining",get:function(){return this.ViewModel.dtpDateOfJoining}},{key:"dtpDateOfRelieving",get:function(){return this.ViewModel.dtpDateOfRelieving}}],[{key:"RoundOffValue",value:function(t,e){if(e>0&&t>0){var a,s=!1;(a=t%e)>0&&(e/a<=2&&(s=!0),t-=a,s&&(t+=e))}return t}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=x.Nb({type:t,selectors:[["app-final-settlement"]],decls:322,vars:104,consts:[["id","maincontainer",1,"maincontainer","master_container"],[1,"page-header"],[1,"page-title_div"],[1,"page-title"],[1,"btnpill"],[1,"btnMetroDiv","secondary-btn-group"],["class","secondary-btn",3,"click",4,"ngIf"],[1,"secondary-btn",3,"click"],[1,"fa-light","fa-print"],[1,"fa-light","fa-eye"],[1,"fa-light","fa-file-export"],[1,"fa-light","fa-paperclip"],[1,"fa-light","fa-envelope"],[1,"fa-light","fa-broom"],[1,"document-screen","main_div"],[1,"section"],["acoordionHeader",""],["panelClass","row form-row",3,"isOpen"],["accordion-heading","",1,"collapse_tabfields"],[1,"btn","btn-link"],[1,"fa","pull-right",2,"line-height","26px","color","white","position","relative","left","-10px","float","right","background","none","border","none"],["btnCollapseheader",""],[1,"PACTHeaderFields"],[2,"display","flex","width","100%"],["class","form-group col-xl-3  col-md-3 col-sm-12 col-xs-12 PACTControl",4,"ngIf"],["class","form-group col-xl-6  col-md-6 col-sm-12 col-xs-12 PACTControl",4,"ngIf"],[1,"form-group","col-xl-3","col-md-3","col-sm-12","col-xs-12","PACTControl"],[2,"margin-top","auto"],[1,"PACTTabFields","section","tab_content","tab-exrafields","custom_accordion",2,"display","flex"],["TabHeaderField",""],[1,"master-tab-container",2,"width","100%"],[3,"heading","removable","selectTab"],[1,"documentgrid","row","form-row",2,"width","100%"],["class","form-group col-9 section documentgrid",4,"ngIf"],[1,"form-group","col-3",2,"height","250px","border","1px solid #ccc","overflow","scroll"],["class","form-group col-xl-12  col-md-12 col-sm-12 col-xs-12 PACTControl",4,"ngIf"],[1,"form-group","col-xl-12","col-md-12","col-sm-12","col-xs-12","PACTControl"],["FieldDirective","",3,"obj","group"],[1,"primary-btn-wicon",3,"click"],[1,"form-group","col-xl-12","col-md-12","col-sm-12","col-xs-12",2,"display","flex","flex-direction","row","padding","0px 30px 8px 0px !important","width","100%"],[2,"font-weight","bold"],[1,"form-row","row"],[1,"form-group","col-3"],[1,"fa-light","fa-user"],[1,"fa-light","fa-floppy-disk-circle-arrow-right"],[1,"fas","fa-print"],[1,"fa-light","fa-trash-alt"],[1,"form-group","col-xl-12","col-md-12","col-sm-12","col-xs-12",2,"display","flex","/* flex-direction","row","*/padding","0px 0px 0px 0px !important","width","100%"],["FieldDirective","",2,"width","100%",3,"obj","group"],[2,"display","flex"],[1,"input_cntrl_label",2,"flex-direction","column"],[1,"btnMetroDiv","secondary-btn-group",2,"margin-left","auto","margin-bottom","2px"],[1,"secondary-btn","prevnextbtn",3,"click"],[1,"far","fa-angle-left"],[1,"far","fa-angle-right"],[1,"form-group","col-xl-6","col-md-6","col-sm-12","col-xs-12","PACTControl"],[1,"form-group","col-9","section","documentgrid"],[2,"width","100%",3,"obj","group"]],template:function(t,e){1&t&&(x.Zb(0,"div",0),x.Wc(1,"\n  "),x.Zb(2,"div",1),x.Wc(3,"\n    "),x.Zb(4,"div",2),x.Wc(5,"\n      "),x.Zb(6,"span",3),x.Wc(7),x.Zb(8,"span",4),x.Wc(9),x.Yb(),x.Wc(10,"\n      "),x.Yb(),x.Wc(11,"\n    "),x.Yb(),x.Wc(12,"\n    "),x.Zb(13,"div",5),x.Wc(14,"\n      "),x.Wc(15,"\n      "),x.Uc(16,G,4,3,"span",6),x.Wc(17,"\n      "),x.Uc(18,R,4,3,"span",6),x.Wc(19,"\n      "),x.Uc(20,N,4,3,"span",6),x.Wc(21,"\n      "),x.Zb(22,"span",7),x.hc("click",(function(){return e.btnPrint_Click("Print")})),x.Ub(23,"i",8),x.Wc(24),x.mc(25,"translate"),x.Yb(),x.Wc(26,"\n      "),x.Zb(27,"span",7),x.hc("click",(function(){return e.btnPrintPreview_Click("Preview")})),x.Ub(28,"i",9),x.Wc(29),x.mc(30,"translate"),x.Yb(),x.Wc(31,"\n      "),x.Zb(32,"span",7),x.hc("click",(function(){return e.btnExport_Click("Export")})),x.Ub(33,"i",10),x.Wc(34),x.mc(35,"translate"),x.Yb(),x.Wc(36,"\n      "),x.Zb(37,"span",7),x.hc("click",(function(){return e.obj.Button_Click("Attachments")})),x.Ub(38,"i",11),x.Wc(39),x.mc(40,"translate"),x.Yb(),x.Wc(41,"\n      "),x.Zb(42,"span",7),x.hc("click",(function(){return e.obj.Button_Click("EMail")})),x.Ub(43,"i",12),x.Wc(44),x.mc(45,"translate"),x.Yb(),x.Wc(46,"\n      "),x.Zb(47,"span",7),x.hc("click",(function(){return e.obj.Button_Click("Clear")})),x.Ub(48,"i",13),x.Wc(49),x.mc(50,"translate"),x.Yb(),x.Wc(51,"\n      "),x.Uc(52,V,4,3,"span",6),x.Wc(53,"\n    "),x.Yb(),x.Wc(54,"\n  "),x.Yb(),x.Wc(55,"\n  "),x.Zb(56,"div",14),x.Wc(57,"\n    "),x.Zb(58,"accordion",15,16),x.Wc(60,"\n      "),x.Zb(61,"accordion-group",17),x.Wc(62,"\n        "),x.Zb(63,"div",18),x.Wc(64,"\n          "),x.Zb(65,"span",19),x.Wc(66," Primary Information"),x.Yb(),x.Wc(67,"\n          "),x.Ub(68,"span",20,21),x.Wc(70,"\n        "),x.Yb(),x.Wc(71,"\n        "),x.Zb(72,"div"),x.Wc(73,"\n          "),x.Zb(74,"div",22),x.Wc(75,"\n            "),x.Zb(76,"div",23),x.Wc(77,"\n              "),x.Uc(78,F,25,3,"div",24),x.Wc(79,"\n              "),x.Uc(80,w,4,2,"div",24),x.Wc(81,"\n            "),x.Yb(),x.Wc(82,"\n            "),x.Zb(83,"div",23),x.Wc(84,"\n              "),x.Uc(85,O,4,2,"div",25),x.Wc(86,"\n              "),x.Uc(87,k,4,2,"div",24),x.Wc(88,"\n            "),x.Yb(),x.Wc(89,"\n            "),x.Zb(90,"div",23),x.Wc(91,"\n              "),x.Uc(92,W,4,2,"div",24),x.Wc(93,"\n              "),x.Uc(94,B,4,2,"div",24),x.Wc(95,"\n              "),x.Zb(96,"div",26),x.Wc(97,"\n                "),x.Zb(98,"label",27),x.Wc(99),x.Yb(),x.Wc(100,"\n              "),x.Yb(),x.Wc(101,"\n            "),x.Yb(),x.Wc(102,"\n            "),x.Zb(103,"div",23),x.Wc(104,"\n              "),x.Uc(105,U,4,2,"div",25),x.Wc(106,"\n              "),x.Uc(107,Y,4,2,"div",24),x.Wc(108,"\n            "),x.Yb(),x.Wc(109,"\n          "),x.Yb(),x.Wc(110,"\n        "),x.Yb(),x.Wc(111,"\n      "),x.Yb(),x.Wc(112,"\n    "),x.Yb(),x.Wc(113,"\n\n    "),x.Zb(114,"div",28,29),x.Wc(116,"\n      "),x.Zb(117,"tabset",30),x.Wc(118,"\n        "),x.Zb(119,"tab",31),x.hc("selectTab",(function(){return e.onSelectTab("dgvGratuity")})),x.Wc(120,"\n          "),x.Wc(121,"\n            "),x.Zb(122,"div",32),x.Wc(123,"\n            "),x.Uc(124,_,5,2,"div",33),x.Wc(125,"\n            \n            "),x.Zb(126,"div",34),x.Wc(127,"\n              "),x.Wc(128," \n              "),x.Uc(129,j,4,2,"div",35),x.Wc(130,"\n              "),x.Zb(131,"div",36),x.Wc(132,"\n                "),x.Vb(133,37),x.Wc(134,"\n              "),x.Yb(),x.Wc(135,"\n              "),x.Zb(136,"div",36),x.Wc(137,"\n                "),x.Vb(138,37),x.Wc(139,"\n              "),x.Yb(),x.Wc(140,"\n              "),x.Zb(141,"div",36),x.Wc(142,"\n                "),x.Vb(143,37),x.Wc(144,"\n              "),x.Yb(),x.Wc(145,"\n              "),x.Zb(146,"div",36),x.Wc(147,"\n                "),x.Zb(148,"button",38),x.hc("click",(function(){return e.obj.ButtonClick("Gratuity")})),x.Wc(149),x.Yb(),x.Wc(150,"\n              "),x.Yb(),x.Wc(151,"\n              "),x.Zb(152,"div",39),x.Wc(153,"\n                "),x.Zb(154,"label"),x.Wc(155),x.Yb(),x.Zb(156,"label",40),x.Wc(157),x.Yb(),x.Wc(158,"\n              "),x.Yb(),x.Wc(159,"\n              "),x.Zb(160,"div",39),x.Wc(161,"\n                "),x.Zb(162,"label"),x.Wc(163),x.Yb(),x.Zb(164,"label",40),x.Wc(165),x.Yb(),x.Wc(166," "),x.Zb(167,"label"),x.Wc(168),x.Yb(),x.Zb(169,"label",40),x.Wc(170),x.Yb(),x.Wc(171," "),x.Zb(172,"label"),x.Wc(173),x.Yb(),x.Zb(174,"label",40),x.Wc(175),x.Yb(),x.Wc(176,"\n              "),x.Yb(),x.Wc(177,"\n              "),x.Zb(178,"div",39),x.Wc(179,"\n                "),x.Zb(180,"label"),x.Wc(181),x.Yb(),x.Zb(182,"label",40),x.Wc(183),x.Yb(),x.Wc(184,"\n              "),x.Yb(),x.Wc(185,"\n              "),x.Zb(186,"div",39),x.Wc(187,"\n                "),x.Zb(188,"label"),x.Wc(189),x.Yb(),x.Zb(190,"label",40),x.Wc(191),x.Yb(),x.Wc(192,"\n              "),x.Yb(),x.Wc(193,"\n              "),x.Uc(194,H,4,2,"div",35),x.Wc(195,"\n              "),x.Uc(196,Z,4,2,"div",35),x.Wc(197,"\n              "),x.Uc(198,X,4,2,"div",35),x.Wc(199,"\n            "),x.Yb(),x.Wc(200,"\n          "),x.Yb(),x.Wc(201,"\n        "),x.Yb(),x.Wc(202,"\n        "),x.Zb(203,"tab",31),x.hc("selectTab",(function(){return e.onSelectTab("dgvLeaveEncash")})),x.Wc(204,"\n          "),x.Zb(205,"div",41),x.Wc(206,"\n            "),x.Uc(207,q,4,2,"div",33),x.Wc(208,"\n            "),x.Zb(209,"div",42),x.Wc(210,"\n              "),x.Uc(211,Q,4,2,"div",35),x.Wc(212,"\n              "),x.Zb(213,"div",36),x.Wc(214,"\n                "),x.Vb(215,37),x.Wc(216,"\n              "),x.Yb(),x.Wc(217,"\n              "),x.Zb(218,"div",36),x.Wc(219,"\n                "),x.Zb(220,"button",38),x.hc("click",(function(){return e.obj.ButtonClick("LeaveEncash")})),x.Wc(221),x.Yb(),x.Wc(222,"\n              "),x.Yb(),x.Wc(223,"\n              "),x.Uc(224,J,4,2,"div",35),x.Wc(225,"\n            "),x.Yb(),x.Wc(226,"\n          "),x.Yb(),x.Wc(227,"\n        "),x.Yb(),x.Wc(228,"\n        "),x.Zb(229,"tab",31),x.hc("selectTab",(function(){return e.onSelectTab("dgvUPS")})),x.Wc(230,"\n          "),x.Zb(231,"div",41),x.Wc(232,"\n            "),x.Uc(233,K,4,2,"div",33),x.Wc(234,"\n            "),x.Zb(235,"div",42),x.Wc(236,"\n              "),x.Zb(237,"div",36),x.Wc(238,"\n                "),x.Vb(239,37),x.Wc(240,"\n              "),x.Yb(),x.Wc(241,"\n              "),x.Uc(242,z,4,2,"div",35),x.Wc(243,"\n            "),x.Yb(),x.Wc(244,"\n          "),x.Yb(),x.Wc(245,"\n        "),x.Yb(),x.Wc(246,"\n        "),x.Zb(247,"tab",31),x.hc("selectTab",(function(){return e.onSelectTab("dgvNoticePay")})),x.Wc(248,"\n          "),x.Zb(249,"div",41),x.Wc(250,"\n            "),x.Uc(251,$,4,2,"div",33),x.Wc(252,"\n            "),x.Zb(253,"div",42),x.Wc(254,"\n              "),x.Zb(255,"div",36),x.Wc(256,"\n                "),x.Vb(257,37),x.Wc(258,"\n              "),x.Yb(),x.Wc(259,"\n              "),x.Uc(260,tt,4,2,"div",35),x.Wc(261,"\n            "),x.Yb(),x.Wc(262,"\n          "),x.Yb(),x.Wc(263,"\n        "),x.Yb(),x.Wc(264,"\n        "),x.Zb(265,"tab",31),x.hc("selectTab",(function(){return e.onSelectTab("dgvOthAdd")})),x.Wc(266,"\n          "),x.Zb(267,"div",41),x.Wc(268,"\n            "),x.Uc(269,et,4,2,"div",33),x.Wc(270,"\n            "),x.Zb(271,"div",42),x.Wc(272,"\n              "),x.Zb(273,"div",36),x.Wc(274,"\n                "),x.Vb(275,37),x.Wc(276,"\n              "),x.Yb(),x.Wc(277,"\n              "),x.Uc(278,at,4,2,"div",35),x.Wc(279,"\n            "),x.Yb(),x.Wc(280,"\n          "),x.Yb(),x.Wc(281,"\n        "),x.Yb(),x.Wc(282,"\n        "),x.Zb(283,"tab",31),x.hc("selectTab",(function(){return e.onSelectTab("dgvOthDed")})),x.Wc(284,"\n          "),x.Zb(285,"div",41),x.Wc(286,"\n            "),x.Uc(287,st,4,2,"div",33),x.Wc(288,"\n            "),x.Zb(289,"div",42),x.Wc(290,"\n              "),x.Zb(291,"div",36),x.Wc(292,"\n                "),x.Vb(293,37),x.Wc(294,"\n              "),x.Yb(),x.Wc(295,"\n              "),x.Uc(296,it,4,2,"div",35),x.Wc(297,"\n            "),x.Yb(),x.Wc(298,"\n          "),x.Yb(),x.Wc(299,"\n        "),x.Yb(),x.Wc(300,"\n        "),x.Zb(301,"tab",31),x.hc("selectTab",(function(){return e.onSelectTab("dgvLoanBal")})),x.Wc(302,"\n          "),x.Zb(303,"div",41),x.Wc(304,"\n            "),x.Uc(305,lt,4,2,"div",33),x.Wc(306,"\n            "),x.Zb(307,"div",42),x.Wc(308,"\n              "),x.Zb(309,"div",36),x.Wc(310,"\n                "),x.Vb(311,37),x.Wc(312,"\n              "),x.Yb(),x.Wc(313,"\n              "),x.Uc(314,nt,4,2,"div",35),x.Wc(315,"\n            "),x.Yb(),x.Wc(316,"\n          "),x.Yb(),x.Wc(317,"\n        "),x.Yb(),x.Wc(318,"\n      "),x.Yb(),x.Wc(319,"\n\n    "),x.Yb(),x.Wc(320,"\n\n  "),x.Yb(),x.Wc(321,"\n"),x.Yb()),2&t&&(x.Db(7),x.Yc("\n        ",e.obj.Title," "),x.Db(1),x.Sc("background-color",e.obj.StatusColor),x.Db(1),x.Xc(e.obj.DocStatus),x.Db(7),x.tc("ngIf",e.ViewModel.ApproveVisibility),x.Db(2),x.tc("ngIf",e.ViewModel.PostVisiblility),x.Db(2),x.tc("ngIf",e.ViewModel.PostVisiblility),x.Db(4),x.Xc(x.nc(25,92,"Print")),x.Db(5),x.Xc(x.nc(30,94,"Preview")),x.Db(5),x.Xc(x.nc(35,96,"Export")),x.Db(5),x.Xc(x.nc(40,98,"Attachments")),x.Db(5),x.Xc(x.nc(45,100,"SMTP_Email")),x.Db(5),x.Xc(x.nc(50,102,"Clear")),x.Db(3),x.tc("ngIf",e.obj.UnPostVisiblility),x.Db(9),x.tc("isOpen",e.IsAccordionOpen),x.Db(7),x.Kb("fa-chevron-down",e.IsAccordionOpen)("fa-chevron-up",!e.IsAccordionOpen),x.Db(10),x.tc("ngIf",e.obj.txtDocNo.Visible),x.Db(2),x.tc("ngIf",e.obj.dtpDocDate.Visible),x.Db(5),x.tc("ngIf",e.obj.EmployeeList.Visible),x.Db(2),x.tc("ngIf",e.obj.cmbSettlementType.Visible),x.Db(5),x.tc("ngIf",e.obj.dtpDateOfJoining.Visible),x.Db(2),x.tc("ngIf",e.obj.dtpDateOfRelieving.Visible),x.Db(5),x.Xc(e.lblActRelievingDate),x.Db(6),x.tc("ngIf",e.obj.txtRemarks.Visible),x.Db(2),x.tc("ngIf",e.obj.txtNetAmount.Visible),x.Db(12),x.uc("heading",e.tpGratuity),x.tc("removable",!1),x.Db(5),x.tc("ngIf",e.dgvGratuity.Visible),x.Db(5),x.tc("ngIf",e.cmbResignType.Visible),x.Db(4),x.tc("obj",e.chkCalcBasedOnLastSal)("group",e.form),x.Db(5),x.tc("obj",e.chkCalcBasedOnActDays)("group",e.form),x.Db(5),x.tc("obj",e.GratuityRemarks)("group",e.form),x.Db(6),x.Xc(e.btnCalcGratuity),x.Db(6),x.Xc(e.lbl1GratuityTotalDays),x.Db(2),x.Xc(e.lblGratuityTotalDays),x.Db(6),x.Xc(e.lbl1GratuityServiceDays),x.Db(2),x.Xc(e.lblGratuityServiceDays),x.Db(3),x.Xc(e.lbl1GratuityLOPDays),x.Db(2),x.Xc(e.lblGratuityLOPDays),x.Db(3),x.Xc(e.lbl1GratuityBalDays),x.Db(2),x.Xc(e.lblGratuityBalDays),x.Db(6),x.Xc(e.lbl1GratuityTotalGrDays),x.Db(2),x.Xc(e.lblGratuityTotalGrDays),x.Db(6),x.Xc(e.lbl1GratuityTaken),x.Db(2),x.Xc(e.lblGratuityTaken),x.Db(3),x.tc("ngIf",e.txtGratuityAmount.Visible),x.Db(2),x.tc("ngIf",e.txtAvailedGratuityAmount.Visible),x.Db(2),x.tc("ngIf",e.txtPartialGratuityAmount.Visible),x.Db(5),x.uc("heading",e.tpLeaveEncashment),x.tc("removable",!1),x.Db(4),x.tc("ngIf",e.dgvLeaveEncash.Visible),x.Db(4),x.tc("ngIf",e.txtCumLeaveSalBalAmt.Visible),x.Db(4),x.tc("obj",e.LeaveRemarks)("group",e.form),x.Db(6),x.Xc(e.btnCalcLE),x.Db(3),x.tc("ngIf",e.txtLEAmount.Visible),x.Db(5),x.uc("heading",e.tpUnProcessedSalary),x.tc("removable",!1),x.Db(4),x.tc("ngIf",e.dgvUPS.Visible),x.Db(6),x.tc("obj",e.UPSRemarks)("group",e.form),x.Db(3),x.tc("ngIf",e.txtUPSAmount.Visible),x.Db(5),x.uc("heading",e.tpNoticePay),x.tc("removable",!1),x.Db(4),x.tc("ngIf",e.dgvNoticePay.Visible),x.Db(6),x.tc("obj",e.NoticePayRemarks)("group",e.form),x.Db(3),x.tc("ngIf",e.txtNPAmount.Visible),x.Db(5),x.uc("heading",e.tpOtherAdditions),x.tc("removable",!1),x.Db(4),x.tc("ngIf",e.dgvOthAdd.Visible),x.Db(6),x.tc("obj",e.OAddRemarks)("group",e.form),x.Db(3),x.tc("ngIf",e.txtOthAddAmount.Visible),x.Db(5),x.uc("heading",e.tpOtherDeductions),x.tc("removable",!1),x.Db(4),x.tc("ngIf",e.dgvOthDed.Visible),x.Db(6),x.tc("obj",e.ODedRemarks)("group",e.form),x.Db(3),x.tc("ngIf",e.txtOthDedAmount.Visible),x.Db(5),x.uc("heading",e.tpLoanBalances),x.tc("removable",!1),x.Db(4),x.tc("ngIf",e.dgvLoanBal.Visible),x.Db(6),x.tc("obj",e.LoanRemarks)("group",e.form),x.Db(3),x.tc("ngIf",e.txtLoanBalAmount.Visible))},directives:[f.t,P.a,P.c,A.e,A.b,M.a,E.a],pipes:[L.d],encapsulation:2}),t}(),rt=function t(){_classCallCheck(this,t),this.Days=0}},NM0h:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var s=a("Do2H"),i=a("Lp6j"),l=function(){function t(){_classCallCheck(this,t),this.ChangeValueXML=null,this.DetailsXML=null,this.AMCode=null,this.AMName=null,this.AMPurchaseValue=null,this.HistoryXML=null,this.DocNo=null,this.XML=null,this.DocSave=null,this.CodePrefix=null,this.Sno=null,this.AssetClassID=0,this.DeprBookID=0,this.AcqnCostACCID=0,this.AccumDeprACCID=0,this.AcqnCostDispACCID=0,this.AccumDeprDispACCID=0,this.GainsDispACCID=0,this.LossDispACCID=0,this.MaintExpenseACCID=0,this.DeprExpenseACCID=0,this.PostingGroupID=0,this.AMStatusID=0,this.CodeNumber=0,this.AMAssetID=0,this.AMParentAssetID=0,this.IsGroup=!1,this.Post=!1,this.StatusID=0,this.DeprBookMethod=0,this.DeprBookMethodBasedOn=0,this.AveragingMethodID=0,this.DeprScheduleID=0,this.DeprTypeID=0,this.AssetClassCode=null,this.AssetClassName=null,this.GUID=null,this.DeprBookCode=null,this.DeprBookName=null,this.PostGroupCode=null,this.PostGroupName=null,this.AMGUID=null,this.RecordType=null,this.AMGroup=!1,this.IsIncreaseAssetValue=!1,this.EmpName=null,this.EmpCode=null,this.EmpID=0,this.SelectedNodeID=0,this.PostCCID=0,this.PostAssetID=0,this.ScheduleID=0,this.LocationID=0,this.AddressXML=null,this.NotesXML=null,this.ContactsXML=null,this.CustomCostCenterFieldsQuery=null,this.CustomFieldsQuery=null,this.PrimaryContactQuery=null,this.AttachmetsXML=null,this.DepreciationXML=null,this.JVXML=null,this.Description=null,this.DeprStartValue=0,this.ChangeVal=0,this.AssetNetValueChange=0,this.DeprBookMethodBasedOnValue=0,this.TotalYears=0}return _createClass(t,[{key:"SaveAssetClass",value:function(){0==this.AssetClassID&&(this.GUID=i.e.NewGuid());var t=[];return t.push(this.AssetClassID),t.push(null!=this.AssetClassCode?this.AssetClassCode:""),t.push(null!=this.AssetClassName?this.AssetClassName:""),t.push(this.PostingGroupID),t.push(this.DeprBookID),t.push(this.DeprTypeID),t.push(this.TotalYears),t.push(this.StatusID),t.push(s.a.SessionManager.CompanyGUID),t.push(this.GUID),t.push(""),t.push(s.a.SessionManager.UserName),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.accounting.SetAssetClass(t)}},{key:"PostJVvoucher",value:function(){this.GUID=i.e.NewGuid();var t=[];return t.push(this.PostAssetID),t.push(this.PostCCID),t.push(this.JVXML),t.push(this.Post),t.push(this.DeprTypeID),t.push(this.DocXML),t.push(this.DocSave),t.push(this.DepreciationXML),t.push(this.RecordType),t.push(s.a.SessionManager.CompanyGUID),t.push(this.GUID),t.push(s.a.SessionManager.UserName),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.accounting.GetPostJvVoucher(t)}},{key:"SetAssetDispose",value:function(t){this.GUID=i.e.NewGuid();var e=[];return e.push(this.PostAssetID),e.push(t.ToString("dd/MMM/yyyy")),e.push(this.PostCCID),e.push(this.JVXML),e.push(this.Post),e.push(this.DeprTypeID),e.push(this.DocXML),e.push(this.DocSave),e.push(this.DepreciationXML),e.push(this.RecordType),e.push(s.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.LanguageID),s.a.accounting.SetAssetDispose(e)}},{key:"SaveDeprBook",value:function(t,e,a){0==this.DeprBookID&&(this.GUID=i.e.NewGuid());var l=[];return l.push(this.DeprBookID),l.push(this.DeprBookCode),l.push(this.DeprBookName),l.push(this.DeprBookMethod),l.push(this.DeprBookMethodBasedOn),l.push(this.DeprBookMethodBasedOnValue),l.push(this.StatusID),l.push(this.AveragingMethodID),l.push(t),l.push(e),l.push(a),l.push(s.a.SessionManager.CompanyGUID),l.push(this.GUID),l.push(""),l.push(s.a.SessionManager.UserName),l.push(s.a.SessionManager.UserID),l.push(s.a.SessionManager.LanguageID),s.a.accounting.SetDeprBook(l)}},{key:"SaveFAPostingGroup",value:function(){0==this.PostingGroupID&&(this.GUID=i.e.NewGuid());var t=[];return t.push(this.PostingGroupID),t.push(this.PostGroupCode),t.push(this.PostGroupName),t.push(this.AcqnCostACCID),t.push(this.AccumDeprACCID),t.push(this.AcqnCostDispACCID),t.push(this.AccumDeprDispACCID),t.push(this.GainsDispACCID),t.push(this.LossDispACCID),t.push(this.MaintExpenseACCID),t.push(this.DeprExpenseACCID),t.push(this.StatusID),t.push(0),t.push(this.IsGroup),t.push(s.a.SessionManager.CompanyGUID),t.push(this.GUID),t.push(s.a.SessionManager.UserName),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.accounting.SetPostingGroup(t)}},{key:"SetAssetManagementDetails",value:function(){var t=[];return t.push(this.AMAssetID),t.push(this.AMCode),t.push(this.AMName),t.push(this.AMStatusID),t.push(this.AMPurchaseValue),t.push(this.AMParentAssetID),t.push(this.AMGroup),t.push(this.CodePrefix),t.push(this.CodeNumber),t.push(this.Sno),t.push(this.DetailsXML),t.push(this.ChangeValueXML),t.push(this.CustomFieldsQuery),t.push(this.CustomCostCenterFieldsQuery),t.push(this.DepreciationXML),t.push(this.HistoryXML),t.push(this.NotesXML),t.push(this.AttachmetsXML),t.push(s.a.SessionManager.CompanyGUID),t.push(this.AMGUID),t.push(s.a.SessionManager.UserName),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.accounting.SetAssetManagementDetails(t).toPromise()}},{key:"PostDeprJV",value:function(){this.GUID=i.e.NewGuid();var t=[];return t.push(this.PostCCID),t.push(this.JVXML),t.push(this.Post),t.push(s.a.SessionManager.CompanyGUID),t.push(this.GUID),t.push(s.a.SessionManager.UserName),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),t.push(s.a.SessionManager.RoleID),s.a.accounting.PostDeprJV(t)}},{key:"PostDeprJVSummary",value:function(t,e,a,l,n){this.GUID=i.e.NewGuid();var o=[];return o.push(t),o.push(e),o.push(a),o.push(l),o.push(n),o.push(s.a.SessionManager.CompanyGUID),o.push(s.a.SessionManager.UserName),o.push(s.a.SessionManager.UserID),o.push(s.a.SessionManager.LanguageID),s.a.accounting.SetDeprPostingJVSummary(o).toPromise()}},{key:"ChangeValue",value:function(t,e){this.GUID=i.e.NewGuid();var a=[];return a.push(this.PostAssetID),a.push(t),a.push(this.ChangeVal),a.push(this.AssetNetValueChange),a.push(e.ToString("dd/MMM/yyyy")),a.push(this.Description),a.push(this.DepreciationXML),a.push(this.ChangeValueXML),a.push(this.HistoryXML),a.push(this.LocationID),a.push(this.IsIncreaseAssetValue),a.push(this.JVXML),a.push(this.ChangeValueTypeID),a.push(s.a.SessionManager.CompanyGUID),a.push(this.GUID),a.push(s.a.SessionManager.UserName),a.push(s.a.SessionManager.UserID),a.push(s.a.SessionManager.LanguageID),s.a.accounting.SetAssetChangeValue(a)}},{key:"DisposeReverse",value:function(t){var e=[];return e.push(t),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.LanguageID),s.a.accounting.DisposeReverse(e)}}],[{key:"GetAssetClassDetails",value:function(t){var e=[];return e.push(t),e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.LanguageID),s.a.accounting.GetAssetClassDetails(e)}},{key:"GetPostingGroupDetails",value:function(t){var e=[];return e.push(t),e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.LanguageID),s.a.accounting.GetPostingGroupDetails(e)}},{key:"GetDeprBookDetails",value:function(t){var e=[];return e.push(t),e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.LanguageID),s.a.accounting.GetDeprBookDetails(e)}},{key:"GetAssetManagementDetails",value:function(t){var e=[];return e.push(t),e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.LanguageID),s.a.accounting.GetAssetManagementDetails(e)}},{key:"GetAssetDeprSchDetails",value:function(t){var e=[];return e.push(t),e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.LanguageID),s.a.accounting.GetAssetDeprSchDetails(e)}},{key:"DeleteAsset",value:function(t){var e=[];return e.push(t),e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.RoleID),s.a.accounting.DeleteAsset(e)}},{key:"DeleteAssetDeprSchedule",value:function(t){var e=[];return e.push(t),e.push(s.a.SessionManager.RoleID),e.push(s.a.SessionManager.LanguageID),s.a.accounting.DeleteAssetDeprSchedule(e)}},{key:"DeleteAssetRefDoc",value:function(t,e){var a=[];return a.push(t),a.push(e),a.push(s.a.SessionManager.UserID),s.a.accounting.DeleteAssetRefDoc(a)}},{key:"SetsPostDeprReverseJV",value:function(t,e,a){var i=[];return i.push(t),i.push(e),i.push(a),i.push(s.a.SessionManager.CompanyGUID),i.push(s.a.SessionManager.UserName),i.push(s.a.SessionManager.UserID),i.push(s.a.SessionManager.LanguageID),s.a.accounting.SetsPostDeprReverseJV(i)}}]),t}()},R89Y:function(t,e,a){"use strict";a.d(e,"a",(function(){return g}));var s=a("3Pt+"),i=a("fXoL"),l=a("ofXK"),n=a("sT9C"),o=a("sYmb");function r(t,e){if(1&t){var a=i.ac();i.Zb(0,"span",7),i.hc("click",(function(){return i.Ic(a),i.lc().obj.Button_Click("Process")})),i.Ub(1,"i",18),i.Wc(2),i.mc(3,"translate"),i.Yb()}2&t&&(i.Db(2),i.Xc(i.nc(3,1,"Process")))}function d(t,e){if(1&t){var a=i.ac();i.Zb(0,"span",7),i.hc("click",(function(){return i.Ic(a),i.lc().obj.Button_Click("Post")})),i.Ub(1,"i",19),i.Wc(2),i.mc(3,"translate"),i.Yb()}2&t&&(i.Db(2),i.Xc(i.nc(3,1,"Post")))}function h(t,e){if(1&t){var a=i.ac();i.Zb(0,"span",7),i.hc("click",(function(){return i.Ic(a),i.lc().obj.Button_Click("UnPost")})),i.Ub(1,"i",20),i.Wc(2),i.mc(3,"translate"),i.Yb()}2&t&&(i.Db(2),i.Xc(i.nc(3,1,"UnPost")))}function c(t,e){if(1&t){var a=i.ac();i.Zb(0,"span",7),i.hc("click",(function(){return i.Ic(a),i.lc().obj.Button_Click("Export")})),i.Ub(1,"i",21),i.Wc(2),i.mc(3,"translate"),i.Yb()}2&t&&(i.Db(2),i.Xc(i.nc(3,1,"Export")))}var u=function(){return{standalone:!0}},g=function(){var t=function(){function t(){_classCallCheck(this,t),this.form=new s.j({})}return _createClass(t,[{key:"ngOnInit",value:function(){this.obj=this.params.obj}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Nb({type:t,selectors:[["app-consolidated-monthly-payroll"]],decls:60,vars:22,consts:[[1,"maincontainer"],[1,"page-header"],[1,"page-title_div"],[1,"page-title"],[1,"page-Subtitle",3,"dblclick"],[1,"btnMetroDiv","secondary-btn-group",2,"margin-right","6px"],["class","secondary-btn",3,"click",4,"ngIf"],[1,"secondary-btn",3,"click"],[1,"fa-light","fa-broom"],[1,"fa-light","fa-filter"],[1,"fa-light","fa-search"],[1,"main_div",2,"display","flex","flex-direction","column","padding","10px"],[1,"row",2,"height","30px"],[1,"form-group","col-xl-3","col-md-4","col-sm-6","col-xs-12","divChk"],["type","checkbox",3,"ngModel","ngModelOptions","ngModelChange"],[3,"click"],[1,"documentgrid",2,"flex","1","overflow","auto"],[2,"width","100%","height","100%",3,"obj"],[1,"fa-light","fa-gears"],[1,"fa-light","fa-floppy-disk-circle-arrow-right"],[1,"fa-light","fa-file-times"],[1,"fa-light","fa-file-export"]],template:function(t,e){1&t&&(i.Zb(0,"div",0),i.Wc(1,"\n      "),i.Zb(2,"div",1),i.Wc(3,"\n        "),i.Zb(4,"div",2),i.Wc(5,"\n          "),i.Zb(6,"span",3),i.Wc(7),i.Zb(8,"span",4),i.hc("dblclick",(function(t){return e.obj.sPayrollMonth_MouseDoubleClick(t)})),i.Wc(9),i.Yb(),i.Wc(10,"\n          "),i.Yb(),i.Wc(11,"\n        "),i.Yb(),i.Wc(12,"\n\n        "),i.Zb(13,"div",5),i.Wc(14,"\n          "),i.Uc(15,r,4,3,"span",6),i.Wc(16,"\n          "),i.Uc(17,d,4,3,"span",6),i.Wc(18,"\n          "),i.Zb(19,"span",7),i.hc("click",(function(){return e.obj.Button_Click("Clear")})),i.Ub(20,"i",8),i.Wc(21),i.mc(22,"translate"),i.Yb(),i.Wc(23,"\n          "),i.Uc(24,h,4,3,"span",6),i.Wc(25,"\n          "),i.Zb(26,"span",7),i.hc("click",(function(){return e.obj.Button_Click("Filter")})),i.Ub(27,"i",9),i.Wc(28),i.mc(29,"translate"),i.Yb(),i.Wc(30,"\n          "),i.Zb(31,"span",7),i.hc("click",(function(){return e.obj.Button_Click("Load")})),i.Ub(32,"i",10),i.Wc(33),i.mc(34,"translate"),i.Yb(),i.Wc(35,"\n          "),i.Uc(36,c,4,3,"span",6),i.Wc(37,"\n        "),i.Yb(),i.Wc(38,"\n      "),i.Yb(),i.Wc(39,"\n    "),i.Zb(40,"div",11),i.Wc(41,"\n        "),i.Zb(42,"div",12),i.Wc(43,"\n          "),i.Zb(44,"div",13),i.Wc(45,"\n            "),i.Zb(46,"input",14),i.hc("ngModelChange",(function(t){return e.obj.IsProcessWithArrears=t})),i.Yb(),i.Wc(47,"\n            "),i.Zb(48,"label",15),i.hc("click",(function(){return e.obj.IsProcessWithArrears=!e.obj.IsProcessWithArrears})),i.Wc(49),i.mc(50,"translate"),i.Yb(),i.Wc(51,"\n        "),i.Yb(),i.Wc(52,"\n        "),i.Yb(),i.Wc(53,"\n        "),i.Zb(54,"div",16),i.Wc(55,"\n          "),i.Ub(56,"app-PactGridView",17),i.Wc(57,"  \n        "),i.Yb(),i.Wc(58,"\n    "),i.Yb(),i.Wc(59,"\n"),i.Yb()),2&t&&(i.Db(7),i.Yc("\n            ",e.obj.Title,"\n            "),i.Db(2),i.Yc("\n              ",e.obj.sPayrollMonth,"\n            "),i.Db(6),i.tc("ngIf",e.obj.PostVisiblility),i.Db(2),i.tc("ngIf",e.obj.PostVisiblility),i.Db(4),i.Xc(i.nc(22,13,"Clear")),i.Db(3),i.tc("ngIf",e.obj.UnPostVisiblility),i.Db(4),i.Xc(i.nc(29,15,"Filter")),i.Db(5),i.Xc(i.nc(34,17,"Load")),i.Db(3),i.tc("ngIf",e.obj.ExportVisiblility),i.Db(10),i.tc("ngModel",e.obj.IsProcessWithArrears)("ngModelOptions",i.xc(21,u)),i.Db(3),i.Xc(i.nc(50,19,"ProcesswithArrears")),i.Db(7),i.tc("obj",e.obj.dgvEmployees))},directives:[l.t,s.a,s.s,s.v,n.a],pipes:[o.d],encapsulation:2}),t}()},c42x:function(t,e,a){"use strict";a.d(e,"a",(function(){return d}));var s=a("3Pt+"),i=a("fXoL"),l=a("ofXK"),n=a("sT9C"),o=a("sYmb");function r(t,e){if(1&t){var a=i.ac();i.Zb(0,"span",6),i.hc("click",(function(){return i.Ic(a),i.lc().obj.Button_Click("Post")})),i.Ub(1,"i",12),i.Wc(2,"Post"),i.Yb()}}var d=function(){var t=function(){function t(){_classCallCheck(this,t),this.form=new s.j({})}return _createClass(t,[{key:"ngOnInit",value:function(){this.obj=this.params.obj}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Nb({type:t,selectors:[["app-post-att-time-sheet-to-daily-att"]],decls:36,vars:12,consts:[[2,"display","flex","position","relative","height","100%"],[2,"width","100%"],[1,"page-header"],[1,"page-title"],[1,"btnMetroDiv","secondary-btn-group",2,"margin-right","6px"],["class","secondary-btn-wicon",3,"click",4,"ngIf"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-broom"],[1,"fa-light","fa-filter"],[1,"fa-light","fa-file-export"],[1,"documentgrid","row","form-row",2,"padding","4px 12px","height","calc(100% - 50px)","width","100%"],[2,"width","100%","height","100%",3,"obj"],[1,"fa-light","fa-floppy-disk-circle-arrow-right"]],template:function(t,e){1&t&&(i.Zb(0,"div",0),i.Wc(1,"\n    "),i.Zb(2,"div",1),i.Wc(3,"\n        "),i.Zb(4,"div",2),i.Wc(5,"\n            "),i.Zb(6,"label",3),i.Wc(7),i.Yb(),i.Wc(8,"\n            "),i.Zb(9,"div",4),i.Wc(10,"\n            "),i.Uc(11,r,3,0,"span",5),i.Wc(12,"\n            "),i.Zb(13,"span",6),i.hc("click",(function(){return e.obj.Button_Click("Clear")})),i.Ub(14,"i",7),i.Wc(15),i.mc(16,"translate"),i.Yb(),i.Wc(17,"\n            "),i.Zb(18,"span",6),i.hc("click",(function(){return e.obj.Button_Click("Filter")})),i.Ub(19,"i",8),i.Wc(20),i.mc(21,"translate"),i.Yb(),i.Wc(22,"\n            "),i.Zb(23,"span",6),i.hc("click",(function(){return e.obj.Button_Click("Export")})),i.Ub(24,"i",9),i.Wc(25),i.mc(26,"translate"),i.Yb(),i.Wc(27,"\n            "),i.Yb(),i.Wc(28,"\n        "),i.Yb(),i.Wc(29,"\n        "),i.Zb(30,"div",10),i.Wc(31,"\n            "),i.Ub(32,"app-PactGridView",11),i.Wc(33,"  \n        "),i.Yb(),i.Wc(34,"\n   "),i.Yb(),i.Wc(35,"\n "),i.Yb()),2&t&&(i.Db(7),i.Xc(e.obj.Title),i.Db(4),i.tc("ngIf",e.obj.PostVisiblility),i.Db(4),i.Xc(i.nc(16,6,"Clear")),i.Db(5),i.Xc(i.nc(21,8,"Filter")),i.Db(5),i.Xc(i.nc(26,10,"lbl_Export")),i.Db(7),i.tc("obj",e.obj.dgv))},directives:[l.t,n.a],pipes:[o.d],encapsulation:2}),t}()},eBJM:function(t,e,a){"use strict";a.d(e,"a",(function(){return p}));var s,i=a("3Pt+"),l=a("Do2H"),n=a("Lp6j"),o=a("uMy8"),r=a("EQd/"),d=a("n56n"),h=a("vTM8"),c=a("dH+5"),u=a("0/4Q"),g=function t(){_classCallCheck(this,t),this.FromSlab=0,this.ToSlab=0,this.Percentage=0},m=function(){function t(e){_classCallCheck(this,t),this.prevSelectedEmp=0,this.iSelectedEmpSeqNo=0,this.prevSelectReperson=0,this.BasicIndex=-1,this.TotalSalaryIndex=0,this.Form12Section1Index=0,this.Form12Section2Index=0,this.Exemptionsunder10Index=0,this.HRA10BasicIndex=0,this.HRAAcutalIndex=0,this.HRAMetroNonMetroIndex=0,this.HRAExemptionIndex=0,this.TDSPaidIndex=0,this.NetTaxPayableIndex=0,this.InhandAmountIndex=0,this.MonthlyDeducIndex=0,this.intTotalIncometaxPayableindex=0,this.TotAmtOthExemptUs10Index=0,this.ConveyanceIndex=0,this.ChildrenEduIndex=0,this.StandardDedIndex=0,this.MedicalIndex=0,this.LTAIndex=0,this.LeaveEncashIndex=0,this.FoodIndex=0,this.GratuityIndex=0,this.BalanceSalInc12BAIndex=0,this.ProfessionalTaxIndex=0,this.NetTaxableSalIndex=0,this.GrossTotalIncomeIndex=0,this.IncomefromHousePropertyIndex=0,this.intDeducunder8oCto80CCCIndex=0,this.intTotalDeducunder8oCto80CCCIndex=0,this.intOtherDeducunder8oCto80CCCIndex=0,this.dblTotalIncomeIndex=0,this.dblTotalIncomeRoundoffIndex=0,this.intOtherDeducunder8oCto80CCCIndex1=0,this.dblTaxOnTotalIncomeIndex=0,this.dblRebateIndex=0,this.dblTaxPayableAfterRebateIndex=0,this.dblSurchargeIndex=0,this.dblTaxPayableIndex=0,this.dblEducationCessIndex=0,this.dblSecHighEduCessIndex=0,this.dblbalanceSalaryInc12BA=0,this.dblTotalCellSalary=0,this.dPerq1=0,this.dPerq2=0,this.HraMinValue=0,this.dblMedicalAmount=0,this.dblLTAAmount=0,this.dblLeaveEncashAmount=0,this.dblFoodAmount=0,this.dblGratuityAmount=0,this.dblTotaldeduction80ccc80c=0,this.dblNetTaxableSal=0,this.dblGrossTotalIncome=0,this.dblTDS=0,this.dblNetTaxPayable=0,this.dblInhandAmount=0,this.dblSelfletoutamount=0,this.dblTotalIncome=0,this.dblTotalIncomeRoundoff=0,this.dblServiceDays=0,this.dblStandardDeduction=0,this.lstTaxSalbs=new Array,this.MessageDisplay="",this.txtDesignation=new r.d,this.lstResponsiblePerson=new d.b,this.cmbYear=new u.e;try{this.ITComputationViewModel=e,this.BindGridColumns(),this.MessageDisplay=""}catch(a){Logger.ErrorLog("Error : "+a),this.MessageDisplay=a.Message}}return _createClass(t,[{key:"BindGridColumns",value:function(){try{var t;(t=new c.b).HeaderText="SNo",t.width=10,this.grdIncomeTax.ReportColumns.push(t),(t=new c.b).HeaderText="Header",t.width=20,this.grdIncomeTax.ReportColumns.push(t),(t=new c.b).HeaderText="ComponentID",t.width=25,this.grdIncomeTax.ReportColumns.push(t),(t=new c.b).HeaderText="Salary Breakup",t.width=220,this.grdIncomeTax.ReportColumns.push(t),(t=new c.b).HeaderText="Investment & Bill Details",t.width=100,this.grdIncomeTax.ReportColumns.push(t)}catch(e){Logger.ErrorLog("Error : "+e),this.MessageDisplay=e.message}}},{key:"clear",value:function(t){this.MessageDisplay="",this.prevSelectedEmp=0,this.prevSelectReperson=0,this.dblbalanceSalaryInc12BA=this.dblTotalCellSalary=this.dPerq1=this.dPerq2=this.HraMinValue=this.dblMedicalAmount=this.dblLTAAmount=this.dblLeaveEncashAmount=this.dblFoodAmount=this.dblGratuityAmount=0,this.dblTotaldeduction80ccc80c=this.dblNetTaxableSal=this.dblGrossTotalIncome=this.dblTotalIncome=this.dblTotalIncomeRoundoff=this.dblServiceDays=this.dblTDS=this.dblNetTaxPayable=this.dblInhandAmount=0,this.dblStandardDeduction=0,this.grdIncomeTax.Clear(),this.txtDesignation.Text="",1==t&&(this.lstEmployee.SelectedValue=this.lstEmployeeName.SelectedValue=this.lstResponsiblePerson.SelectedValue=null,this.lstEmployee.SelectedValue=this.lstEmployeeName.SelectedValue=this.lstResponsiblePerson.SelectedValue=null)}},{key:"btnSave_Click",value:function(t){if(null!=t)try{if("Clear"==t)this.clear(1);else if("Save"==t)try{var e=this.ValidateData();this.ITComputationViewModel.sbValidation=null,this.ITComputationViewModel.sbComputationData=null;var a=0,s="";if(0==e.length){s+="<Rows>";for(var i=0;i<this.grdIncomeTax.Data.length;i++)null!=this.grdIncomeTax.Data[i].Cells[1].Value&&(s+='<row HeaderID="'+this.grdIncomeTax.Data[i].Cells[1].Value,parseFloat(this.grdIncomeTax.Data[i].Cells[2].Value)<0?s+='" HeaderName="'+this.grdIncomeTax.Data[i].Cells[3].Value:s+='" HeaderName="',s+='" ComponentID="'+this.grdIncomeTax.Data[i].Cells[2].Value,s+=(a=n.e.Double(this.grdIncomeTax.Data[i].Cells[4].Value))>=0?'" ComponentAmount="'+a:'" ComponentAmount="-1',s+='" TotalAmount="'+n.e.Double(this.grdIncomeTax.Data[i].Cells[17].Value),s+='"/>');s+="</Rows>",this.ITComputationViewModel.sbComputationData=s,this.clear(1)}else s+=e,this.ITComputationViewModel.sbValidation=s;this.ITComputationViewModel.OnSaveITComputation(t)}catch(h){Logger.ErrorLog("Error : "+h)}else if("Delete"==t)try{var l=this.ValidateData();this.ITComputationViewModel.sbValidation=null,this.ITComputationViewModel.sbComputationData=null;var o="";0==l.length?(this.ITComputationViewModel.sbComputationData=o,this.clear(1)):(o+=l,this.ITComputationViewModel.sbValidation=o),this.ITComputationViewModel.OnDeleteITComputation(t)}catch(h){Logger.ErrorLog("Error : "+h)}else if("Export"==t){var r=this.ValidateData();this.ITComputationViewModel.sbValidation=null,this.ITComputationViewModel.sbComputationData=null;var d="";0==r.length?(this.ITComputationViewModel.sbComputationData=d,this.ExportToExcel()):(d+=r,this.ITComputationViewModel.sbValidation=d)}}catch(c){Logger.ErrorLog("Error : "+c),this.MessageDisplay=c.message}}},{key:"ExportToExcel",value:function(){}},{key:"ValidateData",value:function(){var t="";return null==this.lstEmployee.SelectedValue&&(t="Please select the Employee."),t}},{key:"GetMonthName",value:function(t,e){t>12&&(t-=12);var a="";switch(t){case 1:a=e?"January":"Jan";break;case 2:a=e?"February":"Feb";break;case 3:a=e?"March":"Mar";break;case 4:a=e?"April":"Apr";break;case 5:a="May";break;case 6:a=e?"June":"Jun";break;case 7:a=e?"July":"Jul";break;case 8:a=e?"August":"Aug";break;case 9:a=e?"September":"Sep";break;case 10:a=e?"October":"Oct";break;case 11:a=e?"November":"Nov";break;case 12:a=e?"December":"Dec"}return a}},{key:"lstEmployee_SelectionChanged",value:function(t){this.lstEmployee.SelectedValue!=this.prevSelectedEmp&&(this.lstEmployeeName.SelectedValue=this.lstEmployee.SelectedValue,this.clear(0),this.prevSelectedEmp=this.lstEmployee.SelectedValue,this.iSelectedEmpSeqNo=this.lstEmployee.SelectedValue,this.ITComputationViewModel.Employee_SelectedValueChanged(t),this.FillDetails())}},{key:"lstResponsiblePerson_SelectionChanged",value:function(t){null!=this.lstResponsiblePerson.SelectedValue&&this.lstResponsiblePerson.SelectedValue!=this.prevSelectReperson&&(this.prevSelectReperson=this.lstResponsiblePerson.SelectedValue,this.txtDesignation.Text="",this.dsRespPerson=this.ITComputationViewModel.lstResponsiblePerson_SelectedValueChanged(t),null!=this.dsRespPerson&&this.dsRespPerson.Tables[0].length>0&&(this.txtDesignation.Text=this.dsRespPerson.Tables[0][0].Designation.toString()))}},{key:"grdIncomeTax_CellEndEdit",value:function(t){if(4==t.ColumnIndex){var e=0;try{(e=parseFloat(this.grdIncomeTax.Data[t.RowIndex][t.ColumnIndex]))<0&&(e=0)}catch(d){}if(t.RowIndex==this.IncomefromHousePropertyIndex||t.RowIndex==this.IncomefromHousePropertyIndex+1||t.RowIndex==this.IncomefromHousePropertyIndex+2||t.RowIndex==this.IncomefromHousePropertyIndex+3||t.RowIndex==this.IncomefromHousePropertyIndex+4)return;t.RowIndex>=this.intDeducunder8oCto80CCCIndex&&t.RowIndex<this.intTotalDeducunder8oCto80CCCIndex||(this.grdIncomeTax.Data[t.RowIndex][17]=n.e.GetAmount(e)),this.dblbalanceSalaryInc12BA=this.dblTotalCellSalary+this.dPerq1+this.dPerq2-(this.HraMinValue+parseFloat(this.grdIncomeTax.Data[this.ConveyanceIndex][this.grdIncomeTax.ReportColumns.length-1].Value)+parseFloat(this.grdIncomeTax.Data[this.ChildrenEduIndex][this.grdIncomeTax.ReportColumns.length-1].Value)+parseFloat(this.grdIncomeTax.Data[this.MedicalIndex][4].Value)+parseFloat(this.grdIncomeTax.Data[this.LTAIndex][4].Value)+parseFloat(this.grdIncomeTax.Data[this.LeaveEncashIndex][4].Value)+parseFloat(this.grdIncomeTax.Data[this.FoodIndex][4].Value)+parseFloat(this.grdIncomeTax.Data[this.GratuityIndex][4].Value)+this.dblStandardDeduction),this.grdIncomeTax.Data[this.BalanceSalInc12BAIndex][17].Value=n.e.GetAmount(this.dblbalanceSalaryInc12BA),e=parseFloat(this.grdIncomeTax.Data[this.BalanceSalInc12BAIndex][17].Value)-parseFloat(this.grdIncomeTax.Data[this.ProfessionalTaxIndex][17].Value),this.grdIncomeTax.Data[this.NetTaxableSalIndex][17].Value=n.e.GetAmount(e),this.dblGrossTotalIncome=0,this.dblGrossTotalIncome=e+this.dblSelfletoutamount-parseFloat(this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+4][17].Value),this.grdIncomeTax.Data[this.GrossTotalIncomeIndex][17].Value=n.e.GetAmount(this.dblGrossTotalIncome);var a=0,s=0;if(this.dvLimit.RowFilter="ComponentID=995",null!=this.dvLimit[0].AmountLimit&&null!=this.dvLimit[0].AmountLimit&&""!=this.dvLimit[0].AmountLimit.toString()&&(s=parseFloat(this.dvLimit[0].AmountLimit)),t.RowIndex>=this.intDeducunder8oCto80CCCIndex&&t.RowIndex<=this.intTotalDeducunder8oCto80CCCIndex){for(var i=0,l=this.intDeducunder8oCto80CCCIndex+1;l<this.intTotalDeducunder8oCto80CCCIndex;l++)this.dvLimit.RowFilter="ComponentID="+parseInt(this.grdIncomeTax.Data[l].Cells[2].Value),this.dvLimit.length>0&&((a=n.e.Double(this.dvLimit[0].AmountLimit))>0&&parseInt(this.grdIncomeTax.Data[l].Cells[2].Value)==parseInt(this.dvLimit[0].ComponentID)&&parseFloat(this.grdIncomeTax.Data[l].Cells[t.ColumnIndex].Value)>a&&(this.grdIncomeTax.Data[l].Cells[t.ColumnIndex].Value=n.e.GetAmount(a),this.grdIncomeTax.Data[l].Cells[17].Value=n.e.GetAmount(a))),i+=parseFloat(this.grdIncomeTax.Data[l].Cells[t.ColumnIndex].Value),this.dvLimit.RowFilter="";this.grdIncomeTax.Data[this.intTotalDeducunder8oCto80CCCIndex][4].Value=n.e.GetAmount(i),i>s&&(i=s),this.dblTotaldeduction80ccc80c=i,this.grdIncomeTax.Data[this.intTotalDeducunder8oCto80CCCIndex][17].Value=n.e.GetAmount(this.dblTotaldeduction80ccc80c)}for(var o=0,r=this.intOtherDeducunder8oCto80CCCIndex;r<=this.intOtherDeducunder8oCto80CCCIndex1;r++)this.dvLimit.RowFilter="",this.dvLimit.RowFilter="ComponentID="+parseInt(this.grdIncomeTax.Data[r].Cells[2].Value),this.dvLimit.length>0&&((a=n.e.Double(this.dvLimit[0].AmountLimit))>0&&parseInt(this.grdIncomeTax.Data[r].Cells[2].Value)==parseInt(this.dvLimit[0].ComponentID)&&parseFloat(this.grdIncomeTax.Data[r].Cells[t.ColumnIndex].Value)>a&&(this.grdIncomeTax.Data[r].Cells[t.ColumnIndex].Value=n.e.GetAmount(a),this.grdIncomeTax.Data[r].Cells[17].Value=n.e.GetAmount(a))),o+=parseFloat(this.grdIncomeTax.Data[r].Cells[t.ColumnIndex].Value);this.grdIncomeTax.Data[this.dblTotalIncomeIndex][17].Value=n.e.GetAmount(this.dblGrossTotalIncome-this.dblTotaldeduction80ccc80c-o),this.grdIncomeTax.Data[this.dblTotalIncomeRoundoffIndex][17].Value=n.e.GetAmount(Math.round(this.dblGrossTotalIncome-this.dblTotaldeduction80ccc80c-o)),this.UpdateTotals(parseFloat(this.grdIncomeTax.Data[this.dblTotalIncomeRoundoffIndex][17].Value))}}},{key:"UpdateTotals",value:function(t){for(var e=0,a=0;a<this.lstTaxSalbs.length&&t>0;a++)if(0==a){if(t<this.lstTaxSalbs[a].ToSlab){e+=t*this.lstTaxSalbs[a].Percentage;break}e+=this.lstTaxSalbs[a].ToSlab*this.lstTaxSalbs[a].Percentage}else{if(t<this.lstTaxSalbs[a].ToSlab){e+=(t-this.lstTaxSalbs[a-1].ToSlab)*this.lstTaxSalbs[a].Percentage;break}e+=(this.lstTaxSalbs[a].ToSlab-this.lstTaxSalbs[a-1].ToSlab)*this.lstTaxSalbs[a].Percentage}this.grdIncomeTax.Data[this.dblTaxOnTotalIncomeIndex][17].Value=n.e.GetAmount(Math.round(e));var s,i=0;(s=parseFloat(this.grdIncomeTax.Data[this.dblTaxOnTotalIncomeIndex][17].Value))>0&&(parseInt(this.cmbYear.SelectedValue)<2016?t<=5e5&&(i=2e3):2016==parseInt(this.cmbYear.SelectedValue)?t<=5e5&&(i=5e3):2017==parseInt(this.cmbYear.SelectedValue)||2018==parseInt(this.cmbYear.SelectedValue)?t<=35e4&&(i=2500):parseInt(this.cmbYear.SelectedValue)>=2019&&t<=5e5&&(i=12500)),s<i?this.grdIncomeTax.Data[this.dblRebateIndex][17].Value=n.e.GetAmount(Math.round(s)):this.grdIncomeTax.Data[this.dblRebateIndex][17]=n.e.GetAmount(Math.round(i)),s-i<0?(this.grdIncomeTax.Data[this.dblTaxPayableAfterRebateIndex][17]=0,e=0):(this.grdIncomeTax.Data[this.dblTaxPayableAfterRebateIndex][17]=n.e.GetAmount(s-i),e=s-i);var r,d=0,c=null,u=new h.a;if(this.dsTaxData.Tables[7].length>0){var g;r=new o.c("Basic",""),u.push("Basic",r),u.Basic.setFieldValue(parseFloat(this.dsTaxData.Tables[3][0].BasicMonthly).toString()),r=new o.c("TotalIncome",""),u.push("TotalIncome",r),u.TotalIncome.setFieldValue(this.dblTotalIncomeRoundoff),c=this.dsTaxData.Tables[8];var m=this.dsTaxData.Tables[3];if((c=this.dsTaxData.Tables[8].filter((function(t){return 1==t.Type&&"OverTime"!=t.FieldType}))).length>0)for(var b=0;b<c.length;b++)null!=(g=this.dsTaxData.Tables[8].Select("ComponentID="+c[b].ComponentID))&&g.length>0&&(r=new o.c(c[b].ComponentName.toString(),""),u.push(c[b].ComponentName.toString(),r),u[c[b].ComponentName.toString()].setFieldValue(m[0]["Earning"+g[0].SNo.toString()].toString()));if((c=this.dsTaxData.Tables[8].filter((function(t){return 2==t.Type&&"OverTime"!=t.FieldType}))).length>0)for(var D=0;D<c.length;D++)null!=(g=this.dsTaxData.Tables[8].Select("ComponentID="+c[D].ComponentID))&&g.length>0&&(r=new o.c(c[D].ComponentName.toString(),""),u.push(c[D].ComponentName.toString(),r),u[c[D].ComponentName.toString()].setFieldValue(m[0]["Deduction"+g[0].SNo.toString()].toString()))}var p=u;this.dvTaxSlabs.length>0&&null!=this.dvTaxSlabs[0].Surcharge&&null!=this.dvTaxSlabs[0].Surcharge&&""!=this.dvTaxSlabs[0].Surcharge.toString().Trim()&&(d=parseFloat(l.a.eval.EvaluateExpression(this.dvTaxSlabs[0].Surcharge.toString(),p))),this.grdIncomeTax.Data[this.dblSurchargeIndex].Cells[3].Value="Surcharge @ "+d+"%",this.grdIncomeTax.Data[this.dblSurchargeIndex][17]=(t=e*d/100)>0?n.e.GetAmount(Math.round(t)):0,e+=Math.round(t),this.grdIncomeTax.Data[this.dblTaxPayableIndex][17]=e>0?n.e.GetAmount(e):0,d=0,this.dvTaxSlabs.length>0&&null!=this.dvTaxSlabs[0].EducationCess&&null!=this.dvTaxSlabs[0].EducationCess&&""!=this.dvTaxSlabs[0].EducationCess.toString().Trim()&&(d=parseFloat(l.a.eval.EvaluateExpression(this.dvTaxSlabs[0].EducationCess.toString(),p))),this.grdIncomeTax.Data[this.dblEducationCessIndex].Cells[3].Value="Education Cess @ "+d+"%",t=e*d/100,e+=Math.round(t),this.grdIncomeTax.Data[this.dblEducationCessIndex][17]=t>0?n.e.GetAmount(Math.round(t)):0,d=0,this.dvTaxSlabs.length>0&&null!=this.dvTaxSlabs[0].SecondaryandHighEduc&&null!=this.dvTaxSlabs[0].SecondaryandHighEduc&&""!=this.dvTaxSlabs[0].SecondaryandHighEduc.toString().Trim()&&(d=parseFloat(l.a.eval.EvaluateExpression(this.dvTaxSlabs[0].SecondaryandHighEduc.toString(),p))),this.grdIncomeTax.Data[this.dblSecHighEduCessIndex].Cells[3].Value="Secondary and Higher Education Cess @ "+d+"%",t=e*d/100,e+=Math.round(t),this.grdIncomeTax.Data[this.dblSecHighEduCessIndex][17]=t>0?n.e.GetAmount(Math.round(t)):0,this.grdIncomeTax.Data[this.intTotalIncometaxPayableindex][17]=e>0?n.e.GetAmount(Math.round(e)):0,this.grdIncomeTax.Data[this.TDSPaidIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(this.dblTDS),this.grdIncomeTax.Data[this.NetTaxPayableIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(parseFloat(this.grdIncomeTax.Data[this.intTotalIncometaxPayableindex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value)-parseFloat(this.grdIncomeTax.Data[this.TDSPaidIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value))}},{key:"FillDetails",value:function(){var t=this;try{var e=0,a=(new Date).OnlyDate(),s="";this.dsTaxData=this.ITComputationViewModel.dsITComputation;var i=this.dsTaxData.Tables[0].DefaultView,r=this.dsTaxData.Tables[1].DefaultView,d=this.dsTaxData.Tables[2].DefaultView;d.RowFilter=" ComponentType='1'";var c=this.dsTaxData.Tables[3].DefaultView,u=this.dsTaxData.Tables[18].DefaultView;if(this.dvTaxSlabs=this.dsTaxData.Tables[7].DefaultView,this.dvLimit=this.dsTaxData.Tables[15].DefaultView,this.dvEmpTaxComputation=this.dsTaxData.Tables[21].DefaultView,i.length>0&&(i.RowFilter="MapFieldName='IT_BASIC'",0==i.length&&(s+="Basic component is not available,Please map component in the payroll strucuture\r\n")),0==c.length&&(s+="Employee Payroll information not available\r\n"),0==this.dvLimit.length&&(s+="Income tax amount limit data not avalilable for the selected year"),""!=s.toString())return void(this.MessageDisplay=s);this.dblServiceDays=0,this.dtDateofJoining=new Date(u[0].CDOJ),this.dtFromMonth=new Date(parseInt(this.cmbYear.SelectedValue),l.a.SessionManager.AccountingFromMonth-1,1),this.dtToMonth=this.dtFromMonth.AddYears(1).AddDays(-1),this.dblServiceDays=a.Subtract(this.dtDateofJoining).Days+1;var m=0,b=0,D=0,p={iY:m,iM:b,iD:D};n.e.GetYearsMonthsDays(new Date(u[0].CDOB),this.dtToMonth.OnlyDate(),p),m=p.iY,b=p.iM,D=p.iD,this.dvTaxSlabs.RowFilter=m>=80?"Gender='SuperSeniorCitizen'":m>=60?"Gender='SeniorCitizen'":"Gender='"+u[0].GenderName.toString()+"'",this.lstTaxSalbs.Clear();for(var T=0;T<this.dvTaxSlabs.length;T++)this.lstTaxSalbs.push(new g),this.lstTaxSalbs[T].FromSlab=parseFloat(this.dvTaxSlabs[T].FromSlab),this.lstTaxSalbs[T].ToSlab=parseFloat(this.dvTaxSlabs[T].ToSlab),this.lstTaxSalbs[T].Percentage=parseFloat(this.dvTaxSlabs[T].Percentage)/100;17,5;for(var y=5;y<this.grdIncomeTax.ReportColumns.length;y++);var C=0,v=0;this.dsTaxData.Tables[0].length>0&&this.grdIncomeTax.addEmptyRows(this.dsTaxData.Tables[0].length);for(var I,S=0,x=0,f=0;f<this.dsTaxData.Tables[0].length;f++){if(I=new Array,C=5,S=0,x=0,this.grdIncomeTax.Data[f].Cells[0].Value=this.dsTaxData.Tables[0][f].SNo,this.grdIncomeTax.Data[f].Cells[2].Value=this.dsTaxData.Tables[0][f].componentid,this.grdIncomeTax.Data[f].Cells[3].Value=this.dsTaxData.Tables[0][f].SalaryBreakup,null!=this.dsTaxData.Tables[0][f].MapFieldName&&null!=this.dsTaxData.Tables[0][f].MapFieldName&&"IT_BASIC"==this.dsTaxData.Tables[0][f].MapFieldName.toString().Trim()&&(this.BasicIndex=f),parseInt(this.dsTaxData.Tables[0][f].SNo)>0){for(var P=0;P<r.length;P++)for(var A=5;A<this.grdIncomeTax.ReportColumns.length;A++)if(!I.Contains(this.grdIncomeTax.ReportColumns[A].HeaderText)&&r[P].month.toString()==this.grdIncomeTax.ReportColumns[A].HeaderText.toString()){I.push(this.grdIncomeTax.ReportColumns[A].HeaderText),e=0,n.e.IsEmpty(r[P]["dcCalcNum"+this.dsTaxData.Tables[0][f].SNo.toString()])||(e=parseFloat(r[P]["dcCalcNum"+this.dsTaxData.Tables[0][f].SNo.toString()])),this.grdIncomeTax.Data[f].Cells[A].Value=e>0?n.e.GetAmount(e):0,x=parseFloat(this.grdIncomeTax.Data[this.dsTaxData.Tables[0].length-1].Cells[A].Value)+e,this.grdIncomeTax.Data[this.dsTaxData.Tables[0].length-1].Cells[A].Value=n.e.GetAmount(x),S+=e;break}for(var M=0;M<d.length;M++)for(var E=5;E<this.grdIncomeTax.ReportColumns.length;E++)if(parseInt(this.dsTaxData.Tables[0][f].componentID)==parseInt(d[M].componentid)&&d[M].FieldName.toString()==this.grdIncomeTax.ReportColumns[E].HeaderText.toString()&&!n.e.IsEmpty(d[M].Amount)&&parseFloat(d[M].Amount)>0&&!I.Contains(this.grdIncomeTax.ReportColumns[E].HeaderText)){I.push(this.grdIncomeTax.ReportColumns[E].HeaderText),e=0,n.e.IsEmpty(d[M].Amount)||(e=parseFloat(d[M].Amount)),this.grdIncomeTax.Data[f].Cells[E].Value=e>0?n.e.GetAmount(e):0,x=parseFloat(this.grdIncomeTax.Data[this.dsTaxData.Tables[0].length-1].Cells[E].Value)+e,this.grdIncomeTax.Data[this.dsTaxData.Tables[0].length-1].Cells[E].Value=n.e.GetAmount(x),S+=e;break}if(0==c.length)return;for(var L=0;L<c.length;L++)for(C=5;C<17;C++)!I.Contains(this.grdIncomeTax.ReportColumns[C].HeaderText)&&parseFloat(this.grdIncomeTax.Data[f].Cells[C].Value)<=0&&(I.push(this.grdIncomeTax.ReportColumns[C].HeaderText),e=parseFloat(c[L]["Earning"+this.dsTaxData.Tables[0][f].SNo.toString()]),this.grdIncomeTax.Data[f].Cells[C].Value=e>0?n.e.GetAmount(e):0,S+=e)}C=this.grdIncomeTax.ReportColumns.length-1,this.dblTotalCellSalary=this.dblTotalCellSalary+S,parseInt(this.dsTaxData.Tables[0][f].SNo)>0?this.grdIncomeTax.Data[f].Cells[C].Value=n.e.GetAmount(S):(this.grdIncomeTax.Data[this.dsTaxData.Tables[0].length-1].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(this.dblTotalCellSalary),this.TotalSalaryIndex=this.dsTaxData.Tables[0].length-1,this.grdIncomeTax.Data[f].Cells[1].Value=this.TotalSalaryIndex,v=this.TotalSalaryIndex)}if(v++,this.Form12Section1Index=this.TotalSalaryIndex+1,this.Form12Section2Index=this.TotalSalaryIndex+2,this.grdIncomeTax.addEmptyRows(2),this.dsTaxData.Tables[4].length>0)for(var G=0,R=0;R<this.dsTaxData.Tables[4].length;R++)G=v+R,this.grdIncomeTax.Data[G].Cells[0].Value=0,this.grdIncomeTax.Data[G].Cells[1].Value=G+1,this.grdIncomeTax.Data[G].Cells[2].Value=this.dsTaxData.Tables[4][R].componentid,this.grdIncomeTax.Data[G].Cells[3].Value=this.dsTaxData.Tables[4][R].SalaryBreakup,-1==parseInt(this.dsTaxData.Tables[4][R].FieldType)&&(this.dPerq1=parseFloat(this.dsTaxData.Tables[4][R].Amount)),-2==parseInt(this.dsTaxData.Tables[4][R].FieldType)&&(this.dPerq2=parseFloat(this.dsTaxData.Tables[4][R].Amount)),this.grdIncomeTax.Data[G].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(parseFloat(this.dsTaxData.Tables[4][R].Amount));var N,V,F;this.grdIncomeTax.addEmptyRows(1),this.Exemptionsunder10Index=this.Form12Section2Index+1,this.grdIncomeTax.Data[this.Exemptionsunder10Index].Cells[0].Value=0,this.grdIncomeTax.Data[this.Exemptionsunder10Index].Cells[1].Value=this.Exemptionsunder10Index,this.grdIncomeTax.Data[this.Exemptionsunder10Index].Cells[2].Value=-101,this.grdIncomeTax.Data[this.Exemptionsunder10Index].Cells[3].Value="Less : Exemptions Under 10 ",this.dsTaxData.Tables[5].length>0&&this.grdIncomeTax.addEmptyRows(1),v=this.HRA10BasicIndex=this.Exemptionsunder10Index+1,this.grdIncomeTax.Data[this.HRA10BasicIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.HRA10BasicIndex].Cells[1].Value=this.HRA10BasicIndex,this.grdIncomeTax.Data[this.HRA10BasicIndex].Cells[2].Value=0,this.grdIncomeTax.Data[this.HRA10BasicIndex].Cells[3].Value="Actual Rent Paid - 10% of Basic ";var w=0,O=this.dsTaxData.Tables[13];if(O.length>0){for(var k=0;k<O.length;k++)for(var W=5;W<this.grdIncomeTax.ReportColumns.length;W++)if(O[k].MONTHTEXT.toString()==this.grdIncomeTax.ReportColumns[W].HeaderText.toString()){e=0,n.e.IsEmpty(O[k].Amount)||(e=parseFloat(O[k].Amount)),e>0?(e-=10*parseFloat(this.grdIncomeTax.Data[this.BasicIndex].Cells[W].Value)/100,this.grdIncomeTax.Data[this.HRA10BasicIndex].Cells[W].Value=n.e.GetAmount(e)):this.grdIncomeTax.Data[this.HRA10BasicIndex].Cells[W].Value=0,w+=e;break}}else for(var B=5;B<this.grdIncomeTax.ReportColumns.length;B++)this.grdIncomeTax.Data[this.HRA10BasicIndex].Cells[B].Value=n.e.GetAmount(0);if(N=w,this.grdIncomeTax.Data[this.HRA10BasicIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(w),this.grdIncomeTax.addEmptyRows(1),this.HRAAcutalIndex=this.HRA10BasicIndex+1,w=0,this.grdIncomeTax.Data[this.HRAAcutalIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.HRAAcutalIndex].Cells[1].Value=this.HRAAcutalIndex,this.grdIncomeTax.Data[this.HRAAcutalIndex].Cells[2].Value=this.dsTaxData.Tables[6][0].ComponentID.toString(),this.grdIncomeTax.Data[this.HRAAcutalIndex].Cells[3].Value="Actual Received ",this.dsTaxData.Tables[6].length>0){for(C=5;C<17;C++)this.grdIncomeTax.Data[this.HRAAcutalIndex].Cells[C].Value=n.e.GetAmount(0);C=5;for(var U=0;U<this.TotalSalaryIndex;U++)if(parseInt(this.grdIncomeTax.Data[U].Cells[2].Value)==parseInt(this.dsTaxData.Tables[6][0].ComponentID))for(C=5;C<17;C++)this.grdIncomeTax.Data[this.HRAAcutalIndex].Cells[C].Value=n.e.GetAmount(parseFloat(this.grdIncomeTax.Data[U].Cells[C].Value)),w+=parseFloat(this.grdIncomeTax.Data[U].Cells[C].Value)}V=w,this.grdIncomeTax.Data[this.HRAAcutalIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(w);var Y=0,_=0;if(this.grdIncomeTax.addEmptyRows(1),this.dsTaxData.Tables[7].length>0){w=0;var j,H,Z=null,X=new h.a;j=new o.c("Basic",""),X.push("Basic",j),X.Basic.setFieldValue(parseFloat(this.dsTaxData.Tables[3][0].BasicMonthly).toString()),Z=this.dsTaxData.Tables[8].filter((function(t){return 1==t.Type&&"OverTime"!=t.FieldType}));var q=this.dsTaxData.Tables[3];if(Z.length>0)for(var Q=0;Q<Z.length;Q++)null!=(H=this.dsTaxData.Tables[8].Select("ComponentID="+Z[Q].ComponentID))&&H.length>0&&(j=new o.c(Z[Q].ComponentName.toString(),""),X.push(Z[Q].ComponentName.toString(),j),X[Z[Q].ComponentName.toString()].setFieldValue(q[0]["Earning"+H[0].SNo.toString()].toString()));if((Z=this.dsTaxData.Tables[8].filter((function(t){return 2==t.Type&&"OverTime"!=t.FieldType}))).length>0)for(var J=0;J<Z.length;J++)null!=(H=this.dsTaxData.Tables[8].Select("ComponentID="+Z[J].ComponentID))&&H.length>0&&(j=new o.c(Z[J].ComponentName.toString(),""),X.push(Z[J].ComponentName.toString(),j),X[Z[J].ComponentName.toString()].setFieldValue(q[0]["Deduction"+H[0].SNo.toString()].toString()));if((Z=this.dsTaxData.Tables[7]).length>0){var K=X;Y=parseFloat(l.a.eval.EvaluateExpression(Z[0].MetroFormula.toString(),K)),_=parseFloat(l.a.eval.EvaluateExpression(Z[0].NonMetroFormula.toString(),K))}}this.HRAMetroNonMetroIndex=this.HRAAcutalIndex+1,this.grdIncomeTax.Data[this.HRAMetroNonMetroIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.HRAMetroNonMetroIndex].Cells[1].Value=this.HRAMetroNonMetroIndex,this.grdIncomeTax.Data[this.HRAMetroNonMetroIndex].Cells[2].Value=-102,this.grdIncomeTax.Data[this.HRAMetroNonMetroIndex].Cells[3].Value="Metro/Non-Metro ";var z="";if(O.length>0){for(var $=0;$<O.length;$++)for(var tt=5;tt<this.grdIncomeTax.ReportColumns.length;tt++)if(O[$].MONTHTEXT.toString()==this.grdIncomeTax.ReportColumns[tt].HeaderText.toString()){"Yes"==(z=O[$].Metro.toString())?(e=Y,this.grdIncomeTax.Data[this.HRAMetroNonMetroIndex].Cells[tt].Value=n.e.GetAmount(e)):"No"==z.TrimEnd(" ")?(e=_,this.grdIncomeTax.Data[this.HRAMetroNonMetroIndex].Cells[tt].Value=n.e.GetAmount(e)):this.grdIncomeTax.Data[this.HRAMetroNonMetroIndex].Cells[tt].Value=0,w+=e;break}}else for(var et=5;et<this.grdIncomeTax.ReportColumns.length;et++)this.grdIncomeTax.Data[this.HRAMetroNonMetroIndex].Cells[et].Value=n.e.GetAmount(0);F=w,this.grdIncomeTax.Data[this.HRAMetroNonMetroIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(w),this.grdIncomeTax.addEmptyRows(1),this.HRAExemptionIndex=this.HRAMetroNonMetroIndex+1,this.grdIncomeTax.Data[this.HRAExemptionIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.HRAExemptionIndex].Cells[1].Value=this.HRAExemptionIndex,this.grdIncomeTax.Data[this.HRAExemptionIndex].Cells[2].Value=-103,this.grdIncomeTax.Data[this.HRAExemptionIndex].Cells[3].Value="HRA Exemption ",this.HraMinValue=Math.min(N,V,F),this.grdIncomeTax.Data[this.HRAExemptionIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(this.HraMinValue),this.grdIncomeTax.addEmptyRows(1),this.TotAmtOthExemptUs10Index=this.HRAExemptionIndex+1,this.grdIncomeTax.Data[this.TotAmtOthExemptUs10Index].Cells[0].Value=0,this.grdIncomeTax.Data[this.TotAmtOthExemptUs10Index].Cells[1].Value=this.TotAmtOthExemptUs10Index,this.grdIncomeTax.Data[this.TotAmtOthExemptUs10Index].Cells[2].Value=10001,this.grdIncomeTax.Data[this.TotAmtOthExemptUs10Index].Cells[3].Value="Total amount of any other exemption under section 10";var at=0,st=this.dsTaxData.Tables[25].Select("Name='U/S 10 : 1) Total amount of any other exemption under section 10'");null!=st&&st.length>0&&null!=st[0].Amount&&null!=st[0].Amount&&""!=st[0].Amount.toString()&&(at=parseFloat(st[0].Amount)),this.grdIncomeTax.Data[this.TotAmtOthExemptUs10Index].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(at),this.grdIncomeTax.addEmptyRows(2);var it=0,lt=0,nt=0;if(this.dvLimit.RowFilter="",this.dvLimit.RowFilter="ComponentID=998",null!=this.dvLimit[0].AmountLimit&&null!=this.dvLimit[0].AmountLimit&&""!=this.dvLimit[0].AmountLimit.toString()&&(it=parseFloat(this.dvLimit[0].AmountLimit)),this.ConveyanceIndex=this.TotAmtOthExemptUs10Index+1,this.grdIncomeTax.Data[this.ConveyanceIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.ConveyanceIndex].Cells[1].Value=this.ConveyanceIndex,this.grdIncomeTax.Data[this.ConveyanceIndex].Cells[2].Value=parseInt(this.dsTaxData.Tables[9][0].ComponentID),this.grdIncomeTax.Data[this.ConveyanceIndex].Cells[3].Value="Conveyance",parseInt(this.dsTaxData.Tables[9][0].ComponentID)>0){if(this.dsTaxData.Tables[9].length>0){C=5;for(var ot=0;ot<this.TotalSalaryIndex;ot++)if(parseInt(this.grdIncomeTax.Data[ot].Cells[2].Value)==parseInt(this.dsTaxData.Tables[9][0].ComponentID))for(C=5;C<17;C++)n.e.IsEmpty(this.grdIncomeTax.Data[ot].Cells[C].Value)||(lt+=parseFloat(this.grdIncomeTax.Data[ot].Cells[C].Value))}0==(nt=lt/12)||nt>it?it*=12:it=lt}parseInt(this.cmbYear.SelectedValue)>=2018&&(it=0,2018==parseInt(this.cmbYear.SelectedValue)?this.dblStandardDeduction=4e4:parseInt(this.cmbYear.SelectedValue)>=2019&&(this.dblStandardDeduction=5e4)),this.grdIncomeTax.Data[this.ConveyanceIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(it),this.ChildrenEduIndex=this.ConveyanceIndex+1,this.grdIncomeTax.Data[this.ChildrenEduIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.ChildrenEduIndex].Cells[1].Value=this.ChildrenEduIndex,this.grdIncomeTax.Data[this.ChildrenEduIndex].Cells[2].Value=parseInt(this.dsTaxData.Tables[9][1].ComponentID),this.grdIncomeTax.Data[this.ChildrenEduIndex].Cells[3].Value="Children Education Allowances";var rt=0;if(parseInt(this.dsTaxData.Tables[9][0].ComponentID)>0){var dt=0,ht=0,ct=0;if(this.dvLimit.RowFilter="",this.dvLimit.RowFilter="ComponentID=996",null!=this.dvLimit[0].AmountLimit&&null!=this.dvLimit[0].AmountLimit&&""!=this.dvLimit[0].AmountLimit.toString()&&(ct=parseFloat(this.dvLimit[0].AmountLimit)),this.dvLimit.RowFilter="",this.dvLimit.RowFilter="ComponentID=997",null!=this.dvLimit[0].AmountLimit&&null!=this.dvLimit[0].AmountLimit&&""!=this.dvLimit[0].AmountLimit.toString()&&(ht=parseInt(this.dvLimit[0].AmountLimit)),this.dsTaxData.Tables[10].length>0){(dt=parseInt(this.dsTaxData.Tables[10][0][0]))>ht&&(dt=ht),12*dt*ct,C=5;for(var ut=0;ut<this.TotalSalaryIndex;ut++)if(parseInt(this.grdIncomeTax.Data[ut].Cells[2].Value)==parseInt(this.dsTaxData.Tables[9][1].ComponentID))for(C=5;C<17;C++)null!=this.grdIncomeTax.Data[ut].Cells[C].Value&&""!=this.grdIncomeTax.Data[ut].Cells[C].Value.toString()&&0!=parseFloat(this.grdIncomeTax.Data[ut].Cells[C].Value)&&(rt+=dt*ct)}}this.grdIncomeTax.Data[this.ChildrenEduIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(rt),this.dsTaxData.Tables[11].length>0&&this.grdIncomeTax.addEmptyRows(this.dsTaxData.Tables[11].length);var gt;gt=this.ChildrenEduIndex+1,v=gt;for(var mt=0;mt<this.dsTaxData.Tables[11].length;mt++)this.grdIncomeTax.Data[v].Cells[0].Value=0,this.grdIncomeTax.Data[v].Cells[1].Value=gt+mt,this.grdIncomeTax.Data[v].Cells[2].Value=parseInt(this.dsTaxData.Tables[11][mt].NodeID),this.grdIncomeTax.Data[v].Cells[3].Value=this.dsTaxData.Tables[11][mt].Name.toString(),this.dvEmpTaxComputation.RowFilter="",this.dvEmpTaxComputation.RowFilter="ComponentID="+parseInt(this.dsTaxData.Tables[11][mt].NodeID),this.dvEmpTaxComputation.length>0?(this.grdIncomeTax.Data[v].Cells[4].Value=n.e.GetAmount(parseFloat(this.dvEmpTaxComputation[0].ComponentAmount)),this.grdIncomeTax.Data[v].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(parseFloat(this.dvEmpTaxComputation[0].ComponentAmount))):(this.grdIncomeTax.Data[v].Cells[4].Value=n.e.GetAmount(0),this.grdIncomeTax.Data[v].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(0)),parseFloat(this.grdIncomeTax.Data[v].Cells[4].Value),v+=1;this.MedicalIndex=this.ChildrenEduIndex+1,this.LTAIndex=this.MedicalIndex+1,this.FoodIndex=this.LTAIndex+1,this.LeaveEncashIndex=this.FoodIndex+1,this.GratuityIndex=this.LeaveEncashIndex+1,this.grdIncomeTax.addEmptyRows(1),this.StandardDedIndex=this.GratuityIndex+1,this.grdIncomeTax.Data[this.StandardDedIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.StandardDedIndex].Cells[1].Value=this.StandardDedIndex,this.grdIncomeTax.Data[this.StandardDedIndex].Cells[2].Value=1e3,this.grdIncomeTax.Data[this.StandardDedIndex].Cells[3].Value="STANDARD DEDUCTION",this.grdIncomeTax.Data[this.StandardDedIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(this.dblStandardDeduction),v+=1,this.dblbalanceSalaryInc12BA=this.dblTotalCellSalary+this.dPerq1+this.dPerq2-(this.HraMinValue+parseFloat(this.grdIncomeTax.Data[this.TotAmtOthExemptUs10Index].Cells[this.grdIncomeTax.ReportColumns.length-1].Value)+parseFloat(this.grdIncomeTax.Data[this.ConveyanceIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value)+parseFloat(this.grdIncomeTax.Data[this.ChildrenEduIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value)+parseFloat(this.grdIncomeTax.Data[this.MedicalIndex].Cells[4].Value)+parseFloat(this.grdIncomeTax.Data[this.LTAIndex].Cells[4].Value)+parseFloat(this.grdIncomeTax.Data[this.LeaveEncashIndex].Cells[4].Value)+parseFloat(this.grdIncomeTax.Data[this.FoodIndex].Cells[4].Value)+parseFloat(this.grdIncomeTax.Data[this.GratuityIndex].Cells[4].Value)+this.dblStandardDeduction),this.grdIncomeTax.addEmptyRows(3),this.BalanceSalInc12BAIndex=this.StandardDedIndex+1,this.grdIncomeTax.Data[this.BalanceSalInc12BAIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.BalanceSalInc12BAIndex].Cells[1].Value=this.BalanceSalInc12BAIndex,this.grdIncomeTax.Data[this.BalanceSalInc12BAIndex].Cells[2].Value=-104,this.grdIncomeTax.Data[this.BalanceSalInc12BAIndex].Cells[3].Value="Balance Salary including Perquisites",this.grdIncomeTax.Data[this.BalanceSalInc12BAIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(this.dblbalanceSalaryInc12BA);var bt=0,Dt=this.dsTaxData.Tables[12];this.ProfessionalTaxIndex=this.BalanceSalInc12BAIndex+1,this.grdIncomeTax.Data[this.ProfessionalTaxIndex].Cells[0].Value=-105,this.grdIncomeTax.Data[this.ProfessionalTaxIndex].Cells[1].Value=this.ProfessionalTaxIndex,this.grdIncomeTax.Data[this.ProfessionalTaxIndex].Cells[2].Value=0,this.grdIncomeTax.Data[this.ProfessionalTaxIndex].Cells[3].Value="Professional Tax",r=this.dsTaxData.Tables[20];var pt=!1;if(Dt.length>0){pt=!1;for(var Tt=0;Tt<this.dsTaxData.Tables[19].length;Tt++)if("PROFESSIONAL TAX"==this.dsTaxData.Tables[19][Tt].TaxMapName.toString()&&parseInt(this.dsTaxData.Tables[19][Tt].SNo)>0)for(var yt=5;yt<this.grdIncomeTax.ReportColumns.length-1;yt++){pt=!1;for(var Ct=0;Ct<r.length;Ct++)if(r[Ct].month.toString()==this.grdIncomeTax.ReportColumns[yt].HeaderText.toString()){n.e.IsEmpty(r[Ct]["dcCalcNum"+this.dsTaxData.Tables[19][Tt].SNo.toString()])||(bt+=parseFloat(r[Ct]["dcCalcNum"+this.dsTaxData.Tables[19][Tt].SNo.toString()])),pt=!0;break}if(!pt)for(var vt=0;vt<d.length;vt++)if(parseInt(this.dsTaxData.Tables[19][Tt].componentID)==parseInt(d[vt].componentid)&&d[vt].FieldName.toString()==this.grdIncomeTax.ReportColumns[yt].HeaderText.toString()&&parseFloat(d[vt].Amount)>0){n.e.IsEmpty(d[vt].Amount)||(bt+=parseFloat(d[vt].Amount)),pt=!0;break}if(!pt)for(var It=0;It<c.length;It++)n.e.IsEmpty(c[It]["Deduction"+this.dsTaxData.Tables[19][Tt].SNo.toString()])||(bt+=parseFloat(c[It]["Deduction"+this.dsTaxData.Tables[19][Tt].SNo.toString()]))}}this.grdIncomeTax.Data[this.ProfessionalTaxIndex].Cells[4].Value=n.e.GetAmount(bt),this.grdIncomeTax.Data[this.ProfessionalTaxIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(bt),this.NetTaxableSalIndex=this.ProfessionalTaxIndex+1,this.grdIncomeTax.Data[this.NetTaxableSalIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.NetTaxableSalIndex].Cells[1].Value=this.NetTaxableSalIndex,this.grdIncomeTax.Data[this.NetTaxableSalIndex].Cells[2].Value=-106,this.grdIncomeTax.Data[this.NetTaxableSalIndex].Cells[3].Value="Net Taxable Salary",this.dblNetTaxableSal=0,this.dblNetTaxableSal=this.dblbalanceSalaryInc12BA-bt,this.grdIncomeTax.Data[this.NetTaxableSalIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(this.dblNetTaxableSal),this.grdIncomeTax.addEmptyRows(this.dsTaxData.Tables[14].length+3);var St=0;this.IncomefromHousePropertyIndex=this.NetTaxableSalIndex+1;for(var xt=0;xt<this.dsTaxData.Tables[14].length;xt++){this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex].Cells[1].Value=this.IncomefromHousePropertyIndex,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex].Cells[2].Value=parseInt(this.dsTaxData.Tables[14][xt].NodeID),this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex].Cells[3].Value=this.dsTaxData.Tables[14][xt].Name,St=parseFloat(this.dsTaxData.Tables[14][xt].Amount),this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex].Cells[4].Value=n.e.GetAmount(parseFloat(this.dsTaxData.Tables[14][xt].Amount));break}var ft;this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+1].Cells[0].Value=0,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+1].Cells[1].Value=this.IncomefromHousePropertyIndex+1,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+1].Cells[2].Value=-107,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+1].Cells[3].Value="Less : Standard deduction 30%",ft=30*St/100,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+1].Cells[4].Value=n.e.GetAmount(ft);var Pt;this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+2].Cells[0].Value=0,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+2].Cells[1].Value=this.IncomefromHousePropertyIndex+2,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+2].Cells[2].Value=-108,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+2].Cells[3].Value="",Pt=parseFloat(this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex].Cells[4].Value)-parseFloat(this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+1].Cells[4].Value),this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+2].Cells[4].Value=n.e.GetAmount(Pt);for(var At=0,Mt=1;Mt<this.dsTaxData.Tables[14].length;Mt++){this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+3].Cells[0].Value=0,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+3].Cells[1].Value=this.IncomefromHousePropertyIndex+3,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+3].Cells[2].Value=parseInt(this.dsTaxData.Tables[14][Mt].NodeID),this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+3].Cells[3].Value=this.dsTaxData.Tables[14][Mt].Name,At=parseFloat(this.dsTaxData.Tables[14][Mt].Amount),this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+3].Cells[4].Value=n.e.GetAmount(At);break}this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+4].Cells[0].Value=0,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+4].Cells[1].Value=this.IncomefromHousePropertyIndex+4,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+4].Cells[2].Value=-109,this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+4].Cells[3].Value="Loss from House Property",this.grdIncomeTax.Data[this.IncomefromHousePropertyIndex+4].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(At-Pt);var Et=0;this.dblSelfletoutamount=0,v=Et=this.IncomefromHousePropertyIndex+5;for(var Lt=2;Lt<this.dsTaxData.Tables[14].length;Lt++)this.grdIncomeTax.Data[v].Cells[0].Value=0,this.grdIncomeTax.Data[v].Cells[1].Value=Et,this.grdIncomeTax.Data[v].Cells[2].Value=parseInt(this.dsTaxData.Tables[14][Lt].NodeID),this.grdIncomeTax.Data[v].Cells[3].Value=this.dsTaxData.Tables[14][Lt].Name,this.grdIncomeTax.Data[v].Cells[4].Value=n.e.GetAmount(parseFloat(this.dsTaxData.Tables[14][Lt].Amount)),this.dblSelfletoutamount=this.dblSelfletoutamount+parseFloat(this.dsTaxData.Tables[14][Lt].Amount),v+=1,Et+=1;this.grdIncomeTax.addEmptyRows(1),this.GrossTotalIncomeIndex=Et,this.grdIncomeTax.Data[this.GrossTotalIncomeIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.GrossTotalIncomeIndex].Cells[1].Value=this.GrossTotalIncomeIndex,this.grdIncomeTax.Data[this.GrossTotalIncomeIndex].Cells[2].Value=-110,this.grdIncomeTax.Data[this.GrossTotalIncomeIndex].Cells[3].Value="Gross Total Income",this.dblGrossTotalIncome=this.dblNetTaxableSal+this.dblSelfletoutamount-(At-Pt),this.grdIncomeTax.Data[this.GrossTotalIncomeIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(this.dblGrossTotalIncome),this.grdIncomeTax.addEmptyRows(1),this.intDeducunder8oCto80CCCIndex=this.GrossTotalIncomeIndex+1,this.grdIncomeTax.Data[this.intDeducunder8oCto80CCCIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.intDeducunder8oCto80CCCIndex].Cells[1].Value=this.intDeducunder8oCto80CCCIndex,this.grdIncomeTax.Data[this.intDeducunder8oCto80CCCIndex].Cells[2].Value=-111,this.grdIncomeTax.Data[this.intDeducunder8oCto80CCCIndex].Cells[3].Value="Deductions under 80C to 80CCC",this.grdIncomeTax.addEmptyRows(this.dsTaxData.Tables[16].length);var Gt=0,Rt=0,Nt=0;v=Nt=this.intDeducunder8oCto80CCCIndex+1;for(var Vt=function(e){if(t.grdIncomeTax.Data[v].Cells[0].Value=0,t.grdIncomeTax.Data[v].Cells[1].Value=Nt,t.grdIncomeTax.Data[v].Cells[2].Value=parseInt(t.dsTaxData.Tables[16][e].NodeID),t.grdIncomeTax.Data[v].Cells[3].Value=t.dsTaxData.Tables[16][e].Name,t.dvEmpTaxComputation.RowFilter="",t.dvEmpTaxComputation.filter((function(a){return a.ComponentID==parseInt(t.dsTaxData.Tables[16][e].NodeID)})),t.dvEmpTaxComputation.length>0)t.grdIncomeTax.Data[v].Cells[4].Value=n.e.GetAmount(parseFloat(t.dvEmpTaxComputation[0].ComponentAmount));else if("PF(Deduction from Salary)"==n.e.String(t.dsTaxData.Tables[16][e].Name)){var a=0;pt=!1;for(var s=0;s<t.dsTaxData.Tables[19].length;s++)if("PF(Deduction from Salary)"==n.e.String(t.dsTaxData.Tables[19][s].TaxMapName)&&parseInt(t.dsTaxData.Tables[19][s].SNo)>0)for(var i=5;i<t.grdIncomeTax.ReportColumns.length-1;i++){pt=!1;for(var l=0;l<r.length;l++)if(n.e.String(r[l].month)==t.grdIncomeTax.ReportColumns[i].HeaderText.toString()){n.e.IsEmpty(r[l]["dcCalcNum"+n.e.String(t.dsTaxData.Tables[19][s].SNo)])||(a+=parseFloat(r[l]["dcCalcNum"+n.e.String(t.dsTaxData.Tables[19][s].SNo)])),pt=!0;break}if(!pt)for(var o=0;o<d.length;o++)if(parseInt(t.dsTaxData.Tables[19][s].componentID)==parseInt(d[o].componentid)&&d[o].FieldName.toString()==t.grdIncomeTax.ReportColumns[i].HeaderText.toString()&&parseFloat(d[o].Amount)>0){n.e.IsEmpty(d[o].Amount)||(a+=parseFloat(d[o].Amount)),pt=!0;break}if(!pt)for(var h=0;h<c.length;h++)n.e.IsEmpty(c[h]["Deduction"+n.e.String(t.dsTaxData.Tables[19][s].SNo)])||(a+=parseFloat(c[h]["Deduction"+n.e.String(t.dsTaxData.Tables[19][s].SNo)]))}t.grdIncomeTax.Data[v].Cells[4].Value=n.e.GetAmount(a)}else t.grdIncomeTax.Data[v].Cells[4].Value=n.e.GetAmount(parseFloat(t.dsTaxData.Tables[16][e].Amount));0==e&&(Gt=parseFloat(t.grdIncomeTax.Data[v].Cells[4].Value)),e>0&&(Rt+=parseFloat(t.grdIncomeTax.Data[v].Cells[4].Value)),v+=1,Nt+=1},Ft=0;Ft<this.dsTaxData.Tables[16].length;Ft++)Vt(Ft);this.grdIncomeTax.addEmptyRows(1),this.intTotalDeducunder8oCto80CCCIndex=Nt,this.grdIncomeTax.Data[this.intTotalDeducunder8oCto80CCCIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.intTotalDeducunder8oCto80CCCIndex].Cells[1].Value=this.intTotalDeducunder8oCto80CCCIndex,this.grdIncomeTax.Data[this.intTotalDeducunder8oCto80CCCIndex].Cells[2].Value=-112,this.grdIncomeTax.Data[this.intTotalDeducunder8oCto80CCCIndex].Cells[3].Value="Total Deductions under 80C to 80CCC",this.dblTotaldeduction80ccc80c=Rt+Gt,this.grdIncomeTax.Data[this.intTotalDeducunder8oCto80CCCIndex].Cells[4].Value=n.e.GetAmount(this.dblTotaldeduction80ccc80c);var wt=0;this.dvLimit.RowFilter="ComponentID=995",null!=this.dvLimit[0].AmountLimit&&null!=this.dvLimit[0].AmountLimit&&""!=this.dvLimit[0].AmountLimit.toString()&&(wt=parseFloat(this.dvLimit[0].AmountLimit)),this.dblTotaldeduction80ccc80c>wt&&(this.dblTotaldeduction80ccc80c=wt),this.grdIncomeTax.Data[this.intTotalDeducunder8oCto80CCCIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(this.dblTotaldeduction80ccc80c);this.grdIncomeTax.addEmptyRows(this.dsTaxData.Tables[17].length),this.intOtherDeducunder8oCto80CCCIndex=this.intTotalDeducunder8oCto80CCCIndex+1,v=Nt=this.intTotalDeducunder8oCto80CCCIndex+1;for(var Ot=0;Ot<this.dsTaxData.Tables[17].length;Ot++)this.grdIncomeTax.Data[v].Cells[0].Value=0,this.grdIncomeTax.Data[v].Cells[1].Value=Nt,this.grdIncomeTax.Data[v].Cells[2].Value=parseInt(this.dsTaxData.Tables[17][Ot].NodeID),this.grdIncomeTax.Data[v].Cells[3].Value=this.dsTaxData.Tables[17][Ot].Name,this.dvEmpTaxComputation.RowFilter="",this.dvEmpTaxComputation.RowFilter="ComponentID="+parseInt(this.dsTaxData.Tables[17][Ot].NodeID),this.dvEmpTaxComputation.length>0?(parseFloat(this.dvEmpTaxComputation[0].ComponentAmount),this.grdIncomeTax.Data[v].Cells[4].Value=n.e.GetAmount(parseFloat(this.dvEmpTaxComputation[0].ComponentAmount))):(parseFloat(this.dsTaxData.Tables[17][Ot].Amount),this.grdIncomeTax.Data[v].Cells[4].Value=n.e.GetAmount(parseFloat(this.dsTaxData.Tables[17][Ot].Amount))),this.grdIncomeTax.Data[v].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount(this.dvEmpTaxComputation.length>0?parseFloat(this.dvEmpTaxComputation[0].ComponentAmount):parseFloat(this.dsTaxData.Tables[17][Ot].Amount)),v+=1,Nt+=1;this.intOtherDeducunder8oCto80CCCIndex1=Nt-1,this.grdIncomeTax.addEmptyRows(1),this.dblTotalIncomeIndex=this.intOtherDeducunder8oCto80CCCIndex1+1,this.grdIncomeTax.Data[this.dblTotalIncomeIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.dblTotalIncomeIndex].Cells[1].Value=this.dblTotalIncomeIndex,this.grdIncomeTax.Data[this.dblTotalIncomeIndex].Cells[2].Value=-113,this.grdIncomeTax.Data[this.dblTotalIncomeIndex].Cells[3].Value="Total Income",this.grdIncomeTax.addEmptyRows(1),this.dblTotalIncomeRoundoffIndex=this.dblTotalIncomeIndex+1,this.grdIncomeTax.Data[this.dblTotalIncomeRoundoffIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.dblTotalIncomeRoundoffIndex].Cells[1].Value=this.dblTotalIncomeRoundoffIndex,this.grdIncomeTax.Data[this.dblTotalIncomeRoundoffIndex].Cells[2].Value=-114,this.grdIncomeTax.Data[this.dblTotalIncomeRoundoffIndex].Cells[3].Value="Total Income rounded off",this.grdIncomeTax.addEmptyRows(1),this.dblTaxOnTotalIncomeIndex=this.dblTotalIncomeRoundoffIndex+1,this.grdIncomeTax.Data[this.dblTaxOnTotalIncomeIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.dblTaxOnTotalIncomeIndex].Cells[1].Value=this.dblTotalIncomeRoundoffIndex+1,this.grdIncomeTax.Data[this.dblTaxOnTotalIncomeIndex].Cells[2].Value=-115,this.grdIncomeTax.Data[this.dblTaxOnTotalIncomeIndex].Cells[3].Value="Tax on Total Income",this.grdIncomeTax.addEmptyRows(1),this.dblRebateIndex=this.dblTaxOnTotalIncomeIndex+1,this.grdIncomeTax.Data[this.dblRebateIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.dblRebateIndex].Cells[1].Value=this.dblTotalIncomeRoundoffIndex+2,this.grdIncomeTax.Data[this.dblRebateIndex].Cells[2].Value=-116,parseInt(this.cmbYear.SelectedValue)<2016?this.grdIncomeTax.Data[this.dblRebateIndex].Cells[3].Value="Rebate U/S 87A (Rs.2,000 for Taxable Income below Rs.5,00,000/-)":2016==parseInt(this.cmbYear.SelectedValue)?this.grdIncomeTax.Data[this.dblRebateIndex].Cells[3].Value="Rebate U/S 87A (Rs.5,000 for Taxable Income below Rs.5,00,000/-)":2017==parseInt(this.cmbYear.SelectedValue)||2018==parseInt(this.cmbYear.SelectedValue)?this.grdIncomeTax.Data[this.dblRebateIndex].Cells[3].Value="Rebate U/S 87A (Rs.2,500 for Taxable Income below Rs.3,50,000/-)":parseInt(this.cmbYear.SelectedValue)>=2019&&(this.grdIncomeTax.Data[this.dblRebateIndex].Cells[3].Value="Rebate U/S 87A (Rs.12,500 for Taxable Income below Rs.5,00,000/-)"),this.grdIncomeTax.addEmptyRows(1),this.dblTaxPayableAfterRebateIndex=this.dblRebateIndex+1,this.grdIncomeTax.Data[this.dblTaxPayableAfterRebateIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.dblTaxPayableAfterRebateIndex].Cells[1].Value=this.dblTotalIncomeRoundoffIndex+3,this.grdIncomeTax.Data[this.dblTaxPayableAfterRebateIndex].Cells[2].Value=-117,this.grdIncomeTax.Data[this.dblTaxPayableAfterRebateIndex].Cells[3].Value="Tax Payable after rebate U/S 87A",this.grdIncomeTax.addEmptyRows(1),this.dblSurchargeIndex=this.dblTaxPayableAfterRebateIndex+1,this.grdIncomeTax.Data[this.dblSurchargeIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.dblSurchargeIndex].Cells[1].Value=this.dblTotalIncomeRoundoffIndex+4,this.grdIncomeTax.Data[this.dblSurchargeIndex].Cells[2].Value=-118,this.grdIncomeTax.addEmptyRows(1),this.dblTaxPayableIndex=this.dblSurchargeIndex+1,this.grdIncomeTax.Data[this.dblTaxPayableIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.dblTaxPayableIndex].Cells[1].Value=this.dblTotalIncomeRoundoffIndex+5,this.grdIncomeTax.Data[this.dblTaxPayableIndex].Cells[2].Value=-119,this.grdIncomeTax.Data[this.dblTaxPayableIndex].Cells[3].Value="Tax Payable",this.grdIncomeTax.addEmptyRows(1),this.dblEducationCessIndex=this.dblTaxPayableIndex+1,this.grdIncomeTax.Data[this.dblEducationCessIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.dblEducationCessIndex].Cells[1].Value=this.dblTotalIncomeRoundoffIndex+6,this.grdIncomeTax.Data[this.dblEducationCessIndex].Cells[2].Value=-120,this.grdIncomeTax.addEmptyRows(1),this.dblSecHighEduCessIndex=this.dblEducationCessIndex+1,this.grdIncomeTax.Data[this.dblSecHighEduCessIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.dblSecHighEduCessIndex].Cells[1].Value=this.dblTotalIncomeRoundoffIndex+7,this.grdIncomeTax.Data[this.dblSecHighEduCessIndex].Cells[2].Value=-121,this.grdIncomeTax.addEmptyRows(1),this.intTotalIncometaxPayableindex=this.dblSecHighEduCessIndex+1,this.grdIncomeTax.Data[this.intTotalIncometaxPayableindex].Cells[0].Value=0,this.grdIncomeTax.Data[this.intTotalIncometaxPayableindex].Cells[1].Value=this.intTotalIncometaxPayableindex,this.grdIncomeTax.Data[this.intTotalIncometaxPayableindex].Cells[2].Value=-122,this.grdIncomeTax.Data[this.intTotalIncometaxPayableindex].Cells[3].Value="Total Income Tax Payable",this.grdIncomeTax.addEmptyRows(1),this.TDSPaidIndex=this.intTotalIncometaxPayableindex+1,this.grdIncomeTax.Data[this.TDSPaidIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.TDSPaidIndex].Cells[1].Value=this.TDSPaidIndex,this.grdIncomeTax.Data[this.TDSPaidIndex].Cells[2].Value=-123,this.grdIncomeTax.Data[this.TDSPaidIndex].Cells[3].Value="TDS Paid",this.grdIncomeTax.addEmptyRows(1),this.NetTaxPayableIndex=this.TDSPaidIndex+1,this.grdIncomeTax.Data[this.NetTaxPayableIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.NetTaxPayableIndex].Cells[1].Value=this.NetTaxPayableIndex,this.grdIncomeTax.Data[this.NetTaxPayableIndex].Cells[2].Value=-124,this.grdIncomeTax.Data[this.NetTaxPayableIndex].Cells[3].Value="Net Tax Payable";var kt,Wt,Bt=0,Ut=0;kt=l.a.SessionManager.FinancialYearStartDate.getFullYear().toString(),parseInt(kt.substr(2,2))+1,Wt=l.a.SessionManager.AccountingFromMonth;var Yt=1;Bt=Wt,this.grdIncomeTax.addEmptyRows(1),this.MonthlyDeducIndex=this.NetTaxPayableIndex+1,this.grdIncomeTax.Data[this.MonthlyDeducIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.MonthlyDeducIndex].Cells[1].Value=this.MonthlyDeducIndex,this.grdIncomeTax.Data[this.MonthlyDeducIndex].Cells[2].Value=-125,this.grdIncomeTax.Data[this.MonthlyDeducIndex].Cells[3].Value="Monthly Deductions from salary";for(var _t=5;_t<this.grdIncomeTax.ReportColumns.length;_t++)if(13==Bt){Ut=Bt-Yt;for(var jt=1;jt<=Ut;jt++)this.grdIncomeTax.Data[this.MonthlyDeducIndex].Cells[_t].Value=this.GetMonthName(jt,!1),Yt+=1,_t++}else this.grdIncomeTax.Data[this.MonthlyDeducIndex].Cells[_t].Value=this.GetMonthName(Bt,!1),Bt+=1,Yt+=1;this.dsTaxData.Tables[19].length>0&&this.grdIncomeTax.addEmptyRows(this.dsTaxData.Tables[19].length);var Ht,Zt=0;v=Ht=this.MonthlyDeducIndex+1,r=this.dsTaxData.Tables[20].DefaultView;for(var Xt=0;Xt<this.dsTaxData.Tables[19].length;Xt++)if(I=new Array,C=5,Zt=0,this.grdIncomeTax.Data[v+Xt].Cells[0].Value=this.dsTaxData.Tables[19][Xt].SNo,this.grdIncomeTax.Data[v+Xt].Cells[1].Value=Ht+Xt,this.grdIncomeTax.Data[v+Xt].Cells[2].Value=this.dsTaxData.Tables[19][Xt].componentid,this.grdIncomeTax.Data[v+Xt].Cells[3].Value=this.dsTaxData.Tables[19][Xt].SalaryBreakup,parseInt(this.dsTaxData.Tables[19][Xt].SNo)>0){for(var qt=0;qt<r.length;qt++)for(var Qt=5;Qt<this.grdIncomeTax.ReportColumns.length;Qt++)if(r[qt].month.toString()==this.grdIncomeTax.ReportColumns[Qt].HeaderText.toString()&&!I.Contains(this.grdIncomeTax.ReportColumns[Qt].HeaderText)){I.push(this.grdIncomeTax.ReportColumns[Qt].HeaderText),e=0,n.e.IsEmpty(r[qt]["dcCalcNum"+this.dsTaxData.Tables[19][Xt].SNo.toString()])||(e=parseFloat(r[qt]["dcCalcNum"+this.dsTaxData.Tables[19][Xt].SNo.toString()])),this.grdIncomeTax.Data[v+Xt].Cells[Qt].Value=e>=0?n.e.GetAmount(e):0,e;break}d.RowFilter="",d.RowFilter=" ComponentType='2'";for(var Jt=0;Jt<d.length;Jt++)for(var Kt=5;Kt<this.grdIncomeTax.ReportColumns.length;Kt++)if(parseInt(this.dsTaxData.Tables[19][Xt].componentID)==parseInt(d[Jt].componentid)&&d[Jt].FieldName.toString()==this.grdIncomeTax.ReportColumns[Kt].HeaderText.toString()&&parseFloat(d[Jt].Amount)>0&&!I.Contains(this.grdIncomeTax.ReportColumns[Kt].HeaderText)){I.push(this.grdIncomeTax.ReportColumns[Kt].HeaderText),e=0,n.e.IsEmpty(d[Jt].Amount)||(e=parseFloat(d[Jt].Amount)),this.grdIncomeTax.Data[v+Xt].Cells[Kt].Value=e>=0?n.e.GetAmount(e):0,e;break}if(0==c.length)return;for(var zt=0;zt<c.length;zt++)for(C=5;C<17;C++)!I.Contains(this.grdIncomeTax.ReportColumns[C].HeaderText)&&parseFloat(this.grdIncomeTax.Data[v+Xt].Cells[C].Value)<=0&&(I.push(this.grdIncomeTax.ReportColumns[C].HeaderText),e=parseFloat(c[zt]["Deduction"+this.dsTaxData.Tables[19][Xt].SNo.toString()]),this.grdIncomeTax.Data[v+Xt].Cells[C].Value=e>=0?n.e.GetAmount(e):0,e)}this.InhandAmountIndex=Ht+this.dsTaxData.Tables[19].length;var $t=0;this.grdIncomeTax.Data[this.InhandAmountIndex].Cells[0].Value=0,this.grdIncomeTax.Data[this.InhandAmountIndex].Cells[1].Value=this.InhandAmountIndex,this.grdIncomeTax.Data[this.InhandAmountIndex].Cells[2].Value=-126,this.grdIncomeTax.Data[this.InhandAmountIndex].Cells[3].Value="In Hand",C=5;var te=0;for(C=5;C<17;C++)this.grdIncomeTax.Data[this.InhandAmountIndex].Cells[C].Value=n.e.GetAmount(0);for(C=5;C<17;C++){Zt=0;for(var ee=Ht;ee<this.InhandAmountIndex;ee++)Zt+=parseFloat(this.grdIncomeTax.Data[ee].Cells[C].Value);te=parseFloat(this.grdIncomeTax.Data[this.TotalSalaryIndex].Cells[C].Value)-Zt,this.grdIncomeTax.Data[this.InhandAmountIndex].Cells[C].Value=n.e.GetAmount(te),$t+=te}this.grdIncomeTax.Data[this.InhandAmountIndex].Cells[this.grdIncomeTax.ReportColumns.length-1].Value=n.e.GetAmount($t),pt=!1;for(var ae=0;ae<this.dsTaxData.Tables[19].length;ae++)if("TDS"==this.dsTaxData.Tables[19][ae].TaxMapName.toString()&&parseInt(this.dsTaxData.Tables[19][ae].SNo)>0)for(var se=5;se<this.grdIncomeTax.ReportColumns.length-1;se++){pt=!1;for(var ie=0;ie<r.length;ie++)if(r[ie].month.toString()==this.grdIncomeTax.ReportColumns[se].HeaderText.toString()){n.e.IsEmpty(r[ie]["dcCalcNum"+this.dsTaxData.Tables[19][ae].SNo.toString()])||(this.dblTDS+=parseFloat(r[ie]["dcCalcNum"+this.dsTaxData.Tables[19][ae].SNo.toString()])),pt=!0;break}if(!pt)for(var le=0;le<d.length;le++)if(parseInt(this.dsTaxData.Tables[19][ae].componentID)==parseInt(d[le].componentid)&&d[le].FieldName.toString()==this.grdIncomeTax.ReportColumns[se].HeaderText.toString()&&parseFloat(d[le].Amount)>0){n.e.IsEmpty(d[le].Amount)||(this.dblTDS+=parseFloat(d[le].Amount)),pt=!0;break}if(!pt)for(var ne=0;ne<c.length;ne++)n.e.IsEmpty(c[ne]["Deduction"+this.dsTaxData.Tables[19][ae].SNo.toString()])||(this.dblTDS+=parseFloat(c[ne]["Deduction"+this.dsTaxData.Tables[19][ae].SNo.toString()]))}this.UpdateTotals(this.dblTotalIncomeRoundoff)}catch(oe){Logger.ErrorLog("Error : "+oe)}}},{key:"cmbYear_SelectionChanged",value:function(t){this.clear(0),this.ITComputationViewModel.FilterEmployees(),null!=this.lstEmployee.SelectedValue&&(this.ITComputationViewModel.OnYearSelected("Year"),this.FillDetails())}},{key:"lstEmployee",get:function(){return this.ITComputationViewModel.Employee.Code}},{key:"lstEmployeeName",get:function(){return this.ITComputationViewModel.Employee.Name}}]),t}(),b=a("fXoL"),D=a("sYmb"),p=((s=function(){function t(){_classCallCheck(this,t),this.form=new i.j({})}return _createClass(t,[{key:"ngOnInit",value:function(){this.obj=this.params.obj,this.obj2=new m(this.obj)}}]),t}()).\u0275fac=function(t){return new(t||s)},s.\u0275cmp=b.Nb({type:s,selectors:[["app-income-tax-computation"]],decls:32,vars:13,consts:[[1,"page-header"],[1,"page-title"],[1,"btnMetroDiv","secondary-btn-group"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-save"],[1,"fa-light","fa-trash-alt"],[1,"fa-light","fa-broom"],[1,"fa-light","fa-file-export"]],template:function(t,e){1&t&&(b.Zb(0,"div"),b.Wc(1,"\n    "),b.Zb(2,"div",0),b.Wc(3,"\n      "),b.Zb(4,"label",1),b.Wc(5),b.Yb(),b.Wc(6,"\n      "),b.Zb(7,"div",2),b.Wc(8,"\n        "),b.Zb(9,"span",3),b.hc("click",(function(){return e.obj2.btnSave_Click("Save")})),b.Ub(10,"i",4),b.Wc(11),b.mc(12,"translate"),b.Yb(),b.Wc(13,"\n        "),b.Wc(14,"\n        "),b.Zb(15,"span",3),b.hc("click",(function(){return e.obj2.btnSave_Click("Delete")})),b.Ub(16,"i",5),b.Wc(17),b.mc(18,"translate"),b.Yb(),b.Wc(19,"\n        "),b.Zb(20,"span",3),b.hc("click",(function(){return e.obj2.btnSave_Click("Clear")})),b.Ub(21,"i",6),b.Wc(22),b.mc(23,"translate"),b.Yb(),b.Wc(24,"\n        "),b.Zb(25,"span",3),b.hc("click",(function(){return e.obj2.btnSave_Click("Export")})),b.Ub(26,"i",7),b.Wc(27),b.mc(28,"translate"),b.Yb(),b.Wc(29,"\n      "),b.Yb(),b.Wc(30,"\n    "),b.Yb(),b.Wc(31,"\n  \n  "),b.Yb()),2&t&&(b.Db(5),b.Yc("\n        ",e.obj.Title,"\n      "),b.Db(6),b.Xc(b.nc(12,5,"Save")),b.Db(6),b.Xc(b.nc(18,7,"Delete")),b.Db(5),b.Xc(b.nc(23,9,"Clear")),b.Db(5),b.Xc(b.nc(28,11,"Export")))},pipes:[D.d],encapsulation:2}),s)},fKF8:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var s=a("3Pt+"),i=a("fXoL"),l=a("q8k3"),n=a("sYmb"),o=function(){var t=function(){function t(){_classCallCheck(this,t),this.form=new s.j({})}return _createClass(t,[{key:"ngOnInit",value:function(){this.obj=this.params.obj}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Nb({type:t,selectors:[["app-payslip"]],decls:63,vars:22,consts:[[1,"maincontainer"],[1,"page-header"],[1,"page-title"],[1,"btnMetroDiv","secondary-btn-group",2,"margin-right","6px"],[1,"secondary-btn",3,"click"],[1,"fa-light","fa-eye"],[1,"fa-light","fa-print"],[1,"fa-light","fa-file-export"],[1,"fa-light","fa-envelope"],[1,"fa-light","fa-filter"],[1,"main_div"],[2,"padding","11px"],[1,"row","form-row"],[1,"form-group","col-md-4","col-sm-6","col-xs-12","PACTControl"],["FieldDirective","",3,"obj","group"],[1,"documentgrid","row","form-row",2,"padding","4px 12px","height","calc(100% - 50px)","width","100%"]],template:function(t,e){1&t&&(i.Zb(0,"div",0),i.Wc(1,"\n        "),i.Zb(2,"div",1),i.Wc(3,"\n            "),i.Zb(4,"span",2),i.Wc(5),i.Yb(),i.Wc(6,"\n            "),i.Zb(7,"div",3),i.Wc(8,"\n                "),i.Zb(9,"span",4),i.hc("click",(function(){return e.obj.Button_Click("Preview")})),i.Ub(10,"i",5),i.Wc(11),i.mc(12,"translate"),i.Yb(),i.Wc(13," \n                "),i.Zb(14,"span",4),i.hc("click",(function(){return e.obj.Button_Click("Print")})),i.Ub(15,"i",6),i.Wc(16),i.mc(17,"translate"),i.Yb(),i.Wc(18," \n                "),i.Zb(19,"span",4),i.hc("click",(function(){return e.obj.Button_Click("Export")})),i.Ub(20,"i",7),i.Wc(21),i.mc(22,"translate"),i.Yb(),i.Wc(23,"\n                "),i.Zb(24,"span",4),i.hc("click",(function(){return e.obj.Button_Click("EMail")})),i.Ub(25,"i",8),i.Wc(26),i.mc(27,"translate"),i.Yb(),i.Wc(28,"\n                "),i.Zb(29,"span",4),i.hc("click",(function(){return e.obj.Button_Click("Filter")})),i.Ub(30,"i",9),i.Wc(31),i.mc(32,"translate"),i.Yb(),i.Wc(33,"\n            "),i.Yb(),i.Wc(34,"\n        "),i.Yb(),i.Wc(35,"\n"),i.Zb(36,"div",10),i.Wc(37,"\n    "),i.Zb(38,"div",11),i.Wc(39,"          \n        "),i.Zb(40,"div",12),i.Wc(41,"\n            "),i.Zb(42,"div",13),i.Wc(43,"\n                "),i.Vb(44,14),i.Wc(45,"\n            "),i.Yb(),i.Wc(46,"\n            "),i.Zb(47,"div",13),i.Wc(48,"\n                "),i.Vb(49,14),i.Wc(50,"\n            "),i.Yb(),i.Wc(51,"\n            "),i.Zb(52,"div",13),i.Wc(53,"\n                "),i.Vb(54,14),i.Wc(55,"\n            "),i.Yb(),i.Wc(56,"               \n             "),i.Yb(),i.Wc(57,"\n    "),i.Yb(),i.Wc(58,"\n\n    "),i.Zb(59,"div",15),i.Wc(60,"\n        \n    "),i.Yb(),i.Wc(61,"\n"),i.Yb(),i.Wc(62,"\n "),i.Yb()),2&t&&(i.Db(5),i.Xc(e.obj.Title),i.Db(6),i.Xc(i.nc(12,12,"Preview")),i.Db(5),i.Xc(i.nc(17,14,"Print")),i.Db(5),i.Xc(i.nc(22,16,"Export")),i.Db(5),i.Xc(i.nc(27,18,"EMail")),i.Db(5),i.Xc(i.nc(32,20,"Filter")),i.Db(13),i.tc("obj",e.obj.dtpPayrollMonth)("group",e.form),i.Db(5),i.tc("obj",e.obj.cmbPayslipLayout)("group",e.form),i.Db(5),i.tc("obj",e.obj.cmbSortOn)("group",e.form))},directives:[l.a],pipes:[n.d],encapsulation:2}),t}()},ouML:function(t,e,a){"use strict";a.r(e),a.d(e,"DocumentDraftsViewModel",(function(){return c}));var s=a("mrSG"),i=a("Do2H"),l=a("Lp6j"),n=a("ScVY"),o=a("8B8H"),r=a("ockk"),d=a("rJVx"),h=a("CUWK"),c=function(t){_inherits(n,t);var e=_createSuper(n);function n(t,a){var s,l,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(_classCallCheck(this,n),(s=e.call(this)).Grid=new o.a,s.IsFromDocs=!1,s.PopupWidth=0,s.ReportType=0,s.Parent=null,s.CCID=0,s.WID=0,s.LevelID=0,s.PactGridVisible=!1,s.CCID=h,s.Parent=t,s.ReportType=a,s.Parent instanceof d.GeneralDashboardViewModel||"DashAddOnsViewModel"==s.Parent.ClassName)?1==a&&(s.ColSource=d.GeneralDashboardViewModel.InitColumns("Document Drafts_DashBoardCustomize")):(1==a?s.DisplayName="Drafts":2==a?s.DisplayName="Hold Documents":3==a?s.DisplayName="Approval History":4==a&&(s.DisplayName="Level Info",s.PactGrid=new o.a),s.Title=s.DisplayName,s.IsFromDocs=!0,s.FillGrid(),s.Grid.OnLinkClick.Subscribe(_assertThisInitialized(s),"GridLinkClick"),s.ColSource=[],1==a?(s.ColSource=d.GeneralDashboardViewModel.InitColumns("Document Drafts_DashBoardCustomize"),s.PopupWidth=22,s.ColSource.forEach((function(t){s.PopupWidth=s.PopupWidth+t.Width}))):2==a?((l=new r.a).DataType="TextBlock",l.Header="Hold Date",l.DisplayMember="HoldDate_Key",l.Width=100,s.ColSource.push(l),(l=new r.a).DataType="LINK",l.Header=i.a.GetResource("DocName"),l.DisplayMember="DocName",l.Width=135,s.ColSource.push(l),(l=new r.a).DataType="TextBlock",l.Header="NetValue",l.DisplayMember="NetValue",l.Width=100,s.ColSource.push(l),(l=new r.a).DataType="TextBlock",l.Header="NoOfProducts",l.DisplayMember="NoOfProducts",l.Width=50,s.ColSource.push(l),(l=new r.a).DataType="LINK",l.Header=i.a.GetResource("Delete"),l.DisplayMember="Delete",l.Width=100,s.ColSource.push(l),s.PopupWidth=450):3==a?((l=new r.a).DataType="TextBlock",l.Header="User",l.DisplayMember="CreatedBy",l.Width=90,s.ColSource.push(l),(l=new r.a).DataType="TextBlock",l.Header="FirstName",l.DisplayMember="FirstName",l.Width=90,s.ColSource.push(l),(l=new r.a).DataType="TextBlock",l.Header="LastName",l.DisplayMember="LastName",l.Width=90,s.ColSource.push(l),(l=new r.a).DataType="TextBlock",l.Header="Email",l.DisplayMember="Email1",l.Width=150,s.ColSource.push(l),(l=new r.a).DataType="TextBlock",l.Header=i.a.GetResource("Date"),l.DisplayMember="AppDate",l.Width=128,s.ColSource.push(l),(l=new r.a).DataType="LINK",l.Header="Level",l.DisplayMember="LevelName",l.Width=93,s.ColSource.push(l),(l=new r.a).DataType="TextBlock",l.Header="Status",l.DisplayMember="Status",l.Width=80,s.ColSource.push(l),(l=new r.a).DataType="Format",l.Header="Remarks",l.DisplayMember="Remarks",l.Width=190,s.ColSource.push(l),s.PopupWidth=950,"AddEditDocumentViewModel"==s.Parent.ClassName&&((l=new r.a).Header="WorkFlowName",l.DisplayMember="WorkFlowName",l.Width=200,s.ColSource.push(l)),s.PopupWidth=950):4==a&&((l=new r.a).DataType="TextBlock",l.ReadOnly=!0,l.Header="User Name",l.DisplayMember="UserName",l.Width=120,s.ColSource.push(l),(l=new r.a).DataType="TextBlock",l.ReadOnly=!0,l.Header="First Name",l.DisplayMember="FirstName",l.Width=120,s.ColSource.push(l),(l=new r.a).DataType="TextBlock",l.ReadOnly=!0,l.Header="Last Name",l.DisplayMember="LastName",l.Width=120,s.ColSource.push(l),s.PactGrid.Columns=s.ColSource,s.PopupWidth=400));return _possibleConstructorReturn(s)}return _createClass(n,[{key:"onClick",value:function(t){event.preventDefault(),null!=this.SelectedRow&&this.LoadDraft(this.SelectedRow)}},{key:"FillGrid",value:function(){var t=this,e=0,a=null;if(l.e.IsType(this.Parent,"AddEditDocumentViewModel")?(a=this.Parent,e=0==this.CCID?a.CostCenterID:this.CCID):l.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName||(e=this.CCID),1==this.ReportType||2==this.ReportType)(l.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName?null==a||38!=a.ScreenObject.DocumentType&&39!=a.ScreenObject.DocumentType?i.a.document.GetDocumentDrafts(0,e,this.ReportType,!1):i.a.document.GetDocumentDrafts(a.ScreenObject.RegisterNodeID,e,this.ReportType,!1,!0):i.a.document.GetDocumentDrafts(0,this.Parent.CostCenterID,this.ReportType,!1)).subscribe((function(e){t.Table=e.Tables[0],t.Grid.TableColumns.Contains("Date_Text")||(t.Grid.TableColumns.push("Date_Text"),t.Grid.TableColumns.push("Delete")),t.Grid.TableColumns.Contains("HoldDate_Key")||t.Grid.TableColumns.push("HoldDate_Key"),t.Table.forEach((function(t){t.Delete="Delete",t.id=i.a.slick.rowid,t.Date_Text=new Date(t.Date).ToString(i.a.SessionManager.Preferences["Date Format"]+" hh:mm a"),null!=t.HoldDate&&(t.HoldDate_Key=new Date(t.HoldDate).ToString(i.a.SessionManager.Preferences["Date Format"]))}))}));else if(3==this.ReportType){var s=null;if(l.e.IsType(this.Parent,"AddEditDocumentViewModel")?(s=this.Parent.ScreenObject.GetDocStatusHistory()).Tables.length>1&&s.Tables[1].length>0&&s.Columns[1].Contains("WID")&&(this.WID=parseInt(s.Tables[1][0].WID)):l.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName?l.e.IsEmpty(this.Parent.ClassName)||"AddEditCasesViewModel"!=this.Parent.ClassName||(s=this.GetDocStatusHistory(73,this.Parent.CaseID,!1)):s=i.a.rental.GetHistory(e,this.Parent.ContractID),null!=s&&s.Tables.length>0){this.Table=s.Tables[0],this.Grid.TableColumns.push("AppDate");for(var o=0;o<this.Table.length;o++)""!=this.Table[o].Date.toString()&&(this.Table[o].AppDate=new Date(this.Table[o].Date.toString()).ToString(i.a.SessionManager.Preferences["Date Format"]+" hh:mm a"));var r=0,d=0;this.Table.length>0&&(r=l.e.IntTryParse(this.Table[this.Table.length-1].WorkFlowLevel.toString()),d=l.e.IntTryParse(this.Table[this.Table.length-1].StatusID.toString())),369!=d&&(s.Tables[1]=s.Tables[1].filter((function(t){return t.levelID>r})),s.Tables[1].forEach((function(e){var a=t.Grid.NewRow();a.LevelName=e.LevelName,a.Status="Pending",a.WorkFlowLevel=e.LevelID,t.Grid.addRow(a)})));for(var h=this.Table.length;h<7;h++)this.Grid.addEmptyRow()}}else if(4==this.ReportType){var c=null;if("WFLevelDoc"==this.Parent.ClassName?c=i.a.SessionManager.Preferences.ContainsKey("CanApproveFunction")&&"True"==i.a.SessionManager.Preferences.CanApproveFunction?i.a.report.GetExtWFDet(this.Parent.WID,this.Parent.LevelID,this.Parent.ccid,this.Parent.DOcId):i.a.report.GetWorkFlowLevelDetails(this.Parent.WID,this.Parent.LevelID,this.Parent.ccDate):this.Parent instanceof n&&(i.a.SessionManager.Preferences.ContainsKey("CanApproveFunction")&&"True"==i.a.SessionManager.Preferences.CanApproveFunction?"AddEditDocumentViewModel"==this.Parent.Parent.ClassName?c=i.a.report.GetExtWFDet(this.Parent.WID,this.Parent.LevelID,this.Parent.Parent.CostCenterID,this.Parent.Parent.ScreenObject.DocID):"ReportViewModel"==this.Parent.Parent.ClassName&&"INV_ComparisonReport"==this.Parent.Parent.StaticReportObject&&(c=i.a.report.GetExtWFDet(this.Parent.WID,this.Parent.LevelID,this.Parent.Parent.StaticReportObject.QuotationDocument,this.Parent.Parent.StatusDocID)):c=i.a.report.GetWorkFlowLevelDetails(this.Parent.WID,this.Parent.LevelID,"AddEditDocumentViewModel"==this.Parent.Parent.ClassName?this.Parent.Parent.ScreenObject.DocDate.Date:Date.Today())),null!=c){for(var u=c.Tables[0].length;u<8;u++)c.Tables[0].push();this.PactGrid.Table=c.Tables[0]}this.PactGrid.Width="",this.PactGrid.SearchVisible=!0,this.PactGrid.SearchCols.Width="85",this.PactGrid.SearchOptions.Width="90",this.PactGrid.SearchText.Width="110",this.PactGridVisible=!0}}},{key:"GetDocStatusHistory",value:function(t,e,a){Logger.InfoLog("DocumentDraftsViewModel:: Inside GetDocStatusHistory");var s=[];s.push(t),s.push(e),s.push(a),s.push(i.a.SessionManager.UserID),s.push(i.a.SessionManager.LanguageID);var l=i.a.document.GetDocStatusHistory(s);return Logger.InfoLog("DocumentDraftsViewModel:: Exiting GetDocStatusHistory"),l}},{key:"OnButtonClick",value:function(t){"Cancel"==t.toString()&&(l.e.IsType(this.Parent,"AddEditDocumentViewModel")&&this.CCID>0&&(this.Parent.res="No"),i.a.page.HideDialog())}},{key:"DeleteDraft",value:function(t){(l.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName?i.a.document.DeleteDocumentDraft(parseInt(t.DraftID)):i.a.rental.DeleteQuotation(parseInt(t.CostCenterID),parseInt(t.DraftID))).RetValue>0&&this.Grid.removeRow(t)}},{key:"LoadDraft",value:function(t){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var s,n,o,r,d,c=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.e.IsEmpty(this.Parent.ClassName)&&"AddEditRenContractViewModel"==this.Parent.ClassName){e.next=12;break}return e.next=3,Promise.all([a.e(2),a.e(1),a.e(3),a.e(5),a.e(4),a.e(6),a.e(7),a.e(10),a.e(9),a.e(12),a.e(11),a.e(13),a.e(19),a.e(15),a.e(21),a.e(20),a.e(16),a.e(14),a.e(18),a.e(17),a.e(22),a.e(89)]).then(a.bind(null,"1Cra"));case 3:return s=e.sent,n=s.AddEditDocumentViewModel,e.next=7,Promise.all([a.e(4),a.e(6)]).then(a.bind(null,"MCKn"));case 7:o=e.sent,r=o.AddEditDocumentComponent,i.a.document.GetDocumentDrafts(parseInt(t.DraftID),0,1,!1).subscribe((function(e){if(null!=(d=e.Tables[0])&&d.length>0)if("AddEditDocumentViewModel"==c.Parent.ClassName||"POSDocumentViewModel"==c.Parent.ClassName)c.CCID>0||(c.Parent.clear(1),c.Parent.LoadDraftXML(d[0]),i.a.page.HideDialog(),c.Parent.ScreenObject.GridDataObj.RefreshGridView());else{var a=1==c.ReportType,s=new n(parseInt(t.CostCenterID),t.Type.toString(),a);i.a.page.addNewTab({component:r,params:{obj:s}}),s.LoadDraftXML(d[0],a)}})),e.next=13;break;case 12:h.RibbonExtViewModel.LoadDraftRentalContract(this.Parent,parseInt(t.DraftID)),i.a.page.HideDialog();case 13:case"end":return e.stop()}}),e,this)})))}},{key:"GridLinkClick",value:function(t,e,a){event.preventDefault(),"Delete"==e?this.DeleteDraft(t):"Date_Text"!=e&&"DocName"!=e||this.LoadDraft(t)}},{key:"Table",get:function(){return this.Grid.Table},set:function(t){this.Grid.Table=t}},{key:"TableColumns",get:function(){return this.Grid.TableColumns},set:function(t){this.Grid.TableColumns=t}},{key:"ColSource",get:function(){return this.Grid.Columns},set:function(t){this.Grid.Columns=t}},{key:"SelectedRow",get:function(){return this.Grid.SelectedItem},set:function(t){this.Grid.SelectedItem=t}}]),n}(n.b)},qeHP:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var s=a("3Pt+"),i=a("fXoL"),l=a("q8k3"),n=a("sYmb"),o=function(){var t=function(){function t(){_classCallCheck(this,t),this.form=new s.j({})}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Nb({type:t,selectors:[["app-cons-mpload"]],decls:52,vars:18,consts:[[1,"master-screen",2,"padding-bottom","4px","width","400px"],[1,"PACTHeaderFields","dialogSubBody"],[1,"row","form-row"],[1,"col-xl-10","col-md-10","col-sm-12","col-xs-12"],["type","text","readonly","",3,"ngModel","ngModelChange"],[1,"col-xl-2","col-md-2","col-sm-12","col-xs-12",2,"margin-top","15px","display","flex !important"],["type","file","accept",".xlsx,.xls,.csv","name","upload",2,"display","none",3,"change"],["fileUpload",""],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-search"],[1,"form-group","row","form-row","PACTControl"],["FieldDirective","",3,"obj","group"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"]],template:function(t,e){if(1&t){var a=i.ac();i.Zb(0,"div",0),i.Wc(1,"\n    "),i.Zb(2,"div",1),i.Wc(3,"\n        "),i.Zb(4,"div",2),i.Wc(5,"\n            "),i.Zb(6,"div",3),i.Wc(7,"\n                "),i.Zb(8,"label"),i.Wc(9),i.mc(10,"translate"),i.Yb(),i.Wc(11,"\n                "),i.Zb(12,"input",4),i.hc("ngModelChange",(function(t){return e.obj.ActualFileName=t})),i.Yb(),i.Wc(13,"\n            "),i.Yb(),i.Wc(14,"\n            "),i.Zb(15,"div",5),i.Wc(16,"\n                "),i.Zb(17,"input",6,7),i.hc("change",(function(t){return e.obj.OpenFile(t)})),i.Yb(),i.Wc(19,"               \n                "),i.Zb(20,"span",8),i.hc("click",(function(){return i.Ic(a),i.Ec(18).click()})),i.Ub(21,"i",9),i.Wc(22),i.mc(23,"translate"),i.Yb(),i.Wc(24,"\n             \n            "),i.Yb(),i.Wc(25,"\n        "),i.Yb(),i.Wc(26,"  \n            \n        "),i.Zb(27,"div",10),i.Wc(28,"\n            "),i.Vb(29,11),i.Wc(30,"\n        "),i.Yb(),i.Wc(31,"\n    "),i.Yb(),i.Wc(32,"\n    "),i.Zb(33,"div",12),i.Wc(34,"\n        "),i.Zb(35,"div"),i.Wc(36,"\n            "),i.Zb(37,"button",13),i.hc("click",(function(){return e.obj.Button_Click("Load")})),i.Wc(38),i.mc(39,"translate"),i.Yb(),i.Wc(40,"\n            "),i.Zb(41,"button",8),i.hc("click",(function(){return e.obj.Button_Click("View")})),i.Wc(42),i.mc(43,"translate"),i.Yb(),i.Wc(44,"\n            "),i.Zb(45,"button",8),i.hc("click",(function(){return e.obj.Button_Click("Cancel")})),i.Ub(46,"i",14),i.Wc(47),i.mc(48,"translate"),i.Yb(),i.Wc(49,"\n           \n        "),i.Yb(),i.Wc(50,"\n    "),i.Yb(),i.Wc(51,"\n"),i.Yb()}2&t&&(i.Db(9),i.Xc(i.nc(10,8,"Com_Attachments_FileName")),i.Db(3),i.tc("ngModel",e.obj.ActualFileName),i.Db(10),i.Xc(i.nc(23,10,"Browse")),i.Db(7),i.tc("obj",e.obj.dgv)("group",e.form),i.Db(9),i.Xc(i.nc(39,12,"Load")),i.Db(4),i.Xc(i.nc(43,14,"View")),i.Db(5),i.Xc(i.nc(48,16,"Cancel")))},directives:[s.c,s.s,s.v,l.a],pipes:[n.d],encapsulation:2}),t}()},rJVx:function(t,e,a){"use strict";a.r(e),a.d(e,"GeneralDashboardViewModel",(function(){return h}));var s=a("mrSG"),i=a("Do2H"),l=a("Lp6j"),n=a("ScVY"),o=a("NkMH"),r=a("ockk"),d=a("JIg3"),h=function(t){_inherits(n,t);var e=_createSuper(n);function n(){var t;return _classCallCheck(this,n),(t=e.call(this)).ButtonPDC=new o.a,t.timerdashboard=new l.d,t.Date=new d.a(0),t.tdMaximize=new Array(4).fill(!1),Logger.InfoLog("DashboardViewModel::Entering DashboardViewModel"),t.timerdashboard.Enabled=!0,t.timerdashboard.Interval=6e4,i.a.SessionManager.IsWebApplication||t.timerdashboard.Elapsed(_assertThisInitialized(t),"timerdashboard_Elapsed"),t.DisplayName=i.a.GetResource("Dashboard_Maindashboard"),t.loadDrafts(),Logger.InfoLog("DashboardViewModel::Exiting DashboardViewModel"),t}return _createClass(n,[{key:"loadDrafts",value:function(){return Object(s.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,s,i,l,n,o,r=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.e(150).then(a.bind(null,"ouML"));case 2:return e=t.sent,s=e.DocumentDraftsViewModel,this.DocumentDrafts=new s(this,1),setTimeout((function(){r.DocumentDrafts.FillGrid()}),500),t.next=7,a.e(0).then(a.bind(null,"AyOk"));case 7:return i=t.sent,l=i.UnAppDocumentsViewModel,this.UnApprovedDocuments=new l,t.next=12,Promise.all([a.e(2),a.e(1),a.e(5),a.e(26),a.e(42),a.e(0),a.e(73)]).then(a.bind(null,"Wh9R"));case 12:n=t.sent,o=n.DashBoardNotifViewModel,this.NotifEvents=new o(2),this.PDCDocuments=new o(4);case 15:case"end":return t.stop()}}),t,this)})))}},{key:"timerdashboard_Elapsed",value:function(t,e){i.a.page.isActiveTab(this)&&(this.OnButtonClick("RefreshPDC"),this.OnButtonClick("RefreshEvents"),this.NotifEvents.RefreshData(),this.UnApprovedDocuments.OnLoad())}},{key:"OnButtonClick",value:function(t){"PostPDC"==t||("RefreshPDC"==t?(this.PDCDocuments.EventsType=4,this.PDCDocuments.InitColumns()):"PostEvents"==t||("RefreshEvents"==t?this.NotifEvents.RefreshData():"UnApproved"==t?this.UnApprovedDocuments.OnLoad():"Drafts"==t&&this.DocumentDrafts.FillGrid()))}},{key:"OnMessageCallBack",value:function(){this.res="Yes"}}],[{key:"InitColumns",value:function(t){var e,a="",s=[];if(i.a.SessionManager.Preferences.ContainsKey(t)&&(a=i.a.SessionManager.Preferences[t]),a.length>0){var n=new l.f;n.LoadXml(a);for(var o=0;o<n.DocumentElement.children.length;o++){var d=n.DocumentElement.children[o];(e=new r.a).Header=i.a.GetResource(d.attributes.Header.value),e.DisplayMember=d.attributes.ID.value,e.ReadOnly=!0,e.Width=parseInt(d.attributes.Width.value),s.push(e),"Un Approved Documents_DashBoardCustomize"==t?"VoucherNo"==e.DisplayMember?e.DataType="LINK":"Amount"==e.DisplayMember&&(e.DataType="FLOAT",e.DecimalPoints=i.a.SessionManager.Preferences.DecimalsinAmount.toString()):"Document Drafts_DashBoardCustomize"==t?"Date_Text"!=e.DisplayMember&&"Delete"!=e.DisplayMember||(e.DataType="LINK"):"Post Dated Documents_DashBoardCustomize"==t?"VoucherNo"==e.DisplayMember?e.DataType="LINK":"Amount"==e.DisplayMember&&(e.DataType="FLOAT",e.DecimalPoints=i.a.SessionManager.Preferences.DecimalsinAmount.toString()):"Notification Events_DashBoardCustomize"==t&&"VoucherNo"==e.DisplayMember&&(e.DataType="LINK")}}return s}},{key:"IsActionAssigned",value:function(t,e){return i.a.SessionManager.IsActionAssigned(t,e)}}]),n}(n.b)}}]);