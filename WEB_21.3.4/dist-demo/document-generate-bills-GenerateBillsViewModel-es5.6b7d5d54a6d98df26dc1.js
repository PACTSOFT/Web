function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var s,a=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return _possibleConstructorReturn(this,s)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[156,75,77,89,113,121,141,148,150,160,210,212],{EggS:function(e,t,s){"use strict";s.d(t,"a",(function(){return r}));var a=s("Do2H"),i=s("Lp6j"),n=s("eQJW"),r=function(){function e(){_classCallCheck(this,e),this.CustomerID=0,this.CustomerTypeID=0,this.StatusID=0,this.AccountID=0,this.ParentID=0,this.SelectedNodeID=0,this.CodeNumber=0,this.IsGroup=!1,this.CreditDays=0,this.CreditLimit=0,this.DebitDays=0,this.Debitlimit=0,this.IsCode=!1,this.ActivityXml="",this.CCXML=""}return _createClass(e,[{key:"SaveCustomerQuick",value:function(){try{var e=[];return e.push(this.CustomerID),e.push(null!=this.CustomerCode?this.CustomerCode:""),e.push(null!=this.CustomerName?this.CustomerName:""),e.push(this.StatusID),e.push(this.CodePrefix),e.push(this.CodeNumber),e.push(this.StaticFieldsQuery),e.push(this.CustomFieldsQuery),e.push(this.CustomCostCenterFieldsQuery),e.push(a.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(""),e.push(a.a.SessionManager.UserName),e.push(a.a.SessionManager.RoleID),e.push(a.a.SessionManager.LanguageID),a.a.crmService.SetCustomerQuick(e)}catch(t){return Logger.ErrorLog("Account:: SaveAccountQuick"+t.stack),""}}},{key:"SaveCustomer",value:function(){Logger.InfoLog("Customer:: Inside SaveCustomer");try{0==this.CustomerID&&(this.GUID=i.e.NewGuid());var e=[];return e.push(this.CustomerID),e.push(null!=this.CustomerCode?this.CustomerCode:""),e.push(null!=this.CustomerName?this.CustomerName:""),e.push(null!=this.AliasName?this.AliasName:""),e.push(this.CustomerTypeID),e.push(this.StatusID),e.push(this.AccountID),e.push(this.SelectedNodeID),e.push(this.IsGroup),e.push(this.CreditDays),e.push(this.CreditLimit),e.push(null!=this.UserName?this.UserName:""),e.push(null!=this.Password?this.Password:""),e.push(null!=this.OnlineCustType?this.OnlineCustType:""),e.push(a.a.SessionManager.CompanyGUID),e.push(null!=this.GUID?this.GUID:"GUID"),e.push(""),e.push(a.a.SessionManager.UserName),e.push(this.CustomFieldsQuery),e.push(this.CustomCostCenterFieldsQuery),e.push(this.ContactsXML),e.push(this.AttachmetsXML),e.push(this.NotesXML),e.push(this.AddressXML),e.push(this.ActivityXml),e.push(this.CCXML),e.push(!1),e.push(null==this.PrimaryContactQuery?"":this.PrimaryContactQuery),e.push(a.a.SessionManager.RoleID),e.push(a.a.SessionManager.LanguageID),e.push(null!=this.CodePrefix?this.CodePrefix:""),e.push(this.CodeNumber),e.push(this.IsCode),a.a.crmService.SaveCustomer(e)}catch(t){return Logger.ErrorLog("Customer:: SaveCustomer"+t.stack),""}}},{key:"GetCustomerDetails",value:function(){var e=a.a.crmService.GetCustomerInfo("?UserID="+a.a.SessionManager.UserID+"&RoleID="+a.a.SessionManager.RoleID+"&LangID="+a.a.SessionManager.LangID+"&CustomerID="+this.CustomerID);return!e.Columns[0].Contains("ErrorMessage")&&e.Tables.length>0&&e.Tables[0].length>0&&(this.CustomerID=parseInt(e.Tables[0][0].CustomerID),this.CustomerCode=i.e.String(e.Tables[0][0].CustomerCode),this.CustomerName=i.e.String(e.Tables[0][0].CustomerName),this.AliasName=i.e.String(e.Tables[0][0].AliasName),i.e.IsEmpty(e.Tables[0][0].CustomerTypeID)||(this.CustomerTypeID=parseInt(e.Tables[0][0].CustomerTypeID)),this.StatusID=parseInt(e.Tables[0][0].StatusID),i.e.IsEmpty(e.Tables[0][0].AccountID)||(this.AccountID=parseInt(e.Tables[0][0].AccountID)),this.IsGroup=Object(n.j)(e.Tables[0][0].IsGroup),i.e.IsEmpty(e.Tables[0][0].CreditDays)||(this.CreditDays=parseInt(e.Tables[0][0].CreditDays)),i.e.IsEmpty(e.Tables[0][0].CreditLimit)||(this.CreditLimit=parseFloat(e.Tables[0][0].CreditLimit)),this.ParentID=parseInt(e.Tables[0][0].ParentID),this.GUID=i.e.String(e.Tables[0][0].GUID),this.Description=i.e.String(e.Tables[0][0].Description),this.CodePrefix=i.e.String(e.Tables[0][0].CodePrefix),this.UserName=i.e.String(e.Tables[0][0].UserName),this.OnlineCustType=i.e.String(e.Tables[0][0].OnlineCustType),this.Password=i.e.String(e.Tables[0][0].Password),i.e.IsEmpty(e.Tables[0][0].CodeNumber)||(this.CodeNumber=parseInt(e.Tables[0][0].CodeNumber))),e}},{key:"DeleteCustomer",value:function(e,t){try{var s=[];return s.push(e),s.push(t),s.push(a.a.SessionManager.RoleID),s.push(a.a.SessionManager.LanguageID),Logger.InfoLog("Customer:: Success: DBH.DeleteCustomer "+e.toString()),a.a.crmService.RemoveCustomer(s)}catch(i){return Logger.ErrorLog("LEAD::DeleteLead"+i.stack),""}}}]),e}()},NM0h:function(e,t,s){"use strict";s.d(t,"a",(function(){return n}));var a=s("Do2H"),i=s("Lp6j"),n=function(){function e(){_classCallCheck(this,e),this.ChangeValueXML=null,this.DetailsXML=null,this.AMCode=null,this.AMName=null,this.AMPurchaseValue=null,this.HistoryXML=null,this.DocNo=null,this.XML=null,this.DocSave=null,this.CodePrefix=null,this.Sno=null,this.AssetClassID=0,this.DeprBookID=0,this.AcqnCostACCID=0,this.AccumDeprACCID=0,this.AcqnCostDispACCID=0,this.AccumDeprDispACCID=0,this.GainsDispACCID=0,this.LossDispACCID=0,this.MaintExpenseACCID=0,this.DeprExpenseACCID=0,this.PostingGroupID=0,this.AMStatusID=0,this.CodeNumber=0,this.AMAssetID=0,this.AMParentAssetID=0,this.IsGroup=!1,this.Post=!1,this.StatusID=0,this.DeprBookMethod=0,this.DeprBookMethodBasedOn=0,this.AveragingMethodID=0,this.DeprScheduleID=0,this.DeprTypeID=0,this.AssetClassCode=null,this.AssetClassName=null,this.GUID=null,this.DeprBookCode=null,this.DeprBookName=null,this.PostGroupCode=null,this.PostGroupName=null,this.AMGUID=null,this.RecordType=null,this.AMGroup=!1,this.IsIncreaseAssetValue=!1,this.EmpName=null,this.EmpCode=null,this.EmpID=0,this.SelectedNodeID=0,this.PostCCID=0,this.PostAssetID=0,this.ScheduleID=0,this.LocationID=0,this.AddressXML=null,this.NotesXML=null,this.ContactsXML=null,this.CustomCostCenterFieldsQuery=null,this.CustomFieldsQuery=null,this.PrimaryContactQuery=null,this.AttachmetsXML=null,this.DepreciationXML=null,this.JVXML=null,this.Description=null,this.DeprStartValue=0,this.ChangeVal=0,this.AssetNetValueChange=0,this.DeprBookMethodBasedOnValue=0,this.TotalYears=0}return _createClass(e,[{key:"SaveAssetClass",value:function(){0==this.AssetClassID&&(this.GUID=i.e.NewGuid());var e=[];return e.push(this.AssetClassID),e.push(null!=this.AssetClassCode?this.AssetClassCode:""),e.push(null!=this.AssetClassName?this.AssetClassName:""),e.push(this.PostingGroupID),e.push(this.DeprBookID),e.push(this.DeprTypeID),e.push(this.TotalYears),e.push(this.StatusID),e.push(a.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(""),e.push(a.a.SessionManager.UserName),e.push(a.a.SessionManager.UserID),e.push(a.a.SessionManager.LanguageID),a.a.accounting.SetAssetClass(e)}},{key:"PostJVvoucher",value:function(){this.GUID=i.e.NewGuid();var e=[];return e.push(this.PostAssetID),e.push(this.PostCCID),e.push(this.JVXML),e.push(this.Post),e.push(this.DeprTypeID),e.push(this.DocXML),e.push(this.DocSave),e.push(this.DepreciationXML),e.push(this.RecordType),e.push(a.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(a.a.SessionManager.UserName),e.push(a.a.SessionManager.UserID),e.push(a.a.SessionManager.LanguageID),a.a.accounting.GetPostJvVoucher(e)}},{key:"SetAssetDispose",value:function(e){this.GUID=i.e.NewGuid();var t=[];return t.push(this.PostAssetID),t.push(e.ToString("dd/MMM/yyyy")),t.push(this.PostCCID),t.push(this.JVXML),t.push(this.Post),t.push(this.DeprTypeID),t.push(this.DocXML),t.push(this.DocSave),t.push(this.DepreciationXML),t.push(this.RecordType),t.push(a.a.SessionManager.CompanyGUID),t.push(this.GUID),t.push(a.a.SessionManager.UserName),t.push(a.a.SessionManager.UserID),t.push(a.a.SessionManager.LanguageID),a.a.accounting.SetAssetDispose(t)}},{key:"SaveDeprBook",value:function(e,t,s){0==this.DeprBookID&&(this.GUID=i.e.NewGuid());var n=[];return n.push(this.DeprBookID),n.push(this.DeprBookCode),n.push(this.DeprBookName),n.push(this.DeprBookMethod),n.push(this.DeprBookMethodBasedOn),n.push(this.DeprBookMethodBasedOnValue),n.push(this.StatusID),n.push(this.AveragingMethodID),n.push(e),n.push(t),n.push(s),n.push(a.a.SessionManager.CompanyGUID),n.push(this.GUID),n.push(""),n.push(a.a.SessionManager.UserName),n.push(a.a.SessionManager.UserID),n.push(a.a.SessionManager.LanguageID),a.a.accounting.SetDeprBook(n)}},{key:"SaveFAPostingGroup",value:function(){0==this.PostingGroupID&&(this.GUID=i.e.NewGuid());var e=[];return e.push(this.PostingGroupID),e.push(this.PostGroupCode),e.push(this.PostGroupName),e.push(this.AcqnCostACCID),e.push(this.AccumDeprACCID),e.push(this.AcqnCostDispACCID),e.push(this.AccumDeprDispACCID),e.push(this.GainsDispACCID),e.push(this.LossDispACCID),e.push(this.MaintExpenseACCID),e.push(this.DeprExpenseACCID),e.push(this.StatusID),e.push(0),e.push(this.IsGroup),e.push(a.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(a.a.SessionManager.UserName),e.push(a.a.SessionManager.UserID),e.push(a.a.SessionManager.LanguageID),a.a.accounting.SetPostingGroup(e)}},{key:"SetAssetManagementDetails",value:function(){var e=[];return e.push(this.AMAssetID),e.push(this.AMCode),e.push(this.AMName),e.push(this.AMStatusID),e.push(this.AMPurchaseValue),e.push(this.AMParentAssetID),e.push(this.AMGroup),e.push(this.CodePrefix),e.push(this.CodeNumber),e.push(this.Sno),e.push(this.DetailsXML),e.push(this.ChangeValueXML),e.push(this.CustomFieldsQuery),e.push(this.CustomCostCenterFieldsQuery),e.push(this.DepreciationXML),e.push(this.HistoryXML),e.push(this.NotesXML),e.push(this.AttachmetsXML),e.push(a.a.SessionManager.CompanyGUID),e.push(this.AMGUID),e.push(a.a.SessionManager.UserName),e.push(a.a.SessionManager.UserID),e.push(a.a.SessionManager.LanguageID),a.a.accounting.SetAssetManagementDetails(e).toPromise()}},{key:"PostDeprJV",value:function(){this.GUID=i.e.NewGuid();var e=[];return e.push(this.PostCCID),e.push(this.JVXML),e.push(this.Post),e.push(a.a.SessionManager.CompanyGUID),e.push(this.GUID),e.push(a.a.SessionManager.UserName),e.push(a.a.SessionManager.UserID),e.push(a.a.SessionManager.LanguageID),e.push(a.a.SessionManager.RoleID),a.a.accounting.PostDeprJV(e)}},{key:"PostDeprJVSummary",value:function(e,t,s,n,r){this.GUID=i.e.NewGuid();var o=[];return o.push(e),o.push(t),o.push(s),o.push(n),o.push(r),o.push(a.a.SessionManager.CompanyGUID),o.push(a.a.SessionManager.UserName),o.push(a.a.SessionManager.UserID),o.push(a.a.SessionManager.LanguageID),a.a.accounting.SetDeprPostingJVSummary(o).toPromise()}},{key:"ChangeValue",value:function(e,t){this.GUID=i.e.NewGuid();var s=[];return s.push(this.PostAssetID),s.push(e),s.push(this.ChangeVal),s.push(this.AssetNetValueChange),s.push(t.ToString("dd/MMM/yyyy")),s.push(this.Description),s.push(this.DepreciationXML),s.push(this.ChangeValueXML),s.push(this.HistoryXML),s.push(this.LocationID),s.push(this.IsIncreaseAssetValue),s.push(this.JVXML),s.push(this.ChangeValueTypeID),s.push(a.a.SessionManager.CompanyGUID),s.push(this.GUID),s.push(a.a.SessionManager.UserName),s.push(a.a.SessionManager.UserID),s.push(a.a.SessionManager.LanguageID),a.a.accounting.SetAssetChangeValue(s)}},{key:"DisposeReverse",value:function(e){var t=[];return t.push(e),t.push(a.a.SessionManager.UserName),t.push(a.a.SessionManager.UserID),t.push(a.a.SessionManager.LanguageID),a.a.accounting.DisposeReverse(t)}}],[{key:"GetAssetClassDetails",value:function(e){var t=[];return t.push(e),t.push(a.a.SessionManager.UserID),t.push(a.a.SessionManager.LanguageID),a.a.accounting.GetAssetClassDetails(t)}},{key:"GetPostingGroupDetails",value:function(e){var t=[];return t.push(e),t.push(a.a.SessionManager.UserID),t.push(a.a.SessionManager.LanguageID),a.a.accounting.GetPostingGroupDetails(t)}},{key:"GetDeprBookDetails",value:function(e){var t=[];return t.push(e),t.push(a.a.SessionManager.UserID),t.push(a.a.SessionManager.LanguageID),a.a.accounting.GetDeprBookDetails(t)}},{key:"GetAssetManagementDetails",value:function(e){var t=[];return t.push(e),t.push(a.a.SessionManager.UserID),t.push(a.a.SessionManager.LanguageID),a.a.accounting.GetAssetManagementDetails(t)}},{key:"GetAssetDeprSchDetails",value:function(e){var t=[];return t.push(e),t.push(a.a.SessionManager.UserID),t.push(a.a.SessionManager.LanguageID),a.a.accounting.GetAssetDeprSchDetails(t)}},{key:"DeleteAsset",value:function(e){var t=[];return t.push(e),t.push(a.a.SessionManager.UserID),t.push(a.a.SessionManager.RoleID),a.a.accounting.DeleteAsset(t)}},{key:"DeleteAssetDeprSchedule",value:function(e){var t=[];return t.push(e),t.push(a.a.SessionManager.RoleID),t.push(a.a.SessionManager.LanguageID),a.a.accounting.DeleteAssetDeprSchedule(t)}},{key:"DeleteAssetRefDoc",value:function(e,t){var s=[];return s.push(e),s.push(t),s.push(a.a.SessionManager.UserID),a.a.accounting.DeleteAssetRefDoc(s)}},{key:"SetsPostDeprReverseJV",value:function(e,t,s){var i=[];return i.push(e),i.push(t),i.push(s),i.push(a.a.SessionManager.CompanyGUID),i.push(a.a.SessionManager.UserName),i.push(a.a.SessionManager.UserID),i.push(a.a.SessionManager.LanguageID),a.a.accounting.SetsPostDeprReverseJV(i)}}]),e}()},ouML:function(e,t,s){"use strict";s.r(t),s.d(t,"DocumentDraftsViewModel",(function(){return c}));var a=s("mrSG"),i=s("Do2H"),n=s("Lp6j"),r=s("ScVY"),o=s("8B8H"),l=s("ockk"),u=s("rJVx"),h=s("CUWK"),c=function(e){_inherits(r,e);var t=_createSuper(r);function r(e,s){var a,n,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;(_classCallCheck(this,r),(a=t.call(this)).Grid=new o.a,a.IsFromDocs=!1,a.PopupWidth=0,a.ReportType=0,a.Parent=null,a.CCID=0,a.WID=0,a.LevelID=0,a.PactGridVisible=!1,a.CCID=h,a.Parent=e,a.ReportType=s,a.Parent instanceof u.GeneralDashboardViewModel||"DashAddOnsViewModel"==a.Parent.ClassName)?1==s&&(a.ColSource=u.GeneralDashboardViewModel.InitColumns("Document Drafts_DashBoardCustomize")):(1==s?a.DisplayName="Drafts":2==s?a.DisplayName="Hold Documents":3==s?a.DisplayName="Approval History":4==s&&(a.DisplayName="Level Info",a.PactGrid=new o.a),a.Title=a.DisplayName,a.IsFromDocs=!0,a.FillGrid(),a.Grid.OnLinkClick.Subscribe(_assertThisInitialized(a),"GridLinkClick"),a.ColSource=[],1==s?(a.ColSource=u.GeneralDashboardViewModel.InitColumns("Document Drafts_DashBoardCustomize"),a.PopupWidth=22,a.ColSource.forEach((function(e){a.PopupWidth=a.PopupWidth+e.Width}))):2==s?((n=new l.a).DataType="TextBlock",n.Header="Hold Date",n.DisplayMember="HoldDate_Key",n.Width=100,a.ColSource.push(n),(n=new l.a).DataType="LINK",n.Header=i.a.GetResource("DocName"),n.DisplayMember="DocName",n.Width=135,a.ColSource.push(n),(n=new l.a).DataType="TextBlock",n.Header="NetValue",n.DisplayMember="NetValue",n.Width=100,a.ColSource.push(n),(n=new l.a).DataType="TextBlock",n.Header="NoOfProducts",n.DisplayMember="NoOfProducts",n.Width=50,a.ColSource.push(n),(n=new l.a).DataType="LINK",n.Header=i.a.GetResource("Delete"),n.DisplayMember="Delete",n.Width=100,a.ColSource.push(n),a.PopupWidth=450):3==s?((n=new l.a).DataType="TextBlock",n.Header="User",n.DisplayMember="CreatedBy",n.Width=90,a.ColSource.push(n),(n=new l.a).DataType="TextBlock",n.Header="FirstName",n.DisplayMember="FirstName",n.Width=90,a.ColSource.push(n),(n=new l.a).DataType="TextBlock",n.Header="LastName",n.DisplayMember="LastName",n.Width=90,a.ColSource.push(n),(n=new l.a).DataType="TextBlock",n.Header="Email",n.DisplayMember="Email1",n.Width=150,a.ColSource.push(n),(n=new l.a).DataType="TextBlock",n.Header=i.a.GetResource("Date"),n.DisplayMember="AppDate",n.Width=128,a.ColSource.push(n),(n=new l.a).DataType="LINK",n.Header="Level",n.DisplayMember="LevelName",n.Width=93,a.ColSource.push(n),(n=new l.a).DataType="TextBlock",n.Header="Status",n.DisplayMember="Status",n.Width=80,a.ColSource.push(n),(n=new l.a).DataType="Format",n.Header="Remarks",n.DisplayMember="Remarks",n.Width=190,a.ColSource.push(n),a.PopupWidth=950,"AddEditDocumentViewModel"==a.Parent.ClassName&&((n=new l.a).Header="WorkFlowName",n.DisplayMember="WorkFlowName",n.Width=200,a.ColSource.push(n)),a.PopupWidth=950):4==s&&((n=new l.a).DataType="TextBlock",n.ReadOnly=!0,n.Header="User Name",n.DisplayMember="UserName",n.Width=120,a.ColSource.push(n),(n=new l.a).DataType="TextBlock",n.ReadOnly=!0,n.Header="First Name",n.DisplayMember="FirstName",n.Width=120,a.ColSource.push(n),(n=new l.a).DataType="TextBlock",n.ReadOnly=!0,n.Header="Last Name",n.DisplayMember="LastName",n.Width=120,a.ColSource.push(n),a.PactGrid.Columns=a.ColSource,a.PopupWidth=400));return _possibleConstructorReturn(a)}return _createClass(r,[{key:"onClick",value:function(e){event.preventDefault(),null!=this.SelectedRow&&this.LoadDraft(this.SelectedRow)}},{key:"FillGrid",value:function(){var e=this,t=0,s=null;if(n.e.IsType(this.Parent,"AddEditDocumentViewModel")?(s=this.Parent,t=0==this.CCID?s.CostCenterID:this.CCID):n.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName||(t=this.CCID),1==this.ReportType||2==this.ReportType)(n.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName?null==s||38!=s.ScreenObject.DocumentType&&39!=s.ScreenObject.DocumentType?i.a.document.GetDocumentDrafts(0,t,this.ReportType,!1):i.a.document.GetDocumentDrafts(s.ScreenObject.RegisterNodeID,t,this.ReportType,!1,!0):i.a.document.GetDocumentDrafts(0,this.Parent.CostCenterID,this.ReportType,!1)).subscribe((function(t){e.Table=t.Tables[0],e.Grid.TableColumns.Contains("Date_Text")||(e.Grid.TableColumns.push("Date_Text"),e.Grid.TableColumns.push("Delete")),e.Grid.TableColumns.Contains("HoldDate_Key")||e.Grid.TableColumns.push("HoldDate_Key"),e.Table.forEach((function(e){e.Delete="Delete",e.id=i.a.slick.rowid,e.Date_Text=new Date(e.Date).ToString(i.a.SessionManager.Preferences["Date Format"]+" hh:mm a"),null!=e.HoldDate&&(e.HoldDate_Key=new Date(e.HoldDate).ToString(i.a.SessionManager.Preferences["Date Format"]))}))}));else if(3==this.ReportType){var a=null;if(n.e.IsType(this.Parent,"AddEditDocumentViewModel")?(a=this.Parent.ScreenObject.GetDocStatusHistory()).Tables.length>1&&a.Tables[1].length>0&&a.Columns[1].Contains("WID")&&(this.WID=parseInt(a.Tables[1][0].WID)):n.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName?n.e.IsEmpty(this.Parent.ClassName)||"AddEditCasesViewModel"!=this.Parent.ClassName||(a=this.GetDocStatusHistory(73,this.Parent.CaseID,!1)):a=i.a.rental.GetHistory(t,this.Parent.ContractID),null!=a&&a.Tables.length>0){this.Table=a.Tables[0],this.Grid.TableColumns.push("AppDate");for(var o=0;o<this.Table.length;o++)""!=this.Table[o].Date.toString()&&(this.Table[o].AppDate=new Date(this.Table[o].Date.toString()).ToString(i.a.SessionManager.Preferences["Date Format"]+" hh:mm a"));var l=0,u=0;this.Table.length>0&&(l=n.e.IntTryParse(this.Table[this.Table.length-1].WorkFlowLevel.toString()),u=n.e.IntTryParse(this.Table[this.Table.length-1].StatusID.toString())),369!=u&&(a.Tables[1]=a.Tables[1].filter((function(e){return e.levelID>l})),a.Tables[1].forEach((function(t){var s=e.Grid.NewRow();s.LevelName=t.LevelName,s.Status="Pending",s.WorkFlowLevel=t.LevelID,e.Grid.addRow(s)})));for(var h=this.Table.length;h<7;h++)this.Grid.addEmptyRow()}}else if(4==this.ReportType){var c=null;if("WFLevelDoc"==this.Parent.ClassName?c=i.a.SessionManager.Preferences.ContainsKey("CanApproveFunction")&&"True"==i.a.SessionManager.Preferences.CanApproveFunction?i.a.report.GetExtWFDet(this.Parent.WID,this.Parent.LevelID,this.Parent.ccid,this.Parent.DOcId):i.a.report.GetWorkFlowLevelDetails(this.Parent.WID,this.Parent.LevelID,this.Parent.ccDate):this.Parent instanceof r&&(i.a.SessionManager.Preferences.ContainsKey("CanApproveFunction")&&"True"==i.a.SessionManager.Preferences.CanApproveFunction?"AddEditDocumentViewModel"==this.Parent.Parent.ClassName?c=i.a.report.GetExtWFDet(this.Parent.WID,this.Parent.LevelID,this.Parent.Parent.CostCenterID,this.Parent.Parent.ScreenObject.DocID):"ReportViewModel"==this.Parent.Parent.ClassName&&"INV_ComparisonReport"==this.Parent.Parent.StaticReportObject&&(c=i.a.report.GetExtWFDet(this.Parent.WID,this.Parent.LevelID,this.Parent.Parent.StaticReportObject.QuotationDocument,this.Parent.Parent.StatusDocID)):c=i.a.report.GetWorkFlowLevelDetails(this.Parent.WID,this.Parent.LevelID,"AddEditDocumentViewModel"==this.Parent.Parent.ClassName?this.Parent.Parent.ScreenObject.DocDate.Date:Date.Today())),null!=c){for(var D=c.Tables[0].length;D<8;D++)c.Tables[0].push();this.PactGrid.Table=c.Tables[0]}this.PactGrid.Width="",this.PactGrid.SearchVisible=!0,this.PactGrid.SearchCols.Width="85",this.PactGrid.SearchOptions.Width="90",this.PactGrid.SearchText.Width="110",this.PactGridVisible=!0}}},{key:"GetDocStatusHistory",value:function(e,t,s){Logger.InfoLog("DocumentDraftsViewModel:: Inside GetDocStatusHistory");var a=[];a.push(e),a.push(t),a.push(s),a.push(i.a.SessionManager.UserID),a.push(i.a.SessionManager.LanguageID);var n=i.a.document.GetDocStatusHistory(a);return Logger.InfoLog("DocumentDraftsViewModel:: Exiting GetDocStatusHistory"),n}},{key:"OnButtonClick",value:function(e){"Cancel"==e.toString()&&(n.e.IsType(this.Parent,"AddEditDocumentViewModel")&&this.CCID>0&&(this.Parent.res="No"),i.a.page.HideDialog())}},{key:"DeleteDraft",value:function(e){(n.e.IsEmpty(this.Parent.ClassName)||"AddEditRenContractViewModel"!=this.Parent.ClassName?i.a.document.DeleteDocumentDraft(parseInt(e.DraftID)):i.a.rental.DeleteQuotation(parseInt(e.CostCenterID),parseInt(e.DraftID))).RetValue>0&&this.Grid.removeRow(e)}},{key:"LoadDraft",value:function(e){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var a,r,o,l,u,c=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.e.IsEmpty(this.Parent.ClassName)&&"AddEditRenContractViewModel"==this.Parent.ClassName){t.next=12;break}return t.next=3,Promise.all([s.e(2),s.e(1),s.e(3),s.e(5),s.e(4),s.e(6),s.e(7),s.e(10),s.e(9),s.e(12),s.e(11),s.e(13),s.e(19),s.e(15),s.e(21),s.e(20),s.e(16),s.e(14),s.e(18),s.e(17),s.e(22),s.e(89)]).then(s.bind(null,"1Cra"));case 3:return a=t.sent,r=a.AddEditDocumentViewModel,t.next=7,Promise.all([s.e(4),s.e(6)]).then(s.bind(null,"MCKn"));case 7:o=t.sent,l=o.AddEditDocumentComponent,i.a.document.GetDocumentDrafts(parseInt(e.DraftID),0,1,!1).subscribe((function(t){if(null!=(u=t.Tables[0])&&u.length>0)if("AddEditDocumentViewModel"==c.Parent.ClassName||"POSDocumentViewModel"==c.Parent.ClassName)c.CCID>0||(c.Parent.clear(1),c.Parent.LoadDraftXML(u[0]),i.a.page.HideDialog(),c.Parent.ScreenObject.GridDataObj.RefreshGridView());else{var s=1==c.ReportType,a=new r(parseInt(e.CostCenterID),e.Type.toString(),s);i.a.page.addNewTab({component:l,params:{obj:a}}),a.LoadDraftXML(u[0],s)}})),t.next=13;break;case 12:h.RibbonExtViewModel.LoadDraftRentalContract(this.Parent,parseInt(e.DraftID)),i.a.page.HideDialog();case 13:case"end":return t.stop()}}),t,this)})))}},{key:"GridLinkClick",value:function(e,t,s){event.preventDefault(),"Delete"==t?this.DeleteDraft(e):"Date_Text"!=t&&"DocName"!=t||this.LoadDraft(e)}},{key:"Table",get:function(){return this.Grid.Table},set:function(e){this.Grid.Table=e}},{key:"TableColumns",get:function(){return this.Grid.TableColumns},set:function(e){this.Grid.TableColumns=e}},{key:"ColSource",get:function(){return this.Grid.Columns},set:function(e){this.Grid.Columns=e}},{key:"SelectedRow",get:function(){return this.Grid.SelectedItem},set:function(e){this.Grid.SelectedItem=e}}]),r}(r.b)},rJVx:function(e,t,s){"use strict";s.r(t),s.d(t,"GeneralDashboardViewModel",(function(){return h}));var a=s("mrSG"),i=s("Do2H"),n=s("Lp6j"),r=s("ScVY"),o=s("NkMH"),l=s("ockk"),u=s("JIg3"),h=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),(e=t.call(this)).ButtonPDC=new o.a,e.timerdashboard=new n.d,e.Date=new u.a(0),e.tdMaximize=new Array(4).fill(!1),Logger.InfoLog("DashboardViewModel::Entering DashboardViewModel"),e.timerdashboard.Enabled=!0,e.timerdashboard.Interval=6e4,i.a.SessionManager.IsWebApplication||e.timerdashboard.Elapsed(_assertThisInitialized(e),"timerdashboard_Elapsed"),e.DisplayName=i.a.GetResource("Dashboard_Maindashboard"),e.loadDrafts(),Logger.InfoLog("DashboardViewModel::Exiting DashboardViewModel"),e}return _createClass(r,[{key:"loadDrafts",value:function(){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,a,i,n,r,o,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.e(150).then(s.bind(null,"ouML"));case 2:return t=e.sent,a=t.DocumentDraftsViewModel,this.DocumentDrafts=new a(this,1),setTimeout((function(){l.DocumentDrafts.FillGrid()}),500),e.next=7,s.e(0).then(s.bind(null,"AyOk"));case 7:return i=e.sent,n=i.UnAppDocumentsViewModel,this.UnApprovedDocuments=new n,e.next=12,Promise.all([s.e(2),s.e(1),s.e(5),s.e(26),s.e(42),s.e(0),s.e(73)]).then(s.bind(null,"Wh9R"));case 12:r=e.sent,o=r.DashBoardNotifViewModel,this.NotifEvents=new o(2),this.PDCDocuments=new o(4);case 15:case"end":return e.stop()}}),e,this)})))}},{key:"timerdashboard_Elapsed",value:function(e,t){i.a.page.isActiveTab(this)&&(this.OnButtonClick("RefreshPDC"),this.OnButtonClick("RefreshEvents"),this.NotifEvents.RefreshData(),this.UnApprovedDocuments.OnLoad())}},{key:"OnButtonClick",value:function(e){"PostPDC"==e||("RefreshPDC"==e?(this.PDCDocuments.EventsType=4,this.PDCDocuments.InitColumns()):"PostEvents"==e||("RefreshEvents"==e?this.NotifEvents.RefreshData():"UnApproved"==e?this.UnApprovedDocuments.OnLoad():"Drafts"==e&&this.DocumentDrafts.FillGrid()))}},{key:"OnMessageCallBack",value:function(){this.res="Yes"}}],[{key:"InitColumns",value:function(e){var t,s="",a=[];if(i.a.SessionManager.Preferences.ContainsKey(e)&&(s=i.a.SessionManager.Preferences[e]),s.length>0){var r=new n.f;r.LoadXml(s);for(var o=0;o<r.DocumentElement.children.length;o++){var u=r.DocumentElement.children[o];(t=new l.a).Header=i.a.GetResource(u.attributes.Header.value),t.DisplayMember=u.attributes.ID.value,t.ReadOnly=!0,t.Width=parseInt(u.attributes.Width.value),a.push(t),"Un Approved Documents_DashBoardCustomize"==e?"VoucherNo"==t.DisplayMember?t.DataType="LINK":"Amount"==t.DisplayMember&&(t.DataType="FLOAT",t.DecimalPoints=i.a.SessionManager.Preferences.DecimalsinAmount.toString()):"Document Drafts_DashBoardCustomize"==e?"Date_Text"!=t.DisplayMember&&"Delete"!=t.DisplayMember||(t.DataType="LINK"):"Post Dated Documents_DashBoardCustomize"==e?"VoucherNo"==t.DisplayMember?t.DataType="LINK":"Amount"==t.DisplayMember&&(t.DataType="FLOAT",t.DecimalPoints=i.a.SessionManager.Preferences.DecimalsinAmount.toString()):"Notification Events_DashBoardCustomize"==e&&"VoucherNo"==t.DisplayMember&&(t.DataType="LINK")}}return a}},{key:"IsActionAssigned",value:function(e,t){return i.a.SessionManager.IsActionAssigned(e,t)}}]),r}(r.b)},s4nK:function(e,t,s){"use strict";s.r(t),s.d(t,"GenerateBillsViewModel",(function(){return g}));var a=s("mrSG"),i=s("Do2H"),n=s("Lp6j"),r=s("eQJW"),o=s("ScVY"),l=s("0/4Q"),u=s("EQd/"),h=s("n56n"),c=s("JIg3"),D=s("8B8H"),p=s("ockk"),d=s("PDNK"),m=s("wlFP"),C=s("1Cra"),g=function(e){_inherits(o,e);var t=_createSuper(o);function o(e){var s;return _classCallCheck(this,o),(s=t.call(this)).InProgress="",s.ProgressMessage="",s.ProgressValue=0,s.ProgressWidth=0,s.ProgressMax=0,s.BasedOn=new l.e(0),s.Status=new l.e(0),s.Customer=new h.b(0),s.From=new u.d(0),s.TO=new u.d(0),s.FromDate=new c.a(0),s.ToDate=new c.a(0),s.InvoiceDate=new c.a(0),s.TillDate=new c.a(0),s._SelectAll=!1,s.chkSelectAll=new m.a,s.VoucherWise=!1,s.DateWise=!1,s.rdoVoucherWise=new d.a("",0,"Doc"),s.rdoDateWise=new d.a("",0,"Doc"),s.dtpref=null,s.ShowProcessDialog=!1,s.DisplayName=e,s.FromDate.Label=i.a.GetResource("DocumentDesigner_FromDate"),s.Customer.Label="Customer",s.Customer.CCID=2,s.Customer.TypeID=2,s.ToDate.Label=i.a.GetResource("DocumentDesigner_ToDate"),s.BasedOn.Label="Post Bills",s.Status.Label="Show Contracts",s.BasedOn.Items.push(l.d.ComboBoxItems_2("Contract based","0")),s.BasedOn.Items.push(l.d.ComboBoxItems_2("Customer based","1")),s.Status.Items.push(l.d.ComboBoxItems_2("Both","0")),s.Status.Items.push(l.d.ComboBoxItems_2("Pending","1")),s.Status.Items.push(l.d.ComboBoxItems_2("Invoiced","2")),s.BasedOn.SelectedValue="0",s.Status.SelectedValue="1",s.InvoiceDate.Label="Invoice Date",s.VoucherWise=!1,s.DateWise=!0,s.From.Label="From",s.TO.Label="To",s.TillDate.Label="Till Date",s.LoadGrid(),s.rdoVoucherWise.Label=i.a.GetResource("Com_HCNoWise"),s.rdoVoucherWise.CheckedChangedCommand.Subscribe(_assertThisInitialized(s),"onVoucherWiseCheck"),s.rdoDateWise.Label=i.a.GetResource("Com_DateWise"),s.rdoDateWise.CheckedChangedCommand.Subscribe(_assertThisInitialized(s),"onDateWiseCheck"),s.chkSelectAll.Label=i.a.GetResource("Selectall"),s.chkSelectAll.CheckedChangedCommand.Subscribe(_assertThisInitialized(s),"onSelectall"),s.ProgressWidth=1,s}return _createClass(o,[{key:"onSelectall",value:function(e){this.SelectAll=e.IsChecked}},{key:"onVoucherWiseCheck",value:function(e){this.VoucherWise=e.IsChecked,this.DateWise=!1,this.rdoDateWise.IsChecked=!1,this.FromDate.Enable=!1,this.ToDate.Enable=!1,this.From.Enable=!0,this.TO.Enable=!0}},{key:"onDateWiseCheck",value:function(e){this.DateWise=e.IsChecked,this.VoucherWise=!1,this.rdoVoucherWise.IsChecked=!1,this.FromDate.Enable=!0,this.ToDate.Enable=!0,this.From.Enable=!1,this.TO.Enable=!1}},{key:"OnBeginEdit",value:function(e){return!n.e.IsEmpty(e.args.item.BillNo)}},{key:"LoadGrid",value:function(){this.Vouchers=new D.a(!0),this.Vouchers.CanUserDeleteRows=!0,this.Vouchers.Table=[],this.Vouchers.OnBeginEdit.Subscribe(this,"OnBeginEdit"),this.Vouchers.TableColumns.push("Select"),this.Vouchers.TableColumns.push("Sno"),this.Vouchers.TableColumns.push("Date"),this.Vouchers.TableColumns.push("HCNo"),this.Vouchers.TableColumns.push("Customer"),this.Vouchers.TableColumns.push("Product"),this.Vouchers.TableColumns.push("BillCycle"),this.Vouchers.TableColumns.push("Price"),this.Vouchers.TableColumns.push("CustomerID"),this.Vouchers.TableColumns.push("DtBill"),this.Vouchers.TableColumns.push("BillNo"),this.Vouchers.TableColumns.push("Billdate"),this.Vouchers.TableColumns.push("TotDays"),this.Vouchers.TableColumns.push("InvDocDetailsID"),this.Vouchers.TableColumns.push("Remarks"),this.Vouchers.TableColumns.push("ProductID"),this.Vouchers.TableColumns.push("Fromdate"),this.Vouchers.TableColumns.push("Todate"),this.Vouchers.TableColumns.push("billseq");var e=new p.a;this.Vouchers.Columns=[],(e=new p.a).Header="Select",e.DisplayMember="Select",e.DataType="CheckBox",e.Width=50,this.Vouchers.Columns.push(e),(e=new p.a).Header="Sno",e.DisplayMember="Sno",e.DataType="TextBlock",e.Width=50,e.ReadOnly=!0,this.Vouchers.Columns.push(e),(e=new p.a).Header="HC Date",e.DisplayMember="Date",e.DataType="TextBlock",e.Width=80,e.ReadOnly=!0,this.Vouchers.Columns.push(e),(e=new p.a).Header="HC No.",e.DisplayMember="HCNo",e.DataType="LINK",e.Click.Subscribe(this,"onHCClick"),e.Width=100,e.ReadOnly=!0,this.Vouchers.Columns.push(e),(e=new p.a).Header="Customer",e.DisplayMember="Customer",e.DataType="TextBlock",e.Width=200,e.ReadOnly=!0,this.Vouchers.Columns.push(e),(e=new p.a).Header="Product",e.DisplayMember="Product",e.DataType="TextBlock",e.Width=150,e.ReadOnly=!0,this.Vouchers.Columns.push(e),(e=new p.a).Header="BillCycle",e.DisplayMember="BillCycle",e.DataType="TextBlock",e.Width=200,e.ReadOnly=!0,this.Vouchers.Columns.push(e),(e=new p.a).Header="Tot Days",e.DisplayMember="TotDays",e.DataType="TextBlock",e.Width=80,e.ReadOnly=!0,this.Vouchers.Columns.push(e),(e=new p.a).Header="Qty",e.DisplayMember="Qty",e.DataType="FLOAT",e.Width=80,e.ReadOnly=!0,e.IsVisible=!1,this.Vouchers.Columns.push(e),(e=new p.a).Header="Price",e.DisplayMember="Price",e.DataType="FLOAT",e.Width=70,e.DecimalPoints=i.a.SessionManager.Preferences.DecimalsinAmount,e.ReadOnly=!0,this.Vouchers.Columns.push(e),(e=new p.a).Header="Bill No",e.DisplayMember="BillNo",e.DataType="LINK",e.Width=100,e.ReadOnly=!0,e.Click.Subscribe(this,"onDOcClick"),this.Vouchers.Columns.push(e),(e=new p.a).Header="Bill Date",e.DisplayMember="Billdate",e.Width=100,e.ReadOnly=!0,this.Vouchers.Columns.push(e),(e=new p.a).Header="Remarks",e.DisplayMember="Remarks",e.Width=100,e.ReadOnly=!0,this.Vouchers.Columns.push(e),this.Vouchers.SearchVisible=!0,this.Vouchers.SelectAll.Visible=!0,this.Vouchers.SearchColStartIndex=1,this.Vouchers.AddSearchCols()}},{key:"onHCClick",value:function(e){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,a,r,o,l,u,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.Vouchers.SelectedItem||n.e.IsEmpty(this.Vouchers.SelectedItem.HCNo)){e.next=14;break}if(0,t=i.a.report.GetDocumentDetailsByVoucherNo(this.Vouchers.SelectedItem.HCNo.toString()),!(n.e.Int(t.obj)>0)){e.next=14;break}return a=t.Tables[0].length>0?t.Tables[0][0]:t.Tables[1][0],e.next=6,Promise.resolve().then(s.bind(null,"MCKn"));case 6:return r=e.sent,o=r.AddEditDocumentComponent,e.next=10,Promise.resolve().then(s.bind(null,"1Cra"));case 10:l=e.sent,u=l.AddEditDocumentViewModel,(h=new u(parseInt(a.CostCenterID),a.DocumentName.toString(),!0)).ScreenObject.DocPrefix.ComboBox.SelectedValue=a.DocPrefix.toString(),h.ScreenObject.DocPrefix.TextBox.Text=a.DocNumber.toString(),h.OnDocPrefixChanged("lostFocus"),h.ScreenObject.FillDocumentPrefix(!0),i.a.page.addNewTab({component:o,params:{obj:h}});case 14:case"end":return e.stop()}}),e,this)})))}},{key:"onDOcClick",value:function(e){return Object(a.b)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,a,r,o,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==this.Vouchers.SelectedItem||n.e.IsEmpty(this.Vouchers.SelectedItem.BillNo)){e.next=10;break}if(0,t=i.a.report.GetDocumentDetailsByVoucherNo(this.Vouchers.SelectedItem.BillNo.toString()),!(n.e.Int(t.obj)>0)){e.next=10;break}return a=t.Tables[0].length>0?t.Tables[0][0]:t.Tables[1][0],e.next=6,Promise.resolve().then(s.bind(null,"MCKn"));case 6:r=e.sent,o=r.AddEditDocumentComponent,(l=new C.AddEditDocumentViewModel(parseInt(a.CostCenterID),a.DocumentName.toString(),!0)).ScreenObject.DocPrefix.ComboBox.SelectedValue=a.DocPrefix.toString(),l.ScreenObject.DocPrefix.TextBox.Text=a.DocNumber.toString(),l.OnDocPrefixChanged("lostFocus"),l.ScreenObject.FillDocumentPrefix(!0),i.a.page.addNewTab({component:o,params:{obj:l}});case 10:case"end":return e.stop()}}),e,this)})))}},{key:"OnButtonClick",value:function(e){if("Hide"==e)this.ShowProcessDialog=!1;else if("Generate Bills"==e)this.ProgressMessage="Resaving documents.Please wait...",this.ShowProcessDialog=!0,this.SaveCall();else if("Export"==e);else if("OK"==e){this.SelectAll=!1;var t=0,s=0;null!=this.From.Text&&n.e.Int(this.From.Text)>0&&(t=parseInt(this.From.Text)),null!=this.TO.Text&&n.e.Int(this.TO.Text)>0&&(s=parseInt(this.TO.Text));var a=this.GetBills(this.FromDate.Date,this.ToDate.Date,this.VoucherWise,t,s,this.TillDate.Date,this.Customer.SelectedValue);if(null!=a&&a.Tables.length>0&&a.Columns[0].Contains("ErrorMessage")&&a.Tables[0].length>0)return this.DisplayMessage=a.Tables[0][0].ErrorMessage.toString(),void(this.MessageVisibility=!0);if(null!=a&&a.Tables.length>0){var o=!1;if(a.Tables.length>1&&a.Tables[1].length>0&&a.Columns[1].Contains("Name")){if(this.dtpref=a.Tables[1],!this.Vouchers.TableColumns.Contains("Qty")){var l=this.dtpref.filter((function(e){return"QtyBased"==e.Name}));l.length>0&&!n.e.IsEmpty(l[0].Value)&&Object(r.j)(l[0].Value.toString())&&(this.Vouchers.TableColumns.push("Qty"),this.Vouchers.Columns[8].IsVisible=!0,this.Vouchers.UpdateFooter())}var u=this.dtpref.filter((function(e){return"InvoiceOnDelDate"==e.Name}));u.length>0&&(o=Object(r.j)(u[0].Value.toString())),o&&!this.Vouchers.TableColumns.Contains("InvDate")&&this.Vouchers.TableColumns.push("InvDate")}this.Vouchers.Table.Clear();for(var h=0;h<a.Tables[0].length;h++)if(("1"!=this.Status.SelectedValue||n.e.IsEmpty(a.Tables[0][h].BillNo))&&("2"!=this.Status.SelectedValue||""!=n.e.String(a.Tables[0][h].BillNo))){var c=this.Vouchers.NewRow();c.Date=new Date(a.Tables[0][h].docdate.toString()).ToString(i.a.SessionManager.Preferences["Date Format"]),c.HCNo=a.Tables[0][h].voucherno,c.Customer=a.Tables[0][h].accountname,c.CustomerID=a.Tables[0][h].debitaccount,c.Product=a.Tables[0][h].productname,c.ProductID=a.Tables[0][h].Prodid,c.Fromdate=new Date(n.e.String(a.Tables[0][h].Fromdate)),c.Todate=new Date(n.e.String(a.Tables[0][h].Todate)),c.BillCycle="from "+new Date(a.Tables[0][h].Fromdate.toString()).ToString(i.a.SessionManager.Preferences["Date Format"])+"- to "+new Date(a.Tables[0][h].Todate.toString()).ToString(i.a.SessionManager.Preferences["Date Format"]),n.e.IsEmpty(a.Tables[0][h].Amount)||(c.Price=parseFloat(a.Tables[0][h].Amount.toString()).ToString("N"+i.a.SessionManager.Preferences.DecimalsinAmount));var D=new Date(a.Tables[0][h].Todate.toString()).Subtract(new Date(a.Tables[0][h].Fromdate.toString())).TotalDays+1;n.e.IsEmpty(a.Tables[0][h].ExlDays)||(D-=parseInt(a.Tables[0][h].ExlDays.toString())),c.TotDays=D,c.DtBill=new Date(a.Tables[0][h].Billdate.toString()),c.Billdate=new Date(a.Tables[0][h].Billdate.toString()).ToString(i.a.SessionManager.Preferences["Date Format"]),c.BillNo=a.Tables[0][h].BillNo,c.InvDocDetailsID=a.Tables[0][h].InvDocDetailsID,c.Sno=(h+1).toString(),c.Select=!1,this.Vouchers.TableColumns.Contains("Qty")&&a.Columns[0].Contains("Qty")&&(c.Qty=a.Tables[0][h].Qty),this.Vouchers.TableColumns.Contains("billseq")&&a.Columns[0].Contains("billseq")&&(c.billseq=a.Tables[0][h].billseq),o&&(c.InvDate="1"==c.billseq.toString()?new Date(n.e.String(a.Tables[0][h].Fromdate)):new Date(n.e.String(a.Tables[0][h].Todate)));var p=this.dtpref.filter((function(e){return"OffHireDoc"==e.Name}));p.length>0&&!n.e.IsEmpty(p[0].Value)&&parseInt(p[0].Value.toString())>0&&(c.Remarks=a.Columns[0].Contains("isoffhire")&&!n.e.IsEmpty(a.Tables[0][h].isoffhire)&&Object(r.j)(a.Tables[0][h].isoffhire.toString())?"Off Hire":"Hire cont."),this.Vouchers.addRow(c)}}}}},{key:"GetExportHTML",value:function(){var e="",t="";e+="<html><meta charset='utf-8' /><body style='color:blac;background-color:white;'>",t+=".hdr{text-align:cente; padding:5px; background-color:#4F81BD;color:white;font-family:Arial;font-size:11pt} ",t+=".grp{padding:2p; background-color:#87CEEB; color:#FFFCF7;font-family:arial; font-size:10pt;}",t+=".tot{background-color:whit; color:red;font-family:arial; font-weight:bold; font-size:8pt;}",e+="<style>"+(t+=".alt{background-color:whitesmok; color:black; font-family:arial; font-size:9pt; align:right;}").toString()+"</style>";for(var s=0,a=0;a<this.Vouchers.Columns.length;a++)s+=this.Vouchers.Columns[a].Width;e+="<table>",e+="\r\n<tr><td align='center'><h2>",e+=i.a.SessionManager.CompanyName,e+="</h2></td></tr>",e+="\r\n<tr><td align='center'><h3 style='vertical-align:middl;'>",e+=this.DisplayName,e+="</h3></td></tr>",e+="\r\n<tr><td align='center'>",e+=" From :  "+this.FromDate.Date.ToString(i.a.SessionManager.Preferences["Date Format"]),e+=" &nbs;&nbsp;&nbsp;To :  "+this.ToDate.Date.ToString(i.a.SessionManager.Preferences["Date Format"]),e+="</td></tr>",e+="<tr><td style='padding-top:10p;'><table border=1 width='"+s+"' style='border-collapse:collapse;  font-family:arial; font-size:9pt;' >",e+="<COLGROUP>";for(var n=0;n<this.Vouchers.Columns.length-2;n++)e+="FLOAT"==this.Vouchers.Columns[n].DataType?"<COL style='text-align:righ;'>":"<COL style=''>";e+="</COLGROUP>",e+="<tr style=''>";for(var r=0;r<this.Vouchers.Columns.length-2;r++)e+="<th class='hdr' width='"+this.Vouchers.Columns[r].Width,e+="px' >",e+=this.Vouchers.Columns[r].Header,e+="</th>";e+="</tr>";for(var o=this.Vouchers.Table,l=0;l<o.length;l++){e+="<tr",l%2==1&&(e+=" class=alt"),e+=">";for(var u=0;u<this.Vouchers.Columns.length-2;u++)e+="<td",e+="FLOAT"==this.Vouchers.Columns[u].DataType?" align='right'":" align='left'",e+=">",e+=o[l][this.Vouchers.Columns[u].DisplayMember].toString(),e+="</td>";e+="</tr>"}return e+="</table>",e+="</td></tr></table>",e+="</body><html>"}},{key:"SelectUnselectAll",value:function(e){for(var t=this.Vouchers.Table,s=0;s<t.length;s++)""==n.e.String(t[s].BillNo)&&(t[s].Select=e);this.Vouchers.refreshDataView()}},{key:"SaveCall",value:function(){var e=this;if(this.ProgressValue=1,null!=this.dtpref){var t=0,s=0,a=!1;this.Billdatefld="";var i=this.dtpref.filter((function(e){return"SIVDoc"==e.Name}));if(i.length>0&&(t=parseInt(i[0].Value.toString())),(i=this.dtpref.filter((function(e){return"HireContractDoc"==e.Name}))).length>0&&(s=parseInt(i[0].Value.toString())),(i=this.dtpref.filter((function(e){return"SIVBillingDate"==e.Name}))).length>0&&(this.Billdatefld=i[0].Value.toString()),(i=this.dtpref.filter((function(e){return"InvoiceOnDelDate"==e.Name}))).length>0&&(a=Object(r.j)(i[0].Value.toString())),0!=t){this.objViewModel=new C.AddEditDocumentViewModel(t,"",!0),this.objViewModel.GenratePrefix=!0;var o=this.objViewModel.ScreenObject.Link.LinkCombo.Items.find((function(e){return e.Parent==s.toString()}));if(null!=o&&null!=o)if(this.objViewModel.ScreenObject.Link.LinkCombo.SelectedValue=o.Value,this.objViewModel.ScreenObject.GridDataColumns.Contains(this.Billdatefld)){var l="",u=null;"1"==this.BasedOn.SelectedValue?a?u=(u=this.Vouchers.Table.filter((function(e){return 1==e.Select}))).sort((function(e,t){return e.CustomerID>t.CustomerID||e.CustomerID==t.CustomerID&&e.InvDate>t.InvDate?1:-1})):u=(u=this.Vouchers.Table.filter((function(e){return 1==e.Select}))).sort((function(e,t){return t.CustomerID-e.CustomerID})):a?u=(u=this.Vouchers.Table.filter((function(e){return 1==e.Select}))).sort((function(e,t){return e.HCNo>t.HCNo||e.HCNo==t.HCNo&&e.InvDate>t.InvDate?1:-1})):u=(u=this.Vouchers.Table.filter((function(e){return 1==e.Select}))).sort((function(e,t){return t.HCNo-e.HCNo})),this.obja=[];for(var h=null,c=0;c<u.length;c++)l.Contains(n.e.String(u[c].HCNo))||(""!=l&&(l+="','"),l+=u[c].HCNo.toString()),(0==c||a&&new Date(u[c].InvDate.toString()).Date()!=new Date(u[c-1].InvDate.toString()).Date()||"1"==this.BasedOn.SelectedValue&&n.e.String(u[c].CustomerID)!=n.e.String(u[c-1].CustomerID)||"1"!=this.BasedOn.SelectedValue&&n.e.String(u[c].HCNo)!=n.e.String(u[c-1].HCNo))&&(c>0&&this.obja.push(h),h=[]),h.push(u[c]);null!=h&&this.obja.push(h),this.ProgressMax=this.obja.length,this.InProgress=this.ProgressValue+" of "+this.ProgressMax,this.ProgressWidth=100*(this.ProgressValue-1)/this.ProgressMax,0==this.ProgressWidth&&(this.ProgressWidth=1),this.objViewModel.ScreenObject.GetLinkDocDetails(l,parseInt(o.Value),"",!0).subscribe((function(t){e.dsLink=t,e.objViewModel.IsSelectAll=!0,e.iLoop=0,e.objViewModel.SaveCallBackMethod.Subscribe(e,"SaveCallBack_Complete"),e.SaveCallBack()}))}else this.DisplayMessage="Sales invoice Billing Date should be in body";else this.DisplayMessage="Please place linking between Hire Contract and Sales invoice Docuemnt"}}}},{key:"SaveCallBack",value:function(){var e=this,t=!1,s=this.dtpref.filter((function(e){return"InvoiceOnDelDate"==e.Name}));if(s.length>0&&(t=Object(r.j)(s[0].Value.toString())),this.iLoop>=this.obja.length)return this.Vouchers.refreshDataView(),void(this.ShowProcessDialog=!1);this.InProgress=this.ProgressValue+" of "+this.ProgressMax,this.ids=this.obja[this.iLoop],this.objViewModel.DocumentDate=this.InvoiceDate.Date,this.objViewModel.DocumentDate=t&&this.ids.length>0?new Date(this.ids[0].InvDate).Date():this.InvoiceDate.Date;for(var a=0;a<this.ids.length;a++){var o=[];o.push(this.ids[a]),0==a&&null!=this.objViewModel.ScreenObject.DebitAccount&&(this.objViewModel.ScreenObject.DebitAccount.SelectedValue=parseInt(n.e.String(this.ids[a].CustomerID)),this.objViewModel.ScreenObject.Data.Tables[0].filter((function(t){return null!=t.LocalReference&&t.LocalReference=="'"+e.objViewModel.ScreenObject.DebitAccount.DBColumnID+"'"})).length>0&&this.objViewModel.ScreenObject.GetLinkReferenceData(this.objViewModel.ScreenObject.DebitAccount.DBColumnID,this.objViewModel.CostCenterID,this.objViewModel.ScreenObject.DebitAccount.SelectedValue,this.objViewModel.DocumentDate,this.objViewModel.ScreenObject.DebitAccount.DBColumnName,2,null));var l=this.objViewModel.GetEmptyRowPosition(this.objViewModel.ScreenObject.GridDataObj,"ProductID_Key");this.objViewModel.LoadLinkData(this.dsLink,o,0,[],null),this.objViewModel.ScreenObject.GridData[l][this.Billdatefld]=new Date(this.ids[a].DtBill.toString()).ToString(i.a.SessionManager.Preferences["Date Format"]),this.objViewModel.ScreenObject.GridDataColumns.Contains(this.Billdatefld+"_Key")&&(this.objViewModel.ScreenObject.GridData[l][this.Billdatefld+"_Key"]=new Date(this.ids[a].DtBill.toString())),this.objViewModel.ScreenObject.GridDataColumns.Contains("dcnum10")&&(this.objViewModel.ScreenObject.GridData[l].dcnum10=this.ids[a].TotDays.toString()),!n.e.IsEmpty(this.ids[a].Fromdate)&&this.objViewModel.ScreenObject.GridDataColumns.Contains("dcalpha6_Key")&&(this.objViewModel.ScreenObject.GridData[l].dcalpha6_Key=new Date(this.ids[a].Fromdate.toString()),this.objViewModel.ScreenObject.GridData[l].dcalpha6=new Date(this.ids[a].Fromdate.toString()).ToString(i.a.SessionManager.Preferences["Date Format"])),!n.e.IsEmpty(this.ids[a].Todate)&&this.objViewModel.ScreenObject.GridDataColumns.Contains("dcalpha7_Key")&&(this.objViewModel.ScreenObject.GridData[l].dcalpha7_Key=new Date(this.ids[a].Todate.toString()),this.objViewModel.ScreenObject.GridData[l].dcalpha7=new Date(this.ids[a].Todate.toString()).ToString(i.a.SessionManager.Preferences["Date Format"])),this.objViewModel.ScreenObject.GridData[l].ProductID_Key.toString()!=this.ids[a].ProductID.toString()&&(this.objViewModel.ScreenObject.GridData[l].ProductID_Key=this.ids[a].ProductID.toString()),this.objViewModel.ScreenObject.GridData[l].Rate=this.ids[a].Price.toString(),this.Vouchers.TableColumns.Contains("Qty")&&!n.e.IsEmpty(this.ids[a].Qty)&&(this.objViewModel.ScreenObject.GridData[l].Quantity=this.ids[a].Qty.toString()),this.objViewModel.ScreenObject.GridDataColumns.Contains("LineNarration")&&(this.objViewModel.ScreenObject.GridData[l].LineNarration=this.ids[a].BillCycle.toString()+"("+this.ids[a].Remarks.toString()+")"),this.objViewModel.CalculateTotals(this.objViewModel.ScreenObject.GridData[l],!1)}this.objViewModel.SaveInventoryDocument("Save",!1)}},{key:"SaveCallBack_Complete",value:function(){var e=this;setTimeout((function(){if(e.objViewModel.RetValue<=0)e.objViewModel.clear(1);else for(var t=0;t<e.ids.length;t++)e.ids[t].BillNo=e.objViewModel.DisplayMessage,e.ids[t].Select=!1;e.ProgressValue++,e.iLoop++,e.SaveCallBack()}),30)}},{key:"GetBills",value:function(e,t,s,a,n,r,o){Logger.InfoLog("Document:: Inside GetBills");try{var l=[];return l.push(e.ToString("dd/MMM/yyyy")),l.push(t.ToString("dd/MMM/yyyy")),l.push(s),l.push(a),l.push(n),l.push(r.ToString("dd/MMM/yyyy")),l.push(o),l.push(i.a.SessionManager.UserName),l.push(i.a.SessionManager.UserID),l.push(i.a.SessionManager.LanguageID),i.a.document.GetBills(l)}catch(u){return Logger.ErrorLog("Document:: GetBills"+u.stack),null}}},{key:"SelectAll",get:function(){return this._SelectAll},set:function(e){e!=this._SelectAll&&(this._SelectAll=e,this.SelectUnselectAll(e))}}]),o}(o.b)}}]);