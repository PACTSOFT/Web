(window.webpackJsonp=window.webpackJsonp||[]).push([[40,128],{"8BPh":function(t,e,s){"use strict";s.d(e,"a",(function(){return m}));var i=s("Do2H"),n=s("Lp6j"),a=s("eQJW"),o=s("ScVY"),h=s("0/4Q"),r=s("EQd/"),l=s("VxiT"),c=s("4HhE"),d=s("JIg3"),u=s("n56n"),C=s("jgdN"),b=s("N0rE");class m extends o.b{constructor(){super(),this.ContactID=0,this.CostCenterID=0,this.ContactType=new h.e(0),this.ContactVisibility=!1,this._isPopup=!1,this.Visiblebtns=!1,this.SaveEnable=!1,this.DetailVisibility=!1,this.Countryvisible=!1,this._IsPrimaryContact=!1,this.IsModified=!1,this.Width="250",this.ScreenObject=new l.a,this.obj={},this.FeatureNodeID=0}get isPopup(){return this._isPopup}set isPopup(t){t!=this._isPopup&&(this._isPopup=t,this.AssignRowColumns())}get IsPrimaryContact(){return this._IsPrimaryContact}set IsPrimaryContact(t){t!=this._IsPrimaryContact&&(this._IsPrimaryContact=t,this.LoadContactType())}QuickAddDContactViewModel_1(t){this.FeatureParent=t,this.Visiblebtns=!0,this.onLoad(0,!1),this.ClearFields()}QuickAddDContactViewModel_2(t,e,s){this.onLoad(t,e),this.Visiblebtns=!0,this.DetailVisibility=!0}onLoad(t,e){this.ScreenObject=new l.a,this.ContactID=t,this.CostCenterID=65,this.obj.DetailContactID=this.ContactID,this.SaveEnable=!0,this.MessageVisibility=!1,this.DisplayMessage="",this.LoadData(),0==this.ContactID?this.Title=i.a.GetResource("AddDetailContact"):(this.Title=i.a.GetResource("EditDetailContact"),this.OnLoadData()),this.obj.IsGroup=1==e,this.DisplayName=this.Title,this.AssignRowColumns()}LoadContactType(){if(this.IsPrimaryContact){this.ContactType.SelectedValue="1";for(let t=0;t<this.ContactType.Items.length;t++)"1"!=this.ContactType.Items[t].Value&&this.ContactType.Items.RemoveAt(t)}}AssignRowColumns(){if(this.isPopup){this.Width="900";let t=0;for(let e=0;e<this.ScreenObject.StaticFields.length;e++)t=this.ScreenObject.StaticFields[e].Row,this.ScreenObject.StaticFields[e].Column=t%4,this.ScreenObject.StaticFields[e].Row=t/4,this.ScreenObject.StaticFields[e].ColumnSpan=1}else{this.Width="250";for(let t=0;t<this.ScreenObject.StaticFields.length;t++)this.ScreenObject.StaticFields[t].Column=0,this.ScreenObject.StaticFields[t].ColumnSpan=4}}LoadContacts(t){this.ClearFields(),null!=t&&t.length>0&&(this.ScreenObject.FillControls(null!=t?t[0]:null,null!=t&&t.length>0?t[0]:null,null!=t&&t.length>0?t[0]:null,null),this.ContactType.SelectedValue=t[0].AddressTypeID.toString(),this.ContactID=parseInt(t[0].ContactID.toString()))}GetXML(){var t=this.ScreenObject.StaticFields.find(t=>"firstname"==t.DBColumnName.toLowerCase());if(t instanceof r.d&&n.e.IsEmpty(t.Text))return"";let e="";return e+="<Data> <Row ",e+=' StaticFields ="'+r.d.GetValidXml(this.ScreenObject.GetStaticFieldsQuery().Trim(","))+'" ',e+=' ExtraTextFields ="'+r.d.GetValidXml(this.ScreenObject.GetQuickExtraFieldsQuery().Trim(","))+'" ',e+=' CCFields ="'+r.d.GetValidXml(this.ScreenObject.GetQuickExtraCCFieldsQuery().Trim(","))+'" ',e+="  /></Data>",e}OnLoadData(){let t=this.obj.GetContactDetails();this.ScreenObject.FillControls(t.Tables[0][0],t.Tables[1][0],t.Tables[2].length>0?t.Tables[2][0]:null,null)}LoadData(){this.ContactType=new h.e,this.ScreenObject.LoadQuickScreen(this,65),this.ScreenObject.Data.Tables.length>7&&null!=this.ScreenObject.Data&&this.ScreenObject.Data.Columns[7].Contains("ContactType")&&this.ScreenObject.Data.Tables[7].forEach(t=>{this.ContactType.Items.push(h.d.ComboBoxItems_2(t.ContactType.toString(),t.ContactTypeID.toString()))}),this.ScreenObject.Data.Tables.length>0&&null!=this.ScreenObject.Data&&(this.oCombo=this.ScreenObject.GetQuickCombo(24328),null!=this.oCombo&&(this.ScreenObject.Data.Tables[3].forEach(t=>{this.oCombo.Items.push(h.d.ComboBoxItems_2(t.Status.toString(),t.StatusID.toString()))}),this.oCombo.SelectedValue="403"),this.oCombo=this.ScreenObject.GetQuickCombo(24325),null!=this.oCombo&&this.ScreenObject.Data.Tables[4].forEach(t=>{"20"==t.LookupType.toString()&&this.oCombo.Items.push(h.d.ComboBoxItems_2(t.Name.toString(),t.NodeID.toString()))}),this.oCombo=this.ScreenObject.GetQuickCombo(24334),null!=this.oCombo&&this.ScreenObject.Data.Tables[4].forEach(t=>{"21"==t.LookupType.toString()&&this.oCombo.Items.push(h.d.ComboBoxItems_2(t.Name.toString(),t.NodeID.toString()))}),this.oCombo=this.ScreenObject.GetQuickCombo(24342),null!=this.oCombo&&(this.oCombo.Items.push(h.d.ComboBoxItems_2(i.a.GetResource("CRMLead_Male"),"1")),this.oCombo.Items.push(h.d.ComboBoxItems_2(i.a.GetResource("CRMLead_Female"),"2")),this.oCombo.SelectedValue="1")),this.FName=this.ScreenObject.GetQuickText(24322),this.MName=this.ScreenObject.GetQuickText(24323),this.LName=this.ScreenObject.GetQuickText(24324);let t=this.ScreenObject.Data.Tables[5].filter(t=>"CapsLock"==t.Name);t.length>0&&Object(a.j)(t[0].Value)&&(null!=this.FName&&(this.FName.IsAllCaps=!0),null!=this.MName&&(this.MName.IsAllCaps=!0),null!=this.LName&&(this.LName.IsAllCaps=!0)),t=this.ScreenObject.Data.Tables[5].filter(t=>"CapsToFirstLetter"==t.Name),t.length>0&&Object(a.j)(t[0].Value)&&(null!=this.FName&&(this.FName.IsAllCaps=!0),null!=this.MName&&(this.MName.IsAllCaps=!0),null!=this.LName&&(this.LName.IsAllCaps=!0))}ClearFields(){this.ScreenObject.Clear()}OnSave(t){if("Save"==t.toString()){if(this.DisplayMessage=this.ScreenObject.ValidateData(),this.DisplayMessage.length>0)return;if(this.ContactID>0&&(this.IsModified=!0),null!=this.FeatureParent){if(this.ContactID>0&&(this.IsModified=!0),this.CheckPrimaryDuplicateContact())return this.DisplayMessage="Duplicate Contact[s] in Contacts DB",void(this.MessageVisibility=!0);let t=null;null==this.FeatureParent.ViewContacts.SelectedRow?t=this.FeatureParent.ViewContacts.grData.NewRow():null!=this.FeatureParent.ViewContacts.SelectedRow&&(t=this.FeatureParent.ViewContacts.SelectedRow.Row);for(let e=0;e<this.ScreenObject.StaticFields.length;e++){let s=this.ScreenObject.StaticFields[e];if(s instanceof c.c&&null!=s.DBColumnName)if(this.FeatureParent.ViewContacts.grData.Columns.Contains(s.DBColumnName)||(this.FeatureParent.ViewContacts.grData.Columns.push(s.DBColumnName),(s.DBColumnName.toUpperCase().startsWith("CCNID")||s instanceof u.b)&&this.FeatureParent.ViewContacts.grData.Columns.push(s.DBColumnName+"_Key")),s instanceof r.d&&(t[s.DBColumnName]=""!=s.Text?s.Text:""),s instanceof r.b)t[s.DBColumnName]=""!=s.Password?s.Password:"";else if(s instanceof r.a)t[s.DBColumnName]=""!=s.Text?s.Text:"";else if(s instanceof r.c)t[s.DBColumnName]=""!=s.Text?s.Text:"";else if(s instanceof h.e)if(this.FeatureParent.ViewContacts.grData._Columns.Contains(s.DBColumnName)){if(t[s.DBColumnName+"_Key"]=""!=s.SelectedValue?s.SelectedValue:"",""!=s.SelectedValue||null!=s.SelectedValue)for(let e=0;e<s.Items.length;e++)if(s.Items[e].Value==s.SelectedValue){t[s.DBColumnName]=s.Items[e].Name;break}}else t[s.DBColumnName]=""!=s.SelectedValue?s.SelectedValue:"";else s instanceof d.c?t[s.DBColumnName]=""!=s.Text.toString()&&""!=s.Date.toString()?new Date(s.Date).ToString("dd/MMM/yyyy"):"":s instanceof d.b?t[s.DBColumnName]=""!=s.Date.toString()?s.Date.toString():"":s instanceof d.a?t[s.DBColumnName]=""!=s.Text.toString()&&""!=s.Date.toString()?s.Date.ToString("dd/MMM/yyyy"):"":s instanceof C.a?t[s.DBColumnName]=""!=s.Text?s.Text:"":s instanceof u.b&&(t[s.DBColumnName+"_Key"]=0!=s.SelectedValue?s.SelectedValue:1,t[s.DBColumnName]=s.Text)}t.AddressTypeID=this.ContactType.SelectedValue,null==this.FeatureParent.ViewContacts.SelectedRow?this.FeatureParent.ViewContacts.grData.addRow(t):this.FeatureParent.ViewContacts.grData.updateRow(t),this.FeatureParent.ViewContacts.SelectedRow=null,this.ClearFields(),i.a.page.HideDialog()}}else if("Details"==t.toString()){let t=0;null!=this.FeatureParent&&("AddEditAccountScreenViewModel"==this.FeatureParent.ClassName?(t=2,this.FeatureNodeID=this.FeatureParent.AccountID):"PACT.VIEWMODEL.AddCustomerViewModel"==this.FeatureParent.ClassName?(t=83,this.FeatureNodeID=this.FeatureParent.CustomerID):"PACT.VIEWMODEL.AddCostCenterViewModel"==this.FeatureParent.ClassName?(t=this.FeatureParent.CostCenterID,this.FeatureNodeID=this.FeatureParent.NodeID):"AddEditMachineViewModel"==this.FeatureParent.ClassName?(t=71,this.FeatureNodeID=this.FeatureParent.ResID):"AddEditBatchViewModel"==this.FeatureParent.ClassName?(t=16,this.FeatureNodeID=this.FeatureParent.BatchID):"AddEditCustomerViewModel"==this.FeatureParent.ClassName?(t=51,this.FeatureNodeID=this.FeatureParent.CustomerID):"AddEditLeads"==this.FeatureParent.ClassName?(t=86,this.FeatureNodeID=this.FeatureParent.LeadID):"AddEditEmpMasterViewModel"==this.FeatureParent.ClassName&&(t=50051,this.FeatureNodeID=this.FeatureParent.NodeID));let s=new b.AddDContactViewModel(this.ContactID,!1,0);null!=this.FeatureParent&&"AddCustomerViewModel"==this.FeatureParent.ClassName&&(s.Customer.SelectedValue=this.FeatureParent.CustomerID);for(let i=0;i<this.ScreenObject.StaticFields.length;i++){let t=this.ScreenObject.StaticFields[i];if(t instanceof c.c&&null!=t.DBColumnName){var e=s.ScreenObject.StaticFields.find(e=>e.DBColumnID==t.DBColumnID);if(!e)for(let i=0;i<s.ScreenObject.CustomTab.Pages.length&&!(e=s.ScreenObject.CustomTab.Pages[i].Fields.find(e=>e.DBColumnID==t.DBColumnID));i++);null!=e&&(e instanceof r.d&&t instanceof r.d?e.Text=""!=t.Text?t.Text:"":e instanceof r.b&&t instanceof r.b?e.Password=""!=t.Password?t.Password:"":e instanceof r.a&&t instanceof r.a||e instanceof r.c&&t instanceof r.c?e.Text=t.Text:e instanceof h.e&&t instanceof h.e?e.SelectedValue=t.SelectedValue:e instanceof d.a&&t instanceof d.a?e.Date=t.Date:e instanceof C.a&&t instanceof C.a?e.Text=t.Text:e instanceof u.b&&t instanceof u.b&&(e.SelectedValue=t.SelectedValue))}}this.FeatureNodeID>0&&(s.FeatureParent=this.FeatureParent),s.CCID=t,s.CCNodeID=this.FeatureNodeID}else"Cancel"==t.toString()&&(null!=this.FeatureParent&&(this.FeatureParent.ContactVisibility=!1),i.a.page.HideDialog())}CheckPrimaryDuplicateContact(){return!1}}},CXnT:function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));var i=s("3Pt+"),n=s("fXoL");let a=(()=>{class t{constructor(){this.group=new i.j({})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Nb({type:t,selectors:[["app-approve-feature"]],decls:30,vars:7,consts:[[1,"master-screen"],[1,"PACTHeaderFields","dialogSubBody"],[1,"form-group","row","PACTControl"],["FieldDirective","",3,"obj","group"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"fa-light","fa-circle-check"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"]],template:function(t,e){1&t&&(n.Zb(0,"div",0),n.Wc(1,"\n    "),n.Zb(2,"div",1),n.Wc(3,"\n        "),n.Zb(4,"div",2),n.Wc(5,"\n            "),n.Vb(6,3),n.Wc(7,"\n        "),n.Yb(),n.Wc(8,"\n        "),n.Zb(9,"div",2),n.Wc(10,"\n            "),n.Vb(11,3),n.Wc(12,"\n        "),n.Yb(),n.Wc(13,"\n  "),n.Yb(),n.Wc(14,"\n  "),n.Zb(15,"div",4),n.Wc(16,"\n    "),n.Zb(17,"div"),n.Wc(18,"\n        "),n.Zb(19,"button",5),n.hc("click",(function(){return e.obj.OnSave("Save")})),n.Ub(20,"i",6),n.Wc(21,"Ok"),n.Yb(),n.Wc(22,"\n        "),n.Zb(23,"button",7),n.hc("click",(function(){return e.obj.OnSave("Cancel")})),n.Ub(24,"i",8),n.Wc(25),n.mc(26,"translate"),n.Yb(),n.Wc(27,"\n    "),n.Yb(),n.Wc(28,"      \n  "),n.Yb(),n.Wc(29,"\n"),n.Yb()),2&t&&(n.Db(6),n.tc("obj",e.obj.Status)("group",e.group),n.Db(5),n.tc("obj",e.obj.Date)("group",e.group),n.Db(14),n.Xc(n.nc(26,5,"Cancel")))},encapsulation:2}),t})()},"EPb/":function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var i=s("Do2H"),n=s("eQJW"),a=s("ScVY"),o=s("4HhE"),h=s("r2z3"),r=s("0/4Q"),l=s("JIg3");class c extends a.b{constructor(t,e,s){let a;super(),this.Save=new o.b,this.objLeads=new h.a,this.ds=null,this.Status=new r.e(0),this.Date=new l.a(0),this.ccid=0,this.nodeid=0,this.CustomerChecked=new o.b,this.Status.Items.push(r.d.ComboBoxItems_2("Approved","1")),this.Status.Items.push(r.d.ComboBoxItems_2("Un-Approved","0")),this.Title=this.DisplayName=i.a.GetResource("Approve"),this.Status.Label=i.a.GetResource("AccountCreate_Status"),this.Date.Label=i.a.GetResource("Service_ApprovedDate"),this.Save.Subscribe(this,"OnSave"),this.ccid=e,this.nodeid=s,86==e?(this.parent=t,a=this.objLeads.GetLead(this.parent.LeadID),this.Status.SelectedValue=null!=a&&a.Tables.length>1&&a.Tables[0].length>0&&a.Columns[0].Contains("IsApproved")&&""!=a.Tables[0][0].IsApproved.toString()&&Object(n.j)(a.Tables[0][0].IsApproved)?"1":"0"):88==e&&(this.Cparent=t,this.objCampaigns.CampaignId=s,a=this.objCampaigns.GetCompaignDetails(),this.Status.SelectedValue=null!=a&&a.Tables.length>2&&a.Tables[1].length>0&&a.Columns[1].Contains("IsApproved")&&""!=a.Tables[1][0].IsApproved.toString()&&Object(n.j)(a.Tables[1][0].IsApproved)?"1":"0")}OnSave(t){if("Cancel"==t)i.a.page.HideDialog();else{{let t;Logger.InfoLog("Convertion :: Entering OnConvertionLead");let e=[];e.push(this.ccid),e.push(this.nodeid),e.push(this.Status.SelectedValue),e.push(this.Date.Date.ToString("dd/MMM/yyyy"));let s=this.objLeads.ApproveFeature(e,86);this.DisplayMessage=s.Message,t=s.RetValue,t>0?null!=this.parent?this.parent.LeadStatus=this.Status.Text:null!=this.Cparent&&(this.Cparent.CampaignStatus=this.Status.Text):this.parent.LeadStatus=this.Status.Text}this.MessageVisibility=!0,Logger.InfoLog("Convertion :: Exiting OnConvertionLead")}}}},"EuF+":function(t,e,s){"use strict";s.d(e,"a",(function(){return E}));var i=s("Do2H"),n=s("Lp6j"),a=s("eQJW"),o=s("ScVY"),h=s("f8PW"),r=s("VxiT"),l=s("EQd/"),c=s("0/4Q"),d=s("n56n"),u=s("NkMH"),C=s("DKUf"),b=s("CQvG"),m=s("RJs6"),D=s("OvA8"),p=s("vVAv"),I=s("iqoD"),g=s("INyF"),S=s("c6C+"),V=s("xnJf"),w=s("EggS"),A=s("8B8H"),f=s("ockk"),T=s("Hzm0"),j=s("il++");class y extends o.b{constructor(t){super(),this.CasesGridObj=new A.a,this.ColumnSpan="4",this.CCID=0,this.ParentID=0,this.AddGridColumns()}get CasesGrid(){return this.CasesGridObj.Table}get SelectedRow(){return this.CasesGridObj.SelectedItem}AddGridColumns(){let t,e=new Array;t=new f.a,t.Header="Case",t.DisplayMember="CaseName",t.ValueMember="Case_Key",t.DataType="LINK",t.Width=250,t.Click.Subscribe(this,"onClick"),t.ReadOnly=!0,t.IsVisible=!0,e.push(t),t=new f.a,t.Header="Customer",t.DisplayMember="CustomerName",t.ValueMember="Customer_Key",t.DataType="TextBox",t.Width=250,t.ReadOnly=!0,t.IsVisible=!0,e.push(t),t=new f.a,t.Header="Product",t.DisplayMember="ProductName",t.ValueMember="Product_Key",t.DataType="TextBox",t.Width=250,t.ReadOnly=!0,e.push(t),t=new f.a,t.Header="CreatedDate",t.DisplayMember="CreatedDate",t.DataType="TextBox",t.Width=150,t.ReadOnly=!0,t.IsVisible=!0,e.push(t),this.CasesGridObj.Columns=e,this.CasesGridObj.ColumnSpan=4,this.CasesGridObj.Table=[],this.CasesGridObj.TableColumns.push("CaseName"),this.CasesGridObj.TableColumns.push("Case_Key"),this.CasesGridObj.TableColumns.push("CustomerName"),this.CasesGridObj.TableColumns.push("Customer_Key"),this.CasesGridObj.TableColumns.push("ProductName"),this.CasesGridObj.TableColumns.push("Product_Key"),this.CasesGridObj.TableColumns.push("CreatedDate"),this.CasesGridObj.TableColumns.push("ParentID"),this.CasesGridObj.addEmptyRow()}LoadCaseGrid(t){null==t&&0==t.length||(this.CasesGridObj.Clear(),t.forEach(t=>{let e=this.CasesGridObj.NewRow();e.CaseName=t.CaseNumber,e.Case_Key=t.CaseID,e.CustomerName=t.CustomerName,e.Customer_Key=t.CustomerID,e.ProductName=t.ProductName,e.Product_Key=t.ProductID,""!=t.CreatedDate&&(e.CreatedDate=new Date(t.CreatedDate).ToString(i.a.SessionManager.Preferences["Date Format"].toString())),e.ParentID=t.ParentID,this.CasesGridObj.addRow(e)}))}onClick(){if(this.SelectedRow){this.CCID=parseInt(this.SelectedRow.Case_Key),this.ParentID=parseInt(this.SelectedRow.ParentID),this.Cases=new T.AddEditCasesViewModel(this.CCID,this.ParentID,!1);let t={};Object.assign(t,{component:j.AddEditCaseComponent,params:{obj:this.Cases}}),t.title=this.Cases.ScreenName,i.a.page.addNewTab(t),i.a.page.setActiveTab(i.a.page.indexOf(this.Cases))}}}var N=s("8BPh"),L=s("2mtM"),O=s("V7Sd"),x=s("LCKI"),P=s("W4+j"),v=s("wJuo"),M=s("x68t"),R=s("THE7");class E extends o.b{constructor(t,e,s,n){super(),this.ParentFeatureID=0,this.PNodeID=0,this.AssignVisiblity=!1,this.CostCenterID=0,this.FileID=0,this.IsPhotoDelete=!1,this.FileExtension="",this.FileDescription="",this.IsPhotoChanged=!1,this.lstDeletedRecords=new Array,this.PhotoTextVisibility=!1,this.ContactVisibility=!1,this.ContactExpanded=!1,this.AttachmentExpanded=!1,this.NoteExpanded=!1,this.NoteVisibility=!1,this.AttachmentVisibility=!1,this.VehicleVisibility=!1,this.AddressVisibility=!1,this.obj=new w.a,this.ScreenObject=new r.a,this.ParentId=0,this.SelectedItem=0,this.UserName=new l.d(0),this.OnlineCustrType=new c.e(0),this.Password=new l.d(0),this.CustomerName=new l.d(24201),this.CustomerCode=new l.a(24200),this.AliasName=new l.d(24202),this.CustomerType=new c.e(24207),this.Status=new c.e(24204),this.Group=new d.b(24203),this.Currency=new c.e(19817),this.Account=new d.b(26014),this.CustomerID=0,this.CreditLimit=new l.d(24206),this.CreditDays=new l.d(24205),this.TabWidth=0,this.ButtonSave=new u.a,this.ButtonConvert=new u.a,this.PrimaryVisibility=!1,this.TempID=0,this.RetVal=0,this.ActVisibility=!1,this.NodeID=0,this.ds=null,this.CCMapVisibility=!1,this.p=0,this.p_2=0,this.p_3=0,this.CostCenterID=83,this.NodeID=e,this.ViewActivities=new b.b(this),this.Activities=new C.a(this,!1),this.ViewActivities.Activities=this.Activities,this.Cases=new y(this),this.obj.CustomerID=t,this.ViewContacts=new R.a(this),this.ViewAssignHistroy=new L.a(this),this.ViewNotes=new m.a(this),this.ViewAttachments=new D.ViewAttachmentViewModel(this),this.ViewAddress=new g.a(this),this.ViewCCMapping=new p.a(this),this.ViewCCMapping.ViewCCMappingViewModel_1(this,83,t),this.VehicleList=[],this.setvisibility(),this.PactScreenID="83",this.IsPhotoChanged=!1,this.PhotoTextVisibility=!0,this.CustomerPhoto="",this.OnLoad(),this.obj.SelectedNodeID=0==e?1:e,this.obj.IsGroup=!1,this.Title=i.a.GetResource(this.obj.CustomerID>0?"Customer_EditCustomer":"Customer_AddCustomer"),this.DisplayName=this.Title,this.ContactVisibility=!1,this.VehicleVisibility=!1;let a=[27300,26696,26695,26646,26647,27299,27292];this.ScreenObject.SetForceVisibily(a,!1,0),a=[566819,566981,566820,26696,563311],this.ScreenObject.SetForceVisibily(a,!1,1),this.ScreenObject.HeaderFields.sort((t,e)=>t.Row>e.Row||t.Row==e.Row&&t.Column>e.Column?1:-1)}onSave(){this.CCMap=new h.AddCCMapViewModel(this)}AddCustomerViewModel(){}AssignRowColumns(){for(let t=0;t<this.ScreenObject.CustomFields.length;t++)this.ScreenObject.CustomFields[t].Row=t/4,this.ScreenObject.CustomFields[t].Column=t%4}OnLoad(){0==this.obj.CustomerID?i.a.SessionManager.HideUnathorizedAccess?this.ButtonSave.Visible=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Create"):this.ButtonSave.Enable=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Create"):i.a.SessionManager.HideUnathorizedAccess?this.ButtonSave.Visible=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Update"):this.ButtonSave.Enable=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Update"),0!=this.obj.CustomerID&&(i.a.SessionManager.HideUnathorizedAccess?this.ButtonConvert.Visible=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Convert_Account"):this.ButtonConvert.Enable=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Convert_Account")),this.ScreenObject.LoadScreen_2(this,83);let t=null;if(t=this.ScreenObject.Data.Tables[0].filter(t=>"UserName"==t.SysColumnName),t.length>0&&parseInt(t[0].CostCenterColID)>0&&(this.UserName.DBColumnID=parseInt(t[0].CostCenterColID)),t=this.ScreenObject.Data.Tables[0].filter(t=>"Password"==t.SysColumnName),t.length>0&&parseInt(t[0].CostCenterColID)>0&&(this.Password.DBColumnID=parseInt(t[0].CostCenterColID)),t=this.ScreenObject.Data.Tables[0].filter(t=>"OnlineCustType"==t.SysColumnName),t.length>0&&parseInt(t[0].CostCenterColID)>0){this.OnlineCustrType.DBColumnID=parseInt(t[0].CostCenterColID);let e=t[0].UserProbableValues.toString().Trim();if(e.length>0){let t=e.split(";");for(let e=0;e<t.length;e++)this.OnlineCustrType.Items.push(c.d.ComboBoxItems_2(t[e].Replace("''","'"),t[e].Replace("''","'")));this.OnlineCustrType.SelectedValue=this.OnlineCustrType.Items[0].Value}}this.ScreenObject.SetProperties_Static(this.UserName),this.ScreenObject.SetProperties_Static(this.Password),this.ScreenObject.SetProperties_Static(this.OnlineCustrType),this.ScreenObject.CustomTab.Pages.forEach(e=>{"Contacts"==e.Name&&(this.PriContact=new N.a,this.PriContact.QuickAddDContactViewModel_1(this),this.PriContact.IsPrimaryContact=!0,this.PriContact.Visiblebtns=!1,t=this.ScreenObject.Data.Tables[5].filter(t=>"HidePrimaryContact"==t.Name),t.length>0&&!Object(a.j)(t[0].Value)&&(this.PrimaryVisibility=!0),this.PriContact.Countryvisible=!0)}),this.AssignRowColumns(),this.ScreenObject.CustomTab.Pages.forEach(t=>{switch(t.Name){case"Notes":t.Fields.push(this.ViewNotes);break;case"Contacts":t.Fields.push(this.ViewContacts);break;case"Address":t.Fields.push(this.ViewAddress);break;case"Attachments":t.Fields.push(this.ViewAttachments);break;case"History":t.Fields.push(this.ViewAssignHistroy.ListObj);break;case"Activities":t.Fields.push(this.ViewActivities);break;case"Assign":t.Fields.push(this.ViewCCMapping);break;case"Cases":t.Fields.push(this.Cases.CasesGridObj)}}),this.ScreenObject.InitAutoCode(this.ScreenObject.Data.Tables[6],this.obj.IsGroup),t=this.ScreenObject.Data.Tables[5].filter(t=>"CapsLock"==t.Name),t.length>0&&Object(a.j)(t[0].Value)&&(this.CustomerName.IsAllCaps=!0),t=this.ScreenObject.Data.Tables[5].filter(t=>"CapsToFirstLetter"==t.Name),t.length>0&&Object(a.j)(t[0].Value)&&(this.CustomerName.IsFirstLetterCaps=!0),0==this.obj.CustomerID&&this.AutoGenerateCode();let e=i.a.admin.GetLookupDataByType(0).Tables[1].filter(t=>45==t.LookupType);e.length>0&&c.e.FillComboWithDefaultOption(e,this.CustomerType),this.ScreenObject.Data.Tables[3].forEach(t=>{this.Status.Items.push(c.d.ComboBoxItems_2(t.Status.toString(),t.StatusID.toString()))}),this.Status.SelectedValue="393",this.AddressTypes=new Array,this.AddressTypes.push(c.d.ComboBoxItems_2(i.a.GetResource("Address_Permanent"),"1")),this.AddressTypes.push(c.d.ComboBoxItems_2(i.a.GetResource("Address_Temporary"),"2")),this.SelectedAddressType="1",this.obj.CustomerID>0?(this.LoadEditData(),this.Account.CCID=2,this.Account.TypeID=4,this.Group.CCID=83,this.Group.TypeID=2,this.Group.Enable=!1):(this.obj.GUID="",this.Account.CCID=2,this.Account.TypeID=4,this.Group.CCID=83,this.Group.TypeID=2,this.Group.SelectedValue=1),t=this.ScreenObject.Data.Tables[5].filter(t=>"AccountLinkDimension"==t.Name),t.length>0&&!n.e.IsEmpty(t[0].Value)&&(this.Account.TypeID=parseInt(t[0].Value))}LoadEditData(){this.ds=this.obj.GetCustomerDetails(),this.CustomerID=this.obj.CustomerID,this.CustomerCode.Enable&&(this.CustomerCode.Text=this.obj.CustomerCode),this.ScreenObject.IsAutoCode&&(this.CustomerCode.Enable=!1),this.CustomerName.Enable&&(this.CustomerName.Text=this.obj.CustomerName),this.AliasName.Enable&&(this.AliasName.Text=this.obj.AliasName),this.CustomerType.Enable&&(this.CustomerType.SelectedValue=this.obj.CustomerTypeID.toString()),this.OnlineCustrType.Enable&&(this.OnlineCustrType.SelectedValue=this.obj.OnlineCustType),this.Status.Enable&&(this.Status.SelectedValue=this.obj.StatusID.toString()),this.Account.Enable&&(this.Account.SelectedValue=this.obj.AccountID),this.Group.Enable&&(this.Group.SelectedValue=this.obj.ParentID),this.CreditDays.Enable&&(this.CreditDays.Text=this.obj.CreditDays.toString()),this.CreditLimit.Enable&&(this.CreditLimit.Text=this.obj.CreditLimit.toString()),this.UserName.Text=this.obj.UserName,this.Password.Text=this.obj.Password,this.ScreenObject.LoadCustomFieldsData(this.ds.Tables[1]),this.ScreenObject.LoadCustomFieldsCCData(this.ds.Tables[7]),this.ViewContacts.LoadContacts(this.ds.Tables[2],this.ds.Columns[2]),this.ViewNotes.LoadNotes(this.ds.Tables[3]),this.ViewAddress.LoadContacts(this.ds.Tables[4]),this.ViewAttachments.LoadAttachments(this.ds.Tables[6]),null!=this.PriContact&&this.PriContact.LoadContacts(this.ds.Tables[5]),this.ViewActivities.LoadActivityData(this.ds.Tables[8]),this.ds.Tables.length>8&&this.Cases.LoadCaseGrid(this.ds.Tables[9]),this.ViewCCMapping.LoadData(this.ds.Tables[10],this.ds.Columns[10]),this.ViewAssignHistroy.LoadHistroy_1(83,this.obj.CustomerID);let t=this.ds.Tables[6].filter(t=>1==t.IsProductImage);t.length>0?(this.PhotoTextVisibility=!1,this.FileID=parseInt(t[0].FileID),this.CustomerPhoto=n.e.GetPath(t[0].GUID.toString()+"."+t[0].FileExtension.toString())):(this.FileID=0,this.PhotoTextVisibility=!0)}setvisibility(){this.CustomerCode.Visible=!0,this.CustomerCode.Enable=!0,this.CustomerName.Visible=!0,this.CustomerName.Enable=!0,this.CustomerType.Visible=!0,this.CustomerType.Enable=!0,this.Status.Enable=!0,this.Status.Visible=!0,this.Group.Visible=!0,this.Group.Enable=!0,this.AliasName.Visible=!0,this.AliasName.Enable=!0,this.CreditDays.Visible=!0,this.CreditLimit.Visible=!0,this.CreditLimit.Enable=!0,this.CreditDays.Enable=!0}OnDropPhoto(t){}OnSaveCustomer(t){if("Contact"==t.toString())this.ContactExpanded=!this.ContactExpanded;else if("Note"==t.toString())this.NoteExpanded=!this.NoteExpanded;else if("Attachment"==t.toString())this.AttachmentExpanded=!this.AttachmentExpanded;else if("NewContact"==t.toString())this.ContactVisibility=!0;else if("Convert"==t.toString()){let t=new x.a;t.ConvertCustomer_1(this),i.a.page.ShowDialog(t,P.a,{ShowCenter:!0})}else if("NewNote"==t.toString())this.NoteVisibility=!0;else if("NewAttachment"==t.toString())this.AttachmentVisibility=!0;else if("NewAddress"==t.toString())this.AddressVisibility=!0;else if("DeletePhoto"==t.toString())this.IsPhotoDelete=!0,this.CustomerPhoto="",this.IsPhotoChanged=!1,this.PhotoTextVisibility=!0,this.DisplayMessage="";else if("MouseDown"==t.toString()||"UploadPhoto"==t.toString()){let t=new v.a;t.PopupAttachmentsViewModel_1(2,this.NodeID,this),i.a.page.ShowDialog(t,M.a,{Title:"Add Attachment"})}else try{let t=this.ScreenObject.ValidateData();if(!n.e.IsEmpty(t))return this.DisplayMessage=t,void(this.MessageVisibility=!0);if(0==this.obj.CustomerID){let t={StrCode:this.obj.CustomerCode,CodePrefix:this.obj.CodePrefix,CodeNumber:this.obj.CodeNumber};if(this.DisplayMessage=this.ScreenObject.SetAutoCodeParams_3(this.CustomerCode,this.ParentId,this.ScreenObject.Data.Tables[6],t),this.obj.CustomerCode=t.StrCode,this.obj.CodePrefix=t.CodePrefix,this.obj.CodeNumber=t.CodeNumber,this.DisplayMessage.length>0)return}else this.obj.CustomerCode=this.CustomerCode.Text;if(this.CustomerName.Enable&&(this.obj.CustomerName=this.CustomerName.Text),this.AliasName.Enable&&(this.obj.AliasName=n.e.IsEmpty(this.AliasName.Text)?this.CustomerName.Text:this.AliasName.Text),this.CustomerType.Enable&&""!=this.CustomerType.SelectedValue&&(this.obj.CustomerTypeID=parseInt(this.CustomerType.SelectedValue)),this.Status.Enable&&(this.obj.StatusID=parseInt(this.Status.SelectedValue)),this.obj.AccountID=this.Account.Enable?this.Account.SelectedValue:parseInt(this.Account.DefaultValue),this.Group.SelectedValue>0&&(this.obj.SelectedNodeID=this.Group.SelectedValue),this.CreditDays.Enable&&null!=this.CreditDays.Text&&""!=this.CreditDays.Text&&(this.obj.CreditDays=parseInt(this.CreditDays.Text)),this.CreditLimit.Enable&&null!=this.CreditLimit.Text&&""!=this.CreditLimit.Text&&(this.obj.CreditLimit=parseFloat(this.CreditLimit.Text)),null!=this.PriContact&&this.PriContact.CheckPrimaryDuplicateContact())return void(this.DisplayMessage="Duplicate Contact[s] in Contacts DB");null!=this.PriContact&&(this.obj.PrimaryContactQuery=this.PriContact.GetXML()),this.obj.CustomFieldsQuery=this.ScreenObject.GetCustomFieldsQuery(),this.obj.CustomCostCenterFieldsQuery=this.ScreenObject.GetCustomCostCenterFieldsQuery(),this.obj.ContactsXML=this.ViewContacts.GetXML(),this.obj.NotesXML=this.ViewNotes.GetXML(),this.obj.AddressXML=this.ViewAddress.GetXML(),this.obj.ActivityXml=this.ViewActivities.ActivitiesXML(),this.obj.UserName=n.e.IsEmpty(this.UserName.Text)?"":this.UserName.Text,this.obj.OnlineCustType=n.e.IsEmpty(this.OnlineCustrType.SelectedValue)?"":this.OnlineCustrType.SelectedValue,this.obj.Password=n.e.IsEmpty(this.Password.Text)?"":this.Password.Text;let s={strXML:""};if(this.DisplayMessage=this.ViewCCMapping.GetXML(s),this.obj.CCXML=s.strXML,!n.e.IsEmpty(this.DisplayMessage))return;if(null!=this.SelectedAddressType&&(this.obj.SelectedAddressType=this.SelectedAddressType),!this.ScreenObject.ValidateDataonSave())return;try{this.obj.AttachmetsXML=this.ViewAttachments.GetXML()}catch(e){return void(this.DisplayMessage=i.a.GetResource("Upload_Path_notExists"))}let a=this.obj.SaveCustomer();this.DisplayMessage=a.Message,this.RetVal=a.RetValue,this.RetVal>0&&(i.a.page.tabs.forEach(t=>{t.instance instanceof O.TreeViewPageComponent&&t.instance.obj&&83==t.instance.CostCenterID&&(t.instance.obj.SetFocusNodeID=t.instance.obj.SelectedNode.Id,t.instance.Refresh())}),this.Cases.CasesGridObj.Clear(),this.CustomerName.Text="",this.CustomerType.Text="",this.CustomerPhoto="",this.PhotoTextVisibility=!0,this.ScreenObject.Clear(),this.ViewContacts.ContactsListObj.Clear(),this.ViewAddress.ContactsListObj.Clear(),this.ViewNotes.NotesListObj.Clear(),this.ViewAttachments.AttachmentsList.Clear(),this.VehicleList.Clear(),this.ViewContacts.DeletedContacts.Clear(),this.ViewNotes.DeletedNotes.Clear(),this.ViewAddress.DeletedAddress.Clear(),this.ViewAttachments.DeletedAttachments.Clear(),this.ViewCCMapping.Clear(),null!=this.PriContact&&this.PriContact.ClearFields(),this.AutoGenerateCode(),this.Group.SelectedValue=this.obj.ParentID,this.Status.SelectedValue="393",this.ViewActivities.ActivityGridDataObj.Clear(),this.ViewAssignHistroy.ListObj.Clear(),this.CustomerType.SelectedValue=this.obj.CustomerTypeID.toString(),this.ParentId>0&&(this.Group.SelectedValue=this.obj.ParentID,this.CustomerType.SelectedValue=this.obj.CustomerTypeID.toString(),this.Status.SelectedValue="393"),this.ViewCCMapping.Clear(),null!=this.ViewCCMapping.TempData&&this.ViewCCMapping.TempData.Clear(),this.CCMapVisibility=!1,this.TempID=-0),Logger.InfoLog("AddCustomerViewModel::Exiting OnSaveCustomer")}catch(s){Logger.ErrorLog("AddCustomerViewModel:: OnSaveCustomer"+s.stack)}}AutoGenerateCode(){0==this.obj.CustomerID&&this.ScreenObject.SetAutoCode(this.CustomerCode,this.obj.IsGroup,this.ParentId,this.ScreenObject.Data.Tables[6])}OnAddContact(){this.Contact=new N.a,this.Contact.QuickAddDContactViewModel_1(this)}OnAddAddress(){this.Address=new I.a,this.Address.AddAddressViewModel_2(this)}OnAddNote(){this.Note=new S.AddNoteViewModel,this.Note.AddNoteViewModel_2(this)}OnAddAttachment(){this.Attachment=new V.AddAttachmentViewModel,this.Attachment.AddAttachmentViewModel_2(this)}}},LCKI:function(t,e,s){"use strict";s.d(e,"a",(function(){return l}));var i=s("Do2H"),n=s("Lp6j"),a=s("ScVY"),o=s("wlFP"),h=s("EggS"),r=s("r2z3");class l extends a.b{constructor(){super(),this.obj=new h.a,this.CCID=0,this.CCNodeID=0,this.Ret=0,this.AccountContactVisible=o.a.PactCheckBoxData_1("AccountContactVisible",2),this.AccountAddressVisible=o.a.PactCheckBoxData_1("AccountAddressVisible",2),this.AccountAssignVisible=o.a.PactCheckBoxData_1("AccountAssignVisible",2),this.Account=o.a.PactCheckBoxData_1("Account",86),this.Product=o.a.PactCheckBoxData_1("Product",86),this.Product.Label=i.a.GetResource("Product"),this.Account.Label=i.a.GetResource("CRMLead_Account"),this.AccountContactVisible.Label=i.a.GetResource("CRMLead_CopyContacts"),this.AccountAddressVisible.Label="Copy Address",this.AccountAssignVisible.Label="Copy Assign"}ConvertCustomer_1(t){this.parent=t,this.obj.CustomerID=this.parent.CustomerID,this.ds=this.obj.GetCustomerDetails(),this.CCID=83,this.CCNodeID=this.parent.CustomerID,this.Title=this.DisplayName=i.a.GetResource("CRMLead_ConvertTo"),this.Account.Enable=!!n.e.IsEmpty(this.ds.Tables[0][0].Mode)||"2"!=this.ds.Tables[0][0].Mode.toString(),0!=this.ds.Tables[11].length&&(this.Account.IsChecked=!0,this.Account.Enable=!1),0!=this.ds.Tables[11].length&&0!=this.ds.Tables[13].length&&(this.AccountContactVisible.IsChecked=!0,this.AccountContactVisible.Enable=!1,this.AccountAddressVisible.Enable=!1,this.AccountAssignVisible.Enable=!1),0!=this.ds.Tables[11].length&&0!=this.ds.Tables[14].length&&(this.AccountAddressVisible.IsChecked=!0),0!=this.ds.Tables[11].length&&0!=this.ds.Tables[15].length&&(this.AccountAssignVisible.IsChecked=!0),this.AccountContactVisible.Visible=!0,this.AccountAddressVisible.Visible=!0,this.AccountAssignVisible.Visible=!0,i.a.SessionManager.HideUnathorizedAccess&&(this.Account.Visible=!!i.a.SessionManager.IsActionAssigned(83,"Convert_Account")),this.Product.Visible=!1}ConvertCustomer_2(t){let e={};this.CCParent=t,e.CostCenterID=this.CCParent.CostCenterID,e.NodeID=this.CCParent.NodeID,this.ds=e.GetCostCenterDetails(0),this.DisplayName=i.a.GetResource("CRMLead_ConvertTo"),this.CCID=this.CCParent.CostCenterID,this.CCNodeID=this.CCParent.NodeID,this.AccountContactVisible.Visible=!1,this.AccountAddressVisible.Visible=!1,this.AccountAssignVisible.Visible=!1,0!=this.ds.Tables[9].length&&(this.Product.IsChecked=!0,this.Product.Enable=!1),i.a.SessionManager.HideUnathorizedAccess&&(this.Product.Visible=!!i.a.SessionManager.IsActionAssigned(145,"Convert_Product")),this.Account.Visible=!1}OnSave(t){if("Cancel"==t)i.a.page.HideDialog();else{let t=[];t.push(this.CCID),t.push(this.CCNodeID),t.push(this.Account.IsChecked),t.push(this.AccountContactVisible.IsChecked),t.push(this.AccountAddressVisible.IsChecked),t.push(this.AccountAssignVisible.IsChecked),t.push(this.Product.IsChecked);let e=r.a.ConvertLead_2(t);this.DisplayMessage=e.Message,this.Ret=e.RetValue,this.Ret>0&&(this.Product.Enable=!this.Product.IsChecked,this.Account.Enable=!this.Account.IsChecked,this.AccountContactVisible.Enable=!this.AccountContactVisible.IsChecked,this.AccountAddressVisible.Enable=!this.AccountAddressVisible.IsChecked,this.AccountAssignVisible.Enable=!this.AccountAssignVisible.IsChecked)}}}},MMwJ:function(t,e,s){"use strict";s.d(e,"a",(function(){return j}));var i=s("Do2H"),n=s("Lp6j"),a=s("eQJW"),o=s("ScVY"),h=s("NkMH"),r=s("VxiT"),l=s("EQd/"),c=s("c6C+"),d=s("RJs6"),u=s("xnJf"),C=s("OvA8"),b=s("0/4Q"),m=s("n56n"),D=s("W7OG"),p=s("DKUf"),I=s("CQvG"),g=s("4HhE"),S=s("JIg3"),V=s("jgdN"),w=s("EPb/"),A=s("CXnT"),f=s("N3wO"),T=s("utDZ");class j extends o.b{constructor(t,e){super(),this.NextPreviousVisibility=!0,this.Productid=0,this.CampaignID=0,this.CID=0,this.CostCenterID=0,this.DocumentType=0,this.ApprovalsVisibility=!1,this.obj=new f.a,this.ScreenObject=new r.a,this.Code=new l.a(24355),this.txtName=new l.d(24356),this.ExpectedResponse=new l.d(24360),this.Offer=new l.d(24361),this.Status=new b.e(24357),this.Type=new b.e(24358),this.Venue=new b.e(53359),this.Vendor=new m.b(24359),this.Group=new m.b(25893),this.parentID=0,this.ActVisibility=!1,this.NodeID=0,this.Ret=0,this.Dset=null,this.DefaultCustomeratStaff=-1;try{this.ScreenObject.LoadScreen_2(this,88),this.DisplayName=i.a.GetResource("Camp_Title"),this.Title=i.a.GetResource("Camp_Title"),this.DisplayMessage="",this.LoadStaticData(),this.NodeID=t,this.CampaignID=t,this.CID=t,this.CostCenterID=88,this.CampaignID=this.CID,this.obj.CampaignId=t,this.LeadsProduct=new D.a(this,88),this.ViewOrganizationViewModel=new T.a(this),this.ViewNotes=new d.a(this),this.ViewActivities=new I.b(this),this.Activities=new p.a(this,!1),this.ViewActivities.Activities=this.Activities,this.ViewAttachments=new C.ViewAttachmentViewModel(this),this.ButtonEmail=new h.a,this.ButtonApprove=new h.a,0!=t&&(i.a.SessionManager.HideUnathorizedAccess?this.ButtonEmail.Visible=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Email"):this.ButtonEmail.Enable=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Email"),i.a.SessionManager.HideUnathorizedAccess?this.ButtonApprove.Visible=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Approved"):this.ButtonApprove.Enable=i.a.SessionManager.IsActionAssigned(this.CostCenterID,"Approved")),this.OnLoad(),this.Vendor.SelectedValue=86,this.parentID=e,this.Group.Visible=!0,this.Group.Enable=!0,this.Group.SelectedValue=0==this.parentID?1:this.parentID,this.ScreenObject.InitAutoCode(this.ScreenObject.Data.Tables[6],!1),0==t?(this.AutoGenerateCode(),this.Group.CCID=88,this.Group.TypeID=this.Vendor.TypeID=1,this.CampaignStatus="UnApproved",this.Vendor.CCID=83,this.NextPreviousVisibility=!1,this.ButtonApprove.Visible=!1):(this.Group.CCID=88,this.Group.TypeID=this.Vendor.TypeID=1,this.Vendor.CCID=83,this.LoadEditData(),this.Title=i.a.GetResource("Camp_Edit"),this.DisplayName=i.a.GetResource("Camp_Edit"));let s=this.ScreenObject.Data.Tables[5].filter(t=>"CapsLock"==t.Name);s.length>0&&Object(a.j)(s[0].Value)&&(this.txtName.IsAllCaps=!0),s=this.ScreenObject.Data.Tables[5].filter(t=>"CapsToFirstLetter"==t.Name),s.length>0&&Object(a.j)(s[0].Value)&&(this.txtName.IsFirstLetterCaps=!0),s=this.ScreenObject.Data.Tables[5].filter(t=>"DefaultStaffCusomter"==t.Name),s.length>0&&""!=s[0].Value.toString()&&(this.DefaultCustomeratStaff=parseInt(s[0].Value)),this.DupCode=this.Code.Text}catch(s){Logger.ErrorLog("AddEditCampaignViewModel:: AddEditCampaignViewModel",s)}Logger.InfoLog("AddEditCampaignViewModel::Exiting AddEditCampaignViewModel")}OnAddNote(){this.Note=new c.AddNoteViewModel,this.Note.AddNoteViewModel_2(this)}OnAddAttachment(){this.Attachment=new u.AddAttachmentViewModel,this.Attachment.AddAttachmentViewModel_2(this)}LoadEditData(){this.Dset=this.obj.GetCompaignDetails(),this.Code.Text=this.obj.Code,this.txtName.Text=this.obj.Name,this.Status.SelectedValue=this.obj.StatusId.toString(),this.Type.SelectedValue=this.obj.TypeId.toString(),this.Venue.SelectedValue=this.obj.Venue.toString(),this.Vendor.SelectedValue=this.obj.vendorid,this.ExpectedResponse.Text=this.obj.ExpectedResponce,this.Offer.Text=this.obj.Offer,this.Group.SelectedValue=this.obj.groupid,this.CampaignStatus=""!=this.Dset.Tables[1][0].IsApproved.toString()&&Object(a.j)(this.Dset.Tables[1][0].IsApproved)?"Approved":"UnApproved",this.Dset.Tables.length>13&&this.ScreenObject.LoadCustomFieldsData(this.Dset.Tables[14]),this.LoadCustomFieldsData(this.Dset.Tables[1],this.Dset.Columns[1]),this.Dset.Tables.length>11&&this.LeadsProduct.LoadProductData(this.Dset.Tables[12],this.Dset.Columns[12]),this.ScreenObject.LoadCustomFieldsCCData(this.Dset.Tables[3]),this.Responces.LoadResponseData(this.Dset.Tables[4]),this.CActivities.LoadActivityData(this.Dset.Tables[5]),this.ViewActivities.LoadActivityData(this.Dset.Tables[23]),this.ViewDemoKit.LoadData(this.Dset.Tables[11]),this.Dset.Tables.length>12&&this.ViewOrganizationViewModel.LoadData(this.Dset.Tables[13]),this.ViewApprovals.LoadData(this.Dset.Tables[16]),this.Dset.Tables.length>14&&this.ViewStaffViewModel.LoadData(this.Dset.Tables[15]),this.LoadBudgetData(this.Dset.Tables[5],this.Dset.Columns[5]),null!=this.Dset&&this.Dset.Tables.length>16&&this.Dset.Tables[17].length>0&&this.ViewNotes.LoadNotes(this.Dset.Tables[17]),null!=this.Dset&&this.Dset.Tables.length>17&&this.Dset.Tables[18].length>0&&this.ViewAttachments.LoadAttachments(this.Dset.Tables[18]),null!=this.Dset&&this.Dset.Tables.length>19&&this.Dset.Tables[20].length>0&&this.ViewSpeakers.LoadData(this.Dset.Tables[20]),null!=this.Dset&&this.Dset.Tables.length>23&&this.Dset.Tables[24].length>0&&this.ViewInvites.LoadData(this.Dset.Tables[24]),null!=this.Dset&&this.Dset.Tables.length>24&&this.Dset.Tables[25].length>0&&this.ViewEventActivities.LoadActivityData(this.Dset.Tables[25]),Logger.InfoLog("AddEditCampaignViewModel::Exiting LoadEditData")}ClearTabsData(){this.LeadsProduct.ProductGridObj.Clear(),this.Responces.grdata.Rows.Clear(),this.Responces.grdata.Rows.Clear(),this.ViewActivities.ActivityGridDataObj.Clear(),this.ViewDemoKit.DemoKitData.Rows.Clear(),this.CActivities.GridData.Rows.Clear(),this.Responces.grdata.Rows.Clear(),this.ViewOrganizationViewModel.OrganizationData.Rows.Clear(),this.ViewApprovals.ApprovalsData.Rows.Clear(),this.ViewSpeakers.SpeakersData.Rows.Clear(),this.ViewStaffViewModel.OrganizationData.Rows.Clear(),this.ViewNotes.NotesListObj.Clear(),this.ViewAttachments.AttachmentsListObj.Clear(),this.ViewInvites.InvitesData.Rows.Clear(),this.ViewEventActivities.ActivityData.Rows.Clear(),this.ViewEventActivities.ActivityGridDataObj.Clear()}LoadCustomFieldsData(t,e){if(null!=t&&t.length>0)try{this.ScreenObject.CustomTab.Pages.forEach(s=>{s.Fields.forEach(s=>{s instanceof g.c&&null!=s.DBColumnName&&e.Contains(s.DBColumnName)&&(s instanceof l.d?s.Text=n.e.String(t[0][s.DBColumnName]):s instanceof b.e?s.SelectedValue=n.e.String(t[0][s.DBColumnName]):s instanceof S.c||s instanceof S.a?n.e.isValidDate(t[0][s.DBColumnName])&&(s.Date=new Date(t[0][s.DBColumnName])):s instanceof V.a?s.Text=t[0][s.DBColumnName].toString():s instanceof m.b&&n.e.IsNum(t[0][s.DBColumnName])&&(s.SelectedValue=parseInt(t[0][s.DBColumnName])))})})}catch(s){Logger.ErrorLog("ControlGenerator:: LoadCustomFieldsData : "+s.stack)}}LoadBudgetData(t,e){if(Logger.InfoLog("ControlGenerator:: Inside LoadCustomFieldsData"),null!=t&&t.length>0){let n=0,o=0,h=0,r="";e.Contains("BudgetedAmount")?r="BudgetedAmount":e.Contains("BudgetAmount")&&(r="BudgetAmount"),t.forEach(t=>{e.Contains(r)&&Object(a.j)(t.CloseStatus)&&(n+=parseFloat(t[r]))});try{this.ScreenObject.CustomTab.Pages.forEach(t=>{t.Fields.forEach(t=>{t instanceof g.c&&null!=t.DBColumnName&&25075==t.DBColumnID&&t instanceof l.d&&(t.Text=n.ToString("N"+i.a.SessionManager.Preferences.DecimalsinAmount)),t instanceof g.c&&null!=t.DBColumnName&&24366==t.DBColumnID&&t instanceof l.d&&(o=null!=t.Text&&""!=t.Text?parseFloat(t.Text):0)})}),n>0&&o>=0&&(h=o-n),this.ScreenObject.CustomTab.Pages.forEach(t=>{t.Fields.forEach(t=>{t instanceof g.c&&null!=t.DBColumnName&&25076==t.DBColumnID&&t instanceof l.d&&(t.Text=h.ToString("N"+i.a.SessionManager.Preferences.DecimalsinAmount))})})}catch(s){Logger.ErrorLog("ControlGenerator:: LoadCustomFieldsData : ",s)}}}LoadStaticData(){Logger.InfoLog("AddEditCampaignViewModel::Entering LoadStaticData");let t=this.obj.GetCompaignDetails();b.e.FillComboWithDefaultOption(t.Tables[4],this.Type),b.e.FillComboWithDefaultOption(t.Tables[17],this.Venue),this.ScreenObject.Data.Tables[3].forEach(t=>{this.Status.Items.push(b.d.ComboBoxItems_2(t.Status.toString(),t.StatusID.toString()))}),this.Status.SelectedValue=this.Status.Items[0].Value.toString()}AutoGenerateCode(){0==this.CID&&this.ScreenObject.SetAutoCode(this.Code,!1,this.parentID,this.ScreenObject.Data.Tables[6])}ClearFields(){this.txtName.Text="",this.Offer.Text="",this.ExpectedResponse.Text=""}OnLoad(){this.AssignRowColumns();for(let t=this.ScreenObject.CustomTab.Pages.length-1;t>=0;t--){let e=this.ScreenObject.CustomTab.Pages[t];switch(e.Name){case"Products":e.Fields.push(this.LeadsProduct);break;case"Response":e.Fields.push(this.Responces);break;case"Notes":e.Fields.push(this.ViewNotes);break;case"Attachments":e.Fields.push(this.ViewAttachments);break;case"Campaign Activities":e.Fields.push(this.CActivities);break;case"Activities":e.Fields.push(this.ViewActivities);break;case"CampaignEvents":e.Fields.push(this.ViewEventActivities);break;case"Event Requirements":e.Fields.push(this.ViewDemoKit);break;case"Speakers":e.Fields.push(this.ViewSpeakers);break;case"Organizer":e.Fields.push(this.ViewOrganizationViewModel);break;case"Staff":e.Fields.push(this.ViewStaffViewModel);break;case"Approvals":e.Fields.push(this.ViewApprovals);break;case"Invitees":e.Fields.push(this.ViewInvites)}}}AssignRowColumns(){let t;t=this.ScreenObject.CustomFields.length;for(let e=0;e<t;e++)this.ScreenObject.CustomFields[e].Row=e/4,this.ScreenObject.CustomFields[e].Column=e%4}onTabSelectionChanged(t){}getFields(){let t,e="";return this.ScreenObject.CustomTab.Pages.forEach(s=>{s.Fields.forEach(s=>{s instanceof g.c&&null!=s.DBColumnName&&0==s.DBColumnName.toLowerCase().Contains("alpha")&&0==s.DBColumnName.toLowerCase().Contains("ccnid")&&(s instanceof l.d?"ActualRevenue"!=s.DBColumnName&&"NetRevenue"!=s.DBColumnName&&"TotalCostofCampaingActivities"!=s.DBColumnName&&"Balance"!=s.DBColumnName&&(t=s.Text,n.e.IsEmpty(t)&&(t=""),e+=s.DBColumnName+"='"+t.Replace("'","''")+"',"):s instanceof b.e?(t=s.SelectedValue,n.e.IsEmpty(t)&&(t=""),e+=s.DBColumnName+"='"+t+"',"):s instanceof S.c?(t=s.Date.toString(),n.e.IsEmpty(t)&&(t=""),""!=t&&(t=new Date(t).ToString("dd/MMM/yyyy")),e+=s.DBColumnName+"=Convert(float,Convert(DateTime,'"+t+"')),"):s instanceof S.a?(t=s.Date.ToString("dd/MMM/yyyy"),n.e.IsEmpty(t)&&(t=""),e+=s.DBColumnName+"=Convert(float,Convert(DateTime,'"+t+"')),"):s instanceof V.a?(t=s.Text,n.e.IsEmpty(t)&&(t=""),e+=s.DBColumnName+"='"+t+"',"):s instanceof m.b&&(this.oPactCombo=s,e+=this.oPactCombo.DBColumnName+"='"+this.oPactCombo.SelectedValue+"',"))})}),e.toString()}OnSave(t){try{if("Assign"==t.toString());else if("Approve"==t.toString()){let t=new w.a(this,88,this.CID);i.a.page.ShowDialog(t,A.a,{ShowCenter:!0})}else if("Save"==t.toString()){let t=this.ScreenObject.ValidateData();if(!n.e.IsEmpty(t))return void(this.DisplayMessage=t);if(this.obj.CampaignId=this.CID,0==this.obj.CampaignId){let t={StrCode:this.obj.Code,CodePrefix:this.obj.CodePrefix,CodeNumber:this.obj.CodeNumber};if(this.DisplayMessage=this.ScreenObject.SetAutoCodeParams_3(this.Code,this.parentID,this.ScreenObject.Data.Tables[6],t),this.obj.Code=t.StrCode,this.obj.CodePrefix=t.CodePrefix,this.obj.CodeNumber=t.CodeNumber,this.DisplayMessage.length>0)return}else this.obj.Code=this.Code.Text;if(this.obj.Name=this.txtName.Text,this.obj.TypeId=this.Type.Enable&&""!=this.Type.SelectedValue?parseInt(this.Type.SelectedValue):0,this.obj.Venue=this.Venue.Enable&&""!=this.Venue.SelectedValue?parseInt(this.Venue.SelectedValue):0,this.obj.StatusId=parseInt(this.Status.SelectedValue),this.obj.vendorid=this.Vendor.SelectedValue,this.obj.selectedNodeid=this.Group.SelectedValue,this.obj.ExpectedResponce=this.ExpectedResponse.Text,this.obj.Offer=this.Offer.Text,this.obj.TabData=this.getFields(),this.obj.CustomCostCenterFieldsQuery=this.ScreenObject.GetCustomCostCenterFieldsQuery(),this.obj.CustomFieldsQuery=this.ScreenObject.GetCustomFieldsQuery(),this.obj.ProductXML=this.LeadsProduct.GetProductXML(),this.obj.ResponseXML=this.Responces.GetResponseXML(),this.obj.CActivityXML=this.CActivities.GetActivityXML(),this.obj.SpeakersXML=this.ViewSpeakers.GetXML(),this.obj.DemoKitXML=this.ViewDemoKit.GetXML(),this.obj.OrganizationXML=this.ViewOrganizationViewModel.GetXML(),this.obj.InvitesXML=this.ViewInvites.GetXML(),this.obj.ApprovalsXML=this.ViewApprovals.GetXML(),this.obj.StaffXML=this.ViewStaffViewModel.GetXML(),this.obj.NoteXML=this.ViewNotes.GetXML(),this.obj.AttachmentXML=this.ViewAttachments.GetXML(),this.obj.ActivityXML=this.ViewActivities.ActivitiesXML(),this.obj.EventsXML=this.ViewEventActivities.ActivitiesXML(),!this.ScreenObject.ValidateDataonSave())return;let e=this.obj.SaveCampaign();this.Ret=e.RetValue,this.DisplayMessage=e.Message,this.MessageVisibility=!0,this.Ret>0&&(this.ClearFields(),this.AutoGenerateCode(),this.Responces.grdata.Clear(),this.CActivities.GridData.Clear(),this.ViewInvites.InvitesData.Clear(),this.LeadsProduct.ClearGrid(),this.ViewOrganizationViewModel.OrganizationData.Clear(),this.ViewStaffViewModel.OrganizationData.Clear(),this.ViewApprovals.ApprovalsData.Clear(),this.ViewSpeakers.SpeakersData.Clear(),this.ViewDemoKit.DemoKitData.Clear(),this.ViewEventActivities.ActivityData.Clear(),this.ViewActivities.ActivityGridDataObj.Clear(),this.ViewActivities.ActivityGridDataObj.Clear(),this.ScreenObject.Clear(),this.ViewNotes.NotesListObj.Clear(),this.ViewAttachments.AttachmentsList.Clear())}else t.toString()}catch(e){Logger.ErrorLog("AddEditCampaignViewModel:: OnCellEditEnding"+e.stack)}Logger.InfoLog("AddEditCampaignViewModel::Exiting OnSave")}GetRecords(t){let e=0,s=!1;"NEXT"==t.toString().toUpperCase()?s=!0:"PREVIOUS"==t.toString().toUpperCase()&&(s=!1);let n=i.a.common.GetNextPreviousRecords(this.CostCenterID,this.NodeID,s,0,0);null!=n&&n.Tables[0].length>0&&(e=parseInt(n.Tables[0][0][0]),e>0&&(this.NodeID=e,this.obj.CampaignId=e,this.CID=e,this.Group.CCID=88,this.Group.TypeID=this.Vendor.TypeID=1,this.Vendor.CCID=83,this.ClearTabsData(),this.LoadEditData(),this.Title=i.a.GetResource("Camp_Edit"),this.DisplayName=i.a.GetResource("Camp_Edit")))}}},RQ5z:function(t,e,s){"use strict";s.r(e),s.d(e,"DocumentViewerViewModel",(function(){return I}));var i=s("Do2H"),n=s("Lp6j"),a=s("8iaB"),o=s("dH+5"),h=s("mvPR"),r=s("1Cra"),l=s("CUWK"),c=s("P6ee"),d=s("Q0PM"),u=s("c6GQ"),C=s("XR/+"),b=s("Hzm0"),m=s("MMwJ"),D=s("EuF+"),p=s("n56n");class I extends a.a{constructor(){super(),this.oDocPayroll=null,this.oDocumentMap=null,this.ReportObj=null,this.RowIndex=0,this.TotalRows=0,this.CurrentDocument=null,this.CurrentDocumentPrefix=null,this.IsDocumentFound=!1,this.Grid=null,this.Grid_Row=null,this.ListIndex=0,this.DimensionID=0,this.NodeID=0,this.Dimension=null,this.PKColumn="",this.ButtonsVisibility=!1,this.IsPopup=!1,this.Screen=[]}DocumentViewerViewModel_Report(t,e,s){if(this.args=e,this.ReportObj=t,this.DimensionID=s,this.ButtonsVisibility=!0,this.RowIndex=this.ReportObj.Data.indexOf(e.Row),this.TotalRows=t.Data.length,e.Column.LinkType==o.a.Document||e.Column.LinkType==o.a.DocumentID||e.Column.LinkType==o.a.DocumentDetailID||null!=e.Row.Cells[e.ColumnIndex].CellAppearance&&"LINK_DOCUMENT"==e.Row.Cells[e.ColumnIndex].CellAppearance.ColumnType){if(this.Title="Documents",this.DisplayName="Documents",-2==e.Column.LinkDimension&&(this.Title=this.DisplayName=i.a.GetResource("LinkMap")),!n.e.IsEmptySpace(e.Row.Cells[e.ColumnIndex].Text)){if(this.VoucherNoList=e.Row.Cells[e.ColumnIndex].Text.split(","),null!=e.Content){for(this.ListIndex=0;this.ListIndex<this.VoucherNoList.length&&this.VoucherNoList[this.ListIndex].Trim()!=e.Content;this.ListIndex++);this.ListIndex==this.VoucherNoList.length&&(this.ListIndex=0)}this.IsDocumentFound=this.LoadDocument(this.VoucherNoList[this.ListIndex],"IsFirstClick")}}else e.Column.LinkType==o.a.Dimension&&(this.Title="Dimensions",this.DisplayName="Dimensions",0==e.Column.LinkDimension?(this.SetPKColumn(),this.NodeID=n.e.Int(e.Row.DataRow[this.PKColumn]),0!=this.NodeID?this.IsDocumentFound=this.LoadDimension(this.NodeID):Logger.ErrorLog("Column not found : "+this.PKColumn)):n.e.IsEmptySpace(e.Row.Cells[e.ColumnIndex].Text)||(this.DimensionID=e.Column.LinkDimension,this.IsDocumentFound=this.LoadDimensionByText(e.Row.Cells[e.ColumnIndex].Text)));Logger.InfoLog("DocumentViewerViewModel:: Entering ReOrderLevelNewViewModel")}DocumentViewerViewModel_Document(t,e,s){this.Grid=t,this.Grid_Row=e,this.Gird_SortMemberPath=s,this.Title="UnApproved Documents",this.DisplayName="UnApproved Documents",this.ButtonsVisibility=!0,this.RowIndex=t.Table.indexOf(e),this.TotalRows=t.Table.length,this.IsDocumentFound=this.LoadDocument(e[s].toString(),"IsFirstClick"),Logger.InfoLog("DocumentViewerViewModel:: Entering ReOrderLevelNewViewModel")}DocumentViewerViewModel_ByVoucherNo(t){this.IsDocumentFound=this.LoadDocument(t,"IsFirstClick"),this.DisplayName=null==this.Document||n.e.IsEmpty(this.Document.DisplayName)?"Documents":this.Document.DisplayName}SetPKColumn(){this.PKColumn=this.args.Column.ID+"_ID",this.args.Row.DataRow[this.PKColumn]||(this.ReportObj.StaticReportType>=1&&this.ReportObj.StaticReportType<=12?"AccountCode"!=this.args.Column.ID&&"AccountName"!=this.args.Column.ID||(this.DimensionID=2,this.PKColumn="AccountID"):13!=this.ReportObj.StaticReportType&&14!=this.ReportObj.StaticReportType&&15!=this.ReportObj.StaticReportType&&16!=this.ReportObj.StaticReportType||"ProductCode"!=this.args.Column.ID&&"ProductName"!=this.args.Column.ID||(this.DimensionID=3,this.PKColumn="ProductID"))}OnButtonClick(t){let e,s=!1;if(this.DisplayMessage="","PREVIOUS"==t){if(null!=this.ReportObj){for(this.RowIndex--;this.RowIndex>=0;this.RowIndex--)if(null!=this.Document||null!=this.oDocumentMap){if(this.ListIndex>0?(this.RowIndex++,s=!1):s=!0,this.ReportObj.Data[this.RowIndex].Type==h.f.Detail)for(s&&(e=this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text,n.e.IsEmpty(e)||this.CurrentVoucherNo==e?(this.VoucherNoList=[],this.ListIndex=0):(this.VoucherNoList=e.split(","),this.ListIndex=this.VoucherNoList.length)),this.ListIndex--;this.ListIndex>=0;this.ListIndex--)if(this.VoucherNoList[this.ListIndex]=this.VoucherNoList[this.ListIndex].Trim(),!n.e.IsEmpty(this.VoucherNoList[this.ListIndex])&&this.CurrentVoucherNo!=this.VoucherNoList[this.ListIndex]&&this.LoadDocument(this.VoucherNoList[this.ListIndex]))return}else if(this.ReportObj.Data[this.RowIndex].Type==h.f.Detail)if(0==this.args.Column.LinkDimension){let t=n.e.Int(this.ReportObj.Data[this.RowIndex].DataRow[this.PKColumn]);if(t>0&&this.CurrentVoucherNo!=t.toString()&&this.LoadDimension(t))break}else n.e.IsEmptySpace(this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text)||this.CurrentVoucherNo==this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text||(this.IsDocumentFound=this.LoadDimensionByText(this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text))}else if(null!=this.Grid)for(this.RowIndex--;this.RowIndex>=0&&(e=this.Grid.Table[this.RowIndex][this.Gird_SortMemberPath].toString(),n.e.IsEmpty(e)||this.CurrentVoucherNo==e||!this.LoadDocument(e));this.RowIndex--);-1==this.RowIndex&&(this.RowIndex=0,this.DisplayMessage=null!=Document?"No Previous Documents":"No Previous Records")}else if("NEXT"==t){if(null!=this.ReportObj){for(this.RowIndex++;this.RowIndex<this.ReportObj.Data.length;this.RowIndex++)if(null!=Document||null!=this.oDocumentMap)if(this.VoucherNoList.length-1>this.ListIndex?(this.RowIndex--,s=!1):(s=!0,this.ListIndex=-1),this.ReportObj.Data[this.RowIndex].Type==h.f.Detail){for(s&&(e=this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text,this.VoucherNoList=n.e.IsEmpty(e)||this.CurrentVoucherNo==e?[]:e.split(",")),this.ListIndex++;this.ListIndex<this.VoucherNoList.length;this.ListIndex++)if(this.VoucherNoList[this.ListIndex]=this.VoucherNoList[this.ListIndex].Trim(),!n.e.IsEmpty(this.VoucherNoList[this.ListIndex])&&this.CurrentVoucherNo!=this.VoucherNoList[this.ListIndex]&&this.LoadDocument(this.VoucherNoList[this.ListIndex]))return}else this.VoucherNoList=[];else if(this.ReportObj.Data[this.RowIndex].Type==h.f.Detail)if(0==this.args.Column.LinkDimension){let t=n.e.Int(this.ReportObj.Data[this.RowIndex].DataRow[this.PKColumn]);if(t>0&&this.CurrentVoucherNo!=t.toString()&&this.LoadDimension(t))break}else if(!n.e.IsEmptySpace(this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text)&&this.CurrentVoucherNo!=this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text&&(this.IsDocumentFound=this.LoadDimensionByText(this.ReportObj.Data[this.RowIndex].Cells[this.args.ColumnIndex].Text),this.IsDocumentFound))return}else if(null!=this.Grid)for(this.RowIndex++;this.RowIndex<this.Grid.Table.length&&(e=this.Grid.Table[this.RowIndex][this.Gird_SortMemberPath].toString(),n.e.IsEmpty(e)||this.CurrentVoucherNo==e||!this.LoadDocument(e));this.RowIndex++);this.RowIndex==this.TotalRows&&(this.RowIndex--,this.DisplayMessage=null!=Document?"No Next Documents":"No Next Records")}else"CLOSE"==t&&(this.args.Column.LinkType==o.a.Document&&-3==this.args.Column.LinkDimension?i.a.page.HideDialog():i.a.page.removeTab(this))}LoadDocument(t,e=null){if(this.CurrentVoucherNo=t,null!=this.args&&-2==this.args.Column.LinkDimension){if(t.length>0)return null==this.oDocumentMap||(this.oDocumentMap.VoucherNo=t.Trim(),this.oDocumentMap.OnButtonClick("Submit")),!0}else{let a=i.a.report.GetDocumentDetailsByVoucherNo(t.Trim());if(n.e.Int(a.obj)>0){let t;t=a.Tables[0].length>0?a.Tables[0][0]:a.Tables[1][0];try{if(40054==parseInt(t.CostCenterID))this.Title="Monthly Payroll",this.DisplayName="Monthly Payroll",this.ButtonsVisibility=!1;else if(40095==parseInt(t.CostCenterID))this.Title="Final Settlement",this.DisplayName="Final Settlement",this.ButtonsVisibility=!1;else{if(this.CurrentDocument!=t.CostCenterID.toString()||this.CurrentDocumentPrefix!=t.DocPrefix.toString()){let s=new r.AddEditDocumentViewModel(parseInt(t.CostCenterID),t.DocumentName.toString(),!0);if(s.ScreenObject.IsAccessDenied)return"IsFirstClick"==e&&alert("Document Not Assigned."),!1;this.Document=s,0==this.Screen.length?this.Screen.push(this.Document):this.Screen[0]=this.Document}else 0==this.Screen.length&&this.Screen.push(this.Document);this.DisplayName=this.Document.Title,this.Document.ScreenObject.DocPrefix.TextBox.Text=t.DocNumber.toString(),this.Document.ScreenObject.DocPrefix.ComboBox.SelectedValue=t.DocPrefix.toString(),this.Document.OnDocPrefixChanged("lostFocus"),this.Document.ScreenObject.FillDocumentPrefix(!0),this.Document.ScreenObject.DocPrefix.ComboBox.SelectedValue=t.DocPrefix.toString(),this.Document.ScreenObject.DocPrefix.ComboBox.SelectedItem=this.Document.ScreenObject.DocPrefix.ComboBox.GetselectedItem();let s=this.Document.ScreenObject.Data.Tables[8].length>0?this.Document.ScreenObject.Data.Tables[8]:[];if(s=s.filter(t=>t.CCID>5e4),s.length>0)for(let t=0;t<this.Document.ScreenObject._CCFields.length;t++){const e=this.Document.ScreenObject._CCFields[t];if(e instanceof p.b){if(5==this.Document.DocumentType&&e.DBColumnName.Contains("TO"))continue;s=s.filter(t=>t.CCID==e.CCID),s.length>0&&e.Enable&&(e.Enable=!1)}}this.CurrentDocument=t.CostCenterID.toString(),this.CurrentDocumentPrefix=t.DocPrefix.toString(),this.Document.IsInventoryVoucher&&!this.Document.RefreshGridFooter&&(this.Document.RefreshGridFooter=!0)}return!0}catch(s){Logger.ErrorLog("DocumentViewer: "+s),this.DisplayMessage="Error In Document Load"}}}return!1}LoadDimension(t){return t>0&&(this.CurrentVoucherNo=t.toString(),l.RibbonExtViewModel.ShowQuickAdd(this.DimensionID,0,t,!1,2)),!1}LoadDimnesion_PAYROLL(t){}LoadDimnesion_CRM(t){73==this.DimensionID?this.Dimension=new b.AddEditCasesViewModel(t,0,!1):86==this.DimensionID||(88==this.DimensionID?this.Dimension=new m.a(t,0):89==this.DimensionID||83==this.DimensionID&&(this.Dimension=new D.a(t,t,0,!1)))}LoadDimnesion_Rental(t){92==this.DimensionID?this.Dimension=new d.AddEditPropertyViewModel(t,1,!1):93==this.DimensionID?this.Dimension=new u.AddEditUnitsViewModel(t,!1,1,t):94==this.DimensionID?this.Dimension=new C.AddEditTenantViewModel(t,1,!1):95!=this.DimensionID&&96!=this.DimensionID&&103!=this.DimensionID&&129!=this.DimensionID||(this.Dimension=new c.AddEditRenContractViewModel,this.Dimension.AddEditRenContractViewModel_1(this.DimensionID,t,!1,1,t))}LoadDimensionByText(t){if(!n.e.IsEmptySpace(t)){if(this.CurrentVoucherNo=t,this.NodeID=0,95==this.DimensionID||103==this.DimensionID||104==this.DimensionID||129==this.DimensionID){let e=i.a.report.GetDataTable("RPT040",this.DimensionID.toString(),t);e.length>0&&(this.NodeID=parseInt(e[0].ContractID)),this.NodeID>0&&(this.Dimension=new c.AddEditRenContractViewModel,this.Dimension.AddEditRenContractViewModel_1(this.DimensionID,this.NodeID,!1,1,this.NodeID))}if(null!=this.Dimension)return 0==this.Screen.length?this.Screen.push(this.Dimension):this.Screen[0]=this.Dimension,!0}return!1}}},"W4+j":function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var i=s("3Pt+"),n=s("fXoL");function a(t,e){if(1&t&&n.Vb(0,9),2&t){const t=n.lc();n.tc("obj",t.obj.Product)("group",t.group)}}function o(t,e){if(1&t&&n.Vb(0,9),2&t){const t=n.lc();n.tc("obj",t.obj.Account)("group",t.group)}}function h(t,e){if(1&t&&n.Vb(0,9),2&t){const t=n.lc();n.tc("obj",t.obj.AccountContactVisible)("group",t.group)}}function r(t,e){if(1&t&&n.Vb(0,9),2&t){const t=n.lc();n.tc("obj",t.obj.AccountAddressVisible)("group",t.group)}}function l(t,e){if(1&t&&n.Vb(0,9),2&t){const t=n.lc();n.tc("obj",t.obj.AccountAssignVisible)("group",t.group)}}let c=(()=>{class t{constructor(){this.group=new i.j({})}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Nb({type:t,selectors:[["app-convert-customer"]],decls:39,vars:11,consts:[[1,"master-screen"],[1,"PACTHeaderFields","dialogSubBody"],[1,"form-group","row","PACTControl"],["FieldDirective","",3,"obj","group",4,"ngIf"],[2,"margin-left","20px"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"],["FieldDirective","",3,"obj","group"]],template:function(t,e){1&t&&(n.Zb(0,"div",0),n.Wc(1,"\n    "),n.Zb(2,"div",1),n.Wc(3,"\n        "),n.Zb(4,"div",2),n.Wc(5,"\n            "),n.Uc(6,a,1,2,"ng-container",3),n.Wc(7,"\n        "),n.Yb(),n.Wc(8,"\n        "),n.Zb(9,"div",2),n.Wc(10,"\n            "),n.Uc(11,o,1,2,"ng-container",3),n.Wc(12,"\n            "),n.Zb(13,"div",4),n.Wc(14,"\n                "),n.Uc(15,h,1,2,"ng-container",3),n.Wc(16,"\n                "),n.Uc(17,r,1,2,"ng-container",3),n.Wc(18,"\n                "),n.Uc(19,l,1,2,"ng-container",3),n.Wc(20,"\n            "),n.Yb(),n.Wc(21,"\n        "),n.Yb(),n.Wc(22,"\n  "),n.Yb(),n.Wc(23,"\n  "),n.Zb(24,"div",5),n.Wc(25,"\n    "),n.Zb(26,"div"),n.Wc(27,"\n        "),n.Zb(28,"button",6),n.hc("click",(function(){return e.obj.OnSave("Save")})),n.Wc(29),n.mc(30,"translate"),n.Yb(),n.Wc(31,"\n        "),n.Zb(32,"button",7),n.hc("click",(function(){return e.obj.OnSave("Cancel")})),n.Ub(33,"i",8),n.Wc(34),n.mc(35,"translate"),n.Yb(),n.Wc(36,"\n    "),n.Yb(),n.Wc(37,"      \n  "),n.Yb(),n.Wc(38,"\n"),n.Yb()),2&t&&(n.Db(6),n.tc("ngIf",e.obj.Product.Visible),n.Db(5),n.tc("ngIf",e.obj.Account.Visible),n.Db(4),n.tc("ngIf",e.obj.AccountContactVisible.Visible),n.Db(2),n.tc("ngIf",e.obj.AccountAddressVisible.Visible),n.Db(2),n.tc("ngIf",e.obj.AccountAssignVisible.Visible),n.Db(10),n.Xc(n.nc(30,7,"Ok")),n.Db(5),n.Xc(n.nc(35,9,"Cancel")))},encapsulation:2}),t})()},"il++":function(t,e,s){"use strict";s.r(e),s.d(e,"AddEditCaseComponent",(function(){return u}));var i=s("fXoL");function n(t,e){if(1&t){const t=i.ac();i.Zb(0,"span",11),i.hc("click",(function(){return i.Ic(t),i.lc().obj.OnSave("Email")})),i.Ub(1,"i",12),i.Wc(2),i.mc(3,"translate"),i.Yb()}2&t&&(i.Db(2),i.Xc(i.nc(3,1,"SMTP_Email")))}function a(t,e){if(1&t){const t=i.ac();i.Zb(0,"span",11),i.hc("click",(function(){return i.Ic(t),i.lc().obj.OnSave("Assign")})),i.Ub(1,"i",13),i.Wc(2),i.mc(3,"translate"),i.Yb()}2&t&&(i.Db(2),i.Xc(i.nc(3,1,"Assign")))}function o(t,e){if(1&t){const t=i.ac();i.Zb(0,"span",11),i.hc("click",(function(){return i.Ic(t),i.lc().obj.OnSave("Print")})),i.Ub(1,"i",14),i.Wc(2),i.mc(3,"translate"),i.Yb()}2&t&&(i.Db(2),i.Xc(i.nc(3,1,"Print")))}function h(t,e){if(1&t){const t=i.ac();i.Zb(0,"span",11),i.hc("click",(function(){return i.Ic(t),i.lc().obj.OnSave("PrintPreview")})),i.Ub(1,"i",14),i.Wc(2),i.mc(3,"translate"),i.Yb()}2&t&&(i.Db(2),i.Xc(i.nc(3,1,"Preview")))}function r(t,e){if(1&t){const t=i.ac();i.Zb(0,"span",11),i.hc("click",(function(){return i.Ic(t),i.lc().obj.OnSave("Save")})),i.Ub(1,"i",15),i.Wc(2),i.mc(3,"translate"),i.Yb()}2&t&&(i.Db(2),i.Xc(i.nc(3,1,"Save")))}function l(t,e){if(1&t){const t=i.ac();i.Zb(0,"span",11),i.hc("click",(function(){return i.Ic(t),i.lc().obj.OnSave("WaiveOff")})),i.Ub(1,"i",16),i.Wc(2),i.mc(3,"translate"),i.Yb()}2&t&&(i.Db(2),i.Xc(i.nc(3,1,"Waive Off")))}function c(t,e){if(1&t){const t=i.ac();i.Zb(0,"span",11),i.hc("click",(function(){return i.Ic(t),i.lc().obj.OnSave("Close")})),i.Ub(1,"i",17),i.Wc(2,"Close"),i.Yb()}}function d(t,e){if(1&t){const t=i.ac();i.Zb(0,"span",11),i.hc("click",(function(){return i.Ic(t),i.lc().obj.OnSave("Report")})),i.Ub(1,"i",18),i.Wc(2),i.mc(3,"translate"),i.Yb()}2&t&&(i.Db(2),i.Xc(i.nc(3,1,"Report")))}let u=(()=>{class t{constructor(){}ngOnInit(){this.obj=this.params.obj}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=i.Nb({type:t,selectors:[["app-add-edit-case"]],decls:42,vars:11,consts:[["id","maincontainer",1,"maincontainer","document_container"],[2,"flex-direction","column","justify-content","flex-end","width","Calc(100%)","display","flex"],[1,"page-header"],[1,"page-title"],[2,"display","inline-flex"],[3,"WFDocLevelList"],[1,"btnMetroDiv","secondary-btn-group"],["class","secondary-btn",3,"click",4,"ngIf"],[1,"main_div"],[3,"ScreenObject"],["dynscreen",""],[1,"secondary-btn",3,"click"],[1,"fa-light","fa-envelope"],[1,"fa-light","fa-user-plus"],[1,"fa-light","fa-print"],[1,"fa-light","fa-save"],[1,"fa-light","fa-dice-d4"],[1,"fa-light","fa-times"],[1,"fa-light","fa-file-chart-line"]],template:function(t,e){1&t&&(i.Zb(0,"div",0),i.Wc(1,"\n    "),i.Zb(2,"div",1),i.Wc(3,"\n    "),i.Zb(4,"div",2),i.Wc(5,"\n        "),i.Zb(6,"label",3),i.Wc(7),i.Yb(),i.Wc(8,"\n        "),i.Zb(9,"div",4),i.Wc(10,"\n            "),i.Ub(11,"app-wflevel-view",5),i.Wc(12,"\n          "),i.Yb(),i.Wc(13," \n        "),i.Zb(14,"div",6),i.Wc(15,"            \n            "),i.Uc(16,n,4,3,"span",7),i.Wc(17,"\n            "),i.Uc(18,a,4,3,"span",7),i.Wc(19,"\n            "),i.Uc(20,o,4,3,"span",7),i.Wc(21,"\n            "),i.Uc(22,h,4,3,"span",7),i.Wc(23,"            \n            "),i.Uc(24,r,4,3,"span",7),i.Wc(25,"\n            "),i.Uc(26,l,4,3,"span",7),i.Wc(27,"\n            "),i.Uc(28,c,3,0,"span",7),i.Wc(29,"\n            "),i.Uc(30,d,4,3,"span",7),i.Wc(31,"\n            \n        "),i.Yb(),i.Wc(32,"\n    "),i.Yb(),i.Wc(33,"\n    "),i.Zb(34,"div",8),i.Wc(35,"\n    "),i.Ub(36,"app-master-screen",9,10),i.Wc(38,"\n    "),i.Yb(),i.Wc(39,"\n"),i.Yb(),i.Wc(40,"\n"),i.Yb(),i.Wc(41,"\n    ")),2&t&&(i.Db(7),i.Yc("\n            ",e.obj.DisplayName,"\n        "),i.Db(4),i.tc("WFDocLevelList",e.obj.WFDocLevelList),i.Db(5),i.tc("ngIf",e.obj.ButtonEmail.Visible&&e.obj.ButtonEmail.Enable),i.Db(2),i.tc("ngIf",e.obj.ButtonAssign.Visible&&e.obj.ButtonAssign.Enable),i.Db(2),i.tc("ngIf",e.obj.PrintVisible),i.Db(2),i.tc("ngIf",e.obj.PrintViewVisible),i.Db(2),i.tc("ngIf",e.obj.ButtonSave.Visible&&e.obj.ButtonSave.Enable),i.Db(2),i.tc("ngIf",e.obj.ButtonWaive.Visible&&e.obj.ButtonWaive.Enable),i.Db(2),i.tc("ngIf",e.obj.ButtonClose.Visible&&e.obj.ButtonClose.Enable),i.Db(2),i.tc("ngIf",e.obj.ReportInfoVisibility),i.Db(6),i.tc("ScreenObject",e.obj.ScreenObject))},encapsulation:2}),t})()}}]);