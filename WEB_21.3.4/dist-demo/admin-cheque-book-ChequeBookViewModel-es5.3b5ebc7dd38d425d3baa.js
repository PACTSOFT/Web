function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var i,o=_getPrototypeOf(e);if(t){var s=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,s)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{lUfH:function(e,t,i){"use strict";i.r(t),i.d(t,"ChequeBookViewModel",(function(){return f}));var o=i("Do2H"),s=i("Lp6j"),n=i("ScVY"),r=i("8B8H"),a=i("0/4Q"),c=i("EQd/"),l=i("ockk"),u=i("jDOZ"),d=i("3Pt+"),h=i("fXoL"),b=i("ofXK"),p=i("q8k3"),C=i("sYmb");function g(e,t){if(1&e&&(h.Zb(0,"div",6),h.Wc(1,"\n            "),h.Vb(2,7),h.Wc(3,"\n        "),h.Yb()),2&e){var i=h.lc();h.Db(2),h.tc("obj",i.obj.ChequeNo)("group",i.form)}}var N,S=((N=function(){function e(){_classCallCheck(this,e),this.form=new d.j({})}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||N)},N.\u0275cmp=h.Nb({type:N,selectors:[["app-cancel-cheque-book"]],inputs:{obj:"obj"},decls:21,vars:7,consts:[[1,"master-screen"],[1,"PACTHeaderFields","dialogSubBody"],["class","form-group col-xl-12 col-md-12 col-sm-12 col-xs-12 PACTControl",4,"ngIf"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"secondary-btn-wicon",3,"click"],[1,"form-group","col-xl-12","col-md-12","col-sm-12","col-xs-12","PACTControl"],["FieldDirective","",3,"obj","group"]],template:function(e,t){1&e&&(h.Zb(0,"div",0),h.Wc(1,"\n    "),h.Zb(2,"div",1),h.Wc(3,"\n        "),h.Uc(4,g,4,2,"div",2),h.Wc(5,"\n    "),h.Yb(),h.Wc(6,"\n    "),h.Zb(7,"div",3),h.Wc(8,"\n        "),h.Zb(9,"div"),h.Wc(10,"\n            "),h.Zb(11,"button",4),h.hc("click",(function(){return t.obj.OnButtonClick("Submit")})),h.Wc(12),h.mc(13,"translate"),h.Yb(),h.Wc(14,"\n            "),h.Zb(15,"button",5),h.hc("click",(function(){return t.obj.OnButtonClick("ChequeCancel")})),h.Wc(16),h.mc(17,"translate"),h.Yb(),h.Wc(18,"\n        "),h.Yb(),h.Wc(19,"\n    "),h.Yb(),h.Wc(20,"\n"),h.Yb()),2&e&&(h.Db(4),h.tc("ngIf",t.obj.ChequeNo.Visible),h.Db(8),h.Xc(h.nc(13,3,"Submit")),h.Db(4),h.Xc(h.nc(17,5,"Cancel")))},directives:[b.t,p.a],pipes:[C.d],encapsulation:2}),N),f=function(e){_inherits(i,e);var t=_createSuper(i);function i(){var e;_classCallCheck(this,i),(e=t.call(this)).obj=new u.a,e.CancelledDisplayMessage="",e.CancelledMessageVisibility=!1,e.ChequeCancelVisibility=!1,e.DisplayName="",e.AccountList=new a.e(0),e.ChequeNo=new c.d(0),e.SNO=1,e.DisplayName=o.a.GetResource("ChequeBooks");var s=e.obj.GetChequeBookDetail(0);return e.AccountList.SelectionChangedCommand.Subscribe(_assertThisInitialized(e),"OnSelectionChanged"),null!=s&&s.Tables.length>0&&s.Tables[0].length>0&&s.Tables[0].forEach((function(t){e.AccountList.Items.push(a.d.ComboBoxItems_2(t.AccountName.toString(),t.AccountID.toString()))})),e.loadGrid(),e.AccountsGrid.OnCellEditEnding.Subscribe(_assertThisInitialized(e),"OnCellEndEdit"),e.AccountsGrid.SearchVisible=!1,e.AccountList.Label="Accounts",e.ChequeNo.Label="Cheque No",e}return _createClass(i,[{key:"loadGrid",value:function(){var e=[],t={};t.Name=o.a.GetResource("Open"),t.Value=1,e.push(t),(t={}).Name=o.a.GetResource("Close"),t.Value=2,e.push(t),this.AccountsGrid=new r.a,this.AccountsGrid.CanUserAddRows=!0,this.AccountsGrid.CanUserDeleteRows=!0,this.AccountsGrid.Table=[],this.AccountsGrid.TableColumns.push("Sno"),this.AccountsGrid.TableColumns.push("BookNo"),this.AccountsGrid.TableColumns.push("StartNo"),this.AccountsGrid.TableColumns.push("EndNo"),this.AccountsGrid.TableColumns.push("CurrentNo"),this.AccountsGrid.TableColumns.push("CancelledCheques"),this.AccountsGrid.TableColumns.push("Status"),this.AccountsGrid.Columns=[];var i=new l.a;(i=new l.a).Header=o.a.GetResource("Sno"),i.DisplayMember="Sno",i.DataType="TextBlock",i.Width=50,i.ReadOnly=!0,this.AccountsGrid.Columns.push(i),(i=new l.a).Header=o.a.GetResource("BookNo"),i.DisplayMember="BookNo",i.DataType="TextBlock",i.Width=280,i.ReadOnly=!1,this.AccountsGrid.Columns.push(i),(i=new l.a).Header=o.a.GetResource("StartNo"),i.DisplayMember="StartNo",i.DataType="TextBlock",i.Width=150,i.ReadOnly=!1,this.AccountsGrid.Columns.push(i),(i=new l.a).Header=o.a.GetResource("EndNo"),i.DisplayMember="EndNo",i.DataType="TextBlock",i.Width=150,i.ReadOnly=!1,this.AccountsGrid.Columns.push(i),(i=new l.a).Header=o.a.GetResource("CurrentNo"),i.DisplayMember="CurrentNo",i.DataType="TextBlock",i.Width=150,i.ReadOnly=!1,this.AccountsGrid.Columns.push(i),(i=new l.a).Header=o.a.GetResource("CancelledCheques"),i.DisplayMember="CancelledCheques",i.DataType="TextBlock",i.Width=280,i.ReadOnly=!0,this.AccountsGrid.Columns.push(i),(i=new l.a).Header=o.a.GetResource("Status"),i.ValueBinding="Status",i.DataType="ComboBox",i.DisplayMember="Name",i.ValueMember="Value",i.Width=70,i.ComboData=e,this.AccountsGrid.Columns.push(i),this.AccountsGrid.Clear();for(var s=0;s<20;s++){var n=this.AccountsGrid.NewRow();n.Sno=s+1,this.AccountsGrid.addRow(n)}this.AccountsGrid.TableNewRow.Subscribe(this,"Table_TableNewRow")}},{key:"OnCellEndEdit",value:function(e,t,i){var o=this.AccountsGrid.Table.indexOf(e)+1;return""==s.e.String(e.BookNo)?(this.DisplayMessage="BookNo instanceof Empty at RowNo "+o,void(this.MessageVisibility=!0)):"BookNo"==t&&this.AccountsGrid.Table.filter((function(t){return t.BookNo==e.BookNo.toString()})).length>1?(this.DisplayMessage="BookNo already selected with the Name '"+e.BookNo.toString()+"'",this.MessageVisibility=!0,e.BookNo=null,e.StartNo=null,e.EndNo=null,e.CurrentNo=null,e.CancelledCheques=null,void this.AccountsGrid.updateRow(e)):"CurrentNo"==t&&!s.e.IsEmpty(e.CurrentNo)&&(parseInt(e.CurrentNo.toString())>parseInt(e.EndNo.toString())||parseInt(e.CurrentNo.toString())<parseInt(e.StartNo.toString()))?(this.DisplayMessage="CurrentNo. in BookNo. '"+e.BookNo.toString()+"' instanceof out of Range",void(this.MessageVisibility=!0)):void 0}},{key:"Table_TableNewRow",value:function(e){this.UpdateSequence(),e.Sno=this.SNO}},{key:"UpdateSequence",value:function(){var e=this;this.SNO=1,this.AccountsGrid.Table.forEach((function(t){t.Sno=e.SNO++}))}},{key:"OnButtonClick",value:function(e){var t,i,n=this;if((null===(t=this.AccountsGrid.angularGrid)||void 0===t?void 0:t.slickGrid)&&(null===(i=this.AccountsGrid.angularGrid)||void 0===i?void 0:i.slickGrid.getActiveCellNode())&&this.AccountsGrid.angularGrid.slickGrid.getEditorLock().commitCurrentEdit(),"Save"==e){var r="";r+="<XML>";for(var a=0;a<this.AccountsGrid.Table.length;a++)if(!s.e.IsEmpty(this.AccountsGrid.Table[a].BookNo)){if(""==s.e.String(this.AccountsGrid.Table[a].StartNo))return this.DisplayMessage="Enter start No. for BookNo. = '"+this.AccountsGrid.Table[a].BookNo.toString()+"'",void(this.MessageVisibility=!0);if(0==s.e.Int(this.AccountsGrid.Table[a].StartNo))return this.DisplayMessage="Invalid start No. for BookNo. = '"+this.AccountsGrid.Table[a].BookNo.toString()+"'",void(this.MessageVisibility=!0);if(""==s.e.String(this.AccountsGrid.Table[a].EndNo))return this.DisplayMessage="Enter End No. for BookNo. = '"+this.AccountsGrid.Table[a].BookNo.toString()+"'",void(this.MessageVisibility=!0);if(0==s.e.Int(this.AccountsGrid.Table[a].EndNo))return this.DisplayMessage="Invalid End No. for BookNo. = '"+this.AccountsGrid.Table[a].BookNo.toString()+"'",void(this.MessageVisibility=!0);if(!s.e.IsEmpty(this.AccountsGrid.Table[a].CurrentNo)&&0==s.e.Int(this.AccountsGrid.Table[a].CurrentNo))return this.DisplayMessage="Invalid Current No. for BookNo. = '"+this.AccountsGrid.Table[a].BookNo.toString()+"'",void(this.MessageVisibility=!0);if(parseInt(this.AccountsGrid.Table[a].EndNo.toString())<=parseInt(this.AccountsGrid.Table[a].StartNo.toString()))return this.DisplayMessage="EndNo Should be higher than start No. for BookNo. = '"+this.AccountsGrid.Table[a].BookNo.toString()+"'",void(this.MessageVisibility=!0);if(!s.e.IsEmpty(this.AccountsGrid.Table[a].CurrentNo)&&!s.e.IsEmpty(this.AccountsGrid.Table[a].StartNo)&&!s.e.IsEmpty(this.AccountsGrid.Table[a].EndNo)&&(parseInt(this.AccountsGrid.Table[a].CurrentNo.toString())>parseInt(this.AccountsGrid.Table[a].EndNo.toString())||parseInt(this.AccountsGrid.Table[a].CurrentNo.toString())<parseInt(this.AccountsGrid.Table[a].StartNo.toString())))return this.DisplayMessage="CurrentNo. for BookNo. = '"+s.e.String(this.AccountsGrid.Table[a].BookNo)+"' instanceof out of Range",void(this.MessageVisibility=!0);if(""==s.e.String(this.AccountsGrid.Table[a].Status)||"0"==s.e.String(this.AccountsGrid.Table[a].Status))return this.DisplayMessage="Select Status for BookNo. = '"+s.e.String(this.AccountsGrid.Table[a].BookNo)+"'",void(this.MessageVisibility=!0);r+="<Rows ",r+='BookNo="'+s.e.String(this.AccountsGrid.Table[a].BookNo)+'" ',r+='StartNo="'+s.e.String(this.AccountsGrid.Table[a].StartNo)+'" ',r+='EndNo="'+s.e.String(this.AccountsGrid.Table[a].EndNo)+'" ',""!=s.e.String(this.AccountsGrid.Table[a].CurrentNo)?r+='CurrentNo="'+this.AccountsGrid.Table[a].CurrentNo.toString()+'" ':r+='CurrentNo="'+s.e.String(this.AccountsGrid.Table[a].StartNo)+'" ',r+='Status="'+parseInt(s.e.String(this.AccountsGrid.Table[a].Status))+'" ',r+=" />"}r+="</XML>";u.a.SetChequeBookDetails(parseInt(this.AccountList.SelectedValue),r,0).subscribe((function(e){if(n.DisplayMessage=e.Message,e.RetValue>0){n.MessageVisibility=!0,n.AccountsGrid.Clear();for(var t=0;t<20;t++){var i=n.AccountsGrid.NewRow();i.Sno=t+1,n.AccountsGrid.addRow(i)}}}),(function(e){console.log(e),n.DisplayMessage="Error in Save"}))}else if("Cancel"==e)this.ChequeNo.Text="",this.CancelledDisplayMessage="",this.CancelledMessageVisibility=!1,null==this.AccountsGrid.SelectedItem||null==this.AccountsGrid.SelectedItem||s.e.IsEmpty(this.AccountsGrid.SelectedItem[Object.keys(this.AccountsGrid.SelectedItem)[1]])?(this.DisplayMessage="Select Cheque to Cancel",this.MessageVisibility=!0):(this.ChequeCancelVisibility=!0,this.ChequeNo.Text=this.AccountsGrid.SelectedItem.CurrentNo.toString(),o.a.page.ShowDialog(this,S,{Title:"Cancel Cheque"}));else if("ChequeCancel"==e)this.ChequeNo.Text="",this.ChequeCancelVisibility=!1,o.a.page.HideDialog();else if("Submit"==e){if(0==s.e.Int(this.ChequeNo.Text))return this.CancelledDisplayMessage="Invalid Cheque No.",this.DisplayMessage="Invalid Cheque No.",this.MessageVisibility=!0,void(this.CancelledMessageVisibility=!0);if(parseInt(this.AccountsGrid.SelectedItem.EndNo.toString())<parseInt(this.ChequeNo.Text)||parseInt(this.AccountsGrid.SelectedItem.StartNo.toString())>parseInt(this.ChequeNo.Text))return this.CancelledDisplayMessage="Select Cheque Between StartNo and EndNo",this.DisplayMessage="Select Cheque Between StartNo and EndNo",this.MessageVisibility=!0,void(this.CancelledMessageVisibility=!0);if(parseInt(s.e.String(this.AccountsGrid.SelectedItem.CurrentNo))>=parseInt(s.e.String(this.AccountsGrid.SelectedItem.EndNo)))this.CancelledDisplayMessage="Cheque No. out of Range",this.DisplayMessage="Cheque No. out of Range",this.MessageVisibility=!0,this.CancelledMessageVisibility=!0;else{var c="";c+="<XML>",c+="<Rows ",c+='BookNo="'+s.e.String(this.AccountsGrid.SelectedItem.BookNo)+'" ',c+='StartNo="'+s.e.String(this.AccountsGrid.SelectedItem.StartNo)+'" ',c+='EndNo="'+s.e.String(this.AccountsGrid.SelectedItem.EndNo)+'" ',c+='CurrentNo="'+this.ChequeNo.Text+'" ',c+=" />",c+="</XML>";var l=0;u.a.SetChequeBookDetails(parseInt(this.AccountList.SelectedValue),c,1).subscribe((function(e){(l=e.RetValue)>0?(n.CancelledDisplayMessage="Cheque No '"+n.ChequeNo.Text+"' has been Cancelled",n.DisplayMessage="Cheque No '"+n.ChequeNo.Text+"' as been Cancelled",n.MessageVisibility=!0,n.CancelledMessageVisibility=!0,n.AccountsGrid.SelectedItem.CancelledCheques=s.e.String(n.AccountsGrid.SelectedItem.CancelledCheques)+","+n.ChequeNo.Text,n.AccountsGrid.SelectedItem.CurrentNo=s.e.String(n.AccountsGrid.SelectedItem.CurrentNo).Replace(parseInt(n.AccountsGrid.SelectedItem.CurrentNo.toString()).toString(),"")+l,n.AccountsGrid.updateRow(n.AccountsGrid._SelectedItem)):(n.CancelledDisplayMessage=e.Message,n.DisplayMessage=e.Message,n.MessageVisibility=!0)}),(function(e){console.log(e),n.DisplayMessage="Error in Delete",n.MessageVisibility=!0}))}}}},{key:"OnSelectionChanged",value:function(e){this.AccountsGrid.Clear();var t=this.obj.GetChequeBookDetail(parseInt(this.AccountList.SelectedValue));if(null!=t&&t.Tables.length>0&&t.Tables[0].length>0)for(var i=0;i<t.Tables[0].length;i++){var o=this.AccountsGrid.NewRow();s.e.IsEmpty(t.Tables[0][i].BookNo)||(o.BookNo=t.Tables[0][i].BookNo.toString()),s.e.IsEmpty(t.Tables[0][i].StartNo)||(o.StartNo=t.Tables[0][i].StartNo.toString()),s.e.IsEmpty(t.Tables[0][i].EndNo)||(o.EndNo=t.Tables[0][i].EndNo.toString()),s.e.IsEmpty(t.Tables[0][i].CurrentNo)||(o.CurrentNo=t.Tables[0][i].CurrentNo.toString()),s.e.IsEmpty(t.Tables[0][i].CancelledCheques)||(o.CancelledCheques=t.Tables[0][i].CancelledCheques.toString()),"0"!=s.e.String(t.Tables[0][i].Status)&&(o.Status=t.Tables[0][i].Status.toString()),o.Sno=this.AccountsGrid.Table.length+1,this.AccountsGrid.addRow(o)}for(var n=0;n<20;n++){var r=this.AccountsGrid.NewRow();r.Sno=this.AccountsGrid.Table.length+1,this.AccountsGrid.addRow(r)}}}]),i}(n.b)}}]);