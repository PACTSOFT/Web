function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var s,a=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;s=Reflect.construct(a,arguments,o)}else s=a.apply(this,arguments);return _possibleConstructorReturn(this,s)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{"61lo":function(e,t,s){"use strict";s.r(t),s.d(t,"AssetClassesViewModel",(function(){return c}));var a=s("Do2H"),o=s("Lp6j"),i=s("ScVY"),r=s("EQd/"),n=s("0/4Q"),l=s("NM0h"),u=s("VxiT"),c=function(e){_inherits(s,e);var t=_createSuper(s);function s(e){var o;return _classCallCheck(this,s),(o=t.call(this))._AssetClassID=0,o.AssetClassCode=new r.d(23793),o.AssetClassName=new r.d(23794),o.AssetClassStatus=new n.e(23797),o.FAAccounts=new n.e(23795),o.DeprBooks=new n.e(23796),o.TotalYears=new r.d(49973),o.DeprPosting=new n.e(49974),o.ScreenObject=new u.a,o.obj=new l.a,o.RetValue=0,o.YearsMandatory=!1,o.Fields=[],o.AssetClassID=e,o.obj.AssetClassID=e,o.DisplayMessage="",o.LoadData(),0==o.AssetClassID?o.Title=a.a.GetResource("AddAssetClass"):(o.Title=a.a.GetResource("EditAssetClass"),o.OnLoadData()),o.DisplayName=o.Title,o}return _createClass(s,[{key:"LoadData",value:function(){var e=this;this.ScreenObject.LoadScreen_2(this,74),this.AssetClassCode.Label=a.a.GetResource("Code"),this.AssetClassName.Label=a.a.GetResource("Name"),this.AssetClassCode.Enable=!0,this.AssetClassName.Enable=!0,this.AssetClassStatus.Enable=!0,this.FAAccounts.Enable=!0,this.DeprBooks.Enable=!0,this.TotalYears.Enable=!0,this.DeprPosting.Enable=!0,this.Fields.push(this.AssetClassCode),this.Fields.push(this.AssetClassName),this.Fields.push(this.AssetClassStatus),this.Fields.push(this.FAAccounts),this.Fields.push(this.DeprBooks),this.Fields.push(this.TotalYears),this.Fields.push(this.DeprPosting);var t=a.a.common.GetDataSet("ASS003","");t.Tables[0].forEach((function(t){e.DeprBooks.Items.push(n.d.ComboBoxItems_2(t.DeprBookName.toString(),t.DeprBookID.toString()))})),this.DeprBooks.Items.length>0&&(this.DeprBooks.SelectedValue=this.DeprBooks.Items[0].Value),this.DeprBooks.Mandatory=!0,t.Tables[1].forEach((function(t){e.FAAccounts.Items.push(n.d.ComboBoxItems_2(t.PostGroupName.toString(),t.PostingGroupID.toString()))})),this.FAAccounts.Items.length>0&&(this.FAAccounts.SelectedValue=this.FAAccounts.Items[0].Value),this.FAAccounts.Mandatory=!0,this.DeprPosting.Items.push(n.d.ComboBoxItems_2(a.a.GetResource("AssetManagement_Monthly"),"1")),this.DeprPosting.Items.push(n.d.ComboBoxItems_2(a.a.GetResource("Budget_Quarterly"),"3")),this.DeprPosting.Items.push(n.d.ComboBoxItems_2(a.a.GetResource("Budget_Halfyearely"),"4")),this.DeprPosting.Items.push(n.d.ComboBoxItems_2(a.a.GetResource("AssetManagement_Yearly"),"2")),this.DeprPosting.DefaultValue=this.DeprPosting.SelectedValue="2",this.TotalYears.Text="0",this.ScreenObject.Data.Tables.length>0&&(this.ScreenObject.Data.Tables[3].forEach((function(t){e.AssetClassStatus.Items.push(n.d.ComboBoxItems_2(t.Status.toString(),t.StatusID.toString()))})),this.AssetClassStatus.SelectedValue="379"),this.ScreenObject.Data.Tables[4].filter((function(e){return"ChangeOfFAAccountsNode"==e.Name})).length>0&&(this.YearsMandatory=!0)}},{key:"OnLoadData",value:function(){var e=l.a.GetAssetClassDetails(this.obj.AssetClassID);null!=e&&e.Tables.length>0&&e.Tables[0].length>0&&(this.AssetClassCode.Text=e.Tables[0][0].AssetClassCode.toString(),this.AssetClassName.Text=e.Tables[0][0].AssetClassName.toString(),this.AssetClassStatus.SelectedValue=e.Tables[0][0].StatusID.toString(),this.FAAccounts.SelectedValue=e.Tables[0][0].FAAccountsID.toString(),this.DeprBooks.SelectedValue=e.Tables[0][0].DeprBookID.toString(),this.DeprPosting.SelectedValue=e.Tables[0][0].DeprPosting.toString(),this.TotalYears.Text=e.Tables[0][0].TotalYears.toString(),this.obj.GUID=e.Tables[0][0].GUID.toString())}},{key:"OnSaveAssetClass",value:function(e){var t=this;try{if(this.DisplayMessage="","Save"==e.toString()){if(null==this.AssetClassCode.Text||""==this.AssetClassCode.Text.Trim())return void(this.DisplayMessage=a.a.GetResource("Enter")+" Code");if(this.obj.AssetClassCode=this.AssetClassCode.Text,null==this.AssetClassName.Text||""==this.AssetClassName.Text.Trim())return void(this.DisplayMessage=a.a.GetResource("Enter")+" Name");if(this.obj.AssetClassName=this.AssetClassName.Text,""==this.AssetClassStatus.SelectedValue||null==this.AssetClassStatus.SelectedValue)return void(this.DisplayMessage="Select Status");if(this.obj.StatusID=parseInt(this.AssetClassStatus.SelectedValue),o.e.IsEmpty(this.FAAccounts.SelectedValue)||"0"==this.FAAccounts.SelectedValue)return void(this.DisplayMessage="Select FA Accounts");if(o.e.IsEmpty(this.DeprBooks.SelectedValue)||"0"==this.DeprBooks.SelectedValue)return void(this.DisplayMessage="Select Depriciation Book");if(this.obj.PostingGroupID=o.e.Int(this.FAAccounts.SelectedValue),this.obj.DeprBookID=o.e.Int(this.DeprBooks.SelectedValue),this.obj.DeprTypeID=o.e.Int(this.DeprPosting.SelectedValue),this.obj.TotalYears=o.e.Double(this.TotalYears.Text),this.YearsMandatory&&this.obj.TotalYears<=0)return void(this.DisplayMessage="Enter Total Years");this.obj.SaveAssetClass().subscribe((function(e){t.DisplayMessage=e.Message,t.RetValue=e.RetValue,t.RetValue>0&&(t.AssetClassID=0,t.ClearFields(),null!=t.Parent&&t.Parent.Refresh())}))}else a.a.page.HideDialog()}catch(s){Logger.ErrorLog("AssetClassesViewModel:: OnSaveAssetClass",s)}}},{key:"ClearFields",value:function(){this.AssetClassCode.Text="",this.AssetClassName.Text="",this.AssetClassStatus.SelectedValue="379",this.TotalYears.Text="0"}},{key:"AssetClassID",get:function(){return this._AssetClassID},set:function(e){e!=this._AssetClassID&&(this._AssetClassID=e,this.obj.AssetClassID=this._AssetClassID)}}]),s}(i.b)}}]);