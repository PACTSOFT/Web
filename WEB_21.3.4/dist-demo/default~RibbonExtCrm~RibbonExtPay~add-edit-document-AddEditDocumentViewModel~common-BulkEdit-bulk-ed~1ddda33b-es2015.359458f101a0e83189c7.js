(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{dQvv:function(e,t,n){"use strict";n.r(t),n.d(t,"DocumentNumberViewModel",(function(){return C}));var i=n("Do2H"),s=n("Lp6j"),a=n("eQJW"),r=n("ScVY"),l=n("n56n"),o=n("6z9j"),c=n("MCLT");class C extends r.b{constructor(e,t,n,r=null){if(super(),this.DocNumberFields=[],this.ISTree=!1,this.IsNormal=!1,this.IsFirstCall=!1,this.Prefixdt=null,this.Parent=null,this.objRent=null,this.objparent=null,this.ClearSelectedNodes=!1,this.SelectedNodes=[],"AddEditRenContractViewModel"==e.ClassName)return;this.ISTree=n,this.IsNormal=!n,this.Parent=e,this.Prefixdt=t;let C=s.e.IsType(r,"AddEditDocumentViewModel")?r:null,d=r&&"object"==typeof r&&!Object(c.isUndefined)(r.length)?r:null;for(let o=0;o<t.length;o++)if(parseInt(t[o].CCID.toString())>5e4){if(this.DocNumberFields.find(e=>e.CCID==parseInt(t[o].CCID)))continue;let n=new l.b(0);if(n.CCID=parseInt(t[o].CCID.toString()),n.TypeID=1,n.Label=t[o].Name.toString(),n.DBColumnName=t[o].SysColumnName.toString(),n.Mandatory=!0,n.Row=this.DocNumberFields.length/2,n.Column=this.DocNumberFields.length%2,n.OnPactListBoxValueChanged.Subscribe(this,"onSelectedValueChanged"),n.SetTimeToZero(),(this.Parent.IsPOs||this.Parent.ScreenObject.GridDataColumns.Contains("FieldType"))&&n.CCID==i.a.SessionManager.RegisterCCID?(n.DefaultValue=this.Parent.ScreenObject.RegisterNodeID.toString(),n.SelectedValue=this.Parent.ScreenObject.RegisterNodeID,n.Enable=!1,this.Register=n):(this.Parent.IsPOs||this.Parent.ScreenObject.GridDataColumns.Contains("FieldType"))&&i.a.SessionManager.Preferences.ContainsKey("PosShifts")&&""!=i.a.SessionManager.Preferences.PosShifts.toString()&&parseInt(i.a.SessionManager.Preferences.PosShifts.toString())==n.CCID&&(n.DefaultValue=this.Parent.ScreenObject.ShiftNodeID.toString(),n.SelectedValue=this.Parent.ScreenObject.ShiftNodeID,this.Shift=n),e.ScreenObject.Data.Columns[0].Contains("dependanton")){let t=e.ScreenObject.Data.Tables[0].filter(e=>e.SysColumnName=="dcCCNID"+(n.CCID-5e4));if(t.length>0&&(s.e.StringIsNullOrEmpty(t[0].IsEditable)||(n.IsReadOnly=!Object(a.j)(t[0].IsEditable)),this.Parent.IsPOs&&n.CCID!=i.a.SessionManager.RegisterCCID&&e.ScreenObject.Data.Columns[0].Contains("LocalCCID")&&s.e.String(t[0].LocalCCID)==i.a.SessionManager.RegisterCCID.toString()&&e.ScreenObject.Data.Columns[1].Contains("CCNID"+(n.CCID-5e4))?(n.SelectedValue=parseInt(e.ScreenObject.Data.Tables[1][0]["CCNID"+(n.CCID-5e4)].toString()),n.DefaultValue=n.SelectedValue.toString()):s.e.IsNum(t[0].UserDefaultValue)&&(n.SelectedValue=parseInt(t[0].UserDefaultValue.toString())),s.e.IsNum(t[0].ColumnCCListViewTypeID)&&(n.TypeID=parseInt(t[0].ColumnCCListViewTypeID.toString())),!s.e.StringIsNullOrEmpty(t[0].dependanton)&&"0"!=t[0].dependanton.toString())){let i=null;i=83==parseInt(t[0].dependanton.toString())||parseInt(t[0].dependanton.toString())>5e4&&parseInt(t[0].dependanton)<50050?e.ScreenObject.Data.Tables[0].filter(e=>e.SysColumnName.startsWith("dcCCNID")&&e.ColumnCostCenterID==t[0].dependanton):e.ScreenObject.Data.Tables[0].filter(e=>e.CostCenterColID==t[0].dependanton),null!=i&&i.length>0&&(n.DependantOn=i[0].SysColumnName.toString(),e.ScreenObject.Data.Columns[0].Contains("dependancy")&&!s.e.StringIsNullOrEmpty(t[0].dependancy)&&(n.Dependancy=parseInt(t[0].dependancy.toString())),e.ScreenObject.Data.Columns[0].Contains("filterinuse")&&!s.e.StringIsNullOrEmpty(t[0].filterinuse)&&(n.Dependantinuse=Object(a.j)(t[0].filterinuse.toString())))}n.SelectedValue>0&&(n.IsRendred=!0)}if(0==n.SelectedValue)if(null!=C)if(C.ScreenObject.GridDataColumns.Contains("dcCCNID"+(n.CCID-5e4)))s.e.StringIsNullOrEmpty(C.ScreenObject.GridData[o]["dcCCNID"+(n.CCID-5e4)+"_Key"])||(n.SelectedValue=parseInt(C.ScreenObject.GridData[o]["dcCCNID"+(n.CCID-5e4)+"_Key"].toString()));else{let e=C.ScreenObject._CCFields.find(e=>e instanceof l.b&&e.CCID==n.CCID);e&&(n.SelectedValue=e.SelectedValue)}else null!=d&&(n.SelectedValue=parseInt(d[0]["dcCCNID"+(n.CCID-5e4)].toString()));this.DocNumberFields.push(n),50001==n.CCID?this.Division=n:50002==n.CCID?this.Location=n:this.Parent.ScreenObject.CostCentersValues.ContainsKey(n.CCID.toString())?this.Parent.ScreenObject.CostCentersValues[n.CCID.toString()]="":this.Parent.ScreenObject.CostCentersValues.push(n.CCID.toString(),"")}if(null==this.Division&&i.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==i.a.SessionManager.Preferences.EnableDivisionWise.toString()&&(!this.Parent.ScreenObject.Preferences.ContainsKey("Donotusedivision")||""==this.Parent.ScreenObject.Preferences.Donotusedivision||!Object(a.j)(this.Parent.ScreenObject.Preferences.Donotusedivision))){let t=new l.b(0);if(t.CCID=50001,t.TypeID=1,t.DBColumnName="Name",t.Label=i.a.SessionManager.Preferences.ContainsKey("DivisionName")?i.a.SessionManager.Preferences.DivisionName:"Division",t.Mandatory=!0,t.Row=this.DocNumberFields.length/2,t.Column=this.DocNumberFields.length%2,t.OnPactListBoxValueChanged.Subscribe(this,"onSelectedValueChanged"),t.SetTimeToZero(),e.ScreenObject.Data.Columns[0].Contains("dependanton")){let n=e.ScreenObject.Data.Tables[0].filter(e=>"dcCCNID1"==e.SysColumnName);if(n.length>0&&(s.e.StringIsNullOrEmpty(n[0].IsEditable)||(t.IsReadOnly=!Object(a.j)(n[0].IsEditable)),this.Parent.IsPOs&&e.ScreenObject.Data.Columns[0].Contains("LocalCCID")&&n[0].LocalCCID.toString()==i.a.SessionManager.RegisterCCID.toString()&&e.ScreenObject.Data.Columns[1].Contains("CCNID1")?(t.SelectedValue=parseInt(e.ScreenObject.Data.Tables[1][0].CCNID1.toString()),t.DefaultValue=t.SelectedValue.toString()):!s.e.StringIsNullOrEmpty(n[0].UserDefaultValue)&&isFinite(n[0].UserDefaultValue)&&(t.SelectedValue=parseInt(n[0].UserDefaultValue.toString())),!s.e.StringIsNullOrEmpty(n[0].dependanton)&&"0"!=n[0].dependanton.toString())){let i=null;i=83==parseInt(n[0].dependanton.toString())||parseInt(n[0].dependanton.toString())>5e4&&parseInt(n[0].dependanton.toString())<50050?e.ScreenObject.Data.Tables[0].filter(e=>e.ColumnCostCenterID==n[0].dependanton.toString()):e.ScreenObject.Data.Tables[0].filter(e=>e.CostCenterColID==n[0].dependanton.toString()),null!=i&&i.length>0&&(t.DependantOn=i[0].SysColumnName.toString(),e.ScreenObject.Data.Columns[0].Contains("dependancy")&&!s.e.StringIsNullOrEmpty(n[0].dependancy)&&(t.Dependancy=parseInt(n[0].dependancy.toString())),e.ScreenObject.Data.Columns[0].Contains("filterinuse")&&!s.e.StringIsNullOrEmpty(n[0].filterinuse)&&(t.Dependantinuse=Object(a.j)(n[0].filterinuse.toString())))}}if(0==t.SelectedValue)if(null!=C){let e=C.ScreenObject._CCFields.find(e=>e instanceof l.b&&e.CCID==t.CCID);e&&(t.SelectedValue=e.SelectedValue)}else null!=d&&(t.SelectedValue=parseInt(d[0].dcCCNID1.toString()));this.DocNumberFields.push(t),this.Division=t}if(null==this.Location&&i.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==i.a.SessionManager.Preferences.EnableLocationWise.toString()&&(!this.Parent.ScreenObject.Preferences.ContainsKey("Donotuselocation")||""==this.Parent.ScreenObject.Preferences.Donotuselocation||!Object(a.j)(this.Parent.ScreenObject.Preferences.Donotuselocation))){let t=new l.b(0);if(t.CCID=50002,t.TypeID=1,t.DBColumnName="Name",t.Label=i.a.SessionManager.Preferences.ContainsKey("LocationName")?i.a.SessionManager.Preferences.LocationName:"Location",t.Mandatory=!0,t.Row=this.DocNumberFields.length/2,t.Column=this.DocNumberFields.length%2,t.OnPactListBoxValueChanged.Subscribe(this,"onSelectedValueChanged"),t.SetTimeToZero(),e.ScreenObject.Data.Columns[0].Contains("dependanton")){let n=e.ScreenObject.Data.Tables[0].filter(e=>"dcCCNID2"==e.SysColumnName);if(n.length>0&&(s.e.StringIsNullOrEmpty(n[0].IsEditable)||(t.IsReadOnly=!Object(a.j)(n[0].IsEditable)),this.Parent.IsPOs&&e.ScreenObject.Data.Columns[0].Contains("LocalCCID")&&n[0].LocalCCID.toString()==i.a.SessionManager.RegisterCCID.toString()&&e.ScreenObject.Data.Columns[1].Contains("CCNID2")?(t.SelectedValue=parseInt(e.ScreenObject.Data.Tables[1][0].CCNID2.toString()),t.DefaultValue=t.SelectedValue.toString()):!s.e.StringIsNullOrEmpty(n[0].UserDefaultValue)&&isFinite(n[0].UserDefaultValue)&&(t.SelectedValue=parseInt(n[0].UserDefaultValue.toString())),!s.e.StringIsNullOrEmpty(n[0].dependanton)&&"0"!=n[0].dependanton.toString())){let i=null;i=83==parseInt(n[0].dependanton.toString())||parseInt(n[0].dependanton.toString())>5e4&&parseInt(n[0].dependanton.toString())<50050?e.ScreenObject.Data.Tables[0].filter(e=>e.ColumnCostCenterID==n[0].dependanton):e.ScreenObject.Data.Tables[0].filter(e=>e.CostCenterColID==n[0].dependanton),null!=i&&i.length>0&&(t.DependantOn=i[0].SysColumnName.toString(),e.ScreenObject.Data.Columns[0].Contains("dependancy")&&!s.e.StringIsNullOrEmpty(n[0].dependancy)&&(t.Dependancy=parseInt(n[0].dependancy.toString())),e.ScreenObject.Data.Columns[0].Contains("filterinuse")&&!s.e.StringIsNullOrEmpty(n[0].filterinuse)&&(t.Dependantinuse=Object(a.j)(n[0].filterinuse.toString())))}}if(0==t.SelectedValue)if(null!=C){let e=C.ScreenObject._CCFields.find(e=>e instanceof l.b&&e.CCID==t.CCID);e&&(t.SelectedValue=e.SelectedValue)}else null!=d&&(t.SelectedValue=parseInt(d[0].dcCCNID2.toString()));this.DocNumberFields.push(t),this.Location=t}if(this.ISTree){if(this.ISTree){this.tree=[];let t=new o.a;t.TreeViewModel_5(3,this,0,"",""),t.HeaderVisiblity=!1,this.tree.push(t);let n=s.e.IntTryParse(i.a.SessionManager.Preferences["Maintain Dimensionwise stock"]);if(i.a.SessionManager.Preferences.ContainsKey("Maintain Dimensionwise stock")&&n>0&&!this.DocNumberFields.find(e=>e instanceof l.b&&e.CCID==n)){let t=new l.b(0);t.CCID=n,t.TypeID=1,t.DBColumnName="Name";let i=this.Parent.ScreenObject._CCFields.find(e=>e instanceof l.b&&e.CCID==n);if(i)t.Label=i.Label;else{let e=this.Parent.ScreenObject.ColumnSource.find(e=>e.CostCenterID==n);t.Label=e?e.Header:this.Parent.ScreenObject.GetCostcenterName(n)}if(t.Mandatory=!0,t.Row=this.DocNumberFields.length/2,t.Column=this.DocNumberFields.length%2,e.ScreenObject.Data.Columns[0].Contains("dependanton")){let n=e.ScreenObject.Data.Tables[0].filter(e=>"dcCCNID2"==e.SysColumnName);if(n.length>0&&!s.e.StringIsNullOrEmpty(n[0].dependanton)&&"0"!=n[0].dependanton.toString()){let i=null;i=83==parseInt(n[0].dependanton.toString())||parseInt(n[0].dependanton.toString())>5e4&&parseInt(n[0].dependanton.toString())<50050?e.ScreenObject.Data.Tables[0].filter(e=>e.ColumnCostCenterID==n[0].dependanton):e.ScreenObject.Data.Tables[0].filter(e=>e.CostCenterColID==n[0].dependanton),null!=i&&i.length>0&&(t.DependantOn=i[0].SysColumnName.toString(),e.ScreenObject.Data.Columns[0].Contains("dependancy")&&!s.e.StringIsNullOrEmpty(n[0].dependancy)&&(t.Dependancy=parseInt(n[0].dependancy.toString())),e.ScreenObject.Data.Columns[0].Contains("filterinuse")&&!s.e.StringIsNullOrEmpty(n[0].filterinuse)&&(t.Dependantinuse=Object(a.j)(n[0].filterinuse.toString())))}}this.DocNumberFields.push(t),this.Parent.ScreenObject.CostCentersValues.ContainsKey(t.CCID.toString())?this.Parent.ScreenObject.CostCentersValues[t.CCID.toString()]="":this.Parent.ScreenObject.CostCentersValues.push(t.CCID.toString(),"")}}}else this.OnSave("Save");this.SetFocus()}InitVariables(e){this.Parent=e,this.Prefixdt=e.ScreenObject.Data.Tables[8],this.Division=this.DocNumberFields.find(e=>50001==e.CCID),this.Location=this.DocNumberFields.find(e=>50002==e.CCID),this.Parent.IsPOs&&(i.a.SessionManager.Preferences.ContainsKey("PosShifts")&&""!=i.a.SessionManager.Preferences.PosShifts.toString()&&parseInt(i.a.SessionManager.Preferences.PosShifts.toString())>5e4&&(this.Shift=this.DocNumberFields.find(e=>e.CCID==parseInt(i.a.SessionManager.Preferences.PosShifts.toString()))),this.Register=this.DocNumberFields.find(e=>e.CCID==i.a.SessionManager.RegisterCCID))}CommandController(e){}SetFocus(){this.DocNumberFields.length>0&&(this.DocNumberFields[0].SetFocus=!0)}onSelectedValueChanged(e){let t=e,n="dcccnid"+(t.CCID-5e4);this.DocNumberFields.filter(e=>null!=e.DependantOn&&e.DependantOn.toLowerCase()==n).forEach(t=>{if(t instanceof l.b){let n="";t.CCID>5e4?t.Dependantinuse?(n="(ccnid"+(e.CCID-5e4)+"="+e.SelectedValue.toString(),1==t.Dependancy&&(n+=" OR ccnid"+(e.CCID-5e4)+"=1 "),n+=")"):n=5==t.Dependancy?"  JOIN "+this.Parent.ScreenObject.GetTableName(t.CCID)+" CMJ with(nolock) ON a.lft between  CMJ.lft and CMJ.rgt JOIN COM_CostCenterCostCenterMap CM on CM.CostCenterID="+t.CCID+" and CM.ParentCostCenterID="+e.CCID+" and CM.ParentNodeID="+e.SelectedValue.toString()+" and CMJ.NodeID=CM.NodeID ":"  JOIN "+this.Parent.ScreenObject.GetTableName(t.CCID)+" CMJ with(nolock) ON a.lft between  CMJ.lft and CMJ.rgt JOIN COM_CostCenterCostCenterMap CM on CM.CostCenterID="+e.CCID+" and CM.ParentCostCenterID="+t.CCID+" and CM.NodeID="+e.SelectedValue.toString()+" and CMJ.NodeID=CM.ParentNodeID ":65==t.CCID&&(n="(FeatureID="+e.CCID+" and  FeaturePK="+e.SelectedValue.toString()+")"),t.CustomWhere=n}});let i=this.Parent.ScreenObject._CCFields.find(e=>e instanceof l.b&&e.CCID==t.CCID);if(i&&this.Parent.ScreenObject.Data.Tables[0].filter(e=>e.SysColumnName.startsWith("dcCCNID")&&e.LocalReference==i.DBColumnID).length>0){let e=this.Parent.ScreenObject.GetLinkRefDataSet(i.DBColumnID,this.Parent.DocumentID,t.SelectedValue,this.Parent.DocumentDate,i.DBColumnName,t.CCID,null);if(null!=e&&e.Tables.length>0&&e.Tables[0].length>0)for(let t=0;t<e.Columns[0].length;t++)if(e.Columns[0][t].toUpperCase().Contains("CCNID")&&!s.e.StringIsNullOrEmpty(e.Tables[0][0][e.Columns[0][t]])){let n=s.e.IntTryParse(e.Columns[0][t].toUpperCase().replace("DCCCNID",""));if(n>0){n+=5e4;let i=this.DocNumberFields.find(e=>e.CCID==n);i&&(i.SelectedValue=parseInt(e.Tables[0][0][e.Columns[0][t]].toString()))}}}}DocumentNumberViewModel_1(e){let t;if(this.objRent=e,i.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"true"==i.a.SessionManager.Preferences.EnableLocationWise.toString().toLowerCase()&&i.a.SessionManager.Preferences.ContainsKey("LW Contracts")&&"true"==i.a.SessionManager.Preferences["LW Contracts"].toString().toLowerCase()&&(t=new l.b(0),t.CCID=50002,t.TypeID=1,t.DBColumnName="Name",t.Label=i.a.SessionManager.Preferences.ContainsKey("LocationName")?i.a.SessionManager.Preferences.LocationName:"Location",t.Mandatory=!0,t.Row=this.DocNumberFields.length/2,t.Column=this.DocNumberFields.length%2,this.DocNumberFields.push(t),this.Location=t),i.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"true"==i.a.SessionManager.Preferences.EnableDivisionWise.toString().toLowerCase()&&i.a.SessionManager.Preferences.ContainsKey("DW Contracts")&&"true"==i.a.SessionManager.Preferences["DW Contracts"].toString().toLowerCase()&&(t=new l.b(0),t.CCID=50001,t.TypeID=1,t.DBColumnName="Name",t.Label=i.a.SessionManager.Preferences.ContainsKey("DivisionName")?i.a.SessionManager.Preferences.DivisionName:"Division",t.Mandatory=!0,t.Row=this.DocNumberFields.length/2,t.Column=this.DocNumberFields.length%2,this.DocNumberFields.push(t),this.Division=t),e.DimWiseFields>5e4){let n=e.ScreenObject.GetCustomField("CCNID"+(e.DimWiseFields-5e4).toString());t=new l.b(0),t.CCID=e.DimWiseFields,t.TypeID=1,t.DBColumnName="Name",t.Label=n?n.Label:"view",t.Mandatory=!0,t.Row=this.DocNumberFields.length/2,t.Column=this.DocNumberFields.length%2,this.DocNumberFields.push(t),this.Register=t}this.IsNormal=!0,this.SetFocus()}DocumentNumberViewModel_2(e){this.objparent=e,this.IsNormal=!0}static GetTrimString(e,t){return null!=e&&t>=0&&e.length>t?e.substr(0,t):e}OnSave(e){var t;if("Save"==e.toString()||"ReSave"==e.toString()){if(null!=this.Parent){for(let n=0;n<this.DocNumberFields.length;n++){let e=this.DocNumberFields[n],t=e.GetValidationError("SelectedValue");if(!s.e.StringIsNullOrEmpty(t))return this.DisplayMessage=t,void(this.MessageVisibility=!0);if(!s.e.StringIsNullOrEmpty(e.DependantOn)&&e.DependantOn.toLowerCase().startsWith("dcccnid")){let t=this.DocNumberFields.find(t=>t.CCID==parseInt(e.DependantOn.toLowerCase().replace("dcccnid",""))+5e4);if(!this.Parent.ScreenObject.IsValidSelection(t,e))return this.DisplayMessage=i.a.GetResource("Invalid")+" "+e.Label,void(this.MessageVisibility=!0)}}this.Parent.ScreenObject.DocPrefix.Prefixes.Clear();let e="",t=0;for(let n=0;n<this.Prefixdt.length;n++)if(0==n&&(t=parseInt(this.Prefixdt[n].SeriesNo.toString())),s.e.StringIsNullOrEmpty(this.Prefixdt[n].SeriesNo)||parseInt(this.Prefixdt[n].SeriesNo.toString())==t||(null==this.Parent.ScreenObject.DocPrefix||this.Parent.ScreenObject.DocPrefix.Prefixes.ContainsKey(e)||this.Parent.ScreenObject.DocPrefix.Prefixes.push(e,Object(a.j)(this.Prefixdt[n-1].Isdefault.toString())),t=parseInt(this.Prefixdt[n].SeriesNo.toString()),e=""),51==parseInt(this.Prefixdt[n].CCID.toString())||52==parseInt(this.Prefixdt[n].CCID.toString())||53==parseInt(this.Prefixdt[n].CCID.toString()))e+="'"+this.Prefixdt[n].Length.toString()+"'"+this.Prefixdt[n].Delimiter.toString();else if(54==parseInt(this.Prefixdt[n].CCID.toString()))e+=this.Prefixdt[n].Length.toString()+this.Prefixdt[n].Delimiter.toString();else{let t=this.DocNumberFields.find(e=>e.CCID==parseInt(this.Prefixdt[n].CCID.toString()));t&&(e+=C.GetTrimString(this.Parent.ScreenObject.GetDocNumberString(this.Prefixdt[n].SysColumnName.toString(),t.CCID,t.SelectedValue),parseInt(this.Prefixdt[n].Length.toString()))+this.Prefixdt[n].Delimiter.toString(),this.Parent.ScreenObject.CostCentersValues[t.CCID.toString()]=t.SelectedValue.toString())}if(this.Prefixdt.length>0&&null!=this.Parent.ScreenObject.DocPrefix&&!this.Parent.ScreenObject.DocPrefix.Prefixes.ContainsKey(e)&&this.Parent.ScreenObject.DocPrefix.Prefixes.push(e,Object(a.j)(this.Prefixdt[this.Prefixdt.length-1].Isdefault.toString())),this.Parent.DialogResult=!0,null!=this.Division&&i.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==i.a.SessionManager.Preferences.EnableDivisionWise.toString()?(this.Parent.ScreenObject.DivisionID=this.Division.SelectedValue,this.Parent.ScreenObject.DivisionName=this.Division.Text):null!=this.Division&&(this.Parent.ScreenObject.CostCentersValues.ContainsKey("50001")?this.Parent.ScreenObject.CostCentersValues[50001]=this.Division.SelectedValue.toString():this.Parent.ScreenObject.CostCentersValues.push("50001",this.Division.SelectedValue.toString())),null!=this.Location&&i.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==i.a.SessionManager.Preferences.EnableLocationWise.toString()?(this.Parent.ScreenObject.LocationID=this.Location.SelectedValue,this.Parent.ScreenObject.LocationName=this.Location.Text):null!=this.Location&&(this.Parent.ScreenObject.CostCentersValues.ContainsKey("50002")?this.Parent.ScreenObject.CostCentersValues[50002]=this.Location.SelectedValue.toString():this.Parent.ScreenObject.CostCentersValues.push("50002",this.Location.SelectedValue.toString())),this.Parent.IsPOs&&null!=this.Shift&&this.Shift.SelectedValue!=this.Parent.ScreenObject.ShiftNodeID&&(this.Parent.ScreenObject.ShiftNodeID=this.Shift.SelectedValue),this.ISTree){this.DisplayMessage="Loading data.Please wait...",this.MessageVisibility=!0;let e=s.e.IntTryParse(i.a.SessionManager.Preferences["Maintain Dimensionwise stock"]);if(i.a.SessionManager.Preferences.ContainsKey("Maintain Dimensionwise stock")&&e>0){let t=this.DocNumberFields.find(t=>t instanceof l.b&&t.CCID==e);if(t){this.Parent.ScreenObject.CostCentersValues[e.toString()]=t.SelectedValue.toString();let n=this.Parent.ScreenObject._CCFields.find(t=>t instanceof l.b&&t.CCID==e);n&&(n.SelectedValue=t.SelectedValue)}}if(null!=this.Location){let e=this.Parent.ScreenObject._CCFields.find(e=>e instanceof l.b&&50002==e.CCID);e&&(e.SelectedValue=this.Location.SelectedValue)}if(null!=this.Division){let e=this.Parent.ScreenObject._CCFields.find(e=>e instanceof l.b&&50001==e.CCID);e&&(e.SelectedValue=this.Division.SelectedValue)}if(this.tree&&null!=this.tree[0].SelectedNodes&&this.tree[0].SelectedNodes.length>0&&!this.tree[0].IsDynamicTree){let t,n=0,i=0;for(;i<this.Parent.ScreenObject.GridData.length;i++)if(s.e.StringIsNullOrEmpty(this.Parent.ScreenObject.GridData[i].ProductID_Key)){n=i;break}i=0,this.tree[0].SelectedNodes.forEach(s=>{if(!s.IsGroup){if(t=this.Parent.ScreenObject.GridDataObj.NewRow(),this.Parent.ScreenObject.GridDataObj.insertRowAt(t,n+i),e>5e4&&this.Parent.ScreenObject.GridDataColumns.Contains("dcCCNID"+(e-5e4).toString())){let n=this.DocNumberFields.find(t=>t instanceof l.b&&t.CCID==e);n&&(t["dcCCNID"+(e-5e4).toString()+"_Key"]=n.SelectedValue)}null!=this.Location&&this.Parent.ScreenObject.GridDataColumns.Contains("dcCCNID2")&&(t.dcCCNID2_Key=this.Location.SelectedValue),null!=this.Division&&this.Parent.ScreenObject.GridDataColumns.Contains("dcCCNID1")&&(t.dcCCNID1_Key=this.Division.SelectedValue),this.Parent.IsInventoryVoucher=!0,t.ProductID_Key=s.Id,this.Parent.AddProductData(t,!1,!0),this.Parent.CalculateTotals(t,!1),i++}}),this.Parent.ScreenObject.UpdateSequence(),this.Parent.RefreshGrid=!this.Parent.RefreshGrid}}this.Parent.ScreenObject.DocPrefix.ComboBox.IsRendred=!1,this.Parent.ScreenObject.FillDocumentPrefix(!1)}else if(null!=this.objRent){for(let e=0;e<this.DocNumberFields.length;e++){let t=this.DocNumberFields[e].GetValidationError("SelectedValue");if(!s.e.StringIsNullOrEmpty(t))return this.DisplayMessage=t,void(this.MessageVisibility=!0)}null!=this.Location&&null!=this.Location&&this.objRent.ChangeLocation(this.Location.SelectedValue),null!=this.Division&&null!=this.Division&&(this.objRent.DivisionContract.SelectedValue=this.Division.SelectedValue),null!=this.Register&&null!=this.Register&&(this.objRent.DimWiseFieldsID=this.Register.SelectedValue)}else null!=this.objparent&&this.DocNumberFields.forEach(e=>{let t=e.GetValidationError("SelectedValue");if(!s.e.IsEmpty(t))return this.DisplayMessage=t,void(this.MessageVisibility=!0)});"Save"==e.toString()&&(i.a.page.HideDialog(),this.DialogCallBack(!this.IsFirstCall))}else"Cancel"==e.toString()&&(null!=this.objparent&&this.DocNumberFields.forEach(e=>{let t=e.GetValidationError("SelectedValue");if(!s.e.IsEmpty(t))return this.DisplayMessage=t,void(this.MessageVisibility=!0)}),null!=this.Parent&&(this.Parent.DialogResult=!1),null!=this.objRent&&(this.objRent.DialogResult=!1),i.a.page.HideDialog(),null!=this.Parent&&this.Parent.ToLinkParent?(this.Parent.ToLinkParent.GenerateLinkDocument_Sub1(this.Parent),this.Parent.ToLinkParent=null):this.IsFirstCall&&(null===(t=i.a.page.ActiveTab.params)||void 0===t?void 0:t.obj)==this.Parent&&i.a.page.removeActiveTab())}}}}]);