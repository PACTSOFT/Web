(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{BUEH:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s("3Pt+"),i=s("fXoL");function o(e,t){1&e&&i.Ub(0,"app-pact-tree",20),2&e&&i.tc("obj",t.$implicit)}function a(e,t){if(1&e&&(i.Zb(0,"div",18),i.Wc(1,"\n                    "),i.Uc(2,o,1,1,"app-pact-tree",19),i.Wc(3,"\n                "),i.Yb()),2&e){const e=i.lc();i.Db(2),i.tc("ngForOf",e.obj.tree)}}function l(e,t){if(1&e){const e=i.ac();i.Zb(0,"div"),i.Wc(1,"\n                "),i.Zb(2,"div",4),i.Wc(3,"\n                    "),i.Zb(4,"div",21),i.Wc(5,"\n                        "),i.Vb(6,6),i.Wc(7,"\n                    "),i.Yb(),i.Wc(8,"\n                "),i.Yb(),i.Wc(9,"\n                "),i.Zb(10,"div",4),i.Wc(11,"\n                    "),i.Zb(12,"div",21),i.Wc(13,"\n                        "),i.Vb(14,6),i.Wc(15,"\n                    "),i.Yb(),i.Wc(16,"\n                "),i.Yb(),i.Wc(17,"\n                "),i.Zb(18,"div",22),i.Wc(19,"\n\n                    "),i.Zb(20,"div",23),i.Wc(21,"\n                        "),i.Zb(22,"input",24),i.hc("change",(function(){i.Ic(e);const t=i.lc();return t.obj.rBtnPostAttDocs=!t.obj.rBtnPostAttDocs})),i.Yb(),i.Wc(23,"\n                        "),i.Zb(24,"label",25),i.hc("click",(function(){return i.Ic(e),i.lc().obj.rBtnPostAttDocs=!0})),i.Wc(25),i.mc(26,"translate"),i.Yb(),i.Wc(27,"\n                    "),i.Yb(),i.Wc(28,"\n                    "),i.Zb(29,"div",23),i.Wc(30,"\n                        "),i.Zb(31,"input",24),i.hc("change",(function(){i.Ic(e);const t=i.lc();return t.obj.rBtnPostTimeSheetDocs=!t.obj.rBtnPostTimeSheetDocs})),i.Yb(),i.Wc(32,"\n                        "),i.Zb(33,"label",25),i.hc("click",(function(){return i.Ic(e),i.lc().obj.rBtnPostTimeSheetDocs=!0})),i.Wc(34),i.mc(35,"translate"),i.Yb(),i.Wc(36,"\n                    "),i.Yb(),i.Wc(37,"\n                "),i.Yb(),i.Wc(38,"\n\n              \n              \n\n            "),i.Yb()}if(2&e){const e=i.lc();i.Db(6),i.tc("obj",e.obj.FromDatePicker)("group",e.form),i.Db(8),i.tc("obj",e.obj.ToDatePicker)("group",e.form),i.Db(8),i.tc("checked",e.obj.rBtnPostAttDocs)("value",e.obj.rBtnPostAttDocs),i.Db(3),i.Xc(i.nc(26,10,"Post Attendance Documents")),i.Db(6),i.tc("checked",e.obj.rBtnPostTimeSheetDocs)("value",e.obj.rBtnPostTimeSheetDocs),i.Db(3),i.Xc(i.nc(35,12,"Post Time Sheet Documents"))}}function r(e,t){if(1&e&&(i.Zb(0,"div",4),i.Wc(1,"\n                "),i.Zb(2,"div",21),i.Wc(3,"\n                    "),i.Vb(4,6),i.Wc(5,"\n                "),i.Yb(),i.Wc(6,"\n            "),i.Yb()),2&e){const e=i.lc();i.Db(4),i.tc("obj",e.obj.PaymentModes)("group",e.form)}}function c(e,t){if(1&e&&(i.Zb(0,"div",4),i.Wc(1,"\n                "),i.Zb(2,"div",21),i.Wc(3,"\n                    "),i.Vb(4,6),i.Wc(5,"\n                "),i.Yb(),i.Wc(6,"\n            "),i.Yb()),2&e){const e=i.lc();i.Db(4),i.tc("obj",e.obj.StatusModes)("group",e.form)}}function h(e,t){if(1&e&&(i.Xb(0),i.Wc(1,"\n                            "),i.Vb(2,26),i.Wc(3,"\n                        "),i.Wb()),2&e){const e=t.$implicit,s=i.lc();i.Db(2),i.tc("obj",e)("group",s.form)}}let d=(()=>{class e{constructor(){this.form=new n.j({})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Nb({type:e,selectors:[["app-emp-tree-filter"]],inputs:{obj:"obj"},decls:56,vars:14,consts:[[2,"margin","auto","padding","10px","max-width","1100px"],[1,"page-subheader"],[1,"page-subtitle",2,"padding-top","8px"],[1,"rptfilter",2,"display","flex"],[1,"form-group"],[1,"row","form-row","PACTControl",2,"margin-top","4px","padding-left","8px !important"],["FieldDirective","",3,"obj","group"],[1,"row","form-row"],["class","form-group PACTControl","style","width:450px;",4,"ngIf"],[4,"ngIf"],["class","form-group",4,"ngIf"],[1,"RptPreference","row","form-row"],[2,"overflow","auto","max-height","550px","width","320px"],[4,"ngFor","ngForOf"],[1,"btnMetroDiv","secondary-btn-group",2,"padding-top","8px","height","42px"],[1,"primary-btn-wicon",3,"click"],[1,"secondary-btn",3,"click"],[1,"fa-light","fa-rectangle-xmark"],[1,"form-group","PACTControl",2,"width","450px"],[3,"obj",4,"ngFor","ngForOf"],[3,"obj"],[1,"row","form-row","PACTControl"],[1,"form-group","PACTControl"],[1,"form-group","divRadio"],["type","radio","name","secondary-btn-wiconTypes",3,"checked","value","change"],[1,"input_cntrl_label",3,"click"],["ScreenDirective","",3,"obj","group"]],template:function(e,t){1&e&&(i.Zb(0,"div",0),i.Wc(1,"\n    "),i.Zb(2,"div",1),i.Wc(3,"\n        "),i.Zb(4,"span",2),i.Wc(5),i.Yb(),i.Wc(6,"\n      \n    "),i.Yb(),i.Wc(7,"\n    "),i.Zb(8,"div",3),i.Wc(9,"\n        "),i.Zb(10,"div",4),i.Wc(11,"\n            "),i.Zb(12,"div",5),i.Wc(13,"\n                "),i.Vb(14,6),i.Wc(15,"\n            "),i.Yb(),i.Wc(16,"\n            "),i.Zb(17,"div",7),i.Wc(18,"\n                "),i.Uc(19,a,4,1,"div",8),i.Wc(20,"\n            "),i.Yb(),i.Wc(21,"\n        "),i.Yb(),i.Wc(22,"\n\n        "),i.Zb(23,"div"),i.Wc(24,"\n            "),i.Uc(25,l,39,14,"div",9),i.Wc(26,"\n            "),i.Uc(27,r,7,2,"div",10),i.Wc(28,"\n            "),i.Uc(29,c,7,2,"div",10),i.Wc(30,"\n            "),i.Zb(31,"div",4),i.Wc(32,"\n                "),i.Zb(33,"div",11),i.Wc(34,"\n                    "),i.Zb(35,"div",12),i.Wc(36,"\n                        "),i.Uc(37,h,4,2,"ng-container",13),i.Wc(38,"\n                    "),i.Yb(),i.Wc(39,"\n\n                "),i.Yb(),i.Wc(40,"\n            "),i.Yb(),i.Wc(41,"\n        "),i.Yb(),i.Wc(42,"\n    "),i.Yb(),i.Wc(43,"\n    "),i.Zb(44,"div",14),i.Wc(45,"\n        "),i.Zb(46,"button",15),i.hc("click",(function(){return t.obj.Button_Click("Ok")})),i.Wc(47),i.mc(48,"translate"),i.Yb(),i.Wc(49,"\n        "),i.Zb(50,"button",16),i.hc("click",(function(){return t.obj.Button_Click("Cancel")})),i.Ub(51,"i",17),i.Wc(52),i.mc(53,"translate"),i.Yb(),i.Wc(54,"\n    "),i.Yb(),i.Wc(55,"\n"),i.Yb()),2&e&&(i.Db(5),i.Yc("\n            ",t.obj.Title,"\n        "),i.Db(9),i.tc("obj",t.obj.CostCenters)("group",t.form),i.Db(5),i.tc("ngIf",t.obj.tree.length>0),i.Db(6),i.tc("ngIf",t.obj.PostAttTimeSheetFiltersVisibility),i.Db(2),i.tc("ngIf",t.obj.PaymentModeFiltersVisibility),i.Db(2),i.tc("ngIf",t.obj.StatusModeFiltersVisibility),i.Db(8),i.tc("ngForOf",t.obj.CostCenterFilters),i.Db(10),i.Xc(i.nc(48,10,"Com_OK")),i.Db(5),i.Xc(i.nc(53,12,"Cancel")))},encapsulation:2}),e})()},s7Y5:function(e,t,s){"use strict";s.d(t,"a",(function(){return d}));var n=s("Do2H"),i=s("Lp6j"),o=s("JIg3"),a=s("0/4Q"),l=s("8iaB"),r=s("/G+I"),c=s("6z9j"),h=s("4HhE");class d extends l.a{constructor(e,t,s){super(),this.ProfileID=0,this.Filter=0,this.Mode="",this.DeletedIDs=new Array,this.oChart={},this.DisplayName="",this.FromDatePicker=new o.a(0),this.ToDatePicker=new o.a(0),this.IsEdit=!1,this.IsEditFilter=!1,this.GenerateVisibility=!0,this.ColumnSpan="",this.PriceChartAtProduct=!1,this.PostAttTimeSheetFiltersVisibility=!1,this.rBtnPostAttDocs=!1,this.rBtnPostTimeSheetDocs=!1,this.Title="",this.PaymentModeFiltersVisibility=!1,this.StatusModeFiltersVisibility=!1,this.IsCompleted=!1,this.ProfileID=t,this.Filter=s,this.Mode=e,this.SetTitle(),this.MessageVisibility=!1,this.DisplayMessage="",this.tree=[],this.CostCenters=new a.e(0),this.CostCenters.Label=n.a.GetResource("SelectCostCenter"),this.CostCenters.LblWidth="140",this.CostCenterFilters=[],this.CostCenters.SelectionChangedCommand.Subscribe(this,"OnCostCenterChange"),this.FromDatePicker.Label="From Date",this.ToDatePicker.Label="To Date",10==this.Filter?(this.PostAttTimeSheetFiltersVisibility=!0,this.FromDatePicker.Date=this.ToDatePicker.Date=new Date,this.rBtnPostAttDocs=!0):this.PostAttTimeSheetFiltersVisibility=!1,this.PaymentModeFiltersVisibility=!1,this.InitControls()}InitControls(){let e=new Array;e.push(50051);let t=n.a.empService.GetQueryData(0,"ETF001","","","");if(null!=t&&t.Tables[0].length>0)for(let n=0;n<t.Tables[0].length;n++)e.push(parseInt(t.Tables[0][n].CCIDs.toString()));this.CostCenters.Items.length>0&&this.CostCenters.Items.Clear();let s=n.a.inventory.GetTaxChart(0,this.ProfileID,"");for(let n=0;n<s.Tables[0].length;n++)e.Contains(parseInt(s.Tables[0][n].ID))&&this.CostCenters.Items.push(a.d.ComboBoxItems_2(s.Tables[0][n].NAME.toString(),s.Tables[0][n].ID.toString()));1==this.Filter?(this.CostCenters.SelectedValue=n.a.SessionManager.Preferences.MonthlyPayrollFilter.toString(),this.CostCenters.Enable=!1):2==this.Filter?(this.CostCenters.SelectedValue=n.a.SessionManager.Preferences.PostPayrollFilter.toString(),this.CostCenters.Enable=!1,n.a.SessionManager.Preferences.ContainsKey("ShowPaymentModeselectionWhilePayrollProcessing")&&"True"==n.a.SessionManager.Preferences.ShowPaymentModeselectionWhilePayrollProcessing&&(this.PaymentModeFiltersVisibility=!0,this.PaymentModes=new a.e(0),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Default","Default")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Cash","Cash")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Cheque","Cheque")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Bank Transfer","Bank Transfer")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Demand Draft","Demand Draft")),this.PaymentModes.SelectedValue="Default",this.PaymentModes.Label="Payment Mode"),this.StatusModeFiltersVisibility=!0,this.StatusModes=new a.e(0),this.StatusModes.Items.push(a.d.ComboBoxItems_2("All","All")),this.StatusModes.Items.push(a.d.ComboBoxItems_2("Processed","Processed")),this.StatusModes.Items.push(a.d.ComboBoxItems_2("UnProcessed","UnProcessed")),this.StatusModes.SelectedValue="All",this.StatusModes.Label="Status"):3==this.Filter?(this.CostCenters.SelectedValue=n.a.SessionManager.Preferences.ConsolidatedPayrollFilter.toString(),this.CostCenters.Enable=!1,n.a.SessionManager.Preferences.ContainsKey("ShowPaymentModeselectionWhilePayrollProcessing")&&"True"==n.a.SessionManager.Preferences.ShowPaymentModeselectionWhilePayrollProcessing&&(this.PaymentModeFiltersVisibility=!0,this.PaymentModes=new a.e(0),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Default","Default")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Cash","Cash")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Cheque","Cheque")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Bank Transfer","Bank Transfer")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Demand Draft","Demand Draft")),this.PaymentModes.SelectedValue="Default",this.PaymentModes.Label="Payment Mode"),this.StatusModeFiltersVisibility=!0,this.StatusModes=new a.e(0),this.StatusModes.Items.push(a.d.ComboBoxItems_2("All","All")),this.StatusModes.Items.push(a.d.ComboBoxItems_2("Processed","Processed")),this.StatusModes.Items.push(a.d.ComboBoxItems_2("UnProcessed","UnProcessed")),this.StatusModes.SelectedValue="All",this.StatusModes.Label="Status"):4==this.Filter?(this.CostCenters.SelectedValue=n.a.SessionManager.Preferences.PayslipFilter.toString(),this.PaymentModeFiltersVisibility=!0,this.PaymentModes=new a.e(0),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("All","All")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Cash","Cash")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Cheque","Cheque")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Bank Transfer","Bank Transfer")),this.PaymentModes.Items.push(a.d.ComboBoxItems_2("Demand Draft","Demand Draft")),this.PaymentModes.SelectedValue="All",this.PaymentModes.Label="Payment Mode"):5==this.Filter?(this.CostCenters.SelectedValue=n.a.SessionManager.Preferences.DailyAttendanceFilter.toString(),this.CostCenters.Enable=!1):6==this.Filter?(this.CostCenters.SelectedValue="50053",this.CostCenters.Enable=!0,this.btnOK_Click()):0==this.Filter?(this.CostCenters.Enable=!1,this.IsCompleted=!0):10==this.Filter?(this.CostCenters.SelectedValue="50051",this.CostCenters.Enable=!0,this.btnOK_Click()):11==this.Filter?(this.CostCenters.SelectedValue="50051",this.CostCenters.Enable=!0):(this.CostCenters.SelectedValue="50051",this.CostCenters.Enable=!0,this.btnOK_Click()),this.OnCostCenterChange(null)}SetTitle(){this.ScreenName=n.a.GetResource("EmployeeFilter"),this.Title=this.ScreenName,this.DisplayName=this.ScreenName}Button_Click(e){if("Ok"==e){if(10==this.Filter){if(this.FromDatePicker.Date.Date>this.ToDatePicker.Date.Date)return this.DisplayMessage="From Date should be less than or equal to To Date",void(this.MessageVisibility=!0);if(!this.rBtnPostAttDocs&&!this.rBtnPostTimeSheetDocs)return this.DisplayMessage="Select any document type to post.",void(this.MessageVisibility=!0)}this.btnOK_Click()}else"Cancel"==e&&this.btnCancel_Click()}btnCancel_Click(){this.IsCompleted=!1,n.a.page.HideDialog()}btnOK_Click(){this.IsCompleted=!0,n.a.page.HideDialog()}LoadEditData(){let e=1,t="",s="",n="";this.CostCenterFilters.forEach(o=>{if(o.CostCenterID>5e4&&(e=2,t="NodeID",s="T.CCNID"+(o.CostCenterID-5e4)),o.SelectedNodes.length>0){if(1==o.SelectedNodes.length)n+=" AND ",n+=s+"="+o.SelectedNodes[0].Id;else if(null==o.SelectedNodes.find(t=>t.Id==e&&1==t.IsGroup))if(n+=" AND ",r.IPrefetchFilter.IsGroupTree(o)){let e="";for(let t=0;t<o.SelectedNodes.length;t++)null!=o.SelectedNodes[t].Parent&&o.SelectedNodes[t].Parent.IsSelected||(e.length>0&&(e+=","),e+=o.SelectedNodes[t].Id);0==e.length&&(e+=-12912),n+=s+" IN ",n+=" (select T."+t+" GTID from ",n+=i.e.GetTagTableName(o.CostCenterID)+" T with(nolock),",n+=i.e.GetTagTableName(o.CostCenterID)+" GTP with(nolock) where T.lft BETWEEN GTP.lft AND GTP.rgt AND GTP."+t+" IN ",n+=e.toString()+")  group by T."+t+")"}else{n+=s+" IN (";for(let e=0;e<o.SelectedNodes.length;e++)e>0&&(n+=","),n+=o.SelectedNodes[e].Id;n+=")"}}else o.DeleteButtonVisibility||(n+=" AND ",n+=s+"=-12912")})}OnCostCenterChange(e){if(!i.e.IsEmpty(this.CostCenters.SelectedValue)){let e=this.CostCenters.Items.find(e=>e.Value==this.CostCenters.SelectedValue);if(null!=e&&(this.CostCenters.SelectedItem=e),0==this.tree.length||this.tree[0].CostCenterID!=parseInt(this.CostCenters.SelectedValue)){let e=0;null==this.CostCenters.SelectedItem||i.e.IsEmpty(this.CostCenters.SelectedItem.Parent)||(e=i.e.Int(this.CostCenters.SelectedItem.Parent)),this.LoadCostCenterTree(parseInt(this.CostCenters.SelectedValue),e,0,null)}}}LoadCostCenterTree(e,t,s,o){this.tree.Clear();let a,l="";if(50002==e&&"True"==n.a.SessionManager.Preferences.EnableLocationWise.toString()&&"True"==n.a.SessionManager.Preferences["LW Reports"]&&(l=i.e.IsEmpty(n.a.SessionManager.LocationWhere)?"a.NodeID IN (-1234)":"a.NodeID IN ("+n.a.SessionManager.LocationWhere+")"),null==o)for(let n=0;n<this.CostCenterFilters.length;n++){const s=this.CostCenterFilters[n];if(s.CostCenterID==e&&s.LookupTypeID==t){o=s.SelectedNodes;break}}let r=new c.a;null==o?(r.TreeViewModel_5(e,this,s,l,""),a=r):(r.TreeViewModel_6(e,this,s,l,o,""),a=r),a.LookupTypeID=t,a.HeaderVisiblity=!1,a.btnFilterVisibility=!0,a.OnNodeSelected||(a.OnNodeSelected=new h.b,a.OnNodeSelected.Subscribe(this,"OnNodeSelected")),this.tree.push(a)}}},y4Z9:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var n=s("Do2H"),i=s("Lp6j"),o=s("vTM8");class a{constructor(e){this.IsHoliday=!1,this.IsWeeklyOff=!1,this.IsHolidayMast=!1,this.dsWOffData={Tables:[]},this.dsHMData={Tables:[]},this.dsWOffDataDict=new o.a,this.dsHMDataDict=new o.a,this.dtEmpData=null,this.ScreenObject=e}filterResult(e,t,s){let n=[];n=s;let o="";for(let a=0;a<e.length;a++)null!=e[a]&&""!=e[a]&&(o="dcCCNID"+(parseInt(e[a])-5e4),n=i.e.IsEmpty(t[o+"_Key"])?n.filter(e=>1==e[o]):n.filter(e=>e[o]==t[o+"_Key"].toString()||1==e[o]));return n}CheckIsHolidayDate(e,t,s,o=!1,a=null){this.IsHoliday=this.IsWeeklyOff=this.IsHolidayMast=!1;let l="",r=!1;if(n.a.SessionManager.Preferences.ContainsKey("WeeklyOffsDefBasedOn")&&""!=n.a.SessionManager.Preferences.WeeklyOffsDefBasedOn){let c=n.a.SessionManager.Preferences.WeeklyOffsDefBasedOn.split(",");if(null!=c&&c.length>0){let h=" 1=1 ",d="";for(let e=0;e<c.length;e++)null!=c[e]&&""!=c[e]&&(d="dcCCNID"+(parseInt(c[e])-5e4),i.e.IsEmpty(s[d+"_Key"])?h+=" AND "+d+"=1":h+=" AND ( "+d+"="+s[d+"_Key"].toString()+" OR "+d+"=1 )");if(h.length>0){l=new Date(t).ToString("ddMMMyyyy")+"_"+h.Replace(" ","");let y=null;if(o){if(null!=a&&a.Tables.length>3){let e=a.Tables[3];" 1=1 "!=h?(e=this.filterResult(c,s,e),e=e.filter(e=>e.WEFDate<=new Date(t).ToString("dd/MMM/yyyy"))):e=e.filter(e=>e.WEFDate<=new Date(t).ToString("dd/MMM/yyyy")),null!=e&&e.length>0&&(y=e)}}else null!=this.dsWOffDataDict&&this.dsWOffDataDict.length>0&&this.dsWOffDataDict.ContainsKey(l)&&(r=!0),r?y=this.dsWOffDataDict[l]:(y=n.a.common.GetDataSet3("PAY053",t,h).Tables[0],this.dsWOffDataDict.push(l,y));if(null!=y&&y.length>0){let e,f,b,u={PayrollMonth:e,PayrollMonthStart:f,PayrollMonthEnd:b};if(i.e.SetPayrollDate(new Date(t),u),e=u.PayrollMonth,f=u.PayrollMonthStart,b=u.PayrollMonthEnd,i.e.CheckIsWeeklyOffFromDef(new Date(t),f,b,y)){if(this.IsHoliday=!0,n.a.SessionManager.Preferences.ContainsKey("HolidaysBasedOn")&&""!=n.a.SessionManager.Preferences.HolidaysBasedOn&&(c=n.a.SessionManager.Preferences.HolidaysBasedOn.split(","),null!=c&&c.length>0)){h=" 1=1 ",d="";for(let e=0;e<c.length;e++)null!=c[e]&&""!=c[e]&&(d="dcCCNID"+(parseInt(c[e])-5e4),i.e.IsEmpty(s[d+"_Key"])?h+=" AND "+d+"=1":h+=" AND ( "+d+"="+s[d+"_Key"].toString()+" OR "+d+"=1 )");if(h.length>0){l=new Date(t).ToString("ddMMMyyyy")+"_"+h.Replace(" ","");let e=null;if(r=!1,o){if(null!=a&&a.Tables.length>4){let n=a.Tables[4];" 1=1 "!=h?(n=this.filterResult(c,s,n),n=n.filter(e=>e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy"))):n=n.filter(e=>e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy")),null!=n&&n.length>0&&(e=n)}}else null!=this.dsHMDataDict&&this.dsHMDataDict.length>0&&this.dsHMDataDict.ContainsKey(l)&&(r=!0),r?e=this.dsHMDataDict[l]:(e=n.a.common.GetDataSet3("PAY054",t,h).Tables[0],this.dsHMDataDict.push(l,e));null!=e&&e.length>0&&(this.IsHoliday=!0,this.IsHolidayMast=!0)}}this.IsHolidayMast||(this.IsWeeklyOff=!0)}else if(n.a.SessionManager.Preferences.ContainsKey("HolidaysBasedOn")&&""!=n.a.SessionManager.Preferences.HolidaysBasedOn&&(c=n.a.SessionManager.Preferences.HolidaysBasedOn.split(","),null!=c&&c.length>0)){h=" 1=1 ",d="";for(let e=0;e<c.length;e++)null!=c[e]&&""!=c[e]&&(d="dcCCNID"+(parseInt(c[e])-5e4),i.e.IsEmpty(s[d+"_Key"])?h+=" AND "+d+"=1":h+=" AND ( "+d+"="+s[d+"_Key"].toString()+" OR "+d+"=1 )");if(h.length>0){l=new Date(t).ToString("ddMMMyyyy")+"_"+h.Replace(" ","");let e=null;if(r=!1,o){if(null!=a&&a.Tables.length>4){let n=a.Tables[4];" 1=1 "!=h?(n=this.filterResult(c,s,n),n=n.filter(e=>e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy"))):n=n.filter(e=>e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy")),null!=n&&n.length>0&&(e=n)}}else null!=this.dsHMDataDict&&this.dsHMDataDict.length>0&&this.dsHMDataDict.ContainsKey(l)&&(r=!0),r?e=this.dsHMDataDict[l]:(e=n.a.common.GetDataSet3("PAY055",t,h).Tables[0],this.dsHMDataDict.push(l,e));null!=e&&e.length>0&&(this.IsHoliday=!0,this.IsHolidayMast=!0)}}}else this.CheckWeeklyOffsAtPrefAndMaster(e,new Date(t),s,o,a)}}}else this.CheckWeeklyOffsAtPrefAndMaster(e,new Date(t),s,o,a);s.PayrollType=this.IsHoliday?this.IsWeeklyOff?"WeeklyOff":"Holiday":"",null!=this.ScreenObject&&67==this.ScreenObject.DocumentType&&(this.ScreenObject.GridDataColumns.Contains("dcAlpha15")&&(s.dcAlpha15=s.PayrollType),this.ScreenObject.GridDataColumns.Contains("dcNum2")&&this.IsHoliday&&(this.IsWeeklyOff?n.a.SessionManager.Preferences.ContainsKey("Pick-1inNormalWorkingHoursforWeeklyOffsinDailyAttendance")&&"True"==n.a.SessionManager.Preferences["Pick-1inNormalWorkingHoursforWeeklyOffsinDailyAttendance"]&&(s.dcNum2="-1"):n.a.SessionManager.Preferences.ContainsKey("Pick-2inNormalWorkingHoursforHolidaysinDailyAttendance")&&"True"==n.a.SessionManager.Preferences["Pick-2inNormalWorkingHoursforHolidaysinDailyAttendance"]&&(s.dcNum2="-2"))),null!=this.ScreenObject&&62!=this.ScreenObject.DocumentType&&99!=this.ScreenObject.DocumentType&&97!=this.ScreenObject.DocumentType&&(this.ScreenObject.GridDataColumns.Contains("Row_Background")||this.ScreenObject.GridDataColumns.push("Row_Background"),s.Row_Background="WeeklyOff"==s.PayrollType.toString()?"#F77B7E":"Holiday"==s.PayrollType.toString()?"#40C8B7":"#FFFFFF")}CheckWeeklyOffsAtPrefAndMaster(e,t,s,o=!1,a=null){let l="",r="";null==this.dtEmpData&&(this.dtEmpData=n.a.common.GetDataSet("PAY002","").Tables[0]);let c=this.dtEmpData.filter(t=>t.NodeID==e);if(l=null!=c&&c.length>0&&"NONE"!=c[0].WeeklyOff1.toString().toUpperCase()?c[0].WeeklyOff1.toString():n.a.SessionManager.Preferences.WeeklyOff1.toString(),null!=c&&c.length>0&&"NONE"!=c[0].WeeklyOff2.toString().toUpperCase()?c[0].WeeklyOff2.toString().toUpperCase()!=l.toUpperCase()&&(r=c[0].WeeklyOff2.toString()):r=n.a.SessionManager.Preferences.WeeklyOff2.toString(),t.getDay().toString()==l||t.getDay().toString()==r){if(this.IsHoliday=!0,n.a.SessionManager.Preferences.ContainsKey("HolidaysBasedOn")&&""!=n.a.SessionManager.Preferences.HolidaysBasedOn){let e=n.a.SessionManager.Preferences.HolidaysBasedOn.split(",");if(null!=e&&e.length>0){let l=" 1=1 ",r="";for(let t=0;t<e.length;t++)null!=e[t]&&""!=e[t]&&(r="dcCCNID"+(parseInt(e[t])-5e4),i.e.IsEmpty(s[r+"_Key"])?l+=" AND "+r+"=1":l+=" AND ( "+r+"="+s[r+"_Key"].toString()+" OR "+r+"=1 )");if(l.length>0){let i=t.ToString("ddMMMyyyy")+"_"+l.Replace(" ",""),r=null,c=!1;if(o){if(null!=a&&a.Tables.length>4){let n=a.Tables[4];" 1=1 "!=l?(n=this.filterResult(e,s,n),n=n.filter(e=>e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy"))):n=n.filter(e=>e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy")),null!=n&&n.length>0&&(r=n)}}else null!=this.dsHMDataDict&&this.dsHMDataDict.length>0&&this.dsHMDataDict.ContainsKey(i)&&(c=!0),c?r=this.dsHMDataDict[i]:(r=n.a.common.GetDataSet3("PAY056",new Date(t).ToString("dd MMM yyyy"),l).Tables[0],this.dsHMDataDict.push(i,r));null!=r&&r.length>0&&(this.IsHoliday=!0,this.IsHolidayMast=!0)}}}this.IsHolidayMast||(this.IsWeeklyOff=!0)}else if(n.a.SessionManager.Preferences.ContainsKey("HolidaysBasedOn")&&""!=n.a.SessionManager.Preferences.HolidaysBasedOn){let e=n.a.SessionManager.Preferences.HolidaysBasedOn.split(",");if(null!=e&&e.length>0){let l=" 1=1 ",r="";for(let t=0;t<e.length;t++)null!=e[t]&&""!=e[t]&&(r="dcCCNID"+(parseInt(e[t])-5e4),i.e.IsEmpty(s[r+"_Key"])?l+=" AND "+r+"=1":l+=" AND ( "+r+"="+s[r+"_Key"].toString()+" OR "+r+"=1 )");if(l.length>0){let i=t.ToString("ddMMMyyyy")+"_"+l.Replace(" ",""),r=null,c=!1;if(o){if(null!=a&&a.Tables.length>4){let n=a.Tables[4];" 1=1 "!=l?(n=this.filterResult(e,s,n),n=n.filter(e=>e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy"))):n=n.filter(e=>e.HolidayDate==new Date(t).ToString("dd/MMM/yyyy")),null!=n&&n.length>0&&(r=n.ToTable())}}else null!=this.dsHMDataDict&&this.dsHMDataDict.length>0&&this.dsHMDataDict.ContainsKey(i)&&(c=!0),c?r=this.dsHMDataDict[i]:(r=n.a.common.GetDataSet3("PAY057",new Date(t).ToString("dd MMM yyyy"),l).Tables[0],this.dsHMDataDict.push(i,r));null!=r&&r.length>0&&(this.IsHoliday=!0,this.IsHolidayMast=!0)}}}}}}}]);