(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{Kl1j:function(e,t,s){"use strict";s.r(t),s.d(t,"TransferAccountViewModel",(function(){return o}));var i=s("mrSG"),c=s("Do2H"),n=s("ScVY"),a=s("n56n"),r=s("0/4Q");class o extends n.b{constructor(){super(...arguments),this._TargetAccountID=new a.b(0),this._SelectedAccountType=new r.e(0),this.TransferVisibility=!1,this.ChangeVisibility=!1,this.IsAssign=!1,this.IsContacts=!1,this.IsAdress=!1,this.IsNotes=!1,this.IsAttachments=!1,this.IsActivities=!1}get TargetAccount(){return this._TargetAccountID}set TargetAccount(e){e!=this._TargetAccountID&&(this._TargetAccountID=e)}get AccountType(){return this._SelectedAccountType}set AccountType(e){e!=this._SelectedAccountType&&(this._SelectedAccountType=e)}TransferAccountViewModel(e,t,s){Logger.InfoLog("TransferAccountViewModel::Entering TransferAccountViewModel with AccountID="+e+",AccName="+t),this.lblText=c.a.GetResource("Acc_TransferData"),this.AccountID=e,this.SelectedAccount=t,this.TargetAccount.CCID=s,this.TransferVisibility=!0,this.AccountType.Label="Account Type",this.ChangeVisibility=!1,this.TargetAccount.CustomWhere="a.IsGroup=0",2==s?(this.lblName=c.a.GetResource("AccInfo_AccName"),this.lblTargetName=c.a.GetResource("Acc_TransferToAccount"),this.TargetAccount.TypeID=2):3==s?(this.lblName=c.a.GetResource("Prd_ProductName"),this.lblTargetName=c.a.GetResource("Prd_TransferToProduct"),this.TargetAccount.TypeID=10,this.TargetAccount.CustomWhere="a.IsGroup=0 and a.ProductTypeID=1"):50051==s?(this.lblName=c.a.GetResource("EmpMaster_EmpName"),this.lblTargetName=c.a.GetResource("EmpMaster_TransferToEmp"),this.TargetAccount.TypeID=1):(this.lblName=c.a.GetResource("CostCenter_Name"),this.lblTargetName=c.a.GetResource("Com_TransferToDimension"),this.TargetAccount.TypeID=1),this.TargetAccount.Label=this.lblTargetName,this.DisplayMessage="",this.MessageVisibility=!1,Logger.InfoLog("TransferAccountViewModel::Exiting TransferAccountViewModel")}LoadDataType(e){return Object(i.b)(this,void 0,void 0,(function*(){const{CostCenterPicker:t}=yield Promise.all([s.e(2),s.e(36)]).then(s.bind(null,"ktgv"));if(null==t.DSAccountTypes){let e=c.a.accounting.LoadDataType();t.DSAccountTypes=e.Tables[0]}t.DSAccountTypes.forEach(e=>{this.AccountType.Items.push(r.d.ComboBoxItems_2(e.AccountType.toString(),e.AccountTypeID.toString()))}),this.AccountType.SelectedValue=e}))}OnTransfer(e){return Object(i.b)(this,void 0,void 0,(function*(){const{ReportViewModel:t}=yield Promise.all([s.e(2),s.e(1),s.e(3),s.e(5),s.e(4),s.e(6),s.e(7),s.e(10),s.e(9),s.e(8),s.e(12),s.e(11),s.e(13),s.e(19),s.e(15),s.e(21),s.e(20),s.e(16),s.e(14),s.e(18),s.e(17),s.e(22),s.e(23),s.e(24),s.e(25),s.e(28),s.e(30),s.e(29),s.e(32),s.e(31),s.e(27),s.e(26),s.e(35),s.e(37),s.e(38),s.e(36),s.e(33),s.e(34),s.e(39),s.e(40),s.e(41),s.e(212)]).then(s.bind(null,"ThYU")),{ReportViewComponent:i}=yield Promise.all([s.e(32),s.e(37)]).then(s.bind(null,"YU11"));if(null!=e&&"Cancel"==e.toString())this.ParentObject instanceof t?c.a.page.HideDialog():2==this.TargetAccount.CCID?(this.Parent.TransferDataVisibility=!1,c.a.page.HideDialog()):3==this.TargetAccount.CCID?(this.ParentP.TransferDataVisibility=!1,this.ParentP.SetVisibilityFalse()):null!=this.ParentC?(this.ParentC.TransferDataVisibility=!1,this.ParentC.SetVisibilityFalse()):null!=this.ParentEM?(this.ParentEM.TransferDataVisibility=!1,this.ParentEM.SetVisibilityFalse()):null!=this.ParentObject&&"PACT.VIEWMODEL.ListOfCustomersViewModel"==this.ParentObject.toString()&&(this.ParentObject.TransferDataVisibility=!1,this.ParentObject.SetDetailsVisibile());else if(null!=e&&"Change"==e.toString()&&2==this.TargetAccount.CCID){let e=[];e.push(this.AccountID),e.push(this.AccountType.SelectedValue);let t=c.a.accounting.ChangeAccount(this.AccountID,this.AccountType.SelectedValue);this.DisplayMessage=t.RetValue>0?"Data changed Successfully":t.message,this.MessageVisibility=!0,this.Parent.Refresh()}else try{if(this.TargetAccount.SelectedValue<1||0==this.TargetAccount.SelectedValue)return this.DisplayMessage=c.a.GetResource("Select")+" "+c.a.GetResource("DocumentDesigner_Account"),void(this.MessageVisibility=!0);if(this.ParentObject instanceof t){let e=this.ParentObject,t="",s="";e.Filter.CostCenterFilters.forEach(i=>{i.CostCenterID>5e4&&(s=e.GetDimensionFilter(i.CostCenterID),s.length>0&&(t+=" and DCC.dcCCNID"+(i.CostCenterID-5e4)+" in ("+s+")"))});let i=[];i.push(this.AccountID),i.push(this.TargetAccount.SelectedValue),i.push(this.TargetAccount.CCID),i.push(this.IsAssign),i.push(this.IsContacts),i.push(this.IsAdress),i.push(this.IsNotes),i.push(this.IsAttachments),i.push(this.IsActivities),i.push(t);let n=c.a.accounting.TransferAccount(i);this.DisplayMessage=n.Message,this.MessageVisibility=!0}else if(2==this.TargetAccount.CCID){let e;e="<XML>",e+='<Row ColID="2" Value="'+this.AccountID+'"/>',e+="</XML>";let s=new t;s.ReportViewModel_Document(95,e,297,!1,null,null),s.TransferData=this,this.ParentObject=s,c.a.page.HideDialog(),c.a.page.addNewTab({component:i,params:{obj:s}})}else{let e=[];e.push(this.AccountID),e.push(this.TargetAccount.SelectedValue),e.push(this.TargetAccount.CCID),e.push(this.IsAssign),e.push(this.IsContacts),e.push(this.IsAdress),e.push(this.IsNotes),e.push(this.IsAttachments),e.push(this.IsActivities),e.push("");let t=c.a.accounting.TransferAccount(e);this.DisplayMessage=t.Message,this.MessageVisibility=!0}}catch(n){Logger.ErrorLog("TransferAccountViewModel:: OnTransfer"+n.stack)}}))}}}}]);