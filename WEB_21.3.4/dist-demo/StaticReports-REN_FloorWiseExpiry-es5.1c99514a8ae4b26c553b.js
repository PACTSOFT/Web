function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var o,r=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;o=Reflect.construct(r,arguments,n)}else o=r.apply(this,arguments);return _possibleConstructorReturn(this,o)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[84],{eoN1:function(e,t,o){"use strict";o.r(t),o.d(t,"REN_FloorWiseExpiry",(function(){return i}));var r=o("Do2H"),n=o("Lp6j"),l=o("vTM8"),s=o("1xwR"),a=o("mvPR"),i=function(e){_inherits(o,e);var t=_createSuper(o);function o(e){var r;return _classCallCheck(this,o),(r=t.call(this,e)).colors=new l.a,r.colorNames=new l.a,r}return _createClass(o,[{key:"LoadReport",value:function(){var e=this,t=0,o=0;this.ViewModel.Preferences.ContainsKey("Property")&&""!=this.ViewModel.Preferences.Property&&(t=parseInt(this.ViewModel.Preferences.Property)),this.ViewModel.Preferences.ContainsKey("Status")&&""!=this.ViewModel.Preferences.Status&&(o=parseInt(this.ViewModel.Preferences.Status));var l=this.ViewModel.Preferences.ContainsKey("StatusDimension")?parseInt(this.ViewModel.Preferences.StatusDimension):0,s=[];s.push(t),s.push(this.ViewModel.ToDatePicker.Date.ToString("dd/MMM/yyyy")),s.push(o),s.push(l),s.push(this.ViewModel.SelectTag),s.push(this.ViewModel.FromTag),s.push(r.a.SessionManager.UserID),s.push(r.a.SessionManager.LanguageID),r.a.report.GetFloorWiseExpiry(s,this.ViewModel.IsReportDB).then((function(t){var o=t;e.FillColors(),null!=o&&o.Tables.length>2&&e.colors.keys.forEach((function(t){var n={Key:t,Value:e.colors[t]},l=o.Tables[2].filter((function(e){return e.NodeID==n.Key}));l.length>0?e.colorNames.push(l[0].Name.toString(),n.Value):"0"==n.Key&&e.colorNames.push(r.a.GetResource("nearingexpiry"),n.Value)}));var l=1;o.Tables[1].length>0&&n.e.IsNum(o.Tables[1][0][o.Columns[1][0]])&&(l=parseInt(o.Tables[1][0][o.Columns[1][0]]));var s=new Array,i=new Array,u=e.ViewModel.ReportColumns[0].Clone();u.HeaderText="Floor",i.push(u);for(var c=1;c<e.ViewModel.ColumnSource.length;c++)e.ViewModel.ColumnSource[c].HeaderAppearance.IsVisible&&s.push(e.ViewModel.ColumnSource[c]);for(var p=0;p<l;p++)(u=e.ViewModel.ReportColumns[0].Clone()).HeaderText="Unit",i.push(u);e.ViewModel.ReportColumns=i;for(var f=new Array,h=1,d=null,w="",C=!1,y=0;y<o.Tables[0].length;y++,h++){if(w!=o.Tables[0][y].Property.toString()&&(C=!0),d!=n.e.String(o.Tables[0][y].FloorName)||C){if(y>0&&f.forEach((function(t){e.ViewModel.addRow(t)})),C){var g=new a.d(e.ViewModel.ReportColumns.length,e.ViewModel.RowHeight);g.Cells[0].Text=o.Tables[0][y].Property.toString(),g.Cells[0].ColSpan=e.ViewModel.ReportColumns.length-1,d=null,e.ViewModel.addRow(g),C=!1}f.Clear(),f.push(new a.d(e.ViewModel.ReportColumns.length,e.ViewModel.RowHeight)),f.push(new a.d(e.ViewModel.ReportColumns.length,e.ViewModel.RowHeight)),f.push(new a.d(e.ViewModel.ReportColumns.length,e.ViewModel.RowHeight)),s.forEach((function(t){f.push(new a.d(e.ViewModel.ReportColumns.length,e.ViewModel.RowHeight))})),f[0].Cells[0].Text=n.e.String(o.Tables[0][y].FloorName),h=1}if(d=n.e.String(o.Tables[0][y].FloorName),w=n.e.String(o.Tables[0][y].Property),f[0].Cells[h].Text=n.e.String(o.Tables[0][y].Unit),f[1].Cells[h].Text=n.e.String(o.Tables[0][y].UnitTypeName),f[2].Cells[h].Text=n.e.IsEmpty(o.Tables[0][y].ContractExpiryDate)?"":new Date(o.Tables[0][y].ContractExpiryDate).ToString(r.a.SessionManager.Preferences["Date Format"]),e.colors.ContainsKey(n.e.String(o.Tables[0][y].UnitStatus))&&!n.e.IsEmpty(e.colors[n.e.String(o.Tables[0][y].UnitStatus)]))for(var M=0;M<f.length;M++)f[M].Cells[h].IsNormal=!1,f[M].Cells[h].CellAppearance=e.ViewModel.ReportColumns[h].DataAppearance.Clone(),f[M].Cells[h].CellAppearance.BackColor=e.colors[n.e.String(o.Tables[0][y].UnitStatus)];if(e.ViewModel.Preferences.ContainsKey("ExpiryIn")&&""!=e.ViewModel.Preferences.ExpiryIn){var V;if((V=n.e.Int(e.ViewModel.Preferences.ExpiryIn))>0&&!n.e.IsEmpty(o.Tables[0][y].ContractExpiryDate)&&new Date(o.Tables[0][y].ContractExpiryDate.toString())<=e.ViewModel.ToDatePicker.Date.AddDays(V)&&""!=e.colors[0])for(var b=0;b<3;b++)f[b].Cells[h].IsNormal=!1,f[b].Cells[h].CellAppearance=b<3?e.ViewModel.ReportColumns[h].DataAppearance.Clone():s[b-3].DataAppearance.Clone(),f[b].Cells[h].CellAppearance.BackColor=e.colors[0]}for(var m=0;m<s.length;m++){var T=o.Tables[0][y][s[m].ID].toString();T.length>0&&e.ViewModel.SetCellValue(T,s[m].DataFormat,s[m].ColumnType,f[3+m].Cells[h])}}o.Tables[0].length>0&&f.forEach((function(t){e.ViewModel.addRow(t)}))})).then((function(t){e.ViewModel.process_RunWorkerCompleted()}))}},{key:"FillColors",value:function(){var e=this;if(this.ViewModel.Preferences.ContainsKey("StatusColors")&&""!=this.ViewModel.Preferences.StatusColors){var t=new n.f;t.LoadXml("<xml>"+this.ViewModel.Preferences.StatusColors+"</xml>");var o=t.SelectNodes("xml/Color");null!=o&&o.length>0&&o.forEach((function(t){null!=t.attributes.ID&&null!=t.attributes.Value&&e.colors.push(t.attributes.ID.value,t.attributes.Value.value)}))}}},{key:"LoadReportWithPostFilters",value:function(e){}}]),o}(s.b)}}]);