function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{lUlH:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var s=n("Do2H"),a=n("Lp6j"),o=n("vTM8"),i=n("jgdN"),r=n("EQd/"),l=n("JIg3"),u=n("0/4Q"),c=n("n56n"),D=n("Huqd"),C=n("Jnyl"),m=n("FruK"),h=n("4ADR"),d=n("ockk"),p=n("4HhE"),S=n("eQJW"),f=n("bgvB"),I=n("MCLT"),y=n("8B8H"),g=n("mRNg"),b=function(){function e(t,n){_classCallCheck(this,e),this.IsConstructorCall=!0,this.LoadEditCallBack=new p.b,this.ClearCallBack=new p.b,this.ValidateData=new p.b,this.ReferenceCallBack=new p.b,this.ShowQuickViewCallBack=new p.b,this.MinRowCount=9,this.ChequeBookChecking=0,this.IsResave=0,this.BulkSaveon=0,this.CostCenterID=0,this.CurrentCodeNumber=0,this.DivisionID=0,this.RegisterNodeID=0,this.ShiftNodeID=0,this.DivisionName="",this.LocationName="",this.LockWhere="",this.DocID=0,this._locID=0,this.RefNodeID=0,this.RefCCId=0,this.RefAmount=0,this.IsBouncedorPdcPosted=!1,this.IsLoadingeditData=!1,this.IsRefLCTR=!1,this.IsDirty=!1,this.ParentFlagName="",this.BouncedorPdcMessage="",this.ExternalFuncErrorMessage="",this.DraftID=0,this.DocumentType=0,this.IsInventory=!1,this.Preferences=new o.a,this.PriceTaxcc=new o.c,this.TempProductID=0,this.IsPurchase=!1,this.IsForecast=!1,this.ForecastObj=null,this.SectionOrders=new o.a,this.ColumnSource=[],this.FooterColumnSource=[],this.GridData=[],this.GridDataColumns=[],this.GridDataObj=new y.a,this.FooterGridData=[],this.FooterGridDataColumns=[],this.FooterDataBind=[],this.FooterDataBindColumns=[],this.FooterGridDataObj=new y.a,this._numericFields=[],this._TextFields=[],this._CCFields=[],this._StaticFields=[],this.FilterFields=[],this.FilterColumns=new o.a,this.ProdFilterinuse=new o.c,this.CostCentersValues=new o.a,this.dtHistory=null,this.DocPrefix=null,this.DueDate=null,this.BillNo=null,this.Status=null,this.CreditAccount=null,this.DebitAccount=null,this.Link=null,this.PostVoucherDocID=0,this.PostVoucherDocDetailsID=0,this.PostVoucherCreditAccount=0,this.PostVoucherDebitAccount=0,this.PostVoucherAmount=0,this.PostVouceherDocPrefix="",this.PostVoucherDocnumber="",this.guid="",this.CCguid="",this.strnumericFields=null,this.strTextFields=null,this.strCCFields=null,this.strStaticFields=null,this.FooterAccounts=null,this.VoucherNo=null,this.ChildVNos=null,this.strTOCCFields=null,this.linkstat=null,this.DistributeCostXML=null,this.HistoryCCXML=null,this.HeaderFields=[],this._LineItemFields=[],this.AvgrateExists=!1,this.RWFieldsExists=[],this.DefaultBasedOn=new o.a,this.GridColumnType=new o.a,this.footerGridColumnType=new o.a,this.DataTableColumnType=new o.a,this.CustomTab=new h.a,this.TabIndex=new h.b,this.IsAccessDenied=!1,this.RateVisibility=!0,this.dtSerialTemp=[],this.SNOFoot=1,this.SNO=1,this.ID=0,this.LineItemFields=[],this.AmtFc="1",this.ExchRate="1",this.AttachmentFields=[],this.CostCenterID=t,this.DocID=n,this.GridDataObj.Table=this.GridData,this.GridDataObj.CanUserAddRows=!0,this.GridDataObj.CanUserDeleteRows=!0,this.GridDataObj.SearchColStartIndex=1,this.FooterGridDataObj.Height=150,this.FooterGridDataObj.Table=this.FooterGridData,this.FooterGridDataObj.Columns=this.FooterColumnSource,this.FooterGridDataObj.TableColumns=this.FooterGridDataColumns,this.FooterGridDataObj.IsDocument=!0,s.a.IsMobile&&(this.GridDataObj.CanUserAddRows=!1)}return _createClass(e,[{key:"CheckIsPurchase",value:function(){this.IsInventory&&(this.IsPurchase=1==this.DocumentType||2==this.DocumentType||6==this.DocumentType||39==this.DocumentType||3==this.DocumentType||4==this.DocumentType||34==this.DocumentType||13==this.DocumentType||25==this.DocumentType||26==this.DocumentType||27==this.DocumentType,64==this.DocumentType&&(this.IsForecast=!0))}},{key:"FilterTo",value:function(e){if(!e.DBColumnName.Contains("TO")){var t=this._CCFields.find((function(t){return t.DBColumnName=="TO"+e.DBColumnName}));t instanceof c.b&&(t.CustomWhere=this.GetCustomWhere(e.CCID,e.SelectedValue))}}},{key:"FilterToCodeName",value:function(e){if(!e.DBColumnName.Contains("TO")){var t=this._CCFields.find((function(t){return t.DBColumnName=="TO"+e.DBColumnName}));t instanceof D.a&&(t.Code.CustomWhere=t.Name.CustomWhere=this.GetCustomWhere(e.CCID,e.SelectedValue))}}},{key:"GetCustomWhere",value:function(e,t){var n="";return n=n+"a.NodeID <>  "+t.toString()}},{key:"OnGetReference",value:function(e){var t=this;if(null!=this.ShowQuickViewCallBack&&!this.IsLoadingeditData&&e instanceof c.b){if(null==e.SelectedValue||null==e.SelectedValue||0==e.SelectedValue)return;var n=e;this.FilterTo(e);var o=null;if(this.SelectedGridRowIndex>=0&&(o=this.GridData[this.SelectedGridRowIndex]),2!=n.Action&&4!=n.Action||a.e.IsEmpty(n.Expression)||this.ShowQuickViewCallBack.Call({CCID:0,NodeID:0,datarow:null,ctrl:n}),(2==n.CCID||n.CCID>=50001&&n.CCID<=50057&&this.Preferences.ContainsKey("QuickViewDimensions")&&""!=this.Preferences.QuickViewDimensions&&this.Preferences.QuickViewDimensions.toString().Contains(n.CCID.toString()))&&this.ShowQuickViewCallBack.Call({CCID:n.CCID,NodeID:n.SelectedValue,datarow:o,ctrl:null}),this.PriceTaxcc.ContainsKey(n.CCID)&&this.ReferenceCallBack.IsSubscribed){(2!=n.CCID||1!=this.DocumentType&&2!=this.DocumentType&&10!=this.DocumentType&&26!=this.DocumentType&&27!=this.DocumentType&&3!=this.DocumentType&&4!=this.DocumentType&&25!=this.DocumentType&&13!=this.DocumentType||null==this.CreditAccount||this.CreditAccount.Code!=n&&this.CreditAccount.Name!=n)&&(2!=n.CCID||11!=this.DocumentType&&38!=this.DocumentType&&39!=this.DocumentType&&6!=this.DocumentType&&7!=this.DocumentType&&8!=this.DocumentType&&9!=this.DocumentType&&12!=this.DocumentType&&24!=this.DocumentType||null==this.DebitAccount||this.DebitAccount.Code!=n&&this.DebitAccount.Name!=n)?n.CCID>5e4&&this.ReferenceCallBack.Call({ReferenceTable:null,ReferenceEditTable:null,DBColumnName:"ReEvaluate",ccid:n.CCID,dr:null}):this.ReferenceCallBack.Call({ReferenceTable:null,ReferenceEditTable:null,DBColumnName:"ReEvaluate",ccid:n.CCID,dr:null})}if(this.GetLinkReferenceData(n.DBColumnID,this.CostCenterID,n.SelectedValue,this.DocDate.Date,n.DBColumnName,n.CCID,o),this.Preferences.ContainsKey("DimWiseCurrency")&&"true"!=this.Preferences.DimWiseCurrency.toLowerCase()&&s.a.SessionManager.Preferences.DimensionwiseCurrency==n.CCID.toString()){for(var i=0;i<this.HeaderFields.length;i++){var l=this.HeaderFields[i];if(l instanceof C.b){a.e.IsEmpty(l.Currency.SelectedValue)||(l.ExchangeRate.Text=this.GetExchangeRate(parseInt(l.Currency.SelectedValue),this.DocDate.Date).toString());break}}var u,D=this.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&79==e.LocalReference&&55847==e.LinkData}));if(u=a.e.Int(s.a.SessionManager.Preferences.BaseCurrency),D.length>0&&""!=s.a.SessionManager.Preferences.BaseCurrency&&u>0){var m=this._TextFields.find((function(e){return e.DBColumnID.toString()==D[0].CostCenterColID.toString()}));m&&m instanceof r.d&&(m.Text=this.GetExchangeRate(parseInt(s.a.SessionManager.Preferences.BaseCurrency),this.DocDate.Date).toString())}}if(!a.e.IsEmpty(n.KeyTip)&&"lostfocus"==n.KeyTip.toLowerCase()&&this.ValidateData.IsHandler&&this.ValidateData.Call({sender:n,IsExternal:!0})&&this.GetExternalFuncData(n.Mode,n.ToolTipFooterTitle,n.ToolTipFooterDescription,n.ToolTipDescription,null),n.SelectedValue>0){if(this.Preferences.ContainsKey("DimWiseAttachments")&&this.Preferences.DimWiseAttachments==n.CCID.toString()){var h=this.GetFiles(n.CCID,n.SelectedValue);h.Tables.length>0&&h.Tables[0].length>0&&this.ReferenceCallBack.Call({ReferenceTable:h.Tables[0],ReferenceEditTable:null,DBColumnName:"Attachments~",ccid:0,dr:null})}if(n.CCID>5e4&&(n.CrFilter>0||n.DbFilter>0)){if(n.CrFilter>0&&null!=this.CreditAccount){var d=this._CCFields.filter((function(e){return e.CrFilter>0})),p="";d.forEach((function(e){e instanceof c.b&&e.SelectedValue>0&&(p="("+e.DBColumnName.replace("dc","")+"="+e.SelectedValue.toString(),1==e.CrFilter&&(p+=" OR "+e.DBColumnName.replace("dc","")+"=1 "),p+=")")})),this.CreditAccount.Code.CustomWhere=null==this.CreditAccount.Code.InitCustomWhere||""==this.CreditAccount.Code.InitCustomWhere?p:this.CreditAccount.Code.InitCustomWhere+" and "+p,this.CreditAccount.Name.CustomWhere=null==this.CreditAccount.Name.InitCustomWhere||""==this.CreditAccount.Name.InitCustomWhere?p:this.CreditAccount.Code.InitCustomWhere+" and "+p}if(e.DbFilter>0&&null!=this.DebitAccount){var S=this._CCFields.filter((function(e){return e.DbFilter>0})),f="";S.forEach((function(e){f="("+e.DBColumnName.replace("dc","")+"="+e.SelectedValue.toString(),1==e.DbFilter&&(f+=" OR "+e.DBColumnName.replace("dc","")+"=1 "),f+=")"})),this.DebitAccount.Code.CustomWhere=null==this.DebitAccount.Code.InitCustomWhere||""==this.DebitAccount.Code.InitCustomWhere?f:this.DebitAccount.Code.InitCustomWhere+" and "+f,this.DebitAccount.Name.CustomWhere=null==this.DebitAccount.Name.InitCustomWhere||""==this.DebitAccount.Name.InitCustomWhere?f:this.DebitAccount.Code.InitCustomWhere+" and "+f}}}if(this.FilterDependencies(n),s.a.SessionManager.Preferences.BudgetAccount.length>0&&s.a.SessionManager.Preferences.BudgetDimension.length>0&&null!=this._CCFields.find((function(e){return e instanceof c.b&&e.CCID==parseInt(s.a.SessionManager.Preferences.BudgetDimension)}))){var I=this._CCFields.find((function(e){return e instanceof c.b&&e.CCID==parseInt(s.a.SessionManager.Preferences.BudgetDimension)})),y=this.Data.Tables[5].filter((function(e){return e.CostCenterID==s.a.SessionManager.Preferences.BudgetDimension&&0==e.QtyBudget&&(0==e.QtyType||null==e.QtyType)})),g="";y.length>0&&this.Data.Tables[5].filter((function(e){return e.BudgetDefID==y[0].BudgetDefID})).forEach((function(e){var n=parseInt(e.CostCenterID);if(2==n){var a="";null!=t.CreditAccount&&t.CreditAccount.SelectedValue>0&&(a+=t.CreditAccount.SelectedValue),null!=t.DebitAccount&&t.DebitAccount.SelectedValue>0&&(a.length>0&&(a+=","),a+=t.DebitAccount.SelectedValue),a.length>0&&(g+=" and B.AccountID in("+a+")")}else if(e.CostCenterID.toString()!=s.a.SessionManager.Preferences.BudgetDimension&&n>5e4&&e.CostCenterID.toString()!=s.a.SessionManager.Preferences.BudgetDimension){var o=t._CCFields.find((function(t){return t instanceof c.b&&t.DBColumnName.toLowerCase()=="dcccnid"+(parseInt(e.CostCenterID)-5e4)}));null!=o&&o.SelectedValue>0&&(g+=" and B.CCNID"+(o.CCID-5e4)+"="+o.SelectedValue)}})),g.length>0&&(I.CustomWhere="A.NodeID IN (select B.CCNID"+(parseInt(s.a.SessionManager.Preferences.BudgetDimension)-5e4)+" from COM_BudgetAlloc B with(nolock)\n                        where B.BudgetDefID="+y[0].BudgetDefID.toString()+g+"\n                        union\n                        select B.CCNID"+(parseInt(s.a.SessionManager.Preferences.BudgetDimension)-5e4)+"\n                        from COM_CostCenterCostCenterMap M with(nolock) \n                        inner join COM_BudgetAlloc B with(nolock) ON B.CCNID"+(parseInt(s.a.SessionManager.Preferences.BudgetDimension)-5e4)+"=M.NodeID\n                        where B.BudgetDefID="+y[0].BudgetDefID.toString()+" and B.AccountID="+s.a.SessionManager.Preferences.BudgetAccount+" and M.ParentCostCenterID=2 and M.CostCenterID="+s.a.SessionManager.Preferences.BudgetDimension+"\n                        "+g.replace("B.AccountID","M.ParentNodeID")+" group by B.CCNID"+(parseInt(s.a.SessionManager.Preferences.BudgetDimension)-5e4)+")")}!a.e.IsEmpty(n.Lbl)&&this.CheckFormulaExists(n.Lbl)&&this.ReferenceCallBack.IsSubscribed&&this.ReferenceCallBack.Call({ReferenceTable:null,ReferenceEditTable:null,DBColumnName:"ReCalculate",ccid:n.CCID,dr:null})}}},{key:"FilterDependencies",value:function(e){var t=this;this._CCFields.filter((function(t){return null!=t.DependantOn&&t.DependantOn.toLowerCase()==e.DBColumnName.toLowerCase()})).forEach((function(n){if(n instanceof c.b||n instanceof D.a){var s,o="";(s=n.CCID)>5e4?n instanceof c.b&&!a.e.IsEmpty(n.ToolTipTitle)&&2==e.CCID?o=n.ToolTipTitle+"="+e.SelectedValue.toString():n instanceof c.b&&n.Dependantinuse||n instanceof D.a&&n.Dependantinuse?(o="("+e.DBColumnName.replace("dc","")+"="+e.SelectedValue.toString(),(n instanceof c.b&&1==n.Dependancy||n instanceof D.a&&1==n.Dependancy)&&(o+=" OR "+e.DBColumnName.replace("dc","")+"=1 "),o+=")"):o=n instanceof c.b&&5==n.Dependancy||n instanceof D.a&&5==n.Dependancy?"  JOIN "+t.GetTableName(s)+" CMJ with(nolock) ON a.lft between  CMJ.lft and CMJ.rgt JOIN COM_CostCenterCostCenterMap CM on CM.CostCenterID="+s+" and CM.ParentCostCenterID="+e.CCID+" and CM.ParentNodeID="+e.SelectedValue.toString()+" and CMJ.NodeID=CM.NodeID ":"  JOIN COM_CostCenterCostCenterMap CM with(nolock) on CM.ParentCostCenterID="+s+" and a.NodeID=CM.ParentNodeID \n                                JOIN "+t.GetTableName(e.CCID)+" CMJ with(nolock) ON CM.CostCenterID= "+e.CCID+"   and CM.NodeID=CMJ."+t.GetPrimaryKey(e.CCID)+" \n                                JOIN "+t.GetTableName(e.CCID)+" CMJG with(nolock) ON CMJG.lft between  CMJ.lft and CMJ.rgt and CMJG."+t.GetPrimaryKey(e.CCID)+" ="+e.SelectedValue:65==s?o="(FeatureID="+e.CCID+" and  FeaturePK="+e.SelectedValue.toString()+")":7==s&&(o="  JOIN COM_CostCenterCostCenterMap CM with(nolock) on CM.ParentCostCenterID=7 and a.UserID=CM.ParentNodeID  and CM.CostCenterID= "+e.CCID+" and CM.NodeID="+e.SelectedValue),n instanceof c.b?n.CustomWhere=o:n instanceof D.a&&(n.Code.CustomWhere=n.Name.CustomWhere=o)}}))}},{key:"GetControls",value:function(e,t){try{return null==this.Data&&(this.Data=this.GetScreenInfo(parseInt(e))),this.Data}catch(n){return alert("error-GetControls()"),Logger.ErrorLog("VoucherGenerator:: GetControls"+n.stack),null}}},{key:"LoadScreen",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;try{if(null==this.Data){var o=function(){if(t.oParent=e,t.Data=t.GetScreenInfo(t.CostCenterID),t.Data.Tables.length<3)return{v:void(t.IsAccessDenied=!0)};if(t.DocumentType=parseInt(t.Data.Tables[3][0].DocumentType),38==t.DocumentType||39==t.DocumentType){var o=s.a.document.GetPosDetails(t.CostCenterID,n);o.Tables.length>0&&(t.Data.Tables[1]=o.Tables[0],t.Data.Columns[1]=o.Columns[0],t.Data.Tables[11]=o.Tables[1],t.Data.Columns[11]=o.Columns[1])}if((38==t.DocumentType||39==t.DocumentType)&&0==t.Data.Tables[1].length)return{v:void 0};if((38==t.DocumentType||39==t.DocumentType)&&(t.RegisterNodeID=parseInt(t.Data.Tables[1][0].NOdeID),t.ShiftNodeID=""==t.Data.Tables[1][0].ShiftID.toString()||"0"==t.Data.Tables[1][0].ShiftID.toString()?t.GetShifts(new Date(t.Data.Tables[1][0].Day)):parseInt(t.Data.Tables[1][0].ShiftID),0==t.Data.Tables[8].filter((function(e){return e.CCID==s.a.SessionManager.RegisterCCID})).length))return{v:void 0};if(t.IsInventory=Object(S.j)(t.Data.Tables[3][0].IsInventory),t.CCguid=t.Data.Tables[3][0].GUID.toString(),t.CheckIsPurchase(),100==t.DocumentType)t.GridTitle="Travel Details";else if(t.IsInventory){if(t.GridTitle="Product Details",t.IsPayrollDocument)switch(t.DocumentType){case 62:t.GridTitle="Leave Details";break;case 90:t.GridTitle="Timesheet Details";break;case 89:t.GridTitle="Attendance Details";break;default:t.GridTitle="Details"}}else t.GridTitle="Account Details";if(t.Data.Tables.length>7&&t.Data.Tables[7].length>0){for(var i=0;i<t.Data.Tables[7].length;i++)t.Preferences.ContainsKey(t.Data.Tables[7][i].PrefName.toString())||t.Preferences.push(t.Data.Tables[7][i].PrefName.toString(),t.Data.Tables[7][i].PrefValue.toString());t.Preferences.ContainsKey("ControlAccountFilterField")&&s.a.SessionManager.Preferences.ContainsKey("IsControlAccounts")&&"FALSE"==s.a.SessionManager.Preferences.IsControlAccounts.toUpperCase()&&(t.Preferences.ControlAccountFilterField=""),t.Preferences.ContainsKey("AutoChequeNo")&&"TRUE"==t.Preferences.AutoChequeNo.toUpperCase()&&s.a.SessionManager.LicenseSettings.ContainsKey("ChequeBookManagement")&&"FALSE"==s.a.SessionManager.LicenseSettings.ChequeBookManagement.toUpperCase()&&(t.Preferences.AutoChequeNo="False"),s.a.SessionManager.LicenseSettings.ContainsKey("CrossDimension")&&"FALSE"==s.a.SessionManager.LicenseSettings.CrossDimension.toUpperCase()&&(t.Preferences.ContainsKey("UseasCrossDimension")&&"TRUE"==t.Preferences.UseasCrossDimension.toUpperCase()&&(t.Preferences.UseasCrossDimension="False"),t.Preferences.ContainsKey("CrossDimDocument")&&""!=t.Preferences.CrossDimDocument.toUpperCase()&&(t.Preferences.CrossDimDocument=""),t.Preferences.ContainsKey("CrossDimField")&&""!=t.Preferences.CrossDimField.toUpperCase()&&(t.Preferences.CrossDimField="")),s.a.SessionManager.LicenseSettings.ContainsKey("LCTR")&&"FALSE"==s.a.SessionManager.LicenseSettings.LCTR.toUpperCase()&&(t.Preferences.ContainsKey("UseAsLC")&&"TRUE"==t.Preferences.UseAsLC.toUpperCase()&&(t.Preferences.UseAsLC="False"),t.Preferences.ContainsKey("EnableLC")&&"TRUE"==t.Preferences.EnableLC.toUpperCase()&&(t.Preferences.EnableLC="False"),t.Preferences.ContainsKey("LcCloseDocument")&&""!=t.Preferences.LcCloseDocument.toUpperCase()&&(t.Preferences.LcCloseDocument="")),t.Preferences.ContainsKey("EnableTestcase")&&"TRUE"==t.Preferences.EnableTestcase.toUpperCase()&&s.a.SessionManager.LicenseSettings.ContainsKey("QC")&&"FALSE"==s.a.SessionManager.LicenseSettings.QC.toUpperCase()&&(t.Preferences.EnableTestcase="False"),s.a.SessionManager.LicenseSettings.ContainsKey("Kit")&&"FALSE"==s.a.SessionManager.LicenseSettings.Kit.toUpperCase()&&(t.Preferences.ContainsKey("dynamicsetProductwiselinking")&&"TRUE"==t.Preferences.dynamicsetProductwiselinking.toUpperCase()&&(t.Preferences.dynamicsetProductwiselinking="False"),t.Preferences.ContainsKey("SplitKit")&&"TRUE"==t.Preferences.SplitKit.toUpperCase()&&(t.Preferences.SplitKit="False"),t.Preferences.ContainsKey("KitAccPosting")&&"TRUE"==t.Preferences.KitAccPosting.toUpperCase()&&(t.Preferences.KitAccPosting="False")),s.a.SessionManager.LicenseSettings.ContainsKey("Bins")&&"FALSE"==s.a.SessionManager.LicenseSettings.Bins.toUpperCase()&&(t.Preferences.ContainsKey("AutoAdjustBinLinking")&&"TRUE"==t.Preferences.AutoAdjustBinLinking.toUpperCase()&&(t.Preferences.AutoAdjustBinLinking="False"),t.Preferences.ContainsKey("AutoAdjustBins")&&"TRUE"==t.Preferences.AutoAdjustBins.toUpperCase()&&(t.Preferences.AutoAdjustBins="False"),t.Preferences.ContainsKey("CopyBins")&&"TRUE"==t.Preferences.CopyBins.toUpperCase()&&(t.Preferences.CopyBins="False"),t.Preferences.ContainsKey("DuplicateProductClubBins")&&"TRUE"==t.Preferences.DuplicateProductClubBins.toUpperCase()&&(t.Preferences.DuplicateProductClubBins="False"),t.Preferences.ContainsKey("OptionalBins")&&"TRUE"==t.Preferences.OptionalBins.toUpperCase()&&(t.Preferences.OptionalBins="False"),t.Preferences.ContainsKey("ShowBins")&&"TRUE"==t.Preferences.ShowBins.toUpperCase()&&(t.Preferences.ShowBins="False")),s.a.SessionManager.LicenseSettings.ContainsKey("Packing")&&"FALSE"==s.a.SessionManager.LicenseSettings.Packing.toUpperCase()&&(t.Preferences.ContainsKey("EnablePacking")&&"TRUE"==t.Preferences.EnablePacking.toUpperCase()&&(t.Preferences.EnablePacking="False"),t.Preferences.ContainsKey("Checkpackedqty")&&"TRUE"==t.Preferences.Checkpackedqty.toUpperCase()&&(t.Preferences.Checkpackedqty="False"),t.Preferences.ContainsKey("LineWisePacking")&&"TRUE"==t.Preferences.LineWisePacking.toUpperCase()&&(t.Preferences.LineWisePacking="False"),t.Preferences.ContainsKey("Linkallprodspacked")&&"TRUE"==t.Preferences.Linkallprodspacked.toUpperCase()&&(t.Preferences.Linkallprodspacked="False"),t.Preferences.ContainsKey("ScanPack")&&"TRUE"==t.Preferences.ScanPack.toUpperCase()&&(t.Preferences.ScanPack="False"),t.Preferences.ContainsKey("ShowPackStat")&&"TRUE"==t.Preferences.ShowPackStat.toUpperCase()&&(t.Preferences.ShowPackStat="False"),t.Preferences.ContainsKey("PackMandScan")&&"TRUE"==t.Preferences.PackMandScan.toUpperCase()&&(t.Preferences.PackMandScan="False"),t.Preferences.ContainsKey("DefaultPack")&&""!=t.Preferences.DefaultPack.toUpperCase()&&(t.Preferences.DefaultPack=""),t.Preferences.ContainsKey("PackLabel")&&""!=t.Preferences.PackLabel.toUpperCase()&&(t.Preferences.PackLabel=""),t.Preferences.ContainsKey("PackWiseProds")&&""!=t.Preferences.PackWiseProds.toUpperCase()&&(t.Preferences.PackWiseProds="")),s.a.SessionManager.LicenseSettings.ContainsKey("Substitutes")&&"FALSE"==s.a.SessionManager.LicenseSettings.Substitutes.toUpperCase()&&(t.Preferences.ContainsKey("EnableSubtitutes")&&"TRUE"==t.Preferences.EnableSubtitutes.toUpperCase()&&(t.Preferences.EnableSubtitutes="False"),t.Preferences.ContainsKey("EnableSubtitutesQty")&&"TRUE"==t.Preferences.EnableSubtitutesQty.toUpperCase()&&(t.Preferences.EnableSubtitutesQty="False"),t.Preferences.ContainsKey("ShowSubQOH")&&"TRUE"==t.Preferences.ShowSubQOH.toUpperCase()&&(t.Preferences.ShowSubQOH="False"),t.Preferences.ContainsKey("SubonProdChange")&&"TRUE"==t.Preferences.SubonProdChange.toUpperCase()&&(t.Preferences.SubonProdChange="False"),t.Preferences.ContainsKey("SubstituteOnQty")&&"TRUE"==t.Preferences.SubstituteOnQty.toUpperCase()&&(t.Preferences.SubstituteOnQty="")),s.a.SessionManager.LicenseSettings.ContainsKey("Barcode")&&"FALSE"==s.a.SessionManager.LicenseSettings.Barcode.toUpperCase()&&(t.Preferences.ContainsKey("UsingBarCodes")&&"TRUE"==t.Preferences.UsingBarCodes.toUpperCase()&&(t.Preferences.UsingBarCodes="False"),t.Preferences.ContainsKey("BarcodeField")&&"TRUE"==t.Preferences.BarcodeField.toUpperCase()&&(t.Preferences.BarcodeField="")),t.Preferences.ContainsKey("PriceChartMapping")&&""!=t.Preferences.PriceChartMapping.toUpperCase()&&s.a.SessionManager.LicenseSettings.ContainsKey("PriceChartFromDocument")&&"FALSE"==s.a.SessionManager.LicenseSettings.PriceChartFromDocument.toUpperCase()&&(t.Preferences.PriceChartMapping=""),s.a.SessionManager.LicenseSettings.ContainsKey("Hold_Release")&&"FALSE"==s.a.SessionManager.LicenseSettings.Hold_Release.toUpperCase()&&(t.Preferences.ContainsKey("Enable Hold")&&"TRUE"==t.Preferences["Enable Hold"].toUpperCase()&&(t.Preferences["Enable Hold"]="False"),t.Preferences.ContainsKey("enebleSaveonhold")&&"TRUE"==t.Preferences.enebleSaveonhold.toUpperCase()&&(t.Preferences.enebleSaveonhold="False")),t.Preferences.ContainsKey("ImpPrf")&&""!=t.Preferences.ImpPrf.toUpperCase()&&s.a.SessionManager.LicenseSettings.ContainsKey("Import")&&"FALSE"==s.a.SessionManager.LicenseSettings.Import.toUpperCase()&&(t.Preferences.ImpPrf=""),s.a.SessionManager.LicenseSettings.ContainsKey("SKU")&&"FALSE"==s.a.SessionManager.LicenseSettings.SKU.toUpperCase()&&(t.Preferences.ContainsKey("DumpStockCodes")&&"TRUE"==t.Preferences.DumpStockCodes.toUpperCase()&&(t.Preferences.DumpStockCodes="False"),t.Preferences.ContainsKey("OnScan")&&""!=t.Preferences.OnScan.toUpperCase()&&(t.Preferences.OnScan="")),s.a.SessionManager.LicenseSettings.ContainsKey("PaymentTerms")&&"FALSE"==s.a.SessionManager.LicenseSettings.PaymentTerms.toUpperCase()&&(t.Preferences.ContainsKey("accountwisePaymentTerms")&&"TRUE"==t.Preferences.accountwisePaymentTerms.toUpperCase()&&(t.Preferences.accountwisePaymentTerms="False"),t.Preferences.ContainsKey("CopyPaymentTerms")&&"TRUE"==t.Preferences.CopyPaymentTerms.toUpperCase()&&(t.Preferences.CopyPaymentTerms="False"),t.Preferences.ContainsKey("Enable Payment Terms")&&"TRUE"==t.Preferences["Enable Payment Terms"].toUpperCase()&&(t.Preferences["Enable Payment Terms"]="False"),t.Preferences.ContainsKey("ShowPercentPayTerms")&&"TRUE"==t.Preferences.ShowPercentPayTerms.toUpperCase()&&(t.Preferences.ShowPercentPayTerms="False"),t.Preferences.ContainsKey("Paytermids")&&""!=t.Preferences.Paytermids.toUpperCase()&&(t.Preferences.Paytermids=""),t.Preferences.ContainsKey("Paymenttermsbasedon")&&""!=t.Preferences.Paymenttermsbasedon.toUpperCase()&&(t.Preferences.Paymenttermsbasedon="")),s.a.SessionManager.LicenseSettings.ContainsKey("Schemes")&&"FALSE"==s.a.SessionManager.LicenseSettings.Schemes.toUpperCase()&&(t.Preferences.ContainsKey("EnableSchemes")&&"TRUE"==t.Preferences.EnableSchemes.toUpperCase()&&(t.Preferences.EnableSchemes="False"),t.Preferences.ContainsKey("SchemesNumericFields")&&""!=t.Preferences.SchemesNumericFields.toUpperCase()&&(t.Preferences.SchemesNumericFields=""),t.Preferences.ContainsKey("SchemesValueField")&&""!=t.Preferences.SchemesValueField.toUpperCase()&&(t.Preferences.SchemesValueField=""),t.Preferences.ContainsKey("DonotUpdateSchemeQty")&&"TRUE"==t.Preferences.DonotUpdateSchemeQty.toUpperCase()&&(t.Preferences.DonotUpdateSchemeQty="False"),t.Preferences.ContainsKey("GetSchemeQty")&&"TRUE"==t.Preferences.GetSchemeQty.toUpperCase()&&(t.Preferences.GetSchemeQty="False"),t.Preferences.ContainsKey("PriceScheme")&&"TRUE"==t.Preferences.PriceScheme.toUpperCase()&&(t.Preferences.PriceScheme="False"),t.Preferences.ContainsKey("ValidateSchemeBeforeSave")&&"TRUE"==t.Preferences.ValidateSchemeBeforeSave.toUpperCase()&&(t.Preferences.ValidateSchemeBeforeSave="False")),s.a.SessionManager.LicenseSettings.ContainsKey("DimensionMapping")&&"FALSE"==s.a.SessionManager.LicenseSettings.DimensionMapping.toUpperCase()&&t.Preferences.ContainsKey("DefaultProfileID")&&""!=t.Preferences.DefaultProfileID.toUpperCase()&&(t.Preferences.DefaultProfileID=""),s.a.SessionManager.LicenseSettings.ContainsKey("TemporaryProduct")&&"FALSE"==s.a.SessionManager.LicenseSettings.TemporaryProduct.toUpperCase()&&(t.Preferences.ContainsKey("onlyTempProduct")&&"TRUE"==t.Preferences.onlyTempProduct.toUpperCase()&&(t.Preferences.onlyTempProduct="False"),t.Preferences.ContainsKey("ExcludeTemproducts")&&"TRUE"==t.Preferences.ExcludeTemproducts.toUpperCase()&&(t.Preferences.ExcludeTemproducts="False"),t.Preferences.ContainsKey("IgnoreTempProduct")&&"TRUE"==t.Preferences.IgnoreTempProduct.toUpperCase()&&(t.Preferences.IgnoreTempProduct="False"),t.Preferences.ContainsKey("MandatorytempPartinfo")&&"TRUE"==t.Preferences.MandatorytempPartinfo.toUpperCase()&&(t.Preferences.MandatorytempPartinfo="False"),t.Preferences.ContainsKey("TempInfo")&&"TRUE"==t.Preferences.TempInfo.toUpperCase()&&(t.Preferences.TempInfo="False")),t.Preferences.ContainsKey("Enabletolerance")&&"TRUE"==t.Preferences.Enabletolerance.toUpperCase()&&s.a.SessionManager.LicenseSettings.ContainsKey("ToleranceManagement")&&"FALSE"==s.a.SessionManager.LicenseSettings.ToleranceManagement.toUpperCase()&&(t.Preferences.Enabletolerance="False")}if(t.Preferences.ContainsKey("IsBudgetDocument")&&"1"==t.Preferences.IsBudgetDocument){var r=new a.f;r.LoadXml(t.Preferences.BudgetMapFields),t.Preferences.ContainsKey("BudgetType")||t.Preferences.push("BudgetType",r.DocumentElement.attributes.BudgetType.value),5!=t.DocumentType&&8!=t.DocumentType&&13!=t.DocumentType||t.Preferences.ContainsKey("CF")||!r.DocumentElement.attributes.CF||t.Preferences.Add("BudgetFeild",r.DocumentElement.attributes.CF.value),t.Preferences.ContainsKey("BudgetDoc")||null==r.DocumentElement.attributes.BudgetDoc||t.Preferences.push("BudgetDoc",r.DocumentElement.attributes.BudgetDoc.value),t.Preferences.ContainsKey("Dims")||null==r.DocumentElement.attributes.Dims||t.Preferences.push("BudgetDims",r.DocumentElement.attributes.Dims.Value),a.f.SelectSingleNode(r.DocumentElement,"Map");var l=a.f.SelectNodes(r.DocumentElement,"Map/R");if(l.filter((function(e){return"AnnualAmount"==e.attributes.B.value})).length>0&&!t.Preferences.ContainsKey("BudgetAnnualAmount")){t.Preferences.push("BudgetAnnualAmount",l[0].attributes.D.value);var D=0;l.forEach((function(e){(e.attributes.B.value.startsWith("Month")||e.attributes.B.value.startsWith("Qtr")||e.attributes.B.value.startsWith("YearH"))&&t.Preferences.push("BudgetField"+ ++D,e.attributes.D.value)}))}}if(t.Data.Tables.length>2&&t.Data.Tables[2].length>0&&t.IsInventory)for(var C=0;C<t.Data.Tables[2].length;C++)a.e.IsEmpty(t.Data.Tables[2][C].CostCenterID)||"3"==t.Data.Tables[2][C].DefType.toString()||("1"==t.Data.Tables[2][C].DefType.toString()?t.PriceTaxcc.ContainsKey(parseInt(t.Data.Tables[2][C].CostCenterID))?t.PriceTaxcc[parseInt(t.Data.Tables[2][C].CostCenterID)]=t.PriceTaxcc[parseInt(t.Data.Tables[2][C].CostCenterID)]+",p":t.PriceTaxcc.push(parseInt(t.Data.Tables[2][C].CostCenterID),"p"):"2"==t.Data.Tables[2][C].DefType.toString()&&(t.PriceTaxcc.ContainsKey(parseInt(t.Data.Tables[2][C].CostCenterID))?t.PriceTaxcc[parseInt(t.Data.Tables[2][C].CostCenterID)]=t.PriceTaxcc[parseInt(t.Data.Tables[2][C].CostCenterID)]+",t":t.PriceTaxcc.push(parseInt(t.Data.Tables[2][C].CostCenterID),"t")));if(t.Preferences.ContainsKey("DefaultProfileID")&&""!=t.Preferences.DefaultProfileID&&t.Data.Tables.length>22&&t.Data.Tables[22].length>0&&t.Data.Columns[22].Contains("DefXml")&&!a.e.IsEmpty(t.Data.Tables[22][0].DefXml)){for(var d=0;d<t.Data.Tables[22].length;d++)for(var f=(new DOMParser).parseFromString(t.Data.Tables[22][d].DefXml,"text/xml").getElementsByTagName("Row"),I=0;I<f.length;I++)f[I].attributes.cols&&!t.DefaultBasedOn.ContainsKey(f[I].attributes.cols.value)&&f[I].attributes.IsBase&&"1"==f[I].attributes.IsBase.value&&t.DefaultBasedOn.push(f[I].attributes.cols.value,t.Data.Tables[22][d].profileID.toString());t.Data.Tables[22].length>1&&(t.Preferences.DefaultProfileID=t.DefaultBasedOn.ContainsKey("3")?t.DefaultBasedOn[3]:t.DefaultBasedOn.values[0])}else t.Preferences.ContainsKey("DefaultProfileID")&&t.Preferences.Remove("DefaultProfileID");var y=t.Data.Tables[0].filter((function(e){return 1==e.SectionID}));if(t.GenerateCustomFields(y,t.HeaderFields),t.Data.Tables.length>6&&t.Data.Tables[6].length>0&&(!t.Preferences.ContainsKey("Productwise")||t.Preferences.ContainsKey("Productwise")&&null!=t.Preferences.Productwise&&!Object(S.j)(t.Preferences.Productwise))){t.Link=new m.a(0),t.Link.DBColumnName="Link",t.Link.LinkCombo.DBColumnName="LinkDocs",t.Link.DocumentList.DBColumnName="LinkVnos",t.Link.DocumentList.LblWidth="0px";for(var g=0;g<t.Data.Tables[6].length;g++){var b;b=!(!t.Data.Columns[6].Contains("IsDefault")||a.e.IsEmpty(t.Data.Tables[6][g].IsDefault))&&Object(S.j)(t.Data.Tables[6][g].IsDefault),t.Link.LinkCombo.Items.push(u.d.ComboBoxItems_6(a.e.String(t.Data.Tables[6][g].DocumentName),t.Data.Tables[6][g].DocumentLinkDefID.toString(),b,a.e.String(t.Data.Tables[6][g].AutoSelect),t.Data.Tables[6][g].CostCenterIDLinked.toString())),b&&(t.Link.LinkCombo.SelectedItem=t.Link.LinkCombo.Items[g],t.Link.LinkCombo.SelectedValue=t.Data.Tables[6][g].DocumentLinkDefID.toString())}t.Link.DocumentList.Visible=!1,t.Link.Row=0,t.Link.Column=3,t.Link.RowSpan=3,t.Link.LinkCombo.Label="Document"}t.GenerateBody(),t.IsInventory&&t.GenerateFooter(),t.CheckRWFieldsExists_0(),t.GridDataObj.TableNewRow.Subscribe(t,"onAddRow"),t.Preferences.ContainsKey("Dynamic Footer")&&null!=t.Preferences["Dynamic Footer"]&&Object(S.j)(t.Preferences["Dynamic Footer"])&&t.FooterGridDataObj.TableNewRow.Subscribe(t,"onAddRowFoot");var T,P=null,M=t.Data.Tables[0].filter((function(e){return 2==e.SectionID}));M.sort((function(e,t){return e.SectionSeqNumber-t.SectionSeqNumber}));for(var L=function(e){if(null==t.CustomTab.Pages.find((function(t){return null!=M[e].SectionName&&t.Header.toLowerCase()==M[e].SectionName.toString().toLowerCase()}))){var n=new h.b;P=a.e.String(M[e].SectionName),n.Name=P,n.Header=P,t.CustomTab.Pages.push(n)}},N=0;N<M.length;N++)L(N);t.SectionOrders.Clear(),(T=a.e.IsEmpty(t.Preferences.ShowasSections)?[]:t.Preferences.ShowasSections.split(",")).Contains("PRIMARY SECTION")||T.InsertAt("PRIMARY SECTION",0),T.Contains("EXTRA FIELDS TAB")||T.InsertAt("EXTRA FIELDS TAB",1),T.Contains("BODY")||T.InsertAt("BODY",2),t.Preferences.ContainsKey("HideBody")&&"True"==t.Preferences.HideBody&&T.Remove("BODY");var v=0,E=0;T.forEach((function(e){if(t.SectionOrders.Add(e,++E),"PRIMARY SECTION"!=e&&"EXTRA FIELDS TAB"!=e&&"BODY"!=e){var n=t.CustomTab.Pages.find((function(t){return t.Name==e}));n?(n.TabType=2,t.CustomTab.Pages.Remove(n),t.CustomTab.Pages.InsertAt(n,v++)):((n=new h.b).Header=e,n.Name=e,n.TabType=3,t.CustomTab.Pages.InsertAt(n,v++)),n.Row=E}})),t.CustomTab.Pages.map((function(e){return e.IsAccordionOpen=t.Preferences.ContainsKey("OpenAllSection")&&"True"==t.Preferences.OpenAllSection}));for(var V=!1,A=function(e){(y=t.Data.Tables[0].filter((function(n){return 2==n.SectionID&&(null!=n.SectionName?n.SectionName:"").toLowerCase()==t.CustomTab.Pages[e].Name.toLowerCase()}))).sort((function(e,t){return e.SectionSeqNumber-t.SectionSeqNumber})),t.GenerateCustomFields(y,t.CustomTab.Pages[e].Fields),t.CustomTab.Pages[e].Fields.find((function(e){return e instanceof p.c&&e.Visible}))?V=!0:t.CustomTab.Pages[e].Visible=!1},F=0;F<t.CustomTab.Pages.length;F++)A(F);if(t.CustomTab.Pages.length>0&&V?(t.CustomTab.Visible=!0,t.CustomTab.Pages[0].Visible?t.CustomTab.SelectedTab=t.CustomTab.Pages[0]:t.CustomTab.Pages.length>1&&(t.CustomTab.SelectedTab=t.CustomTab.Pages[1])):t.CustomTab.Visible=!1,t.Data.Tables.length>16&&t.Data.Tables[16].length>0){var R=t.Data.Tables[16].filter((function(e){return"BinsDimension"==e.name}));R.length>0&&a.e.IsNum(R[0].value)&&t.Preferences.push("BinsDimension",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"ProductWiseBins"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("ProductWiseBins",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"NoOfBins"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("NoOfBins",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"ConsolidatedBins"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("ConsolidatedBins",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"bincapacityonVolume"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("bincapacityonVolume",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"AutoSelectBins"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("AutoSelectBins",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"DefaultDelimiter"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("DefaultDelimiter",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"IgnoreFirstDelimiter"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("IgnoreFirstDelimiter",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"ScanMultiple"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("ScanMultiple",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"DonotExceedCapacity"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("DonotExceedCapacity",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"JobDimension"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("jobCCID",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"StageDimension"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("StageCCID",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"BomDimension"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("BomCCID",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"BinFilterinPopup"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("BinFilterinPopup",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"BinFilterDim"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("BinFilterDim",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"ExcludeHoldBins"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("ExcludeHoldBins",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"ExcludeHold"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("ExcludeHold",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"ExcludeReserve"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("ExcludeReserve",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"JobFilterDim"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("JobUnqCCID",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"BarcodeDimension"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("BarcodeDimension",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"JobRemainingQty"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("JobRemainingQty",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"BatchFilterDim"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("BatchFilterDim",R[0].value.toString()),R=t.Data.Tables[16].filter((function(e){return"TempPartProduct"==e.name})),t.TempProductID=R.length>0&&!a.e.IsEmpty(R[0].value)&&a.e.IsNum(R[0].value)?parseInt(R[0].value.toString()):0,(R=t.Data.Tables[16].filter((function(e){return"Waistage"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("Waistage",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"AllowNegativebatches"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("AllowNegativebatches",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"DueDateCheck"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("BUDGET_DueDateCheck",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"BudgetDateField"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("BUDGET_BudgetDateField",R[0].value.toString()),(R=t.Data.Tables[16].filter((function(e){return"BudgetAccountField"==e.name}))).length>0&&!a.e.IsEmpty(R[0].value)&&t.Preferences.push("BUDGET_BudgetAccountField",R[0].value.toString())}if(t.Preferences.ContainsKey("TwoColumnLayout")&&"True"==t.Preferences.TwoColumnLayout&&(t.HeaderFields.forEach((function(e){e.LblWidth="140",e.ColumnSpan=2*e.ColumnSpan})),t.CustomTab.Pages.forEach((function(e){e.Fields.forEach((function(e){e.LblWidth="140",e.ColumnSpan=2*e.ColumnSpan}))}))),t.CheckViewForUser(0),s.a.SessionManager.Is_SIMPLE_License&&t.SimpleLicensedDocumentPreferences(),0!=s.a.SessionManager.LoginDimension&&0!=s.a.SessionManager.ESSID){var G=t._CCFields.find((function(e){return e.CCID==s.a.SessionManager.LoginDimension}));G instanceof c.b&&(G.PreviousSelectedValue=s.a.SessionManager.ESSID,G.SelectedValue=s.a.SessionManager.ESSID,G.DefaultValue=s.a.SessionManager.ESSID.toString(),G.Enable=!1,t.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&e.LocalReference==G.DBColumnID})).length>0&&t.GetLinkReferenceData(G.DBColumnID,t.CostCenterID,G.SelectedValue,t.DocDate.Date,G.DBColumnName,G.CCID,null))}}();if("object"==typeof o)return o.v}}catch(i){alert("error-loadscreen:: "+i.stack),Logger.ErrorLog("VoucherGenerator:: LoadScreen : "+i.stack)}}},{key:"SimpleLicensedDocumentPreferences",value:function(){this.Preferences.ContainsKey("LineWisePacking")&&"TRUE"==this.Preferences.LineWisePacking.toUpperCase()&&(this.Preferences.LineWisePacking="False"),this.Preferences.ContainsKey("Select Port")&&"TRUE"==this.Preferences["Select Port"].toUpperCase()&&(this.Preferences["Select Port"]="False"),this.Preferences.ContainsKey("DontAllowNegative")&&"TRUE"==this.Preferences.DontAllowNegative.toUpperCase()&&(this.Preferences.DontAllowNegative="False"),this.Preferences.ContainsKey("DumpStockCodes")&&"TRUE"==this.Preferences.DumpStockCodes.toUpperCase()&&(this.Preferences.DumpStockCodes="False"),this.Preferences.ContainsKey("EnableTouch")&&"TRUE"==this.Preferences.EnableTouch.toUpperCase()&&(this.Preferences.EnableTouch="False"),this.Preferences.ContainsKey("PartialRecur")&&"TRUE"==this.Preferences.PartialRecur.toUpperCase()&&(this.Preferences.PartialRecur="False"),this.Preferences.ContainsKey("DistributeCost")&&"TRUE"==this.Preferences.DistributeCost.toUpperCase()&&(this.Preferences.DistributeCost="False"),this.Preferences.ContainsKey("EnablePacking")&&"TRUE"==this.Preferences.EnablePacking.toUpperCase()&&(this.Preferences.EnablePacking="False"),this.Preferences.ContainsKey("PackWiseProds")&&"TRUE"==this.Preferences.PackWiseProds.toUpperCase()&&(this.Preferences.PackWiseProds="False"),this.Preferences.ContainsKey("AssembleCalcOPRate")&&"TRUE"==this.Preferences.AssembleCalcOPRate.toUpperCase()&&(this.Preferences.AssembleCalcOPRate="False"),this.Preferences.ContainsKey("AutoIssueNextStage")&&"TRUE"==this.Preferences.AutoIssueNextStage.toUpperCase()&&(this.Preferences.AutoIssueNextStage="False"),this.Preferences.ContainsKey("Check Budget")&&"TRUE"==this.Preferences["Check Budget"].toUpperCase()&&(this.Preferences["Check Budget"]="False"),this.Preferences.ContainsKey("PackMandScan")&&"TRUE"==this.Preferences.PackMandScan.toUpperCase()&&(this.Preferences.PackMandScan="False"),this.Preferences.ContainsKey("PosPostings")&&"TRUE"==this.Preferences.PosPostings.toUpperCase()&&(this.Preferences.PosPostings="False"),this.Preferences.ContainsKey("Open Cash Drawer")&&"TRUE"==this.Preferences["Open Cash Drawer"].toUpperCase()&&(this.Preferences["Open Cash Drawer"]="False"),this.Preferences.ContainsKey("PackLabel")&&"TRUE"==this.Preferences.PackLabel.toUpperCase()&&(this.Preferences.PackLabel="False"),this.Preferences.ContainsKey("UseAsLC")&&"TRUE"==this.Preferences.UseAsLC.toUpperCase()&&(this.Preferences.UseAsLC="False"),this.Preferences.ContainsKey("AutoRejoinVacation")&&"TRUE"==this.Preferences.AutoRejoinVacation.toUpperCase()&&(this.Preferences.AutoRejoinVacation="False"),this.Preferences.ContainsKey("CalcOpRate")&&"TRUE"==this.Preferences.CalcOpRate.toUpperCase()&&(this.Preferences.CalcOpRate="False"),this.Preferences.ContainsKey("OptionalBins")&&"TRUE"==this.Preferences.OptionalBins.toUpperCase()&&(this.Preferences.OptionalBins="False"),this.Preferences.ContainsKey("UseasCrossDimension")&&"TRUE"==this.Preferences.UseasCrossDimension.toUpperCase()&&(this.Preferences.UseasCrossDimension="False"),this.Preferences.ContainsKey("ConsiderVacationDayswhilePayrollProcessing")&&"TRUE"==this.Preferences.ConsiderVacationDayswhilePayrollProcessing.toUpperCase()&&(this.Preferences.ConsiderVacationDayswhilePayrollProcessing="False"),this.Preferences.ContainsKey("DoNotReceiveMoreThanJobQty")&&"TRUE"==this.Preferences.DoNotReceiveMoreThanJobQty.toUpperCase()&&(this.Preferences.DoNotReceiveMoreThanJobQty="False"),this.Preferences.ContainsKey("DuplicateProductClubBins")&&"TRUE"==this.Preferences.DuplicateProductClubBins.toUpperCase()&&(this.Preferences.DuplicateProductClubBins="False"),this.Preferences.ContainsKey("AllowResignationifEmployeeonLeaveorVacation")&&"TRUE"==this.Preferences.AllowResignationifEmployeeonLeaveorVacation.toUpperCase()&&(this.Preferences.AllowResignationifEmployeeonLeaveorVacation="False"),this.Preferences.ContainsKey("UseAsTR")&&"TRUE"==this.Preferences.UseAsTR.toUpperCase()&&(this.Preferences.UseAsTR="False"),this.Preferences.ContainsKey("AutoAdjustBins")&&"TRUE"==this.Preferences.AutoAdjustBins.toUpperCase()&&(this.Preferences.AutoAdjustBins="False"),this.Preferences.ContainsKey("EnableTestcase")&&"TRUE"==this.Preferences.EnableTestcase.toUpperCase()&&(this.Preferences.EnableTestcase="False"),this.Preferences.ContainsKey("jobswithissues")&&"TRUE"==this.Preferences.jobswithissues.toUpperCase()&&(this.Preferences.jobswithissues="False"),this.Preferences.ContainsKey("NoAutoproduce")&&"TRUE"==this.Preferences.NoAutoproduce.toUpperCase()&&(this.Preferences.NoAutoproduce="False"),this.Preferences.ContainsKey("SetUpdatedStartEndTimeToShiftTime")&&"TRUE"==this.Preferences.SetUpdatedStartEndTimeToShiftTime.toUpperCase()&&(this.Preferences.SetUpdatedStartEndTimeToShiftTime="False"),this.Preferences.ContainsKey("ShowBins")&&"TRUE"==this.Preferences.ShowBins.toUpperCase()&&(this.Preferences.ShowBins="False"),this.Preferences.ContainsKey("EnableLC")&&"TRUE"==this.Preferences.EnableLC.toUpperCase()&&(this.Preferences.EnableLC="False"),this.Preferences.ContainsKey("EnableWieghingPopupOnQty")&&"TRUE"==this.Preferences.EnableWieghingPopupOnQty.toUpperCase()&&(this.Preferences.EnableWieghingPopupOnQty="False"),this.Preferences.ContainsKey("UseasPosReciept")&&"TRUE"==this.Preferences.UseasPosReciept.toUpperCase()&&(this.Preferences.UseasPosReciept="False"),this.Preferences.ContainsKey("ShowPackStat")&&"TRUE"==this.Preferences.ShowPackStat.toUpperCase()&&(this.Preferences.ShowPackStat="False"),this.Preferences.ContainsKey("ShowVacationCreditDaysDetail")&&"TRUE"==this.Preferences.ShowVacationCreditDaysDetail.toUpperCase()&&(this.Preferences.ShowVacationCreditDaysDetail="False"),this.Preferences.ContainsKey("TempInfo")&&"TRUE"==this.Preferences.TempInfo.toUpperCase()&&(this.Preferences.TempInfo="False"),this.Preferences.ContainsKey("UpdateGradeandAppraisalData")&&"TRUE"==this.Preferences.UpdateGradeandAppraisalData.toUpperCase()&&(this.Preferences.UpdateGradeandAppraisalData="False"),this.Preferences.ContainsKey("CopyBins")&&"TRUE"==this.Preferences.CopyBins.toUpperCase()&&(this.Preferences.CopyBins="False"),this.Preferences.ContainsKey("ScanPack")&&"TRUE"==this.Preferences.ScanPack.toUpperCase()&&(this.Preferences.ScanPack="False"),this.Preferences.ContainsKey("AutoAdjustBinLinking")&&"TRUE"==this.Preferences.AutoAdjustBinLinking.toUpperCase()&&(this.Preferences.AutoAdjustBinLinking="False"),this.Preferences.ContainsKey("DonotCopyBOE")&&"TRUE"==this.Preferences.DonotCopyBOE.toUpperCase()&&(this.Preferences.DonotCopyBOE="False"),this.Preferences.ContainsKey("Enabletolerance")&&"TRUE"==this.Preferences.Enabletolerance.toUpperCase()&&(this.Preferences.Enabletolerance="False"),this.Preferences.ContainsKey("Linkallprodspacked")&&"TRUE"==this.Preferences.Linkallprodspacked.toUpperCase()&&(this.Preferences.Linkallprodspacked="False"),this.Preferences.ContainsKey("Checkpackedqty")&&"TRUE"==this.Preferences.Checkpackedqty.toUpperCase()&&(this.Preferences.Checkpackedqty="False"),this.Preferences.ContainsKey("DonotConsiderOpeningInPaymode")&&"TRUE"==this.Preferences.DonotConsiderOpeningInPaymode.toUpperCase()&&(this.Preferences.DonotConsiderOpeningInPaymode="False"),this.Preferences.ContainsKey("DonotpostOpening")&&"TRUE"==this.Preferences.DonotpostOpening.toUpperCase()&&(this.Preferences.DonotpostOpening="False"),this.Preferences.ContainsKey("UseasGiftVoucher")&&"TRUE"==this.Preferences.UseasGiftVoucher.toUpperCase()&&(this.Preferences.UseasGiftVoucher="False"),this.Preferences.ContainsKey("LogInasSystemDate")&&"TRUE"==this.Preferences.LogInasSystemDate.toUpperCase()&&(this.Preferences.LogInasSystemDate="False"),this.Preferences.ContainsKey("MandatorySalesMan")&&"TRUE"==this.Preferences.MandatorySalesMan.toUpperCase()&&(this.Preferences.MandatorySalesMan="False"),this.Preferences.ContainsKey("DisplaySno")&&"TRUE"==this.Preferences.DisplaySno.toUpperCase()&&(this.Preferences.DisplaySno="False"),this.Preferences.ContainsKey("DonotShowPayModesinReturn")&&"TRUE"==this.Preferences.DonotShowPayModesinReturn.toUpperCase()&&(this.Preferences.DonotShowPayModesinReturn="False"),this.Preferences.ContainsKey("DisableNumPad")&&"TRUE"==this.Preferences.DisableNumPad.toUpperCase()&&(this.Preferences.DisableNumPad="False"),this.Preferences.ContainsKey("ShowDenom")&&"TRUE"==this.Preferences.ShowDenom.toUpperCase()&&(this.Preferences.ShowDenom="False"),this.Preferences.ContainsKey("SkipNegStock")&&"TRUE"==this.Preferences.SkipNegStock.toUpperCase()&&(this.Preferences.SkipNegStock="False"),this.Preferences.ContainsKey("Cancelinclose")&&"TRUE"==this.Preferences.Cancelinclose.toUpperCase()&&(this.Preferences.Cancelinclose="False"),this.Preferences.ContainsKey("MandatoryDenom")&&"TRUE"==this.Preferences.MandatoryDenom.toUpperCase()&&(this.Preferences.MandatoryDenom="False"),this.Preferences.ContainsKey("PickStockRate")&&"TRUE"==this.Preferences.PickStockRate.toUpperCase()&&(this.Preferences.PickStockRate="False"),this.Preferences.ContainsKey("ShowDenomInClose")&&"TRUE"==this.Preferences.ShowDenomInClose.toUpperCase()&&(this.Preferences.ShowDenomInClose="False"),this.Preferences.ContainsKey("UseAsOrder")&&"TRUE"==this.Preferences.UseAsOrder.toUpperCase()&&(this.Preferences.UseAsOrder="False"),this.Preferences.ContainsKey("CashForeignCurrency")&&"TRUE"==this.Preferences.CashForeignCurrency.toUpperCase()&&(this.Preferences.CashForeignCurrency="False"),this.Preferences.ContainsKey("GetOpCash")&&"TRUE"==this.Preferences.GetOpCash.toUpperCase()&&(this.Preferences.GetOpCash="False"),this.Preferences.ContainsKey("ShowSearchOnProductNotFound")&&"TRUE"==this.Preferences.ShowSearchOnProductNotFound.toUpperCase()&&(this.Preferences.ShowSearchOnProductNotFound="False"),this.Preferences.ContainsKey("CreateNewBatchNo")&&"TRUE"==this.Preferences.CreateNewBatchNo.toUpperCase()&&(this.Preferences.CreateNewBatchNo="False"),this.Preferences.ContainsKey("BinvInv")&&"TRUE"==this.Preferences.BinvInv.toUpperCase()&&(this.Preferences.BinvInv="False"),this.Preferences.ContainsKey("BOEAutoAdjustOnCellEnter")&&"TRUE"==this.Preferences.BOEAutoAdjustOnCellEnter.toUpperCase()&&(this.Preferences.BOEAutoAdjustOnCellEnter="False"),this.Preferences.ContainsKey("DefaultPack")&&"TRUE"==this.Preferences.DefaultPack.toUpperCase()&&(this.Preferences.DefaultPack="False"),this.Preferences.ContainsKey("ClubBoe")&&"TRUE"==this.Preferences.ClubBoe.toUpperCase()&&(this.Preferences.ClubBoe="False"),this.Preferences.ContainsKey("CopyBinsFromBoe")&&"TRUE"==this.Preferences.CopyBinsFromBoe.toUpperCase()&&(this.Preferences.CopyBinsFromBoe="False"),this.Preferences.ContainsKey("BilllandingMap")&&"TRUE"==this.Preferences.BilllandingMap.toUpperCase()&&(this.Preferences.BilllandingMap="False"),this.Preferences.ContainsKey("AssetShiftDate")&&"TRUE"==this.Preferences.AssetShiftDate.toUpperCase()&&(this.Preferences.AssetShiftDate="False"),this.Preferences.ContainsKey("AutoBOE")&&"TRUE"==this.Preferences.AutoBOE.toUpperCase()&&(this.Preferences.AutoBOE="False"),this.Preferences.ContainsKey("PostAsset")&&"TRUE"==this.Preferences.PostAsset.toUpperCase()&&(this.Preferences.PostAsset="False"),this.Preferences.ContainsKey("ShowBOE")&&"TRUE"==this.Preferences.ShowBOE.toUpperCase()&&(this.Preferences.ShowBOE="False"),this.Preferences.ContainsKey("Billlanding")&&"TRUE"==this.Preferences.Billlanding.toUpperCase()&&(this.Preferences.Billlanding="False"),this.Preferences.ContainsKey("BOEValidateActualAndAdjustedQtys")&&"TRUE"==this.Preferences.BOEValidateActualAndAdjustedQtys.toUpperCase()&&(this.Preferences.BOEValidateActualAndAdjustedQtys="False"),this.Preferences.ContainsKey("EnableAssetSerialNo")&&"TRUE"==this.Preferences.EnableAssetSerialNo.toUpperCase()&&(this.Preferences.EnableAssetSerialNo="False"),this.Preferences.ContainsKey("POSDiffJVFields")&&"TRUE"==this.Preferences.POSDiffJVFields.toUpperCase()&&(this.Preferences.POSDiffJVFields="False"),this.Preferences.ContainsKey("ShowProduct")&&""!=this.Preferences.ShowProduct.toUpperCase()&&(this.Preferences.ShowProduct=""),this.Preferences.ContainsKey("POSDealerPrice")&&""!=this.Preferences.POSDealerPrice.toUpperCase()&&(this.Preferences.POSDealerPrice="0"),this.Preferences.ContainsKey("TRCloseDocument")&&""!=this.Preferences.TRCloseDocument.toUpperCase()&&(this.Preferences.TRCloseDocument=""),this.Preferences.ContainsKey("Distributebasedon")&&""!=this.Preferences.Distributebasedon.toUpperCase()&&(this.Preferences.Distributebasedon=""),this.Preferences.ContainsKey("POSFields")&&""!=this.Preferences.POSFields.toUpperCase()&&(this.Preferences.POSFields=""),this.Preferences.ContainsKey("POSJVFields")&&""!=this.Preferences.POSJVFields.toUpperCase()&&(this.Preferences.POSJVFields=""),this.Preferences.ContainsKey("PackQty")&&""!=this.Preferences.PackQty.toUpperCase()&&(this.Preferences.PackQty=""),this.Preferences.ContainsKey("PosJVOn")&&""!=this.Preferences.PosJVOn.toUpperCase()&&(this.Preferences.PosJVOn=""),this.Preferences.ContainsKey("POSRetailPrice")&&""!=this.Preferences.POSRetailPrice.toUpperCase()&&(this.Preferences.POSRetailPrice="0"),this.Preferences.ContainsKey("LcCloseDocument")&&""!=this.Preferences.LcCloseDocument.toUpperCase()&&(this.Preferences.LcCloseDocument="0"),this.Preferences.ContainsKey("PosJV")&&""!=this.Preferences.PosJV.toUpperCase()&&(this.Preferences.PosJV="0"),this.Preferences.ContainsKey("CrossDimDocument")&&""!=this.Preferences.CrossDimDocument.toUpperCase()&&(this.Preferences.CrossDimDocument="0"),this.Preferences.ContainsKey("ExpFPQTY")&&""!=this.Preferences.ExpFPQTY.toUpperCase()&&(this.Preferences.ExpFPQTY="0"),this.Preferences.ContainsKey("FPQty")&&""!=this.Preferences.FPQty.toUpperCase()&&(this.Preferences.FPQty="0"),this.Preferences.ContainsKey("PosPaymentTypeFld")&&""!=this.Preferences.PosPaymentTypeFld.toUpperCase()&&(this.Preferences.PosPaymentTypeFld="0"),this.Preferences.ContainsKey("Distributebasedon")&&""!=this.Preferences.Distributebasedon.toUpperCase()&&(this.Preferences.Distributebasedon=""),this.Preferences.ContainsKey("CrossDimField")&&""!=this.Preferences.CrossDimField.toUpperCase()&&(this.Preferences.CrossDimField="0"),this.Preferences.ContainsKey("RowHeight")&&""!=this.Preferences.RowHeight.toUpperCase()&&(this.Preferences.RowHeight="0"),this.Preferences.ContainsKey("right panel width")&&""!=this.Preferences["right panel width"].toUpperCase()&&(this.Preferences["right panel width"]="0"),this.Preferences.ContainsKey("OnScan")&&""!=this.Preferences.OnScan.toUpperCase()&&(this.Preferences.OnScan=""),this.Preferences.ContainsKey("BilllandingReport")&&""!=this.Preferences.BilllandingReport.toUpperCase()&&(this.Preferences.BilllandingReport="0"),this.Preferences.ContainsKey("AssetBasedOn")&&""!=this.Preferences.AssetBasedOn.toUpperCase()&&(this.Preferences.AssetBasedOn="0"),this.Preferences.ContainsKey("DefaultLabel")&&""!=this.Preferences.DefaultLabel.toUpperCase()&&(this.Preferences.DefaultLabel=""),this.Preferences.ContainsKey("BilllandingScanField")&&""!=this.Preferences.BilllandingScanField.toUpperCase()&&(this.Preferences.BilllandingScanField=""),this.Preferences.ContainsKey("DistributeCostDims")&&""!=this.Preferences.DistributeCostDims.toUpperCase()&&(this.Preferences.DistributeCostDims="")}},{key:"GetShifts",value:function(e){var t=0;if(s.a.SessionManager.Preferences.ContainsKey("PosShifts")&&a.e.Int(s.a.SessionManager.Preferences.PosShifts)>5e4){var n=s.a.common.GetDataSet3("DOC040",s.a.SessionManager.Preferences.PosShifts,e.ToString("dd/MMM/yyyy"));t=null!=n&&n.Tables.length>0&&n.Tables[0].length>0&&n.Columns[0].Contains("NodeID")?parseInt(n.Tables[0][0].NodeID):1}else t=1;return t}},{key:"GetEditDataCopy",value:function(e,t,n){var a=[];return a.push(n),a.push(e),a.push(t),a.push(0),a.push(0),a.push(""),a.push(s.a.SessionManager.UserID),a.push(s.a.SessionManager.RoleID),a.push(s.a.SessionManager.UserName),a.push(s.a.SessionManager.LanguageID),s.a.document.GetEditDataCopy(this.IsInventory?"1":"0",a)}},{key:"GetEditData",value:function(e,t,n){return s.a.document.GetEditData(this.CostCenterID,e,t,n,"0",this.LockWhere,this.IsInventory)}},{key:"GetEditDataByCCDOCID",value:function(e,t){return s.a.document.GetEditData(e,"","","0",t,this.LockWhere,this.IsInventory)}},{key:"GetDocumentHistory",value:function(){var e=[];return e.push(this.CostCenterID),e.push(this.DocID),e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.RoleID),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.LanguageID),s.a.document.GetDocumentHistory(e)}},{key:"GetReviseHistory",value:function(){var e=[];return e.push(this.DocID),e.push(this.IsInventory),e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.LanguageID),s.a.document.GetReviseHistory(e)}},{key:"GetEditDataByDOCID",value:function(){var e=[];return e.push(this.CostCenterID),e.push(""),e.push(""),e.push("0"),e.push(this.DocID),e.push(this.LockWhere),e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.RoleID),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.LanguageID),s.a.document.GetEditDataCopy(this.IsInventory?"1":"0",e)}},{key:"GetEditDataByVersion",value:function(e,t){var n=[];return n.push(this.CostCenterID),n.push(this.DocID),n.push(e),n.push(t),n.push(s.a.SessionManager.UserID),n.push(s.a.SessionManager.RoleID),n.push(s.a.SessionManager.UserName),n.push(s.a.SessionManager.LanguageID),s.a.document.GetEditDataByVersion(this.IsInventory?"1":"0",n)}},{key:"SuspentDocument",value:function(e,t){var n=[];return n.push(this.CostCenterID),n.push(this.DocID),n.push(this.Prefix),n.push(null!=this.DocPrefix.TextBox.Text?this.DocPrefix.TextBox.Text:""),n.push(t),n.push(this.LockWhere),n.push(e),n.push(s.a.SessionManager.UserID),n.push(s.a.SessionManager.UserName),n.push(s.a.SessionManager.RoleID),n.push(s.a.SessionManager.LanguageID),s.a.document.SuspentDocument(this.IsInventory?"1":"0",n)}},{key:"DeleteDocument",value:function(){var e=[];return e.push(this.CostCenterID),e.push(this.Prefix),e.push(null!=this.DocPrefix.TextBox.Text?this.DocPrefix.TextBox.Text:""),e.push(0),e.push(this.LockWhere),e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.LanguageID),e.push(s.a.SessionManager.RoleID),s.a.document.DeleteDocument(this.IsInventory?"1":"0",e)}},{key:"DeleteDocumentByDocID",value:function(e,t,n){var a=[];return a.push(e),a.push(""),a.push(""),a.push(t),a.push(this.LockWhere),a.push(s.a.SessionManager.UserID),a.push(s.a.SessionManager.UserName),a.push(s.a.SessionManager.LanguageID),a.push(s.a.SessionManager.RoleID),s.a.document.DeleteDocument(this.IsInventory?"1":"0",a)}},{key:"OnDocPrefixChanged",value:function(e,t,n,o,i){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=0;if(null!=e&&"lostFocus"==e.toString()){if(this.IsRefLCTR=!1,this.DocPrefix.ComboBox.SelectedValue!=this.DocPrefix.TextBox.Text){Logger.InfoLog("VoucherGenerator:: Inside GetDocument");var D,C=null;if(a.e.IsValidID(n)?(this.DocID=n,null!=(C=s.a.document.GetEditData(this.CostCenterID,"","","0",this.DocID,this.LockWhere,this.IsInventory))&&C.Tables.length>0&&C.Columns[0].Contains("DocPrefix")&&C.Tables[0].length>0&&(this.DocPrefix.ComboBox.Items.find((function(e){return e instanceof u.d&&e.Value==C.Tables[0][0].DocPrefix.toString()}))||this.DocPrefix.ComboBox.Items.push(u.d.ComboBoxItems_2(C.Tables[0][0].DocPrefix.toString(),C.Tables[0][0].DocPrefix.toString())),this.DocPrefix.ComboBox.SelectedValue=C.Tables[0][0].DocPrefix.toString(),this.DocPrefix.TextBox.Text=C.Tables[0][0].DocNumber.toString())):null!=(C=s.a.document.GetEditData(this.CostCenterID,this.Prefix,null!=this.DocPrefix.TextBox.Text?this.DocPrefix.TextBox.Text:"",t,"0",this.LockWhere,this.IsInventory))&&C.Tables.length>0&&C.Columns[0].Contains("DocPrefix")&&C.Tables[0].length>0&&(this.DocPrefix.ComboBox.Items.find((function(e){return e instanceof u.d&&e.Value==C.Tables[0][0].DocPrefix.toString()}))||(this.DocPrefix.ComboBox.Items.push(u.d.ComboBoxItems_2(C.Tables[0][0].DocPrefix.toString(),C.Tables[0][0].DocPrefix.toString())),this.DocPrefix.ComboBox.SelectedValue=C.Tables[0][0].DocPrefix.toString())),C.Tables.length>1&&C.Tables[0].length>0&&!C.Columns[0].Contains("ErrorMessage")){if(this.DocID=parseInt(C.Tables[0][0].DocID),this.RefNodeID=a.e.IsEmpty(C.Tables[0][0].RefNodeid)?0:parseInt(C.Tables[0][0].RefNodeid),this.RefCCId=a.e.IsEmpty(C.Tables[0][0].RefCCId)?0:parseInt(C.Tables[0][0].RefCCId),this.VoucherNo=C.Tables[0][0].VoucherNO,this.guid=C.Tables[0][0].GUID,!this.IsInventory&&C.Tables.length>9&&C.Tables[9].length>0&&C.Columns[9].Contains("ErrorMessage")?(this.IsBouncedorPdcPosted=!0,this.BouncedorPdcMessage=C.Tables[9][0].ErrorMessage):this.IsBouncedorPdcPosted=!1,l=parseInt(C.Tables[0][0].StatusID),this.LoadEditData(C,!1),a.e.IsEmpty(C.Tables[0][0].DocDate)||(o.value=new Date(C.Tables[0][0].DocDate),this.ovDate.Text=o.value.ToString(s.a.SessionManager.Preferences["Date Format"])),C.Tables.length>1&&C.Tables[1].length>0&&(s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()&&!a.e.IsEmpty(C.Tables[1][0].dcCCNID2)&&(this.LocationID=this.Preferences.ContainsKey("Donotuselocation")&&""!=this.Preferences.Donotuselocation&&Object(S.j)(this.Preferences.Donotuselocation)?0:parseInt(C.Tables[1][0].dcCCNID2),null!=(D=this._CCFields.find((function(e){return e instanceof c.b&&50002==e.CCID})))&&a.e.IsEmpty(D.DefaultValue)&&(D.DefaultValue=this.LocationID.toString())),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()&&!a.e.IsEmpty(C.Tables[1][0].dcCCNID1)&&(this.DivisionID=this.Preferences.ContainsKey("Donotusedivision")&&""!=this.Preferences.Donotusedivision&&Object(S.j)(this.Preferences.Donotusedivision)?0:parseInt(C.Tables[1][0].dcCCNID1),(D=this._CCFields.find((function(e){return e instanceof c.b&&50001==e.CCID})))&&a.e.IsEmpty(D.DefaultValue)&&(D.DefaultValue=this.DivisionID.toString()))),C.Tables.length>13&&C.Columns[13].Contains("DocID")&&C.Tables[13].length>0?(C.Columns[13].Contains("DocID")&&!a.e.IsEmpty(C.Tables[13][0].DocID)&&(this.PostVoucherDocID=parseInt(C.Tables[13][0].DocID)),C.Columns[13].Contains("AccDocDetailsID")&&!a.e.IsEmpty(C.Tables[13][0].AccDocDetailsID)&&(this.PostVoucherDocDetailsID=parseInt(C.Tables[13][0].AccDocDetailsID)),C.Columns[13].Contains("DocPrefix")&&(this.PostVouceherDocPrefix=C.Tables[13][0].DocPrefix.toString()),C.Columns[13].Contains("DocNumber")&&(this.PostVoucherDocnumber=C.Tables[13][0].DocNumber.toString()),C.Columns[13].Contains("CreditAccount")&&!a.e.IsEmpty(C.Tables[13][0].CreditAccount)&&(this.PostVoucherDebitAccount=parseInt(C.Tables[13][0].CreditAccount)),C.Columns[13].Contains("DebitAccount")&&!a.e.IsEmpty(C.Tables[13][0].DebitAccount)&&(this.PostVoucherDebitAccount=parseInt(C.Tables[13][0].DebitAccount)),C.Columns[13].Contains("Amount")&&!a.e.IsEmpty(C.Tables[13][0].Amount)&&(this.PostVoucherAmount=parseFloat(C.Tables[13][0].Amount))):(this.PostVoucherDocID=0,this.PostVoucherCreditAccount=0,this.PostVoucherDebitAccount=0,this.PostVoucherDocDetailsID=0,this.PostVouceherDocPrefix="",this.PostVoucherDocnumber="",this.PostVoucherAmount=0),null!=this.DocPrefix&&this.DocPrefix.RevisionCombo.Visible){this.DocPrefix.RevisionCombo.Items.Clear();var m=!1;if(this.IsInventory&&C.Tables.length>14&&C.Columns[14].Contains("Versionno")&&C.Tables[14].length>0)for(var h=0;h<C.Tables[14].length;h++)"0"==C.Tables[14][h].Versionno.toString()?this.DocPrefix.RevisionCombo.Items.push(u.d.ComboBoxItems_2("","0")):this.DocPrefix.RevisionCombo.Items.push(u.d.ComboBoxItems_2(a.e.StringValue(C.Tables[14][h].Versionno),a.e.StringValue(C.Tables[14][h].Versionno))),a.e.StringValue(C.Tables[0][0].VersionNo)==a.e.StringValue(C.Tables[14][h].Versionno)&&(m=!0);else if(!this.IsInventory&&C.Tables.length>10&&C.Columns[10].Contains("Versionno")&&C.Tables[10].length>0)for(var d=0;d<C.Tables[10].length;d++)"0"==C.Tables[10][d].Versionno.toString()?this.DocPrefix.RevisionCombo.Items.push(u.d.ComboBoxItems_2("","0")):this.DocPrefix.RevisionCombo.Items.push(u.d.ComboBoxItems_2(a.e.StringValue(C.Tables[10][d].Versionno),a.e.StringValue(C.Tables[10][d].Versionno))),a.e.StringValue(C.Tables[0][0].VersionNo)==a.e.StringValue(C.Tables[10][d].Versionno)&&(m=!0);m||("0"==a.e.StringValue(C.Tables[0][0].VersionNo)?this.DocPrefix.RevisionCombo.Items.push(u.d.ComboBoxItems_2("","0")):this.DocPrefix.RevisionCombo.Items.push(u.d.ComboBoxItems_2(a.e.StringValue(C.Tables[0][0].VersionNo),a.e.StringValue(C.Tables[0][0].VersionNo)))),this.DocPrefix.RevisionCombo.SelectedValue=a.e.StringValue(C.Tables[0][0].VersionNo)}}else this.DocID=0,this.RefNodeID=0,this.RefCCId=0,this.IsBouncedorPdcPosted=!1,this.Clear(o,2),this.VoucherNo="",this.CheckViewForUser(l);Logger.InfoLog("VoucherGenerator:: Exiting GetDocument")}}else if(null!=e){0==r&&(this.RefNodeID=0,this.RefCCId=0),this.IsBouncedorPdcPosted=!1,this.DocID=0;var p=1==this.IsResave?null:s.a.document.getcurrentcode(this.CostCenterID,this.Prefix);null!=p&&p.Tables.length>0&&p.Tables[0].length>0&&!p.Columns[0].Contains("ErrorMessage")&&p.Columns[0].Contains("CurrentCodeNumber")&&!a.e.IsNullOrWhiteSpace(p.Tables[0][0].CurrentCodeNumber)?(this.DocPrefix.TextBox.Text=p.Tables[0][0].CurrentCodeNumber.toString(),null!=this.DocPrefix.ComboBox.SelectedItem&&(a.e.IsEmpty(this.DocPrefix.ComboBox.SelectedItem.Aliasname)||"1"==this.DocPrefix.ComboBox.SelectedItem.Aliasname)&&p.Columns[0].Contains("Codelength")&&!a.e.IsEmpty(p.Tables[0][0].Codelength)&&parseInt(p.Tables[0][0].Codelength)>1&&(this.DocPrefix.ComboBox.SelectedItem.Aliasname=p.Tables[0][0].Codelength.toString())):this.DocPrefix.TextBox.Text=this.Preferences.ContainsKey("StartNoForNewPrefix")&&!a.e.IsEmpty(this.Preferences.StartNoForNewPrefix)&&"0"!=this.Preferences.StartNoForNewPrefix?this.Preferences.StartNoForNewPrefix:"1",i&&this.Clear(o,1),this.CheckViewForUser(l)}}},{key:"DivisionChanged",value:function(){var e=this;s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()&&this._CCFields.forEach((function(t){t instanceof c.b&&50001==t.CCID?(t.DefaultValue=e.DivisionID.toString(),t.DBColumnName.Contains("TO")||(t.DefaultValue=e.DivisionID.toString(),t.SelectedValue=e.DivisionID,e.FilterTo(t))):t instanceof D.a&&50001==t.CCID&&(t.DefaultValue=e.DivisionID.toString(),t.DBColumnName.Contains("TO")||(t.SelectedValue=e.DivisionID),e.FilterToCodeName(t))}))}},{key:"LocationChanged",value:function(){var e=this;s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()&&this._CCFields.forEach((function(t){t instanceof c.b&&50002==t.CCID?(t.DefaultValue=e.LocationID.toString(),t.DBColumnName.Contains("TO")||(t.SelectedValue=e.LocationID),e.FilterTo(t)):t instanceof D.a&&50002==t.CCID&&(t.DefaultValue=e.LocationID.toString(),t.DBColumnName.Contains("TO")||(t.SelectedValue=e.LocationID),e.FilterToCodeName(t))}))}},{key:"SaveBulkInvDoc",value:function(e,t,n,o,i,r,l,u){Logger.InfoLog("VoucherGenerator:: Inside SaveDocument");var c=[];if(c.push(this.CostCenterID),c.push(this.DocID),c.push(null!=this.Prefix?this.Prefix:""),c.push(null!=this.DocPrefix&&null!=this.DocPrefix.TextBox.Text?this.DocPrefix.TextBox.Text:""),c.push(o.ToString("dd/MMM/yyyy")),c.push(null!=this.DueDate?this.DueDate.Date?this.DueDate.Date.ToString("dd/MMM/yyyy"):null:this.DueDate),null!=this.BillNo)c.push(this.BillNo.Text);else{var D="";if(this.GridDataColumns.Contains("BillNo"))for(var C=0;C<this.GridData.length;C++)a.e.IsEmpty(this.GridData[C].ProductID_Key)||a.e.IsEmpty(this.GridData[C].BillNo)||(""!=D&&(D+=","),D+=this.GridData[C].BillNo.toString());c.push(D)}c.AddRange(e),c.push(t),c.push(n),c.push(l),c.push("false"),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()?c.push(this.LocationID>0?this.LocationID:s.a.SessionManager.LocationID>0?s.a.SessionManager.LocationID:1):c.push(0),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()?c.push(this.DivisionID>0?this.DivisionID:s.a.SessionManager.DivisionID>0?s.a.SessionManager.DivisionID:1):c.push(0),c.push(i),c.push(s.a.SessionManager.RoleID),c.push(r),86==this.RefCCId||73==this.RefCCId||89==this.RefCCId||s.a.SessionManager.IsActionAssigned(43,"Edit Reference Documents")?(c.push(this.RefCCId),c.push(this.RefNodeID)):(c.push(0),c.push(0)),c.push(s.a.SessionManager.CompanyGUID),c.push(s.a.SessionManager.UserName),c.push(s.a.SessionManager.UserID),c.push(s.a.SessionManager.LanguageID),c.push(s.a.SessionManager.IsOffline);var m="",h=s.a.document.SetTempBulkInvDoc(c);u.RetVal=h.obj;var d=h;return null!=d&&d.Tables.length>0&&d.Tables[d.Tables.length-1].length>0&&d.Columns[d.Tables.length-1].Contains("ErrorMessage")?(m=d.Tables[d.Tables.length-1][0].ErrorMessage.toString(),u.RetVal>0?(this.DocID=u.RetVal,null!=d&&d.Tables.length>0&&d.Tables[d.Tables.length-1].length>0&&d.Columns[d.Tables.length-1].Contains("VoucherNo")&&(this.VoucherNo=d.Tables[d.Tables.length-1][0].VoucherNo.toString()),null!=d&&d.Tables.length>0&&d.Tables[d.Tables.length-1].length>0&&d.Columns[d.Tables.length-1].Contains("StatusID")&&(u.stat=parseInt(d.Tables[d.Tables.length-1][0].StatusID)),this.DraftID>0&&(h=s.a.document.DeleteDocumentDraft(this.DraftID),u.RetVal=h.obj,this.DraftID=0)):null!=d&&d.Tables.length>0&&d.Tables[d.Tables.length-1].length>0&&d.Columns[d.Tables.length-1].Contains("ServerMessage")&&"-407"==d.Tables[d.Tables.length-1][0].ServerMessage.toString()&&(u.RetVal=-407),Logger.InfoLog("VoucherGenerator:: Exiting SaveDocument"),m):"Problem in processing your request,Please contact administrator."}},{key:"SaveInventoryDocument",value:function(e,t,n,o,i,r,l,u,c){var D=this;this.oParent.Status=0,this.oParent.RetVal=0,this.oParent.message="",Logger.InfoLog("VoucherGenerator:: Inside SaveDocument");var C=[];if(C.push(this.CostCenterID),C.push(this.DocID),C.push(null!=this.Prefix?this.Prefix:""),C.push(null!=this.DocPrefix&&null!=this.DocPrefix.TextBox.Text?this.DocPrefix.TextBox.Text:""),C.push(i.ToString("dd/MMM/yyyy")),C.push(this.DueDate?this.DueDate.Date?this.DueDate.Date.ToString("dd/MMM/yyyy"):null:this.DueDate),this.BillNo)C.push(this.BillNo.Text);else{var m="";if(this.GridDataColumns.Contains("BillNo"))for(var h=0;h<this.GridData.length;h++)a.e.IsEmpty(this.GridData[h].ProductID_Key)||a.e.IsEmpty(this.GridData[h].BillNo)||(""!=m&&(m+=","),m+=this.GridData[h].BillNo.toString());C.push(m)}C.push(e),C.push(t),C.push(n),C.push(o),C.push(u),C.push("false"),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()?C.push(this.LocationID>0?this.LocationID:s.a.SessionManager.LocationID>0?s.a.SessionManager.LocationID:1):C.push(0),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()?C.push(this.DivisionID>0?this.DivisionID:s.a.SessionManager.DivisionID>0?s.a.SessionManager.DivisionID:1):C.push(0),C.push(r),C.push(s.a.SessionManager.RoleID),C.push(l),86==this.RefCCId||73==this.RefCCId||89==this.RefCCId||s.a.SessionManager.IsActionAssigned(43,"Edit Reference Documents")?(C.push(this.RefCCId),C.push(this.RefNodeID)):(C.push(0),C.push(0)),C.push(s.a.SessionManager.CompanyGUID),C.push(s.a.SessionManager.UserName),C.push(s.a.SessionManager.UserID),C.push(s.a.SessionManager.LanguageID),C.push(s.a.SessionManager.IsOffline),s.a.document.SetTempInvDocument(C).subscribe((function(e){e.RetVal=e.obj,D.oParent.RetValue=e.RetVal;var t=e;if(!(null!=t&&t.Tables.length>0&&t.Tables[t.Tables.length-1].length>0&&t.Columns[t.Tables.length-1].Contains("ErrorMessage")))return D.oParent.DisplayMessage="Problem in processing your request,Please contact administrator.",void D.oParent.SaveInventoryDocument_CallBack(c);D.oParent.DisplayMessage=t.Tables[t.Tables.length-1][0].ErrorMessage.toString(),D.oParent.RetValue>0||D.oParent.RetValue<-1e4?(D.DocID=D.oParent.RetValue,null!=t&&t.Tables.length>0&&t.Tables[t.Tables.length-1].length>0&&t.Columns[t.Tables.length-1].Contains("VoucherNo")&&(D.VoucherNo=t.Tables[t.Tables.length-1][0].VoucherNo.toString()),null!=t&&t.Tables.length>0&&t.Tables[t.Tables.length-1].length>0&&t.Columns[t.Tables.length-1].Contains("StatusID")&&(D.oParent.StatusID=parseInt(t.Tables[t.Tables.length-1][0].StatusID)),D.DraftID>0&&(s.a.document.DeleteDocumentDraft(D.DraftID),D.DraftID=0)):null!=t&&t.Tables.length>0&&t.Tables[t.Tables.length-1].length>0&&t.Columns[t.Tables.length-1].Contains("ServerMessage")&&"-407"==t.Tables[t.Tables.length-1][0].ServerMessage.toString()&&(D.oParent.RetValue=-407),Logger.InfoLog("VoucherGenerator:: Exiting SaveDocument"),D.oParent.SaveInventoryDocument_CallBack(c)}),(function(e){D.oParent.DisplayMessage="Save API Error",console.log(e)}))}},{key:"UpdateBulkInventoryDocument",value:function(e,t,n,a,o,i,r){Logger.InfoLog("VoucherGenerator:: Inside SaveDocument");var l=[];return l.push(i),l.push(r),l.push(e),l.push(t),l.push(n),l.push(a),l.push(o),l.push(s.a.SessionManager.CompanyGUID),l.push(s.a.SessionManager.UserName),l.push(s.a.SessionManager.UserID),l.push(s.a.SessionManager.LanguageID),s.a.document.BulkUpdateInvDocument(l)}},{key:"PostInventoryDocument",value:function(e,t,n,a,o,i,r){Logger.InfoLog("VoucherGenerator:: Inside SaveDocument");var l=[];return l.push(r),l.push(this.DocID),null!=o&&l.push(o.ToString("dd/MMM/yyyy")),l.push(this.DueDate&&this.DueDate.Date?this.DueDate.Date.ToString("dd/MMM/yyyy"):null),l.push(null!=this.BillNo?this.BillNo.Text:""),l.push(e),l.push(t),l.push(n),l.push(a),l.push("false"),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()?l.push(this.LocationID>0?this.LocationID:s.a.SessionManager.LocationID>0?s.a.SessionManager.LocationID:0):l.push(0),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()?l.push(this.DivisionID>0?this.DivisionID:s.a.SessionManager.DivisionID>0?s.a.SessionManager.DivisionID:0):l.push(0),l.push(i),l.push(this.CostCenterID),l.push(s.a.SessionManager.RoleID),l.push(s.a.SessionManager.CompanyGUID),l.push(s.a.SessionManager.UserName),l.push(s.a.SessionManager.UserID),l.push(s.a.SessionManager.LanguageID),s.a.document.PostInventoryDocument(l)}},{key:"CheckInvPosting",value:function(e){var t=[];return t.push(e),t.push(s.a.SessionManager.RoleID),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.document.CheckInvPosting(t)}},{key:"GetPSPProducts",value:function(e,t,n,o){var i=[];i.push(o),i.push(e);var r,l=0,u="";return(l=a.e.Int(s.a.SessionManager.Preferences["Maintain Dimensionwise stock"]))>5e4&&(r=this._CCFields.find((function(e){return e.DBColumnName.toLowerCase()=="dcccnid"+(l-5e4)})))instanceof c.b&&r.SelectedValue>0&&(u+=" and dcccnid"+(l-5e4)+"="+r.SelectedValue.toString()),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&Object(S.j)(s.a.SessionManager.Preferences.EnableLocationWise)&&s.a.SessionManager.Preferences.ContainsKey("Location Stock")&&Object(S.j)(s.a.SessionManager.Preferences["Location Stock"])&&((r=this._CCFields.find((function(e){return"dcccnid2"==e.DBColumnName.toLowerCase()})))instanceof c.b&&r.SelectedValue>0?u+=" and dcccnid2="+r.SelectedValue.toString():this.LocationID>0?u+=" and dcccnid1="+this.LocationID.toString():s.a.SessionManager.LocationID>0&&(u+=" and dcccnid1="+s.a.SessionManager.LocationID.toString())),!1,s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&Object(S.j)(s.a.SessionManager.Preferences.EnableDivisionWise)&&s.a.SessionManager.Preferences.ContainsKey("Division Stock")&&Object(S.j)(s.a.SessionManager.Preferences["Division Stock"])&&((r=this._CCFields.find((function(e){return"dcccnid1"==e.DBColumnName.toLowerCase()})))instanceof c.b&&r.SelectedValue>0?u+=" and dcccnid1="+r.SelectedValue.toString():this.DivisionID>0?u+=" and dcccnid1="+this.DivisionID.toString():s.a.SessionManager.DivisionID>0&&(u+=" and dcccnid1="+s.a.SessionManager.DivisionID.toString())),i.push(u),i.push(n),i.push(t.ToString("dd/MMM/yyyy")),l=a.e.Int(s.a.SessionManager.Preferences.POSItemCodeDimension),""!=s.a.SessionManager.Preferences.POSItemCodeDimension&&l>5e4?(i.push("dcccnid"+(l-5e4)),i.push(this.GetTableName(parseInt(s.a.SessionManager.Preferences.POSItemCodeDimension)))):(i.push(""),i.push("")),i.push(s.a.SessionManager.UserID),i.push(s.a.SessionManager.LanguageID),s.a.document.GetPSPProducts(i)}},{key:"PostAccountingDocument",value:function(e,t,n,a,o,i){Logger.InfoLog("VoucherGenerator:: Inside PostAccountingDocument");var r=[];if(r.push(i),r.push(this.DocID),null!=a&&r.push(a.ToString("dd/MMM/yyyy")),r.push(null!=this.DueDate?this.DueDate.Date?this.DueDate.Date.ToString("dd/MMM/yyyy"):null:this.DueDate),r.push(null!=this.BillNo?this.BillNo.Text:""),r.push(e),r.push(t),r.push(n),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString())if(this.LocationID>0)r.push(this.LocationID);else if(s.a.SessionManager.LocationID>0)r.push(s.a.SessionManager.LocationID);else{var l=this._CCFields.find((function(e){return e instanceof c.b&&50002==e.CCID}));r.push(null!=l&&l.SelectedValue>0?l.SelectedValue:0)}else r.push(0);return s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()?this.DivisionID>0?r.push(this.DivisionID):s.a.SessionManager.DivisionID>0?r.push(s.a.SessionManager.DivisionID):(l=this._CCFields.find((function(e){return e instanceof c.b&&50001==e.CCID})),r.push(null!=l&&l.SelectedValue>0?l.SelectedValue:0)):r.push(0),r.push(o),r.push(s.a.SessionManager.RoleID),r.push(this.CostCenterID),r.push(this.DocumentType),r.push(s.a.SessionManager.CompanyGUID),r.push(s.a.SessionManager.UserName),r.push(s.a.SessionManager.UserID),r.push(s.a.SessionManager.LanguageID),s.a.document.SetBouncePosting(r)}},{key:"SaveAccountingDocument",value:function(e,t,n,a,o,i,r){Logger.InfoLog("VoucherGenerator:: Inside SaveDocument");var l=[];return l.push(this.CostCenterID),l.push(this.DocID),l.push(this.Prefix),l.push(null!=this.DocPrefix.TextBox.Text?this.DocPrefix.TextBox.Text:""),null!=o&&l.push(o.ToString("dd/MMM/yyyy")),l.push(null!=this.DueDate?this.DueDate.Date?this.DueDate.Date.ToString("dd/MMM/yyyy"):null:this.DueDate),l.push(r>0?r:null!=this.BillNo?this.BillNo.Text:""),l.push(e),l.push(t),l.push(n),l.push(a),l.push("false"),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()?l.push(this.LocationID>0?this.LocationID:s.a.SessionManager.LocationID>0?s.a.SessionManager.LocationID:0):l.push(0),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()?l.push(this.DivisionID>0?this.DivisionID:s.a.SessionManager.DivisionID>0?s.a.SessionManager.DivisionID:0):l.push(0),l.push(i),l.push(s.a.SessionManager.RoleID),this.IsRefLCTR||s.a.SessionManager.IsActionAssigned(43,"Edit Reference Documents")?(l.push(this.RefCCId),l.push(this.RefNodeID)):(l.push(0),l.push(0)),l.push(s.a.SessionManager.CompanyGUID),l.push(s.a.SessionManager.UserName),l.push(s.a.SessionManager.UserID),l.push(s.a.SessionManager.LanguageID),l.push(s.a.SessionManager.IsOffline),s.a.document.SetTempAccDocument(l)}},{key:"SaveAccountingDocument_2",value:function(e,t,n,a,o,i,r,l,u,c,D){Logger.InfoLog("VoucherGenerator:: Inside SaveRefDocument");var C=[];return C.push(e),C.push(t),C.push(n),C.push(a),C.push(i.ToString("dd/MMM/yyyy")),C.push(o),C.push(c),C.push(D),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()?this.LocationID>0?C.push(this.LocationID):s.a.SessionManager.LocationID>0&&C.push(s.a.SessionManager.LocationID):C.push(0),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()?C.push(this.DivisionID>0?this.DivisionID:s.a.SessionManager.DivisionID>0?s.a.SessionManager.DivisionID:0):C.push(0),C.push(s.a.SessionManager.RoleID),C.push(l),C.push(u),C.push(s.a.SessionManager.CompanyGUID),C.push(s.a.SessionManager.UserName),C.push(s.a.SessionManager.UserID),C.push(s.a.SessionManager.LanguageID),C.push(s.a.SessionManager.IsOffline),s.a.document.PostVoucherSave(C)}},{key:"SetDocumentDraft",value:function(e){return e.push(s.a.SessionManager.CompanyGUID),e.push(""),e.push(s.a.SessionManager.UserName),e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.LanguageID),s.a.document.SetDocumentDraft(e)}},{key:"AttachDetach",value:function(e){var t=this;this.IsLoadingeditData=!e,this.HeaderFields.forEach((function(n){n instanceof D.a?e?n.SelectionCallBack.Subscribe(t,"OnGetReference"):(n.SelectionCallBack.UnSubscribe(),n.t.Enabled=!1):n instanceof c.b&&(e?n.OnPactListBoxValueChanged.Subscribe(t,"OnGetReference"):(n.OnPactListBoxValueChanged.UnSubscribe(),n.t.Enabled=!1))})),this._CCFields.forEach((function(n){n instanceof D.a?e?n.SelectionCallBack.Subscribe(t,"OnGetReference"):(n.t.Enabled=!1,n.SelectionCallBack.UnSubscribe()):n instanceof c.b&&(e?n.OnPactListBoxValueChanged.Subscribe(t,"OnGetReference"):(n.t.Enabled=!1,n.OnPactListBoxValueChanged.UnSubscribe()))})),this._TextFields.forEach((function(n){n instanceof u.e&&(e?n.SelectionChangedCommand.Subscribe(t,"OnGetReference"):n.SelectionChangedCommand.UnSubscribe())}))}},{key:"LoadEditData",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{this.AttachDetach(!1),this.LoadEditData_1(e,t,!0,n)}catch(s){this.oParent.DisplayMessage="Error in loading data..",Logger.ErrorLog("VoucherGenerator","LoadEditData",s.stack)}finally{this.AttachDetach(!0),this.GridDataObj.refreshDatawithIDs(),this.FooterGridDataObj.refreshDatawithIDs()}}},{key:"GetEmptyRowPosition",value:function(e,t){for(var n=0;n<e.length;n++)if(""==a.e.String(e[n][t]))return e[n];var s=this.GridDataObj.getEmptyRow();return this.GridDataColumns.Contains("Sno")&&(s.Sno=e.length),this.GridDataColumns.Contains("DocSeqNo")&&(s.DocSeqNo=e.length),e.push(s),s}},{key:"LoadEditData_1",value:function(e,t,n,o){var i=this;if(this.IsDirty=!1,this.dtHistory=null,this.ChequeBookChecking=1,null!=this.Link&&null!=this.Link.LinkCombo&&(this.Link.LinkCombo.SelectedValue="",this.Link.DocumentList.Items.Clear()),this.FooterGridData.Clear(),this.LoadFieldsData(e.Tables[0],this._StaticFields,t,e.Columns[0]),!this.IsInventory){var l=this._StaticFields.find((function(e){return"batchid"==e.DBColumnName.toLowerCase()}));l&&l instanceof c.b&&e.Tables.length>12&&e.Columns[12].Contains("BatchID")&&e.Tables[12].length>0&&!a.e.IsEmpty(e.Tables[12][0].BatchID)&&(l.SelectedValue=parseInt(e.Tables[12][0].BatchID),l.IsAutoLoad&&(l.SelectedValueText=e.Tables[12][0].BatchNUmber.toString()))}if(null!=this.CreditAccount&&e.Tables[0][0].CreditAccount&&(e.Columns[0].Contains("IsNegative")&&!a.e.IsEmpty(e.Tables[0][0].IsNegative)&&Object(S.j)(e.Tables[0][0].IsNegative)?(this.CreditAccount.PrevSelValu=parseInt(e.Tables[0][0].DebitAccount),this.CreditAccount.SelectedValue=parseInt(e.Tables[0][0].DebitAccount)):(this.CreditAccount.PrevSelValu=parseInt(e.Tables[0][0].CreditAccount),this.CreditAccount.SelectedValue=parseInt(e.Tables[0][0].CreditAccount)),14==this.DocumentType&&e.Columns[0].Contains("BankAccountID")&&!a.e.IsEmpty(e.Tables[0][0].BankAccountID)&&parseInt(e.Tables[0][0].BankAccountID)>0&&(this.CreditAccount.PrevSelValu=parseInt(e.Tables[0][0].BankAccountID),this.CreditAccount.SelectedValue=parseInt(e.Tables[0][0].BankAccountID))),null==this.DebitAccount||a.e.IsEmpty(e.Tables[0][0].DebitAccount)||(e.Columns[0].Contains("IsNegative")&&!a.e.IsEmpty(e.Tables[0][0].IsNegative)&&Object(S.j)(e.Tables[0][0].IsNegative)?(this.DebitAccount.PrevSelValu=parseInt(e.Tables[0][0].CreditAccount),this.DebitAccount.SelectedValue=parseInt(e.Tables[0][0].CreditAccount)):(this.DebitAccount.PrevSelValu=parseInt(e.Tables[0][0].DebitAccount),this.DebitAccount.SelectedValue=parseInt(e.Tables[0][0].DebitAccount)),19==this.DocumentType&&e.Columns[0].Contains("BankAccountID")&&!a.e.IsEmpty(e.Tables[0][0].BankAccountID)&&parseInt(e.Tables[0][0].BankAccountID)>0&&(this.DebitAccount.PrevSelValu=parseInt(e.Tables[0][0].BankAccountID),this.DebitAccount.SelectedValue=parseInt(e.Tables[0][0].BankAccountID))),62==this.DocumentType&&this.oParent.onEditLeaveData(e,t),this.LoadFieldsData(e.Tables[3],this._TextFields,t,e.Columns[3]),this.LoadFieldsData(e.Tables[2],this._numericFields,t,e.Columns[2]),this.LoadFieldsData(e.Tables[1],this._CCFields,t,e.Columns[1]),t||this.GridData.Clear(),92==this.DocumentType){if((1==s.a.SessionManager.IsWebApplication||s.a.SessionManager.Preferences.ContainsKey("DisableAutoLoad")&&"true"==s.a.SessionManager.Preferences.DisableAutoLoad.toLowerCase())&&this.FillListViews(!1),this.GridDataObj.CanUserAddRows){var m=this.GridDataObj.NewRow();m.DocSeqNo=this.GridData.length+1,m.DocDetailsID=0,this.GridDataObj.Table.push(m)}return this.UpdateSequence(),void(t||this.LoadEditCallBack.Call(e))}if(this.DueDate&&(this.DueDate.Date=a.e.IsEmpty(e.Tables[0][0].DueDate)?null:new Date(e.Tables[0][0].DueDate)),this.BillNo&&e.Columns[0].Contains("BillNo")&&(this.BillNo.Text=null!=e.Tables[0][0].BillNo?e.Tables[0][0].BillNo.toString():""),this.Status&&(this.Status.SelectedValue=e.Tables[0][0].StatusID.toString()),this.HeaderFields.forEach((function(t){t instanceof C.b&&(t.Currency.SelectedValue=e.Tables[0][0].CurrencyID.toString(),t.ExchangeRate.Text=e.Tables[0][0].ExchangeRate.toString()),t instanceof u.e&&"ChequeBookNo"==t.DBColumnName&&e.Columns[0].Contains("ChequeBookNo")&&(t.Items.find((function(t){return t.Value==e.Tables[0][0].ChequeBookNo}))&&t.Items.push(u.d.ComboBoxItems_2(e.Tables[0][0].ChequeBookNo.toString(),e.Tables[0][0].ChequeBookNo.toString())),t.SelectedValue=e.Tables[0][0].ChequeBookNo)})),this.IsInventory){var h=1;if(this.FooterColumnSource.length>0){this.FooterColumnSource[1].SetComboData(this.FooterColumnSource[1].ComboDataTable);for(var d=0;d<this.FooterColumnSource[1].ComboData.length;d++){var p=this.FooterGridDataObj.NewRow();p.Sno=h++,p.Name=this.FooterColumnSource[1].ComboData[d].Name.toString(),p.ColumnName=this.FooterColumnSource[1].ComboData[d].ColumnName.toString(),p.Decimals=a.e.String(this.FooterColumnSource[1].ComboData[d].Decimals),p.PostingType=a.e.String(this.FooterColumnSource[1].ComboData[d].PostingType),p.IsCalculated=a.e.String(this.FooterColumnSource[1].ComboData[d].IsCalculated),p.CrRefColName=a.e.String(this.FooterColumnSource[1].ComboData[d].CrRefColName),p.CrRefColID=a.e.String(this.FooterColumnSource[1].ComboData[d].CrRefColID),p.CrRefID=a.e.String(this.FooterColumnSource[1].ComboData[d].CrRefID),p.CrRefSection=a.e.String(this.FooterColumnSource[1].ComboData[d].CrRefSection),p.DrRefColName=a.e.String(this.FooterColumnSource[1].ComboData[d].DrRefColName),p.DrRefColID=a.e.String(this.FooterColumnSource[1].ComboData[d].DrRefColID),p.DrRefID=a.e.String(this.FooterColumnSource[1].ComboData[d].DrRefID),p.DrRefSection=a.e.String(this.FooterColumnSource[1].ComboData[d].DrRefSection),p.DebitAccount=a.e.String(this.FooterColumnSource[1].ComboData[d].DebitAccount),p.CreditAccount=a.e.String(this.FooterColumnSource[1].ComboData[d].CreditAccount),p.Formula=a.e.String(this.FooterColumnSource[1].ComboData[d].Formula),p.dcCurrID_Key=a.e.String(this.FooterColumnSource[1].ComboData[d].Currency),p.dcCurrID=a.e.String(this.FooterColumnSource[1].ComboData[d].CurrencyName),p.ReadOnly=a.e.String(this.FooterColumnSource[1].ComboData[d].ReadOnly),p.IsVisible=a.e.String(this.FooterColumnSource[1].ComboData[d].IsVisible),p.BasedOnXML=a.e.String(this.FooterColumnSource[1].ComboData[d].BasedOnXML),this.FooterGridDataColumns.Contains("StyleHeightZero")&&(p.StyleHeightZero=Object(S.j)(p.IsVisible)?0:1),this.FooterGridData.push(p)}this.FooterColumnSource[1].ComboDataTable&&this.FooterColumnSource[1].ComboDataTable.length>0&&this.FooterColumnSource[1].SetComboData(this.FooterColumnSource[1].ComboDataTable.filter((function(e){return 1==e.IsVisible})))}var f=new a.f;h=0;for(var y=0;y<e.Tables[0].length;y++)if(!e.Columns[0].Contains("DynamicInvDocDetailsID")||a.e.IsEmpty(e.Tables[0][y].DynamicInvDocDetailsID)){h=y;break}e.Columns[2].Contains("Remarks")&&e.Tables[2].length>h&&!a.e.IsEmpty(e.Tables[2][h].Remarks)&&f.LoadXml(e.Tables[2][h].Remarks);for(var g=0;g<this.FooterGridData.length;g++)if(e.Columns[2].Contains(this.FooterGridData[g].ColumnName.toString())){var b=void 0;if(e.Tables[2].length>0)for(var T=0;T<e.Tables[0].length;T++)if((!e.Columns[0].Contains("DynamicInvDocDetailsID")||a.e.IsEmpty(e.Tables[0][T].DynamicInvDocDetailsID))&&!a.e.IsEmpty(e.Tables[2][T][this.FooterGridData[g].ColumnName.toString()])){this.FooterGridData[g].Amount=e.Tables[2][T][this.FooterGridData[g].ColumnName.toString()].toString();break}if(null!=(b=s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])&&e.Columns[0].Contains("amountfc")||!e.Columns[2].Contains("dcCalcNumFC"+this.FooterGridData[g].ColumnName.toString().Replace("dcNum",""))?e.Tables[2].Compute("sum","dcCalc"+this.FooterGridData[g].ColumnName.toString().replace("dc","")):e.Tables[2].Compute("sum","dcCalcNumFC"+this.FooterGridData[g].ColumnName.toString().replace("dcNum","")))&&null!=b||(b=0),0!=parseFloat(b))this.FooterGridData[g].CalcAmount=b;else if((""==a.e.StringValue(this.FooterGridData[g].Amount)||!a.e.IsEmpty(this.FooterGridData[g].Amount)&&0==parseFloat(this.FooterGridData[g].Amount))&&this.Preferences.ContainsKey("Dynamic Footer")&&null!=this.Preferences["Dynamic Footer"]&&"True"==this.Preferences["Dynamic Footer"]){this.FooterGridData.Remove(this.FooterGridData[g]),g--;continue}"-2"==this.FooterGridData[g].dcCurrID_Key.toString()?(this.FooterGridData[g].dcCurrID_Key=e.Tables[2][0]["dcCurrID"+this.FooterGridData[g].ColumnName.toString().toLowerCase().replace("dcnum","")].toString(),this.FooterGridData[g].dcExchRT=e.Tables[2][0]["dcExchRT"+this.FooterGridData[g].ColumnName.toString().toLowerCase().replace("dcnum","")].toString()):"-3"==this.FooterGridData[g].dcCurrID_Key.toString()&&(this.FooterGridData[g].dcExchRT=e.Tables[2][0]["dcExchRT"+this.FooterGridData[g].ColumnName.toString().toLowerCase().replace("dcnum","")].toString());for(var P=f.SelectNodes("XML/Row"),M=0;M<P.length;M++){var L=P[M];if(null!=L.attributes.Columnname&&L.attributes.Columnname.value.toLowerCase()==this.FooterGridData[g].ColumnName.toString().toLowerCase()){null!=L.attributes.DebitAccount&&""!=L.attributes.DebitAccount.value&&(this.FooterGridData[g].DebitAccount=L.attributes.DebitAccount.value),null!=L.attributes.CreditAcount&&""!=L.attributes.CreditAcount.value&&(this.FooterGridData[g].CreditAccount=L.attributes.CreditAcount.value),null!=L.attributes.Remarks&&""!=L.attributes.Remarks.value&&(this.FooterGridData[g].Remarks=L.attributes.Remarks.value);break}}}else this.Preferences.ContainsKey("Dynamic Footer")&&null!=this.Preferences["Dynamic Footer"]&&"True"==this.Preferences["Dynamic Footer"]?(this.FooterGridData.Remove(this.FooterGridData[g]),g--):(this.FooterGridData[g].Amount=0,this.FooterGridData[g].CalcAmount=0);this.Preferences.ContainsKey("Dynamic Footer")&&null!=this.Preferences["Dynamic Footer"]&&"True"==this.Preferences["Dynamic Footer"]&&this.FooterGridDataColumns.length>0&&(this.FooterGridDataObj.addEmptyRow(),this.FooterGridDataObj.addEmptyRow()),this.UpdateSequenceFoot()}(this.Preferences.ContainsKey("LineWisePacking")&&"true"==this.Preferences.LineWisePacking.toLowerCase()||this.Preferences.ContainsKey("PackWiseProds")&&"true"==this.Preferences.PackWiseProds.toLowerCase())&&!this.GridDataColumns.Contains("Unq")&&(this.GridDataColumns.push("Unq"),this.GridDataObj.DataTypes.Int.push("Unq"));var N=null,v=0,E=0;s.a.SessionManager.Preferences.ContainsKey("DimensionwiseBins")&&""!=s.a.SessionManager.Preferences.DimensionwiseBins.toString()&&(E=a.e.Int(s.a.SessionManager.Preferences.DimensionwiseBins.toString())),this.ChildVNos="",this.DistributeCostXML="";var V="";if(this.GridDataColumns.Contains("FieldType")&&(this.FillDafaultTypes(),this.Preferences.ContainsKey("PosPaymentTypeFld")&&""!=this.Preferences.PosPaymentTypeFld)){var A=this.Data.Tables[0].filter((function(e){return e.CostCenterColID==i.Preferences.PosPaymentTypeFld}));A.length>0&&this.GridDataColumns.Contains(A[0].SysColumnName)&&(V=A[0].SysColumnName)}o>0&&e.Tables.length>6&&e.Tables[6].length>0&&e.Columns[6].Contains("IsLock")&&!a.e.IsEmpty(e.Tables[6][0].IsLock.toString())&&Object(S.j)(e.Tables[6][0].IsLock.toString())&&(e.Tables[6][0].IsLock=null);for(var F=function(n){if(V?(G=i.GridData.filter((function(t){return t.FieldType==e.Tables[3][n][V]}))).length>0?(N=G[0],i.GridDataColumns.Contains("DebitAccount")&&(N.DebitAccount=null)):N=i.GridDataObj.NewRow():t?i.IsInventory?N=i.GetEmptyRowPosition(i.GridData,"ProductID_Key"):i.GridDataColumns.Contains("CreditAccount_Key")?N=i.GetEmptyRowPosition(i.GridData,"CreditAccount_Key"):i.GridDataColumns.Contains("DebitAccount_Key")?N=i.GetEmptyRowPosition(i.GridData,"DebitAccount_Key"):i.GridDataColumns.Contains("AccountID_Key")&&(N=i.GetEmptyRowPosition(i.GridData,"AccountID_Key")):N=i.GridDataObj.NewRow(),!e.Columns[0].Contains("DynamicInvDocDetailsID")||a.e.IsEmpty(e.Tables[0][n].DynamicInvDocDetailsID)){if(!(o>0&&e.Columns[0].Contains("CanRecur")&&"False"==e.Tables[0][n].CanRecur.toString())){i.GridDataColumns.Contains("StatusID")&&e.Columns[0].Contains("StatusID")&&(N.StatusID=e.Tables[0][n].StatusID.toString(),"372"==e.Tables[0][n].StatusID.toString()||"429"==e.Tables[0][n].StatusID.toString()?(N.StatusID_COLOR="RED",i.GridDataColumns.Contains("StatusID_Name")&&(N.StatusID_Name="Rejected")):"369"==e.Tables[0][n].StatusID.toString()?(N.StatusID_COLOR="GREEN",i.GridDataColumns.Contains("StatusID_Name")&&(N.StatusID_Name="Posted")):"441"==e.Tables[0][n].StatusID.toString()?(N.StatusID_COLOR="BLUE",i.GridDataColumns.Contains("StatusID_Name")&&(N.StatusID_Name="Approved")):"371"==e.Tables[0][n].StatusID.toString()&&(N.StatusID_COLOR="ORANGE",i.GridDataColumns.Contains("StatusID_Name")&&(N.StatusID_Name="UnApproved"))),i.GridDataColumns.Contains("CanEdit")&&e.Columns[0].Contains("CanEdit")&&(N.CanEdit="372"==e.Tables[0][n].StatusID.toString()&&!s.a.SessionManager.IsActionAssigned(i.CostCenterID,"Edit Rejected Documents")&&!s.a.SessionManager.IsActionAssigned(i.CostCenterID,"Edit")||"372"!=e.Tables[0][n].StatusID.toString()&&!s.a.SessionManager.IsActionAssigned(i.CostCenterID,"Edit")||"true"!=s.a.SessionManager.Preferences.EditApprovedDocuments.toLowerCase()&&!s.a.SessionManager.IsActionAssigned(i.CostCenterID,"Edit Approved Docs")&&"369"==e.Tables[0][n].StatusID.toString()?"0":e.Tables[0][n].CanEdit.toString()),i.GridDataColumns.Contains("WorkFlowLevel")&&e.Columns[0].Contains("WorkFlowLevel")&&"372"!=a.e.String(e.Tables[0][n].StatusID)&&(N.WorkFlowLevel=a.e.String(e.Tables[0][n].WorkFlowLevel)),i.GridDataColumns.Contains("WorkFlowID")&&e.Columns[0].Contains("WorkFlowID")&&(N.WorkFlowID=a.e.String(e.Tables[0][n].WorkFlowID)),i.GridDataColumns.Contains("oppdc")&&e.Columns[0].Contains("oppdc")&&""!=e.Tables[0][n].oppdc.toString()&&(N.oppdc=e.Tables[0][n].oppdc.toString()),i.GridDataColumns.Contains("CanApprove")&&e.Columns[0].Contains("CanApprove")&&(N.CanApprove=a.e.String(e.Tables[0][n].CanApprove)),38==i.DocumentType&&"1"==a.e.String(e.Tables[0][n].VoucherType)&&(v=a.e.Double(e.Tables[0][n].Quantity),e.Tables[0][n].Quantity=v>0?"-"+a.e.String(e.Tables[0][n].Quantity):a.e.String(e.Tables[0][n].Quantity),v=a.e.Double(e.Tables[0][n].Gross),e.Tables[0][n].Gross=v>0?"-"+a.e.String(e.Tables[0][n].Gross):a.e.String(e.Tables[0][n].Gross),v=a.e.Double(e.Tables[0][n].GroStockValuess),e.Tables[0][n].StockValue=v>0?"-"+a.e.String(e.Tables[0][n].StockValue):a.e.String(e.Tables[0][n].StockValue),v=a.e.Double(e.Tables[0][n].grossfc),e.Tables[0][n].grossfc=v>0?"-"+a.e.String(e.Tables[0][n].grossfc):a.e.String(e.Tables[0][n].grossfc),v=a.e.Double(e.Tables[0][n].UOMConvertedQty),e.Tables[0][n].UOMConvertedQty=v>0?"-"+a.e.String(e.Tables[0][n].UOMConvertedQty):a.e.String(e.Tables[0][n].UOMConvertedQty));for(var l=0;l<i.ColumnSource.length;l++)if((i.IsInventory||4!=i.ColumnSource[l].SectionID&&"LinkedInvDocDetailsID"!=i.ColumnSource[l].DisplayMember&&"RefNo"!=i.ColumnSource[l].DisplayMember&&"StatusID"!=i.ColumnSource[l].DisplayMember&&"LinkedFieldName"!=i.ColumnSource[l].DisplayMember)&&!i.ColumnSource[l].DisplayMember.toLowerCase().Contains("dccurrid")&&!i.ColumnSource[l].DisplayMember.toLowerCase().Contains("dcexchrt")&&"FreeQTY"!=i.ColumnSource[l].DisplayMember&&(!t||"DocDetailsID"!=i.ColumnSource[l].DisplayMember)){if(i.ColumnSource[l].IsColumnUserDefined){if(V==i.ColumnSource[l].DisplayMember)continue;if("SELECTIONBOX"==i.ColumnSource[l].DataType)e.Tables[3].length>0&&(N[i.ColumnSource[l].DisplayMember]=e.Tables[3][n][i.ColumnSource[l].DisplayMember]);else if(null!=i.ColumnSource[l].CostCenterID&&i.ColumnSource[l].CostCenterID>0)if(16==i.ColumnSource[l].CostCenterID){if(e.Tables.length>12&&e.Columns[12].Contains("BatchID")){var C=e.Tables[12].filter((function(t){return t.AccDocDetailsID==parseInt(e.Tables[0][n].DocDetailsID)}));C.length>0&&(N[i.ColumnSource[l].DisplayMember]=C[0].BatchNUmber.toString(),N[i.ColumnSource[l].DisplayMember+"_Key"]=C[0].BatchID.toString())}}else 5==i.DocumentType&&i.ColumnSource[l].DisplayMember.Contains("TO")?e.Tables[1].length>0&&e.Columns[1].Contains(i.ColumnSource[l].DisplayMember.replace("TO",""))&&e.Tables[1].length>n+1&&!a.e.IsEmpty(e.Tables[1][n+1][i.ColumnSource[l].DisplayMember.replace("TO","")])&&(N[i.ColumnSource[l].DisplayMember+"_Key"]=e.Tables[1][n+1][i.ColumnSource[l].DisplayMember.replace("TO","")]):i.ColumnSource[l].DisplayMember.toLowerCase().Contains("alpha")?e.Tables[3].length>0&&!a.e.IsEmpty(e.Tables[3][n][i.ColumnSource[l].DisplayMember])&&(N[i.ColumnSource[l].DisplayMember+"_Key"]=e.Tables[3][n][i.ColumnSource[l].DisplayMember]):i.ColumnSource[l].DisplayMember.toString().toLowerCase().endsWith("code")||e.Tables[1].length>0&&!a.e.IsEmpty(e.Tables[1][n][i.ColumnSource[l].DisplayMember])&&(N[i.ColumnSource[l].DisplayMember+"_Key"]=e.Tables[1][n][i.ColumnSource[l].DisplayMember]);else if(i.ColumnSource[l].DisplayMember.toLowerCase().Contains("dcnum"))e.Tables[2].length>0&&(N[i.ColumnSource[l].DisplayMember]=i.ColumnSource[l].NoRoundOff||a.e.IsEmpty(e.Tables[2][n][i.ColumnSource[l].DisplayMember])||!a.e.IsNum(e.Tables[2][n][i.ColumnSource[l].DisplayMember])||a.e.IsEmpty(i.ColumnSource[l].DecimalPoints)?e.Tables[2][n][i.ColumnSource[l].DisplayMember]:parseFloat(e.Tables[2][n][i.ColumnSource[l].DisplayMember]).ToString("N"+i.ColumnSource[l].DecimalPoints),s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])?(N["dcCalc"+i.ColumnSource[l].DisplayMember]=e.Tables[2][n]["dcCalcNumFC"+i.ColumnSource[l].DisplayMember.replace("dcNum","")],"-2"==i.ColumnSource[l].DefaultValue?""==e.Tables[2][n]["dcCurrID"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum","")].toString()?i.GridDataColumns.Contains(e.Tables[2][n]["dcCurrID"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum","")].toString())&&(N["dcCurrID"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum","")+"_Key"]="1",N["dcExchRT"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum","")]="1"):(i.GridDataColumns.Contains("dcCurrID"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum","")+"_Key")&&(N["dcCurrID"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum","")+"_Key"]=e.Tables[2][n]["dcCurrID"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum","")]),i.GridDataColumns.Contains("dcExchRT"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum",""))&&(N["dcExchRT"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum","")]=e.Tables[2][n]["dcExchRT"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum","")])):"-1"!=i.ColumnSource[l].DefaultValue&&a.e.Int(i.ColumnSource[l].DefaultValue)>0&&i.ColumnSource[l].CurrID>0&&(a.e.IsEmpty(e.Tables[2][n]["dcExchRT"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum","")])?i.ColumnSource[l].ExhcgRt=1:e.Columns[2].Contains("dcCurrID"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum",""))&&!a.e.IsEmpty(e.Tables[2][n]["dcCurrID"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum","")])&&parseInt(e.Tables[2][n]["dcCurrID"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum","")])==i.ColumnSource[l].CurrID&&(i.ColumnSource[l].ExhcgRt=parseFloat(e.Tables[2][n]["dcExchRT"+i.ColumnSource[l].DisplayMember.toLowerCase().replace("dcnum","")])))):N["dcCalc"+i.ColumnSource[l].DisplayMember]=e.Tables[2][n]["dcCalc"+i.ColumnSource[l].DisplayMember.replace("dc","")]);else if("DATE"==i.ColumnSource[l].DataType||"DATETIME"==i.ColumnSource[l].DataType||"TIME"==i.ColumnSource[l].DataType||"Time2"==i.ColumnSource[l].DataType){if(e.Tables[3].length>0&&!a.e.IsEmpty(e.Tables[3][n][i.ColumnSource[l].DisplayMember])&&a.e.isValidDate(e.Tables[3][n][i.ColumnSource[l].DisplayMember])){if("DATETIME"==i.ColumnSource[l].DataType)N[i.ColumnSource[l].DisplayMember]=new Date(e.Tables[3][n][i.ColumnSource[l].DisplayMember]).ToString(s.a.SessionManager.Preferences["Date Format"]+" hh:mm:ss a"),N[i.ColumnSource[l].DisplayMember+"_Key"]=e.Tables[3][n][i.ColumnSource[l].DisplayMember];else if("TIME"==i.ColumnSource[l].DataType)N[i.ColumnSource[l].DisplayMember]=new Date(e.Tables[3][n][i.ColumnSource[l].DisplayMember]).ToString("hh:mm:ss a"),N[i.ColumnSource[l].DisplayMember+"_Key"]=e.Tables[3][n][i.ColumnSource[l].DisplayMember];else if("Time2"==i.ColumnSource[l].DataType)N[i.ColumnSource[l].DisplayMember]=new Date(e.Tables[3][n][i.ColumnSource[l].DisplayMember]).ToString("HH:mm"),N[i.ColumnSource[l].DisplayMember+"_Key"]=new Date(e.Tables[3][n][i.ColumnSource[l].DisplayMember]).ToString("dd/MMM/yyyy HH:mm");else{s.a.SessionManager.Preferences.ContainsKey("Date Format")&&""!=s.a.SessionManager.Preferences["Date Format"]&&s.a.SessionManager.Preferences["Date Format"],N[i.ColumnSource[l].DisplayMember]=new Date(e.Tables[3][n][i.ColumnSource[l].DisplayMember]).ToString(s.a.SessionManager.Preferences["Date Format"]),N[i.ColumnSource[l].DisplayMember+"_Key"]=new Date(e.Tables[3][n][i.ColumnSource[l].DisplayMember])}null!=i.ColumnSource[l].FixedDateFormat&&""!=i.ColumnSource[l].FixedDateFormat&&(N[i.ColumnSource[l].DisplayMember]=new Date(e.Tables[3][n][i.ColumnSource[l].DisplayMember]).ToString(i.ColumnSource[l].FixedDateFormat))}}else"ComboBox"==i.ColumnSource[l].DataType?e.Tables[3].length>0&&(N[i.ColumnSource[l].ValueBinding]=e.Tables[3][n][i.ColumnSource[l].ValueBinding]):"CheckBox"==i.ColumnSource[l].DataType?N[i.ColumnSource[l].DisplayMember]=e.Tables[3].length>0&&!a.e.IsEmpty(e.Tables[3][n][i.ColumnSource[l].DisplayMember])&&"True"==e.Tables[3][n][i.ColumnSource[l].DisplayMember].toString()?"True":"False":"PactComboBox"==i.ColumnSource[l].DataType?e.Tables[3].length>0&&(N[i.ColumnSource[l].ValueBinding]=e.Tables[3][n][i.ColumnSource[l].ValueBinding],N[i.ColumnSource[l].ValueBinding+"_Key"]=e.Tables[3][n][i.ColumnSource[l].ValueBinding]):"FLOAT"==i.ColumnSource[l].DataType?e.Tables[3].length>0&&!a.e.IsEmpty(e.Tables[3][n][i.ColumnSource[l].DisplayMember])&&a.e.IsNum(e.Tables[3][n][i.ColumnSource[l].DisplayMember])&&(N[i.ColumnSource[l].DisplayMember]=e.Tables[3][n][i.ColumnSource[l].DisplayMember]):"LINK"==i.ColumnSource[l].DataType&&i.ColumnSource[l].DisplayMember.toLowerCase().Contains("dcalpha")?N[i.ColumnSource[l].DisplayMember]="...":e.Tables[3].length>0&&e.Columns[3].Contains(i.ColumnSource[l].DisplayMember)&&(N[i.ColumnSource[l].DisplayMember]=e.Tables[3][n][i.ColumnSource[l].DisplayMember])}else if(16!=i.DocumentType&&17!=i.DocumentType&&28!=i.DocumentType&&29!=i.DocumentType||"AccountID_Key"!=i.ColumnSource[l].ValueMember&&"DebitAmount"!=i.ColumnSource[l].DisplayMember&&"CreditAmount"!=i.ColumnSource[l].DisplayMember)if("SELECTIONBOX"==i.ColumnSource[l].DataType)N[i.ColumnSource[l].DisplayMember]=e.Tables[0][n][i.ColumnSource[l].DisplayMember];else if(!e.Columns[0].Contains("IsNegative")||a.e.IsEmpty(e.Tables[0][n].IsNegative)||!Object(S.j)(e.Tables[0][n].IsNegative)||(null==i.ColumnSource[l].ValueMember||"DebitAccount_Key"!=i.ColumnSource[l].ValueMember&&"CreditAccount_Key"!=i.ColumnSource[l].ValueMember)&&"Amount"!=i.ColumnSource[l].DisplayMember){if(3==i.ColumnSource[l].CostCenterID)N[i.ColumnSource[l].ValueMember]=e.Tables[0][n].ProductID,e.Tables[0].length>0&&e.Columns[0].Contains(i.ColumnSource[l].DisplayMember)&&(N[i.ColumnSource[l].DisplayMember]=e.Tables[0][n][i.ColumnSource[l].DisplayMember]);else if(2==i.ColumnSource[l].CostCenterID)N[i.ColumnSource[l].ValueMember]=e.Tables[0][n][i.ColumnSource[l].ValueMember.substr(0,i.ColumnSource[l].ValueMember.length-4)],null!=i.ColumnSource[l].ValueMember&&"DebitAccount_Key"==i.ColumnSource[l].ValueMember&&(14!=i.DocumentType&&15!=i.DocumentType&&20!=i.DocumentType&&23!=i.DocumentType||(N.Type=e.Tables[0][n].DBIsBillwise.toString()),19==i.DocumentType&&e.Columns[0].Contains("BankAccountID")&&a.e.Int(e.Tables[0][n].BankAccountID)>0&&(N.DebitAccount_Key=parseInt(e.Tables[0][n].BankAccountID))),null!=i.ColumnSource[l].ValueMember&&"CreditAccount_Key"==i.ColumnSource[l].ValueMember&&(18!=i.DocumentType&&19!=i.DocumentType&&21!=i.DocumentType&&22!=i.DocumentType||(N.Type=e.Tables[0][n].CrIsBillwise.toString()),14==i.DocumentType&&e.Columns[0].Contains("BankAccountID")&&a.e.Int(e.Tables[0][n].BankAccountID)>0&&(N.CreditAccount_Key=parseInt(e.Tables[0][n].BankAccountID)));else if(11==i.ColumnSource[l].CostCenterID)a.e.IsEmpty(e.Tables[0][n].Unit)||(N[i.ColumnSource[l].ValueMember]=e.Tables[0][n].Unit),e.Tables[0].length>0&&e.Columns[0].Contains("UnitName")&&(N[i.ColumnSource[l].DisplayMember]=e.Tables[0][n].UnitName);else if(0!=i.ColumnSource[l].CostCenterID)N[i.ColumnSource[l].ValueMember]=e.Tables[0][n][i.ColumnSource[l].ValueMember.substr(0,i.ColumnSource[l].ValueMember.length-4)];else if("DocSeqNo"!=i.ColumnSource[l].DisplayMember&&"IsScheme"!=i.ColumnSource[l].DisplayMember&&"RecievedQty"!=i.ColumnSource[l].DisplayMember)if("DATE"==i.ColumnSource[l].DataType){if(e.Tables[0].length>0&&e.Tables[0][n][i.ColumnSource[l].DisplayMember]){var m="dd/MMM/yyyy";s.a.SessionManager.Preferences.ContainsKey("Date Format")&&""!=s.a.SessionManager.Preferences["Date Format"]&&(m=s.a.SessionManager.Preferences["Date Format"]),N[i.ColumnSource[l].DisplayMember]=new Date(e.Tables[0][n][i.ColumnSource[l].DisplayMember]).ToString(m),i.GridDataColumns.Contains(i.ColumnSource[l].DisplayMember+"_Key")&&(N[i.ColumnSource[l].DisplayMember+"_Key"]=new Date(e.Tables[0][n][i.ColumnSource[l].DisplayMember]))}}else if("gross"==i.ColumnSource[l].DisplayMember.toLowerCase())N[i.ColumnSource[l].DisplayMember]=(s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])||!a.e.IsEmpty(e.Tables[0][n].ExchangeRate)&&1!=parseFloat(e.Tables[0][n].ExchangeRate))&&e.Columns[0].Contains("grossfc")?e.Tables[0][n].grossfc:e.Tables[0][n][i.ColumnSource[l].DisplayMember];else if("quantity"==i.ColumnSource[l].DisplayMember.toLowerCase())i.ColumnSource[l].NoRoundOff||!a.e.IsNum(e.Tables[0][n][i.ColumnSource[l].DisplayMember])||a.e.IsEmpty(i.ColumnSource[l].DecimalPoints)?!a.e.IsEmpty(e.Tables[0][n].ParentSchemeID)&&"0"!=e.Tables[0][n].ParentSchemeID.toString()&&i.GridDataColumns.Contains("FreeQTY")&&!a.e.IsEmpty(e.Tables[0][n].IsQtyFreeOffer)&&parseInt(e.Tables[0][n].IsQtyFreeOffer)>0?N.FreeQTY=e.Tables[0][n][i.ColumnSource[l].DisplayMember]:N[i.ColumnSource[l].DisplayMember]=e.Tables[0][n][i.ColumnSource[l].DisplayMember]:!a.e.IsEmpty(e.Tables[0][n].ParentSchemeID)&&"0"!=e.Tables[0][n].ParentSchemeID.toString()&&i.GridDataColumns.Contains("FreeQTY")&&!a.e.IsEmpty(e.Tables[0][n].IsQtyFreeOffer)&&parseInt(e.Tables[0][n].IsQtyFreeOffer)>0?N.FreeQTY=parseFloat(e.Tables[0][n][i.ColumnSource[l].DisplayMember]).ToString("N"+i.ColumnSource[l].DecimalPoints):N[i.ColumnSource[l].DisplayMember]=parseFloat(e.Tables[0][n][i.ColumnSource[l].DisplayMember]).ToString("N"+i.ColumnSource[l].DecimalPoints),5==i.DocumentType&&i.GridDataColumns.Contains("RecievedQty")&&!a.e.IsEmpty(e.Tables[0][n+1][i.ColumnSource[l].DisplayMember])&&(N.RecievedQty=e.Tables[0][n+1][i.ColumnSource[l].DisplayMember].toString());else if("Amount"==i.ColumnSource[l].DisplayMember)N.Amount=s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])&&e.Columns[0].Contains("amountfc")?e.Tables[0][n].amountfc:e.Tables[0][n].Amount.toString();else if("ComboBox"==i.ColumnSource[l].DataType&&e.Columns[0].Contains(i.ColumnSource[l].ValueBinding)){if(N[i.ColumnSource[l].ValueBinding]=e.Tables[0][n][i.ColumnSource[l].ValueBinding],"ChequeBookNo"==i.ColumnSource[l].ValueBinding){var h=[];h.push(u.d.ComboBoxItems_2(a.e.String(e.Tables[0][n][i.ColumnSource[l].ValueBinding]),a.e.String(e.Tables[0][n][i.ColumnSource[l].ValueBinding]))),i.ColumnSource[l].ComboData=h}}else e.Columns[0].Contains(i.ColumnSource[l].DisplayMember)&&(N[i.ColumnSource[l].DisplayMember]=e.Tables[0][n][i.ColumnSource[l].DisplayMember])}else null!=i.ColumnSource[l].ValueMember&&"DebitAccount_Key"==i.ColumnSource[l].ValueMember&&(N.DebitAccount_Key=e.Tables[0][n].CreditAccount,14!=i.DocumentType&&15!=i.DocumentType&&20!=i.DocumentType&&23!=i.DocumentType||(N.Type=e.Tables[0][n].CrIsBillwise),19==i.DocumentType&&e.Columns[0].Contains("BankAccountID")&&!Object(I.isNullOrUndefined)(e.Tables[0][n].BankAccountID)&&parseInt(e.Tables[0][n].BankAccountID)>0&&(N.DebitAccount_Key=parseInt(e.Tables[0][n].BankAccountID))),null!=i.ColumnSource[l].ValueMember&&"CreditAccount_Key"==i.ColumnSource[l].ValueMember&&(N.CreditAccount_Key=e.Tables[0][n].DebitAccount,18!=i.DocumentType&&19!=i.DocumentType&&21!=i.DocumentType&&22!=i.DocumentType||(N.Type=e.Tables[0][n].DBIsBillwise.toString()),14==i.DocumentType&&e.Columns[0].Contains("BankAccountID")&&!a.e.IsEmpty(e.Tables[0][n].BankAccountID)&&parseInt(e.Tables[0][n].BankAccountID)>0&&(N.CreditAccount_Key=parseInt(e.Tables[0][n].BankAccountID))),"Amount"==i.ColumnSource[l].DisplayMember&&(N.Amount=(s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])||!a.e.IsEmpty(e.Tables[0][n].ExchangeRate)&&1!=parseFloat(e.Tables[0][n].ExchangeRate))&&e.Columns[0].Contains("amountfc")?"-"+e.Tables[0][n].amountfc:"-"+e.Tables[0][n].Amount);else if("AccountID_Key"==i.ColumnSource[l].ValueMember)continue;(i.ColumnSource[l].DisplayMember.toLowerCase().Contains("dcnum")||"quantity"==i.ColumnSource[l].DisplayMember.toLowerCase()||"rate"==i.ColumnSource[l].DisplayMember.toLowerCase()||"gross"==i.ColumnSource[l].DisplayMember.toLowerCase()||i.ColumnSource[l].DisplayMember.toLowerCase().Contains("amount"))&&(N["default"+i.ColumnSource[l].DisplayMember]="gross"==i.ColumnSource[l].DisplayMember.toLowerCase()?s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])&&e.Columns[0].Contains("grossfc")?e.Tables[0][n].grossfc:e.Tables[0][n][i.ColumnSource[l].DisplayMember]:"quantity"!=i.ColumnSource[l].DisplayMember.toLowerCase()||!e.Columns[0].Contains("Tolink")||a.e.IsEmpty(e.Tables[0][n].Tolink)||a.e.IsEmpty(N[i.ColumnSource[l].DisplayMember])?N[i.ColumnSource[l].DisplayMember]:parseFloat(e.Tables[0][n].Tolink)+parseFloat(N[i.ColumnSource[l].DisplayMember]))}if(i.IsInventory&&e.Columns[0].Contains("LinkedFieldName")&&null!=e.Tables[0][n].LinkedFieldName&&("job"==e.Tables[0][n].LinkedFieldName.toLowerCase()||"bom"==e.Tables[0][n].LinkedFieldName.toLowerCase()))i.GridDataColumns.Contains("jobID")||i.GridDataColumns.push("jobID"),i.Preferences.ContainsKey("jobCCID")&&""!=i.Preferences.jobCCID.toString()&&parseInt(i.Preferences.jobCCID)>5e4&&e.Columns[1].Contains("dcCCNID"+(parseInt(i.Preferences.jobCCID)-5e4))&&(N.jobID=e.Tables[1][n]["dcCCNID"+(parseInt(i.Preferences.jobCCID)-5e4)].toString(),i.GridDataColumns.Contains("NetJobQty")||i.GridDataColumns.push("NetJobQty"),a.e.IsEmpty(e.Tables[0][n].LinkedFieldValue)||(N.NetJobQty=e.Tables[0][n].LinkedFieldValue.toString())),i.GridDataColumns.Contains("StageID")||i.GridDataColumns.push("StageID"),i.Preferences.ContainsKey("StageCCID")&&""!=i.Preferences.StageCCID.toString()&&parseInt(i.Preferences.StageCCID)>5e4&&e.Columns[1].Contains("dcCCNID"+(parseInt(i.Preferences.StageCCID)-5e4))&&(N.StageID=e.Tables[1][n]["dcCCNID"+(parseInt(i.Preferences.StageCCID)-5e4)].toString()),i.GridDataColumns.Contains("BOMID")||i.GridDataColumns.push("BOMID"),i.Preferences.ContainsKey("BomCCID")&&""!=i.Preferences.BomCCID.toString()&&parseInt(i.Preferences.BomCCID)>5e4&&e.Columns[1].Contains("dcCCNID"+(parseInt(i.Preferences.BomCCID)-5e4))&&(N.BOMID=e.Tables[1][n]["dcCCNID"+(parseInt(i.Preferences.BomCCID)-5e4)].toString()),i.Preferences.ContainsKey("JobUnqCCID")&&""!=i.Preferences.JobUnqCCID.toString()&&parseInt(i.Preferences.JobUnqCCID)>5e4&&e.Columns[1].Contains("dcCCNID"+(parseInt(i.Preferences.JobUnqCCID)-5e4))&&(i.GridDataColumns.Contains("JobUnqID")||i.GridDataColumns.push("JobUnqID"),N.JobUnqID=e.Tables[1][n]["dcCCNID"+(parseInt(i.Preferences.JobUnqCCID)-5e4)].toString()),i.Preferences.ContainsKey("JobRemainingQty")&&!i.IsPurchase&&(i.GridDataColumns.Contains("RemQty")||i.GridDataColumns.push("RemQty"),""!=e.Tables[2][n][i.Preferences.JobRemainingQty].toString()&&parseFloat(e.Tables[2][n][i.Preferences.JobRemainingQty])>0&&(N.RemQty=e.Tables[2][n][i.Preferences.JobRemainingQty].toString()));else if(i.IsInventory&&e.Columns[0].Contains("LinkedInvDocDetailsID")&&null!=e.Tables[0][n].LinkedInvDocDetailsID&&parseInt(e.Tables[0][n].LinkedInvDocDetailsID)>0&&!t&&(i.Preferences.ContainsKey("Debit Account")&&Object(S.j)(i.Preferences["Debit Account"])&&null!=i.DebitAccount&&i.DebitAccount.Enable&&(i.DebitAccount.Enable=!1),i.Preferences.ContainsKey("Credit Account")&&Object(S.j)(i.Preferences["Credit Account"])&&null!=i.CreditAccount&&i.CreditAccount.Enable&&(i.CreditAccount.Enable=!1),i.Preferences.ContainsKey("DimensionWise")&&""!=i.Preferences.DimensionWise)){var d=i.Preferences.DimensionWise.split(",");i._CCFields.forEach((function(e){(e instanceof c.b&&d.Contains(e.CCID.toString())||e instanceof D.a&&d.Contains(e.CCID.toString()))&&(e.Enable=!1)}))}if(e.Tables[0].length>0&&e.Columns[0].Contains("ProductTypeID")&&(e.Columns[0].Contains("ToleranceLimitsValue")&&(N.TolVal=e.Tables[0][n].ToleranceLimitsValue.toString()),N.Type=e.Tables[0][n].ProductTypeID.toString(),i.GridDataColumns.Contains("QtyType")&&e.Columns[0].Contains("QtyAdjustType")&&(N.QtyType=null==e.Tables[0][n].QtyAdjustType?"":e.Tables[0][n].QtyAdjustType.toString()),i.GridDataColumns.Contains("PackType")&&e.Columns[0].Contains("IsPacking")&&(N.PackType=null==e.Tables[0][n].IsPacking?"":e.Tables[0][n].IsPacking.toString()),i.GridDataColumns.Contains("landingType")&&e.Columns[0].Contains("IsBillOfEntry")&&(N.landingType=null==e.Tables[0][n].IsBillOfEntry?"":e.Tables[0][n].IsBillOfEntry.toString()),i.GridDataColumns.Contains("BinWise")&&e.Columns[0].Contains("BinWise")&&(N.BinWise=null==e.Tables[0][n].BinWise?"":e.Tables[0][n].BinWise.toString()),N.UOMConversion=a.e.IsEmpty(e.Tables[0][n].UOMConversion)?1:e.Tables[0][n].UOMConversion.toString(),a.e.IsEmpty(e.Tables[0][n].UOMConvertedQty)?a.e.IsEmpty(e.Tables[0][n].Quantity)||(N.UOMConvertedQty=e.Tables[0][n].Quantity.toString()):N.UOMConvertedQty=e.Tables[0][n].UOMConvertedQty.toString(),25==i.DocumentType&&i.GridDataColumns.Contains("LinkStatusID")&&e.Columns[0].Contains("LinkStatusID")&&(N.LinkStatusID=e.Tables[0][n].LinkStatusID),"8"==e.Tables[0][n].ProductTypeID.toString()||"3"==e.Tables[0][n].ProductTypeID.toString()||"11"==e.Tables[0][n].ProductTypeID.toString()||"12"==e.Tables[0][n].ProductTypeID.toString()||i.Preferences.ContainsKey("EnablePromotions")&&"true"==i.Preferences.EnablePromotions.toLowerCase()&&e.Columns[0].Contains("DynamicInvDocDetailsID"))&&function(){var o=e.Tables[0].filter((function(t){return t.DynamicInvDocDetailsID==e.Tables[0][n].DocDetailsID}));if(o.length>0){B=e.Tables[0].filter((function(t){return t.DynamicInvDocDetailsID==e.Tables[0][n].DocDetailsID})).Compute("sum","Gross"),O=e.Tables[0].filter((function(t){return t.DynamicInvDocDetailsID==e.Tables[0][n].DocDetailsID})).Compute("sum","Quantity");var l="";l+="<xml>";for(var u=function(u){var c=e.Tables[1].filter((function(e){return e.InvDocDetailsID=o[u].DocDetailsID})),D=e.Tables[2].filter((function(e){return e.InvDocDetailsID=o[u].DocDetailsID})),C=e.Tables[3].filter((function(e){return e.InvDocDetailsID=o[u].DocDetailsID}));l+="<Row ><xml ";for(var m=!1,h="",d="",p="",f=0;f<i.ColumnSource.length;f++)if(!(4==i.ColumnSource[f].SectionID||"FreeQTY"==i.ColumnSource[f].DisplayMember||"LinkedInvDocDetailsID"==i.ColumnSource[f].DisplayMember||"RefNo"==i.ColumnSource[f].DisplayMember||"LinkedFieldName"==i.ColumnSource[f].DisplayMember||"StatusID"==i.ColumnSource[f].DisplayMember||i.ColumnSource[f].DisplayMember.toLowerCase().Contains("dccurrid")||i.ColumnSource[f].DisplayMember.toLowerCase().Contains("dcexchrt")||t&&"DocDetailsID"==i.ColumnSource[f].DisplayMember))if(i.ColumnSource[f].IsColumnUserDefined)if("SELECTIONBOX"==i.ColumnSource[f].DataType)l+=i.ColumnSource[f].DisplayMember+'="'+C[0][i.ColumnSource[f].DisplayMember].toString()+'" ',p+=i.ColumnSource[f].DisplayMember+"='"+r.d.GetValidTextXml(C[0][i.ColumnSource[f].DisplayMember])+"', ";else if(null!=i.ColumnSource[f].CostCenterID&&i.ColumnSource[f].CostCenterID>0)i.ColumnSource[f].DisplayMember.toLowerCase().Contains("alpha")?(l+=i.ColumnSource[f].DisplayMember+'="'+C[0][i.ColumnSource[f].DisplayMember].toString()+'" ',p+=i.ColumnSource[f].DisplayMember+"='"+C[0][i.ColumnSource[f].DisplayMember].toString()+"', "):i.ColumnSource[f].DisplayMember.toLowerCase().endsWith("code")||(l+=i.ColumnSource[f].DisplayMember+'="'+c[0][i.ColumnSource[f].DisplayMember].toString()+'" ',h+=i.ColumnSource[f].DisplayMember+"="+c[0][i.ColumnSource[f].DisplayMember].toString()+", ");else if(i.ColumnSource[f].DisplayMember.toLowerCase().Contains("dcnum"))e.Tables[2].length>0&&(l+=i.ColumnSource[f].DisplayMember+'="'+D[0][i.ColumnSource[f].DisplayMember].toString()+'" ',a.e.IsEmpty(D[0][i.ColumnSource[f].DisplayMember])||(d+=i.ColumnSource[f].DisplayMember+"="+D[0][i.ColumnSource[f].DisplayMember].toString()+", "),s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])?(l+="dcCalc"+i.ColumnSource[f].DisplayMember.replace("dc","")+'="'+D[0]["dcCalcNumFC"+i.ColumnSource[f].DisplayMember.replace("dcNum","")].toString()+'" ',a.e.IsEmpty(D[0]["dcCalcNumFC"+i.ColumnSource[f].DisplayMember.replace("dcNum","")])||(d+="dcCalcNumFC"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")+"="+D[0]["dcCalcNumFC"+i.ColumnSource[f].DisplayMember.replace("dcNum","")].toString()+", "),a.e.IsEmpty(D[0]["dcCalc"+i.ColumnSource[f].DisplayMember.replace("dc","")])||(d+="dcCalc"+i.ColumnSource[f].DisplayMember.replace("dc","")+"="+D[0]["dcCalc"+i.ColumnSource[f].DisplayMember.replace("dc","")].toString()+", "),"-2"==i.ColumnSource[f].DefaultValue&&(""==D[0]["dcCurrID"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")].toString()?i.GridDataColumns.Contains(e.Tables[2][n]["dcCurrID"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")].toString())&&(l+="dcCurrID"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")+'_Key="1"',l+="dcExchRT"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")+'"1"',d+="dcCurrID"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")+"=1, ",d+="dcExchRT"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")+"=1, "):(i.GridDataColumns.Contains("dcCurrID"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")+"_Key")&&(l+="dcCurrID"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")+'_Key="'+D[0]["dcCurrID"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")].toString()+'" ',d+="dcCurrID"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")+"="+D[0]["dcCurrID"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")].toString()+", "),i.GridDataColumns.Contains("dcExchRT"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum",""))&&(l+="dcExchRT"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")+'="'+D[0]["dcExchRT"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")].toString()+'" ',d+="dcExchRT"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")+"="+D[0]["dcExchRT"+i.ColumnSource[f].DisplayMember.toLowerCase().replace("dcnum","")].toString()+", ")))):(l+="dcCalc"+i.ColumnSource[f].DisplayMember.replace("dc","")+'="'+D[0]["dcCalc"+i.ColumnSource[f].DisplayMember.replace("dc","")].toString()+'" ',a.e.IsEmpty(D[0]["dcCalc"+i.ColumnSource[f].DisplayMember.replace("dc","")])||(d+="dcCalc"+i.ColumnSource[f].DisplayMember.replace("dc","")+"="+D[0]["dcCalc"+i.ColumnSource[f].DisplayMember.replace("dc","")].toString()+", ")));else if("DATE"==i.ColumnSource[f].DataType){if(!a.e.IsEmpty(C[0][i.ColumnSource[f].DisplayMember])){var I="dd/MMM/yyyy";s.a.SessionManager.Preferences.ContainsKey("Date Format")&&""!=s.a.SessionManager.Preferences["Date Format"]&&(I=s.a.SessionManager.Preferences["Date Format"]),l+=i.ColumnSource[f].DisplayMember+'="'+new Date(C[0][i.ColumnSource[f].DisplayMember]).ToString(I).toString()+'" ',l+=i.ColumnSource[f].DisplayMember+'_Key="'+new Date(C[0][i.ColumnSource[f].DisplayMember]).toString()+'" ',p+=i.ColumnSource[f].DisplayMember+"='"+new Date(C[0][i.ColumnSource[f].DisplayMember]).ToString("dd/MMM/yyyy")+"', "}}else"ComboBox"==i.ColumnSource[f].DataType?(l+=i.ColumnSource[f].ValueBinding+'="'+C[0][i.ColumnSource[f].ValueBinding].toString()+'" ',p+=i.ColumnSource[f].ValueBinding+"='"+C[0][i.ColumnSource[f].ValueBinding].toString()+"', "):"PactComboBox"==i.ColumnSource[f].DataType?(l+=i.ColumnSource[f].ValueBinding+'="'+C[0][i.ColumnSource[f].ValueBinding].toString()+'" ',l+=i.ColumnSource[f].ValueBinding+'_Key="'+C[0][i.ColumnSource[f].ValueBinding].toString()+'" ',p+=i.ColumnSource[f].ValueBinding+"='"+C[0][i.ColumnSource[f].ValueBinding].toString()+"', "):"FLOAT"==i.ColumnSource[f].DataType?a.e.IsNum(C[0][i.ColumnSource[f].DisplayMember])&&(l+=i.ColumnSource[f].DisplayMember+'="'+C[0][i.ColumnSource[f].DisplayMember].toString()+'" ',p+=i.ColumnSource[f].DisplayMember+"='"+C[0][i.ColumnSource[f].DisplayMember].toString()+"', "):(l+=i.ColumnSource[f].DisplayMember+'="'+r.d.GetValidXml(C[0][i.ColumnSource[f].DisplayMember])+'" ',p+=i.ColumnSource[f].DisplayMember+"='"+r.d.GetValidTextXml(C[0][i.ColumnSource[f].DisplayMember])+"', ");else if(3==i.ColumnSource[f].CostCenterID)m||(l+='ProductID="'+o[u].ProductID.toString()+'" '),m=!0;else if(0!=i.ColumnSource[f].CostCenterID)l+=i.ColumnSource[f].DisplayMember+'="'+o[u][i.ColumnSource[f].ValueMember.substr(0,i.ColumnSource[f].ValueMember.length-4)].toString()+'" ';else if("DocSeqNo"!=i.ColumnSource[f].DisplayMember&&"IsScheme"!=i.ColumnSource[f].DisplayMember)if("DATE"==i.ColumnSource[f].DataType){if(e.Tables[0].length>0&&!a.e.IsEmpty(o[u][i.ColumnSource[f].DisplayMember])){var y="dd/MMM/yyyy";s.a.SessionManager.Preferences.ContainsKey("Date Format")&&""!=s.a.SessionManager.Preferences["Date Format"]&&(y=s.a.SessionManager.Preferences["Date Format"]),l+=i.ColumnSource[f].DisplayMember+'="'+new Date(o[u][i.ColumnSource[f].DisplayMember]).ToString(y).toString()+'" ',i.GridDataColumns.Contains(i.ColumnSource[f].DisplayMember+"_Key")&&(l+=i.ColumnSource[f].DisplayMember+'_Key="'+new Date(o[u][i.ColumnSource[f].DisplayMember]).toString()+'" ')}}else"quantity"==i.ColumnSource[f].DisplayMember.toLowerCase()?l+=i.ColumnSource[f].DisplayMember+'="'+r.d.GetValidXml(o[u][i.ColumnSource[f].DisplayMember])+'" ':"gross"==i.ColumnSource[f].DisplayMember.toLowerCase()?(s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])||!a.e.IsEmpty(e.Tables[0][n].ExchangeRate)&&1!=parseFloat(e.Tables[0][n].ExchangeRate))&&e.Columns[0].Contains("grossfc")?l+=i.ColumnSource[f].DisplayMember+'="'+o[u].grossfc.toString()+'" ':l+=i.ColumnSource[f].DisplayMember+'="'+o[u][i.ColumnSource[f].DisplayMember].toString()+'" ':"ComboBox"==i.ColumnSource[f].DataType&&e.Columns[0].Contains(i.ColumnSource[f].ValueBinding)?l+=i.ColumnSource[f].ValueBinding+'="'+a.e.String(o[u][i.ColumnSource[f].ValueBinding])+'" ':e.Columns[0].Contains(i.ColumnSource[f].DisplayMember)&&(l+=i.ColumnSource[f].DisplayMember+'="'+r.d.GetValidXml(o[u][i.ColumnSource[f].DisplayMember])+'" ');if(l+=' CCQuery="'+h.toString()+'" ',l+=' NumQuery="'+d.toString()+'" ',l+=' texQuery="'+p.toString()+'" ',l+=' Type="'+o[u].ProductTypeID.toString()+'" ',l+=' DocSeqNo="'+(u+1).toString()+'" ',"3"!=e.Tables[0][n].ProductTypeID.toString()&&"11"!=e.Tables[0][n].ProductTypeID.toString()&&"12"!=e.Tables[0][n].ProductTypeID.toString()||(a.e.IsEmpty(o[u].Quantity)||a.e.IsEmpty(e.Tables[0][n].Quantity)?l+=' defaultQuantity="'+o[u].Quantity.toString()+'" ':l+=' defaultQuantity="'+parseFloat(o[u].Quantity)/parseFloat(e.Tables[0][n].Quantity)+'" '),a.e.IsEmpty(o[u].AverageRate)||(l+=' AverageRate="'+o[u].AverageRate.toString()+'" '),null!=B&&(l+=' totgross="'+B.toString()+'" '),null!=O&&(l+=' totQty="'+O.toString()+'" '),l+=' UOMConversion="'+o[u].UOMConversion.toString()+'" ',l+=' UOMConvertedQty="'+o[u].UOMConvertedQty.toString()+'" ',l+=' LinkedInvDocDetailsID="'+o[u].LinkedInvDocDetailsID.toString()+'" ',l+=' LinkedFieldName="'+a.e.String(o[u].LinkedFieldName)+'" ',l+=' LinkedFieldValue="'+a.e.String(o[u].LinkedFieldValue)+'" ',e.Tables.length>5){var g=e.Tables[5].filter((function(e){return e.InvDocDetailsID==o[u].DocDetailsID}));g.length>0&&(l+=' ExtraXML="',l+="&lt;xml>&lt;Row ",e.Columns[5].Contains("RefInvDocDetailsID")&&(l+=" RefInvID=&quo;"+a.e.String(g[0].RefInvDocDetailsID)+"&quot; "),l+=" BatchID=&quo;"+g[0].BatchID.toString()+"&quot; ",l+=" ProductID=&quo;"+o[u].ProductID.toString()+"&quot; ",l+=" Quantity=&quo;"+g[0].Quantity.toString()+"&quot; ",l+=" Hold=&quo;"+g[0].HoldQuantity.toString()+"&quot; ",l+=" Release=&quo;"+g[0].ReleaseQuantity.toString()+"&quot; ",l+=' >&lt;/Row>&lt;/xml>" ')}l+=" /></Row>"},c=0;c<o.length;c++)u(c);l+="</xml>","8"==e.Tables[0][n].ProductTypeID.toString()||"3"==e.Tables[0][n].ProductTypeID.toString()||"11"==e.Tables[0][n].ProductTypeID.toString()||"12"==e.Tables[0][n].ProductTypeID.toString()?N.ExtraXML=l:i.Preferences.ContainsKey("EnablePromotions")&&"true"==i.Preferences.EnablePromotions.toLowerCase()&&(N.PromotionXML=l)}}(),e.Tables[0].length>0&&e.Columns[0].Contains("IsQtyFreeOffer")&&!a.e.IsEmpty(e.Tables[0][n].IsQtyFreeOffer)&&parseInt(e.Tables[0][n].IsQtyFreeOffer)>0&&i.GridDataColumns.Contains("SchemeID")){if(N.SchemeID=e.Tables[0][n].IsQtyFreeOffer.toString(),"2"!=N.SchemeID.toString()){var p=i.GridData.filter((function(t){return 1!=t.SchemeID&&t.SchemeID==e.Tables[0][n].IsQtyFreeOffer}));if(p.length>0)N.MaxSchemeID=p[0].MaxSchemeID.toString();else{var f=0,y=i.GridData.Compute("max","MaxSchemeID");null!=y&&(f=a.e.Int(y)),f++,N.MaxSchemeID=f}}if("1"==N.SchemeID.toString())N.IsScheme="Y",N.FreeQTY=N.quantity,N.quantity=0;else if(e.Columns[0].Contains("ParentSchemeID")&&!a.e.IsEmpty(e.Tables[0][n].ParentSchemeID)&&"0"!=e.Tables[0][n].ParentSchemeID.toString()){if(N.IsScheme="Y","2"==N.SchemeID.toString()){var g=e.Tables[0][n].ParentSchemeID.toString().split(","),b=e.Tables[0].filter((function(e){return g.Contains(e.DocSeqNo)}));if(b.length>0){var T=i.GridData.filter((function(e){return e.DocDetailsID==b[0].DocDetailsID}));T.length>0&&(N.MaxSchemeID=T[0].MaxSchemeID)}}}else if(N.IsScheme="N","2"==N.SchemeID.toString()){var P=0,M=i.GridData.Compute("max","MaxSchemeID");null!=M&&(P=a.e.Int(M)),P++,N.MaxSchemeID=P}}if(e.Tables[0].length>0&&e.Columns[0].Contains("AverageRate")&&!a.e.IsEmpty(e.Tables[0][n].AverageRate)&&i.GridDataColumns.Contains("AVGRATE")&&(N.AVGRATE=e.Tables[0][n].AverageRate.toString()),!t&&e.Tables.length>19&&e.Tables[19].length>0&&e.Columns[19].Contains("ExecutedQty")){var L=e.Tables[19].filter((function(t){return t.InvDocDetailsID==e.Tables[0][n].DocDetailsID}));if(i.GridDataColumns.Contains("ExecutedQty")&&L.length>0&&(N.ExecutedQty=L[0].ExecutedQty.toString()),i.Data.Tables[0].length>0){var A=i.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&79==e.LocalReference&&50455==e.LinkData}));A.length>0&&i.GridDataColumns.Contains(A[0].SysColumnName.toString())&&L.length>0&&(N[A[0].SysColumnName.toString()]=L[0].ExecutedQty.toString())}}if(!t&&e.Tables[0].length>0&&e.Columns[0].Contains("BatchID")&&(N.BatchID=e.Tables[0][n].BatchID.toString()),(22==i.DocumentType||23==i.DocumentType)&&i.GridDataColumns.Contains("DenominationsXML")&&e.Tables.length>13){for(var F="",k=e.Tables[13].filter((function(t){return t.AccDocDetailsID==e.Tables[0][n].DocDetailsID})),w=0;w<k.length;w++)F+='<XML IsDenom="1" ',a.e.IsEmpty(k[w].Notes)||a.e.IsEmpty(k[w].NotesTender)||(F+=' CurrencyID="'+k[w].CurrencyID.toString()+'" Notes="'+k[w].Notes.toString()+'"  NotesTender="',F+=k[w].NotesTender.toString()+'"  Change="'),a.e.IsEmpty(k[w].Change)||a.e.IsEmpty(k[w].ChangeTender)?F+='0" ChangeTender="0" />':F+=k[w].Change.toString()+'" ChangeTender="'+k[w].ChangeTender.toString()+'" />';N.DenominationsXML=F.toString(),N.Denomination="Denominations"}if(16!=i.DocumentType&&17!=i.DocumentType&&28!=i.DocumentType&&29!=i.DocumentType||(e.Tables[0].length>0&&!a.e.IsEmpty(e.Tables[0][n].CreditAccount)&&parseInt(e.Tables[0][n].CreditAccount)>0?(N.AccountID_Key=e.Tables[0][n].CreditAccount.toString(),N.Type=e.Tables[0][n].CrIsBillwise.toString(),e.Columns[0].Contains("IsNegative")&&!a.e.IsEmpty(e.Tables[0][n].IsNegative)&&Object(S.j)(e.Tables[0][n].IsNegative)?(N.DebitAmount=s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])&&e.Columns[0].Contains("amountfc")?"-"+e.Tables[0][n].amountfc:"-"+e.Tables[0][n].Amount,N.CreditAmount=0):(N.DebitAmount=0,N.CreditAmount=s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])&&e.Columns[0].Contains("amountfc")?e.Tables[0][n].amountfc:e.Tables[0][n].Amount)):e.Tables[0].length>0&&!a.e.IsEmpty(e.Tables[0][n].DebitAccount)&&parseInt(e.Tables[0][n].DebitAccount)>0&&(N.AccountID_Key=e.Tables[0][n].DebitAccount.toString(),N.Type=e.Tables[0][n].DBIsBillwise.toString(),16==i.DocumentType&&e.Columns[0].Contains("BankAccountID")&&!a.e.IsEmpty(e.Tables[0][n].BankAccountID)&&parseInt(e.Tables[0][n].BankAccountID.toString())>0&&(N.AccountID_KEY=parseInt(e.Tables[0][n].BankAccountID.toString())),e.Columns[0].Contains("IsNegative")&&!a.e.IsEmpty(e.Tables[0][n].IsNegative)&&Object(S.j)(e.Tables[0][n].IsNegative)?(N.DebitAmount=0,N.CreditAmount=s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])&&e.Columns[0].Contains("amountfc")?"-"+e.Tables[0][n].amountfc:"-"+e.Tables[0][n].Amount):(N.DebitAmount=s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])&&e.Columns[0].Contains("amountfc")?e.Tables[0][n].amountfc:e.Tables[0][n].Amount,N.CreditAmount=0))),i.Preferences.ContainsKey("LineWisePDC")&&Object(S.j)(i.Preferences.LineWisePDC)&&e.Tables.length>5&&e.Tables[5].length>0){var x=e.Tables[5].filter((function(t){return t.AccDocDetailsID==e.Tables[0][n].DocDetailsID}));x.length>0&&(N.RefStatusID=x[0].StatusID)}if(!t&&e.Tables.length>4&&e.Tables[4].length>0){var U,K="",j="";i.IsInventory?(U=e.Tables[4].filter((function(e){return e.InvDocDetailsID==N.DocDetailsID})),K+="<xml>",U.forEach((function(t){K+="<Row ";for(var n=0;n<e.Columns[4].length;n++)K+=e.Columns[4][n]+'="'+a.e.StringValue(t[e.Columns[4][n]])+'" ';K+=" ></Row>"})),K+="</xml>"):(K+="<BillWise> ",U=e.Columns[4].Contains("RefNodeid")?e.Tables[4].filter((function(t){return t.RefNodeid==e.Tables[0][n].DocDetailsID})):e.Tables[4].filter((function(t){return t.DocSeqNo==e.Tables[0][n].DocSeqNo})),i.dtSerialTemp=U,U.forEach((function(t){K+="<Row ",K+='DocSeqNo="'+t.DocSeqNo.toString()+'" ',K+='AccountID="'+t.AccountID.toString()+'" ',e.Columns[4].Contains("RefNodeid")&&(K+='VNO="'+t.DocNo.toString()+'" ',""!=i.ChildVNos&&(i.ChildVNos+="','"),i.ChildVNos+=t.DocNo.toString(),i.GridDataColumns.Contains("OldSeqNo")&&(N.OldSeqNo=t.DocSeqNo.toString())),K+='AdjAmount="'+t.AdjAmount.toString()+'" ',K+='AdjCurrID="'+t.AdjCurrID.toString()+'" ',K+='AdjExchRT="'+t.AdjExchRT.toString()+'" ',s.a.SessionManager.Preferences.ContainsKey("BillwiseCurrency")&&"true"==s.a.SessionManager.Preferences.BillwiseCurrency.toLowerCase()&&e.Columns[4].Contains("AmountFC")?K+='AmountFC="'+t.AmountFC.toString()+'" ':!a.e.IsEmpty(t.AdjAmount)&&!a.e.IsEmpty(t.AdjExchRT)&&parseFloat(t.AdjExchRT)>0?K+='AmountFC="'+parseFloat(t.AdjAmount)/parseFloat(t.AdjExchRT)+'" ':K+='AmountFC="'+t.AdjAmount.toString()+'" ',K+='IsNewReference="'+(Object(S.j)(t.IsNewReference)?"1":"0")+'" ',!Object(S.j)(t.IsNewReference)&&e.Columns[4].Contains("RefStatusID")&&(K+='RefStatusID="'+t.RefStatusID.toString()+'" '),K+='RefDocNo="'+r.d.GetValidXml(t.RefDocNo)+'" ',K+='RefDocSeqNo="'+a.e.StringValue(t.RefDocSeqNo)+'" ',e.Columns[4].Contains("RefDocDate")&&!a.e.IsEmpty(t.RefDocDate)&&(K+='RefDocDate="'+new Date(t.RefDocDate).ToString("dd/MMM/yyyy")+'" '),e.Columns[4].Contains("RefDocDueDate")&&!a.e.IsEmpty(t.RefDocDueDate)&&(K+='RefDocDueDate="'+new Date(t.RefDocDueDate).ToString("dd/MMM/yyyy")+'" '),K+='Narration="'+a.e.StringValue(t.Narration)+'" ',K+='IsDocPDC="'+(Object(S.j)(t.IsDocPDC)?"1":"0")+'" ',!a.e.IsEmpty(t.DiscAmount)&&parseFloat(t.DiscAmount.toString())>0&&(K+='DiscAccountID="'+t.DiscAccountID.toString()+'" ',K+='DiscCurrID="'+t.DiscCurrID.toString()+'" ',K+='DiscExchRT="'+t.DiscExchRT.toString()+'" ',K+='DiscAmount="'+t.DiscAmount.toString()+'" ',j+=i.GetDiscXML(t)),K+=" ></Row>"})),""!=j&&(N.DiscXML="<DiscXML>"+j+"</DiscXML>"),e.Tables.length>16&&e.Tables[16].length>0&&(U=e.Tables[16].filter((function(t){return t.DocSeqNo==e.Tables[0][n].DocSeqNo}))).forEach((function(e){K+='<NonAccRows RefDocNo="'+e.RefDocNo.toString()+'" Amount="'+e.Amount.toString()+'" Narration="'+e.Narration.toString()+'" ></NonAccRows>'})),K+=" </BillWise>"),N.ExtraXML=K}if(!t&&!i.IsInventory&&e.Tables.length>11&&e.Tables[11].length>0){var _=e.Tables[11].filter((function(t){return t.DocSeqNo==e.Tables[0][n].DocSeqNo}));if(_.length>0){var W="";W+="<XML> ",_.forEach((function(t){W+="<Row ",W+='DocSeqNo="'+t.DocSeqNo.toString()+'" ',W+='AccountID="'+t.AccountID.toString()+'" ',W+='AdjAmount="'+t.AdjAmount.toString()+'" ',W+='AdjCurrID="'+t.AdjCurrID.toString()+'" ',W+='AdjExchRT="'+t.AdjExchRT.toString()+'" ',!a.e.IsEmpty(t.AdjAmount)&&!a.e.IsEmpty(t.AdjExchRT)&&parseFloat(t.AdjExchRT)>0?W+='AmountFC="'+parseFloat(t.AdjAmount)/parseFloat(t.AdjExchRT)+'" ':W+='AmountFC="'+t.AdjAmount.toString()+'" ',W+='IsNewReference="'+(Object(S.j)(t.IsNewReference)?"1":"0")+'" ',W+='RefDocNo="'+a.e.StringValue(t.RefDocNo)+'" ',W+='RefDocSeqNo="'+a.e.StringValue(t.RefDocSeqNo)+'" ',W+='Narration="'+a.e.StringValue(t.Narration)+'" ',e.Columns[11].Contains("RefDocDate")&&!a.e.IsEmpty(t.RefDocDate)&&(W+='RefDocDate="'+new Date(t.RefDocDate).ToString("dd/MMM/yyyy")+'" '),e.Columns[11].Contains("RefDocDueDate")&&!a.e.IsEmpty(t.RefDocDueDate)&&(W+='RefDocDueDate="'+new Date(t.RefDocDueDate).ToString("dd/MMM/yyyy")+'" '),W+='IsDocPDC="'+(Object(S.j)(t.IsDocPDC)?"1":"0")+'" ',W+=" ></Row>"})),W+=" </XML>",N.ReturnXML=W}}if(!t&&i.IsInventory&&e.Tables.length>5&&e.Columns[5].Contains("InvDocDetailsID")&&e.Tables[5].length>0&&"5"==e.Tables[0][n].ProductTypeID.toString()){var Q="",H=e.Tables[5].filter((function(e){return e.InvDocDetailsID==N.DocDetailsID||e.DynamicInvDocDetailsID==N.DocDetailsID}));if(H.length>0){var X=0;Q+="<xml>",H.forEach((function(t){if(Q+="<Row ",e.Columns[5].Contains("RefInvDocDetailsID")&&(Q+=' RefInvID="'+a.e.StringValue(t.RefInvDocDetailsID)+'" '),Q+=' BatchID="'+t.BatchID.toString()+'" ',Q+=' ProductID="'+N.ProductID_Key.toString()+'" ',31==i.DocumentType||32==i.DocumentType?(Q+=' Quantity="'+t.ReleaseQuantity.toString()+'" ',Q+=' Hold="0" ',Q+=' Release="'+t.ReleaseQuantity.toString()+'" '):(Q+=' Quantity="'+t.Quantity.toString()+'" ',Q+=' Hold="'+t.HoldQuantity.toString()+'" ',30==i.DocumentType&&i.GridDataColumns.Contains("VoucherType")&&"-1"==N.VoucherType.toString()||(Q+=' Release="'+t.ReleaseQuantity.toString()+'" ')),i.Preferences.ContainsKey("ConsBatch")&&"True"==i.Preferences.ConsBatch&&(Q+=' DocDetailsID="'+t.InvDocDetailsID.toString()+'" ',a.e.IsEmpty(t.LinkedInvDocDetailsID)||(Q+=' LinkedID="'+t.LinkedInvDocDetailsID.toString()+'" '),X+=parseFloat(t.Quantity)),N.MRate=t.MRPRate.toString(),N.RRate=t.RetailRate.toString(),N.SRate=t.StockistRate.toString(),i.Data.Tables[0].length>0){var n=i.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&-100==e.LinkData}));n.length>0&&i.GridDataColumns.Contains(n[0].SysColumnName.toString())&&(N[n[0].SysColumnName.toString()]=t.BatchNumber.toString()),(n=i.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&-101==e.LinkData}))).length>0&&i.GridDataColumns.Contains(n[0].SysColumnName.toString())&&t.MfgDate&&(N[n[0].SysColumnName.toString()]=new Date(t.MfgDate).ToString(s.a.SessionManager.Preferences["Date Format"])),(n=i.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&-102==e.LinkData}))).length>0&&i.GridDataColumns.Contains(n[0].SysColumnName.toString())&&t.ExpiryDate&&(N[n[0].SysColumnName.toString()]=new Date(t.ExpiryDate).ToString(s.a.SessionManager.Preferences["Date Format"]))}Q+=" ></Row>"})),X>0&&(N.Quantity=X),Q+="</xml>",N.ExtraXML=Q}}if(!t&&35==i.DocumentType&&e.Tables.length>16&&e.Columns[16].Contains("ContractLineID")&&e.Tables[16].length>0){var q=e.Tables[16].filter((function(e){return e.ContractLineID==N.DocDetailsID}));if(q.length>0){var J="";J+="<xml>";for(var Y=0;Y<q.length;Y++)a.e.IsEmpty(q[Y].StartDate)||(J+="<Row ",J+='StartDate="'+new Date(q[Y].StartDate).ToString("dd/MMM/yyyy")+'" ',J+='StartTime="'+q[Y].StartTime.toString()+'" ',a.e.IsEmpty(q[Y].EndDate)||(J+='EndDate="'+new Date(q[Y].EndDate).ToString("dd/MMM/yyyy")+'" ',J+='EndTime="'+q[Y].EndTime.toString()+'" '),J+='Remarks="'+q[Y].Remarks.toString()+'" ',J+='AssignedTo="'+q[Y].AssignedTo.toString()+'" ',J+='AccountName="'+q[Y].AccountName.toString()+'" ',J+='CaseID="'+q[Y].CaseID.toString()+'" ',J+='Status="'+q[Y].Status.toString()+'" ',J+="></Row>");J+="</xml>",N.ExtraXML=J}}if(202==i.DocumentType&&e.Tables.length>16&&e.Columns[16].Contains("CostCenterID")&&e.Tables[16].length>0){var z=e.Tables[16].filter((function(e){return e.CostCenterID==i.CostCenterID.toString()&&e.RefNodeID==N.DocDetailsID.toString()}));if(z.length>0){var Z="";Z+="<xml>";for(var $=0;$<z.length;$++)a.e.IsEmpty(z[$].StartDate)||(Z+="<Row ",Z+='StartDate="'+new Date(z[$].StartDate.toString()).ToString("dd/MMM/yyyy")+'" ',Z+='StartTime="'+z[$].StartTime.toString()+'" ',a.e.IsEmpty(z[$].EndDate)||(Z+='EndDate="'+new Date(z[$].EndDate.toString()).ToString("dd/MMM/yyyy")+'" ',Z+='EndTime="'+z[$].EndTime.toString()+'" '),Z+='Remarks="'+a.e.String(z[$].Remarks)+'" ',Z+='AssignedTo="'+a.e.String(z[$].AssignedTo)+'" ',Z+='AccountName="'+a.e.String(z[$].AccountName)+'" ',Z+='DocID="'+a.e.String(z[$].DocID)+'" ',Z+='DocDetailsID="'+a.e.String(z[$].DocDetailsID)+'" ',Z+='Status="'+a.e.String(z[$].Status)+'" ',Z+="></Row>");Z+="</xml>",N.ExtraXML=Z.toString()}}if(i.IsInventory&&e.Tables.length>21&&e.Columns[21].Contains("InvDocDetailsID")&&i.GridDataColumns.Contains("QtyType")&&e.Tables[21].length>0){var ee="",te=null;(te=e.Tables[21].filter(t?function(t){return t.InvDocDetailsID==a.e.String(e.Tables[0][n].DocDetailsID)}:function(e){return e.InvDocDetailsID==N.DocDetailsID})).length>0&&(ee+="<QtyAdjustments>",te.forEach((function(t){ee+="<Row ";for(var n=0;n<e.Columns[21].length;n++)e.Columns[21][n].Contains("Fld")&&!a.e.IsEmpty(t[e.Columns[21][n]])&&(ee+=e.Columns[21][n]+'="'+t[e.Columns[21][n]].toString()+'" ');"1"==t.Islinked.toString()||"True"==t.Islinked.toString()?ee+='Islinked="1"':ee+='Islinked="0"',ee+=" ></Row>"})),ee+="</QtyAdjustments>",N.QtyXML=ee)}if(!t&&i.IsInventory&&e.Tables.length>22&&e.Columns[22].Contains("InvDocDetailsID")){var ne="",se=e.Tables[22].filter((function(e){return e.InvDocDetailsID==N.DocDetailsID})),ae=0;se.length>0&&(ne+="<BinsXML>",se.forEach((function(t){ne+="<Row ",ne+=' NodeID="'+t.BinID.toString()+'" ',ne+=' Allocate="'+t.Quantity.toString()+'" ',ae+=parseFloat(t.Quantity),E>0&&(ne+=' Warehouse="'+e.Tables[1][n]["dcCCNID"+(E-5e4)].toString()+'" '),ne+=' Remarks="'+a.e.String(t.Remarks)+'" ',ne+=' RefID="'+t.RefInvDocDetailsID.toString()+'" ',ne+=' Vol="'+e.Tables[0][n].Volume.toString()+'" ',ne+=' Waist="'+e.Tables[0][n].Wastage.toString()+'" ',ne+=" ></Row>"})),ne+="</BinsXML>",N.BinsXML=ne),i.GridDataColumns.Contains("BinStatus")&&(0==ae?(N.BinStatus="UnAdjusted",N.BinStatus_COLOR="RED"):a.e.IsEmpty(e.Tables[0][n].UOMConvertedQty)||parseFloat(e.Tables[0][n].UOMConvertedQty)!=ae?(N.BinStatus="Partial",N.BinStatus_COLOR="ORANGE"):(N.BinStatus="Adjusted",N.BinStatus_COLOR="GREEN"))}if(!t&&i.IsInventory&&e.Tables.length>26&&e.Columns[26].Contains("InvDocDetailsID")&&e.Tables[26].length>0){var oe="",ie=e.Tables[26].filter((function(e){return 1==e.Type&&e.InvDocDetailsID==N.DocDetailsID}));if(ie.length>0&&i.GridDataColumns.Contains("DocExtraXML")&&(oe+="<DocExtraXML>",ie.forEach((function(e){oe+="<Row ",oe+=' RefID="'+e.RefID.toString()+'" ',oe+=' Qty="'+e.Quantity.toString()+'" ',oe+=' Type="'+e.Type.toString()+'" ',oe+=" ></Row>",N.BOEID=e.RefID.toString()})),oe+="</DocExtraXML>",N.DocExtraXML=oe),(ie=e.Tables[26].filter((function(e){return 11==e.Type&&e.InvDocDetailsID==N.DocDetailsID}))).length>0&&i.GridDataColumns.Contains("DocExtraXML")&&(oe+="<DocExtraXML>",ie.forEach((function(e){oe+="<Row ",oe+=' RefID="'+e.RefID.toString()+'" ',oe+=' Qty="'+e.Quantity.toString()+'" ',oe+=' Type="'+e.Type.toString()+'" ',oe+=" ></Row>",N.BOEID=e.RefID.toString()})),oe+="</DocExtraXML>",N.DocExtraXML=oe),(ie=e.Tables[26].filter((function(e){return 2==e.Type&&e.InvDocDetailsID==N.DocDetailsID}))).length>0&&i.GridDataColumns.Contains("PackXML")&&(i.GridDataColumns.Contains("Unq")&&!e.Columns[26].Contains("Unq")&&e.Columns[26].push("Unq"),oe="",oe+="<DocExtraXML>",ie.forEach((function(t){oe+="<Row ",oe+=' RefID="'+t.RefID.toString()+'" ',oe+=' Qty="'+t.Quantity.toString()+'" ',oe+=' Type="'+t.Type.toString()+'" ',oe+=' Label="'+t.label.toString()+'" ',oe+=' Volume="'+e.Tables[0][n].Volume.toString()+'" ',oe+=' Weight="'+e.Tables[0][n].Weight.toString()+'" ',a.e.IsEmpty(t.Fld1)||(oe+=' Fld1="'+t.Fld1.toString()+'" '),a.e.IsEmpty(t.Fld2)||(oe+=' Fld2="'+t.Fld2.toString()+'" '),a.e.IsEmpty(t.fld3)||(oe+=' Fld3="'+t.fld3.toString()+'" '),a.e.IsEmpty(t.fld4)||(oe+=' Fld4="'+t.fld4.toString()+'" '),a.e.IsEmpty(t.fld5)||(oe+=' Fld5="'+t.fld5.toString()+'" '),oe+=" ></Row>",e.Columns[26].Contains("Unq")&&(t.Unq=n)})),oe+="</DocExtraXML>",N.PackXML=oe,i.GridDataColumns.Contains("Unq")&&(N.Unq=n)),(ie=e.Tables[26].filter((function(e){return 3==e.Type&&e.InvDocDetailsID==N.DocDetailsID}))).length>0&&i.GridDataColumns.Contains("TestCaseXML")&&(oe="",oe+="<DocExtraXML>",ie.forEach((function(e){oe+="<Row ",oe+=' RefID="'+e.RefID.toString()+'" ',oe+=' Qty="'+e.Quantity.toString()+'" ',a.e.IsEmpty(e.label)||(oe+=' Label="'+e.label.toString()+'" '),oe+=' Type="3" ',s.a.SessionManager.Preferences.ContainsKey("QCLabNameDimension")&&""!=s.a.SessionManager.Preferences.QCLabNameDimension.toString()&&0!=parseInt(s.a.SessionManager.Preferences.QCLabNameDimension)&&(a.e.IsEmpty(e.LabID)||(oe+=' LabID="'+e.LabID.toString()+'" '),a.e.IsEmpty(e.ReportNo)||(oe+=' ReportNo="'+e.ReportNo.toString()+'" '),a.e.IsEmpty(e.ReportDate)||(oe+=' ReportDate="'+new Date(e.ReportDate).ToString("dd MMM yyyy")+'" ')),a.e.IsEmpty(e.Unit)||(oe+=' Unit="'+e.Unit.toString()+'" '),a.e.IsEmpty(e.Remarks)||(oe+=' Remarks="'+r.d.GetValidXml(e.Remarks.toString())+'" '),a.e.IsEmpty(e.Fld1)||(oe+=' Fld1="'+r.d.GetValidXml(e.Fld1.toString())+'" '),a.e.IsEmpty(e.Fld2)||(oe+=' Fld2="'+r.d.GetValidXml(e.Fld2.toString())+'" '),a.e.IsEmpty(e.fld3)||(oe+=' Fld3="'+r.d.GetValidXml(e.fld3.toString())+'" '),a.e.IsEmpty(e.fld4)||(oe+=' Fld4="'+r.d.GetValidXml(e.fld4.toString())+'" '),a.e.IsEmpty(e.fld5)||(oe+=' Fld5="'+r.d.GetValidXml(e.fld5.toString())+'" '),a.e.IsEmpty(e.fld6)||(oe+=' Fld6="'+r.d.GetValidXml(e.fld6.toString())+'" '),a.e.IsEmpty(e.fld7)||(oe+=' Fld7="'+r.d.GetValidXml(e.fld7.toString())+'" '),a.e.IsEmpty(e.fld8)||(oe+=' Fld8="'+r.d.GetValidXml(e.fld8.toString())+'" '),a.e.IsEmpty(e.fld9)||(oe+=' Fld9="'+r.d.GetValidXml(e.fld9.toString())+'" '),a.e.IsEmpty(e.fld10)||(oe+=' Fld10="'+r.d.GetValidXml(e.fld10.toString())+'" '),oe+=" ></Row>"})),oe+="</DocExtraXML>",N.TestCaseXML=oe),45==i.DocumentType&&((ie=e.Tables[26].filter((function(e){return 9==e.Type&&e.InvDocDetailsID==N.DocDetailsID}))).length>0&&i.GridDataColumns.Contains("Dependencies")&&(oe="",ie.forEach((function(e){oe.length>0&&(oe+=","),oe+=e.Fld1.toString()})),N.Dependencies=oe),oe="",oe+="<AssignXML  ",(ie=e.Tables[26].filter((function(e){return 6==e.Type&&e.InvDocDetailsID==N.DocDetailsID}))).length>0&&(oe+='Groups="',ie.forEach((function(e){oe+=e.RefID.toString()+","})),oe=oe.substr(0,oe.length-1),oe+='"  '),(ie=e.Tables[26].filter((function(e){return 7==e.Type&&e.InvDocDetailsID==N.DocDetailsID}))).length>0&&(oe+='Roles="',ie.forEach((function(e){oe+=e.RefID.toString()+","})),oe=oe.substr(0,oe.length-1),oe+='"  '),(ie=e.Tables[26].filter((function(e){return 8==e.Type&&e.InvDocDetailsID==N.DocDetailsID}))).length>0&&(oe+='Users="',ie.forEach((function(e){oe+=e.RefID.toString()+","})),oe=oe.substr(0,oe.length-1),oe+='"  '),oe+="></AssignXML>",N.AssignXML=oe),(ie=e.Tables[26].filter((function(e){return 50==e.Type&&e.InvDocDetailsID==N.DocDetailsID.toString()}))).length>0){var re=null;oe="";for(var le=function(e){var t=ie[e];null!=re&&re.DisplayMember==t.label.toString()||(null!=re&&(a.e.IsEmpty(oe)||(oe="<XML>"+oe+"</XML>",re.distLineWise?i.GridDataColumns.Contains(re.DisplayMember+"DistXML")&&(N[re.DisplayMember+"DistXML"]=oe.toString()):re.distxml=oe.toString())),re=i.ColumnSource.find((function(e){return e.DisplayMember==t.label.toString()}))),n>0&&!re.distLineWise||(oe+="<Rows  DCCCNID"+(re.distDim-5e4)+'="'+t.RefID.toString(),oe+='" Percent="'+t.Quantity.toString()+'" />')},ue=0;ue<ie.length;ue++)le(ue);null!=re&&""!=oe.toString()&&(oe="<XML>"+oe+"</XML>",re.distLineWise?i.GridDataColumns.Contains(re.DisplayMember+"DistXML")&&(N[re.DisplayMember+"DistXML"]=oe.toString()):re.distxml=oe.toString())}}if(!t&&i.IsInventory&&e.Tables.length>12&&e.Columns[12].Contains("InvDocDetailsID")&&e.Tables[12].length>0&&i.TempProductID==parseInt(e.Tables[0][n].ProductID)){var ce="",De=e.Tables[12].filter((function(e){return e.InvDocDetailsID==N.DocDetailsID}));De.length>0&&(ce+="<xml>",De.forEach((function(e){ce+="<Row ",ce+=' ProductCode="'+e.ProductCode.toString()+'" ',ce+=' PurchasePrice="'+e.PurchasePrice.toString()+'" ',ce+=' Manufacturer="'+e.Manufacturer.toString()+'" ',ce+=' Vehicles="'+e.Vehicles.toString()+'" ',ce+=' Part="'+e.Part.toString()+'" ',ce+=" ></Row>"})),ce+="</xml>",N.ExtraXML=ce)}if(5==i.DocumentType&&(n++,!t)){if(N.TODocDetailsID=e.Tables[0][n].DocDetailsID,e.Tables.length>4&&e.Columns[4].Contains("InvDocDetailsID")&&i.GridDataColumns.Contains("RecievedQtyXML")){var Ce=e.Tables[4].filter((function(e){return e.InvDocDetailsID==N.TODocDetailsID})),me="";me+="<xml>",Ce.forEach((function(t){me+="<Row ";for(var n=0;n<e.Columns[4].length;n++)me+=e.Columns[4][n]+'="'+a.e.StringValue(t[e.Columns[4][n]])+'" ';me+=" ></Row>"})),me+="</xml>",N.RecievedQtyXML=me}if(!t&&i.IsInventory&&e.Tables.length>22&&e.Columns[22].Contains("InvDocDetailsID")&&e.Tables[22].length>0){var he="",de=e.Tables[22].filter((function(e){return e.InvDocDetailsID==N.TODocDetailsID}));de.length>0&&(he+="<BinsXML>",de.forEach((function(t){he+="<Row ",he+=' NodeID="'+t.BinID.toString()+'" ',he+=' Allocate="'+t.Quantity.toString()+'" ',E>0&&e.Tables[1].length>n&&(he+=' Warehouse="'+e.Tables[1][n]["dcCCNID"+(E-5e4)].toString()+'" '),he+=' Remarks="'+a.e.String(t.Remarks)+'" ',he+=' RefID="'+t.RefInvDocDetailsID.toString()+'" ',he+=" ></Row>"})),he+="</BinsXML>",N.TOBinsXML=he)}}""!=V?i.GridDataObj.Table.push(N):t||i.GridDataObj.Table.push(N)}}else if("-1"==e.Tables[0][n].DynamicInvDocDetailsID.toString()){var pe=null;i.Preferences.ContainsKey("DistributeCost")&&"True"==i.Preferences.DistributeCost.toString()?pe=i.Preferences.DistributeCostDims.split(","):s.a.SessionManager.Preferences.ContainsKey("DistributeCost")&&"True"==s.a.SessionManager.Preferences.DistributeCost.toString()&&(pe=s.a.SessionManager.Preferences.DistributeCostDims.split(","));var Se="";Se+='<ROW Amount="'+a.e.String(e.Tables[0][n].GrossFC)+'" ',null!=pe&&pe.length>0&&pe.forEach((function(t){""!=t&&(Se+="cc"+t+'="'+e.Tables[1][n]["dcCCNID"+(parseInt(t)-5e4)].toString()+'" ')})),Se+=i.IsPurchase?' AccountID="'+a.e.String(e.Tables[0][n].DebitAccount)+'" />':' AccountID="'+a.e.String(e.Tables[0][n].CreditAccount)+'" />',i.DistributeCostXML+=Se.toString()}R=n},R=0;R<e.Tables[0].length;R++){var G,B,O;F(R)}if(!t&&s.a.SessionManager.Preferences.ContainsKey("ShowLinkedDocEdit")&&"true"==s.a.SessionManager.Preferences.ShowLinkedDocEdit.toLowerCase())if(e.Tables.length>6&&e.Columns[6].Contains("LinkDefID")&&e.Tables[6].length>0&&!a.e.IsEmpty(e.Tables[6][0].LinkDefID)&&"0"!=e.Tables[6][0].LinkDefID.toString()&&null!=this.Link&&null!=this.Link.LinkCombo)this.Link.LinkCombo.SelectedValue=e.Tables[6][0].LinkDefID.toString();else if(e.Tables[0].length>0&&e.Columns[0].Contains("LinkedFieldName")&&null!=e.Tables[0][0].LinkedFieldName&&"JOB"==e.Tables[0][0].LinkedFieldName.toString()&&null!=this.Link&&null!=this.Link.LinkCombo){var k=this.Link.LinkCombo.Items.find((function(e){return"158"==e.Parent}));k&&(this.Link.LinkCombo.SelectedValue=k.Value)}if((s.a.IsMobile||s.a.SessionManager.Preferences.ContainsKey("DisableAutoLoad")&&"true"==s.a.SessionManager.Preferences.DisableAutoLoad.toLowerCase()||100==this.DocumentType)&&this.FillListViews(!1),this.GridDataObj.CanUserAddRows){var w=this.GridDataObj.NewRow();w.DocSeqNo=this.GridData.length+1,w.DocDetailsID=0,this.GridDataObj.Table.push(w)}94==this.DocumentType&&(this.MinRowCount=0),this.UpdateSequence(),t||(this.LoadEditCallBack.Call(e),this.GetLCTRLimits()),this.ChequeBookChecking=0}},{key:"GetDiscXML",value:function(e){var t,n="",o=!1;parseFloat(a.e.String(e.AdjAmount))<0&&(o=!0),t=this.Preferences.ContainsKey("DecimalsBillWise")&&!a.e.IsEmpty(this.Preferences.DecimalsBillWise)&&parseInt(this.Preferences.DecimalsBillWise)>0?this.Preferences.DecimalsBillWise:s.a.SessionManager.Preferences.ContainsKey("DecimalsinAmount")?s.a.SessionManager.Preferences.DecimalsinAmount:"2";var i=this.dtSerialTemp.indexOf(e),l=1,u=parseFloat(a.e.String(e.DiscAmount)),c=parseFloat(a.e.String(e.DiscAmount));return!a.e.IsEmpty(e.DiscCurrID)&&!a.e.IsEmpty(e.DiscExchRT)&&a.e.Double(e.DiscExchRT)>0?(l=a.e.Double(e.DiscExchRT),c=parseFloat((u*l).ToString("N"+t))):l=1,n+="<Row><Transactions  ",n+=' DocDetailsID="0"  DocSeqNo="'+i+'" Amount="'+c+'" ',n+=' AmtFc="'+u+'" ',n+=' CurrencyID="1" ExchangeRate="'+l+'" ',n+=o?'CreditAccount="'+e.AccountID.toString()+'" DebitAccount="'+e.DiscAccountID.toString()+'" ':'CreditAccount="'+e.DiscAccountID.toString()+'" DebitAccount="'+e.AccountID.toString()+'" ',n+="></Transactions> ",this.strCCFields=this.GenerateQueryfromList(this._CCFields,!0,{message:""},!1,!1),n+=' <Numeric /> <Alpha /> <CostCenters  Query="'+this.strCCFields+'"  /> ',n+='<EXTRAXML><BillWise><Row DocSeqNo="'+i+'" ',n+='AccountID="'+e.AccountID.toString()+'" ',o?(n+='AmountFC="-'+u+'" ',n+='AdjAmount="-'+(u*l).ToString("N"+t)+'" '):(n+='AmountFC="'+u+'" ',n+='AdjAmount="'+(u*l).ToString("N"+t)+'" '),n+='AdjExchRT="'+l+'" ',n+='AdjCurrID="1" ',n+='IsNewReference="0" ',n+='RefDocNo="'+r.d.GetValidXml(e.RefDocNo.toString())+'" ',n+='RefStatusID="'+e.RefStatusID.toString()+'" ',n+='RefDocSeqNo="'+e.RefDocSeqNo.toString()+'" ',""!=e.RefDocDate.toString()&&(n+='RefDocDate="'+new Date(e.RefDocDate.toString()).ToString("dd/MMM/yyyy")+'" '),""!=e.RefDocDueDate.toString()&&(n+='RefDocDueDate="'+new Date(e.RefDocDueDate.toString()).ToString("dd/MMM/yyyy")+'" '),(n+='  IsDocPDC="0" Narration=""></Row></BillWise></EXTRAXML></Row>').toString()}},{key:"GetHistoryDetails",value:function(){var e=s.a.common.GetDataSet3("DOC024",this.CostCenterID.toString(),this.DocID.toString());return null!=e&&e.Tables.length>0&&e.Columns[0].Contains("HistoryID")?e.Tables[0]:null}},{key:"LoadFieldsData",value:function(e,t,n,s){var o=this;if(Logger.InfoLog("ControlGenerator:: Inside LoadCustomFieldsData"),null!=e&&e.length>0)try{for(var C=function(C){var m=t[C];if((s.Contains(m.DBColumnName)||5==o.DocumentType&&m.DBColumnName.Contains("TO"))&&!(n&&m instanceof D.a&&o.Data.Tables[8].filter((function(e){return e.CCID==m.CCID.toString()})).length>0||n&&m instanceof c.b&&o.Data.Tables[8].filter((function(e){return e.CCID==m.CCID.toString()})).length>0))if(m instanceof r.d)m.Text=a.e.String(e[0][m.DBColumnName]);else if(m instanceof r.c)m.Text=a.e.String(e[0][m.DBColumnName]);else if(m instanceof i.a)m.Text=a.e.String(e[0][m.DBColumnName]);else if(m instanceof u.e)m.SelectedValue=a.e.String(e[0][m.DBColumnName]);else if(m instanceof l.c)m.Date=a.e.isValidDate(e[0][m.DBColumnName])?new Date(e[0][m.DBColumnName]):null;else if(m instanceof l.b)m.Date=a.e.isValidDate(e[0][m.DBColumnName])?new Date(e[0][m.DBColumnName]):null;else if(m instanceof l.a)a.e.isValidDate(e[0][m.DBColumnName])&&(m.Date=new Date(e[0][m.DBColumnName]));else if(m instanceof c.b)5==o.DocumentType&&m.DBColumnName.Contains("TO")?s.Contains(m.DBColumnName.replace("TO",""))&&e.length>1&&(m.SelectedValue=parseInt(e[1][m.DBColumnName.replace("TO","")])):a.e.IsNum(e[0][m.DBColumnName])?(m.PreviousSelectedValue=parseInt(e[0][m.DBColumnName]),m.SelectedValue=parseInt(e[0][m.DBColumnName])):(m.PreviousSelectedValue=0,m.SelectedValue=0);else if(m instanceof c.a){var h=m;null!=h.DBColumnName&&s.Contains(h.DBColumnName)&&!a.e.IsEmpty(e[0][h.DBColumnName])&&(h.SetValue(parseInt(e[0][h.DBColumnName])),h.Dialog=null,null==o.dtHistory&&(o.dtHistory=o.GetHistoryDetails()),null!=o.dtHistory&&(h.drrEdit=o.dtHistory.filter((function(e){return e.CCID==h.CCID}))))}else m instanceof D.a&&(Object(I.isNullOrUndefined)(e[0][m.DBColumnName])?(m.Code.PreviousSelectedValue=m.Name.PreviousSelectedValue=0,m.Code.SelectedValue=m.Name.SelectedValue=0):(m.PrevSelValu=parseInt(e[0][m.DBColumnName]),m.Code.SelectedValue=m.Name.SelectedValue=parseInt(e[0][m.DBColumnName])))},m=0;m<t.length;m++)C(m)}catch(h){Logger.ErrorLog("ControlGenerator:: LoadCustomFieldsData : "+h.stack)}}},{key:"LoadLinkFieldsData_3",value:function(e,t,n){var s,o=0;if(n&&n.length>0)for(var i=0;i<e.Tables[0].length;i++)if(parseInt(n[0].InvDocDetailsID)==parseInt(e.Tables[0][i].DocDetailsID)){o=i;break}this.LoadLinkFieldsData(e,this._StaticFields,t,o),this.LoadLinkFieldsData(e,this._TextFields,t,o),this.LoadLinkFieldsData(e,this._CCFields,t,o),null!=this.DueDate&&(""==(s=this.GetValue(e,"DueDate",0,t))?this.IsPurchase&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0?this.GetDueDate(this.CreditAccount.SelectedValue,this.DocDate.Date,this.IsPurchase):!this.IsPurchase&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0&&this.GetDueDate(this.DebitAccount.SelectedValue,this.DocDate.Date,this.IsPurchase):this.DueDate.Date=a.e.isValidDate(s)?new Date(s):null),null!=this.BillNo&&(this.BillNo.Text=this.GetValue(e,"BillNo",0,t)),null!=this.Status&&(this.Status.SelectedValue=this.GetValue(e,"StatusID",0,t));for(var r=0;r<this.HeaderFields.length;r++){var l=this.HeaderFields[r];if(l instanceof C.b){""!=(s=this.GetValue(e,"CurrencyID",0,t))&&a.e.IsNum(s)&&(l.Currency.SelectedValue=s,""!=(s=this.GetValue(e,"ExchangeRate",0,t))&&a.e.IsNum(s)&&(l.ExchangeRate.Text=s));break}}}},{key:"GetValue",value:function(e,t,n,s){var o,i=null;i=(o=null!=s?s:e.Tables[4]).filter((function(e){return e.BASECOL==t}));var r="";if((i=null==s&&e.Columns[4].Contains("CostCenterIDLinked")?o.filter((function(s){return s.BASECOL==t&&s.CostCenterIDLinked==e.Tables[0][n].CostCenterID})):o.filter((function(e){return e.BASECOL==t}))).length>0&&!a.e.IsEmpty(i[0].LINKCOL)){if(r=i[0].LINKCOL.toString(),"-3"==i[0].CostCenterColIDLinked.toString())return e.Tables[0][n].DocPrefix.toString();if("-2"==i[0].CostCenterColIDLinked.toString())return e.Tables[0][n].DocNumber.toString();if(r.toLowerCase().Contains("dcccnid")&&e.Tables.length>1&&e.Columns[1].Contains(r)&&e.Tables[1].length>n)return null==e.Tables[1][n][r]?"":e.Tables[1][n][r].toString();if(e.Tables.length>2&&e.Columns[2].Contains(r)&&e.Tables[2].length>n&&r.toLowerCase().Contains("dcnum")||r.toLowerCase().Contains("dccalcnum")||r.toLowerCase().Contains("dccurrid")||r.toLowerCase().Contains("dcexchrt"))return null==e.Tables[2][n][r]?"":e.Tables[2][n][r].toString();if(r.toLowerCase().Contains("dcalpha")&&e.Tables.length>3&&e.Columns[3].Contains(r)&&e.Tables[3].length>n)return null==e.Tables[3][n][r]?"":e.Tables[3][n][r].toString();if(e.Tables.length>0&&e.Columns[0].Contains(r)&&e.Tables[0].length>n)return null==e.Tables[0][n][r]?"":e.Tables[0][n][r].toString();if("contactid"==r.toLowerCase()&&e.Tables.length>1&&e.Columns[1].Contains("ContactID")&&e.Tables[1].length>n)return e.Tables[1][n].ContactID.toString();if("userid"==r.toLowerCase()&&e.Tables.length>1&&e.Columns[1].Contains("UserID")&&e.Tables[1].length>n)return e.Tables[1][n].UserID.toString()}return""}},{key:"SetDynamicsetNumLinkValues",value:function(e,t,n,s){var o=null,i="";if((o=(null!=s?s:e.Tables[4]).filter(3==t.CostCenterID?function(e){return"ProductID"==e.BASECOL}:t.CostCenterID>0&&null!=t.ValueMember?function(e){return e.BASECOL==t.ValueMember.replace("_Key","")}:"ComboBox"==t.DataType||"PactComboBox"==t.DataType?function(e){return e.BASECOL==t.ValueBinding}:function(e){return e.BASECOL==t.DisplayMember})).length>0&&""!=o[0].LINKCOL){var l="";if((i=o[0].LINKCOL.toString()).toLowerCase().Contains("dcccnid")&&e.Tables.length>1&&e.Columns[1].Contains(i)&&e.Tables[1].length>n?l=a.e.String(e.Tables[1][n][i]):e.Tables.length>2&&e.Columns[2].Contains(i)&&e.Tables[2].length>n&&i.toLowerCase().Contains("dcnum")||i.toLowerCase().Contains("dccalcnum")||i.toLowerCase().Contains("dccurrid")||i.toLowerCase().Contains("dcexchrt")?l=a.e.String(e.Tables[2][n][i]):i.toLowerCase().Contains("dcalpha")&&e.Tables.length>3&&e.Columns[3].Contains(i)&&e.Tables[3].length>n?l=a.e.String(e.Tables[3][n][i]):e.Tables.length>0&&e.Columns[0].Contains(i)&&e.Tables[0].length>n?l=a.e.String(e.Tables[0][n][i]):"contactid"==i.toLowerCase()&&e.Tables.length>1&&e.Columns[1].Contains("ContactID")&&e.Tables[1].length>n?l=a.e.String(e.Tables[1][n].ContactID):"userid"==i.toLowerCase()&&e.Tables.length>1&&e.Columns[1].Contains("UserID")&&e.Tables[1].length>n&&(l=a.e.String(e.Tables[1][n].UserID)),""==l)return"";var u="";return 0!=t.CostCenterID?a.e.IsNum(l)&&(u=t.ValueMember.replace("_Key","")+"="+l+", "):a.e.String(e.Tables[0][n][e.Columns[0][1]])!=t.DisplayMember&&(u=t.DisplayMember+"="+r.d.GetValidXml(l)+", "),u}return""}},{key:"SetDynamicsetLinkValues",value:function(e,t,n,s){var o=null,i="";if((o=(null!=s?s:e.Tables[4]).filter(3==t.CostCenterID?function(e){return"ProductID"==e.BASECOL}:t.CostCenterID>0&&null!=t.ValueMember?function(e){return e.BASECOL==t.ValueMember.replace("_Key","")}:"ComboBox"==t.DataType||"PactComboBox"==t.DataType?function(e){return e.BASECOL==t.ValueBinding}:function(e){return e.BASECOL==t.DisplayMember})).length>0&&""!=o[0].LINKCOL){var l="";if((i=o[0].LINKCOL.toString()).toLowerCase().Contains("dcccnid")&&e.Tables.length>1&&e.Columns[1].Contains(i)&&e.Tables[1].length>n?l=a.e.String(e.Tables[1][n][i]):e.Tables.length>2&&e.Columns[2].Contains(i)&&e.Tables[2].length>n&&i.toLowerCase().Contains("dcnum")||i.toLowerCase().Contains("dccalcnum")||i.toLowerCase().Contains("dccurrid")||i.toLowerCase().Contains("dcexchrt")?l=a.e.String(e.Tables[2][n][i]):i.toLowerCase().Contains("dcalpha")&&e.Tables.length>3&&e.Columns[3].Contains(i)&&e.Tables[3].length>n?l=a.e.String(e.Tables[3][n][i]):e.Tables.length>0&&e.Columns[0].Contains(i)&&e.Tables[0].length>n?l=a.e.String(e.Tables[0][n][i]):"contactid"==i.toLowerCase()&&e.Tables.length>1&&e.Columns[1].Contains("ContactID")&&e.Tables[1].length>n?l=a.e.String(e.Tables[1][n].ContactID):"userid"==i.toLowerCase()&&e.Tables.length>1&&e.Columns[1].Contains("UserID")&&e.Tables[1].length>n&&(l=a.e.String(e.Tables[1][n].UserID)),""==l)return"";var u="";return 0!=t.CostCenterID?a.e.IsNum(l)&&(u=t.ValueMember.replace("_Key","")+'="'+l+'" '):"ComboBox"==t.DataType||"PactComboBox"==t.DataType?u=t.ValueBinding+'="'+r.d.GetValidXml(l)+'" ':a.e.String(e.Tables[0][n][e.Columns[0][1]])!=t.DisplayMember&&(u=t.DisplayMember+'="'+r.d.GetValidXml(l)+'" '),u}return""}},{key:"SetLinkValues",value:function(e,t,n,o,i,r){var l,u,c=null;c=l=null!=i?i:e.Tables[4],u=3!=t.CostCenterID||t.DisplayMember.toLowerCase().Contains("alpha")?t.CostCenterID>0&&null!=t.ValueMember?t.ValueMember.replace("_Key",""):"ComboBox"==t.DataType||"PactComboBox"==t.DataType?t.ValueBinding:t.DisplayMember:"ProductID",c=null==i&&e.Columns[4].Contains("CostCenterIDLinked")?l.filter((function(t){return t.BASECOL==u&&t.CostCenterIDLinked==e.Tables[0][n].CostCenterID})):l.filter((function(e){return e.BASECOL==u}));var D="";if(c.length>0){D=c[0].LINKCOL.toString();var C="";if(t.distDim>0){var m=e.Tables[13].filter((function(t){return 50==t.Type&&t.Label==D&&t.InvDocDetailsID==e.Tables[0][n].DocDetailsID.toString()})),h="";m.length>0&&(h+="<XML>",m.forEach((function(e){h+="<Rows  DCCCNID"+(t.distDim-5e4)+'="'+e.RefID.toString(),h+='" Percent="'+e.Quantity.toString()+'" />'})),h+="</XML>"),t.distLineWise?o[t.DisplayMember+"DistXML"]=h.toString():t.distxml=h.toString()}if("-3"==c[0].CostCenterColIDLinked.toString()?C=a.e.String(e.Tables[0][n].DocPrefix):"-2"==c[0].CostCenterColIDLinked.toString()?C=a.e.String(e.Tables[0][n].DocNumber):"-4"==c[0].CostCenterColIDLinked.toString()&&e.Columns[0].Contains("DocSeqNo")&&(C=a.e.String(e.Tables[0][n].DocSeqNo)),(t.DisplayMember.toLowerCase().Contains("todcccnid")||c[0].CostCenterColIDLinked.toString().startsWith("-"))&&e.Tables.length>1&&e.Columns[1].Contains(D)&&e.Tables[1].length>n+1)C=a.e.String(e.Tables[1][n+1][D]);else if(D.toLowerCase().Contains("dcccnid")&&e.Tables.length>1&&e.Columns[1].Contains(D)&&e.Tables[1].length>n)C=a.e.String(e.Tables[1][n][D]);else if(e.Tables.length>2&&e.Columns[2].Contains(D)&&e.Tables[2].length>n&&(D.toLowerCase().Contains("dcnum")||D.toLowerCase().Contains("dccalcnum")||D.toLowerCase().Contains("dccurrid")||D.toLowerCase().Contains("dcexchrt")))null==i&&Object(S.j)(c[0].CalcValue)?e.Columns[2].Contains("dcCalcNum"+D.toLowerCase().replace("dcnum",""))&&(C=a.e.String(e.Tables[2][n]["dcCalcNum"+D.toLowerCase().replace("dcnum","")])):C=a.e.String(e.Tables[2][n][D]);else if(D.toLowerCase().Contains("dcalpha")&&e.Tables.length>3&&e.Columns[3].Contains(D)&&e.Tables[3].length>n)C=a.e.String(e.Tables[3][n][D]);else if(e.Tables.length>0&&e.Columns[0].Contains(D)&&e.Tables[0].length>n)if("CurrencyID"==D&&t.DisplayMember.toLowerCase().Contains("alpha")){var d=this.Data.Tables[14].filter((function(t){return t.CurrencyID==e.Tables[0][n][D]}));d.length>0&&(C=a.e.String(d[0].Name))}else C=a.e.String(e.Tables[0][n][D]);else"contactid"==D.toLowerCase()&&e.Tables.length>1&&e.Columns[1].Contains("ContactID")&&e.Tables[1].length>n?C=a.e.String(e.Tables[1][n].ContactID):"customerid"==D.toLowerCase()&&e.Tables.length>1&&e.Columns[1].Contains("CustomerID")&&e.Tables[1].length>n?C=a.e.String(e.Tables[1][n].CustomerID):"userid"==D.toLowerCase()&&e.Tables.length>1&&e.Columns[1].Contains("UserID")&&e.Tables[1].length>n?C=a.e.String(e.Tables[1][n].UserID):"accountid"==D.toLowerCase()&&e.Tables.length>0?a.e.Int(e.Tables[0][n].DebitAccount)>0?C=e.Tables[0][n].DebitAccount.toString():a.e.Int(e.Tables[0][n].CreditAccount)>0&&(C=e.Tables[0][n].CreditAccount.toString()):"debitamount"==D.toLowerCase()?a.e.Int(e.Tables[0][n].DebitAccount)>0&&e.Columns[0].Contains("Amount")&&!a.e.IsEmpty(e.Tables[0][n].Amount)&&(C=e.Tables[0][n].Amount.toString()):"creditamount"==D.toLowerCase()&&a.e.Int(e.Tables[0][n].CreditAccount)>0&&e.Columns[0].Contains("Amount")&&!a.e.IsEmpty(e.Tables[0][n].Amount)&&(C=e.Tables[0][n].Amount.toString());if(""==C)return;!t.IsPartialLinking||a.e.IsEmpty(e.Tables[0][n][e.Columns[0][0]])&&""==r||("Quantity"==e.Tables[0][n][e.Columns[0][3]].toString()||"Gross"==e.Tables[0][n][e.Columns[0][3]].toString()?C=""!=r?(parseFloat(C)*(parseFloat(r)/parseFloat(e.Tables[0][n][e.Tables[0][n][e.Columns[0][3]].toString()]))).toString():(parseFloat(C)*(parseFloat(e.Tables[0][n][0].toString())/parseFloat(e.Tables[0][n][e.Tables[0][n][e.Columns[0][3]].toString()]))).toString():e.Tables[0][n][e.Columns[0][3]].toString().toLowerCase().Contains("dcnum")&&(C=""!=r?(parseFloat(C)*(parseFloat(r)/parseFloat(e.Tables[2][n][e.Tables[0][n][e.Columns[0][3]].toString()]))).toString():(parseFloat(C)*(parseFloat(e.Tables[0][n][0].toString())/parseFloat(e.Tables[2][n][e.Tables[0][n][e.Columns[0][3]].toString()]))).toString())),0!=t.CostCenterID?"SELECTIONBOX"==t.DataType?o[t.DisplayMember]=C:(a.e.IsNum(C)&&(o[t.ValueMember]=C,a.e.IsEmpty(o[t.DisplayMember])||(o[t.DisplayMember]=null)),61==t.CostCenterID?(e.Columns[1].Contains("StartYear")&&this.GridDataColumns.Contains("StartYear")&&(o.StartYear=e.Tables[1][n].StartYear.toString()),e.Columns[1].Contains("EndYear")&&this.GridDataColumns.Contains("EndYear")&&(o.EndYear=e.Tables[1][n].EndYear.toString())):3!=t.CostCenterID||a.e.IsEmpty(o[t.ValueMember])||a.e.IsEmpty(e.Tables[0][n].ProductID)||parseInt(o[t.ValueMember])!=parseInt(e.Tables[0][n].ProductID)?11==t.CostCenterID&&e.Columns[0].Contains("UnitName")&&(o[t.DisplayMember]=e.Tables[0][n].UnitName):e.Columns[0].Contains(t.DisplayMember)&&(o[t.DisplayMember]=e.Tables[0][n][t.DisplayMember])):"ComboBox"==t.DataType?o[t.ValueBinding]=C:"PactComboBox"==t.DataType?(o[t.ValueBinding]=C,o[t.ValueBinding+"_Key"]=C):"DATE"==t.DataType?a.e.isValidDate(C)&&(o[t.DisplayMember]=new Date(C).ToString(s.a.SessionManager.Preferences["Date Format"]),o[t.DisplayMember+"_Key"]=new Date(C)):"DATETIME"==t.DataType||"TIME"==t.DataType?a.e.isValidDate(C)&&(o[t.DisplayMember+"_Key"]=new Date(C),o[t.DisplayMember]=new Date(C).ToString(s.a.SessionManager.Preferences["Date Format"]+" hh:mm:ss tt")):"TIME2"==t.DataType.toUpperCase()?a.e.isValidDate(C)&&(o[t.DisplayMember+"_Key"]=new Date(C),o[t.DisplayMember]=new Date(C).ToString("HH:mm")):o[t.DisplayMember]=C}}},{key:"LoadLinkFieldsData",value:function(e,t,n){var s=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;Logger.InfoLog("ControlGenerator:: Inside LoadCustomFieldsData");var i=[];if(null==n&&this.Preferences.ContainsKey("DimensionWise")&&""!=this.Preferences.DimensionWise&&(i=this.Preferences.DimensionWise.split(",")),null!=e){var r=null;r=null!=n?n:e.Tables[4];try{for(var l=function(l){var u,C=t[l];if(i.length>0&&C instanceof c.b&&i.Contains(C.CCID.toString()))return"continue";u=null==n&&e.Columns[4].Contains("CostCenterIDLinked")&&e.Columns[0].Contains("CostCenterID")&&e.Tables[0].length>0?r.filter((function(t){return t.BASECOL==C.DBColumnName&&t.CostCenterIDLinked==e.Tables[0][0].CostCenterID})):r.filter((function(e){return e.BASECOL==C.DBColumnName}));var m="";u.length>0&&(m=a.e.StringValue(u[0].LINKCOL),"-3"==a.e.StringValue(u[0].CostCenterColIDLinked)&&(m="DocPrefix"),"-2"==a.e.StringValue(u[0].CostCenterColIDLinked)&&(m="DocNumber"),(C.DBColumnName.toLowerCase().Contains("todcccnid")||a.e.StringValue(u[0].CostCenterColIDLinked).startsWith("-"))&&e.Tables.length>1&&e.Columns[1].Contains(m)&&e.Tables[1].length>1?s.fillcontrolValue(C,e.Tables[1][1][m]):(m.toLowerCase().Contains("dcccnid")||m.toLowerCase().Contains("customerid")||m.toLowerCase().Contains("userid")||m.toLowerCase().Contains("contactid"))&&e.Tables.length>1&&e.Columns[1].Contains(m)&&e.Tables[1].length>o?s.fillcontrolValue(C,e.Tables[1][o][m]):e.Tables.length>2&&e.Columns[2].Contains(m)&&e.Tables[2].length>o&&m.toLowerCase().Contains("dcnum")||m.toLowerCase().Contains("dccalcnum")||m.toLowerCase().Contains("dccurrid")||m.toLowerCase().Contains("dcexchrt")?s.fillcontrolValue(C,e.Tables[2][o][m]):m.toLowerCase().Contains("dcalpha")&&e.Tables.length>3&&e.Columns[3].Contains(m)&&e.Tables[3].length>o?s.fillcontrolValue(C,e.Tables[3][o][m],!0):e.Tables.length>0&&e.Columns[0].Contains(m)&&e.Tables[0].length>o&&("CurrencyID"==m&&C.DBColumnName.toLowerCase().Contains("alpha")?(D=s.Data.Tables[14].filter((function(t){return t.CurrencyID==e.Tables[0][o][m]}))).length>0&&s.fillcontrolValue(C,D[0].Name,!0):s.fillcontrolValue(C,e.Tables[0][o][m],!0)))},u=0;u<t.length;u++){var D;l(u)}}catch(C){Logger.ErrorLog("ControlGenerator:: LoadCustomFieldsData : "+C.stack)}}}},{key:"GetcontrolValue",value:function(e){if(e instanceof r.d)return e.Text;if(e instanceof r.c)return e.Text;if(e instanceof i.a)return e.Text;if(e instanceof u.e)return e.SelectedValue;if(e instanceof l.c){if(e.Date)return e.Date.ToString("dd/MMM/yyyy")}else if(e instanceof l.b){if(e.Date)return e.Date.ToString("dd/MMM/yyyy hh:mm a")}else{if(e instanceof l.a)return e.Date.ToString("dd/MMM/yyyy");if(e instanceof c.b){if(e.SelectedValue>0)return e.SelectedValue.toString()}else if(e instanceof D.a&&e.SelectedValue>0)return e.SelectedValue.toString()}return""}},{key:"fillcontrolValue",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e instanceof r.d)n&&!a.e.IsEmpty(e.Text)&&this.Preferences.ContainsKey("Appendheader")&&"true"==this.Preferences.Appendheader.toLowerCase()?e.Text.split(",").Contains(t)||(e.Text+=","+t):e.Text.startsWith("<FlowDocument")?(e.Xaml=e.Text,e.Text=a.e.GetXamlText(e.Text.toString())):e.Text=t;else if(e instanceof r.c)n&&!a.e.IsEmpty(e.Text)&&this.Preferences.ContainsKey("Appendheader")&&"true"==this.Preferences.Appendheader.toLowerCase()?e.Text.split(",").Contains(t)||(e.Text+=","+t):e.Text=t;else if(e instanceof i.a)e.Text=t;else if(e instanceof u.e)e.SelectedValue=t;else if(e instanceof C.b)e.Currency.SelectedValue=t;else if(e instanceof l.c)""!=t&&a.e.isValidDate(t)&&(e.Date=new Date(t));else if(e instanceof l.b)""!=t&&a.e.isValidDate(t)&&(e.Date=new Date(t));else if(e instanceof l.a)""!=t&&a.e.isValidDate(t)&&(e.Date=new Date(t));else if(e instanceof c.b)""!=t&&a.e.IsNum(t)&&(e.PreviousSelectedValue=parseInt(t),e.SelectedValue=parseInt(t));else if(e instanceof D.a)""!=t&&a.e.IsNum(t)&&(e.PrevSelValu=parseInt(t),e.SelectedValue=parseInt(t),null!=s&&(s.Columns.Contains("Code")&&(e.Code.SelectedValueText=s[0].Code.toString()),s.Columns.Contains("Name")&&(e.Name.SelectedValueText=s[0].Name.toString())));else if(e instanceof C.a&&null!=t&&""!=t&&"PayrollJV"==this.ParentFlagName&&"VoucherNo"==e.DBColumnName&&t.Contains("|")){var o=t.split("|");e.ComboBox.Items.find((function(e){return e instanceof u.d&&e.Value==o[0]}))&&e.ComboBox.Items.push(u.d.ComboBoxItems_2(o[0],o[0])),e.ComboBox.SelectedValue=o[0],e.TextBox.Text=o[1]}}},{key:"onAddRowFoot",value:function(e){this.SNOFoot<=this.FooterColumnSource[1].ComboData.length+1&&(this.UpdateSequenceFoot(),e.Sno=this.SNOFoot)}},{key:"onAddRow",value:function(e){e.DocSeqNo=this.GridData.length+1,e.DocDetailsID=0}},{key:"UpdateSequenceFoot",value:function(){var e=this;this.SNOFoot=1,this.FooterGridData.forEach((function(t){t.Sno=e.SNOFoot++,e.FooterGridDataObj.updateRow(t)}))}},{key:"UpdateSequence",value:function(){for(var e=this,t=0,n=0;n<this.GridData.length;n++)if(this.IsInventory&&this.GridDataColumns.Contains("ProductID_Key")&&a.e.IsEmpty(this.GridData[n].ProductID_Key)||!this.IsInventory&&(this.GridDataColumns.Contains("AccountID_Key")&&a.e.IsEmpty(this.GridData[n].AccountID_Key)||this.GridDataColumns.Contains("DebitAccount_Key")&&a.e.IsEmpty(this.GridData[n].DebitAccount_Key)||this.GridDataColumns.Contains("CreditAccount_Key")&&a.e.IsEmpty(this.GridData[n].CreditAccount_Key))){t=n;break}38==this.DocumentType&&(this.MinRowCount=25),(s.a.IsMobile||100==this.DocumentType)&&(this.MinRowCount=0),40062==this.CostCenterID&&(this.MinRowCount=1);for(var o=null,i=this.GridData.length;i<t+this.MinRowCount;i++)(o=this.GridDataObj.NewRow()).DocSeqNo=i+1,o.DocDetailsID=0,this.GridDataObj.Table.push(o);this.SNO=1,this.GridData.forEach((function(t){t.DocSeqNo=e.SNO,e.GridDataColumns.Contains("StyleHeightZero")&&"1"==a.e.String(t.StyleHeightZero)||e.SNO++})),this.GridDataObj.refreshDataView()}},{key:"SetDefaultValuesforCostCenters",value:function(e){for(var t=this,n=function(n){var o=t._CCFields[n];if(o instanceof c.b){if(0==e||1==e){if(0==e){if(5==t.DocumentType&&o.DBColumnName.Contains("TO"))return"continue";50001==o.CCID?t.DivisionID>0?o.DefaultValue=t.DivisionID.toString():s.a.SessionManager.DivisionID>0?o.DefaultValue=s.a.SessionManager.DivisionID.toString():t.CostCentersValues.ContainsKey("50001")&&(o.DefaultValue=t.CostCentersValues[50001],o.Enable&&(o.Enable=!1)):"50002"==o.CCID.toString()?t.LocationID>0?o.DefaultValue=t.LocationID.toString():s.a.SessionManager.LocationID>0?o.DefaultValue=s.a.SessionManager.LocationID.toString():t.CostCentersValues.ContainsKey("50002")&&(o.DefaultValue=t.CostCentersValues[50002],o.Enable&&(o.Enable=!1)):t.CostCentersValues.ContainsKey(o.CCID.toString())&&(o.DefaultValue=t.CostCentersValues[o.CCID.toString()],o.Enable&&(o.Enable=!1))}t.DivisionID>0&&(o.DivisionId=t.DivisionID),t.LocationID>0&&(o.LocationID=t.LocationID),a.e.Int(o.DefaultValue)>0&&(o.PreviousSelectedValue=parseInt(o.DefaultValue),o.SelectedValue=parseInt(o.DefaultValue),(t.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&e.LocalReference==o.DBColumnID})).length>0||t.DefaultBasedOn.ContainsKey(o.CCID.toString())||t.Preferences.ContainsKey("DimWiseCurrency")&&"true"==t.Preferences.DimWiseCurrency.toLowerCase()&&t.Preferences.ContainsKey("CurrencyDim")&&t.Preferences.CurrencyDim==o.CCID.toString())&&t.GetLinkReferenceData(o.DBColumnID,t.CostCenterID,o.SelectedValue,t.DocDate.Date,o.DBColumnName,o.CCID,null))}o.SelectedValue>0?(t.DBCRFilter(o),t._CCFields.filter((function(e){return e.DependantOn&&e.DependantOn.toLowerCase()==o.DBColumnName.toLowerCase()})).forEach((function(e){if(e instanceof c.b&&o instanceof c.b){var n="";e.CCID>5e4?e.Dependantinuse?(n="("+o.DBColumnName.replace("dc","")+"="+o.SelectedValue.toString(),1==e.Dependancy&&(n+=" OR "+o.DBColumnName.replace("dc","")+"=1 "),n+=")"):n=5==e.Dependancy?"  JOIN "+t.GetTableName(e.CCID)+" CMJ ON a.lft between  CMJ.lft and CMJ.rgt JOIN COM_CostCenterCostCenterMap CM on CM.CostCenterID="+e.CCID+" and CM.ParentCostCenterID="+o.CCID+" and CM.ParentNodeID="+o.SelectedValue.toString()+" and CMJ.NodeID=CM.NodeID ":"  JOIN COM_CostCenterCostCenterMap CM on CM.ParentCostCenterID="+e.CCID+" and a.NodeID=CM.ParentNodeID \n                                            JOIN "+t.GetTableName(o.CCID)+" CMJ ON CM.CostCenterID= "+o.CCID+"   and CM.NodeID=CMJ.NodeID \n                                            JOIN "+t.GetTableName(o.CCID)+" CMJG ON CMJG.lft between  CMJ.lft and CMJ.rgt and CMJG.NodeID="+o.SelectedValue:65==e.CCID&&(n="(FeatureID="+o.CCID+" and  FeaturePK="+o.SelectedValue.toString()+")"),e.CustomWhere=n}}))):t._CCFields.filter((function(e){return null!=e.DependantOn&&e.DependantOn.toLowerCase()==o.DBColumnName.toLowerCase()})).forEach((function(e){e instanceof c.b&&(e.CustomWhere="")}))}else o instanceof D.a&&((0==e||1==e)&&(0==e&&(50001==o.CCID?t.DivisionID>0?o.DefaultValue=t.DivisionID.toString():s.a.SessionManager.DivisionID>0?o.DefaultValue=s.a.SessionManager.DivisionID.toString():t.CostCentersValues.ContainsKey("50001")&&(o.DefaultValue=t.CostCentersValues[50001],o.Enable&&(o.Enable=!1)):"50002"==o.CCID.toString()?t.LocationID>0?o.DefaultValue=t.LocationID.toString():s.a.SessionManager.LocationID>0?o.DefaultValue=s.a.SessionManager.LocationID.toString():t.CostCentersValues.ContainsKey("50002")&&(o.DefaultValue=t.CostCentersValues[50002],o.Enable&&(o.Enable=!1)):t.CostCentersValues.ContainsKey(o.CCID.toString())&&(o.DefaultValue=t.CostCentersValues[o.CCID.toString()],o.Enable&&(o.Enable=!1))),t.DivisionID>0&&(o.Code.DivisionId=o.Name.DivisionId=t.DivisionID),t.LocationID>0&&(o.Code.LocationID=o.Name.LocationID=t.LocationID),a.e.Int(o.DefaultValue)>0)&&(o.SelectedValue=parseInt(o.DefaultValue),(t.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&e.LocalReference==o.DBColumnID})).length>0||t.DefaultBasedOn.ContainsKey(o.CCID.toString())||t.Preferences.ContainsKey("DimWiseCurrency")&&"true"==t.Preferences.DimWiseCurrency.toLowerCase()&&t.Preferences.ContainsKey("CurrencyDim")&&t.Preferences.CurrencyDim==o.CCID.toString())&&t.GetLinkReferenceData(o.DBColumnID,t.CostCenterID,o.SelectedValue,t.DocDate.Date,o.DBColumnName,o.CCID,null)),t.FillCustomwhere(o))},o=0;o<this._CCFields.length;o++)n(o);if((0==e||1==e)&&(null!=this.CreditAccount&&(this.DivisionID>0&&(this.CreditAccount.DivisionId=this.DivisionID),this.LocationID>0&&(this.CreditAccount.LocationID=this.LocationID),(1==this.DocumentType||2==this.DocumentType||10==this.DocumentType||26==this.DocumentType||27==this.DocumentType||3==this.DocumentType||4==this.DocumentType||25==this.DocumentType||13==this.DocumentType)&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0)&&(this.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&e.LocalReference==t.CreditAccount.DBColumnID})).length>0||this.DefaultBasedOn.ContainsKey("2"))&&this.GetLinkReferenceData(this.CreditAccount.DBColumnID,this.CostCenterID,this.CreditAccount.SelectedValue,this.DocDate.Date,this.CreditAccount.DBColumnName,2,null),null!=this.DebitAccount&&(this.DivisionID>0&&(this.DebitAccount.DivisionId=this.DivisionID),this.LocationID>0&&(this.DebitAccount.LocationID=this.LocationID),(11==this.DocumentType||38==this.DocumentType||39==this.DocumentType||6==this.DocumentType||7==this.DocumentType||8==this.DocumentType||9==this.DocumentType||12==this.DocumentType||24==this.DocumentType)&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0)&&(this.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&e.LocalReference==t.DebitAccount.DBColumnID})).length>0||this.DefaultBasedOn.ContainsKey("2"))&&this.GetLinkReferenceData(this.DebitAccount.DBColumnID,this.CostCenterID,this.DebitAccount.SelectedValue,this.DocDate.Date,this.DebitAccount.DBColumnName,2,null),this.IsInventory&&this.GridDataColumns.Contains("ProductID_Key")))for(var i=function(e){if(t.ColumnSource[e].CostCenterID>0){var n=t.Data.Tables[0].filter((function(n){return null!=n.LocalReference&&n.LocalReference==t.ColumnSource[e].ID}));if(n.length>0)for(var s=0,o=function(o){a.e.IsEmpty(t.GridData[o].ProductID_Key)||a.e.IsEmpty(t.GridData[o][t.ColumnSource[e].ValueMember])||(s!=parseInt(t.GridData[o][t.ColumnSource[e].ValueMember])?(s=parseInt(t.GridData[o][t.ColumnSource[e].ValueMember]),t.GetLinkReferenceData(parseInt(t.ColumnSource[e].ID),t.CostCenterID,parseInt(t.GridData[o][t.ColumnSource[e].ValueMember]),Date.Today(),"",t.ColumnSource[e].CostCenterID,t.GridData[o])):o>0&&n.forEach((function(e){e.SysColumnName.toString().toUpperCase().Contains("CCNID")&&t.GridDataColumns.Contains(e.SysColumnName.toString()+"_Key")?(t.GridData[o][e.SysColumnName.toString()]=t.GridData[o-1][e.SysColumnName.toString()],t.GridData[o][e.SysColumnName.toString()+"_Key"]=t.GridData[o-1][e.SysColumnName.toString()+"_Key"]):t.GridDataColumns.Contains(e.SysColumnName.toString())&&(t.GridData[o][t.GridDataColumns[e.SysColumnName.toString()]]=t.GridData[o-1][t.GridDataColumns[e.SysColumnName.toString()]],t.GridDataColumns.Contains(t.GridDataColumns[e.SysColumnName.toString()]+"_Key")&&(t.GridData[o][t.GridDataColumns[e.SysColumnName.toString()]+"_Key"]=t.GridData[o-1][t.GridDataColumns[e.SysColumnName.toString()]+"_Key"]))})))},i=0;i<t.GridData.length;i++)o(i)}},r=0;r<this.ColumnSource.length;r++)i(r);null!=this.DebitAccount&&this.FillCustomwhere(this.DebitAccount),null!=this.CreditAccount&&this.FillCustomwhere(this.CreditAccount)}},{key:"DBCRFilter",value:function(e){if(e.CCID>5e4&&(e.CrFilter>0||e.DbFilter>0)){if(e.CrFilter>0&&null!=this.CreditAccount){var t=this._CCFields.filter((function(e){return e.CrFilter>0})),n="";t.forEach((function(e){e instanceof c.b&&e.SelectedValue>0&&(n="("+e.DBColumnName.replace("dc","")+"="+e.SelectedValue.toString(),1==e.CrFilter&&(n+=" OR "+e.DBColumnName.replace("dc","")+"=1 "),n+=")")})),this.CreditAccount.Code.CustomWhere=null==this.CreditAccount.Code.InitCustomWhere||""==this.CreditAccount.Code.InitCustomWhere?n:this.CreditAccount.Code.InitCustomWhere+" and "+n,this.CreditAccount.Name.CustomWhere=null==this.CreditAccount.Name.InitCustomWhere||""==this.CreditAccount.Name.InitCustomWhere?n:this.CreditAccount.Code.InitCustomWhere+" and "+n}if(e.DbFilter>0&&null!=this.DebitAccount){var s=this._CCFields.filter((function(e){return e.DbFilter>0})),a="";s.forEach((function(e){a="("+e.DBColumnName.replace("dc","")+"="+e.SelectedValue.toString(),1==e.DbFilter&&(a+=" OR "+e.DBColumnName.replace("dc","")+"=1 "),a+=")"})),this.DebitAccount.Code.CustomWhere=null==this.DebitAccount.Code.InitCustomWhere||""==this.DebitAccount.Code.InitCustomWhere?a:this.DebitAccount.Code.InitCustomWhere+" and "+a,this.DebitAccount.Name.CustomWhere=null==this.DebitAccount.Name.InitCustomWhere||""==this.DebitAccount.Name.InitCustomWhere?a:this.DebitAccount.Code.InitCustomWhere+" and "+a}}}},{key:"FillCustomwhere",value:function(e){var t=this;this._CCFields.filter((function(t){return null!=t.DependantOn&&t.DependantOn.toLowerCase()==e.DBColumnName.toLowerCase()})).forEach((function(n){if(n instanceof D.a){if(0==e.SelectedValue)return void(n.Code.CustomWhere=n.Name.CustomWhere="");var s="";n.CCID>5e4?n.Dependantinuse?(s="("+e.DBColumnName.replace("dc","")+"="+e.SelectedValue.toString(),1==n.Dependancy&&(s+=" OR "+e.DBColumnName.replace("dc","")+"=1 "),s+=")"):s=5==n.Dependancy?"  JOIN "+t.GetTableName(n.CCID)+" CMJ ON a.lft between  CMJ.lft and CMJ.rgt JOIN COM_CostCenterCostCenterMap CM on CM.CostCenterID="+n.CCID+" and CM.ParentCostCenterID="+e.CCID+" and CM.ParentNodeID="+e.SelectedValue.toString()+" and CMJ.NodeID=CM.NodeID ":"  JOIN COM_CostCenterCostCenterMap CM on CM.ParentCostCenterID="+n.CCID+" and a.NodeID=CM.ParentNodeID \n                                            JOIN "+t.GetTableName(e.CCID)+" CMJ ON CM.CostCenterID= "+e.CCID+"   and CM.NodeID=CMJ.NodeID \n                                            JOIN "+t.GetTableName(e.CCID)+" CMJG ON CMJG.lft between  CMJ.lft and CMJ.rgt and CMJG.NodeID="+e.SelectedValue:65==n.CCID&&(s="(FeatureID="+e.CCID+" and  FeaturePK="+e.SelectedValue.toString()+")"),n.Code.CustomWhere=n.Name.CustomWhere=s}else if(n instanceof c.b){if(0==e.SelectedValue)return void(n.CustomWhere="");var o="";n.CCID>5e4?a.e.IsEmpty(n.ToolTipTitle)||2!=e.CCID?n.Dependantinuse?(o="("+e.DBColumnName.replace("dc","")+"="+e.SelectedValue.toString(),1==n.Dependancy&&(o+=" OR "+e.DBColumnName.replace("dc","")+"=1 "),o+=")"):o=5==n.Dependancy?"  JOIN "+t.GetTableName(n.CCID)+" CMJ ON a.lft between  CMJ.lft and CMJ.rgt JOIN COM_CostCenterCostCenterMap CM on CM.CostCenterID="+n.CCID+" and CM.ParentCostCenterID="+e.CCID+" and CM.ParentNodeID="+e.SelectedValue.toString()+" and CMJ.NodeID=CM.NodeID ":"  JOIN COM_CostCenterCostCenterMap CM on CM.ParentCostCenterID="+n.CCID+" and a.NodeID=CM.ParentNodeID \n                                JOIN "+t.GetTableName(e.CCID)+" CMJ ON CM.CostCenterID= "+e.CCID+"  and CM.NodeID=CMJ.NodeID \n                                JOIN "+t.GetTableName(e.CCID)+" CMJG ON CMJG.lft between  CMJ.lft and CMJ.rgt and CMJG.NodeID="+e.SelectedValue:o=n.ToolTipTitle+"="+e.SelectedValue.toString():65==n.CCID&&(o="(FeatureID="+e.CCID+" and  FeaturePK="+e.SelectedValue.toString()+")"),n.CustomWhere=o}}))}},{key:"Clear",value:function(e,t){var n=this;try{this.AttachDetach(!1),Logger.InfoLog("VoucherGenerator:: Inside Clear"),this.guid="",this._StaticFields.forEach((function(e){n.SetProperty_DefaultValue(e,!0)})),this._TextFields.forEach((function(e){n.SetProperty_DefaultValue(e,!0)})),this._numericFields.forEach((function(e){n.SetProperty_DefaultValue(e,!0)}));for(var o=function(e){var o=n._CCFields[e];(38==n.DocumentType||39==n.DocumentType)&&s.a.SessionManager.Preferences.ContainsKey("EPOS")&&""!=s.a.SessionManager.Preferences.EPOS.toString()&&parseInt(s.a.SessionManager.Preferences.EPOS)>5e4&&o instanceof c.b&&o.CCID==parseInt(s.a.SessionManager.Preferences.EPOS)||5==t&&o instanceof c.b&&n.Data.Tables.length>0&&n.Data.Tables[8].filter((function(e){return e.CCID==o.CCID.toString()})).length>0||(n.SetProperty_DefaultValue(o,!0),o instanceof c.b?n.FilterTo(o):o instanceof D.a&&n.FilterToCodeName(o),!(o instanceof c.b&&50001==o.CCID&&n.DivisionID!=o.SelectedValue&&s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString())||o.DBColumnName.Contains("TO")||n.Preferences.ContainsKey("Donotusedivision")&&!a.e.IsEmpty(n.Preferences.Donotusedivision)&&Object(S.j)(n.Preferences.Donotusedivision)?!(o instanceof c.b&&50002==o.CCID&&n.LocationID!=o.SelectedValue&&s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString())||o.DBColumnName.Contains("TO")||n.Preferences.ContainsKey("Donotuselocation")&&!a.e.IsEmpty(n.Preferences.Donotuselocation)&&Object(S.j)(n.Preferences.Donotuselocation)||(n.LocationID=o.SelectedValue):n.DivisionID=o.SelectedValue)},i=0;i<this._CCFields.length;i++)o(i);if(38==this.DocumentType||39==this.DocumentType)(r=this.HeaderFields.find((function(e){return e instanceof l.a&&"docdate"==e.DBColumnName.toLowerCase()})))&&""!=r.DefaultValue&&(e.value=new Date(r.DefaultValue),this.ovDate.Date=e.value,this.ovDate.Text=e.value.ToString(s.a.SessionManager.Preferences["Date Format"]));else if(e.value&&(1==t||5==t||2==t&&s.a.SessionManager.Preferences.ContainsKey("ChangeVoucherDate")&&Object(S.j)(s.a.SessionManager.Preferences.ChangeVoucherDate)||3==t&&this.DocPrefix.Prefixes.length<2)){var r;(r=this.HeaderFields.find((function(e){return e instanceof l.a&&"docdate"==e.DBColumnName.toLowerCase()})))&&""!=r.DefaultValue&&a.e.isValidDate(r.DefaultValue)?(e.value=new Date(r.DefaultValue),this.ovDate.Date=e.value):(e.value=Date.Today(),this.ovDate.Date=e.value)}if(null!=this.BillNo&&(this.BillNo.Text=""),this.dtHistory=null,this.VoucherNo="",null!=this.DebitAccount&&this.SetProperty_DefaultValue(this.DebitAccount,!0),null!=this.CreditAccount&&this.SetProperty_DefaultValue(this.CreditAccount,!0),this.GridData.Clear(),this.ColumnSource.forEach((function(e){4==e.SectionID?(e.CreditAcount=e.DefCreditAcount,e.DebitAccount=e.DefDebitAccount,e.Remarks=""):a.e.IsEmpty(e.LocalRefDefaultValue)||(e.LocalRefDefaultValue="",e.LocalRefDefaultValueText=""),e.footer="",e.distDim>0&&!a.e.IsEmpty(e.distxml)&&(e.distxml="")})),null!=this.DocPrefix&&this.DocPrefix.RevisionCombo.Visible&&(this.DocPrefix.RevisionCombo.Items.Clear(),this.DocPrefix.RevisionCombo.Items.push(u.d.ComboBoxItems_2("","0")),this.DocPrefix.RevisionCombo.SelectedValue="0"),null!=this.DueDate&&(this.DueDate.Date=null),this.IsInventory)if(this.Preferences.ContainsKey("Dynamic Footer")&&null!=this.Preferences["Dynamic Footer"]&&"TRUE"==this.Preferences["Dynamic Footer"].toString().toUpperCase()){if(null!=this.FooterGridData&&this.FooterGridDataColumns.length>0){this.FooterGridData.Clear();for(var C=0;C<5;C++){var m=this.FooterGridDataObj.NewRow();m.Sno=C+1,this.FooterGridDataObj.addRow(m)}}}else for(var h=function(e){n.FooterGridData[e].Amount=null,n.FooterGridData[e].CalcAmount=null,n.FooterGridData[e].Remarks=null,n.FooterGridDataColumns.Contains("DebitAccount")&&((p=n.ColumnSource.find((function(t){return!a.e.IsEmpty(t.DisplayMember)&&t.DisplayMember.toLowerCase()==a.e.String(n.FooterGridData[e].Columnname).toLowerCase()})))&&p.DebitAccount>0?(n.FooterGridData[e].DebitAccount.toString()!=p.DebitAccount.toString()&&(n.FooterGridData[e].DebitAccount=p.DebitAccount),n.FooterGridData[e].DebitAccountName=null):(n.FooterGridData[e].DebitAccount=null,n.FooterGridData[e].DebitAccountName=null)),n.FooterGridDataColumns.Contains("CreditAccount")&&(null!=(p=n.ColumnSource.find((function(t){return!a.e.IsEmpty(t.DisplayMember)&&t.DisplayMember.toLowerCase()==a.e.String(n.FooterGridData[e].Columnname).toLowerCase()})))&&p.DebitAccount>0?(n.FooterGridData[e].CreditAccount.toString()!=p.CreditAcount.toString()&&(n.FooterGridData[e].CreditAccount=p.CreditAcount),n.FooterGridData[e].CreditAccountName=null):(n.FooterGridData[e].CreditAccount=null,n.FooterGridData[e].CreditAccountName=null)),n.FooterGridDataObj.updateRow(n.FooterGridData[e])},d=0;d<this.FooterGridData.length;d++){var p;h(d)}if(this.GridDataColumns.length>0&&(this.GridDataColumns.Contains("FieldType")&&this.FillDafaultTypes(),this.UpdateSequence()),this.PostVoucherDocID=0,this.PostVoucherCreditAccount=0,this.PostVoucherDebitAccount=0,this.PostVoucherAmount=0,this.PostVoucherDocDetailsID=0,this.PostVouceherDocPrefix="",this.PostVoucherDocnumber="",this.DistributeCostXML="",this.IsRefLCTR=!1,this.DocID=0,this.guid="",this.Preferences.ContainsKey("Debit Account")&&Object(S.j)(this.Preferences["Debit Account"])&&null!=this.DebitAccount&&!this.DebitAccount.Enable&&(this.DebitAccount.Enable=!0),this.Preferences.ContainsKey("Credit Account")&&Object(S.j)(this.Preferences["Credit Account"])&&null!=this.CreditAccount&&!this.CreditAccount.Enable&&(this.CreditAccount.Enable=!0),this.Preferences.ContainsKey("DimensionWise")&&""!=this.Preferences.DimensionWise&&function(){for(var e=n.Preferences.DimensionWise.split(","),t=function(t){!a.e.IsEmpty(e[t])&&n.Data.Tables[8].filter((function(n){return n.CCID==e[t]})).length>0&&(e[t]="0")},s=0;s<e.length;s++)t(s);n._CCFields.forEach((function(t){(t instanceof c.b&&e.Contains(t.CCID.toString())&&0==n.Data.Tables[8].filter((function(e){return e.CCID==t.CCID.toString()})).length||t instanceof D.a&&e.Contains(t.CCID.toString())&&0==n.Data.Tables[8].filter((function(e){return e.CCID==t.CCID.toString()})).length)&&(t.Enable=!0)}))}(),this.SetDefaultValuesforCostCenters(1),this.Link){this.Link.LinkCombo.SelectedValue="",this.Link.DocumentList.Items.Clear();var f=this.Link.LinkCombo.Items.find((function(e){return 1==e.Status}));f&&(this.Link.LinkCombo.SelectedValue=f.Value)}this.GridDataObj.refreshDatawithIDs(),62==this.oParent.DocumentType&&this.oParent.ClearLeaveData()}catch(I){Logger.ErrorLog("VoucherGenerator","LoadEditData",I.stack)}finally{this.AttachDetach(!0)}}},{key:"GetCopyLinkDetails",value:function(e,t){var n=[];return n.push(e),n.push(t),n.push(s.a.SessionManager.UserID),n.push(s.a.SessionManager.LanguageID),s.a.document.GetCopyLinkDetails(n)}},{key:"GetDetailsByDocno",value:function(e){Logger.InfoLog("VoucherGenerator:: Inside GetDetailsByDocno");try{var t=[];return t.push(e),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.document.GetDetailsByDocno(t)}catch(n){return Logger.ErrorLog("VoucherGenerator:: GetDetailsByDocno"+n.stack),null}}},{key:"GetFiles",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return s.a.common.GetDataSet3("DOC002",e.toString(),t.toString(),n)}},{key:"GetProjectByINVID",value:function(e,t){var n=0,a=s.a.common.GetDataSet3("DOC025",t,e);return null!=a&&a.Tables.length>0&&a.Tables[0].length>0&&(n=parseInt(a.Tables[0][0].id)),n}},{key:"IsBinWise",value:function(e,t){var n="";Logger.InfoLog("VoucherGenerator:: Inside GetFiles");try{var o=s.a.common.GetDataSet3("DOC010",e.toString(),t.toString());null!=o&&o.Tables.length>0&&o.Tables[0].length>0&&(n=a.e.String(o.Tables[0][0][o.Columns[0][0]]).toLowerCase())}catch(i){Logger.ErrorLog("VoucherGenerator:: GetFiles"+i.stack)}return"no"!=n&&"0"!=n&&"false"!=n}},{key:"GetScreenInfo",value:function(e){Logger.InfoLog("VoucherGenerator:: Inside GetScreenInfo");try{var t="",n="";return s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()&&(this.LocationID>0?t=this.LocationID.toString():s.a.SessionManager.LocationID>0&&(t=s.a.SessionManager.LocationID.toString())),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()&&(this.DivisionID>0?n=this.DivisionID.toString():s.a.SessionManager.DivisionID>0&&(n=s.a.SessionManager.DivisionID.toString())),s.a.document.GetDocumentDefinition(e,t,n)}catch(a){return Logger.ErrorLog("VoucherGenerator:: GetScreenInfo"+a.stack),null}}},{key:"FillDocumentPrefix",value:function(e){var t=this;if(e)for(var n=0;n<this.DocPrefix.ComboBox.Items.length;n++)this.DocPrefix.ComboBox.Items[n].Value!=this.DocPrefix.ComboBox.SelectedValue&&(this.DocPrefix.ComboBox.Items.Remove(this.DocPrefix.ComboBox.Items[n]),n--);else{Logger.InfoLog("VoucherGenerator:: Inside GetDocumentPrefix");var a=[];a.push(this.CostCenterID),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()?a.push(this.LocationID>0?this.LocationID:s.a.SessionManager.LocationID>0?s.a.SessionManager.LocationID:""):a.push(""),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()?a.push(this.DivisionID>0?this.DivisionID:s.a.SessionManager.DivisionID>0?s.a.SessionManager.DivisionID:""):a.push(""),a.push(s.a.SessionManager.UserID),a.push(s.a.SessionManager.RoleID),a.push(s.a.SessionManager.LanguageID);var o=s.a.document.GetDocumentPrefix(a);this.LocationChanged(),this.DivisionChanged(),this.DocPrefix.ComboBox.Items.Clear(),e&&this.DocPrefix.Prefixes.Clear(),null!=o&&o.Tables.length>0&&!o.Tables.Contains("ErrorMessage")&&(o.Tables[0].forEach((function(e){t.DocPrefix.ComboBox.Items.push(u.d.ComboBoxItems_4(e.CodePrefix.toString(),e.CodePrefix.toString(),"",e.CodeNumberLength.toString()))})),!e&&this.DocPrefix.ComboBox.Items.length>0&&(this.DocPrefix.ComboBox.SelectedItem=this.DocPrefix.ComboBox.Items[0],this.DocPrefix.ComboBox.SelectedValue=this.Data.Tables[0][0][Object.keys(this.Data.Tables[0][0])[0]].toString())),Logger.InfoLog("VoucherGenerator::Exiting GetDocumentPrefix")}}},{key:"GenerateFooter",value:function(){var e=this,t=this.Data.Tables[7].filter((function(e){return"Dynamic Footer"==e.PrefName})),n=this.Data.Tables[0].filter((function(e){return 4==e.SectionID}));n.sort((function(e,t){return e.SectionSeqNumber-t.SectionSeqNumber}));var o,i,r=new d.a;r.Header="#",r.DisplayMember="Sno",r.DataType="TextBlock",r.ReadOnly=!0,r.Width=25,r.DisableTab=!0,this.FooterColumnSource.push(r),this.FooterGridDataColumns.push("Sno"),this.FooterGridDataColumns.push("Name"),this.FooterGridDataColumns.push("ColumnName"),this.FooterGridDataColumns.push("Amount"),this.FooterGridDataObj.DataTypes.Double.push("Amount"),this.FooterGridDataColumns.push("CalcAmount"),this.FooterGridDataObj.DataTypes.Double.push("CalcAmount"),this.FooterGridDataColumns.push("DebitAccount"),this.FooterGridDataObj.DataTypes.Int.push("DebitAccount"),this.FooterGridDataColumns.push("CreditAccount"),this.FooterGridDataObj.DataTypes.Int.push("CreditAccount"),this.FooterGridDataColumns.push("DebitAccountName"),this.FooterGridDataColumns.push("CreditAccountName"),this.FooterGridDataColumns.push("PostingType"),this.FooterGridDataColumns.push("Formula"),this.FooterGridDataColumns.push("dcCurrID"),this.FooterGridDataColumns.push("dcCurrID_Key"),this.FooterGridDataColumns.push("dcExchRT"),this.FooterGridDataColumns.push("IsCalculated"),this.FooterGridDataColumns.push("DrRefSection"),this.FooterGridDataColumns.push("DrRefID"),this.FooterGridDataColumns.push("DrRefColID"),this.FooterGridDataColumns.push("DrRefColName"),this.FooterGridDataColumns.push("CrRefSection"),this.FooterGridDataColumns.push("CrRefID"),this.FooterGridDataColumns.push("CrRefColID"),this.FooterGridDataColumns.push("CrRefColName"),this.FooterGridDataColumns.push("Message"),this.FooterGridDataColumns.push("Action"),this.FooterGridDataColumns.push("Expression"),this.FooterGridDataColumns.push("ReadOnly"),this.FooterGridDataObj.DataTypes.Bool.push("ReadOnly"),this.FooterGridDataColumns.push("IsVisible"),this.FooterGridDataObj.DataTypes.Bool.push("IsVisible"),this.FooterGridDataColumns.push("Remarks"),this.FooterGridDataColumns.push("StyleHeightZero"),this.FooterGridDataColumns.push("BasedOnXML"),this.FooterGridDataColumns.push("Decimals"),this.FooterDataBindColumns.push("Name"),this.FooterDataBindColumns.push("ColumnName"),this.FooterDataBindColumns.push("Currency"),this.FooterDataBindColumns.push("CurrencyName"),this.FooterDataBindColumns.push("Exchange"),this.FooterDataBindColumns.push("PostingType"),this.FooterDataBindColumns.push("IsCalculated"),this.FooterDataBindColumns.push("Formula"),this.FooterDataBindColumns.push("DebitAccount"),this.FooterDataBindColumns.push("CreditAccount"),this.FooterDataBindColumns.push("DebitAccountName"),this.FooterDataBindColumns.push("CreditAccountName"),this.FooterDataBindColumns.push("Decimals"),this.FooterDataBindColumns.push("DrRefSection"),this.FooterDataBindColumns.push("DrRefID"),this.FooterDataBindColumns.push("DrRefColID"),this.FooterDataBindColumns.push("DrRefColName"),this.FooterDataBindColumns.push("CrRefSection"),this.FooterDataBindColumns.push("CrRefID"),this.FooterDataBindColumns.push("CrRefColID"),this.FooterDataBindColumns.push("CrRefColName"),this.FooterDataBindColumns.push("Message"),this.FooterDataBindColumns.push("Action"),this.FooterDataBindColumns.push("Expression"),this.FooterDataBindColumns.push("ReadOnly"),this.FooterDataBindColumns.push("IsVisible"),this.FooterDataBindColumns.push("BasedOnXML"),(r=new d.a).Header=s.a.GetResource("Document_footer_Name"),r.DisplayMember="Name",r.DataType="ComboBox",t.length>0&&Object(S.j)(t[0].PrefValue)?r.ReadOnly=!1:(r.ReadOnly=!0,r.DisableTab=!0),r.DisplayMember="Name",r.ValueMember="ColumnName",r.ValueBinding="ColumnName",r.ComboData=this.FooterDataBind,r.Width=200,this.FooterColumnSource.push(r),(r=new d.a).Header="ColumnName",r.DisplayMember="ColumnName",r.DataType="TextBlock",r.ReadOnly=!0,r.Width=0,r.IsVisible=!1,r.DisableTab=!0,this.FooterColumnSource.push(r),(r=new d.a).Header="Debit Account",r.DisplayMember="DebitAccountName",r.ValueMember="DebitAccount",r.DataType="LISTBOX",r.CostCenterID=2,r.TypeID=2,r.Width=200,r.IsVisible=!1,r.DisableTab=!0,r.ID="-100",this.FooterColumnSource.push(r),(r=new d.a).Header="Credit Account",r.DisplayMember="CreditAccountName",r.ValueMember="CreditAccount",r.DataType="LISTBOX",r.CostCenterID=2,r.TypeID=2,r.Width=200,r.IsVisible=!1,r.DisableTab=!0,r.ID="-200",this.FooterColumnSource.push(r),(r=new d.a).Header=s.a.GetResource("Document_footer_amount"),r.DisplayMember="Amount",r.DataType="FLOAT",r.ReadOnly=!1,r.Width=100,s.a.SessionManager.Preferences.ContainsKey("DecimalsinFooter")&&""!=s.a.SessionManager.Preferences.DecimalsinFooter&&(r.DecimalPoints=s.a.SessionManager.Preferences.DecimalsinFooter),this.FooterColumnSource.push(r),(r=new d.a).Header=s.a.GetResource("Document_footer_CalcAmount"),r.DisplayMember="CalcAmount",r.DataType="FLOAT",r.ReadOnly=!1,r.Width=120,s.a.SessionManager.Preferences.ContainsKey("DecimalsinFooter")&&""!=s.a.SessionManager.Preferences.DecimalsinFooter&&(r.DecimalPoints=s.a.SessionManager.Preferences.DecimalsinFooter),this.FooterColumnSource.push(r),(r=new d.a).Header=s.a.GetResource("Document_footer_Remarks"),r.DisplayMember="Remarks",r.DataType="TextBlock",r.Width=120,r.ID="-4",38!=this.DocumentType&&39!=this.DocumentType||(r.IsVisible=!1),this.FooterColumnSource.push(r);for(var l=1,u=0,c=function(t){if(n[t].SysColumnName.toString().toLowerCase().Contains("dcexchrt")||n[t].SysColumnName.toString().toLowerCase().Contains("dccurrid"))return"continue";if(38==e.DocumentType&&"26425"==n[t].LinkData.toString())return"continue";!a.e.IsEmpty(n[t].Decimal)&&parseFloat(n[t].Decimal)>0&&u<parseFloat(n[t].Decimal)&&(u=parseFloat(n[t].Decimal)),i={},(o=e.FooterGridDataObj.NewRow()).Sno=l++,o.Name=n[t].ResourceData,o.ColumnName=n[t].SysColumnName,i.Name=n[t].ResourceData,i.ColumnName=n[t].SysColumnName,o.BasedOnXml=n[t].BasedOnXml,i.BasedOnXml=n[t].BasedOnXml,!a.e.IsEmpty(n[t].Decimal)&&parseFloat(n[t].Decimal)>=0?(o.Decimals=n[t].Decimal,i.Decimals=n[t].Decimal):s.a.SessionManager.Preferences.ContainsKey("DecimalsinFooter")&&""!=s.a.SessionManager.Preferences.DecimalsinFooter&&(o.Decimals=s.a.SessionManager.Preferences.DecimalsinFooter,i.Decimals=s.a.SessionManager.Preferences.DecimalsinFooter),a.e.IsEmpty(n[t].IsEditable)?(i.ReadOnly=!0,o.ReadOnly=!0):(i.ReadOnly=!Object(S.j)(n[t].IsEditable),o.ReadOnly=!Object(S.j)(n[t].IsEditable)),a.e.IsEmpty(n[t].IsVisible)?(i.IsVisible=!0,o.IsVisible=!0):(i.IsVisible=Object(S.j)(n[t].IsVisible),o.IsVisible=Object(S.j)(n[t].IsVisible),e.FooterGridDataColumns.Contains("StyleHeightZero")&&(o.StyleHeightZero=Object(S.j)(o.IsVisible)?0:1)),a.e.IsEmpty(n[t].PostingType)||(o.PostingType=parseInt(n[t].PostingType),i.PostingType=parseInt(n[t].PostingType)),a.e.IsEmpty(n[t].IsCalculate)||(o.IsCalculated=n[t].IsCalculate.toString(),i.IsCalculated=n[t].IsCalculate.toString()),a.e.IsEmpty(n[t].CRSysColumnName)||(o.CrRefColName=n[t].CRSysColumnName.toString(),i.CrRefColName=n[t].CRSysColumnName.toString()),a.e.IsEmpty(n[t].CrRefColID)||(o.CrRefColID=parseInt(n[t].CrRefColID),i.CrRefColID=parseInt(n[t].CrRefColID)),a.e.IsEmpty(n[t].CrRefID)||(o.CrRefID=parseInt(n[t].CrRefID),i.CrRefID=parseInt(n[t].CrRefID)),a.e.IsEmpty(n[t].CRSection)||(o.CrRefSection=parseInt(n[t].CRSection),i.CrRefSection=parseInt(n[t].CRSection)),a.e.IsEmpty(n[t].DRSysColumnName)||(o.DrRefColName=n[t].DRSysColumnName.toString(),i.DrRefColName=n[t].DRSysColumnName.toString()),a.e.IsEmpty(n[t].DrRefColID)||(o.DrRefColID=parseInt(n[t].DrRefColID),i.DrRefColID=parseInt(n[t].DrRefColID)),a.e.IsEmpty(n[t].DrRefID)||(o.DrRefID=parseInt(n[t].DrRefID),i.DrRefID=parseInt(n[t].DrRefID)),a.e.IsEmpty(n[t].DrSection)||(o.DrRefSection=parseInt(n[t].DrSection),i.DrRefSection=parseInt(n[t].DrSection)),a.e.IsEmpty(n[t].DebitAccount)||(o.DebitAccount=parseInt(n[t].DebitAccount),o.DebitAccountName=a.e.StringValue(n[t].DebitAccountName),i.DebitAccount=parseInt(n[t].DebitAccount),i.DebitAccountName=a.e.StringValue(n[t].DebitAccountName)),a.e.IsEmpty(n[t].CreditAccount)||(o.CreditAccount=parseInt(n[t].CreditAccount),o.CreditAccountName=a.e.StringValue(n[t].CreditAccountName),i.CreditAccount=parseInt(n[t].CreditAccount),i.CreditAccountName=a.e.StringValue(n[t].CreditAccountName)),a.e.IsEmpty(n[t].Formula)||(o.Formula=n[t].Formula.toString(),i.Formula=n[t].Formula.toString()),!a.e.IsNullOrWhiteSpace(n[t].IsCrAccountDisplayed)&&Object(S.j)(n[t].IsCrAccountDisplayed)&&(e.FooterColumnSource[4].IsVisible=!0,e.FooterColumnSource[4].DisableTab=!1),!a.e.IsNullOrWhiteSpace(n[t].IsDrAccountDisplayed)&&Object(S.j)(n[t].IsDrAccountDisplayed)&&(e.FooterColumnSource[3].IsVisible=!0,e.FooterColumnSource[3].DisableTab=!1);var r=e.Data.Tables[0].filter((function(e){return 4==e.SectionID&&e.SysColumnName=="dcCurrID"+n[t].SysColumnName.toString().toLowerCase().replace("dcnum","")}));if(r.length>0&&(o.dcCurrID_Key=r[0].UserDefaultValue,i.Currency=r[0].UserDefaultValue,!a.e.IsEmpty(r[0].UserDefaultValue)&&e.Data.Tables.length>17&&e.Data.Tables[17].length>0&&e.Data.Columns[17].Contains("ccid"))){var c=e.Data.Tables[17].filter((function(e){return e.ccid=e.NodeID==r[0].UserDefaultValue.toString()}));c.length>0&&(i.CurrencyName=c[0].Name.toString(),o.dcCurrID=c[0].Name.toString(),i.Currency=-3,o.dcCurrID_Key=-3)}e.Preferences.ContainsKey("Dynamic Footer")&&null!=e.Preferences["Dynamic Footer"]&&!Object(S.j)(e.Preferences["Dynamic Footer"])&&e.FooterGridData.push(o),e.FooterDataBind.push(i)},D=0;D<n.length;D++)c(D);if(u>0&&(this.FooterColumnSource[5].DecimalPoints=u.toString(),this.FooterColumnSource[6].DecimalPoints=u.toString()),this.FooterColumnSource[1].ComboData=this.FooterDataBind,0==this.FooterGridData.length&&!s.a.IsMobile)for(var C,m=1,h=0;h<this.FooterColumnSource[1].ComboData.length;h++)(C=this.FooterGridDataObj.NewRow()).Sno=m++,this.FooterGridData.push(C);s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])&&((r=new d.a).Header="Currency",r.DisplayMember="dcCurrID",r.ValueMember="dcCurrID_Key",r.DataType="LISTBOX",r.CostCenterID=12,r.TypeID=1,r.Width=100,r.ID="-300",38!=this.DocumentType&&39!=this.DocumentType||(r.IsVisible=!1),this.FooterColumnSource.push(r),(r=new d.a).Header="Exchange Rate",r.DisplayMember="dcExchRT",r.DataType="FLOAT",r.Width=100,r.ID="-5",r.DisableTab=!1,38!=this.DocumentType&&39!=this.DocumentType||(r.IsVisible=!1),this.FooterColumnSource.push(r))}},{key:"GenerateBody",value:function(){var t=this,n=this.Data.Tables[0].filter((function(e){return 3==e.SectionID||4==e.SectionID}));n.sort((function(e,t){return e.SectionSeqNumber-t.SectionSeqNumber}));var o=new d.a;o.Header="#",o.DisplayMember="DocSeqNo",o.lbl="DocSeqNo",o.DataType="TextBlock",o.ReadOnly=!0,38!=this.DocumentType&&39!=this.DocumentType||!this.Preferences.ContainsKey("DisplaySno")||Object(S.j)(this.Preferences.DisplaySno)||(o.IsVisible=!1),o.Width=45,o.Width,o.ID="0",this.Preferences.ContainsKey("BodyFreezeColumn")&&""!=this.Preferences.BodyFreezeColumn&&a.e.IsNum(this.Preferences.BodyFreezeColumn)&&(o.IsFrozen=!0),o.DisableTab=!0,this.ColumnSource.push(o),this.GridDataColumns.push("DocSeqNo"),(o=new d.a).Header="DocDetailsID",o.DisplayMember="DocDetailsID",o.lbl="DocDetailsID",o.DataType="TextBlock",o.ReadOnly=!0,o.Width=0,o.DisableTab=!0,o.IsVisible=!1,this.ColumnSource.push(o),o.ID="0",this.GridDataColumns.push("DocDetailsID"),(o=new d.a).Header="LinkedInvDocDetailsID",o.lbl="LinkedInvDocDetailsID",o.DisplayMember="LinkedInvDocDetailsID",o.DataType="TextBlock",o.ReadOnly=!0,o.Width=0,o.DisableTab=!0,o.IsVisible=!1,this.ColumnSource.push(o),o.ID="0",this.GridDataColumns.push("LinkedInvDocDetailsID"),this.GridDataObj.DataTypes.Int.push("LinkedInvDocDetailsID"),(o=new d.a).Header="LinkedFieldName",o.DisplayMember="LinkedFieldName",o.lbl="LinkedFieldName",o.DataType="TextBlock",o.ReadOnly=!0,o.Width=0,o.DisableTab=!0,o.IsVisible=!1,this.ColumnSource.push(o),o.ID="0",this.GridDataColumns.push("LinkedFieldName"),100==this.DocumentType&&((o=new d.a).Header="Edit",o.DisplayMember="drEdit",o.ReadOnly=!0,o.DataType="LINK",o.TextAlign="Center",o.ValueBinding="fa-light fa-pen-to-square",o.IsFrozen=!0,o.Width=50,this.ColumnSource.push(o),o.ID="drEdit",(o=new d.a).Header="Delete",o.DisplayMember="drDelete",o.ReadOnly=!0,o.DataType="LINK",o.TextAlign="Center",o.ValueBinding="fa-light fa-trash-can",o.IsFrozen=!0,o.Width=50,this.ColumnSource.push(o),o.ID="drDelete"),this.Preferences.ContainsKey("UseasPosReciept")&&"True"==this.Preferences.UseasPosReciept&&this.GridDataColumns.push("FieldType");var i=n.find((function(e){return"RefNO"==e.SysColumnName}));i&&(i.SysColumnName="RefNo",i.UserColumnName="RefNo");for(var r=function(i){var r=n[i];if(!("HoldQuantity"!=r.SysColumnName||t.Preferences.ContainsKey("Enable Hold")&&Object(S.j)(t.Preferences["Enable Hold"])))return"continue";if(!("ReserveQuantity"!=r.SysColumnName||t.Preferences.ContainsKey("Enable Reserve")&&Object(S.j)(t.Preferences["Enable Reserve"])))return"continue";if(!("RecievedQty"!=r.SysColumnName||t.Preferences.ContainsKey("SeparateColRecieptIssue")&&""!=t.Preferences.SeparateColRecieptIssue&&Object(S.j)(t.Preferences.SeparateColRecieptIssue)))return"continue";if(38==t.DocumentType&&null!=r.LinkData&&"26425"==r.LinkData.toString())return"continue";if((o=new d.a).ID=r.CostCenterColID.toString(),t.Preferences.ContainsKey("BodyFreezeColumn")&&""!=t.Preferences.BodyFreezeColumn&&a.e.IsNum(t.Preferences.BodyFreezeColumn)&&t.Preferences.BodyFreezeColumn==o.ID&&(o.IsFrozen=!0),(r.SysColumnName.toLowerCase().Contains("dccurrid")||r.SysColumnName.toLowerCase().Contains("dcexchrt"))&&(!a.e.IsEmpty(r.UserDefaultValue)&&"-2"!=r.UserDefaultValue.toString()||!a.e.IsEmpty(r.SectionID)&&4==parseInt(r.SectionID)))return"continue";o.Header=r.SysColumnName.toLowerCase().Contains("dcexchrt")?r.ResourceData.toString()+"-ExchRT":r.SysColumnName.toLowerCase().Contains("dccurrid")?r.ResourceData.toString()+"-Curr":a.e.StringValue(r.ResourceData).toString(),o.lbl=r.UserColumnName.toString(),o.DisplayMember=r.SysColumnName,a.e.IsEmpty(r.Mode)||(o.Mode=parseInt(r.Mode)),o.SPName=Object(I.isNullOrUndefined)(r.SpName)?"":r.SpName.toString(),o.Shortcut=Object(I.isNullOrUndefined)(r.Shortcut)?"":r.Shortcut.toString(),o.IPParams=Object(I.isNullOrUndefined)(r.IpParams)?"":r.IpParams.toString(),o.OPParams=Object(I.isNullOrUndefined)(r.OpParams)?"":r.OpParams.toString(),Object(I.isNullOrUndefined)(r.Expression)||(o.ExternExpression=r.Expression.toString()),a.e.IsEmpty(r.LinkData)||(o.linkData=parseInt(r.LinkData)),o.DataType=r.ColumnDataType.toString(),o.Width=Object(I.isNullOrUndefined)(r.UIWidth)?0:parseInt(r.UIWidth),o.Width,r.IsMandatory&&(o.Mandatory=Object(S.j)(r.IsMandatory)),a.e.IsEmpty(r.Formula)||(o.Formula=r.Formula.toString(),o.Formula.toLowerCase().Contains("avgrate")&&(t.AvgrateExists=!0)),a.e.IsEmpty(r.IsEditable)||(o.ReadOnly=!Object(S.j)(r.IsEditable)),Object(I.isNullOrUndefined)(r.RoundOffLineWise)||"1"!=r.RoundOffLineWise.toString()||(o.NoRoundOff=!0),a.e.IsEmpty(r.IsRepeat)||(o.IsRepeat=Object(S.j)(r.IsRepeat)),a.e.IsEmpty(r.ShowinCalc)||(o.ShowinCalc=Object(S.j)(r.ShowinCalc)),a.e.IsEmpty(r.IsReEvaluate)||(o.IsReEvaluate=Object(S.j)(r.IsReEvaluate)),a.e.IsEmpty(r.IsnoTab)||(o.DisableTab=Object(S.j)(r.IsnoTab)),a.e.IsEmpty(r.isnotab)||(o.DisableTab=Object(S.j)(r.isnotab)),a.e.IsEmpty(r.IsPartialLinking)||(o.IsPartialLinking=Object(S.j)(r.IsPartialLinking)),a.e.IsEmpty(r.SectionID)||(o.SectionID=parseInt(r.SectionID)),o.IsVisible=3==o.SectionID&&!a.e.IsEmpty(r.IsVisible)&&Object(S.j)(r.IsVisible),a.e.IsEmpty(r.DistCol)||(o.DistributeColName=r.DistCol),a.e.IsEmpty(r.DistributionColID)||(o.DistributionColID=parseInt(r.DistributionColID));var l=t.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&79==e.LocalReference&&50040==e.LinkData}));if(l.length>0&&r.SysColumnName==l[0].SysColumnName&&(o.IsVisible=!1),(l=t.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&79==e.LocalReference&&55498==e.LinkData}))).length>0&&r.SysColumnName==l[0].SysColumnName&&(o.ReadOnly=!0,o.DistributeColName="FillGUID"),o.IsColumnUserDefined=Object(S.j)(r.IsColumnUserDefined),35!=t.DocumentType&&36!=t.DocumentType&&37!=t.DocumentType||!r.SysColumnName.toLowerCase().Contains("dcalpha")&&!r.SysColumnName.toLowerCase().Contains("dcnum")||(o.IsColumnUserDefined=!0),a.e.IsEmpty(r.PostingType)||(o.PostingType=parseInt(r.PostingType)),a.e.IsEmpty(r.DebitAccount)||(o.DebitAccount=parseInt(r.DebitAccount)),a.e.IsEmpty(r.CreditAccount)||(o.CreditAcount=parseInt(r.CreditAccount)),o.DefCreditAcount=o.CreditAcount,o.DefDebitAccount=o.DebitAccount,a.e.IsEmpty(r.IsCalculate)||(o.IsCalculated=parseInt(r.IsCalculate)),a.e.IsEmpty(r.FixedAcc)||(o.GridViewID=parseInt(r.FixedAcc)),a.e.IsEmpty(r.CRSysColumnName)||(o.CrRefColName=!a.e.IsEmpty(r.CrRefID)&&parseInt(r.CrRefID)<0?"TO"+r.CRSysColumnName:r.CRSysColumnName),a.e.IsEmpty(r.CrRefColID)||(o.CrRefColID=parseInt(r.CrRefColID)),a.e.IsEmpty(r.CrRefID)||(o.CrRefID=parseInt(r.CrRefID)),a.e.IsEmpty(r.CRSection)||(o.CrRefSection=parseInt(r.CRSection)),a.e.IsEmpty(r.DRSysColumnName)||(o.DrRefColName=!a.e.IsEmpty(r.DrRefID)&&parseInt(r.DrRefID)<0?"TO"+r.DRSysColumnName:r.DRSysColumnName),a.e.IsEmpty(r.DrRefColID)||(o.DrRefColID=parseInt(r.DrRefColID)),a.e.IsEmpty(r.DrRefID)||(o.DrRefID=parseInt(r.DrRefID)),a.e.IsEmpty(r.DrSection)||(o.DrRefSection=parseInt(r.DrSection)),!a.e.IsEmpty(r.TextFormat)){var D;2==(D=a.e.Int(r.TextFormat))?o.IsAllCaps=!0:3==D&&(o.IsFirstLetterCaps=!0)}if(o.DefaultValue=Object(I.isNullOrUndefined)(r.UserDefaultValue)?"":r.UserDefaultValue.toString(),!a.e.IsEmpty(r.dependanton)&&"0"!=r.dependanton.toString()){var C;null!=(C=83==parseInt(r.dependanton)||parseInt(r.dependanton)>5e4&&parseInt(r.dependanton)<50100?t.Data.Tables[0].filter((function(e){return e.ColumnCostCenterID==r.dependanton})):t.Data.Tables[0].filter((function(e){return e.CostCenterColID==r.dependanton})))&&C.length>0?(o.DependantOn=C[0].SysColumnName,a.e.IsEmpty(r.dependancy)||(o.Dependancy=parseInt(r.dependancy)),"productid"!=o.DependantOn.toLowerCase()||a.e.IsNullOrWhiteSpace(r.Productfilterinuse)?a.e.IsEmpty(r.filterinuse)||(o.Dependantinuse=Object(S.j)(r.filterinuse)):o.Dependantinuse=Object(S.j)(r.Productfilterinuse)):5!=t.DocumentType&&8!=t.DocumentType&&13!=t.DocumentType||!t.Preferences.ContainsKey("BudgetFeild")||""==t.Preferences.BudgetFeild||"-94"!=a.e.String(r.dependanton)||(o.DependantOn=r.dependanton.toString())}switch((5==t.DocumentType||t.Preferences.ContainsKey("UseasCrossDimension")&&"true"==t.Preferences.UseasCrossDimension.toLowerCase())&&("gross"==r.SysColumnName.toLowerCase()||r.SysColumnName.toLowerCase().Contains("dcnum"))&&(o.Dependancy=a.e.IsEmpty(r.Posting)?4:parseInt(r.Posting)),!a.e.IsEmpty(o.Formula)&&t.Data.Tables[15].filter((function(e){return e.CostCenterColIDField==o.ID&&1==e.ClubFields})).length>0&&(o.UseBarcode=!0),r.ColumnDataType.toString().toUpperCase()){case"BIGINT":case"INT":t.GridDataColumns.push(r.SysColumnName),t.GridDataObj.DataTypes.Int.push(r.SysColumnName);break;case"FLOAT":if(t.GridDataColumns.push(r.SysColumnName),t.GridDataObj.DataTypes.Double.push(r.SysColumnName),r.SysColumnName.toLowerCase().Contains("dcnum")){a.e.IsEmpty(r.Distxml)||(c=r.Distxml.toString().split(",")).length>2&&""!=c[0]&&(o.distDim=parseInt(c[0]),"1"==c[1]&&(o.distequally=!0),"1"==c[2]&&(o.distLineWise=!0,t.GridDataColumns.push(r.SysColumnName.toString()+"DistXML")),c.length>3&&""!=c[3]&&(o.DefaultValueText=c[3])),o.DefaultValue=Object(I.isNullOrUndefined)(r.UserDefaultValue)?"":r.UserDefaultValue.toString(),t.GridDataColumns.push("dcCalc"+r.SysColumnName),t.GridDataObj.DataTypes.Double.push("dcCalc"+r.SysColumnName),!a.e.IsEmpty(r.Decimal)&&parseFloat(r.Decimal)>=0?o.DecimalPoints=r.Decimal.toString():s.a.SessionManager.Preferences.ContainsKey("DecimalsinExtraFields")&&""!=s.a.SessionManager.Preferences.DecimalsinExtraFields&&(o.DecimalPoints=s.a.SessionManager.Preferences.DecimalsinExtraFields);var m=t.Data.Tables[0].filter((function(e){return e.SysColumnName=="dcCurrID"+r.SysColumnName.toLowerCase().replace("dcnum","")}));m.length>0&&!a.e.IsEmpty(m[0].UserDefaultValue)&&a.e.IsNum(m[0].UserDefaultValue)&&parseInt(m[0].UserDefaultValue)>0&&(o.CurrID=parseInt(m[0].UserDefaultValue),o.ExhcgRt=t.GetExchangeRate(o.CurrID,new Date)),a.e.IsEmpty(r.EvaluateAfter)||(o.FilterCondition=r.EvaluateAfter.toString()),a.e.IsEmpty(r.Distributeon)||(o.DependantOn=r.Distributeon.toString())}else if(r.SysColumnName.toLowerCase().Contains("dcexchrt"));else if("Quantity"==r.SysColumnName)t.GridDataColumns.push("Linked"+r.SysColumnName),t.GridDataObj.DataTypes.Double.push("Linked"+r.SysColumnName),!a.e.IsEmpty(r.Decimal)&&parseFloat(r.Decimal)>=0?o.DecimalPoints=r.Decimal.toString():s.a.SessionManager.Preferences.ContainsKey("DecimalsinQty")&&""!=s.a.SessionManager.Preferences.DecimalsinQty&&(o.DecimalPoints=s.a.SessionManager.Preferences.DecimalsinQty);else if("RecievedQty"==r.SysColumnName){if(!t.Preferences.ContainsKey("SeparateColRecieptIssue")||""==t.Preferences.SeparateColRecieptIssue||!Object(S.j)(t.Preferences.SeparateColRecieptIssue))return"continue";!a.e.IsEmpty(r.Decimal)&&parseFloat(r.Decimal)>=0?o.DecimalPoints=r.Decimal.toString():s.a.SessionManager.Preferences.ContainsKey("DecimalsinQty")&&""!=s.a.SessionManager.Preferences.DecimalsinQty&&(o.DecimalPoints=s.a.SessionManager.Preferences.DecimalsinQty),o.ShowbodyTotal=t.Preferences.ContainsKey("ShowQtyTotal")&&""!=t.Preferences.ShowQtyTotal&&Object(S.j)(t.Preferences.ShowQtyTotal)?1:0,t.GridDataColumns.push("RecievedQtyXML")}else"Gross"==r.SysColumnName||"Rate"==r.SysColumnName?(o.NoRoundOff=!0,"Gross"==r.SysColumnName&&(t.GridDataColumns.push("Linked"+r.SysColumnName),t.GridDataObj.DataTypes.Double.push("Linked"+r.SysColumnName)),!a.e.IsEmpty(r.Decimal)&&parseFloat(r.Decimal)>=0?o.DecimalPoints=r.Decimal.toString():s.a.SessionManager.Preferences.ContainsKey("DecimalsinRate")&&""!=s.a.SessionManager.Preferences.DecimalsinRate&&(o.DecimalPoints=s.a.SessionManager.Preferences.DecimalsinRate)):"Amount"!=r.SysColumnName&&"DebitAmount"!=r.SysColumnName&&"CreditAmount"!=r.SysColumnName||(!a.e.IsEmpty(r.Decimal)&&parseFloat(r.Decimal)>=0?o.DecimalPoints=r.Decimal.toString():s.a.SessionManager.Preferences.ContainsKey("DecimalsinAmount")&&""!=s.a.SessionManager.Preferences.DecimalsinAmount&&(o.DecimalPoints=s.a.SessionManager.Preferences.DecimalsinAmount));"Quantity"==r.SysColumnName?o.ShowbodyTotal=t.Preferences.ContainsKey("ShowQtyTotal")&&""!=t.Preferences.ShowQtyTotal&&Object(S.j)(t.Preferences.ShowQtyTotal)?1:0:r.SysColumnName.toLowerCase().Contains("dcexchrt")||"exchangerate"==r.SysColumnName.toLowerCase()||"rate"==r.SysColumnName.toLowerCase()||a.e.IsEmpty(r.ShowbodyTotal)||(o.ShowbodyTotal=parseInt(r.ShowbodyTotal));break;case"LISTBOX":if(o.ValueMember=r.SysColumnName+"_Key",a.e.IsEmpty(r.CrFilter)||(o.CrRefColID=parseInt(r.CrFilter)),a.e.IsEmpty(r.DbFilter)||(o.DrRefColID=parseInt(r.DbFilter)),a.e.IsEmpty(r.Accountfilterinuse)||(o.isUpdate=Object(S.j)(r.Accountfilterinuse)),"unit"==r.SysColumnName.toLowerCase()?(t.GridDataColumns.push(r.SysColumnName),t.GridDataColumns.push(r.SysColumnName+"_Key"),t.GridDataObj.DataTypes.Int.push(r.SysColumnName+"_Key"),t.GridDataColumns.push("UOMConversion"),t.GridDataColumns.push("UOMConvertedQty"),t.GridDataObj.DataTypes.Double.push("UOMConversion"),t.GridDataObj.DataTypes.Double.push("UOMConvertedQty")):"productid"==r.SysColumnName.toLowerCase()?(o.ValueMember="ProductID_Key",o.DisplayMember=r.parentccdefaultcolid&&"261"==r.parentccdefaultcolid.toString().toLowerCase()||t.GridDataColumns.Contains("ProductName")?"ProductCode":"ProductName",t.GridDataColumns.push(o.DisplayMember),"ProductCode"==o.DisplayMember&&t.Data.Tables.length>19&&t.Data.Tables[19].length>0&&t.Data.Columns[19].Contains("DefinitionXML")&&(o.BarcodeDef=t.Data.Tables[19][0].DefinitionXML.toString(),o.BarcodeProp=t.Data.Tables[19][0].BarcodeXml.toString(),""!=o.BarcodeDef&&"<Definition></Definition>"!=o.BarcodeDef&&(o.UseBarcode=!0)),t.GridDataColumns.Contains(o.ValueMember)||(t.GridDataColumns.push(o.ValueMember),t.GridDataObj.DataTypes.Int.push(o.ValueMember))):"accountid"==r.SysColumnName.toLowerCase()||"debitaccount"==r.SysColumnName.toLowerCase()||"creditaccount"==r.SysColumnName.toLowerCase()?("creditaccount"==r.SysColumnName.toLowerCase()&&(18==t.DocumentType||19==t.DocumentType||21==t.DocumentType||22==t.DocumentType)||"debitaccount"==r.SysColumnName.toLowerCase()&&(14==t.DocumentType||15==t.DocumentType||20==t.DocumentType||23==t.DocumentType)||"accountid"==r.SysColumnName.toLowerCase()?(o.DisplayMember=r.parentccdefaultcolid&&"239"==r.parentccdefaultcolid.toString().toLowerCase()?t.GridDataColumns.Contains("AccountName")?"AccountCode":"AccountName":"AccountCode",t.GridDataColumns.push(o.DisplayMember)):(o.DisplayMember=r.SysColumnName,t.GridDataColumns.push(o.DisplayMember)),t.GridDataColumns.Contains(o.ValueMember)||(t.GridDataColumns.push(o.ValueMember),t.GridDataObj.DataTypes.Int.push(o.ValueMember))):(t.GridDataColumns.push(r.SysColumnName),t.GridDataColumns.push(r.SysColumnName+"_Key"),t.GridDataObj.DataTypes.Int.push(r.SysColumnName+"_Key")),o.CostCenterID=parseInt(r.ColumnCostCenterID),o.TypeID=parseInt(r.ColumnCCListViewTypeID),a.e.IsEmpty(r.FetchMaxRows)||(o.GridViewID=parseInt(r.FetchMaxRows)),!a.e.IsEmpty(r.UserDefaultValue)&&t.Data.Tables.length>17&&t.Data.Tables[17].length>0&&t.Data.Columns[17].Contains("ccid")){var h=t.Data.Tables[17].filter((function(e){return e.ccid==r.ColumnCostCenterID}));h.length>0&&(o.DefaultValue=r.UserDefaultValue.toString(),o.DefaultValueText=h[0].Name.toString())}if((o.CostCenterID>5e4||61==o.CostCenterID)&&!a.e.IsEmpty(r.Filter)&&parseInt(r.Filter)>0&&(o.Filter=parseInt(r.Filter),t.FilterColumns.push(r.SysColumnName+"_Key",parseInt(r.Filter)),a.e.IsEmpty(r.Productfilterinuse)?t.ProdFilterinuse.push(o.CostCenterID,!1):t.ProdFilterinuse.push(o.CostCenterID,Object(S.j)(r.Productfilterinuse))),61==o.CostCenterID&&(t.GridDataColumns.push("StartYear"),t.GridDataColumns.push("EndYear")),"ProductID_Key"==o.ValueMember||"AccountID_Key"==o.ValueMember||"CreditAccount_Key"==o.ValueMember||"DebitAccount_Key"==o.ValueMember?(t.DivisionID>0&&(2==o.CostCenterID&&s.a.SessionManager.Preferences.ContainsKey("DW Accounts")&&"True"==s.a.SessionManager.Preferences["DW Accounts"].toString()||3==o.CostCenterID&&s.a.SessionManager.Preferences.ContainsKey("DW Products")&&"True"==s.a.SessionManager.Preferences["DW Products"].toString())&&(o.DivisionID=t.DivisionID),t.LocationID>0&&(2==o.CostCenterID&&s.a.SessionManager.Preferences.ContainsKey("LW Accounts")&&"True"==s.a.SessionManager.Preferences["LW Accounts"].toString()||3==o.CostCenterID&&s.a.SessionManager.Preferences.ContainsKey("LW Products")&&"True"==s.a.SessionManager.Preferences["LW Products"].toString())&&(o.LocationID=t.LocationID),o.FilterCondition=a.e.String(r.UserProbableValues)):a.e.IsEmpty(r.UserProbableValues)||(o.FilterColumn=r.UserProbableValues.toString()),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()&&50001==o.CostCenterID&&(o.ReadOnly=!t.Preferences.ContainsKey("Donotusedivision")||""==t.Preferences.Donotusedivision||!Object(S.j)(t.Preferences.Donotusedivision)),!s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")||"True"!=s.a.SessionManager.Preferences.EnableLocationWise.toString()||t.Preferences.ContainsKey("Donotuselocation")&&""!=t.Preferences.Donotuselocation&&Object(S.j)(t.Preferences.Donotuselocation)||50002!=o.CostCenterID||(o.ReadOnly=!t.Preferences.ContainsKey("EnableLocation")||""==t.Preferences.EnableLocation||!Object(S.j)(t.Preferences.EnableLocation)),!a.e.IsEmpty(r.Decimal)&&parseFloat(r.Decimal)>0&&r.SysColumnName.toLowerCase().Contains("dcccnid")&&3==parseInt(r.SectionID)&&parseInt(r.ColumnCostCenterID)>0){var p=o.Clone();p.Header=r.UserColumnName.toString()+"Code",p.TypeID=parseInt(r.Decimal),p.DisplayMember=r.SysColumnName+"Code",p.ValueMember=r.SysColumnName+"_Key",t.ColumnSource.push(p),t.GridDataColumns.push(r.SysColumnName+"Code")}break;case"TEXT":case"STRING":case"COMBOBOX":if(t.GridDataColumns.push(r.SysColumnName),o.IsColumnUserDefined||35==t.DocumentType||"chequebankname"==r.SysColumnName.toLowerCase()){if("Date"!=r.UserColumnType.toString()&&"FixedDate"!=r.UserColumnType.toString()||(o.DataType="DATE",t.GridDataColumns.push(r.SysColumnName+"_Key"),t.GridDataObj.DataTypes.Date.push(r.SysColumnName+"_Key"),55==t.DocumentType&&"dcalpha1"==r.SysColumnName.toLowerCase()&&(o.FixedDateFormat="MMM/yyyy")),"DateTime"==r.UserColumnType.toString()||"FixedDateTime"==r.UserColumnType.toString())o.DataType="DATETIME",t.GridDataColumns.push(r.SysColumnName+"_Key"),t.GridDataObj.DataTypes.Date.push(r.SysColumnName+"_Key");else if("Time"==r.UserColumnType.toString())o.DataType="TIME",t.GridDataColumns.push(r.SysColumnName+"_Key"),t.GridDataObj.DataTypes.Date.push(r.SysColumnName+"_Key");else if("CheckBox"==r.UserColumnType.toString())o.DataType="CheckBox";else if("Numeric"==r.UserColumnType.toString())o.DataType="FLOAT",!a.e.IsEmpty(r.Decimal)&&parseFloat(r.Decimal)>=0&&(o.DecimalPoints=r.Decimal.toString()),t.GridDataObj.DataTypes.Double.push(r.SysColumnName),"4"==r.TextFormat&&(o.ShowbodyTotal=1);else if("SELECTIONBOX"==r.UserColumnType.toString()||"editablecombobox"==r.UserColumnType.toString().toLowerCase())o.DataType="SELECTIONBOX",o.CostCenterID=t.CostCenterID;else if("combobox"==r.UserColumnType.toString().toLowerCase())if(o.ValueBinding=r.SysColumnName,!a.e.IsEmpty(r.linkData)&&22803==parseInt(r.linkData)||"@YEAR"==o.DefaultValue){o.DataType="PactComboBox";for(var f=[],y=1980;y<2100;y++)f.push({Year:y.toString()});o.DisplayMember="Year",o.ValueMember="Year",o.ComboData=f,"@YEAR"==o.DefaultValue&&(o.DefaultValue=""),t.GridDataColumns.push(r.SysColumnName+"_Key")}else{o.DataType="ComboBox",o.DisplayMember="Name",o.ValueMember="Value";var g=[],b=a.e.String(r.UserProbableValues).trim();if(b.length>0)for(var T=b.split(";"),P=0;P<T.length;P++)g.push(u.d.ComboBoxItems_2(T[P],T[P]));o.ComboData=g}else if("LISTBOX"==r.UserColumnType.toString()){if(o.DataType="LISTBOX",o.CostCenterID=t.CostCenterID,o.ValueMember=r.SysColumnName+"_Key",t.GridDataColumns.push(r.SysColumnName+"_Key"),o.CostCenterID=parseInt(r.ColumnCostCenterID),o.TypeID=parseInt(r.ColumnCCListViewTypeID),a.e.IsEmpty(r.UserDefaultValue)&&t.Data.Tables.length>17&&t.Data.Tables[17].length>0&&t.Data.Columns[17].Contains("ccid")){var M=t.Data.Tables[17].filter((function(e){return e.ccid==r.ColumnCostCenterID&&e.NodeID==r.UserDefaultValue}));M.length>0&&(o.DefaultValue=Object(I.isNullOrUndefined)(r.UserDefaultValue)?"":r.UserDefaultValue.toString(),o.DefaultValueText=M[0].Name.toString())}}else if("Attachment"==r.UserColumnType.toString())o.DataType="LINK",o.ReadOnly=!0,o.FilterCondition=r.BasedOnXml.toString(),o.Dependantinuse=!1;else if("Image"==r.UserColumnType.toString())o.DataType="LINK",o.ReadOnly=!0,o.Dependantinuse=!0;else if("LOOKUP"==r.UserColumnType.toString()){o.ValueBinding=r.SysColumnName,o.DataType="ComboBox",o.DisplayMember="Name",o.ValueMember="Value";var L=e.GetLookupData(parseInt(r.ColumnCCListViewTypeID));if(null!=L){for(var N=[],v=0;v<L.length;v++)N.push(u.d.ComboBoxItems_2(L[v].Name.toString(),L[v].NodeID.toString()));o.ComboData=N}t.GridDataColumns.push(r.SysColumnName+"_Key")}}else if("VoucherType"==r.SysColumnName){o.DataType="ComboBox",o.DisplayMember="Name",o.ValueMember="Value",o.ValueBinding=r.SysColumnName;var E=[];E.push(u.d.ComboBoxItems_2(s.a.GetResource("StockJVIssue"),"-1")),E.push(u.d.ComboBoxItems_2(s.a.GetResource("StockJVRecieve"),"1")),o.ComboData=E}else"ChequeBookNo"==r.SysColumnName&&(o.DataType="ComboBox",o.DisplayMember="Name",o.ValueMember="Value",o.ValueBinding=r.SysColumnName);break;case"DATE":o.DataType="DATE",t.GridDataColumns.push(r.SysColumnName),t.GridDataColumns.push(r.SysColumnName+"_Key"),t.GridDataObj.DataTypes.Date.push(r.SysColumnName+"_Key")}if(67!=t.DocumentType||"dcalpha2"!=r.SysColumnName.toLowerCase()&&"dcalpha3"!=r.SysColumnName.toLowerCase()&&"dcalpha18"!=r.SysColumnName.toLowerCase()&&"dcalpha19"!=r.SysColumnName.toLowerCase()||"DateTime"==r.UserColumnType.toString()&&(o.DataType="Time2"),99!=t.DocumentType||"dcalpha4"!=r.SysColumnName.toString().toLowerCase()&&"dcalpha5"!=r.SysColumnName.toString().toLowerCase()&&"dcalpha6"!=r.SysColumnName.toString().toLowerCase()&&"dcalpha7"!=r.SysColumnName.toString().toLowerCase()&&"dcalpha8"!=r.SysColumnName.toString().toLowerCase()&&"dcalpha9"!=r.SysColumnName.toString().toLowerCase()||"DateTime"==r.UserColumnType.toString()&&(o.DataType="Time2"),52!=t.DocumentType||"dcalpha1"!=r.SysColumnName.toLowerCase()&&"dcalpha2"!=r.SysColumnName.toLowerCase()||"Time"==r.UserColumnType.toString()&&(o.DataType="Time2"),59!=t.DocumentType||"dcalpha3"!=r.SysColumnName.toLowerCase()&&"dcalpha4"!=r.SysColumnName.toLowerCase()||"Time"==r.UserColumnType.toString()&&(o.DataType="Time2"),89!=t.DocumentType||"dcalpha2"!=r.SysColumnName.toLowerCase()&&"dcalpha4"!=r.SysColumnName.toLowerCase()||"Time"==r.UserColumnType.toString()&&(o.DataType="Time2"),90!=t.DocumentType||"dcalpha2"!=r.SysColumnName.toLowerCase()&&"dcalpha4"!=r.SysColumnName.toLowerCase()||"Time"==r.UserColumnType.toString()&&(o.DataType="Time2"),96==t.DocumentType&&"dcalpha3"==r.SysColumnName.toLowerCase()&&"Time"==r.UserColumnType.toString()&&(o.DataType="Time2"),68==t.DocumentType&&"dcalpha3"==r.SysColumnName.toLowerCase()&&(o.DataType="PactComboBox",o.ValueBinding=r.SysColumnName,t.GridDataColumns.push(r.SysColumnName+"_Key")),70!=t.DocumentType||"dcalpha1"!=r.SysColumnName.toLowerCase()&&"dcalpha3"!=r.SysColumnName.toLowerCase()||(o.DataType="PactComboBox",o.ValueBinding=r.SysColumnName,t.GridDataColumns.push(r.SysColumnName+"_Key")),80==t.DocumentType&&"dcalpha2"==r.SysColumnName.toLowerCase()&&(o.DataType="PactComboBox",o.ValueBinding=r.SysColumnName,t.GridDataColumns.push(r.SysColumnName+"_Key")),(r.SysColumnName.toLowerCase().Contains("dcnum")||"quantity"==r.SysColumnName.toLowerCase()||"rate"==r.SysColumnName.toLowerCase()||"gross"==r.SysColumnName.toLowerCase()||r.SysColumnName.toLowerCase().Contains("amount"))&&(t.GridDataColumns.push("default"+r.SysColumnName),t.GridDataObj.DataTypes.Double.push("default"+r.SysColumnName)),t.ColumnSource.push(o),"quantity"==r.SysColumnName.toLowerCase()){var V=!1;if(t.Preferences.ContainsKey("EnableSchemes")&&Object(S.j)(t.Preferences.EnableSchemes)&&(V=Object(S.j)(t.Preferences.EnableSchemes)),V){var A=o.Clone();A.Formula="",A.DisplayMember="FreeQTY",A.Header="Free Qty",A.DisableTab=!0,"0"==a.e.String(r.ColumnSpan)&&(A.IsVisible=!1),t.GridDataColumns.push("FreeQTY"),t.ColumnSource.push(A)}}if(o.IsColumnUserDefined&&5==t.DocumentType&&o.CostCenterID>0&&o.DisplayMember.toLowerCase().Contains("ccnid")&&a.e.Int(r.IsTransfer)>0){t.GridDataColumns.push("TO"+r.SysColumnName),t.GridDataColumns.push("TO"+r.SysColumnName+"_Key");var F=new d.a;if(F.CostCenterID=o.CostCenterID,F.ID=o.ID,F.TypeID=o.TypeID,F.DisplayMember="TO"+r.SysColumnName,F.FilterCondition=o.FilterCondition,F.DivisionID=o.DivisionID,F.LocationID=o.LocationID,F.Width=o.Width,F.DependantOn=o.DependantOn,F.Dependantinuse=o.Dependantinuse,F.IsColumnUserDefined=o.IsColumnUserDefined,F.DataType=o.DataType,F.ValueMember="TO"+r.SysColumnName+"_Key",2!=parseInt(r.IsTransfer)&&4!=parseInt(r.IsTransfer)||(F.ExcludeFilter=!0),3!=parseInt(r.IsTransfer)&&4!=parseInt(r.IsTransfer)||(o.ExcludeFilter=!0),F.Header=s.a.GetResource("StockTransferTo")+o.Header,o.Header=s.a.GetResource("StockTransferFrom")+o.Header,F.lbl="To"+r.UserColumnName.toString(),o.lbl="From"+r.UserColumnName.toString(),t.ColumnSource.push(F),null!=r.Decimal&&!a.e.IsEmpty(r.Decimal)&&parseFloat(r.Decimal.toString())>0){var R=F;R.Header=F.Header+"Code",R.TypeID=parseInt(r.Decimal),R.DisplayMember="TO"+r.SysColumnName.toString()+"Code",R.ValueMember="TO"+r.SysColumnName.toString()+"_Key",t.ColumnSource.push(R),t.GridDataColumns.push("TO"+r.SysColumnName.toString()+"Code")}}},l=0;l<n.length;l++){var c;r(l)}if(38!=this.DocumentType&&!this.IsForecast){var D=this.ColumnSource.filter((function(e){return e.IsVisible})).Compute("sum","Width");if(D&&parseFloat(D)<window.innerWidth-290){for(var C=this.ColumnSource.length-1;!this.ColumnSource[C].IsVisible;)C--;C>=0&&(this.ColumnSource[C].Width=window.innerWidth-parseFloat(D)+this.ColumnSource[C].Width-290)}}if(this.GridDataColumns.push("ExtraXML"),this.GridDataColumns.push("Type"),this.GridDataColumns.push("PayrollType"),this.GridDataColumns.push("TODocDetailsID"),this.GridDataColumns.push("LinkType"),this.GridDataColumns.push("LinkID"),this.GridDataObj.DataTypes.Int.push("LinkID"),this.IsInventory){if(this.GridDataColumns.push("AVGRATE"),this.GridDataColumns.push("LASTPURCHASERATE"),this.GridDataColumns.push("LASTLANDINGRATE"),this.GridDataColumns.push("QOH"),this.GridDataColumns.push("BalQOH"),this.GridDataColumns.push("HOLDQTY"),this.GridDataColumns.push("CommittedQty"),this.GridDataColumns.push("RESERVEQTY"),this.GridDataColumns.push("TotalReserve"),this.GridDataColumns.push("MRate"),this.GridDataColumns.push("RRate"),this.GridDataColumns.push("SRate"),this.GridDataColumns.push("Subexists"),this.GridDataColumns.push("SchemeID"),this.GridDataColumns.push("IsWeightable"),s.a.SessionManager.Preferences.LoyaltyBasedOn.toString().split(",").Contains("-1")&&(this.GridDataColumns.push("SchemeProductID"),this.GridDataObj.DataTypes.Int.push("SchemeProductID")),this.Preferences.ContainsKey("LockExecutedRows")&&"true"==this.Preferences.LockExecutedRows.toLowerCase()&&(this.GridDataColumns.push("ExecutedQty"),this.GridDataObj.DataTypes.Double.push("ExecutedQty")),this.Preferences.ContainsKey("AutoIssueNextStage")&&"true"==this.Preferences.AutoIssueNextStage.toLowerCase()&&(this.GridDataColumns.push("NextStageID"),this.GridDataObj.DataTypes.Int.push("NextStageID")),this.Preferences.ContainsKey("EnablePromotions")&&"true"==this.Preferences.EnablePromotions.toLowerCase()&&this.GridDataColumns.push("PromotionXML"),this.GridDataColumns.push("MaxSchemeID"),this.GridDataObj.DataTypes.Int.push("MaxSchemeID"),this.GridDataColumns.push("FileGUID"),this.GridDataColumns.push("FileExtension"),this.GridDataColumns.push("TolPer"),this.GridDataColumns.push("TolVal"),this.GridDataObj.DataTypes.Double.push("TolPer"),this.GridDataObj.DataTypes.Double.push("TolVal"),this.Preferences.ContainsKey("UseQtyAdjustment")&&""!=this.Preferences.UseQtyAdjustment&&Object(S.j)(this.Preferences.UseQtyAdjustment)&&(this.GridDataColumns.push("QtyType"),this.GridDataColumns.push("QtyXML")),this.GridDataColumns.push("BinWise"),this.GridDataColumns.push("BinsXML"),5==this.DocumentType?this.GridDataColumns.push("TOBinsXML"):45==this.DocumentType&&(this.GridDataColumns.push("AssignXML"),this.GridDataColumns.push("Dependencies")),this.Data.Tables.length>3&&this.Data.Tables[3].length>0&&this.Data.Columns[3].Contains("IsLineWise")&&!a.e.IsEmpty(this.Data.Tables[3][0].IsLineWise)&&Object(S.j)(this.Data.Tables[3][0].IsLineWise)){(o=new d.a).Header="Select",o.ValueBinding="IsSelected",o.DataType="ComboBox",o.DisplayMember="Name",o.ValueMember="Value";var m=[];m.push(u.d.ComboBoxItems_2("","0")),m.push(u.d.ComboBoxItems_2(s.a.GetResource("btnApprove"),"1")),m.push(u.d.ComboBoxItems_2(s.a.GetResource("btnReject"),"2")),o.ComboData=m,o.ReadOnly=!1,o.Width=90,o.DisableTab=!0,o.IsVisible=!1,o.ID="0",this.ColumnSource.InsertAt(o,1),(o=new d.a).Header="Approval Status",o.DisplayMember="StatusID",o.ReadOnly=!0,o.DataType="text",o.Width=2,o.DisableTab=!0,o.IsVisible=!0,o.ID="0",this.ColumnSource.InsertAt(o,1),(o=new d.a).Header="Status",o.DisplayMember="StatusID_Name",o.ReadOnly=!0,o.DataType="text",o.Width=parseInt(this.Data.Tables[3][0].FieldWidth),o.DisableTab=!0,o.IsVisible=0!=o.Width,o.ID="0",this.ColumnSource.InsertAt(o,2),(o=new d.a).Header="Remarks",o.DisplayMember="AppRemarks",o.DataType="text",o.ReadOnly=!1,o.Width=220,o.DisableTab=!0,o.IsVisible=!1,o.ID="0",this.ColumnSource.InsertAt(o,3),this.GridDataColumns.push("AppRemarks"),this.GridDataColumns.push("IsSelected"),this.GridDataColumns.push("StatusID"),this.GridDataColumns.push("CanApprove"),this.GridDataColumns.push("CanEdit"),this.GridDataColumns.push("WorkFlowLevel"),this.GridDataColumns.push("WorkFlowID"),this.GridDataColumns.push("StatusID_COLOR"),this.GridDataColumns.push("StatusID_Name")}}else this.GridDataColumns.push("ReturnXML"),this.GridDataColumns.push("RefStatusID"),this.GridDataColumns.push("OldSeqNo"),this.GridDataColumns.push("DiscXML"),14!=this.DocumentType&&19!=this.DocumentType||((o=new d.a).Header="Status",o.DisplayMember="StatusID",o.ReadOnly=!0,o.DataType="text",o.Width=2,o.DisableTab=!0,o.IsVisible=!1,o.ID="0",this.ColumnSource.InsertAt(o,1),this.GridDataColumns.push("StatusID"),this.GridDataColumns.push("StatusID_COLOR"));if(25==this.DocumentType&&this.GridDataColumns.push("LinkStatusID"),this.Preferences.ContainsKey("Billlanding")&&Object(S.j)(this.Preferences.Billlanding)&&(this.GridDataColumns.push("DocExtraXML"),this.GridDataColumns.push("landingType"),this.GridDataColumns.push("BOEID")),this.Preferences.ContainsKey("EnablePacking")&&Object(S.j)(this.Preferences.EnablePacking)&&(this.GridDataColumns.push("PackType"),this.GridDataColumns.push("PackXML")),this.Preferences.ContainsKey("EnableTestcase")&&Object(S.j)(this.Preferences.EnableTestcase)&&(this.GridDataColumns.push("IsTestCase"),this.GridDataColumns.push("TestCaseXML")),this.Preferences.ContainsKey("OptionalBins")&&""!=this.Preferences.OptionalBins.toString()&&Object(S.j)(this.Preferences.OptionalBins)&&(this.GridDataColumns.push("BinStatus"),this.GridDataColumns.push("BinStatus_COLOR"),(o=new d.a).Header="BinStatus",o.DisplayMember="BinStatus",o.ReadOnly=!0,o.DataType="text",o.Width=2,o.SectionID=3,o.DisableTab=!0,o.IsVisible=!0,o.ID="0",this.ColumnSource.InsertAt(o,1)),this.Preferences.ContainsKey("PartialRecur")&&"True"==this.Preferences.PartialRecur.toString()){this.GridDataColumns.push("CanRecur"),(o=new d.a).Header="Recur",o.ValueBinding="CanRecur",o.DataType="ComboBox",o.DisplayMember="Name",o.ValueMember="Value";var h=[];h.push(u.d.ComboBoxItems_2(s.a.GetResource("Com_No"),"False")),h.push(u.d.ComboBoxItems_2(s.a.GetResource("Com_Yes"),"True")),o.ComboData=h,o.Width=70,o.SectionID=3,o.IsVisible=!0,o.ID="0",this.ColumnSource.push(o)}this.GridDataColumns.Contains("FieldType")&&this.FillDafaultTypes(),this.UpdateSequence(),40062==this.CostCenterID&&this.GenerateCustomFields(n,this.LineItemFields,!0)}},{key:"FillDafaultTypes",value:function(){var e,t=this,n="";this.Data.Columns[1].Contains("PaymentModes")&&this.Data.Tables[1].length>0&&(n=this.Data.Tables[1][0].PaymentModes.toString());var s="";if(this.Preferences.ContainsKey("PosPaymentTypeFld")&&""!=this.Preferences.PosPaymentTypeFld&&((e=this.Data.Tables[0].filter((function(e){return e.CostCenterColID==t.Preferences.PosPaymentTypeFld}))).length>0&&this.GridDataColumns.Contains(e[0].SysColumnName.toString())&&(s=e[0].SysColumnName.toString())),""!=s){(e=this.Data.Tables[0].filter((function(e){return e.SectionID>4}),"SectionID")).sort((function(e,t){return e.SectionID-t.SectionID}));for(var o=function(o){var i=e[o];if(!i.SysColumnName.toLowerCase().Contains("currid")&&!i.SysColumnName.toLowerCase().Contains("exchrt")&&(""==n||n.split(",").Contains(i.SectionID.toString()))&&0==t.GridData.filter((function(e){return e.FieldType==i.SysColumnName})).length){var r=t.GridDataObj.NewRow();r.FieldType=i.SysColumnName,r[s]=i.ResourceData.toString(),!a.e.IsEmpty(i.DebitAccount)&&t.GridDataColumns.Contains("DebitAccount")&&(r.DebitAccount_Key=i.DebitAccount.toString(),r.DebitAccount=i.DebitAccountName.toString()),t.GridDataObj.addRow(r)}},i=0;i<e.length;i++)o(i)}}},{key:"CheckRWFieldsExists_0",value:function(){this.IsInventory&&(this.CheckRWFieldsExists(23819,"AVGRATE"),this.CheckRWFieldsExists(23820,"LastPurchaseRate"),this.CheckRWFieldsExists(23821,"PW_LandingCost"),this.CheckRWFieldsExists(24062,"PW_LastRate"),this.CheckRWFieldsExists(25398,"QOH"),this.CheckRWFieldsExists(26421,"HOLDQTY"),this.CheckRWFieldsExists(26422,"RESERVEQTY"),this.CheckRWFieldsExists(499943,"TotalReserve"),this.CheckRWFieldsExists(26585,"PW_LastValue"),this.CheckRWFieldsExists(50051,"Last Landing Rate"),this.CheckRWFieldsExists(50403,"ExchangeGainOrLoss"),this.CheckRWFieldsExists(50454,"CommittedQty"),this.CheckRWFieldsExists(50455,"ExecutedQty"),this.CheckRWFieldsExists(50456,"RefDocNo"),this.CheckRWFieldsExists(50493,"VendorBarcode"),this.CheckRWFieldsExists(50494,"UnitBarCode"),this.CheckRWFieldsExists(52627,"RecurDocNo"),this.CheckRWFieldsExists(52637,"BalQty"),this.CheckRWFieldsExists(52638,"BalHold"),this.CheckRWFieldsExists(53529,"LastValue"),this.CheckRWFieldsExists(53530,"TotalValue"),this.CheckRWFieldsExists(55479,"LPRStockNonStock"),this.CheckRWFieldsExists(49,"Loc_QOH"),this.CheckRWFieldsExists(50,"Div_QOH"))}},{key:"CheckRWFieldsExists",value:function(e,t){var n=this.ColumnSource.find((function(n){return n.linkData==e||!a.e.IsEmpty(n.Formula)&&n.Formula.toUpperCase().Contains(t)}));this.IsInventory&&!n&&(n=this.FooterColumnSource.find((function(n){return n.linkData==e||!a.e.IsEmpty(n.Formula)&&n.Formula.toUpperCase().Contains(t)}))),n&&this.RWFieldsExists.push(t)}},{key:"CheckFormulaExists",value:function(e){var t=this.ColumnSource.find((function(t){return!a.e.IsEmpty(t.Formula)&&t.Formula.toUpperCase().Contains(e.toUpperCase())}));return this.IsInventory&&t&&(t=this.FooterColumnSource.find((function(t){return!a.e.IsEmpty(t.Formula)&&t.Formula.toUpperCase().Contains(e.toUpperCase())}))),!!t||null!=this._TextFields.find((function(t){return!a.e.IsEmpty(t.Formula)&&t.Formula.toUpperCase().Contains(e.toUpperCase())}))}},{key:"GetAccountTransaction",value:function(e,t,n,s,o,i){var r="",l=a.e.Double(n);return l<0?(r+='DebitAccount="'+t+'" ',r+='CreditAccount="'+e+'" ',r+='Amount="'+(-1*l*o).ToString("N"+i).Replace(",","")+'" ',r+='AmtFc="'+(-1*l).toString()+'" ',r+='CurrencyID="'+s+'" ',r+='ExchangeRate="'+o+'" ',r+='IsNegative="1" '):(r+='DebitAccount="'+e+'" ',r+='CreditAccount="'+t+'" ',r+='Amount="'+(l*o).ToString("N"+i).Replace(",","")+'" ',r+='AmtFc="'+l.toString()+'" ',r+='CurrencyID="'+s+'" ',r+='ExchangeRate="'+o+'" '),r.toString()}},{key:"FillBillWiseDt",value:function(e,t,n,s,o,i,r,l,u){var c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1;a.e.IsEmpty(u)&&(u="2");var D,C,m=a.e.Double(s);if(m<0&&(o=!o,m=parseFloat((-1*m).ToString("N"+u))),(C=t.Contains("DocSeqNo")?e.filter((function(e){return e.AccountID==n&&e.DocSeqNo==c})):e.filter((function(e){return e.AccountID==n}))).length>0)if((D=C[0]).FromTo.toString()!=l.toString()&&(D.FromTo="0"),parseInt(D.CurrencyID)!=i&&(D.Amount=parseFloat((parseFloat(D.Amount)*parseFloat(D.ExchangeRate)).ToString("N"+u)),D.CurrencyID=1,D.ExchangeRate=1,m=parseFloat((m*r).ToString("N"+u))),parseInt(u)>parseInt(D.Decimal)?D.Decimal=u:u=D.Decimal.toString(),Object(S.j)(D.IsCredit)!=o){var h=parseFloat(D.Amount);h>m?D.Amount=parseFloat((parseFloat(D.Amount)-m).ToString("N"+u)):h<m?(D.Amount=parseFloat((m-h).ToString("N"+u)),D.IsCredit=o):h==m&&e.Remove(D)}else D.Amount=parseFloat((parseFloat(D.Amount)+m).ToString("N"+u));else t.length>0&&((D={}).AccountID=n,D.Amount=m,D.IsCredit=o,D.CurrencyID=i,D.ExchangeRate=r,D.FromTo=l,D.Decimal=u,t.Contains("DocSeqNo")&&(D.DocSeqNo=c),e.push(D))}},{key:"ValidateDate",value:function(e){return this.DocDate.Mandatory&&!a.e.isValidDate(e)?s.a.GetResource("Invalid")+" "+this.DocDate.Label:a.e.IsEmpty(e)||a.e.isValidDate(e)?"":s.a.GetResource("Invalid")+" "+this.DocDate.Label}},{key:"ValidateInt",value:function(e){return a.e.IsEmpty(e)||a.e.IsNum(e)?"":s.a.GetResource("Invalid")+" "+this.DocPrefix.Label}},{key:"ValidateLong",value:function(e){return a.e.IsEmpty(e)||a.e.IsNum(e)?"":s.a.GetResource("Invalid")+" "+this.DocPrefix.Label}},{key:"getAccoutingDate",value:function(e){var t=s.a.common.GetDataSet("DOC039",e.toString());return null!=t&&t.Tables.length>0&&t.Tables[0].length>0&&t.Tables[0][0].ccAlpha42&&a.e.isValidDate(t.Tables[0][0].ccAlpha42)?new Date(t.Tables[0][0].ccAlpha42):s.a.SessionManager.AccountingDate}},{key:"GenerateQuery",value:function(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(o&&""==this.DocPrefix.TextBox.Text)return e.message=s.a.GetResource("MandatoryDocumentNumber"),"";if(o&&""!=this.ValidateLong(this.DocPrefix.TextBox.Text))return e.message=this.ValidateLong(this.DocPrefix.TextBox.Text),"";if(o&&!a.e.IsNum(this.DocPrefix.TextBox.Text))return e.message=s.a.GetResource("Invalid")+" "+this.DocPrefix.Label,"";if(o&&a.e.IsEmpty(n))return e.message=s.a.GetResource("MandatoryDocumentDate"),"";if(o&&""!=this.ValidateDate(n))return e.message=this.ValidateDate(n),"";if(o)if((s.a.SessionManager.LocationID>0||this.LocationID>0)&&s.a.SessionManager.Preferences.ContainsKey("LWAccPeriod")&&"True"==s.a.SessionManager.Preferences.LWAccPeriod.toString()){if(0==this.LocationID&&s.a.SessionManager.LocationID>0&&(this.dtLocWise=this.getAccoutingDate(s.a.SessionManager.LocationID)),16==this.DocumentType&&n>this.dtLocWise)return e.message=s.a.GetResource("OpeningVoucherDate"),"";if(!this.IsPayrollDocument&&16!=this.DocumentType&&n<this.dtLocWise)return e.message=s.a.GetResource("DocumentDateValidation"),""}else{if(16==this.DocumentType&&n>s.a.SessionManager.AccountingDate)return e.message=s.a.GetResource("OpeningVoucherDate"),"";if(!this.IsPayrollDocument&&16!=this.DocumentType&&n<s.a.SessionManager.AccountingDate)return e.message=s.a.GetResource("DocumentDateValidation"),""}return o&&null!=this.BillNo&&this.BillNo.Mandatory&&""!=this.BillNo.ValidateData()?(e.message=this.BillNo.ValidateData(),""):o&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue<1&&this.DebitAccount.SelectedValue>-10001?(e.message=this.DebitAccount.Visible?s.a.GetResource("Select")+" "+this.DebitAccount.Label:"Default "+this.DebitAccount.Label+" not defined",""):o&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue<1&&this.CreditAccount.SelectedValue>-10001?(e.message=this.CreditAccount.Visible?s.a.GetResource("Select")+" "+this.CreditAccount.Label:"Default "+this.CreditAccount.Label+" not defined",""):(this.HistoryCCXML="",this.strStaticFields=this.GenerateQueryfromList(this._StaticFields,!1,e,!1,o),""!=e.message?"":(this.strTextFields=this.GenerateQueryfromList(this._TextFields,!i,e,!1,o),""!=e.message?"":(this.strnumericFields=this.GenerateQueryfromList(this._numericFields,!i,e,!1,o),""!=e.message?"":(this.strCCFields=this.GenerateQueryfromList(this._CCFields,!i,e,!1,o),""!=e.message||5==this.DocumentType&&(this.strTOCCFields=this.GenerateQueryfromList(this._CCFields,!0,e,!0,o),""!=e.message)?"":(this.FooterAccounts="".toString(),"".toString())))))}},{key:"BindCurExchange",value:function(){var e=this;this.HeaderFields.forEach((function(t){"ExchangeRate"==t.DBColumnName&&(e.AmtFc=t.Text),"CurrencyID"==t.DBColumnName&&(e.ExchRate=t.SelectedValue.toString())}))}},{key:"GenerateQueryfromList",value:function(e,t,n,o,C){var m=this,h=!1;e==this._TextFields&&(h=!0);var d="";n.message="";for(var p="",S=function(S){var f=e[S];if(p="",f instanceof r.d){if("SKU"==f.DBColumnName)return"continue";n.message=f.ValidateData(),p=f.Text,a.e.IsEmpty(p)&&(p=""),null!=f.Tag&&""!=f.Tag&&(p=f.Tag)}if(f instanceof i.a)C&&(n.message=f.GetValidationError("Text")),p=f.Text,a.e.IsEmpty(p)&&(p="");else if(f instanceof r.c)C&&(n.message=f.ValidateData()),p=f.Text,p=a.e.IsEmpty(p)?"":p.replace("\r\n","@~");else if(f instanceof u.e)C&&(n.message=f.GetValidationError("SelectedValue")),p=f.SelectedValue,a.e.IsEmpty(p)&&(p="");else if(f instanceof l.c)C&&(n.message=f.ValidateData()),f.Date&&(p=68==m.DocumentType?new Date(parseInt(f.Date.ToString("yyyy")),parseInt(f.Date.ToString("MM")),1).ToString("dd/MMM/yyyy"):56==m.DocumentType&&"dcalpha5"==f.DBColumnName.toLowerCase()?f.Date.ToString("01/MMM/yyyy"):f.Date.ToString("dd/MMM/yyyy")),a.e.IsEmpty(p)&&(p="");else if(f instanceof l.b){var I=f;if(C&&(n.message=I.ValidateData()),I.Date){var y=I.Date;I.ShowTimePicker&&1900!=I.Date.getFullYear()&&(y=(y=(y=(y=new Date(1900,1,1)).AddHours(I.Date.getHours())).AddMinutes(I.Date.getMinutes())).AddSeconds(I.Date.getSeconds())),p=y.ToString("dd/MMM/yyyy hh:mm a")}a.e.IsEmpty(p)&&(p="")}else if(f instanceof l.a)C&&(n.message=f.ValidateData()),p=f.Date.ToString("dd/MMM/yyyy"),a.e.IsEmpty(p)&&(p="");else if(f instanceof c.b){if(f.CCID==s.a.SessionManager.RegisterCCID&&(f.Mandatory=!0),C&&(n.message=f.GetValidationError("SelectedValue")),C&&f.Visible&&!a.e.IsEmpty(f.Text)&&0==f.SelectedValue)return{v:(n.message=s.a.GetResource("Invalid")+" "+f.Label.toString(),"")};f.SelectedValue>0&&(p=f.SelectedValue.toString())}else if(f instanceof c.a){if(C&&f.Visible&&0==f.SelectedValue)return{v:(n.message=s.a.GetResource("Invalid")+" "+f.Label.toString(),"")};f.SelectedValue>0&&(p=f.SelectedValue.toString()),a.e.IsEmpty(f.XML)||(m.HistoryCCXML+=f.XML)}else if(f instanceof D.a&&f.CCID>2){if(f.CCID==s.a.SessionManager.RegisterCCID&&(f.Mandatory=!0),C&&(n.message=f.GetValidationError("SelectedValue")),C&&f.Visible&&!a.e.IsEmpty(f.Text)&&0==f.SelectedValue)return{v:(n.message=s.a.GetResource("Invalid")+" "+f.Label.toString(),"")};if(50051==f.CCID&&f.Mandatory&&0==f.SelectedValue)return{v:(n.message=s.a.GetResource("Invalid")+" "+f.Label.toString(),"")};f.SelectedValue>0&&(p=f.SelectedValue.toString())}if(t){if(!a.e.IsEmpty(n.message))return{v:""};""!=p&&o?f.DBColumnName.Contains("TO")?d+=f.DBColumnName.replace("TO","")+"="+r.d.GetValidXml(p)+", ":f.DBColumnName.Contains("TO")||m._CCFields.find((function(e){return e.DBColumnName=="TO"+f.DBColumnName}))||(d+=f.DBColumnName+"="+r.d.GetValidXml(p)+", "):""==p||o||f.DBColumnName.Contains("TO")?""==p&&(o&&f.DBColumnName.Contains("TO")?d+=f.DBColumnName.replace("TO","")+"=1, ":o||f.DBColumnName.Contains("TO")||(h?d+=f.DBColumnName+"=NULL, ":f instanceof c.b&&(d+=f.DBColumnName+"=1, "))):d+=h?f.DBColumnName+"=N'"+r.d.GetValidTextXml(p)+"', ":f.DBColumnName+"="+r.d.GetValidXml(p)+", "}else{if(!a.e.IsEmpty(n.message))return{v:""};""!=p&&o?f.DBColumnName.Contains("TO")?d+=f.DBColumnName.replace("TO","")+'="'+r.d.GetValidXml(p)+'" ':f.DBColumnName.Contains("TO")||m._CCFields.find((function(e){return e.DBColumnName=="TO"+f.DBColumnName}))||(d+=f.DBColumnName+'="'+r.d.GetValidXml(p)+'" '):""==p||o||f.DBColumnName.Contains("TO")||(d+=f.DBColumnName+'="'+r.d.GetValidXml(p)+'" ')}},f=0;f<e.length;f++){var I=S(f);if("continue"!==I&&"object"==typeof I)return I.v}return d}},{key:"GenerateCustomFields",value:function(t,n){var o,h=this,d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];Logger.InfoLog("VoucherGenerator:: Inside GenerateCustomFields"),t.forEach((function(p){if(!p.SysColumnName.toLowerCase().Contains("dccurrid")&&!p.SysColumnName.toLowerCase().Contains("dcexchrt"))switch(o=p.UserColumnType.toString().toUpperCase(),o){case"NUMERIC":case"FLOAT":if("ExchangeRate"==p.SysColumnName)return;h.oText=new r.d(parseInt(p.CostCenterColID)),h.SetProperties_Custom(p,h.oText,d),n.push(h.oText);break;case"TEXT":h.oText=new r.d(parseInt(p.CostCenterColID)),h.SetProperties_Custom(p,h.oText,d)&&n.push(h.oText);break;case"SELECTIONBOX":case"EDITABLECOMBOBOX":h.oPactSelectionBox=new i.a(parseInt(p.CostCenterColID)),h.oPactSelectionBox.CostCenterID=h.CostCenterID,h.SetProperties_Custom(p,h.oPactSelectionBox,d),n.push(h.oPactSelectionBox);break;case"TEXTAREA":h.oTextArea=new r.c(parseInt(p.CostCenterColID)),h.SetProperties_Custom(p,h.oTextArea,d),n.push(h.oTextArea);break;case"TIME":case"DATETIME":case"FIXEDDATETIME":var y=new l.b(parseInt(p.CostCenterColID));h.SetProperties_Custom(p,y,d),"TIME"==o?(y.ShowTimePicker=!0,y.CustomFormat=a.e.IsNullOrWhiteSpace(p.UserProbableValues)?"hh:mm:ss tt":p.UserProbableValues.toString()):y.CustomFormat=s.a.SessionManager.Preferences["Date Format"]+" hh:mm:ss tt",n.push(y);break;case"DATE":case"FIXEDDATE":"DocDate"==p.SysColumnName?(h.ovDate=new l.d(parseInt(p.CostCenterColID)),h.ovDate.objParent=h.oParent,h.SetProperties_Custom(p,h.ovDate,d),n.push(h.ovDate)):"ActDocDate"==p.SysColumnName?(h.oDate=new l.a(parseInt(p.CostCenterColID)),h.SetProperties_Custom(p,h.oDate,d),n.push(h.oDate)):(h.oDate=new l.c(parseInt(p.CostCenterColID)),h.oDate.VoucherDate=h.ovDate,h.SetProperties_Custom(p,h.oDate,d)&&n.push(h.oDate));break;case"COMBOBOX":h.oCombo=new u.e(parseInt(p.CostCenterColID));var g=p.UserProbableValues?p.UserProbableValues.toString().trim():"";if(g.length>0){for(var b=g.split(";"),T=0;T<b.length;T++)h.oCombo.Items.push(u.d.ComboBoxItems_2(b[T],b[T]));h.oCombo.SelectedValue=h.oCombo.Items[0].Value}else if("@YEAR"==a.e.String(p.UserDefaultValue)){for(var P=1980;P<2100;P++)h.oCombo.Items.push(u.d.ComboBoxItems_2(P.toString(),P.toString()));p.UserDefaultValue=null}h.SetProperties_Custom(p,h.oCombo,d),n.push(h.oCombo);break;case"LOOKUP":h.oCombo=new u.e(parseInt(p.CostCenterColID));var M=e.GetLookupData(parseInt(p.ColumnCCListViewTypeID));if(null!=M){for(var L=0;L<M.length;L++)h.oCombo.Items.push(u.d.ComboBoxItems_2(M[L].Name.toString(),M[L].NodeID.toString()));h.oCombo.SelectedValue=h.oCombo.Items[0].Value}h.SetProperties_Custom(p,h.oCombo,d),n.push(h.oCombo);break;case"LISTBOX":if("currencyid"==p.SysColumnName.toLowerCase()){var N=new C.b;N.DBColumnID=parseInt(p.CostCenterColID),h.Data.Tables.length>14&&h.Data.Tables[14].forEach((function(e){N.Currency.Items.push(u.d.ComboBoxItems_2(e.Name.toString(),e.CurrencyID.toString()))})),h.SetProperties_Custom(p,N,d),n.push(N)}else if("CreditAccount"==p.SysColumnName||"DebitAccount"==p.SysColumnName)h.oCodeNameCombo=new D.a(parseInt(p.CostCenterColID)),h.oCodeNameCombo.Code.TypeID=10,h.oCodeNameCombo.Name.TypeID=100,h.oCodeNameCombo.SelectionCallBack.Subscribe(h,"OnGetReference"),h.oCodeNameCombo.Code.Visible=h.oCodeNameCombo.Name.Visible=!1,"CreditAccount"==p.SysColumnName?h.CreditAccount=h.oCodeNameCombo:"DebitAccount"==p.SysColumnName&&(h.DebitAccount=h.oCodeNameCombo),h.Preferences.ContainsKey("ShowAccount")&&"Code"==h.Preferences.ShowAccount?(h.oCodeNameCombo.Code.Column=0,h.oCodeNameCombo.Code.ColumnSpan=2,h.oCodeNameCombo.Code.Visible=!0):h.Preferences.ContainsKey("ShowAccount")&&"Name"==h.Preferences.ShowAccount?(h.oCodeNameCombo.Name.Column=0,h.oCodeNameCombo.Name.ColumnSpan=2,h.oCodeNameCombo.Name.Visible=!0,h.oCodeNameCombo.Name.CCID=parseInt(p.ColumnCostCenterID)):(h.oCodeNameCombo.Code.Column=0,h.oCodeNameCombo.Name.Column=1,h.oCodeNameCombo.Code.Visible=!0,h.oCodeNameCombo.Name.Visible=!0,h.oCodeNameCombo.Code.CCID=h.oCodeNameCombo.Name.CCID=parseInt(p.ColumnCostCenterID)),h.oCodeNameCombo.Code.Visible&&(h.oCodeNameCombo.Code.CCID=parseInt(p.ColumnCostCenterID),h.oCodeNameCombo.Code.TypeID=10,a.e.Int(p.Decimal)>0&&(h.oCodeNameCombo.Code.TypeID=parseInt(p.Decimal))),h.oCodeNameCombo.Name.Visible&&(h.oCodeNameCombo.Name.CCID=parseInt(p.ColumnCostCenterID),h.oCodeNameCombo.Name.TypeID=0==p.ColumnCCListViewTypeID.toString().trim().length?1:parseInt(p.ColumnCCListViewTypeID),10==h.oCodeNameCombo.Name.TypeID&&(h.oCodeNameCombo.Name.TypeID=100)),h.DivisionID>0&&s.a.SessionManager.Preferences.ContainsKey("DW Accounts")&&"True"==s.a.SessionManager.Preferences["DW Accounts"].toString()&&(h.oCodeNameCombo.Code.DivisionId=h.oCodeNameCombo.Name.DivisionId=h.DivisionID),h.LocationID>0&&s.a.SessionManager.Preferences.ContainsKey("LW Accounts")&&"True"==s.a.SessionManager.Preferences["LW Accounts"].toString()&&(h.oCodeNameCombo.Code.LocationID=h.oCodeNameCombo.Name.LocationID=h.LocationID),h.oCodeNameCombo.Code.CustomWhere=h.oCodeNameCombo.Name.CustomWhere=a.e.String(p.UserProbableValues),(3==s.a.SessionManager.RoleType&&"DebitAccount"==p.SysColumnName||2==s.a.SessionManager.RoleType&&"CreditAccount"==p.SysColumnName)&&(h.oCodeNameCombo.Code.CustomWhere.length>0&&(h.oCodeNameCombo.Code.CustomWhere+=" and "),h.oCodeNameCombo.Code.CustomWhere+=" a.AccountID="+s.a.SessionManager.ESSID,h.oCodeNameCombo.Name.CustomWhere=h.oCodeNameCombo.Code.CustomWhere),h.oCodeNameCombo.Code.InitCustomWhere=h.oCodeNameCombo.Name.InitCustomWhere=h.oCodeNameCombo.Code.CustomWhere,h.SetProperties_Custom(p,h.oCodeNameCombo,d),h.oCodeNameCombo.Code.DBColumnName=h.oCodeNameCombo.Name.DBColumnName=h.oCodeNameCombo.DBColumnName,h.oCodeNameCombo.Code.IsReadOnly=h.oCodeNameCombo.Name.IsReadOnly=h.oCodeNameCombo.IsReadOnly,h.oCodeNameCombo.Code.IsTabStop=h.oCodeNameCombo.Name.IsTabStop=h.oCodeNameCombo.IsTabStop,h.oCodeNameCombo.Name.Mandatory=h.oCodeNameCombo.Mandatory,h.oCodeNameCombo.Code.Mode=h.oCodeNameCombo.Name.Mode=h.oCodeNameCombo.Mode,h.oCodeNameCombo.Code.KeyTip=h.oCodeNameCombo.Name.KeyTip=h.oCodeNameCombo.KeyTip,h.oCodeNameCombo.Code.ToolTipFooterTitle=h.oCodeNameCombo.Name.ToolTipFooterTitle=h.oCodeNameCombo.ToolTipFooterTitle,h.oCodeNameCombo.Code.ToolTipFooterDescription=h.oCodeNameCombo.Name.ToolTipFooterDescription=h.oCodeNameCombo.ToolTipFooterDescription,h.oCodeNameCombo.Code.ToolTipDescription=h.oCodeNameCombo.Name.ToolTipDescription=h.oCodeNameCombo.ToolTipDescription,h.oCodeNameCombo.Code.ExternExpression=h.oCodeNameCombo.Name.ExternExpression=h.oCodeNameCombo.ExternExpression,p.FetchMaxRows&&(h.oCodeNameCombo.Code.GridViewID=h.oCodeNameCombo.Name.GridViewID=parseInt(p.FetchMaxRows),h.oCodeNameCombo.Name.GridViewID>0&&h.oCodeNameCombo.Enable&&(38==h.DocumentType||39==h.DocumentType)&&(h.oCodeNameCombo.Name.SearchVisible=!0)),n.push(h.oCodeNameCombo);else if("1"==p.Cformula&&p.SysColumnName.toLowerCase().Contains("dcccnid")&&parseInt(p.ColumnCostCenterID)>0){var v=new c.a(parseInt(p.CostCenterColID));v.CCID=parseInt(p.ColumnCostCenterID),v.TypeID=0==p.ColumnCCListViewTypeID.toString().trim().length?1:parseInt(p.ColumnCCListViewTypeID),v.ParentCostCenterID=h.CostCenterID,h.SetProperties_Custom(p,v,d),n.push(v)}else if(!a.e.IsEmpty(p.Decimal)&&parseFloat(p.Decimal)>0&&p.SysColumnName.toLowerCase().Contains("dcccnid")&&parseInt(p.ColumnCostCenterID)>0)h.oCodeNameCombo=new D.a(parseInt(p.CostCenterColID)),h.oCodeNameCombo.Code.TypeID=parseInt(p.Decimal),h.oCodeNameCombo.Name.TypeID=parseInt(p.ColumnCCListViewTypeID),h.oCodeNameCombo.SelectionCallBack.Subscribe(h,"OnGetReference"),h.oCodeNameCombo.Code.Visible=h.oCodeNameCombo.Name.Visible=!1,h.oCodeNameCombo.Code.Column=0,h.oCodeNameCombo.Name.Column=1,h.oCodeNameCombo.Code.Visible=!0,h.oCodeNameCombo.Name.Visible=!0,h.oCodeNameCombo.Code.CCID=h.oCodeNameCombo.Name.CCID=parseInt(p.ColumnCostCenterID),h.oCodeNameCombo.Code.Visible&&(h.oCodeNameCombo.Code.CCID=parseInt(p.ColumnCostCenterID),h.oCodeNameCombo.Code.TypeID=parseInt(p.Decimal)),h.oCodeNameCombo.Name.Visible&&(h.oCodeNameCombo.Name.CCID=parseInt(p.ColumnCostCenterID),h.oCodeNameCombo.Name.TypeID=0==p.ColumnCCListViewTypeID.toString().trim().length?1:parseInt(p.ColumnCCListViewTypeID)),h.SetProperties_Custom(p,h.oCodeNameCombo,d),h.oCodeNameCombo.Code.DBColumnName=h.oCodeNameCombo.Name.DBColumnName=h.oCodeNameCombo.DBColumnName,h.oCodeNameCombo.Code.IsReadOnly=h.oCodeNameCombo.Name.IsReadOnly=h.oCodeNameCombo.IsReadOnly,h.oCodeNameCombo.Code.IsTabStop=h.oCodeNameCombo.Name.IsTabStop=h.oCodeNameCombo.IsTabStop,h.oCodeNameCombo.Code.Mandatory=h.oCodeNameCombo.Name.Mandatory=h.oCodeNameCombo.Mandatory,h.oCodeNameCombo.Code.Mode=h.oCodeNameCombo.Name.Mode=h.oCodeNameCombo.Mode,h.oCodeNameCombo.Code.KeyTip=h.oCodeNameCombo.Name.KeyTip=h.oCodeNameCombo.KeyTip,h.oCodeNameCombo.Code.ToolTipFooterTitle=h.oCodeNameCombo.Name.ToolTipFooterTitle=h.oCodeNameCombo.ToolTipFooterTitle,h.oCodeNameCombo.Code.ToolTipFooterDescription=h.oCodeNameCombo.Name.ToolTipFooterDescription=h.oCodeNameCombo.ToolTipFooterDescription,h.oCodeNameCombo.Code.ToolTipDescription=h.oCodeNameCombo.Name.ToolTipDescription=h.oCodeNameCombo.ToolTipDescription,h.oCodeNameCombo.Code.ExternExpression=h.oCodeNameCombo.Name.ExternExpression=h.oCodeNameCombo.ExternExpression,p.FetchMaxRows&&(h.oCodeNameCombo.Code.GridViewID=h.oCodeNameCombo.Name.GridViewID=parseInt(p.FetchMaxRows),h.oCodeNameCombo.Code.GridViewID>0&&h.oCodeNameCombo.Enable&&(38==h.DocumentType||39==h.DocumentType)&&(h.oCodeNameCombo.Code.SearchVisible=!0,h.oCodeNameCombo.Name.SearchVisible=!0)),n.push(h.oCodeNameCombo);else{if(s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&!Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])&&12==parseInt(p.ColumnCostCenterID))return;if(h.oPactCombo=new c.b(parseInt(p.CostCenterColID)),h.oPactCombo.CCID=parseInt(p.ColumnCostCenterID),h.oPactCombo.OnPactListBoxValueChanged.Subscribe(h,"OnGetReference"),a.e.IsEmpty(p.CrFilter),h.oPactCombo.CrFilter=parseInt(p.CrFilter),a.e.IsEmpty(p.DbFilter)||(h.oPactCombo.DbFilter=parseInt(p.DbFilter)),a.e.IsEmpty(p.Accountfilterinuse)||(h.oPactCombo.AccDimInUse=Object(S.j)(p.Accountfilterinuse)),h.oPactCombo.TypeID=0==p.ColumnCCListViewTypeID.toString().trim().length?1:parseInt(p.ColumnCCListViewTypeID),a.e.IsEmpty(p.FetchMaxRows)||(h.oPactCombo.GridViewID=parseInt(p.FetchMaxRows)),h.SetProperties_Custom(p,h.oPactCombo,d),5!=h.DocumentType&&8!=h.DocumentType&&13!=h.DocumentType||!h.Preferences.ContainsKey("BudgetFeild")||h.oPactCombo.DBColumnName.toLowerCase()!=h.Preferences.BudgetFeild.toLowerCase()||(h.oPactCombo.CustomWhere="a.FinYearStartDate>=convert(float,convert(datetime,'"+s.a.SessionManager.FinancialYearStartDate.ToString("dd/MMM/yyyy")+"'))"),h.oPactCombo.GridViewID>0&&h.oPactCombo.Enable&&(38==h.DocumentType||39==h.DocumentType)&&(h.oPactCombo.SearchVisible=!0),h.oPactCombo.CCID==s.a.SessionManager.RegisterCCID&&h.RegisterNodeID>0&&(h.oPactCombo.DefaultValue=h.RegisterNodeID.toString()),s.a.SessionManager.Preferences.ContainsKey("PosShifts")&&""!=s.a.SessionManager.Preferences.PosShifts.toString()&&parseInt(s.a.SessionManager.Preferences.PosShifts)==h.oPactCombo.CCID&&h.ShiftNodeID>0&&(h.oPactCombo.DefaultValue=h.ShiftNodeID.toString()),n.push(h.oPactCombo),!s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")||"True"!=s.a.SessionManager.Preferences.EnableDivisionWise.toString()||h.Preferences.ContainsKey("Donotusedivision")&&""!=h.Preferences.Donotusedivision&&Object(S.j)(h.Preferences.Donotusedivision)||null==h.oPactCombo||50001!=h.oPactCombo.CCID||h.oPactCombo.DBColumnName.toLowerCase().Contains("alpha")||(h.DivisionID>0?h.oPactCombo.DefaultValue=h.DivisionID.toString():s.a.SessionManager.DivisionID>0&&(h.oPactCombo.DefaultValue=s.a.SessionManager.DivisionID.toString()),h.oPactCombo.Enable=!1),!s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")||"True"!=s.a.SessionManager.Preferences.EnableLocationWise.toString()||h.Preferences.ContainsKey("Donotuselocation")&&""!=h.Preferences.Donotuselocation&&Object(S.j)(h.Preferences.Donotuselocation)||null==h.oPactCombo||50002!=h.oPactCombo.CCID||h.oPactCombo.DBColumnName.toLowerCase().Contains("alpha")||(h.LocationID>0?h.oPactCombo.DefaultValue=h.LocationID.toString():s.a.SessionManager.LocationID>0&&(h.oPactCombo.DefaultValue=s.a.SessionManager.LocationID.toString()),h.oPactCombo.Enable=!1),h.oPactCombo.DBColumnName.toLowerCase().Contains("ccnid")&&h.oPactCombo.IsColumnUserDefined&&5==h.DocumentType&&a.e.Int(p.IsTransfer)>0){var E=new c.b(parseInt(p.CostCenterColID));E.CCID=parseInt(p.ColumnCostCenterID),E.TypeID=0==p.ColumnCCListViewTypeID.toString().trim().length?1:parseInt(p.ColumnCCListViewTypeID),h.SetProperties_Custom(p,E,d),a.e.String(p.UserDefaultValue).Contains(",")?(E.DefaultValue=Object(I.isNullOrUndefined)(p.UserDefaultValue)?"":p.UserDefaultValue.toString().split(",")[1],h.SetProperty_DefaultValue(E,!1)):null!=E.DefaultValue&&""!=E.DefaultValue&&(E.DefaultValue="",E.SelectedValue=0),h.oPactCombo.SelectedValue>0&&(E.CustomWhere=h.GetCustomWhere(h.oPactCombo.CCID,h.oPactCombo.SelectedValue)),2!=parseInt(p.IsTransfer)&&4!=parseInt(p.IsTransfer)||(E.ExcludeFilter=!0),3!=parseInt(p.IsTransfer)&&4!=parseInt(p.IsTransfer)||(h.oPactCombo.ExcludeFilter=!0);var V=0,A=0,F=1,R=-1;a.e.IsEmpty(p.RowNo)||(A=parseInt(p.RowNo)),a.e.IsEmpty(p.ColumnNo)||(V=parseInt(p.ColumnNo)),a.e.IsEmpty(p.ColumnSpan)||(F=parseInt(p.ColumnSpan)),3==V?(V=0,A+=1):V+=1,E.Row=A,E.Column=V,E.ColumnSpan=F;var G=t.filter((function(e){return"2"==e.SectionID&&e.SectionSeqnumber>(a.e.IsEmpty(p.SectionSeqnumber)?"0":p.SectionSeqnumber.toString())}));if(null!=G&&G.length>0)for(var B=0;B<G.length;B++){R=parseInt(G[B].CostCenterColID),3==V?(V=0,A+=1):V+=1;for(var O=0;O<t.length;O++)if(R.toString()==t[O].CostCenterColID.toString()){t[O].RowNo=A.toString(),t[O].ColumnNo=V.toString();break}}E.Label=s.a.GetResource("StockTransferTo")+h.oPactCombo.Label,h.oPactCombo.Label=s.a.GetResource("StockTransferFrom")+h.oPactCombo.Label,E.Lbl="To"+p.UserColumnName.toString(),h.oPactCombo.Lbl="From"+p.UserColumnName.toString(),E.DBColumnName="TO"+h.oPactCombo.DBColumnName,p.FetchMaxRows&&(E.GridViewID=parseInt(p.FetchMaxRows)),n.push(E)}(h.oPactCombo.CCID>5e4||61==h.oPactCombo.CCID)&&!a.e.IsEmpty(p.Filter)&&parseInt(p.Filter)>0&&(h.FilterFields.push({Key:h.oPactCombo,Value:parseInt(p.Filter)}),a.e.IsEmpty(p.Productfilterinuse)?h.ProdFilterinuse.ContainsKey(h.oPactCombo.CCID)||h.ProdFilterinuse.push(h.oPactCombo.CCID,!1):h.ProdFilterinuse.ContainsKey(h.oPactCombo.CCID)||h.ProdFilterinuse.push(h.oPactCombo.CCID,Object(S.j)(p.Productfilterinuse)))}break;case"COMBOTEXT":var k=new C.a(parseInt(p.CostCenterColID));h.SetProperties_Custom(p,k,d),n.push(k);break;case"ATTACHMENT":var w=new f.a(parseInt(p.CostCenterColID));h.SetProperties_Custom(p,w,d),n.push(w),h.AttachmentFields.push(w);break;case"LINK":var x=new m.a(parseInt(p.CostCenterColID));x.LinkCombo.Items.push(u.d.ComboBoxItems_2("A","1")),h.SetProperties_Custom(p,x,d),n.push(x)}}))}},{key:"SetProperties_Custom",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.Label=a.e.String(e.ResourceData),t.Lbl=a.e.String(e.UserColumnName),a.e.IsEmpty(e.IsMandatory)||(t.Mandatory=Object(S.j)(e.IsMandatory)),Object(I.isNullOrUndefined)(e.IsVisible)||(t.Visible=Object(S.j)(e.IsVisible)),e.ColumnDataType&&(t.DataType=e.ColumnDataType.toString().toUpperCase()),t.IsColumnUserDefined=!!e.IsColumnUserDefined&&Object(S.j)(e.IsColumnUserDefined),(e.SysColumnName.toLowerCase().Contains("dcalpha")||e.SysColumnName.toLowerCase().Contains("dcnum"))&&(t.IsColumnUserDefined=!0),t.DBColumnName=e.SysColumnName,t.DBColumnName.toLowerCase().Contains("ccnid")&&t.IsColumnUserDefined&&5==this.DocumentType&&!Object(I.isNullOrUndefined)(e.UserDefaultValue)&&e.UserDefaultValue.toString().Contains(",")?""!=e.UserDefaultValue.toString().split(",")[0]&&(t.DefaultValue=e.UserDefaultValue.toString().split(",")[0]):t.DefaultValue=t instanceof c.b&&t.DBColumnName.toLowerCase().Contains("ccnid")&&t.IsColumnUserDefined&&!a.e.IsEmpty(e.UserDefaultValue)?e.UserDefaultValue.toString():Object(I.isNullOrUndefined)(e.UserDefaultValue)?"":e.UserDefaultValue.toString(),t.SectionID=Object(I.isNullOrUndefined)(e.SectionID)?"":e.SectionID.toString(),t.tabname=Object(I.isNullOrUndefined)(e.SectionName)?"":e.SectionName.toString(),Object(I.isNullOrUndefined)(e.IsEditable)||a.e.IsEmpty(e.IsEditable)||(t.IsReadOnly=!Object(S.j)(e.IsEditable)),e.Formula&&(t.Formula=e.Formula.toString()),e.isnotab&&(t.IsTabStop=!Object(S.j)(e.isnotab)),e.RowNo&&(t.Row=parseInt(e.RowNo)),e.ColumnNo&&(t.Column=parseInt(e.ColumnNo)),e.ColumnSpan&&(t.ColumnSpan=parseInt(e.ColumnSpan)),"NUMERIC"==e.UserColumnType.toString().toUpperCase()&&(t.DataType="FLOAT",!a.e.IsEmpty(e.Decimal)&&parseFloat(e.Decimal)>=0&&(t.DecimalPoints=e.Decimal.toString())),e.Calculate&&(t.Calculate=Object(S.j)(e.Calculate)),e.Mode&&(t.Mode=parseInt(e.Mode)),e.Shortcut&&(t.KeyTip=e.Shortcut),e.SpName&&(t.ToolTipFooterTitle=e.SpName.toString()),e.IpParams&&(t.ToolTipFooterDescription=e.IpParams.toString()),e.OpParams&&(t.ToolTipDescription=e.OpParams.toString()),e.Expression&&(t.ExternExpression=e.Expression.toString()),(t instanceof c.b||t instanceof D.a)&&!a.e.IsEmpty(e.dependanton)&&"0"!=e.dependanton.toString()){var m=null;null!=(m=83==parseInt(e.dependanton)||parseInt(e.dependanton)>5e4&&parseInt(e.dependanton)<50100?this.Data.Tables[0].filter((function(t){return t.ColumnCostCenterID==e.dependanton})):this.Data.Tables[0].filter((function(t){return t.CostCenterColID==e.dependanton})))&&m.length>0&&(t.DependantOn=m[0].SysColumnName.toString(),a.e.IsEmpty(e.dependancy)||(t.Dependancy=parseInt(e.dependancy)),a.e.IsEmpty(e.filterinuse)||(t.Dependantinuse=Object(S.j)(e.filterinuse)),a.e.IsEmpty(e.UserProbableValues)||(t.ToolTipTitle=e.UserProbableValues.toString()))}if(!a.e.IsEmpty(e.TextFormat)&&(t instanceof r.c||t instanceof r.d||t instanceof i.a)){var h=0;h=a.e.Int(e.TextFormat),(t instanceof r.d||t instanceof r.c||t instanceof i.a)&&(2==h?t.IsAllCaps=!0:3==h&&(t.IsFirstLetterCaps=!0))}if(t instanceof r.d&&("INT"==t.DataType||"FLOAT"==t.DataType?t.Align="Right":a.e.IsEmpty(e.IgnoreChars)||(t.IgnoreChars=e.IgnoreChars.toString()),a.e.IsEmpty(e.WaterMark)||(t.WaterMark=e.WaterMark.toString())),"VoucherNo"==t.DBColumnName)this.DocPrefix=t,this.Data.Tables[4].forEach((function(e){n.DocPrefix.ComboBox.Items.push(u.d.ComboBoxItems_4(e.CodePrefix.toString(),e.CodePrefix.toString(),"",e.CodeNumberLength.toString()))})),this.DocPrefix.ComboBox.Items.length>0&&!(this.Data.Tables.length>8&&this.Data.Tables[8].length>0)&&(this.DocPrefix.ComboBox.SelectedItem=this.DocPrefix.ComboBox.Items[0],this.DocPrefix.ComboBox.SelectedValue=this.Data.Tables[4][0].CodePrefix.toString()),s.a.SessionManager.RoleType>0&&(t.IsReadOnly=!0);else if("DocDate"==t.DBColumnName)this.DocDate=t;else if("DueDate"==t.DBColumnName)this.DueDate=t,e.Formula&&(this.DueDate.Formula=e.Formula.toString());else if("BillNo"==t.DBColumnName){if(this.Preferences.ContainsKey("Hide_Billno")&&"True"==this.Preferences.Hide_Billno)return!1;this.BillNo=t}else if("BillDate"==t.DBColumnName){if(this.Preferences.ContainsKey("Hide_Billno")&&"True"==this.Preferences.Hide_Billno)return!1;this._StaticFields.push(t)}else if("StatusID"==t.DBColumnName)this.Status=t;else if("CurrencyID"==t.DBColumnName||"ExchangeRate"==t.DBColumnName){s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&!Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])&&(t.Visible=!1);var d=this.Data.Tables[0].filter((function(e){return"ExchangeRate"==e.SysColumnName}));d.length>0&&!a.e.IsEmpty(d[0].IsEditable)&&t instanceof C.b&&(t.ExchangeRate.IsReadOnly=!Object(S.j)(d[0].IsEditable),t.ExchangeRate.DBColumnName="ExchangeRate")}else t.IsColumnUserDefined&&"batchid"!=t.DBColumnName.toLowerCase()?o||(e.SysColumnName.toLowerCase().Contains("dcalpha")?this._TextFields.push(t):"LISTBOX"==e.UserColumnType.toString()?this._CCFields.push(t):(a.e.IsEmpty(e.DebitAccount)||(t.DebitAccount=parseInt(e.DebitAccount)),a.e.IsEmpty(e.CreditAccount)||(t.CreditAcount=parseInt(e.CreditAccount)),a.e.IsEmpty(e.PostingType)||(t.PostingType=parseInt(e.PostingType)),this._numericFields.push(t))):o||this._StaticFields.push(t);return t instanceof l.b&&(a.e.IsNullOrWhiteSpace(e.UserProbableValues)||(t.CustomFormat=e.UserProbableValues.toString()),a.e.IsNullOrWhiteSpace(e.UserDefaultValue)||(t.Text=e.UserDefaultValue.toString())),this.SetProperty_DefaultValue(t,!1),!0}},{key:"GetCostcenterName",value:function(e){var t=s.a.common.GetDataSet("DOC004",e.toString());return null!=t&&t.Tables.length>0&&t.Columns[0].Contains("Name")&&t.Tables[0].length>0?t.Tables[0][0].Name.toString():""}},{key:"GetCCNames",value:function(e){return s.a.common.GetDataSet("DOC005",e.toString())}},{key:"IsValidSelection",value:function(e,t){if(null!=e&&e.SelectedValue>0){var n=t.CCID+","+e.CCID+","+e.SelectedValue+","+t.SelectedValue;n+=","+(t.Dependantinuse?"1":"0")+","+t.Dependancy;var o=s.a.common.GetDataSet("DOC011",n);if(null!=o&&o.Tables.length>0&&o.Tables[0].length>0&&"0"==a.e.StringValue(o.Tables[0][0][o.Columns[0][0]]))return!1}return!0}},{key:"GetDocNumberString",value:function(e,t,n){var a=s.a.common.GetDataSet3("DOC003",e,t.toString(),n.toString());return a&&a.Tables.length>0&&a.Columns[0].Contains(e)&&a.Tables[0].length>0?a.Tables[0][0][e].toString():""}},{key:"GetCodeNameString",value:function(e,t,n){var o=s.a.common.GetDataSet3("DOC049",e.toString(),t.toString());return null!=o&&o.Tables.length>0&&n.startsWith("-")&&o.Columns[0].Contains("Code")&&o.Tables[0].length>0?a.e.String(o.Tables[0][0].Code):null!=o&&o.Tables.length>0&&!n.startsWith("-")&&o.Columns[0].Contains("Name")&&o.Tables[0].length>0?a.e.String(o.Tables[0][0].Name):""}},{key:"GetPrimaryKey",value:function(e){return 2==e?"AccountID":3==e?"ProductID":"NodeID"}},{key:"GetTableName",value:function(e){return 2==e?"ACC_Accounts":3==e?"INV_Product":50001==e?"COM_Division":50002==e?"COM_Location":50003==e?"COM_Branch":50004==e?"COM_Department":50005==e?"COM_Salesman":50006==e?"COM_Category":50007==e?"COM_Area":50008==e?"COM_Teritory":"COM_CC"+e}},{key:"SetProperty_DefaultValue",value:function(e,t){if(e instanceof r.d&&(e.Text=e.DefaultValue),e instanceof r.c)e.Text=e.DefaultValue;else if(e instanceof C.b)a.e.IsEmpty(e.DefaultValue)||"0"==e.DefaultValue?(e.Currency.SelectedValue="1",e.ExchangeRate.Text="1"):(e.Currency.SelectedValue=e.DefaultValue,e.ExchangeRate.Text=null!=this.DocDate?this.GetExchangeRate(parseInt(e.Currency.SelectedValue),this.DocDate.Date).toString():this.GetExchangeRate(parseInt(e.Currency.SelectedValue),Date.Today()).toString());else if(e instanceof u.e)e.SelectedValue=a.e.IsEmpty(e.DefaultValue)?"":e.DefaultValue;else if(e instanceof c.b){if(!a.e.IsEmpty(e.DefaultValue)&&a.e.Int(e.DefaultValue)>0)e.PreviousSelectedValue=parseInt(e.DefaultValue),e.SelectedValue=parseInt(e.DefaultValue),null!=this.DocDate?this.DocDate.Date:new Date;else e.Visible||e.Mandatory?(e.PreviousSelectedValue=0,e.SelectedValue=0,e.Text=""):(e.PreviousSelectedValue=1,e.SelectedValue=1,e.Text="")}else if(e instanceof c.a){var n=e;n.Clear(),50001==n.CCID&&(s.a.SessionManager.DivisionID>0||this.DivisionID>0)?this.DivisionID>0?(e.DefaultValue=this.DivisionID.toString(),n.SetValue(this.DivisionID)):(e.DefaultValue=s.a.SessionManager.DivisionID.toString(),n.SetValue_2(s.a.SessionManager.DivisionID,s.a.SessionManager.DivisionName)):50002==n.CCID&&(s.a.SessionManager.LocationID>0||this.LocationID>0)?this.LocationID>0?(e.DefaultValue=this.LocationID.toString(),n.SetValue(this.LocationID)):(e.DefaultValue=s.a.SessionManager.LocationID.toString(),n.SetValue_2(s.a.SessionManager.LocationID,s.a.SessionManager.LocationName)):a.e.IsEmpty(e.DefaultValue)?n.SetValue(0):""!=e.DefaultValue.trim()&&n.SetValue(parseInt(e.DefaultValue))}else if(e instanceof D.a){if(a.e.IsEmpty(e.DefaultValue))e.Visible||e.Mandatory?(e.PrevSelValu=0,e.SelectedValue=0):(e.PrevSelValu=1,e.SelectedValue=1);else e.PrevSelValu=parseInt(e.DefaultValue),e.SelectedValue=parseInt(e.DefaultValue),null!=this.DocDate?this.DocDate.Date:new Date}else if(e instanceof l.c)e.Date=a.e.IsEmpty(e.DefaultValue)||"today"!=e.DefaultValue.toLowerCase()?a.e.IsEmpty(e.DefaultValue)||"payrollmonth"!=e.DefaultValue.toLowerCase()?a.e.IsEmpty(e.DefaultValue)||"payrollmonthstart"!=e.DefaultValue.toLowerCase()?a.e.IsEmpty(e.DefaultValue)||"payrollmonthend"!=e.DefaultValue.toLowerCase()?a.e.IsEmpty(e.DefaultValue)||"latesmonth"!=e.DefaultValue.toLowerCase()?a.e.IsEmpty(e.DefaultValue)||"latesmonthstart"!=e.DefaultValue.toLowerCase()?a.e.IsEmpty(e.DefaultValue)||"latesmonthend"!=e.DefaultValue.toLowerCase()?e.Visible&&"ChequeDate"==e.DBColumnName&&"docdate"==e.DefaultValue.toLowerCase()&&this.DocDate?this.DocDate.Date:a.e.isValidDate(e.DefaultValue)?new Date(e.DefaultValue):null:s.a.SessionManager.LatesMonthEnd:s.a.SessionManager.LatesMonthStart:s.a.SessionManager.LatesMonth:s.a.SessionManager.PayrollMonthEnd:s.a.SessionManager.PayrollMonthStart:s.a.SessionManager.PayrollMonth:new Date;else if(e instanceof l.b)e.Date=a.e.IsEmpty(e.DefaultValue)||"today"!=e.DefaultValue.toLowerCase()?a.e.IsEmpty(e.DefaultValue)||"payrollmonth"!=e.DefaultValue.toLowerCase()?a.e.IsEmpty(e.DefaultValue)||"payrollmonthstart"!=e.DefaultValue.toLowerCase()?a.e.IsEmpty(e.DefaultValue)||"payrollmonthend"!=e.DefaultValue.toLowerCase()?a.e.IsEmpty(e.DefaultValue)||"latesmonth"!=e.DefaultValue.toLowerCase()?a.e.IsEmpty(e.DefaultValue)||"latesmonthstart"!=e.DefaultValue.toLowerCase()?a.e.IsEmpty(e.DefaultValue)||"latesmonthend"!=e.DefaultValue.toLowerCase()?a.e.isValidDate(e.DefaultValue)?new Date(e.DefaultValue):null:s.a.SessionManager.LatesMonthEnd:s.a.SessionManager.LatesMonthStart:s.a.SessionManager.LatesMonth:s.a.SessionManager.PayrollMonthEnd:s.a.SessionManager.PayrollMonthStart:s.a.SessionManager.PayrollMonth:new Date;else if(e instanceof l.a)e.Date=a.e.isValidDate(e.DefaultValue)?new Date(e.DefaultValue):new Date;else if(e instanceof i.a)e.Text=e.DefaultValue;else if(e instanceof f.a){var o=e;o.IsChanged=!1,o.IsDelete=!1,o.ActualFileName=o.AccountPhoto="",o.guid="",o.FileID=0}}},{key:"GetExtraAttachmentXML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="";return this.AttachmentFields.forEach((function(e){e.IsChanged&&!a.e.IsEmpty(e.AccountPhoto)?(t+=0==e.FileID?'<Row Action="NEW"':'<Row Action="MODIFY"',s.a.SessionManager.IsWebApplication&&(t+=' AttachmentID="'+e.FileID+'"',t+=' FilePath="'+e.AccountPhoto+'"',t+=' ActualFileName="'+e.AccountPhoto.substr(e.AccountPhoto.lastIndexOf("\\")+1)+'"',t+=' RelativeFileName="'+e.AccountPhoto+'"',t+=' FileExtension="'+e.FileExtension+'"',t+=' FileDescription=""',t+=' IsProductImage="0"',t+=' AllowInPrint="0"',t+=' IsDefaultImage="100"',t+=' ColName="'+e.DBColumnName+'"',t+=' GUID="'+e.guid+'"',t+="/>")):e.IsDelete&&e.FileID>0&&(t+='<Row Action="DELETE"',t+=' AttachmentID="'+e.FileID+'"/>')})),t.length>0&&!e&&(t="<AttachmentsXML>"+t+"</AttachmentsXML>"),t}},{key:"IsBillWiseAccount",value:function(e){var t=[];return t.push(e),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.document.IsAccountBillWise(t)}},{key:"CheckIsBillWise",value:function(e){return s.a.common.GetDataSet("DOC026",e)}},{key:"CheckCreditLimit",value:function(e,t,n,a){Logger.InfoLog("VoucherGenerator:: Inside CheckCreditLimit");var o=[];o.push(e),o.push(n.ToString("dd/MMM/yyyy")),o.push(this.DocID),o.push(this.CostCenterID),o.push(t),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&Object(S.j)(s.a.SessionManager.Preferences.EnableLocationWise)?o.push(this.LocationID>0?this.LocationID:s.a.SessionManager.LocationID):o.push(0),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&Object(S.j)(s.a.SessionManager.Preferences.EnableDivisionWise)?o.push(this.DivisionID>0?this.DivisionID:s.a.SessionManager.DivisionID):o.push(0),o.push(a),o.push(s.a.SessionManager.UserID),o.push(s.a.SessionManager.LanguageID);var i=s.a.document.CheckCreditLimit(o);return Logger.InfoLog("VoucherGenerator:: Exiting CheckCreditLimit"),i}},{key:"GetCaseLinkDetails",value:function(e){Logger.InfoLog("VoucherGenerator:: Inside GetCaseLinkDetails");var t=[];return t.push(e),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),Logger.InfoLog("VoucherGenerator:: Exiting GetCaseLinkDetails"),s.a.document.GetCaseLinkDetails(t)}},{key:"GetAttachments",value:function(e,t){var n=[];return n.push(e),n.push(t),n.push(s.a.SessionManager.UserID),n.push(s.a.SessionManager.LanguageID),s.a.document.GetCostCenterNodeFiles(n)}},{key:"GetLinkParams",value:function(e,t,n,o){var i=this,r=[];r.push(e),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()&&s.a.SessionManager.Preferences.ContainsKey("LocationWiseLinking")&&"True"==s.a.SessionManager.Preferences.LocationWiseLinking.toString()?r.push(this.LocationID>0?this.LocationID:s.a.SessionManager.LocationID>0?s.a.SessionManager.LocationID:0):r.push(0),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()&&s.a.SessionManager.Preferences.ContainsKey("DivisionWiseLinking")&&"True"==s.a.SessionManager.Preferences.DivisionWiseLinking.toString()?r.push(this.DivisionID>0?this.DivisionID:s.a.SessionManager.DivisionID>0?s.a.SessionManager.DivisionID:0):r.push(0),o&&r.push(""==t?null:t),r.push(""==n?null:n),r.push(this.DocID),(this.Preferences.ContainsKey("Debit Account")&&Object(S.j)(this.Preferences["Debit Account"])||this.Preferences.ContainsKey("LinkVendorProducts")&&Object(S.j)(this.Preferences.LinkVendorProducts))&&null!=this.DebitAccount?r.push(null!=this.DebitAccount&&null!=this.DebitAccount.SelectedValue&&this.DebitAccount.SelectedValue>0?this.DebitAccount.SelectedValue:0):r.push(0),(this.Preferences.ContainsKey("Credit Account")&&Object(S.j)(this.Preferences["Credit Account"])||this.Preferences.ContainsKey("LinkVendorProducts")&&Object(S.j)(this.Preferences.LinkVendorProducts))&&null!=this.CreditAccount?r.push(null!=this.CreditAccount&&null!=this.CreditAccount.SelectedValue&&this.CreditAccount.SelectedValue>0?this.CreditAccount.SelectedValue:0):r.push(0);var l="",u=0;return this.Preferences.ContainsKey("DimensionWise")&&""!=this.Preferences.DimensionWise&&this.Preferences.DimensionWise.split(",").forEach((function(e){if(a.e.IsNum(e)&&parseInt(e)>0)if(3==(u=parseInt(e)))(t=i._TextFields.find((function(e){return e instanceof c.b&&3==e.CCID})))&&(l+=null!=t.SelectedValue&&t.SelectedValue>0?" and "+t.DBColumnName+"="+t.SelectedValue.toString():" and "+t.DBColumnName+"=0");else if(u>5e4){var t;(t=i._CCFields.find((function(e){return e instanceof c.b&&e.CCID==u})))&&(l+=null!=t.SelectedValue&&t.SelectedValue>0?" and "+t.DBColumnName+"="+t.SelectedValue.toString():" and "+t.DBColumnName+"=0")}})),r.push(l),r.push(s.a.SessionManager.UserID),o&&(r.push(s.a.SessionManager.LanguageID),r.push(s.a.SessionManager.RoleID)),r}},{key:"GetLinkDetails",value:function(e,t,n){Logger.InfoLog("VoucherGenerator:: Inside GetLinkDetails");var a=this.GetLinkParams(e,t,n,!0),o=s.a.document.GetLinkDetails(a);return Logger.InfoLog("VoucherGenerator:: Exiting GetLinkDetails"),o}},{key:"GetSubtituteProducts",value:function(e,t,n,o){var i=this,r=[];r.push(e);for(var l="<XML>",u=0;u<this._CCFields.length;u++){var D=this._CCFields[u];D instanceof c.b&&D.DBColumnName.Contains("TO")&&5==this.DocumentType||D instanceof c.b&&D.SelectedValue>0&&(l+='<Row CostCenterID="'+D.CCID+'" NODEID="'+D.SelectedValue.toString()+'" />')}return this.ColumnSource.forEach((function(e){null!=e.CostCenterID&&e.CostCenterID>5e4&&i.GridDataColumns.Contains(e.ValueMember)&&(a.e.IsEmpty(o[e.ValueMember])?a.e.IsEmpty(o[e.DisplayMember])||(l+='<Row CostCenterID="'+e.CostCenterID+'" NODEID="'+o[e.DisplayMember].toString()+'" />'):l+='<Row CostCenterID="'+e.CostCenterID+'" NODEID="'+o[e.ValueMember].toString()+'" />')})),(1==this.DocumentType||2==this.DocumentType||10==this.DocumentType||26==this.DocumentType||27==this.DocumentType||3==this.DocumentType||4==this.DocumentType||25==this.DocumentType||13==this.DocumentType)&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0?l+='<Row CostCenterID="2" NODEID="'+this.CreditAccount.SelectedValue.toString()+'" />':(11==this.DocumentType||38==this.DocumentType||39==this.DocumentType||6==this.DocumentType||7==this.DocumentType||8==this.DocumentType||9==this.DocumentType||12==this.DocumentType||24==this.DocumentType)&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0&&(l+='<Row CostCenterID="2" NODEID="'+this.DebitAccount.SelectedValue.toString()+'" />'),l+="</XML>",r.push(l),r.push(null!=t?t.ToString("dd/MMM/yyyy"):(new Date).ToString("dd/MMM/yyyy")),r.push(""!=n?n:0),r.push(this.CostCenterID),r.push(s.a.SessionManager.UserID),r.push(s.a.SessionManager.LanguageID),s.a.document.GetSubtituteProducts(r)}},{key:"GetProductLinkDetails",value:function(e,t,n,o,i){var r=this;Logger.InfoLog("VoucherGenerator:: Inside GetProductLinkDetails");var l=[];l.push(e),l.push(t),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()?l.push(this.LocationID>0?this.LocationID:s.a.SessionManager.LocationID>0?s.a.SessionManager.LocationID:0):l.push(0),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()?l.push(this.DivisionID>0?this.DivisionID:s.a.SessionManager.DivisionID>0?s.a.SessionManager.DivisionID:0):l.push(0),l.push(""==n?null:n),l.push(""==o?null:o);var u="";return this.Preferences.ContainsKey("DimensionWise")&&""!=this.Preferences.DimensionWise.toString()&&this.Preferences.DimensionWise.split(",").forEach((function(e){var t;if(a.e.Int(e)>0)if(3==(t=parseInt(e)))(n=r._TextFields.find((function(e){return e instanceof c.b&&3==e.CCID})))instanceof c.b&&(u+=n.SelectedValue>0?" and "+n.DBColumnName+"="+n.SelectedValue.toString():" and "+n.DBColumnName+"=0");else if(t>5e4){var n;(n=r._CCFields.find((function(e){return e instanceof c.b&&e.CCID==t})))instanceof c.b&&(u+=n.SelectedValue>0?" and "+n.DBColumnName+"="+n.SelectedValue.toString():" and "+n.DBColumnName+"=0")}})),l.push(u),this.Preferences.ContainsKey("Debit Account")&&Object(S.j)(this.Preferences["Debit Account"])&&null!=this.DebitAccount?l.push(null!=this.DebitAccount&&null!=this.DebitAccount.SelectedValue&&this.DebitAccount.SelectedValue>0?this.DebitAccount.SelectedValue:0):l.push(0),this.Preferences.ContainsKey("Credit Account")&&Object(S.j)(this.Preferences["Credit Account"])&&null!=this.CreditAccount?l.push(null!=this.CreditAccount&&null!=this.CreditAccount.SelectedValue&&this.CreditAccount.SelectedValue>0?this.CreditAccount.SelectedValue:0):l.push(0),l.push(s.a.SessionManager.UserID),l.push(s.a.SessionManager.LanguageID),s.a.document.GetProductLinkDetails(l)}},{key:"GetKitProductDetails",value:function(e,t,n){var a=[];return a.push(e),a.push(n),a.push(t),a.push(s.a.SessionManager.UserID),a.push(s.a.SessionManager.LanguageID),s.a.document.GetKitProductDetails(a)}},{key:"GetDenominations",value:function(e){Logger.InfoLog("ControlGenerator:: Inside GetScreenInfo");try{return s.a.common.GetDenominationDetails(e)}catch(t){return Logger.ErrorLog("ControlGenerator:: GetScreenInfo"+t.stack),null}}},{key:"GetdimensionNames",value:function(e,t){var n=[];return n.push(e),n.push(1),n.push(t),n.push(s.a.SessionManager.UserID),n.push(s.a.SessionManager.LanguageID),s.a.common.GetCostCenterListViewDataByIDs(s.a.SessionManager.CompanyIndex,n)}},{key:"getVatInclExcl",value:function(e){return s.a.common.GetDataSet("DOC013",e)}},{key:"GetVatAdvanceAccounts",value:function(e){return s.a.common.GetDataSet("DOC012",e)}},{key:"GetDescXml",value:function(){var e=s.a.common.GetDataSet("DOC052",this.VoucherNo);return null!=e&&e.Tables.length>0&&e.Tables[0].length>0?e.Tables[0][0].Description.toString():(Logger.InfoLog("VoucherGenerator:: Exiting GetDescXml"),"")}},{key:"GetPendingAmount",value:function(e,t){return s.a.common.GetDataSet3("DOC053",e,t)}},{key:"GetCCListViewDataID",value:function(e,t,n){var a=[];return a.push(e),a.push(t),a.push(n),a.push(s.a.SessionManager.UserID),a.push(s.a.SessionManager.LanguageID),s.a.document.GetCCListViewDataID(JSON.stringify(a))}},{key:"GetNames",value:function(e,t){return s.a.common.GetDataSet3("DOC027",e,t)}},{key:"GetDueDate",value:function(e,t,n){if(this.IsInventory&&e>0){var a=[];a.push(e),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&Object(S.j)(s.a.SessionManager.Preferences.EnableLocationWise)?a.push(this.LocationID>0?this.LocationID:s.a.SessionManager.LocationID):a.push(0),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&Object(S.j)(s.a.SessionManager.Preferences.EnableDivisionWise)?a.push(this.DivisionID>0?this.DivisionID:s.a.SessionManager.DivisionID):a.push(0);var o=0;if(s.a.SessionManager.Preferences.ContainsKey("DimWiseCreditDebit")&&""!=s.a.SessionManager.Preferences.DimWiseCreditDebit&&parseInt(s.a.SessionManager.Preferences.DimWiseCreditDebit)>0){var i=this._CCFields.find((function(e){return e.DBColumnName.toLowerCase()=="dcccnid"+(parseInt(s.a.SessionManager.Preferences.DimWiseCreditDebit)-5e4)}));i&&i instanceof c.b&&i.SelectedValue>0&&(o=i.SelectedValue)}a.push(o);var r=s.a.document.GetDocDueDate(a);null!=r&&r.Tables.length>0&&this.GetDueDate_Table(r.Tables[0],t,n)}}},{key:"GetDueDate_Table",value:function(e,t,n){if(this.IsInventory){if(this.Preferences.ContainsKey("DueDateonBillDate")&&""!=this.Preferences.DueDateonBillDate){var s=this.Preferences.DueDateonBillDate,o=this.HeaderFields.find((function(e){return e instanceof l.c&&e.DBColumnName.toLowerCase()==s.toLowerCase()}));o&&o.Date&&(t=o.Date),(o=this._TextFields.find((function(e){return e instanceof l.c&&e.DBColumnName.toLowerCase()==s.toLowerCase()})))&&o.Date&&(t=o.Date)}var i=0,r=0;!n&&e.length>0&&!Object(I.isUndefined)(e[0].DebitDays)?(a.e.IsEmpty(e[0].DebitDays)||(i=parseInt(e[0].DebitDays)),a.e.IsEmpty(e[0].DrOptionID)||(r=parseInt(e[0].DrOptionID))):n&&e.length>0&&!Object(I.isUndefined)(e[0].CreditDays)&&(a.e.IsEmpty(e[0].CreditDays)||(i=parseInt(e[0].CreditDays)),a.e.IsEmpty(e[0].CrOptionID)||(r=parseInt(e[0].CrOptionID)));var u=this.HeaderFields.find((function(e){return e instanceof l.c&&"DueDate"==e.DBColumnName}));null!=u&&(0==r?u.Date=t.AddDays(i):1==r?u.Date=t.AddDays(t.DaysInMonth()-t.getDate()+1):2==r?u.Date=t.AddDays(t.DaysInMonth()-t.getDate()):3==r?(i=(t.getDate()/(i+1)+1)*(i+1),u.Date=i>t.DaysInMonth()?12==t.iMonth()?new Date("1/"+this.GetMonthName(t.getMonth()+1,!1)+"/"+(t.getFullYear()+1)):new Date("1/"+this.GetMonthName(t.getMonth()+1,!1)+"/"+t.getFullYear()):t.AddDays(i-t.getDate())):4==r?(t=t.AddDays(i),u.Date=t.AddDays(1-t.getDate())):5==r?(t=t.AddDays(i),u.Date=t.AddDays(t.DaysInMonth()-t.getDate())):6==r?(t=t.AddDays(1-t.getDate()),u.Date=t.AddDays(i)):7==r&&(t=t.AddDays(t.DaysInMonth()-t.getDate()),u.Date=t=t.AddDays(i)))}}},{key:"GetMonthNo",value:function(e){var t=12;switch(e.toLowerCase()){case"january":case"jan":t=1;break;case"february":case"feb":t=2;break;case"march":case"mar":t=3;break;case"april":case"apr":t=4;break;case"may":t=5;break;case"june":case"jun":t=6;break;case"July":case"Jul":t=7;break;case"August":case"Aug":t=8;break;case"september":case"sep":t=9;break;case"october":case"oct":t=10;break;case"november":case"nov":t=11;break;case"december":case"dec":t=12}return t}},{key:"GetMonthName",value:function(e,t){e>12&&(e-=12);var n="";switch(e){case 1:n=t?"January":"Jan";break;case 2:n=t?"February":"Feb";break;case 3:n=t?"March":"Mar";break;case 4:n=t?"April":"Apr";break;case 5:n="May";break;case 6:n=t?"June":"Jun";break;case 7:n=t?"July":"Jul";break;case 8:n=t?"August":"Aug";break;case 9:n=t?"September":"Sep";break;case 10:n=t?"October":"Oct";break;case 11:n=t?"November":"Nov";break;case 12:n=t?"December":"Dec"}return n}},{key:"GetCurrency",value:function(e,t){var n=1,o=s.a.common.GetDataSet3("DOC006",t.toString(),e.toString());return null!=o&&o.Tables.length>0&&o.Tables[0].length>0&&!a.e.IsEmpty(o.Tables[0][0].CurrencyID)&&(n=parseInt(o.Tables[0][0].CurrencyID)),n}},{key:"GetExchangeRate",value:function(e,t){var n=this,o=1;if(e>0){var i=[];i.push(e),i.push(t.ToString("dd-MMM-yyyy"));var r=a.e.Int(s.a.SessionManager.Preferences.DimensionwiseCurrency),l=1;if(r>5e4){var u=0;if(this.Preferences.ContainsKey("UseasCrossDimension")&&"true"==this.Preferences.UseasCrossDimension.toLowerCase()&&s.a.SessionManager.Preferences.ContainsKey("CrossDimension")&&""!=s.a.SessionManager.Preferences.CrossDimension.toString()&&a.e.IsNum(s.a.SessionManager.Preferences.CrossDimension)&&(u=parseInt(s.a.SessionManager.Preferences.CrossDimension)),u==r){if(this.Preferences.ContainsKey("CrossDimField")&&a.e.IsNum(this.Preferences.CrossDimField)){var D=this._TextFields.find((function(e){return e.DBColumnID==parseInt(n.Preferences.CrossDimField)}));D&&D instanceof c.b&&D.SelectedValue>0&&(l=D.SelectedValue)}}else{var C=this._CCFields.find((function(e){return e instanceof c.b&&e.CCID==r}));C&&C instanceof c.b&&(l=C.SelectedValue)}}i.push(l),i.push(s.a.SessionManager.LanguageID);var m=s.a.document.GetCurrencyExchange(i);null!=m&&m.Tables.length>0&&m.Tables[0].length>0&&!a.e.IsEmpty(m.Tables[0][0].Rate)&&(o=parseFloat(m.Tables[0][0].Rate))}return o}},{key:"GetDocDetailsByVoucherNO",value:function(e,t){return s.a.document.GetDocDetailsByVoucherNO(e,t)}},{key:"GetDocDetailsByInvID",value:function(e){return s.a.document.GetDocDetailsByInvID(e)}},{key:"GetDocDetailsByAccID",value:function(e){return s.a.document.GetDocDetailsByAccID(e)}},{key:"FillListViews",value:function(e){var t=this,n="";s.a.SessionManager.Preferences.ContainsKey("Dimension List")&&s.a.SessionManager.Preferences["Dimension List"].split(","),this.HeaderFields.forEach((function(t){t instanceof c.b?(e&&(t.IsAutoLoad=!0),s.a.SessionManager.IsValidNode(t.SelectedValue)?(n+='<Row CCID="'+t.CCID+'" ',n+=' TypeID="'+t.TypeID+'" ',n+=' DBColumnID="'+t.DBColumnID+'" ',n+=' NodeID="'+t.SelectedValue+'" />'):t.Text=t.SelectedValueText=""):t instanceof D.a&&(e&&(t.Code.IsAutoLoad=t.Name.IsAutoLoad=!0),s.a.SessionManager.IsValidNode(t.SelectedValue)?(n+='<Row CCID="'+t.CCID+'" ',n+=' TypeID="'+t.Code.TypeID+'" ',n+=' DBColumnID="'+t.DBColumnID+'" ',n+=' NodeID="'+t.SelectedValue+'" />',n+='<Row CCID="'+t.CCID+'" ',n+=' TypeID="'+t.Name.TypeID+'" ',n+=' DBColumnID="'+t.DBColumnID+'" ',n+=' NodeID="'+t.SelectedValue+'" />'):t.Name.SelectedValueText=t.Name.Text=t.Code.Text=t.Code.SelectedValueText="")})),this._CCFields.forEach((function(t){t instanceof c.b?(e&&(t.IsAutoLoad=!0),s.a.SessionManager.IsValidNode(t.SelectedValue)?(n+='<Row CCID="'+t.CCID+'" ',n+=' TypeID="'+t.TypeID+'" ',n+=' DBColumnID="'+t.DBColumnID+'" ',n+=' NodeID="'+t.SelectedValue+'" />'):t.Text=t.SelectedValueText=""):t instanceof D.a&&(e&&(t.Code.IsAutoLoad=t.Name.IsAutoLoad=!0),s.a.SessionManager.IsValidNode(t.SelectedValue)?(n+='<Row CCID="'+t.CCID+'" ',n+=' TypeID="'+t.Code.TypeID+'" ',n+=' DBColumnID="'+t.DBColumnID+'" ',n+=' NodeID="'+t.SelectedValue+'" />',n+='<Row CCID="'+t.CCID+'" ',n+=' TypeID="'+t.Name.TypeID+'" ',n+=' DBColumnID="'+t.DBColumnID+'" ',n+=' NodeID="'+t.SelectedValue+'" />'):t.Name.SelectedValueText=t.Name.Text=t.Code.Text=t.Code.SelectedValueText="")})),this._TextFields.forEach((function(t){t instanceof c.b&&(e&&(t.IsAutoLoad=!0),s.a.SessionManager.IsValidNode(t.SelectedValue)?(n+='<Row CCID="'+t.CCID+'" ',n+=' TypeID="'+t.TypeID+'" ',n+=' DBColumnID="'+t.DBColumnID+'" ',n+=' NodeID="'+t.SelectedValue+'" />'):t.Text=t.SelectedValueText="")}));for(var o=function(e){if("LISTBOX"==t.ColumnSource[e].DataType&&t.ColumnSource[e].CostCenterID>0){var s="";t.GridData.forEach((function(n){t.ColumnSource[e].ValueMember&&t.GridDataColumns.Contains(t.ColumnSource[e].ValueMember)&&!Object(I.isNullOrUndefined)(n[t.ColumnSource[e].ValueMember])&&!a.e.IsEmpty(n[t.ColumnSource[e].ValueMember])&&a.e.IsEmpty(n[t.ColumnSource[e].DisplayMember])&&(s+=n[t.ColumnSource[e].ValueMember].toString()+",")})),""!=s&&(n+='<Row CCID="'+t.ColumnSource[e].CostCenterID+'" ',n+=' TypeID="'+t.ColumnSource[e].TypeID+'" ',n+=' DBColumnID="'+t.ColumnSource[e].ID+'" ',n+=' NodeID="'+s.substr(0,s.length-1)+'" />')}},i=0;i<this.ColumnSource.length;i++)o(i);for(var r=function(e){if("LISTBOX"==t.FooterColumnSource[e].DataType&&t.FooterColumnSource[e].CostCenterID>0){var s="";t.FooterGridData.forEach((function(n){t.FooterColumnSource[e].ValueMember&&t.GridDataColumns.Contains(t.FooterColumnSource[e].ValueMember)&&!Object(I.isNullOrUndefined)(n[t.FooterColumnSource[e].ValueMember])&&!a.e.IsEmpty(n[t.FooterColumnSource[e].ValueMember])&&parseInt(n[t.FooterColumnSource[e].ValueMember])>0&&(s+=n[t.FooterColumnSource[e].ValueMember].toString()+",")})),""!=s&&(n+='<Row CCID="'+t.FooterColumnSource[e].CostCenterID+'" ',n+=' TypeID="'+t.FooterColumnSource[e].TypeID+'" ',n+=' DBColumnID="'+t.FooterColumnSource[e].ID+'" ',n+=' NodeID="'+s.substr(0,s.length-1)+'" />')}},l=0;l<this.FooterColumnSource.length;l++)r(l);""!=n&&(n="<XML>"+n+"</XML>",s.a.document.GetListViewDataByIDs(n).subscribe((function(e){e.Tables.length>0&&!e.Columns[0].Contains("ErrorMessage")&&function(){var n;t.HeaderFields.forEach((function(t){t instanceof c.b?s.a.SessionManager.IsValidNode(t.SelectedValue)&&((n=e.Tables[0].filter((function(e){return e.NodeID==t.SelectedValue&&e.DBColumnID==t.DBColumnID&&e.TypeID==t.TypeID}))).length>0&&(t.Text=n[0].Value,t.SelectedValueText=n[0].Value)):t instanceof D.a&&s.a.SessionManager.IsValidNode(t.SelectedValue)&&((n=e.Tables[0].filter((function(e){return e.NodeID==t.SelectedValue&&e.DBColumnID==t.DBColumnID&&e.TypeID==t.Code.TypeID}))).length>0&&(t.Code.Text=n[0].Value,t.Code.SelectedValueText=n[0].Value),(n=e.Tables[0].filter((function(e){return e.NodeID==t.SelectedValue&&e.DBColumnID==t.DBColumnID&&e.TypeID==t.Name.TypeID}))).length>0&&(t.Name.Text=n[0].Value,t.Name.SelectedValueText=n[0].Value))})),t._CCFields.forEach((function(t){t instanceof c.b?s.a.SessionManager.IsValidNode(t.SelectedValue)&&((n=e.Tables[0].filter((function(e){return e.NodeID==t.SelectedValue&&e.DBColumnID==t.DBColumnID&&e.TypeID==t.TypeID}))).length>0&&(t.Text=n[0].Value,t.SelectedValueText=n[0].Value)):t instanceof D.a&&s.a.SessionManager.IsValidNode(t.SelectedValue)&&((n=e.Tables[0].filter((function(e){return e.NodeID==t.SelectedValue&&e.DBColumnID==t.DBColumnID&&e.TypeID==t.Code.TypeID}))).length>0&&(t.Code.Text=n[0].Value,t.Code.SelectedValueText=n[0].Value),(n=e.Tables[0].filter((function(e){return e.NodeID==t.SelectedValue&&e.DBColumnID==t.DBColumnID&&e.TypeID==t.Name.TypeID}))).length>0&&(t.Name.Text=n[0].Value,t.Name.SelectedValueText=n[0].Value))})),t._TextFields.forEach((function(t){t instanceof c.b&&s.a.SessionManager.IsValidNode(t.SelectedValue)&&((n=e.Tables[0].filter((function(e){return e.NodeID==t.SelectedValue&&e.DBColumnID==t.DBColumnID&&e.TypeID==t.TypeID}))).length>0&&(t.Text=n[0].Value,t.SelectedValueText=n[0].Value))}));for(var o=function(s){"LISTBOX"==t.ColumnSource[s].DataType&&t.ColumnSource[s].CostCenterID>0&&t.GridData.forEach((function(o){null==t.ColumnSource[s].ValueMember||a.e.IsEmpty(o[t.ColumnSource[s].ValueMember])||(n=e.Tables[0].filter((function(e){return e.NodeID==o[t.ColumnSource[s].ValueMember]&&e.DBColumnID==t.ColumnSource[s].ID&&e.TypeID==t.ColumnSource[s].TypeID}))).length>0&&(o[t.ColumnSource[s].DisplayMember]=n[0].Value),t.GridDataObj.updateRow(o)}))},i=0;i<t.ColumnSource.length;i++)o(i);for(var r=function(s){"LISTBOX"==t.FooterColumnSource[s].DataType&&t.FooterColumnSource[s].CostCenterID>0&&t.FooterGridData.forEach((function(o){t.FooterGridDataColumns.length>0&&t.FooterGridData.length>0&&null!=t.FooterColumnSource[s].ValueMember&&!a.e.IsEmpty(o[t.FooterColumnSource[s].ValueMember])&&parseInt(o[t.FooterColumnSource[s].ValueMember])>0&&((n=e.Tables[0].filter((function(e){return e.NodeID==o[t.FooterColumnSource[s].ValueMember]&&e.DBColumnID==t.FooterColumnSource[s].ID&&e.TypeID==t.FooterColumnSource[s].TypeID}))).length>0&&(o[t.FooterColumnSource[s].DisplayMember]=n[0].Value))}))},l=0;l<t.FooterColumnSource.length;l++)r(l)}()}),(function(e){})))}},{key:"GetPrimaryCol",value:function(){return this.IsInventory?"ProductID_Key":this.GridDataColumns.Contains("CreditAccount_Key")?"CreditAccount_Key":this.GridDataColumns.Contains("DebitAccount_Key")?"DebitAccount_Key":this.GridDataColumns.Contains("AccountID_Key")?"AccountID_Key":""}},{key:"GetExtData",value:function(e,t,n){for(var o=[],i=e.split(","),r=0;r<i.length;r++)a.e.String(i[r])||o.push(this.GetValueBYCOLID(i[r],t));return o.push(s.a.SessionManager.UserID),o.push(s.a.SessionManager.LanguageID),s.a.document.GetData(JSON.stringify(o),n)}},{key:"GetExternalFuncData",value:function(e,t,n,o,i){var r=this,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!(this.IsForecast||1==e&&this.DocID>0||2==e&&0==this.DocID||6==e&&!l)){for(var u=[],c=n.split(","),D=0;D<c.length;D++)""!=c[D]&&u.push(this.GetValueBYCOLID(c[D],i));u.push(s.a.SessionManager.UserID),u.push(s.a.SessionManager.LanguageID);var C=s.a.document.GetData(JSON.stringify(u),t);if(6!=e&&null!=C&&C.Tables.length>0&&!C.Columns[0].Contains("ErrorMessage")&&C.Tables[0].length>0)if((c=o.split(",")).length>0&&("-500"==c[0]||"-501"==c[0])){var m=this.GetPrimaryCol(),h=-1;if("-501"==c[0])this.GridData.Clear();else for(var d=0;d<this.GridData.length;d++)if(""==a.e.StringValue(this.GridData[d][m])){h=d;break}if(-1==h){h=0;for(var S=0;S<5;S++)this.GridData.push({})}for(var f=0;f<C.Tables[0].length;f++){for(var I=this.GridDataObj.NewRow(),y=function(e){r.GridDataColumns.Contains(C.Columns[0][e])&&!a.e.IsEmpty(C.Tables[0][f][e])?I[C.Columns[0][e]]=C.Tables[0][f][e]:0==f&&((P=r.HeaderFields.find((function(t){return t instanceof p.c&&t.DBColumnName==C.Columns[0][e]})))||(P=r._TextFields.filter((function(t){return t instanceof p.c&&t.DBColumnName==C.Columns[0][e]}))),P||(P=r._CCFields.filter((function(t){return t instanceof p.c&&t.DBColumnName==C.Columns[0][e]}))),P&&r.fillcontrolValue(P,C.Tables[0][f][e].toString()))},g=0;g<C.Columns[0].length;g++)y(g);this.GridDataObj.insertRowAt(I,h+f)}this.UpdateSequence(),this.ReferenceCallBack.IsSubscribed&&this.ReferenceCallBack.Call({ReferenceTable:null,ReferenceEditTable:null,DBColumnName:"ReCalculate",ccid:0,dr:null})}else if(c.length>0&&"-502"==c[0]){for(var b=function(e){var t=r.GridData.filter((function(t){return t.DocSeqNo==C.Tables[0][e].DocSeqNo}));if(t.length>0)for(var n=function(n){r.GridDataColumns.Contains(C.Columns[0][n])&&!a.e.IsEmpty(C.Tables[0][e][C.Columns[0][n]])?t[0][C.Columns[0][n]]=C.Tables[0][e][C.Columns[0][n]]:0==e&&((P=r.HeaderFields.find((function(e){return e instanceof p.c&&e.DBColumnName==C.Columns[0][n]})))||(P=r._TextFields.find((function(e){return e instanceof p.c&&e.DBColumnName==C.Columns[0][n]}))),P||(P=r._CCFields.find((function(e){return e instanceof p.c&&e.DBColumnName==C.Columns[0][n]}))),P&&r.fillcontrolValue(P,a.e.StringValue(C.Tables[0][e][n])))},s=0;s<C.Columns[0].length;s++)n(s)},T=0;T<C.Tables[0].length;T++){var P;b(T)}this.ReferenceCallBack.IsSubscribed&&this.ReferenceCallBack.Call({ReferenceTable:null,ReferenceEditTable:null,DBColumnName:"ReCalculate",ccid:0,dr:null})}else for(var M=0;M<c.length;M++)""!=c[M]&&C.Columns[0].length>M&&(C.Columns[0].length>M+1?null!=this.SetValueBYCOLID(c[M],a.e.StringValue(C.Tables[0][0][C.Columns[0][M]]),a.e.StringValue(C.Tables[0][0][C.Columns[0][M+1]]),i)&&M++:this.SetValueBYCOLID(c[M],a.e.StringValue(C.Tables[0][0][C.Columns[0][M]]),"",i));6==e&&null!=C&&C.Tables.length>0&&C.Columns[0].Contains("ExternalFuncErrorMessage")&&C.Tables[0].length>0&&(this.ExternalFuncErrorMessage=C.Tables[0][0].ExternalFuncErrorMessage.toString())}}},{key:"SetValueBYCOLID",value:function(e,t,n,o){if("-999"==e)return null;if(null!=o)if("-1"==e)o.UOMConversion=t,a.e.IsEmpty(o.Quantity)||(o.UOMConvertedQty=a.e.IsNum(t)?a.e.Double(t)*parseFloat(o.Quantity):o.Quantity);else{var i=this.ColumnSource.find((function(t){return t.ID==e}));if(i){if("DATE"==i.DataType)a.e.isValidDate(t)&&(o[i.DisplayMember+"_Key"]=new Date(t),o[i.DisplayMember]=new Date(t).ToString(s.a.SessionManager.Preferences["Date Format"]));else if("DATETIME"==i.DataType||"TIME"==i.DataType)a.e.isValidDate(t)&&(o[i.DisplayMember+"_Key"]=new Date(t),o[i.DisplayMember]=new Date(t).ToString(s.a.SessionManager.Preferences["Date Format"]+" hh:mm:ss tt"));else if("Time2"==i.DataType)a.e.isValidDate(t)&&(o[i.DisplayMember+"_Key"]=new Date(t),o[i.DisplayMember]=new Date(t).ToString("HH:mm"));else if("ComboBox"==i.DataType)o[i.ValueBinding]=t;else if("PactComboBox"==i.DataType)o[i.ValueBinding+"_Key"]=t;else if("LISTBOX"==i.DataType&&0!=i.CostCenterID){if(a.e.IsNum(n))return o[i.ValueMember]=n,o[i.DisplayMember]=t,this.IsInventory&&3==i.CostCenterID||this.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&e.LocalReference==i.ID})).length>0&&!a.e.IsEmpty(o[i.ValueMember])&&this.GetLinkReferenceData(parseInt(i.ID),this.CostCenterID,parseInt(o[i.ValueMember]),this.DocDate.Date,"",i.CostCenterID,o),i}else this.GridDataObj.DataTypes.Double.Contains(i.DisplayMember)?a.e.IsNum(t)&&(o[i.DisplayMember]=t):o[i.DisplayMember]=t;return null}}var r=this.HeaderFields.find((function(t){return t instanceof p.c&&t.DBColumnID.toString()==e}));if(r){if(r instanceof D.a){var l;if(a.e.IsEmpty(n)&&!a.e.IsEmpty(t)){if(a.e.IsNum(t))return l=a.e.Int(t),r.PrevSelValu=l,r.SelectedValue=l,r.Name.IsAutoLoad&&r.Name.Visible&&(r.Name.SelectedValueText=t),r}else this.fillcontrolValue(r,n),r.Name.IsAutoLoad&&r.Name.Visible&&(r.Name.SelectedValueText=t);return this.Data.Tables[0].filter((function(t){return null!=t.LocalReference&&t.LocalReference==e})).length>0&&r.SelectedValue>0&&this.GetLinkReferenceData(r.DBColumnID,this.CostCenterID,r.SelectedValue,this.DocDate.Date,"",r.CCID,null),this.FillCustomwhere(r),r}if(r instanceof c.b){var u;if(a.e.IsEmpty(n)&&!a.e.IsEmpty(t)){if(a.e.IsNum(t))return u=a.e.Int(t),r.PreviousSelectedValue=u,r.SelectedValue=u,r}else this.fillcontrolValue(r,n),r.IsAutoLoad&&(r.SelectedValueText=t);return this.Data.Tables[0].filter((function(t){return null!=t.LocalReference&&t.LocalReference==e})).length>0&&r.SelectedValue>0&&this.GetLinkReferenceData(r.DBColumnID,this.CostCenterID,r.SelectedValue,this.DocDate.Date,"",r.CCID,null),this.FilterDependencies(r),r}return this.fillcontrolValue(r,t),null}if(r=this._TextFields.find((function(t){return t instanceof p.c&&t.DBColumnID.toString()==e}))){if(r instanceof c.b){var C;if(a.e.IsEmpty(n)&&!a.e.IsEmpty(t)){if(a.e.IsNum(t))return C=a.e.Int(t),r.PreviousSelectedValue=C,r.SelectedValue=C,r}else this.fillcontrolValue(r,n),r.IsAutoLoad&&(r.SelectedValueText=t);return r}return this.fillcontrolValue(r,t),null}if(r=this._CCFields.find((function(t){return t instanceof p.c&&t.DBColumnID.toString()==e})))if(r instanceof c.b){if(!a.e.IsEmpty(n)||a.e.IsEmpty(t))return this.fillcontrolValue(r,n),r.IsAutoLoad&&(r.SelectedValueText=t),this.FilterDependencies(r),r;var m;if(a.e.IsNum(t))return m=a.e.Int(t),r.PreviousSelectedValue=m,r.SelectedValue=m,this.FilterDependencies(r),r}else this.fillcontrolValue(r,t);return null}},{key:"GetValueBYCOLID",value:function(e,t){if("-100"==e)return this.DocID.toString();if("-102"==e)return null==t||Object(I.isNullOrUndefined)(t.BOEID)?"":t.BOEID.toString();if("-104"==e)return null==t||Object(I.isNullOrUndefined)(t.DocSeqNo)?"":t.DocSeqNo.toString();if("-103"==e)return null==t||Object(I.isNullOrUndefined)(t.LinkedInvDocDetailsID)?"":t.LinkedInvDocDetailsID.toString();if("-101"==e){var n={message:""};this.GenerateQuery(n,!0,Date.Today(),!1),n.message,this.strCCFields=this.GenerateQueryfromList(this._CCFields,!1,n,!1,!1),n.message,this.strTextFields=this.GenerateQueryfromList(this._TextFields,!1,n,!1,!1),n.message;var s="",o="";this.IsInventory?s="ProductID_Key":this.GridDataColumns.Contains("CreditAccount_Key")?s="CreditAccount_Key":this.GridDataColumns.Contains("DebitAccount_Key")?s="DebitAccount_Key":this.GridDataColumns.Contains("AccountID_Key")&&(s="AccountID_Key"),o+="<DocXML>";for(var i=0;i<this.GridData.length;i++)if(!a.e.IsEmpty(this.GridData[i][s])){o+="<Row ";for(var l=0;l<this.ColumnSource.length;l++)"DATE"==this.ColumnSource[l].DataType?!a.e.IsEmpty(this.GridData[i][this.ColumnSource[l].DisplayMember+"_Key"])&&a.e.isValidDate(this.GridData[i][this.ColumnSource[l].DisplayMember+"_Key"])&&(o+=this.ColumnSource[l].DisplayMember+'="'+new Date(this.GridData[i][this.ColumnSource[l].DisplayMember+"_Key"]).ToString("dd/MMM/yyyy")+'" '):"DATETIME"!=this.ColumnSource[l].DataType&&"TIME"!=this.ColumnSource[l].DataType||!a.e.isValidDate(this.GridData[i][this.ColumnSource[l].DisplayMember+"_Key"])?"ComboBox"==this.ColumnSource[l].DataType?o+=this.ColumnSource[l].ValueBinding+'="'+r.d.GetValidXml(this.GridData[i][this.ColumnSource[l].ValueBinding])+'" ':"PactComboBox"==this.ColumnSource[l].DataType?o+=this.ColumnSource[l].ValueBinding+'="'+r.d.GetValidXml(this.GridData[i][this.ColumnSource[l].ValueBinding+"_Key"])+'" ':"LISTBOX"==this.ColumnSource[l].DataType?"ProductCode"==this.ColumnSource[l].DisplayMember||"AccountCode"==this.ColumnSource[l].DisplayMember||0==this.ColumnSource[l].CostCenterID||a.e.IsEmpty(this.GridData[i][this.ColumnSource[l].ValueMember])||(o+=this.ColumnSource[l].ValueMember.replace("_Key","")+'="'+this.GridData[i][this.ColumnSource[l].ValueMember].toString()+'" '):o+=this.ColumnSource[l].DisplayMember+'="'+r.d.GetValidXml(this.GridData[i][this.ColumnSource[l].DisplayMember])+'" ':a.e.IsEmpty(this.GridData[i][this.ColumnSource[l].DisplayMember+"_Key"])||(o+=this.ColumnSource[l].DisplayMember+'="'+new Date(this.GridData[i][this.ColumnSource[l].DisplayMember+"_Key"]).ToString("dd/MMM/yyyy hh:mm:ss tt")+'" ');o+=this.strCCFields+this.strTextFields+this.strStaticFields,o+=" /> "}return o+="</DocXML>"}if(null!=t){var u=this.ColumnSource.find((function(t){return t.ID==e}));if(u)if("DATE"==u.DataType){if(!a.e.IsEmpty(t[u.DisplayMember+"_Key"])&&a.e.isValidDate(t[u.DisplayMember+"_Key"]))return new Date(t[u.DisplayMember+"_Key"]).ToString("dd/MMM/yyyy")}else if("DATETIME"!=u.DataType&&"TIME"!=u.DataType||!a.e.isValidDate(t[u.DisplayMember+"_Key"])){if("Time2"!=u.DataType||!a.e.isValidDate(t[u.DisplayMember+"_Key"]))return a.e.String("ComboBox"==u.DataType?t[u.ValueBinding]:"PactComboBox"==u.DataType?t[u.ValueBinding+"_Key"]:"LISTBOX"==u.DataType&&0!=u.CostCenterID?t[u.ValueMember]:t[u.DisplayMember]);if(!a.e.IsEmpty(t[u.DisplayMember+"_Key"]))return new Date(t[u.DisplayMember+"_Key"]).ToString("HH:mm")}else if(!a.e.IsEmpty(t[u.DisplayMember+"_Key"]))return new Date(t[u.DisplayMember+"_Key"]).ToString("dd/MMM/yyyy hh:mm:ss tt")}var c=this.HeaderFields.find((function(t){return t instanceof p.c&&t.DBColumnID.toString()==e}));return c||(c=this._TextFields.find((function(t){return t instanceof p.c&&t.DBColumnID.toString()==e})))||(c=this._CCFields.find((function(t){return t instanceof p.c&&t.DBColumnID.toString()==e})))?this.GetcontrolValue(c):""}},{key:"GetLinkRefDataSet",value:function(e,t,n,o,i,r,l){var u=this,C=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;Logger.InfoLog("VoucherGenerator:: Inside GetLinkReferenceData");var m=null;if(n>0){var h=[];h.push(e),h.push(t),h.push(n),h.push(null!=this.ovDate&&null!=this.ovDate.Date?this.ovDate.Date.ToString("dd/MMM/yyyy"):(new Date).ToString("dd/MMM/yyyy"));if(C>0)h.push(C);else{for(var d=0;d<this.DefaultBasedOn.length;d++)this.DefaultBasedOn[this.DefaultBasedOn.keys[d]]="0";1==this.DocumentType||39==this.DocumentType||2==this.DocumentType||6==this.DocumentType||26==this.DocumentType||27==this.DocumentType||3==this.DocumentType||4==this.DocumentType||25==this.DocumentType||13==this.DocumentType?null!=l&&!a.e.IsEmpty(l.CreditAccount_Key)&&parseInt(l.CreditAccount_Key)>0?h.push(l.CreditAccount_Key.toString()):null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0?(h.push(this.CreditAccount.SelectedValue),this.DefaultBasedOn.ContainsKey("2")&&this.CreditAccount.SelectedValue>0&&(2!=r||e==this.CreditAccount.DBColumnID)&&(this.DefaultBasedOn[2]="1"," and AccountID="+this.CreditAccount.SelectedValue)):h.push(0):11==this.DocumentType||38==this.DocumentType||10==this.DocumentType||7==this.DocumentType||8==this.DocumentType||9==this.DocumentType||12==this.DocumentType||24==this.DocumentType?null!=l&&!a.e.IsEmpty(l.DebitAccount_Key)&&parseInt(l.DebitAccount_Key)>0?h.push(l.DebitAccount_Key.toString()):null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0?(h.push(this.DebitAccount.SelectedValue),this.DefaultBasedOn.ContainsKey("2")&&this.DebitAccount.SelectedValue>0&&(2!=r||e==this.DebitAccount.DBColumnID)&&(this.DefaultBasedOn[2]="1"," and AccountID="+this.DebitAccount.SelectedValue)):h.push(0):h.push(0)}this.IsInventory||((18==this.DocumentType||19==this.DocumentType||21==this.DocumentType||22==this.DocumentType)&&null!=l&&!a.e.IsEmpty(l.CreditAccount_Key)&&parseInt(l.CreditAccount_Key)>0?this.DefaultBasedOn.ContainsKey("2")&&(this.DefaultBasedOn[2]="1"," and AccountID="+l.CreditAccount_Key.toString()):(14==this.DocumentType||15==this.DocumentType||20==this.DocumentType||23==this.DocumentType)&&null!=l&&!a.e.IsEmpty(l.DebitAccount_Key)&&parseInt(l.DebitAccount_Key)>0?this.DefaultBasedOn.ContainsKey("2")&&(this.DefaultBasedOn[2]="1"," and AccountID="+l.DebitAccount_Key.toString()):null!=l&&!a.e.IsEmpty(l.AccountID_Key)&&parseInt(l.AccountID_Key)>0&&this.DefaultBasedOn.ContainsKey("2")&&(this.DefaultBasedOn[2]="1"," and AccountID="+l.AccountID_Key.toString()));var p=0;this.Preferences.ContainsKey("UseasCrossDimension")&&"true"==this.Preferences.UseasCrossDimension.toLowerCase()&&s.a.SessionManager.Preferences.ContainsKey("CrossDimension")&&""!=s.a.SessionManager.Preferences.CrossDimension.toString()&&a.e.IsNum(s.a.SessionManager.Preferences.CrossDimension)&&(p=parseInt(s.a.SessionManager.Preferences.CrossDimension));var f="<XML>";this._CCFields.forEach((function(e){if(!(e instanceof c.b&&e.DBColumnName.Contains("TO")&&5==u.DocumentType)&&e instanceof c.b&&e.SelectedValue>0){if(p==e.CCID&&u.Preferences.ContainsKey("CrossDimField")&&a.e.IsNum(u.Preferences.CrossDimField)){var t=u._TextFields.find((function(e){return e.DBColumnID==parseInt(u.Preferences.CrossDimField)}));return void(t&&t instanceof c.b&&t.SelectedValue>0&&(f+='<Row CostCenterID="'+e.CCID+'" NODEID="'+t.SelectedValue.toString()+'" />'))}f+='<Row CostCenterID="'+e.CCID+'" NODEID="'+e.SelectedValue.toString()+'" />',u.DefaultBasedOn.ContainsKey(e.CCID.toString())&&(u.DefaultBasedOn[e.CCID.toString()]="1"," and CCNID"+(e.CCID-5e4)+"="+e.SelectedValue)}})),null!=l&&this.ColumnSource.forEach((function(e){e.CostCenterID>5e4&&u.GridDataColumns.Contains(e.ValueMember)&&!a.e.IsEmpty(l[e.ValueMember])?(f+='<Row CostCenterID="'+e.CostCenterID+'" NODEID="'+l[e.ValueMember].toString()+'" />',u.DefaultBasedOn.ContainsKey(e.CostCenterID.toString())&&(u.DefaultBasedOn[e.CostCenterID.toString()]="1"," and CCNID"+(e.CostCenterID-5e4)+"="+l[e.ValueMember].toString())):3==e.CostCenterID&&u.GridDataColumns.Contains(e.ValueMember)&&!a.e.IsEmpty(l[e.ValueMember])&&u.DefaultBasedOn.ContainsKey(e.CostCenterID.toString())&&(f+='<Row CostCenterID="3" NODEID="'+l[e.ValueMember].toString()+'" />',u.DefaultBasedOn[e.CostCenterID.toString()]="1"," and ProductID="+l[e.ValueMember].toString())})),f+="</XML>",h.push(f),this.Preferences.ContainsKey("DefaultProfileID")&&!a.e.IsEmpty(this.Preferences.DefaultProfileID)&&this.DefaultBasedOn.ContainsKey(r.toString())?h.push(!0):h.push(!1);var y=[];if(this.Preferences.ContainsKey("DimensionWise")&&!a.e.IsEmpty(this.Preferences.DimensionWise)&&(y=this.Preferences.DimensionWise.split(",")),null!=this.Link&&null!=this.Link.LinkCombo&&null!=this.Link.LinkCombo.SelectedValue&&""!=this.Link.LinkCombo.SelectedValue&&(y.Contains(r.toString())||2==r&&("creditaccount"==i.toLowerCase()&&this.Preferences.ContainsKey("Credit Account")&&Object(S.j)(this.Preferences["Credit Account"])||this.Preferences.ContainsKey("LinkVendorProducts")&&Object(S.j)(this.Preferences.LinkVendorProducts)||"debitaccount"==i.toLowerCase()&&this.Preferences.ContainsKey("Debit Account")&&Object(S.j)(this.Preferences["Debit Account"])))?h.AddRange(this.GetLinkParams(parseInt(this.Link.LinkCombo.SelectedValue),this.DocDate.Date.ToString("dd/MMM/yyyy"),this.DueDate&&this.DueDate.Date?this.DueDate.Date.ToString("dd/MMM/yyyy"):"",!1)):(h.push("0"),h.push("0"),h.push("0"),h.push(null),h.push("0"),h.push("0"),h.push("0"),h.push(""),h.push(s.a.SessionManager.UserID)),h.push(s.a.SessionManager.LanguageID),h.push(s.a.SessionManager.RoleID),m=s.a.document.GetReferenceData(JSON.stringify(h)),Logger.InfoLog("VoucherGenerator:: Exiting GetLinkReferenceData"),"0"!=h[7].toString())for(var g=1;g<m.Tables.length;g++)if(m.Columns[m.Tables.length-g].Contains("voucherno")){this.Link.VouchersList=m.Tables[m.Tables.length-g],this.FillPendingList(!0);break}if(this.Preferences.ContainsKey("DefaultProfileID")&&""!=this.Preferences.DefaultProfileID&&null!=m&&m.Tables.length>0&&m.Columns[m.Tables.length-1].Contains("ProfileID")){for(var b=1;b<m.Tables.length&&m.Columns[m.Tables.length-b].Contains("ProfileID");b++)if(0!=m.Tables[m.Tables.length-b].length)for(var T=function(e){var t=m.Columns[m.Tables.length-b][e];if("AccountID"==t);else if("ProductID"==t);else if(t.Contains("CCNID")&&!a.e.IsEmpty(m.Tables[m.Tables.length-b][0][t])&&parseInt(m.Tables[m.Tables.length-b][0][t])>0)if((N=u._CCFields.find((function(e){return e.DBColumnName.toUpperCase()=="DC"+t})))&&N instanceof c.b)N.SelectedValue=parseInt(m.Tables[m.Tables.length-b][0][t]),N.IsAutoLoad&&m.Columns[m.Tables.length-b].length>e+1&&(N.SelectedValueText=m.Tables[m.Tables.length-b][0][m.Columns[m.Tables.length-b][e+1]].toString());else if(null!=N&&N instanceof D.a){N.Code.SelectedValue=N.Name.SelectedValue=parseInt(m.Tables[m.Tables.length-b][0][t]);var n=s.a.document.GetCCValues("'"+m.Tables[m.Tables.length-b][0][m.Columns[m.Tables.length-b][e+1]].toString()+"'",N.CCID,0);n.length>0&&!n.Columns[0].Contains("ErrorMessage")&&(N.Code.SelectedValueText=n.Tables[0][0].Code.toString(),N.Name.SelectedValueText=n.Tables[0][0].name.toString())}else null==l||Object(I.isUndefined)(l["DC"+t])||(Object(I.isUndefined)(l["DC"+t+"_Key"])||(l["DC"+t+"_Key"]=parseInt(m.Tables[m.Tables.length-b][0][t])),m.Columns[m.Tables.length-b].length>e+1&&(l["DC"+t]=m.Tables[m.Tables.length-b][0][m.Columns[m.Tables.length-b][e+1]].toString()));e++,P=e},P=1;P<m.Columns[m.Tables.length-1].length;P++)T(P)}else if(this.Preferences.ContainsKey("DefaultProfileID")&&""!=this.Preferences.DefaultProfileID&&null!=m&&m.Tables.length>0&&0==m.Tables[m.Tables.length-1].length&&m.Columns[m.Tables.length-1].Contains("ProfileID"))for(var M=function(e){var t=m.Columns[m.Tables.length-1][e];t.Contains("CCNID")&&((N=u._CCFields.find((function(e){return e.DBColumnName.toUpperCase()=="DC"+t})))&&N instanceof c.b?N.SelectedValue=1:null==l||Object(I.isUndefined)(l["DC"+t])||Object(I.isUndefined)(l["DC"+t+"_Key"])||(l["DC"+t+"_Key"]=1)),e++,L=e},L=1;L<m.Columns[m.Tables.length-1].length;L++){var N;M(L)}}return m}},{key:"GetLinkReferenceData",value:function(e,t,n,o,i,m,h){var d=this,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,f=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];if(1!=this.IsResave){var I=this.GetLinkRefDataSet(e,t,n,o,i,m,h),y=this.GetPrimaryCol();if(null!=I){var g,b=!0;if(this.ColumnSource.find((function(t){return t.ID==e.toString()}))&&(b=!1),(15==this.DocumentType||14==this.DocumentType)&&2==m&&this.Preferences.ContainsKey("AutoChequeNo")&&"TRUE"==this.Preferences.AutoChequeNo.toUpperCase())if(null!=this.CreditAccount&&e==this.CreditAccount.DBColumnID&&this.CreditAccount.SelectedValue>0)this.HeaderFields.forEach((function(e){if(e instanceof u.e&&"ChequeBookNo"==e.DBColumnName&&null!=I&&I.Tables.length>4){e.Items.Clear();var t=d.HeaderFields.find((function(e){return e instanceof r.d&&"ChequeNumber"==e.DBColumnName}));t&&(t.Text=""),e.Items.push(u.d.ComboBoxItems_2("",""));for(var n=0;n<I.Tables[4].length;n++)e.Items.push(u.d.ComboBoxItems_2(I.Tables[4][n].BookNo.toString(),I.Tables[4][n].BookNo.toString()));e.Items.length>1&&(e.SelectedValue=e.Items[1].Value)}}));else if("CreditAccount"==i&&null!=h&&null!=I&&I.Tables.length>4){var T=this.ColumnSource.find((function(e){return null!=e.ValueBinding&&"ChequeBookNo"==e.ValueBinding}));if(T){var P=[];P.push(u.d.ComboBoxItems_2("",""));for(var M=0;M<I.Tables[4].length;M++)P.push(u.d.ComboBoxItems_2(I.Tables[4][M].BookNo.toString(),I.Tables[4][M].BookNo.toString()));T.ComboData=P,P.length>1&&(h[T.ValueBinding]=P[1].Value,(T=this.ColumnSource.find((function(e){return null!=e.DisplayMember&&"ChequeNumber"==e.DisplayMember})))&&(h[T.DisplayMember]=s.a.document.GetChequeNumbers(n,P[1].Value)))}}if(null!=I&&I.Tables.length>0&&I.Tables[0].length>0)for(var L=function(i){if(I.Tables[0].length>0&&I.Columns[0][i].toLowerCase().Contains("dcalpha")&&d._TextFields.forEach((function(e){e.DBColumnName==I.Columns[0][i]&&(I.Columns[0].Contains(e.DBColumnName+"Name")&&e instanceof r.d?d.fillcontrolValue(e,a.e.StringValue(I.Tables[0][0][I.Columns[0][i]+"Name"])):d.fillcontrolValue(e,a.e.StringValue(I.Tables[0][0][I.Columns[0][i]])),e instanceof c.b&&I.Columns[0].Contains(I.Columns[0][i]+"Name")&&(e.SelectedValueText=e.Text=a.e.StringValue(I.Tables[0][0][I.Columns[0][i]+"Name"])))})),I.Columns[0][i].toUpperCase().Contains("CCNID")){if("DCCCNID2"==I.Columns[0][i].toUpperCase()&&s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()&&(!d.Preferences.ContainsKey("Donotuselocation")||""==d.Preferences.Donotuselocation||!Object(S.j)(d.Preferences.Donotuselocation)))return N=i,"continue";if("DCCCNID1"==I.Columns[0][i].toUpperCase()&&s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()&&(!d.Preferences.ContainsKey("Donotusedivision")||""==d.Preferences.Donotusedivision||!Object(S.j)(d.Preferences.Donotusedivision)))return N=i,"continue";for(var l=function(o){var r=d._CCFields[o];if(I.Tables[0].length>0&&r.DBColumnName==I.Columns[0][i])return!a.e.IsEmpty(I.Tables[0][0][I.Columns[0][i]])&&parseInt(I.Tables[0][0][I.Columns[0][i]])>0&&(r instanceof c.b?(r.OnPactListBoxValueChanged.IsSubscribed||(r.PreviousSelectedValue=parseInt(I.Tables[0][0][I.Columns[0][i]])),r.SelectedValue=parseInt(I.Tables[0][0][I.Columns[0][i]]),I.Columns[0].Contains(I.Columns[0][i]+"Name")&&(r.Text=I.Tables[0][0][I.Columns[0][i]+"Name"].toString()),s.a.SessionManager.Preferences.ContainsKey("DisableAutoLoad")&&"true"==s.a.SessionManager.Preferences.DisableAutoLoad.toLowerCase()&&(d.IsCodeFirstCol(r.CCID,r.TypeID)&&I.Columns[0].Contains(I.Columns[0][i]+"Code")?r.SelectedValueText=I.Tables[0][0][I.Columns[0][i]+"Code"].toString():I.Columns[0].Contains(I.Columns[0][i]+"Name")&&(r.SelectedValueText=I.Tables[0][0][I.Columns[0][i]+"Name"].toString())),r.CustomWhere=I.Columns[0].Contains(I.Columns[0][i]+"Group")&&!a.e.IsEmpty(I.Tables[0][0][I.Columns[0][i]+"Group"])&&Object(S.j)(I.Tables[0][0][I.Columns[0][i]+"Group"])?" lft between "+I.Tables[0][0][I.Columns[0][i]+"lft"].toString()+" and "+I.Tables[0][0][I.Columns[0][i]+"rgt"].toString():"",m>5e4&&(d.IsConstructorCall||s.a.SessionManager.Preferences.ContainsKey("Dimension List")&&s.a.SessionManager.Preferences["Dimension List"].split(",").Contains(m.toString()))&&(v=d._CCFields.find((function(t){return t.DBColumnID==e})))&&(d.IsConstructorCall||v.DefaultValue==n.toString())&&d.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&e.LocalReference==r.DBColumnID})).length>0&&d.GetLinkReferenceData(r.DBColumnID,t,r.SelectedValue,d.DocDate.Date,r.DBColumnName,r.CCID,null)):r instanceof D.a&&(r.Code.OnPactListBoxValueChanged.IsSubscribed||(r.Code.PreviousSelectedValue=r.Name.PreviousSelectedValue=parseInt(I.Tables[0][0][I.Columns[0][i]])),r.SelectedValue=parseInt(I.Tables[0][0][I.Columns[0][i]]),I.Columns[0].Contains(I.Columns[0][i]+"Code")&&(r.Code.Text=I.Tables[0][0][I.Columns[0][i]+"Code"].toString()),I.Columns[0].Contains(I.Columns[0][i]+"Name")&&(r.Name.Text=I.Tables[0][0][I.Columns[0][i]+"Name"].toString()),s.a.SessionManager.Preferences.ContainsKey("DisableAutoLoad")&&"true"==s.a.SessionManager.Preferences.DisableAutoLoad.toLowerCase()&&(d.IsCodeFirstCol(r.Code.CCID,r.Code.TypeID)&&I.Columns[0].Contains(I.Columns[0][i]+"Code")?r.Code.SelectedValueText=I.Tables[0][0][I.Columns[0][i]+"Code"].toString():I.Columns[0].Contains(I.Columns[0][i]+"Name")&&(r.Name.SelectedValueText=I.Tables[0][0][I.Columns[0][i]+"Name"].toString())),r.Code.CustomWhere=r.Name.CustomWhere=I.Columns[0].Contains(I.Columns[0][i]+"Group")&&!a.e.IsEmpty(I.Tables[0][0][I.Columns[0][i]+"Group"])&&Object(S.j)(I.Tables[0][0][I.Columns[0][i]+"Group"])?" lft between "+I.Tables[0][0][I.Columns[0][i]+"lft"].toString()+" and "+I.Tables[0][0][I.Columns[0][i]+"rgt"].toString():"")),I.Columns[0].Contains(I.Columns[0][i]+"Group")&&(i+=4),"break"},u=0;u<d._CCFields.length;u++){if("break"===l(u))break}}if("DEBITACCOUNT"==I.Columns[0][i].toUpperCase()&&!a.e.IsEmpty(I.Tables[0][0][I.Columns[0][i]])&&a.e.IsNum(I.Tables[0][0][I.Columns[0][i]])&&(null!=d.DebitAccount?(d.DebitAccount.SelectedValue=parseInt(I.Tables[0][0][I.Columns[0][i]]),s.a.SessionManager.Preferences.ContainsKey("DisableAutoLoad")&&"true"==s.a.SessionManager.Preferences.DisableAutoLoad.toLowerCase()&&(null!=d.DebitAccount.Code&&d.DebitAccount.Code.Visible&&I.Columns[0].Contains("DebitAccountCode")&&(d.DebitAccount.Code.SelectedValueText=I.Tables[0][0].DebitAccountCode.toString()),null!=d.DebitAccount.Name&&d.DebitAccount.Name.Visible&&(I.Columns[0].Contains("DebitAccountName")||I.Columns[0].Contains("DebitAccountname"))&&(a.e.hasprop(I.Tables[0][0],"DebitAccountName")?d.DebitAccount.Name.SelectedValueText=I.Tables[0][0].DebitAccountName.toString():a.e.hasprop(I.Tables[0][0],"DebitAccountname")&&(d.DebitAccount.Name.SelectedValueText=I.Tables[0][0].DebitAccountname.toString())))):null!=h&&d.GridDataColumns.Contains("DebitAccount_Key")&&(h.DebitAccount_Key=parseInt(I.Tables[0][0][I.Columns[0][i]]),(E=d.ColumnSource.filter((function(e){return!a.e.IsEmpty(e.ValueMember)&&"debitaccount_key"==e.ValueMember.toLowerCase()}))).length>0&&(E.length>0&&"AccountName"==E[0].DisplayMember&&I.Columns[0].Contains("DebitAccountName")?h[E[0].DisplayMember]=I.Tables[0][0].DebitAccountName.toString():E.length>0&&"AccountCode"==E[0].DisplayMember&&I.Columns[0].Contains("DebitAccountCode")&&(h[E[0].DisplayMember]=I.Tables[0][0].DebitAccountCode.toString()),E.length>1&&"AccountName"==E[E.length-1].DisplayMember&&I.Columns[0].Contains("DebitAccountName")?h[E[E.length-1].DisplayMember]=I.Tables[0][0].DebitAccountName.toString():E.length>1&&"AccountCode"==E[E.length-1].DisplayMember&&I.Columns[0].Contains("DebitAccountCode")&&(h[E[E.length-1].DisplayMember]=I.Tables[0][0].DebitAccountCode.toString())))),"accountid"==I.Columns[0][i].toLowerCase()&&!a.e.IsEmpty(I.Tables[0][0][I.Columns[0][i]])&&a.e.IsNum(I.Tables[0][0][I.Columns[0][i]])&&null!=h&&d.GridDataColumns.Contains("AccountID_Key")&&(h.AccountID_Key=parseInt(I.Tables[0][0][I.Columns[0][i]]),d.GridDataColumns.Contains("AccountCode")&&(h.AccountCode=I.Tables[0][0].AccountIDCode.toString()),d.GridDataColumns.Contains("AccountName")&&(h.AccountName=I.Tables[0][0].AccountIDName.toString())),"CREDITACCOUNT"==I.Columns[0][i].toUpperCase()&&!a.e.IsEmpty(I.Tables[0][0][I.Columns[0][i]])&&a.e.IsNum(I.Tables[0][0][I.Columns[0][i]])&&(null!=d.CreditAccount?(d.CreditAccount.SelectedValue=parseInt(I.Tables[0][0][I.Columns[0][i]]),s.a.SessionManager.Preferences.ContainsKey("DisableAutoLoad")&&"true"==s.a.SessionManager.Preferences.DisableAutoLoad.toLowerCase()&&(null!=d.CreditAccount.Code&&d.CreditAccount.Code.Visible&&I.Columns[0].Contains("CreditAccountCode")&&(d.CreditAccount.Code.SelectedValueText=I.Tables[0][0].CreditAccountCode.toString()),null!=d.CreditAccount.Name&&d.CreditAccount.Name.Visible&&I.Columns[0].Contains("CreditAccountname")&&(d.CreditAccount.Name.SelectedValueText=I.Tables[0][0].CreditAccountname.toString()))):null!=h&&d.GridDataColumns.Contains("CreditAccount_Key")&&(h.CreditAccount_Key=parseInt(I.Tables[0][0][I.Columns[0][i]]),(E=d.ColumnSource.filter((function(e){return!a.e.IsEmpty(e.ValueMember)&&"creditaccount_key"==e.ValueMember.toLowerCase()}))).length>0&&(E.length>0&&"AccountName"==E[0].DisplayMember&&I.Columns[0].Contains("CreditAccountname")?h[E[0].DisplayMember]=I.Tables[0][0].CreditAccountname.toString():E.length>0&&"AccountCode"==E[0].DisplayMember&&I.Columns[0].Contains("CreditAccountCode")&&(h[E[0].DisplayMember]=I.Tables[0][0].CreditAccountCode.toString()),E.length>1&&"AccountName"==E[E.length-1].DisplayMember&&I.Columns[0].Contains("CreditAccountname")?h[E[E.length-1].DisplayMember]=I.Tables[0][0].CreditAccountname.toString():E.length>1&&"AccountCode"==E[E.length-1].DisplayMember&&I.Columns[0].Contains("CreditAccountCode")&&(h[E[E.length-1].DisplayMember]=I.Tables[0][0].CreditAccountCode.toString())))),b&&I.Columns[0][i].toUpperCase().Contains("CCNID")&&d.GridDataColumns.Contains(I.Columns[0][i]+"_Key")){(A=d.ColumnSource.find((function(e){return null!=e.ValueMember&&e.ValueMember.toLowerCase()==I.Columns[0][i].toLowerCase()+"_key"}))).LocalRefDefaultValue=I.Tables[0][0][I.Columns[0][i]].toString(),I.Columns[0].Contains(I.Columns[0][i]+"Name")&&(A.LocalRefDefaultValueText=I.Tables[0][0][I.Columns[0][i]+"Name"].toString());for(var C=0;C<d.GridData.length;C++)a.e.IsEmpty(d.GridData[C][y])||(d.GridData[C][A.ValueMember]=I.Tables[0][0][I.Columns[0][i]].toString(),I.Columns[0].Contains(I.Columns[0][i]+"Name")&&(d.GridData[C][A.DisplayMember]=I.Tables[0][0][I.Columns[0][i]+"Name"].toString()))}if(null!=h){if(null!=p&&!p.Contains(I.Columns[0][i]))return N=i,"continue";61==m&&d.GridDataColumns.Contains("StartYear")&&d.GridDataColumns.Contains("EndYear")&&I.Columns[0].Contains("StartYear")&&I.Columns[0].Contains("ENDYear")&&(h.StartYear=I.Tables[0][0].StartYear.toString(),h.EndYear=I.Tables[0][0].ENDYear.toString());for(var g=function(e){if(d.GridDataColumns[e]==I.Columns[0][i]){if(I.Columns[0][i].toUpperCase().Contains("CCNID")&&d.GridDataColumns.Contains(I.Columns[0][i]+"_Key")){if(!a.e.IsEmpty(I.Tables[0][0][I.Columns[0][i]])&&parseInt(I.Tables[0][0][I.Columns[0][i]])>0){if(h[d.GridDataColumns[e]+"_Key"]=I.Tables[0][0][I.Columns[0][i]].toString(),null!=(A=d.ColumnSource.find((function(t){return null!=t.ValueMember&&t.ValueMember.toLowerCase()==d.GridDataColumns[e].toLowerCase()+"_key"})))&&d.IsCodeFirstCol(A.CostCenterID,A.TypeID)&&I.Columns[0].Contains(I.Columns[0][i]+"Code")?d.GridDataColumns.Contains(d.GridDataColumns[e]+"Code")?(h[d.GridDataColumns[e]]=I.Tables[0][0][I.Columns[0][i]+"Name"].toString(),h[d.GridDataColumns[e]+"Code"]=I.Tables[0][0][I.Columns[0][i]+"Code"].toString()):h[d.GridDataColumns[e]]=I.Tables[0][0][I.Columns[0][i]+"Code"].toString():h[d.GridDataColumns[e]]=I.Columns[0].Contains(I.Columns[0][i]+"Name")&&!a.e.IsEmpty(I.Tables[0][0][I.Columns[0][i]+"Name"])?I.Tables[0][0][I.Columns[0][i]+"Name"].toString():"",d.Preferences.ContainsKey("DimWiseAttachments")&&""!=d.Preferences.DimWiseAttachments&&"0"!=d.Preferences.DimWiseAttachments&&null!=A&&A.CostCenterID.toString()==d.Preferences.DimWiseAttachments&&(d.GridDataObj.updateRow(h),1==h.Table.filter(I.Columns[0][i]+"_Key="+I.Tables[0][0][I.Columns[0][i]].toString()).length&&d.ReferenceCallBack.IsSubscribed)){if(null!=(V=d.ColumnSource.find((function(e){return e.DisplayMember.toLowerCase()==I.Columns[0][i].toLowerCase()})))){var n=d.GetFiles(V.CostCenterID,parseInt(I.Tables[0][0][I.Columns[0][i]]));n.Tables.length>0&&n.Tables[0].length>0&&d.ReferenceCallBack.Call({ReferenceTable:n.Tables[0],ReferenceEditTable:null,DBColumnName:"Attachments~"+I.Tables[0][0][I.Columns[0][i]+"Name"].toString(),ccid:0,dr:null})}}parseInt(h[d.GridDataColumns[e]+"_Key"])>0&&null!=A&&((d.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&e.LocalReference==A.ID})).length>0||d.DefaultBasedOn.ContainsKey(A.CostCenterID.toString()))&&d.GetLinkReferenceData(parseInt(A.ID),t,parseInt(h[d.GridDataColumns[e]+"_Key"]),o,"",A.CostCenterID,h),f&&d.PriceTaxcc.ContainsKey(A.CostCenterID)&&d.ReferenceCallBack.IsSubscribed&&d.ReferenceCallBack.Call({ReferenceTable:null,ReferenceEditTable:null,DBColumnName:"ReEvaluate",ccid:A.CostCenterID,dr:h}))}I.Columns[0].Contains(I.Columns[0][i]+"Group")&&!a.e.IsEmpty(I.Tables[0][0][I.Columns[0][i]+"Group"])&&Object(S.j)(I.Tables[0][0][I.Columns[0][i]+"Group"])}else a.e.IsEmpty(I.Tables[0][0][I.Columns[0][i]])||(d.GridDataObj.DataTypes.Double.Contains(d.GridDataColumns[e])&&a.e.IsNum(I.Tables[0][0][I.Columns[0][i]])?h[d.GridDataColumns[e]]=I.Tables[0][0][I.Columns[0][i]].toString():d.GridDataObj.DataTypes.Double.Contains(d.GridDataColumns[e])||d.GridDataColumns.Contains(d.GridDataColumns[e]+"_Key")||(h[d.GridDataColumns[e]]=I.Columns[0].Contains(I.Columns[0][i]+"Name")?I.Tables[0][0][I.Columns[0][i]+"Name"].toString():I.Tables[0][0][I.Columns[0][i]].toString()),d.GridDataColumns.Contains(d.GridDataColumns[e]+"_Key")&&(d.GridDataObj.DataTypes.Date.Contains(d.GridDataColumns[e]+"_Key")?a.e.isValidDate(I.Tables[0][0][I.Columns[0][i]])&&("DATETIME"==(V=d.ColumnSource.find((function(e){return e.DisplayMember.toLowerCase()==I.Columns[0][i].toLowerCase()}))).DataType?(h[V.DisplayMember]=new Date(I.Tables[0][0][I.Columns[0][i]]).ToString(s.a.SessionManager.Preferences["Date Format"]+" hh:mm:ss tt"),h[V.DisplayMember+"_Key"]=new Date(I.Tables[0][0][I.Columns[0][i]])):"TIME"==V.DataType?(h[V.DisplayMember]=new Date(I.Tables[0][0][I.Columns[0][i]]).ToString("hh:mm:ss tt"),h[V.DisplayMember+"_Key"]=new Date(I.Tables[0][0][I.Columns[0][i]])):"Time2"==V.DataType?(h[V.DisplayMember]=new Date(I.Tables[0][0][I.Columns[0][i]]).ToString("HH:mm"),h[V.DisplayMember+"_Key"]=new Date(I.Tables[0][0][I.Columns[0][i]]).ToString("dd/MMM/yyyy HH:mm")):(h[d.GridDataColumns[e]+"_Key"]=new Date(I.Tables[0][0][I.Columns[0][i]]),h[d.GridDataColumns[e]]=new Date(I.Tables[0][0][I.Columns[0][i]]).ToString(s.a.SessionManager.Preferences["Date Format"]))):(h[d.GridDataColumns[e]+"_Key"]=I.Tables[0][0][I.Columns[0][i]].toString(),(A=d.ColumnSource.find((function(t){return null!=t.ValueMember&&t.ValueMember.toLowerCase()==d.GridDataColumns[e].toLowerCase()+"_key"})))&&d.IsCodeFirstCol(A.CostCenterID,A.TypeID)&&I.Columns[0].Contains(I.Columns[0][i]+"Code")?h[d.GridDataColumns[e]]=I.Tables[0][0][I.Columns[0][i]+"Code"].toString():I.Columns[0].Contains(I.Columns[0][i]+"Name")&&!a.e.IsEmpty(I.Tables[0][0][I.Columns[0][i]+"Name"])&&(h[d.GridDataColumns[e]]=I.Tables[0][0][I.Columns[0][i]+"Name"].toString()))));d.GridDataObj.updateRow(h)}},T=0;T<d.GridDataColumns.length;T++)g(T)}N=i},N=0;N<I.Columns[0].length;N++){var v,E,V,A;L(N)}if(2==m&&(I.Columns[0].Contains("DebitDays")&&(this.IsPurchase&&null!=this.CreditAccount&&this.CreditAccount.DBColumnID==e||!this.IsPurchase&&null!=this.DebitAccount&&this.DebitAccount.DBColumnID==e)&&(this.IsInventory&&("true"==s.a.SessionManager.Preferences.EnableLocationWise.toLowerCase()&&"true"==s.a.SessionManager.Preferences["LW CreditDebit"].toLowerCase()||"true"==s.a.SessionManager.Preferences.EnableDivisionWise.toLowerCase()&&"true"==s.a.SessionManager.Preferences["DW CreditDebit"].toLowerCase()||""!=s.a.SessionManager.Preferences.DimWiseCreditDebit&&parseInt(s.a.SessionManager.Preferences.DimWiseCreditDebit)>5e4)?this.GetDueDate(this.IsPurchase&&null!=this.CreditAccount?this.CreditAccount.SelectedValue:this.DebitAccount.SelectedValue,o,this.IsPurchase):this.GetDueDate_Table(I.Tables[0],o,this.IsPurchase)),this.GetLCTRLimits()),(this.Preferences.ContainsKey("PrimaryAddress")&&Object(S.j)(this.Preferences.PrimaryAddress)&&Object(S.j)(this.Preferences.PrimaryAddress)||this.Preferences.ContainsKey("BillingAddress")&&Object(S.j)(this.Preferences.BillingAddress)&&Object(S.j)(this.Preferences.BillingAddress)||this.Preferences.ContainsKey("ShippingAddress")&&Object(S.j)(this.Preferences.ShippingAddress)&&Object(S.j)(this.Preferences.ShippingAddress))&&2==m&&this.IsInventory&&n>0&&null!=I&&I.Tables.length>1&&I.Tables[1].length>0&&this.ReferenceCallBack.IsSubscribed){var F=null;("DebitAccount"==i||"CreditAccount"==i&&this.IsPurchase)&&this.ReferenceCallBack.Call({ReferenceTable:I.Tables[1],ReferenceEditTable:null,DBColumnName:i,ccid:0,dr:F})}if(2==m&&n>0&&null!=I&&I.Tables.length>5&&I.Tables[5].length>0&&this.Preferences.ContainsKey("Account-wiseAttachments")&&""!=this.Preferences["Account-wiseAttachments"]&&Object(S.j)(this.Preferences["Account-wiseAttachments"])&&(this.IsInventory&&(this.IsPurchase&&null!=this.CreditAccount&&this.CreditAccount.DBColumnID==e||!this.IsPurchase&&null!=this.DebitAccount&&this.DebitAccount.DBColumnID==e)||!this.IsInventory)&&this.ReferenceCallBack.IsSubscribed){var R="";if(null!=this.CreditAccount&&this.CreditAccount.DBColumnID==e)R=null!=this.CreditAccount.Name?this.CreditAccount.Name.Text:null!=this.CreditAccount.Code?this.CreditAccount.Code.Text:"";else if(null!=this.DebitAccount&&this.DebitAccount.DBColumnID==e)R=null!=this.DebitAccount.Name?this.DebitAccount.Name.Text:null!=this.DebitAccount.Code?this.DebitAccount.Code.Text:"";else if(null!=h&&!this.IsInventory){var G=this.ColumnSource.find((function(t){return t.ID==e.toString()}));G&&this.GridDataColumns.Contains(G.DisplayMember)&&(R=h[G.DisplayMember].toString())}this.ReferenceCallBack.Call({ReferenceTable:I.Tables[5],ReferenceEditTable:null,DBColumnName:"Attachments~"+R,ccid:0,dr:null})}if(2==m&&this.Preferences.ContainsKey("Use Account-wise Currency")&&""!=this.Preferences["Use Account-wise Currency"]&&Object(S.j)(this.Preferences["Use Account-wise Currency"])&&(this.IsInventory&&(this.IsPurchase&&null!=this.CreditAccount&&this.CreditAccount.DBColumnID==e||!this.IsPurchase&&null!=this.DebitAccount&&this.DebitAccount.DBColumnID==e)||!this.IsInventory&&(null!=this.CreditAccount&&this.CreditAccount.DBColumnID==e||null!=this.DebitAccount&&this.DebitAccount.DBColumnID==e||17==this.DocumentType))&&null!=I&&I.Tables.length>2&&I.Columns[2].Contains("CurrencyID")&&I.Tables[2].length>0&&parseInt(I.Tables[2][0].CurrencyID)>0){var B=parseInt(I.Tables[2][0].CurrencyID);17==this.DocumentType?(this.GridDataColumns.Contains("CurrencyID")&&(h.CurrencyID_Key=B),I.Tables.length>3&&I.Tables[3].length>0&&I.Columns[3].Contains("Name")&&!a.e.IsEmpty(I.Tables[3][0].Name)&&(h.CurrencyID=I.Tables[3][0].Name.toString()),this.GridDataColumns.Contains("ExchangeRate")&&I.Tables.length>3&&I.Tables[3].length>0&&I.Columns[3].Contains("Rate")&&!a.e.IsEmpty(I.Tables[3][0].Rate)&&(h.ExchangeRate=I.Tables[3][0].Rate.toString())):this.HeaderFields.forEach((function(e){e instanceof C.b&&(e.Currency.SelectedValue=B.toString(),I.Tables.length>3&&I.Tables[3].length>0&&I.Columns[3].Contains("Rate")&&!a.e.IsEmpty(I.Tables[3][0].Rate)&&(e.ExchangeRate.Text=I.Tables[3][0].Rate.toString()))}))}if(3==m&&null!=I&&I.Tables.length>2||2==m&&null!=I&&I.Tables.length>6)!function(){var e=2;for(2==m&&(e=6);e<I.Tables.length;e++)!I.Columns[e].Contains("ErrorMessage")&&I.Tables[e].length>0&&I.Columns[e].length>0&&function(){var t=I.Columns[e][0];null!=h&&d.GridDataColumns.Contains(t)&&(t.toLowerCase().Contains("dcnum")?a.e.IsNum(I.Tables[e][0][t])&&(h[t]=I.Tables[e][0][t].toString()):(g=d.ColumnSource.find((function(e){return null!=e.DisplayMember&&e.DisplayMember.toLowerCase()==t.toLowerCase()})))&&"DATE"==g.DataType?!a.e.IsEmpty(I.Tables[e][0][t])&&a.e.isValidDate(I.Tables[e][0][t])&&(h[t]=new Date(I.Tables[e][0][t]).ToString(s.a.SessionManager.Preferences["Date Format"]),h[t+"_Key"]=new Date(I.Tables[e][0][t])):"FLOAT"==g.DataType?a.e.IsNum(I.Tables[e][0][t])&&(h[t]=I.Tables[e][0][t].toString()):h[t]=I.Tables[e][0][t].toString()),t.toLowerCase().Contains("dcalpha")&&d._TextFields.forEach((function(n){n.DBColumnName==t&&(n instanceof r.d?n.Text=I.Tables[e][0][t].toString():n instanceof l.c&&!a.e.IsEmpty(I.Tables[e][0][t])&&a.e.isValidDate(I.Tables[e][0][t])&&(n.Date=new Date(I.Tables[e][0][t])))}))}()}();else if(m>5e4&&null!=I){if(this.Preferences.ContainsKey("DimWiseCurrency")&&"true"==this.Preferences.DimWiseCurrency.toLowerCase()&&this.Preferences.ContainsKey("CurrencyDim")&&this.Preferences.CurrencyDim==m.toString()&&I.Tables.length>1&&I.Columns[1].Contains("CurrencyID")&&I.Tables[1].length>0&&parseInt(I.Tables[1][0].CurrencyID)>0)for(var O=0;O<this.HeaderFields.length;O++){var k=this.HeaderFields[O];if(k instanceof C.b){k.Currency.SelectedValue=I.Tables[1][0].CurrencyID.toString(),this.SetCurrDefault(m,n,k),I.Tables.length>2&&I.Tables[2].length>0&&I.Columns[2].Contains("Rate")&&!a.e.IsEmpty(I.Tables[2][0].Rate)&&(k.ExchangeRate.Text=I.Tables[2][0].Rate.toString());break}}null!=h&&I.Tables.length>3&&!I.Columns[3].Contains("voucherno")&&I.Columns[3].Contains("ProductID")&&I.Tables[3].length>0&&this.GridDataColumns.Contains("ProductID_Key")&&h.ProductID_Key.toString()!=I.Tables[3][0].ProductID.toString()&&(h.ProductID_Key=I.Tables[3][0].ProductID.toString(),this.GridDataColumns.Contains("Productcode")&&I.Tables[3].Columns.Contains("ProductCode")&&(h.Productcode=I.Tables[3][0].ProductCode.toString()),this.GridDataColumns.Contains("ProductName")&&I.Tables[3].Columns.Contains("ProductName")&&(h.ProductName=I.Tables[3][0].ProductName.toString()),this.ReferenceCallBack.Call({ReferenceTable:null,ReferenceEditTable:null,DBColumnName:"",ccid:0,dr:h}))}m>5e4&&null!=this.DueDate&&null!=this.DueDate.Formula&&""!=this.DueDate.Formula&&this.ReferenceCallBack.Call({ReferenceTable:null,ReferenceEditTable:null,DBColumnName:"Formula",ccid:0,dr:null}),56!=this.DocumentType&&58!=this.DocumentType&&61!=this.DocumentType&&65!=this.DocumentType&&71!=this.DocumentType&&72!=this.DocumentType&&73!=this.DocumentType&&94!=this.DocumentType&&78!=this.DocumentType&&68!=this.DocumentType&&69!=this.DocumentType&&80!=this.DocumentType||this.ReferenceCallBack.Call({ReferenceTable:null,ReferenceEditTable:null,DBColumnName:"Dimension",ccid:0,dr:null}),38==this.DocumentType||39==this.DocumentType?this.GridDataObj.refreshDatawithIDs():this.GridDataObj.refreshDataView()}}}},{key:"SetCurrDefault",value:function(e,t,n){50001==e?(this.DivisionID>0&&this.DivisionID==t||s.a.SessionManager.DivisionID>0&&s.a.SessionManager.DivisionID==t||this.CostCentersValues.ContainsKey("50001"))&&(n.DefaultValue=n.Currency.SelectedValue):"50002"==e.toString()?(this.LocationID>0&&this.LocationID==t||s.a.SessionManager.LocationID>0&&s.a.SessionManager.LocationID==t||this.CostCentersValues.ContainsKey("50002"))&&(n.DefaultValue=n.Currency.SelectedValue):this.CostCentersValues.ContainsKey(e.toString())&&(n.DefaultValue=n.Currency.SelectedValue)}},{key:"IsCodeFirstCol",value:function(e,t){var n,a;return n=null!=t&&t>0?t:1,!!((a=s.a.SessionManager.ListViewDef.Columns[0].Contains("ColumnType")?s.a.SessionManager.ListViewDef.Tables[0].filter((function(t){return t.CostCenterID==e&&t.ListViewTypeID==n&&1==t.ColumnType})):s.a.SessionManager.ListViewDef.Tables[0].filter((function(t){return t.CostCenterID==e&&t.ListViewTypeID==n}))).length>0&&a[0].SysColumnName.toString().toLowerCase().Contains("code"))}},{key:"FillBudgetDims",value:function(e,t,n,o){if(this.Preferences.ContainsKey("BudgetDims")&&""!=this.Preferences.BudgetDims){for(var i="",r="",l=0,u=this.Preferences.BudgetDims.split(","),c=0;c<u.length;c++)(l=a.e.Int(u[c].Replace("dcCCNID","")))>0&&(l+=5e4,i+=e?"  ,budg.CCNID"+(l-5e4).toString()+" as dcccnid"+(l-5e4).toString()+"_Key,CC"+c.toString()+".Code as dcccnid"+(l-5e4).toString()+"Code,CC"+c.toString()+".Name as dcccnid"+(l-5e4).toString():"  ,budg.CCNID"+(l-5e4).toString()+" as TOdcccnid"+(l-5e4).toString()+"_Key,CC"+c.toString()+".Code as TOdcccnid"+(l-5e4).toString()+"Code,CC"+c.toString()+".Name as TOdcccnid"+(l-5e4).toString(),r+=" LEFT JOIN "+this.GetTableName(l)+" CC"+c.toString()+"  WITH(NOLOCK)  on  CC"+c.toString()+".NodeID=budg.CCNID"+(l-5e4).toString()+" ");var D=s.a.common.GetDataSet("DOC051",JSON.stringify(i+" from COM_BudgetAlloc  budg WITH(NOLOCK) "+r+" where budg.BudgetDefID="+t+" and budg.AccountID="+o));if(null!=D&&D.Tables.length>0&&D.Columns[0].Contains("BudgetDefID")&&D.Tables[0].length>0)return D}return null}},{key:"GetLinkDocDetails",value:function(e,t){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Logger.InfoLog("VoucherGenerator:: Inside GetLinkDetails");var l=[];l.push(e),l.push(t),l.push(this.DocID),l.push(1==this.DocumentType||2==this.DocumentType||6==this.DocumentType||39==this.DocumentType||26==this.DocumentType||27==this.DocumentType||3==this.DocumentType||4==this.DocumentType||25==this.DocumentType||13==this.DocumentType?null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0?this.CreditAccount.SelectedValue:0:null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0?this.DebitAccount.SelectedValue:0);var u="",D=0;if(this.Preferences.ContainsKey("DimensionWise")&&""!=this.Preferences.DimensionWise&&this.Preferences.DimensionWise.split(",").forEach((function(e){if(a.e.IsNum(e)&&parseInt(e)>0)if(3==(D=parseInt(e))){var t=n._TextFields.find((function(e){return e instanceof c.b&&3==e.CCID}));t&&(u+=null!=t.SelectedValue&&t.SelectedValue>0?" and "+t.DBColumnName+"="+t.SelectedValue.toString():" and "+t.DBColumnName+"=0")}else if(D>5e4){var s=n._CCFields.find((function(e){return e instanceof c.b&&e.CCID==D}));s&&(u+=null!=s.SelectedValue&&s.SelectedValue>0?" and "+s.DBColumnName+"="+s.SelectedValue.toString():" and "+s.DBColumnName+"=0")}})),l.push(u),this.Preferences.ContainsKey("SearchProduct")&&Object(S.j)(this.Preferences.SearchProduct)){alert("Voucher Generator: SearchProduct list");var C=this.ColumnSource.find((function(e){return null!=e.ValueMember&&"productid_key"==e.ValueMember.toString().toLowerCase()&&"ProductCode"==e.DisplayMember})),m=new g.a;m.CostCenterID=3,m.strPrimaryKey="ProductID",C&&(m.TypeID=C.TypeID),m.FillSearchDetails(new o.a,!1),l.push(m.IgnoreSpecial),l.push(m.strJoin),l.push(m.SearchWhere)}else l.push(0),l.push(""),l.push("");return this.Preferences.ContainsKey("FilteronList")&&Object(S.j)(this.Preferences.FilteronList)?(C=this.ColumnSource.find((function(e){return null!=e.ValueMember&&"productid_key"==e.ValueMember.toString().toLowerCase()&&"ProductCode"==e.DisplayMember})),l.push(C?C.TypeID:0)):l.push(0),l.push(i),l.push(s.a.SessionManager.UserID),l.push(s.a.SessionManager.LanguageID),s.a.document.GetLinkDocDetails(JSON.stringify(l),r)}},{key:"GetjobDetails",value:function(e,t,n,a){var o=[];return o.push(e),o.push(this.DocID),o.push(t),o.push(n),o.push(this.CostCenterID),o.push(s.a.SessionManager.UserID),o.push(s.a.SessionManager.LanguageID),a?s.a.document.GetBomDetails(o):s.a.document.GetjobDetails(o)}},{key:"GetBatchDetails",value:function(e){var t=[];return t.push(e),t.push(s.a.SessionManager.RoleID),t.push(s.a.SessionManager.LanguageID),s.a.document.GetBatchDetails(t)}},{key:"GetQtyAdjustmentDetails",value:function(e){var t=[];return t.push(a.e.IsEmpty(e)?"0":e),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.document.GetQtyAdjustmentDetails(t)}},{key:"GetConversion",value:function(e){var t=0,n=s.a.common.GetDataSet("DOC033",e);return null!=n&&n.Tables.length>0&&n.Columns[0].Contains("Conversion")&&n.Tables[0].length>0&&!a.e.IsEmpty(n.Tables[0][0].Conversion)&&(t=parseFloat(n.Tables[0][0].Conversion)),Logger.InfoLog("VoucherGenerator:: Exiting GetLinkDetails"),t}},{key:"getProfileBasedon",value:function(e,t,n,a){Logger.InfoLog("VoucherGenerator:: Inside getProfileBasedon");var o=[];o.push(e),o.push(t),o.push(n),o.push(a),o.push(s.a.SessionManager.UserID),o.push(s.a.SessionManager.LanguageID);var i=s.a.document.getProfileBasedon(o);return Logger.InfoLog("VoucherGenerator:: Exiting getProfileBasedon"),i}},{key:"GetBatch",value:function(e,t,n){n.BatchID=0;var o=[];o.push(e),o.push(t);var i=s.a.document.IsBatchExists(o);return null!=i&&i.Tables.length>1&&i.Tables[1].length>0&&i.Columns[1].Contains("BatchId")&&!a.e.IsEmpty(i.Tables[1][0].BatchId)&&(n.BatchID=parseInt(i.Tables[1][0].BatchId)),i}},{key:"GetPosVoucherDetails",value:function(e,t,n){Logger.InfoLog("VoucherGenerator:: Inside GetPosVoucherDetails");var a=[];a.push(e),a.push(t),a.push(s.a.SessionManager.UserID),a.push(s.a.SessionManager.LanguageID);var o=s.a.document.GetPosVoucherDetails(a);return Logger.InfoLog("VoucherGenerator:: Exiting GetPosVoucherDetails"),o}},{key:"GetPDCInstallmentDetails",value:function(){return s.a.common.GetDataSet3("DOC032",this.DocID.toString(),this.PostVoucherDocID.toString())}},{key:"getmachinePref",value:function(){return s.a.common.GetDataSet("DOC059","")}},{key:"GetProdTestCaseDetails",value:function(e){var t=[];return t.push(e),t.push(this.CostCenterID),t.push(this.GetTableName(parseInt(s.a.SessionManager.Preferences.TestCaseDimension))),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.document.GetTestCases(t)}},{key:"GetProdVWDetails",value:function(e){return s.a.common.GetDataSet3("DOC028",e,s.a.SessionManager.Preferences.PackDimension)}},{key:"GetPackDetails",value:function(e){Logger.InfoLog("VoucherGenerator:: Inside GetPackDetails");var t=s.a.common.GetDataSet3("DOC006",s.a.SessionManager.Preferences.PackDimension,e);return Logger.InfoLog("VoucherGenerator:: Exiting GetPackDetails"),t}},{key:"GetPackInfo",value:function(e,t){return s.a.common.GetDataSet3("DOC029",e,t)}},{key:"GetinvBinDetails",value:function(e,t,n){for(var o="",i=0;i<this.GridData.length;i++)a.e.IsEmpty(this.GridData[i].DocDetailsID)||"0"==this.GridData[i].DocDetailsID.toString()||(o+=this.GridData[i].DocDetailsID.toString()+",");for(var r="",l=0;l<this.GridData.length;l++)a.e.IsEmpty(this.GridData[l].ProductID_Key)||this.GridData[l].ProductID_Key.toString()!=t||a.e.IsEmpty(this.GridData[l].LinkedInvDocDetailsID)||"0"==this.GridData[l].LinkedInvDocDetailsID.toString()||(a.e.IsEmpty(r)||(r+=","),r+=this.GridData[l].LinkedInvDocDetailsID.toString());var u=[];return u.push(r),u.push(n),u.push(e),u.push(t),u.push(o),u.push(a.e.String(s.a.SessionManager.Preferences.HoldResCancelledDocs)),u.push(a.e.String(this.Preferences.CopyBinsFromBoe)),u.push(a.e.String(this.Preferences.BinsDimension)),u.push(a.e.String(this.Preferences.ConsolidatedBins)),u.push(a.e.String(this.Preferences.ExcludeHoldBins)),s.a.common.GetDataSet("DOC041",JSON.stringify(u))}},{key:"GetBOEs",value:function(e,t,n){var o=[];return o.push(t),o.push(e.ToString("dd/MMM/yyyy")),o.push(a.e.IsEmpty(n)?"0":n),o.push(s.a.SessionManager.UserID),o.push(s.a.SessionManager.LanguageID),s.a.document.GetBOEs(o)}},{key:"GetQtyWhere",value:function(e,t){var n,o=0,i="";return s.a.SessionManager.Preferences.ContainsKey("Maintain Dimensionwise stock")&&a.e.Int(s.a.SessionManager.Preferences["Maintain Dimensionwise stock"])>0&&(o=a.e.Int(s.a.SessionManager.Preferences["Maintain Dimensionwise stock"]),this.GridDataColumns.Contains("dcCCNID"+(o-5e4)+"_Key")?null==e||a.e.IsEmpty(e["dcCCNID"+(o-5e4)+"_Key"])||(i+=" "+t+"dcCCNID"+(o-5e4).toString()+"="+e["dcCCNID"+(o-5e4)+"_Key"].toString()+" and "):((n=this._CCFields.find((function(e){return e.DBColumnName.toLowerCase()=="dcccnid"+(o-5e4)})))&&n instanceof c.b&&n.SelectedValue>0||n&&n instanceof D.a&&n.SelectedValue>0)&&(i+=" "+t+"dcCCNID"+(o-5e4).toString()+"="+n.SelectedValue+" and ")),s.a.SessionManager.Preferences.ContainsKey("Location Stock")&&Object(S.j)(s.a.SessionManager.Preferences["Location Stock"])&&(this.GridDataColumns.Contains("dcCCNID2_Key")?null==e||a.e.IsEmpty(e.dcCCNID2_Key)||(i+=" "+t+"dcCCNID2="+e.dcCCNID2_Key.toString()+" and "):(n=this._CCFields.find((function(e){return"dcccnid2"==e.DBColumnName.toLowerCase()})))&&n instanceof c.b||n&&n instanceof D.a?n.SelectedValue>0&&(i+=" "+t+"dcCCNID2="+n.SelectedValue+" and "):this.LocationID>0?i+=" "+t+"dcCCNID2="+this.LocationID+" and ":s.a.SessionManager.LocationID>0&&(i+=" "+t+"dcCCNID2="+s.a.SessionManager.LocationID+" and ")),!1,s.a.SessionManager.Preferences.ContainsKey("Division Stock")&&Object(S.j)(s.a.SessionManager.Preferences["Division Stock"])&&(this.GridDataColumns.Contains("dcCCNID1_Key")?null==e||a.e.IsEmpty(e.dcCCNID1_Key)||(i+=" "+t+"dcCCNID1="+e.dcCCNID1_Key.toString()+" and "):(n=this._CCFields.find((function(e){return"dcccnid1"==e.DBColumnName.toLowerCase()})))&&n instanceof c.b||n&&n instanceof D.a?n.SelectedValue>0&&(i+=" "+t+"dcCCNID1="+n.SelectedValue+" and "):this.DivisionID>0?i+=" "+t+"dcCCNID1="+this.DivisionID+" and ":s.a.SessionManager.DivisionID>0&&(i+=" "+t+"dcCCNID1="+s.a.SessionManager.DivisionID+" and ")),i}},{key:"GetinvDetails",value:function(e,t,n,o,i,r){var l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",c="2";if(s.a.SessionManager.Preferences.ContainsKey("DecimalsinQty")&&!a.e.IsEmpty(s.a.SessionManager.Preferences.DecimalsinQty)&&(c=s.a.SessionManager.Preferences.DecimalsinQty),a.e.IsEmpty(t)&&!l)return null;var D=[],C="",m="",h="";if(""==e){m=this.GetQtyWhere(null,"acc."),a.e.IsEmpty(m)||(m="and "+m.Remove(m.length-5,4));for(var d=0;d<this.GridData.length;d++)a.e.IsEmpty(this.GridData[d].DocDetailsID)||"0"==this.GridData[d].DocDetailsID.toString()||(h+=this.GridData[d].DocDetailsID.toString()+",");if(this.Preferences.ContainsKey("ClubBoe")&&"True"==this.Preferences.ClubBoe&&!r){h="",i="";for(var p=0;p<this.GridData.length;p++)a.e.IsEmpty(this.GridData[p].ProductID_Key)||this.GridData[p].ProductID_Key.toString()!=n||a.e.IsEmpty(this.GridData[p].LinkedInvDocDetailsID)||"0"==this.GridData[p].LinkedInvDocDetailsID.toString()||(i+=this.GridData[p].LinkedInvDocDetailsID.toString()+",");""!=i&&(i=i.substr(0,i.length-1))}}else C=" and a.IsQtyIgnored=0 and a.VoucherType=1 and a.InvDocDetailsID IN("+t+") ";return D.push(e),D.push(C),D.push(t),D.push(n),D.push(o),D.push(i),D.push(r),D.push(l),D.push(u),D.push(m),D.push(h),D.push(this.DocDate.Date.ToString("dd/MMM/yyyy")),D.push(a.e.String(s.a.SessionManager.Preferences.HoldResCancelledDocs)),D.push(a.e.String(s.a.SessionManager.Preferences.BOEStartDate)),D.push(a.e.String(this.Preferences.ExcludeHoldBins)),D.push(a.e.String(this.Preferences.CopyBinsFromBoe)),D.push(a.e.String(this.Preferences.BinsDimension)),D.push(a.e.String(this.Preferences.ConsolidatedBins)),D.push(c),s.a.common.GetDataSet("DOC042",JSON.stringify(D))}},{key:"GetProductByStockCode",value:function(e){var t=[];return t.push(e),""!=s.a.SessionManager.Preferences.POSItemCodeDimension?(t.push(this.GetTableName(parseInt(s.a.SessionManager.Preferences.POSItemCodeDimension))),t.push(parseInt(s.a.SessionManager.Preferences.POSItemCodeDimension))):(t.push(""),t.push(0)),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.document.GetProductByStockCode(t)}},{key:"GetProductByExternFunc",value:function(e,t,n,o){var i=[];i.push(e),i.push(this.GetTableName(parseInt(""==s.a.SessionManager.Preferences.POSItemCodeDimension?"0":s.a.SessionManager.Preferences.POSItemCodeDimension))),i.push(parseInt(""==s.a.SessionManager.Preferences.POSItemCodeDimension?"0":s.a.SessionManager.Preferences.POSItemCodeDimension)),i.push(t);var r=this.Data.Tables[0].filter((function(e){return 14==e.Mode}));if(r.length>0&&!a.e.IsEmpty(r[0].IpParams))for(var l=r[0].IpParams.toString().split(","),u=0;u<l.length;u++)""!=l[u]&&i.push(this.GetValueBYCOLID(l[u],o));return i.push(s.a.SessionManager.UserID),i.push(s.a.SessionManager.LanguageID),s.a.document.GetData(JSON.stringify(i),n)}},{key:"SaveBatch",value:function(e,t,n,a,o,i,r,l,u,c){var D=[];return D.push(0),D.push(0),D.push(e),D.push(t.ToString("dd/MMM/yyyy")),D.push(n.ToString("dd/MMM/yyyy")),D.push(o),D.push(i),D.push(r),D.push(parseInt(l)),D.push(a),D.push(0),D.push(0),D.push(u),D.push(""),D.push(c),D.push(""),D.push(""),D.push(0),D.push(s.a.SessionManager.CompanyGUID),D.push(""),D.push(s.a.SessionManager.UserName),D.push(s.a.SessionManager.UserID),D.push(s.a.SessionManager.LanguageID),s.a.inventory.SetQuickBatch(D).RetValue}},{key:"GetProductwiseBins",value:function(e,t,n,o,i,r,l,u,c,D,C,m){var h=[];if(h.push(e),h.push(t),h.push(o.ToString("dd/MMM/yyyy")),h.push(n),s.a.SessionManager.Preferences.ContainsKey("DimensionwiseBins")&&""!=s.a.SessionManager.Preferences.DimensionwiseBins.toString()?(h.push(i),h.push(r)):(h.push(0),h.push(0)),this.Preferences.ContainsKey("BinFilterDim")&&""!=this.Preferences.BinFilterDim.toString()?(h.push(l),h.push(u)):(h.push(0),h.push(0)),h.push(m),h.push(D),h.push(C),c>0){for(var d="",p=0;p<this.GridData.length;p++)a.e.IsEmpty(this.GridData[p].ProductID_Key)||this.GridData[p].ProductID_Key.toString()!=e.toString()||a.e.IsEmpty(this.GridData[p].LinkedInvDocDetailsID)||"0"==this.GridData[p].LinkedInvDocDetailsID.toString()||(a.e.IsEmpty(d)||(d+=","),d+=this.GridData[p].LinkedInvDocDetailsID.toString());h.push(d)}else h.push("");return h.push(this.CostCenterID),h.push(s.a.SessionManager.UserID),h.push(s.a.SessionManager.RoleID),h.push(s.a.SessionManager.LanguageID),s.a.document.GetProductwiseBins(h)}},{key:"GetProductsinBin",value:function(e){return s.a.common.GetDataSet("DOC030",e)}},{key:"GetProductwiseBatches",value:function(e,t,n,o,i,r){var l=[];if(l.push(e),l.push(t),l.push(this.DocID),l.push(n),l.push(this.DocDate.Date.ToString("dd/MMM/yyyy")),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&Object(S.j)(s.a.SessionManager.Preferences.EnableDivisionWise)&&s.a.SessionManager.Preferences.ContainsKey("DW Batches")&&Object(S.j)(s.a.SessionManager.Preferences["DW Batches"])?l.push(this.DivisionID>0?this.DivisionID:s.a.SessionManager.DivisionID):l.push(0),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&Object(S.j)(s.a.SessionManager.Preferences.EnableLocationWise)&&s.a.SessionManager.Preferences.ContainsKey("LW Batches")&&Object(S.j)(s.a.SessionManager.Preferences["LW Batches"])?l.push(this.LocationID>0?this.LocationID:s.a.SessionManager.LocationID):l.push(0),l.push(this.CostCenterID),s.a.SessionManager.Preferences.ContainsKey("Maintain Dimensionwise Batches")&&""!=s.a.SessionManager.Preferences["Maintain Dimensionwise Batches"].toString()){var u,D=!1;if((u=a.e.Int(s.a.SessionManager.Preferences["Maintain Dimensionwise Batches"]))>0){for(var C=0;C<this._CCFields.length;C++){var m=this._CCFields[C];if(m instanceof c.b&&m.CCID==u){l.push(m.SelectedValue),D=!0;break}}D||null!=o&&u>5e4&&this.GridDataColumns.Contains("dcCCNID"+(u-5e4).toString()+"_Key")&&!a.e.IsEmpty(o["dcCCNID"+(u-5e4).toString()+"_Key"])&&(D=!0,l.push(o["dcCCNID"+(u-5e4).toString()+"_Key"].toString())),r&&l.push(i)}D||l.push(-1)}else l.push(-1);if(this.Preferences.ContainsKey("BatchFilterDim")&&""!=this.Preferences.BatchFilterDim.toString()){var h=a.e.Int(this.Preferences.BatchFilterDim),d=!1;if(h>0){for(var p=0;p<this._CCFields.length;p++){var f=this._CCFields[p];if(f instanceof c.b&&f.CCID==h){l.push(f.SelectedValue>0?f.SelectedValue:1),d=!0;break}}d||null!=o&&h>5e4&&this.GridDataColumns.Contains("dcCCNID"+(h-5e4).toString()+"_Key")&&(d=!0,a.e.IsEmpty(o["dcCCNID"+(h-5e4).toString()+"_Key"])?l.push(1):l.push(o["dcCCNID"+(h-5e4).toString()+"_Key"].toString()))}d||l.push(-1)}else l.push(-1);return l.push(s.a.SessionManager.UserID),l.push(s.a.SessionManager.RoleID),l.push(s.a.SessionManager.LanguageID),s.a.document.GetTempBatches(l)}},{key:"GetBillwiseNonAccDetails",value:function(e,t){return s.a.document.GetBillwiseNonAccDetails(e,t)}},{key:"GetBillwiseCCDetails",value:function(e,t,n){return s.a.document.GetBillwiseCCDetails(e,t,n)}},{key:"GetChequeReturnCCDetails",value:function(e,t,n){return s.a.document.GetChequeReturnCCDetails(e,t,n)}},{key:"PostBillWiseDetails",value:function(e,t,n,o,i,r,l,u){Logger.InfoLog("VoucherGenerator:: Inside PostBillWiseDetails"),u.RetVal=0;var c=[];c.push(e),c.push(t),c.push(this.VoucherNo),c.push(o),c.push(i.ToString("dd/MMM/yyyy")),c.push(this.CostCenterID),c.push(n),c.push(r),c.push(a.e.IsEmpty(l)?"":l),c.push(s.a.SessionManager.CompanyGUID),c.push(s.a.SessionManager.UserName),c.push(s.a.SessionManager.UserID),c.push(s.a.SessionManager.LanguageID);var D=s.a.document.PostBillWiseDetails(c);return u.RetVal=D.RetValue,Logger.InfoLog("VoucherGenerator:: Exiting PostBillWiseDetails"),D.Message}},{key:"GetBillWiseDetails",value:function(e,t,n,o,i,r,l){var u=this,D=arguments.length>7&&void 0!==arguments[7]&&arguments[7];this.IsInventory&&null==r&&this.GridData.length>0&&(r=this.GridData[0]);var C=0;this.Preferences.ContainsKey("UseasCrossDimension")&&"true"==this.Preferences.UseasCrossDimension.toLowerCase()&&s.a.SessionManager.Preferences.ContainsKey("CrossDimension")&&""!=s.a.SessionManager.Preferences.CrossDimension.toString()&&a.e.IsNum(s.a.SessionManager.Preferences.CrossDimension)&&(C=parseInt(s.a.SessionManager.Preferences.CrossDimension));var m=[];if(m.push(e),m.push(t),m.push(n),m.push(o),m.push(i),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()&&s.a.SessionManager.Preferences.ContainsKey("LW Bills")&&"True"==s.a.SessionManager.Preferences["LW Bills"].toString())if(50002==C){var h=0;this.Preferences.ContainsKey("CrossDimField")&&a.e.IsNum(this.Preferences.CrossDimField)&&((I=this._TextFields.find((function(e){return e.DBColumnID==parseInt(u.Preferences.CrossDimField)})))&&I instanceof c.b&&I.SelectedValue>0?h=I.SelectedValue:(y=this.ColumnSource.find((function(e){return e.ID==u.Preferences.CrossDimField})))&&this.GridDataColumns.Contains(y.ValueMember)&&!a.e.IsEmpty(r[y.ValueMember])&&(h=parseInt(r[y.ValueMember]))),m.push(h)}else this.Preferences.ContainsKey("Donotuselocation")&&""!=this.Preferences.Donotuselocation&&Object(S.j)(this.Preferences.Donotuselocation)?(I=this._CCFields.find((function(e){return"dcccnid2"==e.DBColumnName.toLowerCase()})))&&I instanceof c.b&&I.SelectedValue>0?m.push(I.SelectedValue):null!=r&&this.GridDataColumns.Contains("dcCCNID2_Key")&&!a.e.IsEmpty(r.dcCCNID2_Key)?m.push(r.dcCCNID2_Key.toString()):m.push(""):this.LocationID>0?m.push(this.LocationID):s.a.SessionManager.LocationID>0&&m.push(s.a.SessionManager.LocationID);else m.push("");if(s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()&&s.a.SessionManager.Preferences.ContainsKey("DW Bills")&&"True"==s.a.SessionManager.Preferences["DW Bills"].toString())if(50001==C){var d=0;this.Preferences.ContainsKey("CrossDimField")&&a.e.IsNum(this.Preferences.CrossDimField)&&((I=this._TextFields.find((function(e){return e.DBColumnID==parseInt(u.Preferences.CrossDimField)})))&&I instanceof c.b&&I.SelectedValue>0?d=I.SelectedValue:(y=this.ColumnSource.find((function(e){return e.ID==u.Preferences.CrossDimField})))&&this.GridDataColumns.Contains(y.ValueMember)&&!a.e.IsEmpty(r[y.ValueMember])&&(d=parseInt(r[y.ValueMember]))),m.push(d)}else this.Preferences.ContainsKey("Donotusedivision")&&""!=this.Preferences.Donotusedivision&&Object(S.j)(this.Preferences.Donotusedivision)?(I=this._CCFields.find((function(e){return"dcccnid1"==e.DBColumnName.toLowerCase()})))&&I instanceof c.b&&I.SelectedValue>0?m.push(I.SelectedValue):null!=r&&this.GridDataColumns.Contains("dcCCNID1_Key")&&!a.e.IsEmpty(r.dcCCNID1_Key)?m.push(r.dcCCNID1_Key.toString()):m.push(""):this.DivisionID>0?m.push(this.DivisionID):s.a.SessionManager.DivisionID>0&&m.push(s.a.SessionManager.DivisionID);else m.push("");if(s.a.SessionManager.Preferences.ContainsKey("Maintain Dimensionwise Bills")&&""!=s.a.SessionManager.Preferences["Maintain Dimensionwise Bills"].toString()){var p=0,f=!1;if((p=a.e.Int(s.a.SessionManager.Preferences["Maintain Dimensionwise Bills"]))>0)if(C==p){var I,y,g=0;this.Preferences.ContainsKey("CrossDimField")&&a.e.IsNum(this.Preferences.CrossDimField)&&((I=this._TextFields.find((function(e){return e.DBColumnID==parseInt(u.Preferences.CrossDimField)})))&&I instanceof c.b&&I.SelectedValue>0?g=I.SelectedValue:(y=this.ColumnSource.find((function(e){return e.ID==u.Preferences.CrossDimField})))&&this.GridDataColumns.Contains(y.ValueMember)&&!a.e.IsEmpty(r[y.ValueMember])&&(g=parseInt(r[y.ValueMember]))),f=!0,m.push(g)}else{for(var b=0;b<this._CCFields.length;b++){var T=this._CCFields[b];if(T instanceof c.b&&T.CCID==p){m.push(T.SelectedValue),f=!0;break}}f||(null!=r&&p>5e4&&this.GridDataColumns.Contains("dcCCNID"+(p-5e4).toString()+"_Key")&&!a.e.IsEmpty(r["dcCCNID"+(p-5e4).toString()+"_Key"])?m.push(r["dcCCNID"+(p-5e4).toString()+"_Key"].toString()):m.push(""),f=!0)}f||m.push("")}else m.push("");if(m.push(l.ToString("dd/MMM/yyyy")),m.push(this.CostCenterID),m.push(this.IsInventory),this.IsInventory&&0==this.DocID){var P="",M=this.GridData.filter((function(e){return e.LinkedInvDocDetailsID>0}));M.length>0&&M.forEach((function(e){P.Contains(e.RefNo.toString())||(P.length>0&&(P+=","),P+=e.RefNo)})),m.push(P)}else m.push("");return m.push(D),m.push(s.a.SessionManager.UserID),m.push(s.a.SessionManager.LanguageID),s.a.document.GetBillWiseDetails(m)}},{key:"GetChequeReturnDetails",value:function(e,t,n,o,i,r){var l=[];if(l.push(e),l.push(t),l.push(a.e.IsEmpty(n)?"":n),l.push(o),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()&&s.a.SessionManager.Preferences.ContainsKey("LW Bills")&&"True"==s.a.SessionManager.Preferences["LW Bills"].toString()?this.LocationID>0?l.push(this.LocationID):s.a.SessionManager.LocationID>0&&l.push(s.a.SessionManager.LocationID):l.push(""),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()&&s.a.SessionManager.Preferences.ContainsKey("DW Bills")&&"True"==s.a.SessionManager.Preferences["DW Bills"].toString()?this.DivisionID>0?l.push(this.DivisionID):s.a.SessionManager.DivisionID>0&&l.push(s.a.SessionManager.DivisionID):l.push(""),s.a.SessionManager.Preferences.ContainsKey("Maintain Dimensionwise Bills")&&""!=s.a.SessionManager.Preferences["Maintain Dimensionwise Bills"].toString()){var u,D=!1;if((u=a.e.Int(s.a.SessionManager.Preferences["Maintain Dimensionwise Bills"]))>0){for(var C=0;C<this._CCFields.length;C++){var m=this._CCFields[C];if(m instanceof c.b&&m.CCID==u){l.push(m.SelectedValue),D=!0;break}}D||(null!=i&&u>5e4&&this.GridDataColumns.Contains("dcCCNID"+(u-5e4).toString()+"_Key")&&!a.e.IsEmpty(i["dcCCNID"+(u-5e4).toString()+"_Key"])?l.push(i["dcCCNID"+(u-5e4).toString()+"_Key"].toString()):l.push(1),D=!0)}D||l.push("")}else l.push("");return l.push(r.ToString("dd/MMM/yyyy")),l.push(this.CostCenterID),l.push(s.a.SessionManager.UserID),l.push(s.a.SessionManager.LanguageID),s.a.document.GetChequeReturnHistory(JSON.stringify(l))}},{key:"GetLCBills",value:function(e,t,n,a,o){var i=[];return i.push(e),i.push(t),i.push(n),i.push(a),i.push(""),i.push(""),i.push(""),i.push(o.ToString("dd/MMM/yyyy")),i.push(this.CostCenterID),i.push(s.a.SessionManager.UserID),i.push(s.a.SessionManager.LanguageID),s.a.document.GetLCBills(i)}},{key:"GetBillWiseData",value:function(e,t,n,o){var i=[];if(i.push(e),i.push(t),i.push(n),i.push(o),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&"True"==s.a.SessionManager.Preferences.EnableLocationWise.toString()&&s.a.SessionManager.Preferences.ContainsKey("LW Bills")&&"true"==s.a.SessionManager.Preferences["LW Bills"].toLowerCase()?this.LocationID>0?i.push(this.LocationID):s.a.SessionManager.LocationID>0&&i.push(s.a.SessionManager.LocationID):i.push(""),s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()&&s.a.SessionManager.Preferences.ContainsKey("DW Bills")&&"True"==s.a.SessionManager.Preferences["DW Bills"].toString()?this.DivisionID>0?i.push(this.DivisionID):s.a.SessionManager.DivisionID>0&&i.push(s.a.SessionManager.DivisionID):i.push(""),s.a.SessionManager.Preferences.ContainsKey("Maintain Dimensionwise Bills")&&""!=s.a.SessionManager.Preferences["Maintain Dimensionwise Bills"].toString()){var r=a.e.Int(s.a.SessionManager.Preferences["Maintain Dimensionwise Bills"]),l=!1;if(r>0)for(var u=0;u<this._CCFields.length;u++){var D=this._CCFields[u];if(D instanceof c.b&&D.CCID==r){i.push(D.SelectedValue),l=!0;break}}l||i.push("")}else i.push("");i.push(s.a.SessionManager.UserID),i.push(s.a.SessionManager.LanguageID),s.a.document.GetBillWiseData(i)}},{key:"GetDetailsByInvDetID",value:function(e){Logger.InfoLog("VoucherGenerator:: Inside GetDetailsByInvDetID");var t=[];t.push(e),t.push(this.CostCenterID),t.push(s.a.SessionManager.LanguageID);var n=s.a.document.GetDetailsByInvDetID(t);return Logger.InfoLog("VoucherGenerator:: Exiting GetDetailsByInvDetID"),n}},{key:"GetProductTypeDetails",value:function(e,t,n,o,i,r){var l=this,u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],D=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,C=arguments.length>8&&void 0!==arguments[8]&&arguments[8],m=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,h=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,d=arguments.length>11&&void 0!==arguments[11]&&arguments[11];Logger.InfoLog("Product:: Inside GetProductTypeDetails");var p=[];a.e.IsEmpty(D)||(e="0"),p.push(a.e.IsEmpty(e)?"0":e),p.push(a.e.IsEmpty(D)?"":D),p.push(n);var f="<XML>",I="";if(C){if(s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&Object(S.j)(s.a.SessionManager.Preferences.EnableDivisionWise)&&s.a.SessionManager.Preferences.ContainsKey("DW Batches")&&Object(S.j)(s.a.SessionManager.Preferences["DW Batches"])&&this.DivisionID>0&&(f+='<Row CostCenterID="50001" NODEID="'+this.DivisionID+'" />'),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&Object(S.j)(s.a.SessionManager.Preferences.EnableLocationWise)&&s.a.SessionManager.Preferences.ContainsKey("LW Batches")&&Object(S.j)(s.a.SessionManager.Preferences["LW Batches"])&&this.LocationID>0&&(f+='<Row CostCenterID="50002" NODEID="'+this.LocationID+'" />'),s.a.SessionManager.Preferences.ContainsKey("Maintain Dimensionwise Batches")&&""!=s.a.SessionManager.Preferences["Maintain Dimensionwise Batches"].toString()){var y=0;(y=a.e.Int(s.a.SessionManager.Preferences["Maintain Dimensionwise Batches"]))>0&&(f+='<Row CostCenterID="'+y+'" NODEID="'+m+'" />')}}else this._CCFields.forEach((function(e){e instanceof c.b&&e.DBColumnName.Contains("TO")&&5==l.DocumentType||e instanceof c.b&&e.SelectedValue>0&&(f+='<Row CostCenterID="'+e.CCID+'" NODEID="'+e.SelectedValue.toString()+'" />')})),this.ColumnSource.forEach((function(e){if(null!=e.CostCenterID&&e.CostCenterID>5e4&&l.GridDataColumns.Contains(e.ValueMember)&&!e.ValueMember.startsWith("TO")){if(!d){var t=l.Data.Tables[0].filter((function(t){return t.CostCenterColID==e.ID}));if(t.length>0&&"3"==a.e.StringValue(t[0].LocalCCID))return}a.e.IsEmpty(r[e.ValueMember])||(f+='<Row CostCenterID="'+e.CostCenterID+'" NODEID="'+r[e.ValueMember].toString()+'" />')}else null==e.CostCenterID||2!=e.CostCenterID||a.e.IsEmpty(r[e.ValueMember])||((1==l.DocumentType||39==l.DocumentType||2==l.DocumentType||6==l.DocumentType||26==l.DocumentType||27==l.DocumentType||3==l.DocumentType||4==l.DocumentType||25==l.DocumentType||13==l.DocumentType)&&e.ValueMember.toLowerCase().startsWith("credit")||(11==l.DocumentType||38==l.DocumentType||10==l.DocumentType||7==l.DocumentType||8==l.DocumentType||9==l.DocumentType||12==l.DocumentType||24==l.DocumentType)&&e.ValueMember.toLowerCase().startsWith("debit")||e.ValueMember.toLowerCase().startsWith("account"))&&(f+='<Row CostCenterID="2" NODEID="'+r[e.ValueMember].toString()+'" />',I=r[e.ValueMember].toString())})),s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])&&h&&null!=h.Currency.SelectedValue&&""!=h.Currency.SelectedValue?f+='<Row CostCenterID="12" NODEID="'+parseInt(h.Currency.SelectedValue)+'" />':f+='<Row CostCenterID="12" NODEID="1" />',(1==this.DocumentType||39==this.DocumentType||2==this.DocumentType||6==this.DocumentType||26==this.DocumentType||27==this.DocumentType||3==this.DocumentType||4==this.DocumentType||25==this.DocumentType||13==this.DocumentType)&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0?f+='<Row CostCenterID="2" NODEID="'+this.CreditAccount.SelectedValue.toString()+'" />':(11==this.DocumentType||38==this.DocumentType||10==this.DocumentType||7==this.DocumentType||8==this.DocumentType||9==this.DocumentType||12==this.DocumentType||24==this.DocumentType)&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0&&(f+='<Row CostCenterID="2" NODEID="'+this.DebitAccount.SelectedValue.toString()+'" />'),this.DocID>0&&(f+='<Row CostCenterID="400" NODEID="'+this.DocID.toString()+'" />');f+="</XML>",p.push(f),p.push(this.CostCenterID),31!=this.DocumentType&&32!=this.DocumentType||null==this.DueDate||!this.DueDate.Date?31!=this.DocumentType&&32!=this.DocumentType||null==r||!this.GridDataColumns.Contains("DueDate_Key")||a.e.IsEmpty(r.DueDate_Key)?p.push(null!=t?t.ToString("dd/MMM/yyyy"):(new Date).ToString("dd/MMM/yyyy")):p.push(new Date(r.DueDate_Key).ToString("dd/MMM/yyyy")):p.push(this.DueDate.Date.ToString("dd/MMM/yyyy")),p.push((1==this.DocumentType||39==this.DocumentType||2==this.DocumentType||6==this.DocumentType||26==this.DocumentType||27==this.DocumentType||3==this.DocumentType||4==this.DocumentType||25==this.DocumentType||13==this.DocumentType)&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0?this.CreditAccount.SelectedValue:(11==this.DocumentType||38==this.DocumentType||10==this.DocumentType||7==this.DocumentType||8==this.DocumentType||9==this.DocumentType||12==this.DocumentType||24==this.DocumentType)&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0?this.DebitAccount.SelectedValue:""!=I?I:0),p.push(o),p.push(this.AvgrateExists),p.push(""!=i?i:0),p.push(s.a.SessionManager.UserID),p.push(s.a.SessionManager.RoleID),p.push(s.a.SessionManager.LanguageID),p.push(this.RWFieldsExists.Contains("PW_LandingCost")),p.push(this.RWFieldsExists.Contains("PW_LastRate")),p.push(this.RWFieldsExists.Contains("Last Landing Rate")),p.push(this.RWFieldsExists.Contains("LastPurchaseRate")),p.push(this.RWFieldsExists.Contains("QOH")),p.push(this.RWFieldsExists.Contains("BalQty")),p.push(this.RWFieldsExists.Contains("HOLDQTY")),p.push(this.RWFieldsExists.Contains("CommittedQty")),p.push(this.RWFieldsExists.Contains("RESERVEQTY")),p.push(this.RWFieldsExists.Contains("TotalReserve")),p.push(this.RWFieldsExists.Contains("LPRStockNonStock")),p.push(this.RWFieldsExists.Contains("Loc_QOH")),p.push(this.RWFieldsExists.Contains("Div_QOH")),this.GridDataColumns.Contains("IsTestCase")?p.push(!0):p.push(!1),p.push(u),this.Preferences.ContainsKey("DefaultProfileID")&&""!=this.Preferences.DefaultProfileID?p.push(this.Preferences.DefaultProfileID):p.push(0);var g=s.a.document.GetProductTypeDetails(JSON.stringify(p));return Logger.InfoLog("Product:: Success: DBH.GetProductTypeDetails "+e.toString()),g}},{key:"GetProductPrices",value:function(e,t){Logger.InfoLog("Product:: Inside GetProductPrices");var n=[];n.push(a.e.IsEmpty(e)?"0":e);for(var o="<XML>",i=0;i<this._CCFields.length;i++){var r=this._CCFields[i];r instanceof c.b&&r.DBColumnName.Contains("TO")&&5==this.DocumentType||r instanceof c.b&&r.SelectedValue>0&&(o+='<Row CostCenterID="'+r.CCID+'" NODEID="'+r.SelectedValue.toString()+'" />')}return(1==this.DocumentType||39==this.DocumentType||2==this.DocumentType||6==this.DocumentType||26==this.DocumentType||27==this.DocumentType||3==this.DocumentType||4==this.DocumentType||25==this.DocumentType||13==this.DocumentType)&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0?o+='<Row CostCenterID="2" NODEID="'+this.CreditAccount.SelectedValue.toString()+'" />':(11==this.DocumentType||38==this.DocumentType||10==this.DocumentType||7==this.DocumentType||8==this.DocumentType||9==this.DocumentType||12==this.DocumentType||24==this.DocumentType)&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0&&(o+='<Row CostCenterID="2" NODEID="'+this.DebitAccount.SelectedValue.toString()+'" />'),this.DocID>0&&(o+='<Row CostCenterID="400" NODEID="'+this.DocID.toString()+'" />'),o+="</XML>",n.push(o),n.push(null!=t?t.ToString("dd/MMM/yyyy"):(new Date).ToString("dd/MMM/yyyy")),n.push(this.CostCenterID),n.push(this.DocumentType),n.push(s.a.SessionManager.RoleID),n.push(s.a.SessionManager.UserID),n.push(s.a.SessionManager.LanguageID),s.a.common.GetProductPrices(n)}},{key:"GetPriceTax",value:function(e,t,n,o,i,r,l){var u=this,D=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,C=l.split(","),m=[];m.push(a.e.IsEmpty(e)?"0":e);var h="<XML>";return this._CCFields.forEach((function(e){e instanceof c.b&&e.DBColumnName.Contains("TO")&&5==u.DocumentType||e instanceof c.b&&e.SelectedValue>0&&(h+='<Row CostCenterID="'+e.CCID+'" NODEID="'+e.SelectedValue.toString()+'" />')})),this.ColumnSource.forEach((function(e){e.CostCenterID>5e4&&u.GridDataColumns.Contains(e.ValueMember)&&!e.ValueMember.startsWith("TO")?a.e.IsEmpty(r[e.ValueMember])?a.e.IsEmpty(r[e.DisplayMember])||(h+='<Row CostCenterID="'+e.CostCenterID+'" NODEID="'+r[e.DisplayMember].toString()+'" />'):h+='<Row CostCenterID="'+e.CostCenterID+'" NODEID="'+r[e.ValueMember].toString()+'" />':2!=e.CostCenterID||a.e.IsEmpty(r[e.ValueMember])||(1==u.DocumentType||2==u.DocumentType||10==u.DocumentType||26==u.DocumentType||27==u.DocumentType||3==u.DocumentType||4==u.DocumentType||25==u.DocumentType||13==u.DocumentType?h+='<Row CostCenterID="2" NODEID="'+r[e.ValueMember].toString()+'" />':11!=u.DocumentType&&38!=u.DocumentType&&39!=u.DocumentType&&6!=u.DocumentType&&7!=u.DocumentType&&8!=u.DocumentType&&9!=u.DocumentType&&12!=u.DocumentType&&24!=u.DocumentType||(h+='<Row CostCenterID="2" NODEID="'+r[e.ValueMember].toString()+'" />'),r[e.ValueMember].toString())})),s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"])&&null!=D&&null!=D.Currency.SelectedValue&&""!=D.Currency.SelectedValue?h+='<Row CostCenterID="12" NODEID="'+parseInt(D.Currency.SelectedValue)+'" />':h+='<Row CostCenterID="12" NODEID="1" />',(1==this.DocumentType||39==this.DocumentType||2==this.DocumentType||6==this.DocumentType||26==this.DocumentType||27==this.DocumentType||3==this.DocumentType||4==this.DocumentType||25==this.DocumentType||13==this.DocumentType)&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0?h+='<Row CostCenterID="2" NODEID="'+this.CreditAccount.SelectedValue.toString()+'" />':(11==this.DocumentType||38==this.DocumentType||10==this.DocumentType||7==this.DocumentType||8==this.DocumentType||9==this.DocumentType||12==this.DocumentType||24==this.DocumentType)&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0&&(h+='<Row CostCenterID="2" NODEID="'+this.DebitAccount.SelectedValue.toString()+'" />'),this.DocID>0&&(h+='<Row CostCenterID="400" NODEID="'+this.DocID.toString()+'" />'),h+="</XML>",m.push(h),31!=this.DocumentType&&32!=this.DocumentType||null==this.DueDate||!this.DueDate.Date?31!=this.DocumentType&&32!=this.DocumentType||null==r||!this.GridDataColumns.Contains("DueDate_Key")||a.e.IsEmpty(r.DueDate_Key)?m.push(null!=t?t.ToString("dd/MMM/yyyy"):(new Date).ToString("dd/MMM/yyyy")):m.push(new Date(r.DueDate_Key).ToString("dd/MMM/yyyy")):m.push(this.DueDate.Date.ToString("dd/MMM/yyyy")),m.push(""!=i?i:0),this.Preferences.ContainsKey("DefaultProfileID")&&""!=this.Preferences.DefaultProfileID?m.push(this.Preferences.DefaultProfileID):m.push(0),m.push(n),m.push(this.CostCenterID),m.push(o),m.push(C.Contains("a")&&this.AvgrateExists),m.push(C.Contains("s")&&this.RWFieldsExists.Contains("QOH")),m.push(C.Contains("s")&&this.RWFieldsExists.Contains("BalQty")),m.push(C.Contains("s")&&this.RWFieldsExists.Contains("HOLDQTY")),m.push(C.Contains("s")&&this.RWFieldsExists.Contains("CommittedQty")),m.push(C.Contains("s")&&this.RWFieldsExists.Contains("RESERVEQTY")),m.push(C.Contains("s")&&this.RWFieldsExists.Contains("TotalReserve")),m.push(this.DocumentType),s.a.SessionManager.Preferences.ContainsKey("ConsiderUnAppInHold")&&!a.e.IsEmpty(s.a.SessionManager.Preferences.ConsiderUnAppInHold)&&Object(S.j)(s.a.SessionManager.Preferences.ConsiderUnAppInHold)?m.push(!0):m.push(!1),C.Contains("p")&&C.Contains("t")?m.push(3):C.Contains("p")?m.push(1):C.Contains("t")?m.push(2):m.push(0),m.push(s.a.SessionManager.RoleID),m.push(s.a.SessionManager.UserID),m.push(s.a.SessionManager.LanguageID),s.a.document.GetPriceTax(JSON.stringify(m))}},{key:"GetPriceofUnit",value:function(e,t,n,o){var i=this,r=[];r.push(a.e.IsEmpty(e)?"0":e),r.push(n);var l="<XML>",u="";return this._CCFields.forEach((function(e){e instanceof c.b&&e.DBColumnName.Contains("TO")&&5==i.DocumentType||e instanceof c.b&&e.SelectedValue>0&&(l+='<Row CostCenterID="'+e.CCID+'" NODEID="'+e.SelectedValue.toString()+'" />')})),this.ColumnSource.forEach((function(e){e.CostCenterID>5e4&&i.GridDataColumns.Contains(e.ValueMember)?a.e.IsEmpty(o[e.ValueMember])?a.e.IsEmpty(o[e.DisplayMember])||(l+='<Row CostCenterID="'+e.CostCenterID+'" NODEID="'+o[e.DisplayMember].toString()+'" />'):l+='<Row CostCenterID="'+e.CostCenterID+'" NODEID="'+o[e.ValueMember].toString()+'" />':2!=e.CostCenterID||a.e.IsEmpty(o[e.ValueMember])||(1==i.DocumentType||2==i.DocumentType||10==i.DocumentType||26==i.DocumentType||27==i.DocumentType||3==i.DocumentType||4==i.DocumentType||25==i.DocumentType||13==i.DocumentType?l+='<Row CostCenterID="2" NODEID="'+o[e.ValueMember].toString()+'" />':11!=i.DocumentType&&38!=i.DocumentType&&39!=i.DocumentType&&6!=i.DocumentType&&7!=i.DocumentType&&8!=i.DocumentType&&9!=i.DocumentType&&12!=i.DocumentType&&24!=i.DocumentType||(l+='<Row CostCenterID="2" NODEID="'+o[e.ValueMember].toString()+'" />'),u=o[e.ValueMember].toString())})),(1==this.DocumentType||39==this.DocumentType||2==this.DocumentType||6==this.DocumentType||26==this.DocumentType||27==this.DocumentType||3==this.DocumentType||4==this.DocumentType||25==this.DocumentType||13==this.DocumentType)&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0?l+='<Row CostCenterID="2" NODEID="'+this.CreditAccount.SelectedValue.toString()+'" />':(11==this.DocumentType||38==this.DocumentType||10==this.DocumentType||7==this.DocumentType||8==this.DocumentType||9==this.DocumentType||12==this.DocumentType||24==this.DocumentType)&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0&&(l+='<Row CostCenterID="2" NODEID="'+this.DebitAccount.SelectedValue.toString()+'" />'),l+="</XML>",r.push(l),r.push(this.CostCenterID),31!=this.DocumentType&&32!=this.DocumentType||null==this.DueDate||!this.DueDate.Date?31!=this.DocumentType&&32!=this.DocumentType||null==o||!this.GridDataColumns.Contains("DueDate_Key")||a.e.IsEmpty(o.DueDate_Key)?r.push(null!=t?t.ToString("dd/MMM/yyyy"):(new Date).ToString("dd/MMM/yyyy")):r.push(new Date(o.DueDate_Key).ToString("dd/MMM/yyyy")):r.push(this.DueDate.Date.ToString("dd/MMM/yyyy")),r.push((1==this.DocumentType||39==this.DocumentType||2==this.DocumentType||6==this.DocumentType||26==this.DocumentType||27==this.DocumentType||3==this.DocumentType||4==this.DocumentType||25==this.DocumentType||13==this.DocumentType)&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0?this.CreditAccount.SelectedValue:(11==this.DocumentType||38==this.DocumentType||10==this.DocumentType||7==this.DocumentType||8==this.DocumentType||9==this.DocumentType||12==this.DocumentType||24==this.DocumentType)&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0?this.DebitAccount.SelectedValue:""!=u?u:0),r.push(s.a.SessionManager.UserID),r.push(s.a.SessionManager.LanguageID),s.a.document.GetPriceofUnit(JSON.stringify(r))}},{key:"GetCrossDimLinkDetails",value:function(e,t,n,a,o){var i=[];return i.push(e),i.push(t),i.push(n),i.push(a),i.push(o),i.push(s.a.SessionManager.UserID),i.push(s.a.SessionManager.LanguageID),s.a.document.GetCrossDimLinkDetails(JSON.stringify(i))}},{key:"GetProductQtyOnHand",value:function(e,t){var n=[];n.push(e);var o,i,r="";return(o=a.e.Int(s.a.SessionManager.Preferences["Maintain Dimensionwise stock"]))>5e4&&(i=this._CCFields.find((function(e){return e.DBColumnName.toLowerCase()=="dcccnid"+(o-5e4)})))&&i.SelectedValue>0&&(r+=" and dcccnid"+(o-5e4)+"="+i.SelectedValue.toString()),s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")&&Object(S.j)(s.a.SessionManager.Preferences.EnableLocationWise)&&Object(S.j)(s.a.SessionManager.Preferences.EnableLocationWise)&&s.a.SessionManager.Preferences.ContainsKey("Location Stock")&&Object(S.j)(s.a.SessionManager.Preferences["Location Stock"])&&Object(S.j)(s.a.SessionManager.Preferences["Location Stock"])&&((i=this._CCFields.find((function(e){return"dcccnid2"==e.DBColumnName.toLowerCase()})))&&i.SelectedValue>0?r+=" and dcccnid2="+i.SelectedValue.toString():this.LocationID>0?r+=" and dcccnid1="+this.LocationID.toString():s.a.SessionManager.LocationID>0&&(r+=" and dcccnid1="+s.a.SessionManager.LocationID.toString())),!1,s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&Object(S.j)(s.a.SessionManager.Preferences.EnableDivisionWise)&&Object(S.j)(s.a.SessionManager.Preferences.EnableDivisionWise)&&s.a.SessionManager.Preferences.ContainsKey("Division Stock")&&Object(S.j)(s.a.SessionManager.Preferences["Division Stock"])&&Object(S.j)(s.a.SessionManager.Preferences["Division Stock"])&&((i=this._CCFields.find((function(e){return"dcccnid1"==e.DBColumnName.toLowerCase()})))&&i.SelectedValue>0?r+=" and dcccnid1="+i.SelectedValue.toString():this.DivisionID>0?r+=" and dcccnid1="+this.DivisionID.toString():s.a.SessionManager.DivisionID>0&&(r+=" and dcccnid1="+s.a.SessionManager.DivisionID.toString())),n.push(null!=t?t.ToString("dd/MMM/yyyy"):(new Date).ToString("dd/MMM/yyyy")),n.push(r),n.push(s.a.SessionManager.UserID),n.push(s.a.SessionManager.LanguageID),s.a.document.GetProductQtyOnHand(n)}},{key:"GetAssignedUsers",value:function(){var e=[];e.push(s.a.SessionManager.UserID),e.push(s.a.SessionManager.LanguageID);var t=s.a.document.GetAssignedUsers(e);return null!=t&&t.Tables.length>0&&t.Tables[0].length>0&&t.Columns[0].Contains("AssignedUsers")?t.Tables[0][0].AssignedUsers.toString():""}},{key:"GetAssetDetByProduct",value:function(e){var t=[];return t.push(e),t.push(this.CostCenterID),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.document.GetAssetDetByProduct(t)}},{key:"GetProductDetails",value:function(e,t,n,o,i,r){var l=this;Logger.InfoLog("Product:: Inside GetProductTypeDetails");var u=[];u.push(e),u.push(n);var D="<XML>";this._CCFields.forEach((function(e){e instanceof c.b&&e.DBColumnName.Contains("TO")&&5==l.DocumentType||e instanceof c.b&&e.SelectedValue>0&&(D+='<Row CostCenterID="'+e.CCID+'" NODEID="'+e.SelectedValue.toString()+'" />')})),null!=r&&this.ColumnSource.forEach((function(e){e.CostCenterID>5e4&&null!=e.ValueMember&&l.GridDataColumns.Contains(e.ValueMember)&&!a.e.IsEmpty(r[e.ValueMember])&&(D+='<Row CostCenterID="'+e.CostCenterID+'" NODEID="'+r[e.ValueMember].toString()+'" />')})),(1==this.DocumentType||2==this.DocumentType||10==this.DocumentType||26==this.DocumentType||27==this.DocumentType||3==this.DocumentType||4==this.DocumentType||25==this.DocumentType||13==this.DocumentType)&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0?D+='<Row CostCenterID="2" NODEID="'+this.CreditAccount.SelectedValue.toString()+'" />':(11==this.DocumentType||38==this.DocumentType||39==this.DocumentType||6==this.DocumentType||7==this.DocumentType||8==this.DocumentType||9==this.DocumentType||12==this.DocumentType||24==this.DocumentType)&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0&&(D+='<Row CostCenterID="2" NODEID="'+this.DebitAccount.SelectedValue.toString()+'" />'),D+="</XML>",u.push(D),u.push(this.CostCenterID),u.push(null!=t?t.ToString("dd/MMM/yyyy"):(new Date).ToString("dd/MMM/yyyy")),u.push((1==this.DocumentType||2==this.DocumentType||10==this.DocumentType||26==this.DocumentType||27==this.DocumentType||3==this.DocumentType||4==this.DocumentType||25==this.DocumentType||13==this.DocumentType)&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0?this.CreditAccount.SelectedValue:(11==this.DocumentType||38==this.DocumentType||39==this.DocumentType||6==this.DocumentType||7==this.DocumentType||8==this.DocumentType||9==this.DocumentType||12==this.DocumentType||24==this.DocumentType)&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0?this.DebitAccount.SelectedValue:0),u.push(o),u.push(this.AvgrateExists),u.push(""!=i?i:0),u.push(this.LocationID>0?this.LocationID:s.a.SessionManager.LocationID>0?s.a.SessionManager.LocationID:0),u.push(s.a.SessionManager.UserID),u.push(s.a.SessionManager.LanguageID);var C=s.a.document.GetReferenceData(JSON.stringify(u));return Logger.InfoLog("Product:: Success: DBH.GetProductTypeDetails "+e.toString()),C}},{key:"GetReconcileAvgRate",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[];return a.push(e),a.push(null!=t?t.ToString("dd/MMM/yyyy"):(new Date).ToString("dd/MMM/yyyy")),a.push(this.DocID),a.push(n),a.push(s.a.SessionManager.UserID),a.push(s.a.SessionManager.LanguageID),s.a.document.GetReconcileAvgRate(a)}},{key:"GetChequeDetails",value:function(){return 0==this.PostVoucherDocID?null:s.a.common.GetDataSet("DOC031",this.PostVoucherDocID.toString())}},{key:"CheckViewForUser",value:function(e){var t,n=this;if(null!=this.Data&&this.Data.Tables.length>10&&this.Data.Tables[10].length>0){for(var o,i=0;i<this.HeaderFields.length;i++){var r=this.HeaderFields[i];(38==this.DocumentType||39==this.DocumentType)&&r instanceof l.a&&"docdate"==r.DBColumnName.toLowerCase()||(!(r instanceof C.b)||s.a.SessionManager.Preferences.ContainsKey("Use Foreign Currency")&&Object(S.j)(s.a.SessionManager.Preferences["Use Foreign Currency"]))&&(this.SetView(r,e),r instanceof C.b&&this.SetView(r.ExchangeRate,e))}if(this.CustomTab.Pages.forEach((function(t){if(3!=t.TabType)if(t.Fields.forEach((function(t){n.SetView(t,e)})),o=null,null!=(o=n.Data.Tables[10].filter(n.DocID>0?null!=n.Link&&"[Open]"!=n.Link.LinkStatus?369==e?function(e){return e.CostCenterColID>-100&&e.CostCenterColID<-50&&e.description==t.Header&&(2==e.Mode||3==e.Mode||4==e.Mode||5==e.Mode)}:function(e){return e.CostCenterColID>-100&&e.CostCenterColID<-50&&e.description==t.Header&&(2==e.Mode||3==e.Mode||5==e.Mode)}:369==e?function(e){return e.CostCenterColID>-100&&e.CostCenterColID<-50&&e.description==t.Header&&(2==e.Mode||3==e.Mode||4==e.Mode)}:function(e){return e.CostCenterColID>-100&&e.CostCenterColID<-50&&e.description==t.Header&&(2==e.Mode||3==e.Mode)}:function(e){return e.CostCenterColID>-100&&e.CostCenterColID<-50&&e.description==t.Header&&(1==e.Mode||3==e.Mode)}))&&o.length>0)t.Visible=Object(S.j)(o[0].IsVisible),t.Enable=Object(S.j)(o[0].IsEditable);else{var s=t.Fields.find((function(e){return e instanceof p.c&&e.Visible}));t.Visible=!!s,t.Enable=!0}})),this.ColumnSource.forEach((function(t){4!=t.SectionID&&"LinkedFieldName"!=t.DisplayMember&&"StatusID"!=t.DisplayMember&&"LinkedInvDocDetailsID"!=t.DisplayMember&&"DocDetailsID"!=t.DisplayMember&&"DocSeqNo"!=t.DisplayMember&&n.SetView(t,e)})),this.FooterColumnSource.forEach((function(t){"Remarks"!=t.DisplayMember&&"dcCurrID"!=t.DisplayMember&&"dcExchRT"!=t.DisplayMember||n.SetView(t,e)})),this.IsInventory){null!=this.Link&&(o=null,null!=(o=this.Data.Tables[10].filter(this.DocID>0?"[Open]"!=this.Link.LinkStatus?369==e?function(e){return-3==e.CostCenterColID&&(2==e.Mode||3==e.Mode||4==e.Mode||5==e.Mode)}:function(e){return-3==e.CostCenterColID&&(2==e.Mode||3==e.Mode||5==e.Mode)}:369==e?function(e){return-3==e.CostCenterColID&&(2==e.Mode||3==e.Mode||4==e.Mode)}:function(e){return-3==e.CostCenterColID&&(2==e.Mode||3==e.Mode)}:function(e){return-3==e.CostCenterColID&&(1==e.Mode||3==e.Mode)}))&&o.length>0?(this.Preferences.ContainsKey("LinkPopup")&&"True"==this.Preferences.LinkPopup||(this.Link.Visible=Object(S.j)(o[0].IsVisible)),this.Link.LinkCombo.Enable=Object(S.j)(o[0].IsEditable),this.Link.DocumentList.Enable=Object(S.j)(o[0].IsEditable)):(this.Preferences.ContainsKey("LinkPopup")&&"True"==this.Preferences.LinkPopup||(this.Link.Visible=!0),this.Link.LinkCombo.Enable=!0,this.Link.DocumentList.Enable=!0));for(var u=0;u<this.FooterGridData.length;u++)this.FooterGridDataColumns.Contains("ColumnName")&&!a.e.IsEmpty(this.FooterGridData[u].ColumnName)&&this.SetView(this.FooterGridData[u],e,!0,this.FooterGridDataColumns);if(null!=this.FooterDataBind&&this.FooterDataBind.length>1){for(var c=0;c<this.FooterDataBind.length;c++)this.SetView(this.FooterDataBind[c],e,!0,this.FooterDataBindColumns);this.FooterColumnSource.length>1&&!this.FooterColumnSource[1].ReadOnly&&(null===(t=this.FooterColumnSource[1].ComboDataTable)||void 0===t?void 0:t.length)>0&&this.FooterColumnSource[1].SetComboData(this.FooterColumnSource[1].ComboDataTable.filter((function(e){return e.IsVisible=!0})))}}}}},{key:"SetView",value:function(e,t){var n,o,i,r,l,u=arguments.length>2&&void 0!==arguments[2]&&arguments[2],C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,m=[],h=this.Data.Tables[0];this.Data.Tables[10].length>0&&(this.DocID>0?(n=[2,3],null!=this.Link&&"[Open]"!=this.Link.LinkStatus||null==this.Link&&"[Open]"!=this.linkstat?n=369==t?[2,3,4,5]:[2,3,5]:369==t&&(n=[2,3,4])):n=[1,3],e instanceof p.c?o=e.DBColumnName:e instanceof d.a?"combobox"==e.DataType.toLowerCase()?o=e.ValueBinding:3==e.CostCenterID||2==e.CostCenterID||!a.e.IsEmpty(e.ID)&&parseInt(e.ID)<0?i=e.ID:o=e.DisplayMember:u&&(o=" and SysColumnName='"+e.ColumnName.toString()+"'"),o?m=this.Data.Tables[10].filter((function(e){return e.SysColumnName==o&&n.Contains(e.Mode)})):i&&(m=this.Data.Tables[10].filter((function(e){return e.CostCenterColID==i&&n.Contains(e.Mode)}))));m.length>0?(e instanceof p.c?e.Visible=Object(S.j)(m[0].IsVisible):e instanceof d.a?e.IsVisible=Object(S.j)(m[0].IsVisible):u&&(e.IsVisible=Object(S.j)(m[0].IsVisible),C.Contains("StyleHeightZero")&&(e.StyleHeightZero=Object(S.j)(m[0].IsVisible)?0:1)),a.e.IsEmpty(m[0].IsMandatory)||(e instanceof p.c?(e.Mandatory=Object(S.j)(m[0].IsMandatory),e instanceof D.a&&(e.Name.Mandatory=e.Mandatory)):e instanceof d.a&&(e.Mandatory=Object(S.j)(m[0].IsMandatory))),e instanceof p.c?(e.IsReadOnly=!Object(S.j)(m[0].IsEditable),e instanceof D.a&&(e.Code.IsReadOnly=e.Name.IsReadOnly=e.IsReadOnly)):(e instanceof d.a||u)&&(e.ReadOnly=!Object(S.j)(m[0].IsEditable)),(e instanceof p.c||e instanceof d.a||u)&&(e.Expression=m[0].Expression.toString()),(e instanceof p.c||e instanceof d.a||u)&&(e.Message=m[0].FailureMessage.toString()),a.e.IsEmpty(m[0].ActionOptionID)?(e instanceof p.c||e instanceof d.a||u)&&(e.Action=0):(e instanceof p.c||e instanceof d.a||u)&&(e.Action=parseInt(m[0].ActionOptionID)),a.e.IsEmpty(m[0].NumFieldEditOptionID)?e instanceof d.a&&(e.EditOption=0):e instanceof d.a&&(e.EditOption=parseInt(m[0].NumFieldEditOptionID))):(e instanceof p.c?r=e.DBColumnName:e instanceof d.a?"combobox"==e.DataType.toLowerCase()?r=e.ValueBinding:3==e.CostCenterID||2==e.CostCenterID||!a.e.IsEmpty(e.ID)&&parseInt(e.ID)<0?l=e.ID:r=e.DisplayMember:u&&(r=" and SysColumnName='"+e.ColumnName.toString()+"'"),r?h=this.Data.Tables[0].filter((function(e){return e.SysColumnName==r})):l&&(h=this.Data.Tables[0].filter((function(e){return e.CostCenterColID==l}))),h.length>0&&(e instanceof p.c?(e.IsReadOnly=!Object(S.j)(h[0].IsEditable),e instanceof D.a&&(e.Code.IsReadOnly=e.Name.IsReadOnly=e.IsReadOnly)):e instanceof d.a?e.ReadOnly=s.a.SessionManager.Preferences.ContainsKey("EnableDivisionWise")&&"True"==s.a.SessionManager.Preferences.EnableDivisionWise.toString()&&50001==e.CostCenterID?!this.Preferences.ContainsKey("Donotusedivision")||""==this.Preferences.Donotusedivision||!Object(S.j)(this.Preferences.Donotusedivision):!s.a.SessionManager.Preferences.ContainsKey("EnableLocationWise")||"True"!=s.a.SessionManager.Preferences.EnableLocationWise.toString()||this.Preferences.ContainsKey("Donotuselocation")&&""!=this.Preferences.Donotuselocation&&Object(S.j)(this.Preferences.Donotuselocation)||50002!=e.CostCenterID?!Object(S.j)(h[0].IsEditable):!this.Preferences.ContainsKey("EnableLocation")||""==this.Preferences.EnableLocation||!Object(S.j)(this.Preferences.EnableLocation):u&&(e.ReadOnly=!Object(S.j)(h[0].IsEditable)),a.e.IsEmpty(h[0].IsMandatory)||(e instanceof p.c?(e.Mandatory=Object(S.j)(h[0].IsMandatory),e instanceof D.a&&(e.Name.Mandatory=e.Mandatory)):e instanceof d.a&&(e.Mandatory=Object(S.j)(h[0].IsMandatory))),e instanceof p.c&&!a.e.IsEmpty(h[0].IsVisible)?e.Visible=Object(S.j)(h[0].IsVisible):e instanceof d.a?e.IsVisible=Object(S.j)(h[0].IsVisible):u&&(e.IsVisible=Object(S.j)(h[0].IsVisible),C.Contains("StyleHeightZero")&&(e.StyleHeightZero=Object(S.j)(h[0].IsVisible)?0:1))),e instanceof d.a&&(e.EditOption=0),(e instanceof p.c||e instanceof d.a||u)&&(e.Expression=""),(e instanceof p.c||e instanceof d.a||u)&&(e.Message=""),e instanceof p.c||e instanceof d.a?e.Action=0:u&&(e.Action=""));e instanceof c.b&&(38==this.DocumentType||39==this.DocumentType)?e.SearchVisible=!!(e.GridViewID>0&&e.Enable):e instanceof D.a&&(38==this.DocumentType||39==this.DocumentType)&&(e.Name.SearchVisible=!!(e.Name.GridViewID>0&&e.Enable))}},{key:"CheckNegativeStock",value:function(e,t,n,a,o){var i=[];return i.push(e),i.push(o),i.push(this.DocID),i.push(t),i.push(n),i.push(a),i.push(s.a.SessionManager.UserID),i.push(s.a.SessionManager.LanguageID),s.a.document.CheckNegativeStock(i)}},{key:"CheckReorderLevel",value:function(e,t){var n=[];return n.push(e),n.push(this.DocDate.Date),n.push(this.DocID),n.push(t),n.push(s.a.SessionManager.UserID),n.push(s.a.SessionManager.LanguageID),s.a.document.CheckReorderLevel(n)}},{key:"GetLCTRLimits",value:function(){if(this.Preferences.ContainsKey("UseAsLC")&&""!=this.Preferences.UseAsLC&&Object(S.j)(this.Preferences.UseAsLC)||this.Preferences.ContainsKey("UseAsTR")&&""!=this.Preferences.UseAsTR&&Object(S.j)(this.Preferences.UseAsTR)){var e=0;if(this.Preferences.ContainsKey("UseAsLC")&&""!=this.Preferences.UseAsLC&&Object(S.j)(this.Preferences.UseAsLC)&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue>1&&(e=this.CreditAccount.SelectedValue),this.Preferences.ContainsKey("UseAsTR")&&""!=this.Preferences.UseAsTR&&Object(S.j)(this.Preferences.UseAsTR)&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue>1&&(e=this.DebitAccount.SelectedValue),e>0){var t=[];t.push(e),t.push(null!=this.ovDate?this.ovDate.Date.ToString("dd/MMM/yyyy"):(new Date).ToString("dd/MMM/yyyy")),t.push(0),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID);var n=s.a.document.GetLCTRAnalysis(t);this.FillLCTRLimits(n)}}}},{key:"GetLCUsedAmt",value:function(e){var t=[];return t.push(""),t.push((new Date).ToString("dd/MMM/yyyy")),t.push(e),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.document.GetLCTRAnalysis(t)}},{key:"FillLCTRLimits",value:function(e){if(null!=e&&e.Tables.length>0&&e.Tables[0].length>0){var t=0,n=0,s=this._TextFields.find((function(e){return"dcalpha1"==e.DBColumnName.toLowerCase()}));s instanceof r.d&&(this.Preferences.ContainsKey("UseAsLC")&&""!=this.Preferences.UseAsLC&&Object(S.j)(this.Preferences.UseAsLC)&&e.Columns[0].Contains("LetterofCredit")&&(s.Text=e.Tables[0][0].LetterofCredit.toString()),this.Preferences.ContainsKey("UseAsTR")&&""!=this.Preferences.UseAsTR&&Object(S.j)(this.Preferences.UseAsTR)&&e.Columns[0].Contains("TrustReceipt")&&(s.Text=e.Tables[0][0].TrustReceipt.toString()),""!=s.Text&&(t=parseFloat(s.Text)),s instanceof r.d&&(s=this._TextFields.find((function(e){return"dcalpha2"==e.DBColumnName.toLowerCase()})))instanceof r.d&&(this.Preferences.ContainsKey("UseAsLC")&&""!=this.Preferences.UseAsLC&&Object(S.j)(this.Preferences.UseAsLC)&&e.Columns[0].Contains("LCAmount")&&(s.Text=e.Tables[0][0].LCAmount.toString()),this.Preferences.ContainsKey("UseAsTR")&&""!=this.Preferences.UseAsTR&&Object(S.j)(this.Preferences.UseAsTR)&&e.Columns[0].Contains("TRAmount")&&(s.Text=e.Tables[0][0].TRAmount.toString()),""!=s.Text&&(n=parseFloat(s.Text))),(s=this._TextFields.find((function(e){return"dcalpha3"==e.DBColumnName.toLowerCase()})))instanceof r.d&&(s.Text=(t-n).toString()))}}},{key:"GetAccountByRef",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e<0&&-98!=e&&-99!=e&&(e=-e);var r=0,l=[];l.push(e),l.push(t),l.push(n),l.push(o),l.push(i),l.push(s.a.SessionManager.UserID),l.push(s.a.SessionManager.LanguageID);var u=s.a.document.GetAccountByRef(l);return null!=u&&u.Tables.length>0&&u.Tables[0].length>0&&a.e.IsNum(u.Tables[0][0][u.Columns[0][0]])&&(r=parseInt(u.Tables[0][0][u.Columns[0][0]])),r}},{key:"FillPendingList",value:function(e){var t=this;if(this.Link&&null!=this.Link.LinkCombo&&!a.e.IsEmpty(this.Link.LinkCombo.SelectedValue)&&this.Link.VouchersList){this.Link.DocumentList.Items.Clear();for(var n=[],s=function(e){t.Link.VouchersList.length<5e3&&n.Contains(t.Link.VouchersList[e].voucherno.toString())||(n.push(t.Link.VouchersList[e].voucherno.toString()),null!=t.Link.LinkCombo.SelectedItem&&"true"==t.Link.LinkCombo.SelectedItem.Aliasname.toLowerCase()&&t.ReferenceCallBack.IsSubscribed||t.GridData.filter((function(n){return n.RefNo==t.Link.VouchersList[e].voucherno.toString()})).length>0?t.Link.DocumentList.Items.push(u.c.CheckedListBoxItem_5(t.Link.VouchersList[e].voucherno.toString(),t.Link.VouchersList[e].DocID.toString(),!0)):t.Link.DocumentList.Items.push(u.c.CheckedListBoxItem_3(t.Link.VouchersList[e].voucherno.toString(),t.Link.VouchersList[e].DocID.toString())))},o=0;o<this.Link.VouchersList.length;o++)s(o);if(n=null,this.Data.Tables[0].length>0){var i=this.Data.Tables[0].filter((function(e){return null!=e.LocalReference&&79==e.LocalReference&&55497==e.LinkData}));if(i.length>0){var l=this._TextFields.find((function(e){return e.DBColumnName==i[0].SysColumnName.toString()}));l&&l instanceof r.d&&(l.Text=this.Link.VouchersList.length.toString())}}0==this.DocID&&null!=this.Link.LinkCombo.SelectedItem&&"true"==this.Link.LinkCombo.SelectedItem.Aliasname.toLowerCase()&&this.ReferenceCallBack.IsSubscribed&&this.ReferenceCallBack.Call({ReferenceTable:null,ReferenceEditTable:null,DBColumnName:"LinkAll",ccid:0,dr:null})}}},{key:"SetDocStatus",value:function(e,t,n,a,o,i,r){var l=[];return l.push(e),l.push(Object(I.isNullOrUndefined)(o)?"":o),l.push(a.ToString("dd/MMM/yyyy")),l.push(this.IsInventory),l.push(this.DocID),l.push(this.CostCenterID),l.push(t),l.push(n),l.push(i),l.push(r),l.push(s.a.SessionManager.CompanyGUID),l.push(s.a.SessionManager.UserName),l.push(s.a.SessionManager.UserID),l.push(s.a.SessionManager.RoleID),l.push(s.a.SessionManager.LanguageID),s.a.document.SetDocStatus(l)}},{key:"GetProductVendors",value:function(e){return s.a.common.GetDataSet("DOC014",e)}},{key:"GetProductBundle",value:function(e){var t=[];return t.push(e),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.document.GetProductBundle(t)}},{key:"SetCostCenterNodeFiles",value:function(e,t){var n=[];return n.AddRange(e),n.push(s.a.SessionManager.CompanyGUID),n.push(t),n.push(s.a.SessionManager.UserName),n.push(s.a.SessionManager.RoleID),n.push(s.a.SessionManager.LanguageID),s.a.document.SetCostCenterNodeFiles(n)}},{key:"setPref",value:function(e,t){s.a.common.GetDataSet3("SETPEF001",e,this.CostCenterID.toString(),t),this.Preferences[e]=t}},{key:"SetDocLinkStatus",value:function(e,t,n){var a=[];return a.push(e),a.push(null!=n?n:""),a.push(t),a.push(this.DocID),a.push(this.CostCenterID),a.push(s.a.SessionManager.CompanyGUID),a.push(s.a.SessionManager.UserName),a.push(s.a.SessionManager.UserID),a.push(s.a.SessionManager.RoleID),a.push(s.a.SessionManager.LanguageID),s.a.document.SetDocLinkStatus(a)}},{key:"GetDocStatusHistory",value:function(){return e.GetDocStatusHistory(this.CostCenterID,this.DocID,this.IsInventory)}},{key:"GetLinkDefDetails",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=[];return o.push(t),o.push(e),o.push(n),o.push(a),o.push(s.a.SessionManager.UserID),o.push(s.a.SessionManager.RoleID),o.push(s.a.SessionManager.LanguageID),s.a.document.GetLinkDefDetails(o)}},{key:"GetBatchWiseQOH",value:function(e,t,n){Logger.InfoLog("VoucherGenerator:: Inside GetBatchWiseQoh");var o="2";s.a.SessionManager.Preferences.ContainsKey("DecimalsinQty")&&""!=s.a.SessionManager.Preferences.DecimalsinQty&&(o=s.a.SessionManager.Preferences.DecimalsinQty);var i,r=" ProductID= "+e+" and BatchID= "+t+" AND IsQtyIgnored=0 and i.StatusID=369 AND ",l=a.e.Int(s.a.SessionManager.Preferences["Maintain Dimensionwise stock"]);s.a.SessionManager.Preferences.ContainsKey("Maintain Dimensionwise stock")&&l>0&&(this.GridDataColumns.Contains("dcCCNID"+(l-5e4)+"_Key")?a.e.IsEmpty(n["dcCCNID"+(l-5e4)+"_Key"])||(r+=" dcCCNID"+(l-5e4).toString()+"="+n["dcCCNID"+(l-5e4)+"_Key"].toString()+" and "):(i=this._CCFields.find((function(e){return e.DBColumnName.toLowerCase()=="dcccnid"+(l-5e4)})))&&i instanceof c.b&&i.SelectedValue>0&&(r+=" dcCCNID"+(l-5e4).toString()+"="+i.SelectedValue+" and ")),"true"==s.a.SessionManager.Preferences.EnableLocationWise.toLowerCase()&&Object(S.j)(s.a.SessionManager.Preferences["Location Stock"])&&(this.GridDataColumns.Contains("dcCCNID2_Key")?a.e.IsEmpty(n.dcCCNID2_Key)||(r+=" dcCCNID2="+n.dcCCNID2_Key.toString()+" and "):(i=this._CCFields.find((function(e){return"dcccnid2"==e.DBColumnName.toLowerCase()})))&&i instanceof c.b?i.SelectedValue>0&&(r+=" dcCCNID2="+i.SelectedValue+" and "):this.LocationID>0?r+=" dcCCNID2="+this.LocationID+" and ":s.a.SessionManager.LocationID>0&&(r+=" dcCCNID2="+s.a.SessionManager.LocationID+" and ")),"true"==s.a.SessionManager.Preferences.EnableDivisionWise.toLowerCase()&&s.a.SessionManager.Preferences.ContainsKey("Division Stock")&&Object(S.j)(s.a.SessionManager.Preferences["Division Stock"])&&(this.GridDataColumns.Contains("dcCCNID1_Key")?a.e.IsEmpty(n.dcCCNID1_Key)||(r+=" dcCCNID1="+n.dcCCNID1_Key.toString()+" and "):(i=this._CCFields.find((function(e){return"dcccnid1"==e.DBColumnName.toLowerCase()})))&&i instanceof c.b?i.SelectedValue>0&&(r+=" dcCCNID1="+i.SelectedValue+" and "):this.DivisionID>0?r+=" dcCCNID1="+this.DivisionID+" and ":s.a.SessionManager.DivisionID>0&&(r+=" dcCCNID1="+s.a.SessionManager.DivisionID+" and ")),r+=" (VoucherType=1 OR VoucherType=-1) ",r+=" and convert(datetime,DocDate)<='",31!=this.DocumentType&&32!=this.DocumentType||null==n||!this.GridDataColumns.Contains("DueDate_Key")||a.e.IsEmpty(n.DueDate_Key)?r+=null!=this.DueDate&&this.DueDate.Date?this.DueDate.Date.ToString("dd/MMM/yyyy"):null!=this.DocDate?this.DocDate.Date.ToString("dd/MMM/yyyy"):(new Date).ToString("dd/MMM/yyyy"):r+=new Date(n.DueDate_Key).ToString("dd/MMM/yyyy"),r+="' ";var u=[];u.push(r),u.push(s.a.SessionManager.UserID),u.push(s.a.SessionManager.LanguageID);var D=s.a.common.GetDataSet3("DOC043",o,r);return null!=D&&D.Tables.length>0&&D.Tables[0].length>0&&a.e.IsNum(D.Tables[0][0].dbl)?parseFloat(D.Tables[0][0].dbl):(Logger.InfoLog("VoucherGenerator:: Exiting GetBatchWiseQoh"),0)}},{key:"GetLinkedDocuments",value:function(){var e="",t="",n="";return this.GridData.forEach((function(s){!a.e.IsEmpty(s.LinkedInvDocDetailsID)&&parseInt(s.LinkedInvDocDetailsID)>0&&(e.length>0&&(e+=","),e+=s.LinkedInvDocDetailsID.toString(),n.length>0&&(n+=","),n+=s.LinkedInvDocDetailsID.toString()),s.DocDetailsID.toString().length>0&&parseInt(s.DocDetailsID)>0&&(t.length>0&&(t+=","),t+=s.DocDetailsID.toString(),n.length>0&&(n+=","),n+=s.DocDetailsID.toString())})),s.a.common.GetDataSet3("DOC034",n,t,e)}},{key:"GetPaymentTerms",value:function(e,t){var n=[];return n.push(e),n.push(t),n.push(s.a.SessionManager.UserID),n.push(s.a.SessionManager.LanguageID),s.a.document.GetPaymentTermDetails(n)}},{key:"getDistribution",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";Logger.InfoLog("Voucher Generator:: Inside getDistribution");var i=s.a.document.getDistribution(e,t,n,a,o);if(Logger.InfoLog("Voucher Generator: DBH.getDistribution "),null!=i&&i.Tables.length>0){if(i.Columns[0].Contains("amt")&&i.Tables[0].length>0)return i.Tables[0];if(i.Columns[1].Contains("amt")&&i.Tables[1].length>0)return i.Tables[1]}return null}},{key:"getPrevCash",value:function(e){Logger.InfoLog("Voucher Generator:: Inside getPrevCash");var t=[];t.push(this.RegisterNodeID),t.push(this.ShiftNodeID),t.push(e),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID);var n=s.a.document.GetPOSCash(t);return null!=n&&n.Tables.length>0&&n.Columns[0].Contains("cash")&&""!=n.Tables[0][0].cash.toString()?n.Tables[0][0].cash.toString():(Logger.InfoLog("Voucher Generator: DBH.getPrevCash "),"0")}},{key:"GetAccBalance",value:function(e,t){Logger.InfoLog("Voucher Generator:: Inside GetAccBalance");var n=[];n.push(e),n.push(this.DocID),n.push(this.IsInventory),n.push((new Date).ToString("dd/MMM/yyyy")),n.push(t.ToString("dd/MMM/yyyy")),n.push(s.a.SessionManager.UserID),n.push(s.a.SessionManager.LanguageID);var a=s.a.document.GetAccBalance(n);return Logger.InfoLog("Voucher Generator: DBH.GetAccBalance "+e.toString()),a}},{key:"GetArApDetails",value:function(e,t,n){var o="";if(38==this.DocumentType||n){for(var i=0;i<this.GridData.length;i++)!a.e.IsEmpty(this.GridData[i].LinkedInvDocDetailsID)&&parseInt(this.GridData[i].LinkedInvDocDetailsID)>0&&(""!=o&&(o+=","),o+=this.GridData[i].LinkedInvDocDetailsID.toString());if(38==this.DocumentType&&""==o)return null}var r=[];return r.push(e),r.push(t.ToString("dd/MMM/yyyy")),r.push(a.e.IsEmpty(this.VoucherNo)?"":this.VoucherNo),r.push(o),r.push(this.DocumentType),r.push(s.a.SessionManager.UserID),r.push(s.a.SessionManager.LanguageID),s.a.document.GetArApDetails(r)}},{key:"IsRecurDocumet",value:function(){var e=s.a.common.GetDataSet3("DOC015",this.CostCenterID.toString(),this.DocID.toString());return!!(null!=e&&e.Tables.length>0&&e.Columns[0].Contains("CNT")&&parseInt(e.Tables[0][0].CNT)>0)}},{key:"GetMatrixInfo",value:function(e){return s.a.common.GetDataSet("DOC015",e)}},{key:"lockDocument",value:function(){var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=s.a.common.GetDataSet3("DOC017",n?"'"+s.a.SessionManager.UserName+"'":"NULL",this.VoucherNo,this.DocID.toString());return n?null!=a&&(null===(e=a.Tables)||void 0===e?void 0:e.length)>0&&a.Columns[0].Contains("CNT")&&parseInt(a.Tables[0][0].CNT)>0?"Locked Successfully":"Lock failed":null!=a&&(null===(t=a.Tables)||void 0===t?void 0:t.length)>0&&a.Columns[0].Contains("CNT")&&parseInt(a.Tables[0][0].CNT)>0?"Unlocked Successfully":"UnLock failed"}},{key:"GetScannedPacks",value:function(e){return s.a.common.GetDataSet("DOC018",e)}},{key:"IsDistCost",value:function(e){var t=s.a.common.GetDataSet("DOC050",e);return!!(null!=t&&t.Tables.length>0&&t.Tables[0].length>0&&t.Columns[0].Contains("DistCost")&&"1"==a.e.String(t.Tables[0][0].DistCost))}},{key:"IsPostRecurDocumentWithApproval",value:function(e){Logger.InfoLog("Voucher Generator:: Inside IsRecurDocumet");var t=s.a.common.GetDataSet("DOC009",e);return!!(null!=t&&t.Tables.length>0&&t.Columns[0].Contains("PostRecurWithApproval")&&"1"==a.e.StringValue(t.Tables[0][0].PostRecurWithApproval))}},{key:"GetSchemes",value:function(e,t){var n=this;Logger.InfoLog("Voucher Generator:: Inside GetSchemes");var o="<XML>";this._CCFields.forEach((function(e){e instanceof c.b&&e.DBColumnName.Contains("TO")&&5==n.DocumentType||e instanceof c.b&&e.SelectedValue>0&&(o+='<Row CostCenterID="'+e.CCID+'" NODEID="'+e.SelectedValue.toString()+'" />')})),this.ColumnSource.forEach((function(e){e.CostCenterID>5e4&&n.GridDataColumns.Contains(e.ValueMember)?a.e.IsEmpty(t[e.ValueMember])?a.e.IsEmpty(t[e.DisplayMember])||(o+='<Row CostCenterID="'+e.CostCenterID+'" NODEID="'+t[e.DisplayMember].toString()+'" />'):o+='<Row CostCenterID="'+e.CostCenterID+'" NODEID="'+t[e.ValueMember].toString()+'" />':2!=e.CostCenterID||a.e.IsEmpty(t[e.ValueMember])||(1==n.DocumentType||2==n.DocumentType||10==n.DocumentType||26==n.DocumentType||27==n.DocumentType||3==n.DocumentType||4==n.DocumentType||25==n.DocumentType||13==n.DocumentType?o+='<Row CostCenterID="2" NODEID="'+t[e.ValueMember].toString()+'" />':11!=n.DocumentType&&38!=n.DocumentType&&39!=n.DocumentType&&6!=n.DocumentType&&7!=n.DocumentType&&8!=n.DocumentType&&9!=n.DocumentType&&12!=n.DocumentType&&24!=n.DocumentType||(o+='<Row CostCenterID="2" NODEID="'+t[e.ValueMember].toString()+'" />'))})),(1==this.DocumentType||2==this.DocumentType||10==this.DocumentType||26==this.DocumentType||27==this.DocumentType||3==this.DocumentType||4==this.DocumentType||25==this.DocumentType||13==this.DocumentType)&&null!=this.CreditAccount&&this.CreditAccount.SelectedValue>0?o+='<Row CostCenterID="2" NODEID="'+this.CreditAccount.SelectedValue.toString()+'" />':(11==this.DocumentType||38==this.DocumentType||39==this.DocumentType||6==this.DocumentType||7==this.DocumentType||8==this.DocumentType||9==this.DocumentType||12==this.DocumentType||24==this.DocumentType)&&null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0&&(o+='<Row CostCenterID="2" NODEID="'+this.DebitAccount.SelectedValue.toString()+'" />'),o+="</XML>";var i=[];return this.GridDataColumns.Contains("ProductID_Key")&&!a.e.IsEmpty(t.ProductID_Key)?i.push(t.ProductID_Key.toString()):i.push(0),i.push(o),i.push(e.ToString("dd/MMM/yyyy")),s.a.document.GetSchemes(i)}},{key:"GetPosPoints",value:function(e){Logger.InfoLog("Voucher Generator:: Inside GetPosPoints");var t=[];if(!a.e.IsEmpty(s.a.SessionManager.Preferences.Loyalty)&&"0"!=s.a.SessionManager.Preferences.Loyalty){if(s.a.SessionManager.Preferences.ContainsKey("LoyaltyOn")&&a.e.Int(s.a.SessionManager.Preferences.LoyaltyOn)>5e4){t.push(void 0);var n=this._CCFields.find((function(e){return e instanceof c.b&&null==e.CCID}));if(!(null!=n&&n.SelectedValue>0))return null;t.push(n.SelectedValue)}else{if(!(null!=this.DebitAccount&&this.DebitAccount.SelectedValue>0))return null;t.push(2),t.push(this.DebitAccount.SelectedValue)}t.push(this.DocID),t.push(s.a.SessionManager.Preferences.Loyalty),t.push(e.ToString("dd/MMM/yyyy")),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID);var o=s.a.inventory.GetPosPoints(t);return Logger.InfoLog("Voucher Generator: DBH.GetPosPoints "),o}return null}},{key:"getBatchSeq",value:function(e){var t=1,n=s.a.common.GetDataSet("DOC020",e);return null!=n&&n.Tables.length>0&&n.Tables[0].length>0&&a.e.IsNum(n.Tables[0][0].bno)&&(t=parseInt(n.Tables[0][0].bno)),t}},{key:"GetUserWiseDim",value:function(){Logger.InfoLog("Voucher Generator:: Inside GetUserWiseDim");var e=s.a.common.GetDataSet("DOC021",s.a.SessionManager.UserID);return Logger.InfoLog("Voucher Generator: DBH.GetUserWiseDim "),e}},{key:"GetRefDetails",value:function(e,t){Logger.InfoLog("Voucher Generator:: Inside GetRefDetails");var n=s.a.common.GetDataSet3("DOC022",e,t);return Logger.InfoLog("Voucher Generator: DBH.GetRefDetails "),null!=n&&n.Tables.length>0?n.Tables[0]:null}},{key:"GetUniqueDimension",value:function(e,t){if(2==e||3==e||e>5e4){var n=s.a.common.GetDataSet3("DOC023",e.toString(),t?"1":"0");if(null!=n&&n.Tables.length>0&&n.Tables[0].length>0&&!a.e.IsEmpty(n.Tables[0][0].isunique))return parseInt(n.Tables[0][0].isunique)}return 0}},{key:"GetCCData",value:function(e,t,n,o){Logger.InfoLog("Voucher Generator:: Inside GetCCData");var i="";e>5e4?(i="Select a.NodeID ID,a.Code,a.name","true"==s.a.SessionManager.Preferences.POSShowDimImage.toLowerCase()&&(i+=",f.GUID+'.'+f.FileExtension FileName"),i+=" from "+this.GetTableName(e)+" a WITH(NOLOCK) JOIN COM_CCCCData CC WITH(NOLOCK) ON CC.COSTCENTERID="+e+" AND CC.NODEID= a.NODEID ","true"==s.a.SessionManager.Preferences.POSShowDimImage.toLowerCase()&&(i+=" left join COM_Files f WITH(NOLOCK) on f.FeaturePK=a.NodeID and f.FeatureID="+e+" and f.IsDefaultImage=1 "),i+=n,a.e.IsEmpty(t)||(i+=" where "+t)):(3==e||e<0)&&("true"==s.a.SessionManager.Preferences.POSShowStockCodes.toLowerCase()&&""!=s.a.SessionManager.Preferences.POSItemCodeDimension?(e<0&&(i="Select p.ProductID ID,p.ProductCode Code,p.ProductName name,p.IsGroup,0 NodeID,'' StkCode","true"!=s.a.SessionManager.Preferences.POSShowProductImage.toLowerCase()&&"true"!=s.a.SessionManager.Preferences.POSShowDimImage.toLowerCase()||(i+=",f.GUID+'.'+f.FileExtension FileName"),""!=s.a.SessionManager.Preferences.POSSellingRate&&(i+=",0 MRP"),i+=" from inv_product p WITH(NOLOCK) JOIN COM_CCCCData CC WITH(NOLOCK) ON CC.COSTCENTERID=3 AND CC.NODEID= p.ProductID ","true"!=s.a.SessionManager.Preferences.POSShowProductImage.toLowerCase()&&"true"!=s.a.SessionManager.Preferences.POSShowDimImage.toLowerCase()||(i+=" left join COM_Files f WITH(NOLOCK) on f.FeaturePK=p.ProductID and f.FeatureID=3 and f.IsDefaultImage=1  "),i+=n,i+=" where p.IsGroup=1 ",a.e.IsEmpty(t)||(i+=" and "+t),i+=" union all "),i+=" Select test.*","true"!=s.a.SessionManager.Preferences.POSShowProductImage.toLowerCase()&&"true"!=s.a.SessionManager.Preferences.POSShowDimImage.toLowerCase()||("true"==s.a.SessionManager.Preferences.POSShowDimImage.toLowerCase()?i+=",f.ImageName FileName":i+=",f.GUID+'.'+f.FileExtension FileName"),""!=s.a.SessionManager.Preferences.POSSellingRate&&"PriceChart"!=s.a.SessionManager.Preferences.POSSellingRate&&(i+=",sp."+s.a.SessionManager.Preferences.POSSellingRate+" MRP"),i+="from (Select ID,Code,name,IsGroup,MAX(NodeID) NodeID,StkCode \n                from (Select p.ProductID this.ID,p.ProductCode Code,p.ProductName name,p.IsGroup,a.NodeID,a.Code StkCode,\n                (select isnull(sum(UOMConvertedQty*VoucherType),0) from INV_DocDetails i WITH(NOLOCK)\n                join COM_DocCCData c WITH(NOLOCK) on i.InvDocDetailsID=c.InvDocDetailsID \n                where c.DCCCNID"+(parseInt(s.a.SessionManager.Preferences.POSItemCodeDimension)-5e4)+"=a.NodeID "+o+") QOH\n                from "+this.GetTableName(parseInt(s.a.SessionManager.Preferences.POSItemCodeDimension))+" a WITH(NOLOCK) \n                join inv_product p WITH(NOLOCK) on a.ProductID=p.ProductID\n                JOIN COM_CCCCData CC WITH(NOLOCK) ON CC.COSTCENTERID=3 AND CC.NODEID= p.ProductID ",i+=n,a.e.IsEmpty(t)||(i+=" where "+t),i+=" ) as t group by ID,Code,name,IsGroup,StkCode  having SUM(QOH)>0 ) as test ",""!=s.a.SessionManager.Preferences.POSSellingRate&&"PriceChart"!=s.a.SessionManager.Preferences.POSSellingRate&&(i+="DealerPrice"!=s.a.SessionManager.Preferences.POSSellingRate&&"MRP"!=s.a.SessionManager.Preferences.POSSellingRate&&"AvgPrice"!=s.a.SessionManager.Preferences.POSSellingRate?" join inv_product sp WITH(NOLOCK) on sp.ProductID=test.ID ":" join "+this.GetTableName(parseInt(s.a.SessionManager.Preferences.POSItemCodeDimension))+" sp WITH(NOLOCK) on sp.NodeID=test.NodeID"),"true"!=s.a.SessionManager.Preferences.POSShowProductImage.toLowerCase()&&"true"!=s.a.SessionManager.Preferences.POSShowDimImage.toLowerCase()||("true"==s.a.SessionManager.Preferences.POSShowDimImage.toLowerCase()?i+=" join "+this.GetTableName(parseInt(s.a.SessionManager.Preferences.POSItemCodeDimension))+" f WITH(NOLOCK) on f.NodeID=test.NodeID":i+=" left join COM_Files f WITH(NOLOCK) on f.FeaturePK=test.ID and f.FeatureID=3 and f.IsDefaultImage=1 "),"true"==s.a.SessionManager.Preferences.POSShowProductCode.toLowerCase()?"true"==s.a.SessionManager.Preferences.POSShowStockCodes.toLowerCase()?i+=" order by StkCode,Code":i+=" order by Code":"true"==s.a.SessionManager.Preferences.POSShowProductName.toLowerCase()&&(i+=" order by name")):(i="Select p.ProductID ID,p.ProductCode Code,p.ProductName name,p.IsGroup","true"==s.a.SessionManager.Preferences.POSShowProductImage.toLowerCase()&&(i+=",f.GUID+'.'+f.FileExtension FileName"),""!=s.a.SessionManager.Preferences.POSSellingRate&&"PriceChart"!=s.a.SessionManager.Preferences.POSSellingRate&&"DealerPrice"!=s.a.SessionManager.Preferences.POSSellingRate&&"MRP"!=s.a.SessionManager.Preferences.POSSellingRate&&"AvgPrice"!=s.a.SessionManager.Preferences.POSSellingRate&&(i+=",p."+s.a.SessionManager.Preferences.POSSellingRate+" MRP"),i+=" from inv_product p WITH(NOLOCK) JOIN COM_CCCCData CC WITH(NOLOCK) ON CC.COSTCENTERID=3 AND CC.NODEID= p.ProductID ","true"==s.a.SessionManager.Preferences.POSShowProductImage.toLowerCase()&&(i+=" left join COM_Files f WITH(NOLOCK) on f.FeaturePK=p.ProductID and f.FeatureID=3 and f.IsDefaultImage=1 "),i+=n,a.e.IsEmpty(t)||(i+=" where "+t),"true"==s.a.SessionManager.Preferences.POSShowProductCode.toLowerCase()?i+=" order by p.ProductCode":"true"==s.a.SessionManager.Preferences.POSShowProductName.toLowerCase()&&(i+=" order by p.ProductName")));var r=s.a.common.GetDataSetQuery(encodeURIComponent(i));if(Logger.InfoLog("Voucher Generator: DBH.GetCCData "),null!=r&&r.Tables.length>0){var l=[];return(l=r.Tables[0]).Columns=r.Columns[0],l}return null}},{key:"GetPayrollProcessed",value:function(e,t){var n=[];return n.push(e),n.push(t),n.push(s.a.SessionManager.UserID),n.push(s.a.SessionManager.LanguageID),s.a.empService.GetPayrollProcessedStatus(n)}},{key:"GetEmployeePayrollInfo",value:function(e,t,n,a){var o=[];return o.push(e),o.push(a),o.push(n),o.push(t),o.push(s.a.SessionManager.AccountingFromMonth),o.push(s.a.SessionManager.UserID),o.push(s.a.SessionManager.LanguageID),s.a.empService.GetEmployeePayrollInfo(o)}},{key:"CheckLoanRepayAmountDetails",value:function(e){var t=[];return t.push(e),t.push(s.a.SessionManager.UserID),t.push(s.a.SessionManager.LanguageID),s.a.empService.GetLoanRepayAmountDetails(t)}},{key:"GetAllEmployeesList",value:function(e,t,n,a,o){var i=[];return i.push(e),i.push(t),i.push(0),i.push(0),i.push(s.a.SessionManager.UserID),i.push(s.a.SessionManager.LanguageID),i.push(n),i.push(a),i.push(o),s.a.empService.GetAllEmployeesList(i)}},{key:"GetPayrollComponents",value:function(e,t,n,a){var o=[];return o.push(e),o.push(t),o.push(n),o.push(a),o.push(s.a.SessionManager.UserID),o.push(s.a.SessionManager.LanguageID),s.a.empService.GetPayrollComponents(o)}},{key:"GetVacationDetails",value:function(e,t,n){var a=[];return a.push(e),a.push(t.ToString("dd MMM yyyy")),a.push(n.ToString("dd MMM yyyy")),a.push(s.a.SessionManager.UserID),a.push(s.a.SessionManager.LanguageID),s.a.empService.GetVacationDetails(a)}},{key:"GetVacationDays",value:function(e,t,n,a,o,i){var r=[];return r.push(e.ToString("dd MMM yyyy")),r.push(t.ToString("dd MMM yyyy")),r.push(n),r.push(a),r.push(o),r.push(i),r.push(s.a.SessionManager.UserID),r.push(s.a.SessionManager.LanguageID),s.a.empService.GetVacationDays(r)}},{key:"GetVacationAmount",value:function(e,t,n,a){var o=[];return o.push(e.ToString("dd MMM yyyy")),o.push(t.ToString("dd MMM yyyy")),o.push(n),o.push(a),o.push(s.a.SessionManager.UserID),o.push(s.a.SessionManager.LanguageID),s.a.empService.GetVacationAmount(o)}},{key:"GetAdjustmentLeaves",value:function(e,t,n,a){var o=[];return o.push(e),o.push(t),o.push(n),o.push(a),o.push(s.a.SessionManager.UserID),o.push(s.a.SessionManager.LanguageID),s.a.empService.GetAdjustmentLeaves(o)}},{key:"GetTDSMonthlyandQuarterlyDetails",value:function(e,t,n){var a=[];return a.push(e),a.push(t),a.push(n),s.a.empService.GetTDSMonthlyandQuarterlyDetails(a)}},{key:"GetEmpDimensionDetails",value:function(e,t,n){var a=[];return a.push(e),a.push(t),a.push(n),a.push(s.a.SessionManager.UserID),a.push(s.a.SessionManager.LanguageID),s.a.empService.GetEmpDimensionDetails(a)}},{key:"GetVouchersList",value:function(e,t,n,a){try{var o=[];return o.push(e),o.push(t),o.push(n),o.push(a),s.a.document.GetSearchData(s.a.SessionManager.CompanyIndex,o)}catch(i){return Logger.ErrorLog("VoucherGenerator:: GetVouchersList"+i.stack),null}}},{key:"LocationID",get:function(){return this._locID},set:function(e){s.a.SessionManager.Preferences.ContainsKey("LWAccPeriod")&&"True"==s.a.SessionManager.Preferences.LWAccPeriod.toString()&&(this.dtLocWise=this.getAccoutingDate(e)),this._locID=e}},{key:"IsDocEdit",get:function(){return this.DocID>0||this.DocID<-1e4}},{key:"IsPayrollDocument",get:function(){return this.DocumentType>=51&&this.DocumentType<=199&&64!=this.DocumentType}},{key:"Prefix",get:function(){var e="";return null!=this.DocPrefix&&null!=this.DocPrefix.ComboBox.SelectedValue&&(e=this.DocPrefix.ComboBox.SelectedValue),e}},{key:"SelectedGridRowIndex",get:function(){return this.GridDataObj.SelectedIndex}}],[{key:"UpdateScheduleEvents",value:function(e,t,n){var a=[];return a.push(e),a.push(t),a.push(n),a.push(s.a.SessionManager.UserID),a.push(s.a.SessionManager.LanguageID),s.a.report.UpdateScheduleEvents(a)}},{key:"GetPOSDetails",value:function(e,t,n,a,o,i){return s.a.document.GetPOSDetails(e,t,n,a,o,i)}},{key:"POSLogin",value:function(e,t,n,o,i,r,l,u){var c=[];c.push(e),c.push(t),c.push(n),c.push(o),c.push(i),c.push(r),c.push(l),c.push(s.a.SessionManager.IPAddress),c.push(s.a.SessionManager.CompanyGUID),c.push(s.a.SessionManager.UserName),c.push(s.a.SessionManager.RoleID),c.push(s.a.SessionManager.UserID),c.push(s.a.SessionManager.LanguageID);var D=s.a.document.POSLogin(c);return null!=D&&D.Tables.length>0&&D.Tables[0].length>0&&a.e.IsNum(D.Tables[0][0][D.Columns[0][0]])&&(u.RetVal=parseInt(D.Tables[0][0][D.Columns[0][0]])),D}},{key:"GetDocStatusHistory",value:function(e,t,n){var a=[];return a.push(e),a.push(t),a.push(n),a.push(s.a.SessionManager.UserID),a.push(s.a.SessionManager.LanguageID),s.a.document.GetDocStatusHistory(a)}},{key:"GetLookupData",value:function(e){var t=s.a.common.GetDataSet("DOC019",e.toString());return null!=t&&t.Tables.length>0&&t.Columns[0].Contains("NodeID")?t.Tables[0]:null}}]),e}()}}]);